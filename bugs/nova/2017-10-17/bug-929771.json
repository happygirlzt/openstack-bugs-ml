{
    "status": "Won't Fix", 
    "last_updated": "2014-08-22 05:13:41.880582+00:00", 
    "description": "A 500 is returned on a POST request to create a new volume_type if you don't include a content-type header.   \n\ncurl -H \"x-auth-token: <auth token>\" http:/<server mangement url>/v1.1/7<account>/os-volume-types -XPOST -T SATA.json  | python -m json.tool\n\n{\n    \"computeFault\": {\n        \"code\": 500, \n        \"message\": \"The server has either erred or is incapable of performing\\r\\nthe requested operation.\\r\\n\"\n    }\n}\n\n\n\n\n2012-02-09 11:46:27,337 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d]\nMatched POST /7e6c1592093d4ffabae29c886bcf741d/os-volume-types from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,338 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d]\nRoute path: '/{project_id}/os-volume-types', defaults: {'action': u'create', 'controller': <nova.api.openstack.wsgi.Resource object at 0x29c1390>} from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,338 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Match dict: {'action': u'create', 'controller': <nova.api.openstack.wsgi.Resource object at 0x29c1390>, 'project_id': u'7e6c1592093d4ffabae29c886bcf741d'} from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,339 INFO nova.api.openstack.wsgi [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] POST http://z2-api1.ohthree.com:8774/v1.1/7e6c1592093d4ffabae29c886bcf741d/os-volume-types\n2012-02-09 11:46:27,339 DEBUG nova.api.openstack.wsgi [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Unrecognized Content-Type provided in request from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,340 ERROR nova.api.openstack [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Caught error: create() takes exactly 3 non-keyword arguments (2 given)\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/__init__.py\", line 41, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/keystone/middleware/auth_token.py\", line 343, in __call__\n(nova.api.openstack): TRACE:     return self._forward_request(env, start_response, proxy_headers)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/keystone/middleware/auth_token.py\", line 576, in _forward_request\n(nova.api.openstack): TRACE:     return self.app(env, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/wsgi.py\", line 834, in __call__\n(nova.api.openstack): TRACE:     action_result = self.dispatch(meth, request, action_args)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/wsgi.py\", line 908, in dispatch\n(nova.api.openstack): TRACE:     return method(req=request, **action_args)\n(nova.api.openstack): TRACE: TypeError: create() takes exactly 3 non-keyword arguments (2 given)\n(nova.api.openstack): TRACE:", 
    "tags": [], 
    "importance": "Low", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/929771", 
    "owner": "None", 
    "id": 929771, 
    "index": 439, 
    "openned": "2012-02-09 19:47:59.603171+00:00", 
    "created": "2012-02-09 19:47:59.603171+00:00", 
    "title": "No content-type in create volume type request returns 500", 
    "comments": [
        {
            "content": "A 500 is returned on a POST request to create a new volume_type if you don't include a content-type header.   \n\ncurl -H \"x-auth-token: <auth token>\" http:/<server mangement url>/v1.1/7<account>/os-volume-types -XPOST -T SATA.json  | python -m json.tool\n\n{\n    \"computeFault\": {\n        \"code\": 500, \n        \"message\": \"The server has either erred or is incapable of performing\\r\\nthe requested operation.\\r\\n\"\n    }\n}\n\n\n\n\n2012-02-09 11:46:27,337 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d]\nMatched POST /7e6c1592093d4ffabae29c886bcf741d/os-volume-types from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,338 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d]\nRoute path: '/{project_id}/os-volume-types', defaults: {'action': u'create', 'controller': <nova.api.openstack.wsgi.Resource object at 0x29c1390>} from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,338 DEBUG routes.middleware [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Match dict: {'action': u'create', 'controller': <nova.api.openstack.wsgi.Resource object at 0x29c1390>, 'project_id': u'7e6c1592093d4ffabae29c886bcf741d'} from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,339 INFO nova.api.openstack.wsgi [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] POST http://z2-api1.ohthree.com:8774/v1.1/7e6c1592093d4ffabae29c886bcf741d/os-volume-types\n2012-02-09 11:46:27,339 DEBUG nova.api.openstack.wsgi [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Unrecognized Content-Type provided in request from (pid=30322) debug /usr/lib/python2.6/dist-packages/nova/log.py:175\n2012-02-09 11:46:27,340 ERROR nova.api.openstack [req-91b89854-65dc-4d84-afcd-ae557977b928 a15a08c27d3b42499ef5972ce6c61a40 7e6c1592093d4ffabae29c886bcf741d] Caught error: create() takes exactly 3 non-keyword arguments (2 given)\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/__init__.py\", line 41, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/keystone/middleware/auth_token.py\", line 343, in __call__\n(nova.api.openstack): TRACE:     return self._forward_request(env, start_response, proxy_headers)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/keystone/middleware/auth_token.py\", line 576, in _forward_request\n(nova.api.openstack): TRACE:     return self.app(env, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/wsgi.py\", line 834, in __call__\n(nova.api.openstack): TRACE:     action_result = self.dispatch(meth, request, action_args)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/api/openstack/wsgi.py\", line 908, in dispatch\n(nova.api.openstack): TRACE:     return method(req=request, **action_args)\n(nova.api.openstack): TRACE: TypeError: create() takes exactly 3 non-keyword arguments (2 given)\n(nova.api.openstack): TRACE:", 
            "date_created": "2012-02-09 19:47:59.603171+00:00", 
            "author": "https://api.launchpad.net/1.0/~letterj"
        }, 
        {
            "content": "Hrmmm... so this particular issue was \"fixed\" in https://github.com/openstack/nova/commit/1d4e35be694884a0ea8e586ffb2d06ecd6c48685#L4R732\n\nBut this ResourceExceptionHandler as written will hide any exception that is a subclass of a TypeError.\n\nI don't think it's enough to log it and return a _client_ error.\n\nCan the Controller methods be more tolerant of their calling signature - e.g. provide default's for their expected params and raise Faults when they are not provided?  Or maybe make the dispatch method do a better job of validating the request before attempting to pass a possibly incomplete or over-populated set of \"action_args\" down to the controller.  Hopefully there's enough convention around the signatures of the controller methods that you don't have to resort to meth.func_code.co_varnames?\n", 
            "date_created": "2012-02-09 20:57:58.469350+00:00", 
            "author": "https://api.launchpad.net/1.0/~clay-gerrard"
        }, 
        {
            "content": "Hi Jay/Caly, I was trying to reproduce this issue. To start with I tried a list operation on the volume types and it returned a 404 Resource not found response.\n\n:~/devstack/devstack$ curl -v -H \"X-Auth-Token:$token\" http:/xxxx:8774/v2/<tenantid>/os-volume-types\n> \n* HTTP 1.1 or later with persistent connection, pipelining supported\n< HTTP/1.1 404 Not Found\n< Content-Length: 154\n< Content-Type: text/html; charset=UTF-8\n< Date: Sun, 08 Sep 2013 05:17:12 GMT\n< \n<html>\n <head>\n  <title>404 Not Found</title>\n </head>\n <body>\n  <h1>404 Not Found</h1>\n  The resource could not be found.<br /><br />\n\n\nI used both the V2 and V3 compute API endpoints with and without content type header. Jay was using compute API v1.1, i'm wondering if os-volume-types was deprecated? All the other compute calls using curl succeeded for me.\n\n\nThanks,\nSubashini", 
            "date_created": "2013-09-08 05:48:09.496216+00:00", 
            "author": "https://api.launchpad.net/1.0/~subashini-rajan17"
        }, 
        {
            "content": "nova volumes does not exist anymre", 
            "date_created": "2014-08-22 05:13:33.180617+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }
    ], 
    "closed": "2014-08-22 05:13:39.599099+00:00"
}