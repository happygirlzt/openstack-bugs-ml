{
    "status": "Fix Released", 
    "last_updated": "2015-11-03 08:46:40.202646+00:00", 
    "description": "Description of problem:\nAfter installation with packstack of openstack over IPv6 address(All components using IPv6) VNC console is unreachable\n\nVersion-Release number of selected component (if applicable):\nPackstack version-\npackstack Kilo 2015.1.dev1537.gba5183c\nRHEL version -\nRed Hat Enterprise Linux Server release 7.1 (Maipo)\nopenstack versions:\n2015.1.0\nnovnc-0.5.1-2.el7.noarch\nopenstack-nova-cert-2015.1.0-3.el7.noarch\nopenstack-nova-compute-2015.1.0-3.el7.noarch\nopenstack-nova-common-2015.1.0-3.el7.noarch\npython-nova-2015.1.0-3.el7.noarch\nopenstack-nova-novncproxy-2015.1.0-3.el7.noarch\nopenstack-nova-console-2015.1.0-3.el7.noarch\nopenstack-nova-scheduler-2015.1.0-3.el7.noarch\nopenstack-nova-conductor-2015.1.0-3.el7.noarch\nopenstack-nova-api-2015.1.0-3.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\n\n\nHow reproducible:\nTry to open noVNC console via the web browser with IPv6 address\n\nSteps to Reproduce:\n1. Install openstack with IPv6 addresses for all components\n2. Login to the horizon dashboard using IPv6\n3. Launch an instance\n4. try to activate console\n\nActual results:\nConsole failed to connect - error 1006\n\nExpected results:\nConsole should connect successfully\n\nAdditional info:\n\nnova novnc log:\n2015-05-12 10:25:33.961 15936 INFO nova.console.websocketproxy [-] WebSocket server settings:\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Listen on ::0:6080\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Flash security policy server\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Web server. Web root: /usr/share/novnc\n2015-05-12 10:25:33.963 15936 INFO nova.console.websocketproxy [-]   - No SSL/TLS support (no cert file)\n2015-05-12 10:25:33.965 15936 INFO nova.console.websocketproxy [-]   - proxying from ::0:6080 to None:None\n2015-05-13 10:33:12.084 15936 CRITICAL nova [-] UnboundLocalError: local variable 'exc' referenced before assignment\n2015-05-13 10:33:12.084 15936 TRACE nova Traceback (most recent call last):\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/bin/nova-novncproxy\", line 10, in <module>\n2015-05-13 10:33:12.084 15936 TRACE nova     sys.exit(main())\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/novncproxy.py\", line 49, in main\n2015-05-13 10:33:12.084 15936 TRACE nova     port=CONF.novncproxy_port)\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/baseproxy.py\", line 72, in proxy\n2015-05-13 10:33:12.084 15936 TRACE nova     RequestHandlerClass=websocketproxy.NovaProxyRequestHandler\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/websockify/websocket.py\", line 1018, in start_server\n2015-05-13 10:33:12.084 15936 TRACE nova     self.msg(\"handler exception: %s\", str(exc))\n2015-05-13 10:33:12.084 15936 TRACE nova UnboundLocalError: local variable 'exc' referenced before assignment\n2015-05-13 10:33:12.084 15936 TRACE nova \n2015-05-13 10:52:41.893 3696 INFO nova.console.websocketproxy [-] WebSocket server settings:\n2015-05-13 10:52:41.893 3696 INFO nova.console.websocketproxy [-]   - Listen on ::0:6080\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - Flash security policy server\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - Web server. Web root: /usr/share/novnc\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - No SSL/TLS support (no cert file)\n2015-05-13 10:52:41.920 3696 INFO nova.console.websocketproxy [-]   - proxying from ::0:6080 to None:None\n2015-05-13 10:54:04.345 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connecting to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.380 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connected to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.388 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connecting to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.408 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connected to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.554 3979 INFO nova.console.websocketproxy [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] handler exception: Origin header does not match this host.\n\n\nI'm attaching nova.conf and vnc log.", 
    "tags": [
        "in-stable-kilo"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1456963", 
    "owner": "https://api.launchpad.net/1.0/~sridhargaddam", 
    "id": 1456963, 
    "index": 4256, 
    "openned": "2015-05-20 09:25:00.462467+00:00", 
    "created": "2015-05-20 09:25:00.462467+00:00", 
    "title": "VNC Console failed to load with IPv6 Addresses", 
    "comments": [
        {
            "content": "Description of problem:\nAfter installation with packstack of openstack over IPv6 address(All components using IPv6) VNC console is unreachable\n\nVersion-Release number of selected component (if applicable):\nPackstack version-\npackstack Kilo 2015.1.dev1537.gba5183c\nRHEL version -\nRed Hat Enterprise Linux Server release 7.1 (Maipo)\nopenstack versions:\n2015.1.0\nnovnc-0.5.1-2.el7.noarch\nopenstack-nova-cert-2015.1.0-3.el7.noarch\nopenstack-nova-compute-2015.1.0-3.el7.noarch\nopenstack-nova-common-2015.1.0-3.el7.noarch\npython-nova-2015.1.0-3.el7.noarch\nopenstack-nova-novncproxy-2015.1.0-3.el7.noarch\nopenstack-nova-console-2015.1.0-3.el7.noarch\nopenstack-nova-scheduler-2015.1.0-3.el7.noarch\nopenstack-nova-conductor-2015.1.0-3.el7.noarch\nopenstack-nova-api-2015.1.0-3.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\n\n\nHow reproducible:\nTry to open noVNC console via the web browser with IPv6 address\n\nSteps to Reproduce:\n1. Install openstack with IPv6 addresses for all components\n2. Login to the horizon dashboard using IPv6\n3. Launch an instance\n4. try to activate console\n\nActual results:\nConsole failed to connect - error 1006\n\nExpected results:\nConsole should connect successfully\n\nAdditional info:\n\nnova novnc log:\n2015-05-12 10:25:33.961 15936 INFO nova.console.websocketproxy [-] WebSocket server settings:\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Listen on ::0:6080\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Flash security policy server\n2015-05-12 10:25:33.962 15936 INFO nova.console.websocketproxy [-]   - Web server. Web root: /usr/share/novnc\n2015-05-12 10:25:33.963 15936 INFO nova.console.websocketproxy [-]   - No SSL/TLS support (no cert file)\n2015-05-12 10:25:33.965 15936 INFO nova.console.websocketproxy [-]   - proxying from ::0:6080 to None:None\n2015-05-13 10:33:12.084 15936 CRITICAL nova [-] UnboundLocalError: local variable 'exc' referenced before assignment\n2015-05-13 10:33:12.084 15936 TRACE nova Traceback (most recent call last):\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/bin/nova-novncproxy\", line 10, in <module>\n2015-05-13 10:33:12.084 15936 TRACE nova     sys.exit(main())\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/novncproxy.py\", line 49, in main\n2015-05-13 10:33:12.084 15936 TRACE nova     port=CONF.novncproxy_port)\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/baseproxy.py\", line 72, in proxy\n2015-05-13 10:33:12.084 15936 TRACE nova     RequestHandlerClass=websocketproxy.NovaProxyRequestHandler\n2015-05-13 10:33:12.084 15936 TRACE nova   File \"/usr/lib/python2.7/site-packages/websockify/websocket.py\", line 1018, in start_server\n2015-05-13 10:33:12.084 15936 TRACE nova     self.msg(\"handler exception: %s\", str(exc))\n2015-05-13 10:33:12.084 15936 TRACE nova UnboundLocalError: local variable 'exc' referenced before assignment\n2015-05-13 10:33:12.084 15936 TRACE nova \n2015-05-13 10:52:41.893 3696 INFO nova.console.websocketproxy [-] WebSocket server settings:\n2015-05-13 10:52:41.893 3696 INFO nova.console.websocketproxy [-]   - Listen on ::0:6080\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - Flash security policy server\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - Web server. Web root: /usr/share/novnc\n2015-05-13 10:52:41.894 3696 INFO nova.console.websocketproxy [-]   - No SSL/TLS support (no cert file)\n2015-05-13 10:52:41.920 3696 INFO nova.console.websocketproxy [-]   - proxying from ::0:6080 to None:None\n2015-05-13 10:54:04.345 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connecting to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.380 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connected to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.388 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connecting to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.408 3979 INFO oslo_messaging._drivers.impl_rabbit [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] Connected to AMQP server on 2001:77:77:77:f816:3eff:fe95:8683:5672\n2015-05-13 10:54:04.554 3979 INFO nova.console.websocketproxy [req-e47dae76-1c51-4ce8-9100-d98022fc6e34 - - - - -] handler exception: Origin header does not match this host.\n\n\nI'm attaching nova.conf and vnc log.", 
            "date_created": "2015-05-20 09:25:00.462467+00:00", 
            "author": "https://api.launchpad.net/1.0/~ushkalim"
        }, 
        {
            "content": "", 
            "date_created": "2015-05-20 09:25:00.462467+00:00", 
            "author": "https://api.launchpad.net/1.0/~ushkalim"
        }, 
        {
            "content": "", 
            "date_created": "2015-05-20 09:25:27.706839+00:00", 
            "author": "https://api.launchpad.net/1.0/~ushkalim"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/187089", 
            "date_created": "2015-06-01 01:31:46.736579+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/kilo\nReview: https://review.openstack.org/191807", 
            "date_created": "2015-06-15 14:03:17.534291+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/juno\nReview: https://review.openstack.org/191811", 
            "date_created": "2015-06-15 14:08:08.520881+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/187089\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=7d5cddf3e4351eaf406344baf20faccb1fef5f34\nSubmitter: Jenkins\nBranch:    master\n\ncommit 7d5cddf3e4351eaf406344baf20faccb1fef5f34\nAuthor: sridhargaddam <email address hidden>\nDate:   Mon Jun 1 00:25:03 2015 +0000\n\n    Fix noVNC console access for an IPv6 setup\n    \n    Following a recent change in websocket proxy code\n    (commit: fdb73a2d445971c6158a80692c6f74094fd4193a),\n    novnc console access is not working for IPv6 addresses.\n    This patch fixes the issue by taking into account the way\n    IPv6 urls are constructed and parsing them accordingly.\n    \n    Closes-Bug: #1456963\n    Change-Id: Ia6c50be1e3cbe8a21f0a75b6a7cebd1712d311f8\n", 
            "date_created": "2015-06-15 15:59:40.066464+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/191807\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=30fe27dd3f4d8f53981c2162f1e34b837d3c6437\nSubmitter: Jenkins\nBranch:    stable/kilo\n\ncommit 30fe27dd3f4d8f53981c2162f1e34b837d3c6437\nAuthor: sridhargaddam <email address hidden>\nDate:   Mon Jun 1 00:25:03 2015 +0000\n\n    Fix noVNC console access for an IPv6 setup\n    \n    Following a recent change in websocket proxy code\n    (commit: fdb73a2d445971c6158a80692c6f74094fd4193a),\n    novnc console access is not working for IPv6 addresses.\n    This patch fixes the issue by taking into account the way\n    IPv6 urls are constructed and parsing them accordingly.\n    \n    (cherry picked from commit 7d5cddf3e4351eaf406344baf20faccb1fef5f34)\n    \n    Closes-Bug: #1456963\n    Change-Id: Ia6c50be1e3cbe8a21f0a75b6a7cebd1712d311f8\n", 
            "date_created": "2015-06-16 18:43:11.884483+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by sahid (<email address hidden>) on branch: stable/juno\nReview: https://review.openstack.org/191811", 
            "date_created": "2015-11-03 08:46:39.428645+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-06-24 12:18:58.667332+00:00"
}