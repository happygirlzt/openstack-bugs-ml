{
    "status": "Invalid", 
    "last_updated": "2017-01-11 09:27:15.403043+00:00", 
    "description": "We have Liberty setup with all services in HA. Sometimes vm creation is getting failed throwing below error. We are getting this error randomly.\n\n\" nCould not find image fdc-centos7-image: 500 Internal Server Error Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<class 'glanceclient.exc.HTTPServiceUnavailable'>\\n\\n \"\n\nBelow is the nova api log:\n\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions [req-6f2cacb2-c36b-464e-b816-3caad8c24746 3612616185a748f788fb0532729ccc3a 5896939c506840c2bf083cb1100bee2b - - -] Unexpected exception in API method\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/images.py\", line 145, in detail\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     **page_params)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/image/api.py\", line 68, in get_all\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return session.detail(context, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/image/glance.py\", line 284, in detail\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     for image in images:\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 254, in list\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     for image in paginate(params, return_request_id):\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 238, in paginate\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     images, resp = self._list(url, \"images\")\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 63, in _list\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     resp, body = self.client.get(url)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 280, in get\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return self._request('GET', url, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 272, in _request\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     resp, body_iter = self._handle_response(resp)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 93, in _handle_response\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     raise exc.from_response(resp, resp.content)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions HTTPInternalServerError: 500 Internal Server Error: The server has either erred or is incapable of performing the requested operation. (HTTP 500)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions\n2017-01-09 05:19:00.583 592 INFO nova.api.openstack.wsgi [req-6f2cacb2-c36b-464e-b816-3caad8c24746 3612616185a748f788fb0532729ccc3a 5896939c506840c2bf083cb1100bee2b - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'>", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1654990", 
    "owner": "None", 
    "id": 1654990, 
    "index": 7881, 
    "openned": "2017-01-09 11:28:02.978044+00:00", 
    "created": "2017-01-09 11:28:02.978044+00:00", 
    "title": "Vm creation getting failed with image not found error", 
    "comments": [
        {
            "content": "We have Liberty setup with all services in HA. Sometimes vm creation is getting failed throwing below error. We are getting this error randomly.\n\n\" nCould not find image fdc-centos7-image: 500 Internal Server Error Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<class 'glanceclient.exc.HTTPServiceUnavailable'>\\n\\n \"\n\nBelow is the nova api log:\n\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions [req-6f2cacb2-c36b-464e-b816-3caad8c24746 3612616185a748f788fb0532729ccc3a 5896939c506840c2bf083cb1100bee2b - - -] Unexpected exception in API method\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/images.py\", line 145, in detail\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     **page_params)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/image/api.py\", line 68, in get_all\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return session.detail(context, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/image/glance.py\", line 284, in detail\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     for image in images:\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 254, in list\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     for image in paginate(params, return_request_id):\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 238, in paginate\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     images, resp = self._list(url, \"images\")\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/v1/images.py\", line 63, in _list\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     resp, body = self.client.get(url)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 280, in get\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     return self._request('GET', url, **kwargs)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 272, in _request\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     resp, body_iter = self._handle_response(resp)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/glanceclient/common/http.py\", line 93, in _handle_response\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions     raise exc.from_response(resp, resp.content)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions HTTPInternalServerError: 500 Internal Server Error: The server has either erred or is incapable of performing the requested operation. (HTTP 500)\n2017-01-09 05:19:00.582 592 ERROR nova.api.openstack.extensions\n2017-01-09 05:19:00.583 592 INFO nova.api.openstack.wsgi [req-6f2cacb2-c36b-464e-b816-3caad8c24746 3612616185a748f788fb0532729ccc3a 5896939c506840c2bf083cb1100bee2b - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'>", 
            "date_created": "2017-01-09 11:28:02.978044+00:00", 
            "author": "https://api.launchpad.net/1.0/~manav-kiit"
        }, 
        {
            "content": "The glance log is below:\n\n\n2017-01-09 02:29:06.925 18008 ERROR glance.registry.client.v1.client ServiceUnavailable: The request returned 503 Service Unavailable. This generally occurs on service overload or other transient outage.\n2017-01-09 02:29:06.925 18008 ERROR glance.registry.client.v1.client\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi [req-389c5d41-14d6-47cd-a1af-f41166051c14 3612616185a748f788fb0532729ccc3a 5896939c506840c2bf083cb1100bee2b - - -] Caught error: The request returned 503 Service Unavailable. This generally occurs on service overload or other transient outage.\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi Traceback (most recent call last):\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/wsgi.py\", line 879, in __call__\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     request, **action_args)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/wsgi.py\", line 907, in dispatch\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     return method(*args, **kwargs)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/api/v1/images.py\", line 430, in meta\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     image_meta = self.get_image_meta_or_404(req, id)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/api/v1/controller.py\", line 42, in get_image_meta_or_404\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     return registry.get_image_metadata(context, image_id)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/registry/client/v1/api.py\", line 160, in get_image_metadata\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     return c.get_image(image_id)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/registry/client/v1/client.py\", line 158, in get_image\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     res = self.do_request(\"GET\", \"/images/%s\" % image_id)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/registry/client/v1/client.py\", line 136, in do_request\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     'exc_name': exc_name})\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 195, in __exit__\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     six.reraise(self.type_, self.value, self.tb)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/registry/client/v1/client.py\", line 121, in do_request\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     **kwargs)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/client.py\", line 71, in wrapped\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     return func(self, *args, **kwargs)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/client.py\", line 375, in do_request\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     headers=copy.deepcopy(headers))\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/client.py\", line 88, in wrapped\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     return func(self, method, url, body, headers)\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/site-packages/glance/common/client.py\", line 534, in _do_request\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi     raise exception.ServiceUnavailable(retry=_retry(res))\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi ServiceUnavailable: The request returned 503 Service Unavailable. This generally occurs on service overload or other transient outage.\n2017-01-09 02:29:06.925 18008 ERROR glance.common.wsgi\n", 
            "date_created": "2017-01-10 06:40:38.222959+00:00", 
            "author": "https://api.launchpad.net/1.0/~manav-kiit"
        }, 
        {
            "content": "Now i saw these logs in glance:-\n\n2017-01-10 02:13:37.989 26445 ERROR keystonemiddleware.auth_token [-] Bad response code while validating token: 500\n2017-01-10 02:13:37.990 26445 WARNING keystonemiddleware.auth_token [-] Identity response: {\"error\": {\"message\": \"Maximum lock attempts on _lockusertokens-c714853738dc416db48ce266d2cb74e2 occurred. (Disable debug mode to suppress these details.)\", \"code\": 500, \"title\": \"Internal Server Error\"}}\n2017-01-10 02:13:37.990 26445 CRITICAL keystonemiddleware.auth_token [-] Unable to validate token: Failed to fetch token data from identity server\n", 
            "date_created": "2017-01-10 11:34:39.758122+00:00", 
            "author": "https://api.launchpad.net/1.0/~manav-kiit"
        }, 
        {
            "content": "This doesn't appear to be a nova issue, the keystone error in c#2 suggesting an issue with memcached in your environment that in turn is bubbling back up to Glance and finally Nova.\n\nLiberty is also an unsupported release at present so I'm marking this as invalid for now but feel free to change this if you are able to reproduce this against a supported release.", 
            "date_created": "2017-01-11 09:27:01.115986+00:00", 
            "author": "https://api.launchpad.net/1.0/~lyarwood"
        }
    ], 
    "closed": "2017-01-11 09:27:13.029475+00:00"
}