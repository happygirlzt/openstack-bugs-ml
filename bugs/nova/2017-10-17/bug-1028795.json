{
    "status": "Invalid", 
    "last_updated": "2012-07-27 01:45:02.650802+00:00", 
    "description": "When using kombu as rpc_backend, openstack components could not connect to qpid server. While using qpid as rpc_backend, it works well. The os is RHEL6.1.\n\nBelow is the detailed log. Qpid server is 0.14 version with auth=no set in config file.\n\nQpid boots up normally as the log below.\n---------------------------------------------------------------\n2012-07-24 09:38:45 info Registered replication exchange\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.direct\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.topic\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.fanout\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.match\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qpid.management\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qmf.default.topic\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qmf.default.direct\n2012-07-24 09:38:45 info SASL enabled\n2012-07-24 09:38:45 notice Listening on TCP port 5672\n2012-07-24 09:38:45 info Policy file not specified. ACL Disabled, no ACL checking being done!\n2012-07-24 09:38:45 debug Daemon ready on port: 5672\n2012-07-24 09:38:45 notice Broker running\n2012-07-24 09:38:55 debug Management agent periodic processing: management snapshot: 1 packages, 0 objects (0 deleted), 11 new objects  (0 deleted), 0 pending deletes\n2012-07-24 09:38:55 trace Management agent periodic processing: new objects\n   org.apache.qpid.broker:system:7cbd658f-ac3f-40c5-90c3-2e820b559ff7\n   org.apache.qpid.broker:broker:amqp-broker\n   org.apache.qpid.broker:vhost:org.apache.qpid.broker:broker:amqp-broker,/\n   org.apache.qpid.broker:exchange:\n   org.apache.qpid.broker:exchange:amq.direct\n   org.apache.qpid.broker:exchange:amq.topic\n   org.apache.qpid.broker:exchange:amq.fanout\n   org.apache.qpid.broker:exchange:amq.match\n   org.apache.qpid.broker:exchange:qpid.management\n   org.apache.qpid.broker:exchange:qmf.default.topic\n   org.apache.qpid.broker:exchange:qmf.default.direct\n2012-07-24 09:38:55 trace Changed V1 properties org.apache.qpid.broker:broker:amqp-broker len=158\n2012-07-24 09:38:55 trace Changed V1 statistics org.apache.qpid.broker:broker:amqp-broker len=102\n---------------------------------------------------------------\n \nWhile on the same server, nova-network/compute/cert/scheduler could not connect to this queue.\nThe log is as below\n---------------------------------------------------------------\n2012-07-24 09:55:04 INFO nova.rpc.common [-] Reconnecting to AMQP server on 192.168.11.100:5672\n2012-07-24 09:55:04 ERROR nova.rpc.common [-] AMQP server on 192.168.11.100:5672 is unreachable: Socket closed. Trying again in 30 seconds.\n2012-07-24 09:55:04 TRACE nova.rpc.common Traceback (most recent call last):\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/nova/rpc/impl_kombu.py\", line 446, in reconnect\n2012-07-24 09:55:04 TRACE nova.rpc.common     self._connect()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/nova/rpc/impl_kombu.py\", line 423, in _connect\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.connection.connect()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 173, in connect\n2012-07-24 09:55:04 TRACE nova.rpc.common     return self.connection\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 585, in connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     self._connection = self._establish_connection()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 546, in _establish_connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     conn = self.transport.establish_connection()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/transport/amqplib.py\", line 244, in establish_connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     connect_timeout=conninfo.connect_timeout)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/transport/amqplib.py\", line 54, in __init__\n2012-07-24 09:55:04 TRACE nova.rpc.common     super(Connection, self).__init__(*args, **kwargs)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/connection.py\", line 135, in __init__\n2012-07-24 09:55:04 TRACE nova.rpc.common     (10, 10), # start\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/abstract_channel.py\", line 95, in wait\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.channel_id, allowed_methods)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/connection.py\", line 202, in _wait_method\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.method_reader.read_method()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/method_framing.py\", line 221, in read_method\n2012-07-24 09:55:04 TRACE nova.rpc.common     raise m\n2012-07-24 09:55:04 TRACE nova.rpc.common IOError: Socket closed\n---------------------------------------------------------------\n \nI already turned iptables off.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1028795", 
    "owner": "https://api.launchpad.net/1.0/~willfly0620", 
    "id": 1028795, 
    "index": 4236, 
    "openned": "2012-07-25 08:17:04.248849+00:00", 
    "created": "2012-07-25 08:17:04.248849+00:00", 
    "title": "kombu could not connect to qpid on RHEL6.1", 
    "comments": [
        {
            "content": "When using kombu as rpc_backend, openstack components could not connect to qpid server. While using qpid as rpc_backend, it works well. The os is RHEL6.1.\n\nBelow is the detailed log. Qpid server is 0.14 version with auth=no set in config file.\n\nQpid boots up normally as the log below.\n---------------------------------------------------------------\n2012-07-24 09:38:45 info Registered replication exchange\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.direct\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.topic\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.fanout\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:amq.match\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qpid.management\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qmf.default.topic\n2012-07-24 09:38:45 debug Management object (V1) added: org.apache.qpid.broker:exchange:qmf.default.direct\n2012-07-24 09:38:45 info SASL enabled\n2012-07-24 09:38:45 notice Listening on TCP port 5672\n2012-07-24 09:38:45 info Policy file not specified. ACL Disabled, no ACL checking being done!\n2012-07-24 09:38:45 debug Daemon ready on port: 5672\n2012-07-24 09:38:45 notice Broker running\n2012-07-24 09:38:55 debug Management agent periodic processing: management snapshot: 1 packages, 0 objects (0 deleted), 11 new objects  (0 deleted), 0 pending deletes\n2012-07-24 09:38:55 trace Management agent periodic processing: new objects\n   org.apache.qpid.broker:system:7cbd658f-ac3f-40c5-90c3-2e820b559ff7\n   org.apache.qpid.broker:broker:amqp-broker\n   org.apache.qpid.broker:vhost:org.apache.qpid.broker:broker:amqp-broker,/\n   org.apache.qpid.broker:exchange:\n   org.apache.qpid.broker:exchange:amq.direct\n   org.apache.qpid.broker:exchange:amq.topic\n   org.apache.qpid.broker:exchange:amq.fanout\n   org.apache.qpid.broker:exchange:amq.match\n   org.apache.qpid.broker:exchange:qpid.management\n   org.apache.qpid.broker:exchange:qmf.default.topic\n   org.apache.qpid.broker:exchange:qmf.default.direct\n2012-07-24 09:38:55 trace Changed V1 properties org.apache.qpid.broker:broker:amqp-broker len=158\n2012-07-24 09:38:55 trace Changed V1 statistics org.apache.qpid.broker:broker:amqp-broker len=102\n---------------------------------------------------------------\n \nWhile on the same server, nova-network/compute/cert/scheduler could not connect to this queue.\nThe log is as below\n---------------------------------------------------------------\n2012-07-24 09:55:04 INFO nova.rpc.common [-] Reconnecting to AMQP server on 192.168.11.100:5672\n2012-07-24 09:55:04 ERROR nova.rpc.common [-] AMQP server on 192.168.11.100:5672 is unreachable: Socket closed. Trying again in 30 seconds.\n2012-07-24 09:55:04 TRACE nova.rpc.common Traceback (most recent call last):\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/nova/rpc/impl_kombu.py\", line 446, in reconnect\n2012-07-24 09:55:04 TRACE nova.rpc.common     self._connect()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/nova/rpc/impl_kombu.py\", line 423, in _connect\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.connection.connect()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 173, in connect\n2012-07-24 09:55:04 TRACE nova.rpc.common     return self.connection\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 585, in connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     self._connection = self._establish_connection()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/connection.py\", line 546, in _establish_connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     conn = self.transport.establish_connection()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/transport/amqplib.py\", line 244, in establish_connection\n2012-07-24 09:55:04 TRACE nova.rpc.common     connect_timeout=conninfo.connect_timeout)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/kombu/transport/amqplib.py\", line 54, in __init__\n2012-07-24 09:55:04 TRACE nova.rpc.common     super(Connection, self).__init__(*args, **kwargs)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/connection.py\", line 135, in __init__\n2012-07-24 09:55:04 TRACE nova.rpc.common     (10, 10), # start\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/abstract_channel.py\", line 95, in wait\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.channel_id, allowed_methods)\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/connection.py\", line 202, in _wait_method\n2012-07-24 09:55:04 TRACE nova.rpc.common     self.method_reader.read_method()\n2012-07-24 09:55:04 TRACE nova.rpc.common   File \"/usr/lib/python2.6/site-packages/amqplib/client_0_8/method_framing.py\", line 221, in read_method\n2012-07-24 09:55:04 TRACE nova.rpc.common     raise m\n2012-07-24 09:55:04 TRACE nova.rpc.common IOError: Socket closed\n---------------------------------------------------------------\n \nI already turned iptables off.", 
            "date_created": "2012-07-25 08:17:04.248849+00:00", 
            "author": "https://api.launchpad.net/1.0/~willfly0620"
        }, 
        {
            "content": "The AMQP implementation versions are not matched...\r\nWhich is not good for whole package solution.", 
            "date_created": "2012-07-27 01:44:04.715093+00:00", 
            "author": "https://api.launchpad.net/1.0/~willfly0620"
        }
    ], 
    "closed": "2012-07-27 01:44:59.854786+00:00"
}