{
    "status": "Fix Released", 
    "last_updated": "2014-03-25 18:29:38.999250+00:00", 
    "description": "Adding a pure ipv6 network using\n\n    nova network-create public --fixed-range-v6 fd00:1::/48\n\nand then trying a DevStack deploy with just Nova Network Flat Manager ends up with the following stack trace\n\n    2013-08-23 21:53:22.880 ERROR nova.compute.manager [req-134b686d-83ad-4024-b10b-01fd23c55f37 admin demo] [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] Instance failed to spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] Traceback (most recent call last):\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/compute/manager.py\", line 1288, in _spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     block_device_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 204, in spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     admin_password, network_info, block_device_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 427, in spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     cookies)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 470, in _create_config_drive\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     extra_md=extra_md)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/api/metadata/base.py\", line 157, in __init__\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     cfg = netutils.get_injected_network_template(network_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/netutils.py\", line 166, in get_injected_network_template\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     template)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/netutils.py\", line 92, in get_non_legacy_network_template\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     subnet_v4 = [i for i in network['subnets'] if i['version'] == 4][0]\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] IndexError: list index out of range\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1216178", 
    "owner": "https://api.launchpad.net/1.0/~dims-v", 
    "id": 1216178, 
    "index": 3539, 
    "openned": "2013-08-24 01:58:30.934477+00:00", 
    "created": "2013-08-24 01:58:30.934477+00:00", 
    "title": "IndexError in get_non_legacy_network_template", 
    "comments": [
        {
            "content": "Adding a pure ipv6 network using\n\n    nova network-create public --fixed-range-v6 fd00:1::/48\n\nand then trying a DevStack deploy with just Nova Network Flat Manager ends up with the following stack trace\n\n    2013-08-23 21:53:22.880 ERROR nova.compute.manager [req-134b686d-83ad-4024-b10b-01fd23c55f37 admin demo] [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] Instance failed to spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] Traceback (most recent call last):\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/compute/manager.py\", line 1288, in _spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     block_device_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 204, in spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     admin_password, network_info, block_device_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 427, in spawn\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     cookies)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 470, in _create_config_drive\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     extra_md=extra_md)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/api/metadata/base.py\", line 157, in __init__\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     cfg = netutils.get_injected_network_template(network_info)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/netutils.py\", line 166, in get_injected_network_template\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     template)\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]   File \"/opt/stack/nova/nova/virt/netutils.py\", line 92, in get_non_legacy_network_template\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]     subnet_v4 = [i for i in network['subnets'] if i['version'] == 4][0]\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437] IndexError: list index out of range\n    2013-08-23 21:53:22.880 TRACE nova.compute.manager [instance: 6bd8d19e-f420-4397-abc8-041d4cd69437]", 
            "date_created": "2013-08-24 01:58:30.934477+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/43568", 
            "date_created": "2013-08-24 02:42:54.191182+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/43568\nCommitted: http://github.com/openstack/nova/commit/6bee0a889fcd7a2f4845c5eef02637abe9d3ff1e\nSubmitter: Jenkins\nBranch:    master\n\ncommit 6bee0a889fcd7a2f4845c5eef02637abe9d3ff1e\nAuthor: Davanum Srinivas <email address hidden>\nDate:   Fri Aug 23 22:37:09 2013 -0400\n\n    Fix network info injection in pure IPv6 environment\n    \n    get_non_legacy_network_template assumes that IPv4 is always available\n    \n    So if i try to use Nova Network without any ipv4 using say\n    \"nova network-create public --fixed-range-v6 fd8c:215d:178e:452:0:0:0:0/64\"\n    then the deployment fails. So fix the code to ensure ipv4 is optional\n    \n    Fixes LP# 1216178\n    \n    Change-Id: Ib0c47a49debd4fed83d382a301687df23ca2ec0d\n", 
            "date_created": "2013-09-23 06:03:27.880918+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-10-03 07:53:10.135496+00:00"
}