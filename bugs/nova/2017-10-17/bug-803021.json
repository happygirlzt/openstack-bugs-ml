{
    "status": "Fix Released", 
    "last_updated": "2011-09-22 13:24:31.264597+00:00", 
    "description": "For tests that are in subdirectories of the tests directory, it appears that the setup() method in nova/tests/__init__.py does not get called. \n\nA simple way to replicate this bug is to remove the clean.sqlite file and then run a test in a subdirectory:\n\n$ rm clean.sqlite\n$/run_tests.sh api.test_wsgi\n\nTest\n    test_debug                                                  ERROR\n    test_router                                                 ERROR\n\n======================================================================\nERROR: test_debug (api.test_wsgi.Test)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/test.py\", line 74, in setUp\n    os.path.join(FLAGS.state_path, FLAGS.sqlite_db))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/shutil.py\", line 52, in copyfile\n    fsrc = open(src, 'rb')\nIOError: [Errno 2] No such file or directory: '/Users/lorin/nova/trunk/nova/../clean.sqlite'\n\n======================================================================\nERROR: test_router (api.test_wsgi.Test)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/test.py\", line 74, in setUp\n    os.path.join(FLAGS.state_path, FLAGS.sqlite_db))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/shutil.py\", line 52, in copyfile\n    fsrc = open(src, 'rb')\nIOError: [Errno 2] No such file or directory: '/Users/lorin/nova/trunk/nova/../clean.sqlite'\n\n----------------------------------------------------------------------", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/803021", 
    "owner": "https://api.launchpad.net/1.0/~vishvananda", 
    "id": 803021, 
    "index": 215, 
    "openned": "2011-06-28 15:02:10.143986+00:00", 
    "created": "2011-06-28 15:02:10.143986+00:00", 
    "title": "In unit tests, test setup() method not called for subdirectory tests", 
    "comments": [
        {
            "content": "For tests that are in subdirectories of the tests directory, it appears that the setup() method in nova/tests/__init__.py does not get called. \n\nA simple way to replicate this bug is to remove the clean.sqlite file and then run a test in a subdirectory:\n\n$ rm clean.sqlite\n$/run_tests.sh api.test_wsgi\n\nTest\n    test_debug                                                  ERROR\n    test_router                                                 ERROR\n\n======================================================================\nERROR: test_debug (api.test_wsgi.Test)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/test.py\", line 74, in setUp\n    os.path.join(FLAGS.state_path, FLAGS.sqlite_db))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/shutil.py\", line 52, in copyfile\n    fsrc = open(src, 'rb')\nIOError: [Errno 2] No such file or directory: '/Users/lorin/nova/trunk/nova/../clean.sqlite'\n\n======================================================================\nERROR: test_router (api.test_wsgi.Test)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/test.py\", line 74, in setUp\n    os.path.join(FLAGS.state_path, FLAGS.sqlite_db))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/shutil.py\", line 52, in copyfile\n    fsrc = open(src, 'rb')\nIOError: [Errno 2] No such file or directory: '/Users/lorin/nova/trunk/nova/../clean.sqlite'\n\n----------------------------------------------------------------------", 
            "date_created": "2011-06-28 15:02:10.143986+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }
    ], 
    "closed": "2011-09-22 13:24:30.153919+00:00"
}