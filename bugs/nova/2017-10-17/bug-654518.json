{
    "status": "Invalid", 
    "last_updated": "2010-10-05 14:45:47.152040+00:00", 
    "description": "I am getting this exception (twisted.internet.error.ReactorAlreadyRunning) when trying to upload a bundle :\n\nusing packages built from latest nova/ubuntu branch on ubuntu lucid\n\n2010-10-04 13:24:46+0100 [HTTPChannel,0,127.0.0.1] Unhandled Error\n        Traceback (most recent call last):\n          File \"/usr/lib/python2.6/dist-packages/twisted/protocols/basic.py\", line 251, in dataReceived\n            why = self.lineReceived(line)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 1573, in lineReceived\n            self.allContentReceived()\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 1641, in allContentReceived\n            req.requestReceived(command, path, version)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 807, in requestReceived\n            self.process()\n        --- <exception caught here> ---\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/server.py\", line 124, in process\n            resrc = self.site.getResourceFor(self)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/server.py\", line 523, in getResourceFor\n            return resource.getChildForRequest(self.resource, request)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/resource.py\", line 61, in getChildForRequest\n            resource = resource.getChildWithDefault(pathElement, request)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/resource.py\", line 165, in getChildWithDefault\n            return self.getChild(path, request)\n          File \"/usr/lib/pymodules/python2.6/nova/objectstore/handler.py\", line 167, in getChild\n            request.context = get_context(request)\n          File \"/usr/lib/pymodules/python2.6/nova/objectstore/handler.py\", line 125, in get_context\n            am = manager.AuthManager()\n          File \"/usr/lib/pymodules/python2.6/nova/auth/manager.py\", line 214, in __init__\n            self.network_manager = utils.import_object(FLAGS.network_manager)\n          File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 54, in import_object\n            __import__(import_str)\n          File \"/usr/lib/pymodules/python2.6/nova/network/manager.py\", line 53, in <module>\n            flags.DEFINE_string('vpn_ip', utils.get_my_ip(),\n          File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 149, in get_my_ip\n            csock.connect(('www.google.com', 80))\n          File \"/usr/lib/pymodules/python2.6/eventlet/greenio.py\", line 162, in connect\n            trampoline(fd, write=True)\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/__init__.py\", line 125, in trampoline\n            return hub.switch()\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/twistedr.py\", line 212, in switch\n            return self.greenlet.switch()\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/twistedr.py\", line 223, in run\n            reactor.startRunning(installSignalHandlers=installSignalHandlers)\n          File \"/usr/lib/python2.6/dist-packages/twisted/internet/base.py\", line 1127, in startRunning\n            ReactorBase.startRunning(self)\n          File \"/usr/lib/python2.6/dist-packages/twisted/internet/base.py\", line 653, in startRunning\n            raise error.ReactorAlreadyRunning()\n        twisted.internet.error.ReactorAlreadyRunning:", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/654518", 
    "owner": "None", 
    "id": 654518, 
    "index": 3207, 
    "openned": "2010-10-04 12:27:27.189615+00:00", 
    "created": "2010-10-04 12:27:27.189615+00:00", 
    "title": "Error when uploading a uploading a bundle", 
    "comments": [
        {
            "content": "I am getting this exception (twisted.internet.error.ReactorAlreadyRunning) when trying to upload a bundle :\n\nusing packages built from latest nova/ubuntu branch on ubuntu lucid\n\n2010-10-04 13:24:46+0100 [HTTPChannel,0,127.0.0.1] Unhandled Error\n        Traceback (most recent call last):\n          File \"/usr/lib/python2.6/dist-packages/twisted/protocols/basic.py\", line 251, in dataReceived\n            why = self.lineReceived(line)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 1573, in lineReceived\n            self.allContentReceived()\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 1641, in allContentReceived\n            req.requestReceived(command, path, version)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/http.py\", line 807, in requestReceived\n            self.process()\n        --- <exception caught here> ---\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/server.py\", line 124, in process\n            resrc = self.site.getResourceFor(self)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/server.py\", line 523, in getResourceFor\n            return resource.getChildForRequest(self.resource, request)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/resource.py\", line 61, in getChildForRequest\n            resource = resource.getChildWithDefault(pathElement, request)\n          File \"/usr/lib/python2.6/dist-packages/twisted/web/resource.py\", line 165, in getChildWithDefault\n            return self.getChild(path, request)\n          File \"/usr/lib/pymodules/python2.6/nova/objectstore/handler.py\", line 167, in getChild\n            request.context = get_context(request)\n          File \"/usr/lib/pymodules/python2.6/nova/objectstore/handler.py\", line 125, in get_context\n            am = manager.AuthManager()\n          File \"/usr/lib/pymodules/python2.6/nova/auth/manager.py\", line 214, in __init__\n            self.network_manager = utils.import_object(FLAGS.network_manager)\n          File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 54, in import_object\n            __import__(import_str)\n          File \"/usr/lib/pymodules/python2.6/nova/network/manager.py\", line 53, in <module>\n            flags.DEFINE_string('vpn_ip', utils.get_my_ip(),\n          File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 149, in get_my_ip\n            csock.connect(('www.google.com', 80))\n          File \"/usr/lib/pymodules/python2.6/eventlet/greenio.py\", line 162, in connect\n            trampoline(fd, write=True)\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/__init__.py\", line 125, in trampoline\n            return hub.switch()\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/twistedr.py\", line 212, in switch\n            return self.greenlet.switch()\n          File \"/usr/lib/pymodules/python2.6/eventlet/hubs/twistedr.py\", line 223, in run\n            reactor.startRunning(installSignalHandlers=installSignalHandlers)\n          File \"/usr/lib/python2.6/dist-packages/twisted/internet/base.py\", line 1127, in startRunning\n            ReactorBase.startRunning(self)\n          File \"/usr/lib/python2.6/dist-packages/twisted/internet/base.py\", line 653, in startRunning\n            raise error.ReactorAlreadyRunning()\n        twisted.internet.error.ReactorAlreadyRunning:", 
            "date_created": "2010-10-04 12:27:27.189615+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "Full HTML stacktrace is here :\n\nhttp://is.gd/fK5kN\n\nChmoeul.", 
            "date_created": "2010-10-04 12:29:36.966945+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "This seems to be the part in nova/wsgi.py :\n\n\neventlet.patcher.monkey_patch(all=False, socket=True)\n\nwhich patch the socket implementation with a  greenlet which in this case using the twisted implementation and  try to start the reactor but has been started already somewhere in Nova...\n\nIs there a need for having socket eventlet'et?", 
            "date_created": "2010-10-04 13:34:41.129036+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": " I have upgraded the eventlet library to latest version and this seems to work now... Sorry about the nosie :)", 
            "date_created": "2010-10-05 14:45:31.172940+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }
    ], 
    "closed": "2010-10-05 14:45:46.179203+00:00"
}