{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:56:51.457527+00:00", 
    "description": "nova api fails to start properly if a backdoor port is specified. Looking at the logs this traceback is repeatedly printed:\n\n2013-10-22 14:19:46.822 INFO nova.openstack.common.service [-] Child 1460 exited with status 1\n2013-10-22 14:19:46.824 INFO nova.openstack.common.service [-] Started child 1468\n2013-10-22 14:19:46.833 INFO nova.openstack.common.eventlet_backdoor [-] Eventlet backdoor listening on 60684 for process 1467\n2013-10-22 14:19:46.833 INFO nova.openstack.common.eventlet_backdoor [-] Eventlet backdoor listening on 58986 for process 1468\n2013-10-22 14:19:46.837 ERROR nova.openstack.common.threadgroup [-] 'NoneType' object has no attribute 'backdoor_port'\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/threadgroup.py\", line 117, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     x.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/threadgroup.py\", line 49, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 448, in run_service\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     service.start()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/service.py\", line 357, in start\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     self.manager.backdoor_port = self.backdoor_port\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup AttributeError: 'NoneType' object has no attribute 'backdoor_port'\n2013-10-22 14:19:46.840 TRACE nova   File \"/usr/local/bin/nova-api\", line 10, in <module>\n2013-10-22 14:19:46.840 TRACE nova     sys.exit(main())\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/cmd/api.py\", line 53, in main\n2013-10-22 14:19:46.840 TRACE nova     launcher.wait()\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 351, in wait\n2013-10-22 14:19:46.840 TRACE nova     self._respawn_children()\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 341, in _respawn_children\n2013-10-22 14:19:46.840 TRACE nova     self._start_child(wrap)\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 287, in _start_child\n2013-10-22 14:19:46.840 TRACE nova     os._exit(status)\n2013-10-22 14:19:46.840 TRACE nova TypeError: an integer is required\n2013-10-22 14:19:46.840 TRACE nova", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1243260", 
    "owner": "https://api.launchpad.net/1.0/~treinish", 
    "id": 1243260, 
    "index": 1044, 
    "openned": "2013-10-22 15:12:00.718372+00:00", 
    "created": "2013-10-22 15:12:00.718372+00:00", 
    "title": "Nova api doesn't start with a backdoor port set", 
    "comments": [
        {
            "content": "nova api fails to start properly if a backdoor port is specified. Looking at the logs this traceback is repeatedly printed:\n\n2013-10-22 14:19:46.822 INFO nova.openstack.common.service [-] Child 1460 exited with status 1\n2013-10-22 14:19:46.824 INFO nova.openstack.common.service [-] Started child 1468\n2013-10-22 14:19:46.833 INFO nova.openstack.common.eventlet_backdoor [-] Eventlet backdoor listening on 60684 for process 1467\n2013-10-22 14:19:46.833 INFO nova.openstack.common.eventlet_backdoor [-] Eventlet backdoor listening on 58986 for process 1468\n2013-10-22 14:19:46.837 ERROR nova.openstack.common.threadgroup [-] 'NoneType' object has no attribute 'backdoor_port'\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/threadgroup.py\", line 117, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     x.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/threadgroup.py\", line 49, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 448, in run_service\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     service.start()\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup   File \"/opt/stack/nova/nova/service.py\", line 357, in start\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup     self.manager.backdoor_port = self.backdoor_port\n2013-10-22 14:19:46.837 TRACE nova.openstack.common.threadgroup AttributeError: 'NoneType' object has no attribute 'backdoor_port'\n2013-10-22 14:19:46.840 TRACE nova   File \"/usr/local/bin/nova-api\", line 10, in <module>\n2013-10-22 14:19:46.840 TRACE nova     sys.exit(main())\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/cmd/api.py\", line 53, in main\n2013-10-22 14:19:46.840 TRACE nova     launcher.wait()\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 351, in wait\n2013-10-22 14:19:46.840 TRACE nova     self._respawn_children()\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 341, in _respawn_children\n2013-10-22 14:19:46.840 TRACE nova     self._start_child(wrap)\n2013-10-22 14:19:46.840 TRACE nova   File \"/opt/stack/nova/nova/openstack/common/service.py\", line 287, in _start_child\n2013-10-22 14:19:46.840 TRACE nova     os._exit(status)\n2013-10-22 14:19:46.840 TRACE nova TypeError: an integer is required\n2013-10-22 14:19:46.840 TRACE nova", 
            "date_created": "2013-10-22 15:12:00.718372+00:00", 
            "author": "https://api.launchpad.net/1.0/~treinish"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/53141", 
            "date_created": "2013-10-22 15:17:20.985207+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/53141\nCommitted: http://github.com/openstack/nova/commit/e5c96505c0b4eac51c0925dcb691f0a1699216ce\nSubmitter: Jenkins\nBranch:    master\n\ncommit e5c96505c0b4eac51c0925dcb691f0a1699216ce\nAuthor: Matthew Treinish <email address hidden>\nDate:   Tue Oct 22 15:06:14 2013 +0000\n\n    Fix setting backdoor port in service start\n    \n    Previously if self.manager wasn't defined for a Service object but a\n    backdoor_port was specified then that particular service would not\n    start because it would try to set the backdoor port in an object that\n    didn't exist. This commit fixes setting the backdoor port only if\n    manager is defined when calling start().\n    \n    Closes-Bug: #1243260\n    \n    Change-Id: Ib0e709cfd0e299a3e010450b7eba6e92bc108e4e\n", 
            "date_created": "2013-10-24 00:36:41.318543+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/54608", 
            "date_created": "2013-10-30 18:55:27.430870+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/54608\nCommitted: http://github.com/openstack/nova/commit/65135e70254e881af78be92fd32144da5d3467f0\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 65135e70254e881af78be92fd32144da5d3467f0\nAuthor: Matthew Treinish <email address hidden>\nDate:   Tue Oct 22 15:06:14 2013 +0000\n\n    Fix setting backdoor port in service start\n    \n    Previously if self.manager wasn't defined for a Service object but a\n    backdoor_port was specified then that particular service would not\n    start because it would try to set the backdoor port in an object that\n    didn't exist. This commit fixes setting the backdoor port only if\n    manager is defined when calling start().\n    \n    Closes-Bug: #1243260\n    \n    Change-Id: Ib0e709cfd0e299a3e010450b7eba6e92bc108e4e\n    (cherry picked from commit e5c96505c0b4eac51c0925dcb691f0a1699216ce)\n", 
            "date_created": "2013-11-03 14:58:53.651831+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-12-04 10:36:22.995249+00:00"
}