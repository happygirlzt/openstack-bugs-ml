{
    "status": "Expired", 
    "last_updated": "2017-09-09 04:17:25.906555+00:00", 
    "description": "os:CentOS7 Linux allinone.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon Jun 30 12:09:22 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\nopenstack version:ocata\n\nThe instance volume size is equal to glance.min_disk size always,not equal to flavor root_disk size.\nif glance.image.min_disk.size==3G && flavor.root_disk.size==4G:\n\u00a0\u00a0\u00a0\u00a0\u00a0instance.volume.size=3G\nif glance.image.min_disk.size==null && flavor.root_disk.size==4G:\n\u00a0\u00a0\u00a0\u00a0\u00a0instance.volume.size=1G\nif glance.image.min_disk.size==null || glance.image.virutal_size>glance.image.min_disk.size:\n\u00a0\u00a0\u00a0\u00a0\u00a0instance create failed.\nErrorlog:\n/var/log/cinder/volume.log:\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 222, in dispatch\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 192, in _do_dispatch\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"<string>\", line 2, in create_volume\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/objects/cleanable.py\", line 207, in wrapper\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = f(*args, **kwargs)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 654, in create_volume\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     _run_flow()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 646, in _run_flow\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     flow_engine.run()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/engine.py\", line 247, in run\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     for _state in self.run_iter(timeout=timeout):\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/engine.py\", line 340, in run_iter\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     failure.Failure.reraise_if_any(er_failures)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/types/failure.py\", line 336, in reraise_if_any\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     failures[0].reraise()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/types/failure.py\", line 343, in reraise\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     six.reraise(*self._exc_info)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/executor.py\", line 53, in _execute_task\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = task.execute(**arguments)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 902, in execute\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     **volume_spec)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 849, in _create_from_image\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     image_service)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"<string>\", line 2, in _create_from_image_cache_or_download\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/coordination.py\", line 301, in _synchronized\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     return f(*a, **k)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 756, in _create_from_image_cache_or_download\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     data.virtual_size, volume.size, image_id)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/image/image_utils.py\", line 451, in check_virtual_size\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     reason=reason)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server ImageUnacceptable: Image 2882ad36-ee09-432f-a57d-6f354d3a2e20 is unacceptable: Image virtual size is 3GB and doesn't fit in a volume of size 1GB.\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server\n\n/var/log/nova/nova-compute.log:\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [req-b47ff706-b551-47d9-ab36-de13ae419c9b 169c2ebd2ff14e63b7cec5361fd938f1 cca0bf9ebdb84d988c66e45d87c9eda5 - - -] [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2] Build of instance f1201f52-f85b-4a5b-b8cf-c042fa4acfe2 aborted: Block Device Mapping is Invalid.\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2] Traceback (most recent call last):\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1780, in _do_build_and_run_instance\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     filter_properties)\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1961, in _build_and_run_instance\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     phase=fields.NotificationPhase.ERROR, exception=e)\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     self.force_reraise()\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     six.reraise(self.type_, self.value, self.tb)\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1914, in _build_and_run_instance\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     block_device_mapping) as resources:\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     return self.gen.next()\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2113, in _build_resources\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]     reason=e.format_message())\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2] BuildAbortException: Build of instance f1201f52-f85b-4a5b-b8cf-c042fa4acfe2 aborted: Block Device Mapping is Invalid.\n2017-06-12 11:30:10.532 5429 ERROR nova.compute.manager [instance: f1201f52-f85b-4a5b-b8cf-c042fa4acfe2]", 
    "tags": [
        "openstack-version.ocata"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1697351", 
    "owner": "None", 
    "id": 1697351, 
    "index": 8161, 
    "openned": "2017-06-12 05:51:41.260549+00:00", 
    "created": "2017-06-12 05:34:15.829711+00:00", 
    "title": "flavor.root_disk.size not work on version ocata", 
    "comments": [
        {
            "content": "os:CentOS7 Linux allinone.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon Jun 30 12:09:22 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\nopenstack version:ocata\n\nThe instance volume size is equal to glance.min_disk size.\nif glance.image.min_disk.size==3G && flavor.root_disk.size==4G:\n     instance.volume.size=3G\nif glance.image.min_disk.size==null && flavor.root_disk.size==4G:\n     instance.volume.size=1G\nif glance.image.min_disk.size==null || glance.image.virutal_size>glance.image.min_disk.size:\n     instance create failed.\nErrorlog:\n\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 222, in dispatch\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 192, in _do_dispatch\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"<string>\", line 2, in create_volume\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/objects/cleanable.py\", line 207, in wrapper\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = f(*args, **kwargs)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 654, in create_volume\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     _run_flow()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 646, in _run_flow\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     flow_engine.run()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/engine.py\", line 247, in run\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     for _state in self.run_iter(timeout=timeout):\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/engine.py\", line 340, in run_iter\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     failure.Failure.reraise_if_any(er_failures)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/types/failure.py\", line 336, in reraise_if_any\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     failures[0].reraise()\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/types/failure.py\", line 343, in reraise\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     six.reraise(*self._exc_info)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/taskflow/engines/action_engine/executor.py\", line 53, in _execute_task\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     result = task.execute(**arguments)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 902, in execute\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     **volume_spec)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 849, in _create_from_image\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     image_service)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"<string>\", line 2, in _create_from_image_cache_or_download\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/coordination.py\", line 301, in _synchronized\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     return f(*a, **k)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/volume/flows/manager/create_volume.py\", line 756, in _create_from_image_cache_or_download\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     data.virtual_size, volume.size, image_id)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/cinder/image/image_utils.py\", line 451, in check_virtual_size\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server     reason=reason)\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server ImageUnacceptable: Image 2882ad36-ee09-432f-a57d-6f354d3a2e20 is unacceptable: Image virtual size is 3GB and doesn't fit in a volume of size 1GB.\n2017-06-12 11:30:08.326 5862 ERROR oslo_messaging.rpc.server", 
            "date_created": "2017-06-12 05:34:15.829711+00:00", 
            "author": "https://api.launchpad.net/1.0/~rainybow"
        }, 
        {
            "content": "flavor.root_disk_size is not a Cinder setting.", 
            "date_created": "2017-06-12 14:04:53.567588+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-mcginnis"
        }, 
        {
            "content": "What is flavor.root_disk.size? The flavor resource representation in the REST API has a field named \"disk\" for root disk.  The internal nova.objects.Flavor object has a field called \"root_gb\", so what is flavor.root_disk.size referring to in code?", 
            "date_created": "2017-06-14 01:40:32.885016+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Can you express the recreate scenario in user actions using something like the command line to explain the issue you're hitting?", 
            "date_created": "2017-06-14 01:41:09.223801+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Automatically discovered version ocata in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 16:00:23.216123+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "\nMatt Riedemann (mriedem) wrote on 2017-06-14:\t#2\nWhat is flavor.root_disk.size? The flavor resource representation in the REST API has a field named \"disk\" for root disk. The internal nova.objects.Flavor object has a field called \"root_gb\", so what is flavor.root_disk.size referring to in code?\n\nWhen Create a new flavor\uff0cit's need 3 parameters about disk on the page.There are Root Disk(GB), Temporary Disk(GB) and Swap Partition Space(MB)\u3002The parameters flavor.root_disk.size what i said is the Root Disk(GB).  ", 
            "date_created": "2017-07-10 06:02:10.716264+00:00", 
            "author": "https://api.launchpad.net/1.0/~rainybow"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-09-09 04:17:23.138037+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2017-09-09 04:17:23.726137+00:00"
}