{
    "status": "Fix Released", 
    "last_updated": "2012-07-10 03:31:09.719590+00:00", 
    "description": "I get this stacktrace \n\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR TIMEOUT: The call to key_init timed out. VM id=c36526be-11f8-4f7e-9279-9f3abcc36e97; args={'path': '', 'dom_id': '39', 'id': 'f9e3a09d-1b9a-49b8-9b5c-05e76e55e335', 'pub': '88750319460909698028270102021256'}\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR Failed to exchange keys: {'message': 'TIMEOUT: No response from agent within 30 seconds.', 'returncode': 'timeout'}\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR Instance c36526be-11f8-4f7e-9279-9f3abcc36e97 failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 516, in _spawn\n(nova.compute.manager): TRACE:     network_info, block_device_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi_conn.py\", line 200, in spawn\n(nova.compute.manager): TRACE:     self._vmops.spawn(context, instance, image_meta, network_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 233, in spawn\n(nova.compute.manager): TRACE:     self._spawn(instance, vm_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 500, in _spawn\n(nova.compute.manager): TRACE:     self._configure_instance(ctx, instance, vm_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 440, in _configure_instance\n(nova.compute.manager): TRACE:     self.set_admin_password(instance, admin_password)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 949, in set_admin_password\n(nova.compute.manager): TRACE:     raise Exception(msg)\n(nova.compute.manager): TRACE: Exception: Failed to exchange keys: {'message': 'TIMEOUT: No response from agent within 30 seconds.', 'returncode': 'timeout'}\n\nif I try to spawn an instance whose image has no guest agent installed. This is because set_admin_password is bound to fail without an agent. Although configuring the admin password is highly desirable, putting the instance in error (in case the agent does not exist) feels a bit extreme. A better approach might be to skip password configuration if the agent is not installed, thus making the agent non-mandatory.\n\nThis occurs on Essex trunk.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/923865", 
    "owner": "https://api.launchpad.net/1.0/~armando-migliaccio", 
    "id": 923865, 
    "index": 3781, 
    "openned": "2012-01-30 18:12:04.779265+00:00", 
    "created": "2012-01-30 18:12:04.779265+00:00", 
    "title": "(xenapi driver)instance creation fails if no guest agent is avaiable for admin password configuration", 
    "comments": [
        {
            "content": "I get this stacktrace \n\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR TIMEOUT: The call to key_init timed out. VM id=c36526be-11f8-4f7e-9279-9f3abcc36e97; args={'path': '', 'dom_id': '39', 'id': 'f9e3a09d-1b9a-49b8-9b5c-05e76e55e335', 'pub': '88750319460909698028270102021256'}\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR Failed to exchange keys: {'message': 'TIMEOUT: No response from agent within 30 seconds.', 'returncode': 'timeout'}\nJan 30 16:19:14 os-vpx-FE-CD-8F-A8-21-0C nova-compute ERROR Instance c36526be-11f8-4f7e-9279-9f3abcc36e97 failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 516, in _spawn\n(nova.compute.manager): TRACE:     network_info, block_device_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi_conn.py\", line 200, in spawn\n(nova.compute.manager): TRACE:     self._vmops.spawn(context, instance, image_meta, network_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 233, in spawn\n(nova.compute.manager): TRACE:     self._spawn(instance, vm_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 500, in _spawn\n(nova.compute.manager): TRACE:     self._configure_instance(ctx, instance, vm_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 440, in _configure_instance\n(nova.compute.manager): TRACE:     self.set_admin_password(instance, admin_password)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/xenapi/vmops.py\", line 949, in set_admin_password\n(nova.compute.manager): TRACE:     raise Exception(msg)\n(nova.compute.manager): TRACE: Exception: Failed to exchange keys: {'message': 'TIMEOUT: No response from agent within 30 seconds.', 'returncode': 'timeout'}\n\nif I try to spawn an instance whose image has no guest agent installed. This is because set_admin_password is bound to fail without an agent. Although configuring the admin password is highly desirable, putting the instance in error (in case the agent does not exist) feels a bit extreme. A better approach might be to skip password configuration if the agent is not installed, thus making the agent non-mandatory.\n\nThis occurs on Essex trunk.", 
            "date_created": "2012-01-30 18:12:04.779265+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/3551\nCommitted: http://github.com/openstack/nova/commit/437ad5af25f88788c8678d7dbd0c8826a145c884\nSubmitter: Jenkins\nBranch:    master\n\ncommit 437ad5af25f88788c8678d7dbd0c8826a145c884\nAuthor: Armando Migliaccio <email address hidden>\nDate:   Mon Jan 30 18:21:30 2012 +0000\n\n    Bug #923865: (xenapi driver)instance creation fails if no guest agent is avaiable for admin password configuration\n    \n    Ensure that if the guest agent is not installed, the admin password configuration is\n    skipped. The fact that either one of 'version' or 'agent_build' is None (or both)\n    should be an accurate indication of such a condition.\n    \n    Change-Id: I90213ce28a900a05d7357b8fa647ffbb0928571a\n", 
            "date_created": "2012-02-01 22:01:16.376048+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-02-29 10:25:34.455178+00:00"
}