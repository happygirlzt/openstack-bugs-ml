{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:35:33.558193+00:00", 
    "description": "I'm using PostgreSQL as database engine and nova-cells version 2013.1-0ubuntu1\n\n\n2013-04-12 13:15:51.582 CRITICAL nova [req-4306ce80-d32a-4b2d-a57c-69e0f82a58d1 None None] (ProgrammingError) operator does not exist: boolean = integer\nLINE 3: WHERE cells.deleted = 0\n                            ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n 'SELECT cells.created_at AS cells_created_at, cells.updated_at AS cells_updated_at, cells.deleted_at AS cells_deleted_at, cells.deleted AS cells_deleted, cells.id AS cells_id, cells.name AS cells_name, cells.api_url AS cells_api_url, cells.username AS cells_username, cells.password AS cells_password, cells.weight_offset AS cells_weight_offset, cells.weight_scale AS cells_weight_scale, cells.is_parent AS cells_is_parent, cells.rpc_host AS cells_rpc_host, cells.rpc_port AS cells_rpc_port, cells.rpc_virtual_host AS cells_rpc_virtual_host \\nFROM cells \\nWHERE cells.deleted = %(deleted_1)s' {'deleted_1': 0}", 
    "tags": [
        "db", 
        "postgresql"
    ], 
    "importance": "High", 
    "heat": 18, 
    "link": "https://bugs.launchpad.net/nova/+bug/1168490", 
    "owner": "https://api.launchpad.net/1.0/~dripton", 
    "id": 1168490, 
    "index": 1055, 
    "openned": "2013-04-12 17:30:54.885238+00:00", 
    "created": "2013-04-12 17:30:54.885238+00:00", 
    "title": "nova-cells crash with: operator does not exist: boolean = integer", 
    "comments": [
        {
            "content": "I'm using PostgreSQL as database engine and nova-cells version 2013.1-0ubuntu1\n\n\n2013-04-12 13:15:51.582 CRITICAL nova [req-4306ce80-d32a-4b2d-a57c-69e0f82a58d1 None None] (ProgrammingError) operator does not exist: boolean = integer\nLINE 3: WHERE cells.deleted = 0\n                            ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n 'SELECT cells.created_at AS cells_created_at, cells.updated_at AS cells_updated_at, cells.deleted_at AS cells_deleted_at, cells.deleted AS cells_deleted, cells.id AS cells_id, cells.name AS cells_name, cells.api_url AS cells_api_url, cells.username AS cells_username, cells.password AS cells_password, cells.weight_offset AS cells_weight_offset, cells.weight_scale AS cells_weight_scale, cells.is_parent AS cells_is_parent, cells.rpc_host AS cells_rpc_host, cells.rpc_port AS cells_rpc_port, cells.rpc_virtual_host AS cells_rpc_virtual_host \\nFROM cells \\nWHERE cells.deleted = %(deleted_1)s' {'deleted_1': 0}", 
            "date_created": "2013-04-12 17:30:54.885238+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-hetu"
        }, 
        {
            "content": "I am experiencing the same problem with nova-scheduler:\n\n2013-04-19 11:21:52.066 20712 AUDIT nova.service [-] Starting scheduler node (version 2013.1)\n2013-04-19 11:21:52.067 DEBUG nova.openstack.common.lockutils [req-45974975-94b8-4ccd-9a54-0184d869a096 None None] Got semaphore \"dbapi_backend\" for method \"__get_backe\nnd\"... inner /usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py:186\n2013-04-19 11:21:52.232 20712 CRITICAL nova [-] (ProgrammingError) operator does not exist: boolean = integer\nLINE 3: WHERE services.deleted = 0 AND services.host = 'cc' AND serv...\n                               ^\nHINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n 'SELECT services.created_at AS services_created_at, services.updated_at AS services_updated_at, services.deleted_at AS services_deleted_at, services.deleted AS service\ns_deleted, services.id AS services_id, services.host AS services_host, services.\"binary\" AS services_binary, services.topic AS services_topic, services.report_count AS \nservices_report_count, services.disabled AS services_disabled \\nFROM services \\nWHERE services.deleted = %(deleted_1)s AND services.host = %(host_1)s AND services.\"bina\nry\" = %(binary_1)s \\n LIMIT %(param_1)s' {'host_1': 'cc', 'param_1': 1, 'deleted_1': 0, 'binary_1': 'nova-scheduler'}\n2013-04-19 11:21:52.232 20712 TRACE nova Traceback (most recent call last):\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/bin/nova-scheduler\", line 56, in <module>\n2013-04-19 11:21:52.232 20712 TRACE nova     service.wait()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 689, in wait\n2013-04-19 11:21:52.232 20712 TRACE nova     _launcher.wait()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 209, in wait\n2013-04-19 11:21:52.232 20712 TRACE nova     super(ServiceLauncher, self).wait()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 179, in wait\n2013-04-19 11:21:52.232 20712 TRACE nova     service.wait()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-04-19 11:21:52.232 20712 TRACE nova     return self._exit_event.wait()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-04-19 11:21:52.232 20712 TRACE nova     return hubs.get_hub().switch()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-04-19 11:21:52.232 20712 TRACE nova     return self.greenlet.switch()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-04-19 11:21:52.232 20712 TRACE nova     result = function(*args, **kwargs)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 147, in run_server\n2013-04-19 11:21:52.232 20712 TRACE nova     server.start()\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 434, in start\n2013-04-19 11:21:52.232 20712 TRACE nova     self.host, self.binary)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/conductor/api.py\", line 258, in service_get_by_args\n2013-04-19 11:21:52.232 20712 TRACE nova     binary=binary)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 1348, in wrapper\n2013-04-19 11:21:52.232 20712 TRACE nova     return func(*args, **kwargs)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py\", line 424, in inner\n2013-04-19 11:21:52.232 20712 TRACE nova     return catch_client_exception(exceptions, func, *args, **kwargs)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py\", line 407, in catch_client_exception\n2013-04-19 11:21:52.232 20712 TRACE nova     return func(*args, **kwargs)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/conductor/manager.py\", line 322, in service_get_all_by\n2013-04-19 11:21:52.232 20712 TRACE nova     result = self.db.service_get_by_args(context, host, binary)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/api.py\", line 155, in service_get_by_args\n2013-04-19 11:21:52.232 20712 TRACE nova     return IMPL.service_get_by_args(context, host, binary)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 96, in wrapper\n2013-04-19 11:21:52.232 20712 TRACE nova     return f(*args, **kwargs)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 411, in service_get_by_args\n2013-04-19 11:21:52.232 20712 TRACE nova     filter_by(binary=binary).\\\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2156, in first\n2013-04-19 11:21:52.232 20712 TRACE nova     ret = list(self[0:1])\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2023, in __getitem__\n2013-04-19 11:21:52.232 20712 TRACE nova     return list(res)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2227, in __iter__\n2013-04-19 11:21:52.232 20712 TRACE nova     return self._execute_and_instances(context)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2242, in _execute_and_instances\n2013-04-19 11:21:52.232 20712 TRACE nova     result = conn.execute(querycontext.statement, self._params)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1449, in execute\n2013-04-19 11:21:52.232 20712 TRACE nova     params)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1584, in _execute_clauseelement\n2013-04-19 11:21:52.232 20712 TRACE nova     compiled_sql, distilled_params\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1698, in _execute_context\n2013-04-19 11:21:52.232 20712 TRACE nova     context)\n2013-04-19 11:21:52.232 20712 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1851, in _handle_dbapi_exception\n2013-04-19 11:21:52.232 20712 TRACE nova     None, sys.exc_info()[2]\n2013-04-19 11:21:52.232 20712 TRACE nova ProgrammingError: (ProgrammingError) operator does not exist: boolean = integer\n2013-04-19 11:21:52.232 20712 TRACE nova LINE 3: WHERE services.deleted = 0 AND services.host = 'cc' AND serv...\n2013-04-19 11:21:52.232 20712 TRACE nova                                ^\n2013-04-19 11:21:52.232 20712 TRACE nova HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.\n2013-04-19 11:21:52.232 20712 TRACE nova  'SELECT services.created_at AS services_created_at, services.updated_at AS services_updated_at, services.deleted_at AS services_deleted_at, services.deleted AS services_deleted, services.id AS services_id, services.host AS services_host, services.\"binary\" AS services_binary, services.topic AS services_topic, services.report_count AS services_report_count, services.disabled AS services_disabled \\nFROM services \\nWHERE services.deleted = %(deleted_1)s AND services.host = %(host_1)s AND services.\"binary\" = %(binary_1)s \\n LIMIT %(param_1)s' {'host_1': 'cc', 'param_1': 1, 'deleted_1': 0, 'binary_1': 'nova-scheduler'}\n2013-04-19 11:21:52.232 20712 TRACE nova", 
            "date_created": "2013-04-19 09:33:41.123814+00:00", 
            "author": "https://api.launchpad.net/1.0/~maciej-galkiewicz"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/28567", 
            "date_created": "2013-05-08 15:39:49.879871+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/28567\nCommitted: http://github.com/openstack/nova/commit/3728018924baf9cdf1d5c80980516bff3f50a430\nSubmitter: Jenkins\nBranch:    master\n\ncommit 3728018924baf9cdf1d5c80980516bff3f50a430\nAuthor: David Ripton <email address hidden>\nDate:   Wed May 8 11:36:05 2013 -0400\n\n    Change type of cells.deleted from boolean to integer.\n    \n    Fixes bug #1168490\n    \n    Migration 152 changed other tables' deleted column from boolean\n    to integer, but cells got missed.  SQLite and MySQL are weakly-\n    typed enough that mixing integers and booleans is allowed, but\n    PostgreSQL is not, and this causes an error.\n    \n    Migration 179 is a copy of migration 152, except applied only to\n    the cells table.\n    \n    Change-Id: I85c39765edc206d38d21827ab54e1371155b9557\n", 
            "date_created": "2013-05-09 19:05:14.255857+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-05-29 10:17:22.880948+00:00"
}