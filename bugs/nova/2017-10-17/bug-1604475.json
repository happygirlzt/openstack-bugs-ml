{
    "status": "Fix Released", 
    "last_updated": "2016-09-02 01:16:02.224206+00:00", 
    "description": "During live migration, this unexpected API error occur. The live migration failed.\n\nError in the nova-api.log:\n2016-07-19 02:52:59.734 3825 INFO nova.osapi_compute.wsgi.server [req-7ecad794-1fea-4815-a9d9-5fe2ab829c53 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] 9.109.223.198,127.0.0.1 \"GET /v2.1/a3b6f61367f64e23aad54feb8255f4c1/storage-viable-hosts?instance_uuid=5b7cb076-53ca-47b6-891a-95ff00d6dd70 HTTP/1.1\" status: 200 len: 443 time: 0.1453900\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions [req-c2bf4983-fc1f-415e-9011-4f626972db87 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] Unexpected exception in API method\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/migrate_server.py\", line 100, in _migrate_live\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     disk_over_commit, host, force)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 165, in inner\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 172, in _wrapped\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return fn(self, context, instance, *args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 146, in inner\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 3322, in live_migrate\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     request_spec=request_spec, async=async)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions TypeError: live_migrate_instance() got an unexpected keyword argument 'async'\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions\n2016-07-19 02:53:03.766 3827 INFO nova.api.openstack.wsgi [req-c2bf4983-fc1f-415e-9011-4f626972db87 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>\n\n\nThe issue appears to be caused by this changeset: https://review.openstack.org/#/c/311116/\n\nWhile the 'async' argument was added to the conductor's ComputeTaskAPI.live_migrate_instance, the 'async' argument was not added to the conductor's LocalComputeTaskAPI.live_migrate_instance.\n\n\n\nMy current Nova config file has this set:\n\n[conductor]\nuse_local = True", 
    "tags": [
        "conductor"
    ], 
    "importance": "High", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1604475", 
    "owner": "https://api.launchpad.net/1.0/~alaski", 
    "id": 1604475, 
    "index": 1950, 
    "openned": "2016-07-19 16:19:15.081825+00:00", 
    "created": "2016-07-19 16:19:15.081825+00:00", 
    "title": "TypeError: live_migrate_instance() got an unexpected keyword argument 'async'", 
    "comments": [
        {
            "content": "During live migration, this unexpected API error occur. The live migration failed.\n\nError in the nova-api.log:\n2016-07-19 02:52:59.734 3825 INFO nova.osapi_compute.wsgi.server [req-7ecad794-1fea-4815-a9d9-5fe2ab829c53 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] 9.109.223.198,127.0.0.1 \"GET /v2.1/a3b6f61367f64e23aad54feb8255f4c1/storage-viable-hosts?instance_uuid=5b7cb076-53ca-47b6-891a-95ff00d6dd70 HTTP/1.1\" status: 200 len: 443 time: 0.1453900\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions [req-c2bf4983-fc1f-415e-9011-4f626972db87 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] Unexpected exception in API method\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/migrate_server.py\", line 100, in _migrate_live\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     disk_over_commit, host, force)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 165, in inner\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 172, in _wrapped\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return fn(self, context, instance, *args, **kwargs)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 146, in inner\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 3322, in live_migrate\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions     request_spec=request_spec, async=async)\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions TypeError: live_migrate_instance() got an unexpected keyword argument 'async'\n2016-07-19 02:53:03.764 3827 ERROR nova.api.openstack.extensions\n2016-07-19 02:53:03.766 3827 INFO nova.api.openstack.wsgi [req-c2bf4983-fc1f-415e-9011-4f626972db87 0688b01e6439ca32d698d20789d52169126fb41fb1a4ddafcebb97d854e836c9 a3b6f61367f64e23aad54feb8255f4c1 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>\n\n\nThe issue appears to be caused by this changeset: https://review.openstack.org/#/c/311116/\n\nWhile the 'async' argument was added to the conductor's ComputeTaskAPI.live_migrate_instance, the 'async' argument was not added to the conductor's LocalComputeTaskAPI.live_migrate_instance.\n\n\n\nMy current Nova config file has this set:\n\n[conductor]\nuse_local = True", 
            "date_created": "2016-07-19 16:19:15.081825+00:00", 
            "author": "https://api.launchpad.net/1.0/~lmtaylor"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/344429", 
            "date_created": "2016-07-19 18:52:46.796331+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Andrew Laski (<email address hidden>) on branch: master\nReview: https://review.openstack.org/344403\nReason: Abandoned in favor of https://review.openstack.org/#q,Ida6c8ca1d7a832cb52595645eff5d8149e65cdf7,n,z", 
            "date_created": "2016-07-19 19:20:24.514276+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Lauren Taylor (<email address hidden>) on branch: master\nReview: https://review.openstack.org/344429", 
            "date_created": "2016-07-19 19:41:40.353044+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/344403\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=a7f83fc6cec74cc614182b6d931521ded3f54ff2\nSubmitter: Jenkins\nBranch:    master\n\ncommit a7f83fc6cec74cc614182b6d931521ded3f54ff2\nAuthor: Andrew Laski <email address hidden>\nDate:   Tue Jul 19 14:26:53 2016 -0400\n\n    Add async param to local conductor live_migrate_instance\n    \n    A new async param was added to the RPC version of live_migrate_instance\n    in the conductor but it was missed on the local conductor API. This adds\n    that parameter and adds a unit test that uses the parameter.\n    \n    Change-Id: I7c44a8fc72ba9afbb67269b0bc7ad59eb9b1580e\n    Closes-Bug: #1604475\n", 
            "date_created": "2016-07-19 22:35:08.411897+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b3 development milestone.", 
            "date_created": "2016-09-02 01:16:01.436719+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2016-07-19 22:35:04.168025+00:00"
}