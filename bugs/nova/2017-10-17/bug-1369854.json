{
    "status": "Fix Released", 
    "last_updated": "2015-11-24 03:58:59.826246+00:00", 
    "description": "If I launch an instance from an image that has min_disk set to 2GB, then create an image from the instance, the min_disk attribute is not set correctly on the image (it's set to 0). Instead of being set as an attribute, it exists as a property instead. This can cause issues when other services rely on min_disk to make decisions about size (e.g. bug 1368600 for Horizon, not sure if Cinder is affected too).\n\nThis doesn't seem to happen when creating a basic instance from an instance, only when there is also a volume involved.\n\nI'm not sure if this is a nova or glance issue so I'm opening a task on both for now.\n\nSteps to reproduce\n------------------------\n(done on a recent devstack)\n\n1. Create a new image with e.g. min_disk 2GB\n$ glance image-create --name mindisk2gb --disk-format qcow2 --container-format bare --location https://launchpad.net/cirros/trunk/0.3.0/+download/cirros-0.3.0-i386-disk.img --min-disk 2\n+------------------+--------------------------------------+\n| Property         | Value                                |\n+------------------+--------------------------------------+\n| checksum         | None                                 |\n| container_format | bare                                 |\n| created_at       | 2014-09-16T12:35:33                  |\n| deleted          | False                                |\n| deleted_at       | None                                 |\n| disk_format      | qcow2                                |\n| id               | 9bbed3a5-00bf-4901-855e-556ca02e7fb7 |\n| is_public        | False                                |\n| min_disk         | 2                                    |      <-- min_disk set as expected\n| min_ram          | 0                                    |\n| name             | mindisk2gb                           |\n| owner            | eb6acc49df4b4390a99c722ded526284     |\n| protected        | False                                |\n| size             | 9159168                              |      <-- size looks ok\n| status           | active                               |\n| updated_at       | 2014-09-16T12:35:37                  |\n| virtual_size     | None                                 |\n+------------------+--------------------------------------+\n\n2. Boot an instance from this image, backed by a volume (I believe this matches what happens when launching with \"Image (creates a new volume)\" in Horizon)\n$ nova boot --flavor 4115a835-04f0-4457-b93c-1817bc44812c --block-device device='/dev/vda',source='image',dest='volume',id='9bbed3a5-00bf-4901-855e-556ca02e7fb7',size=2,bootindex=0 my_instance \n+--------------------------------------+--------------------------------------------------+\n| Property                             | Value                                            |\n+--------------------------------------+--------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                           |\n| OS-EXT-AZ:availability_zone          | nova                                             |\n| OS-EXT-STS:power_state               | 0                                                |\n| OS-EXT-STS:task_state                | -                                                |\n| OS-EXT-STS:vm_state                  | building                                         |\n| OS-SRV-USG:launched_at               | -                                                |\n| OS-SRV-USG:terminated_at             | -                                                |\n| accessIPv4                           |                                                  |\n| accessIPv6                           |                                                  |\n| adminPass                            | Uo2DL64GaY74                                     |\n| config_drive                         |                                                  |\n| created                              | 2014-09-16T12:55:30Z                             |\n| flavor                               | m1.lowmem (4115a835-04f0-4457-b93c-1817bc44812c) |\n| hostId                               |                                                  |\n| id                                   | 3e70fd2e-1dc6-4001-941e-9496a9514882             |\n| image                                | Attempt to boot from volume - no image supplied  |\n| key_name                             | -                                                |\n| metadata                             | {}                                               |\n| name                                 | my_instance                                      |\n| os-extended-volumes:volumes_attached | []                                               |\n| progress                             | 0                                                |\n| security_groups                      | default                                          |\n| status                               | BUILD                                            |\n| tenant_id                            | eb6acc49df4b4390a99c722ded526284                 |\n| updated                              | 2014-09-16T12:55:31Z                             |\n| user_id                              | 437279436240498faca4f7bfd0fdc78a                 |\n+--------------------------------------+--------------------------------------------------+\n\n3. Create a snapshot \n$ nova image-create 3e70fd2e-1dc6-4001-941e-9496a9514882 my_instance_snap\n\n4. Find the snapshot in glance image-list and look at the details:\n$ glance image-show d44f7368-5b91-4291-b1f4-e9386fbbbe93\n+---------------------------------+----------------------------------------------------------------------------------+\n| Property                        | Value                                                                            |\n+---------------------------------+----------------------------------------------------------------------------------+\n| Property 'bdm_v2'               | True                                                                             |\n| Property 'block_device_mapping' | [{\"guest_format\": null, \"boot_index\": 0, \"no_device\": null, \"snapshot_id\":       |\n|                                 | \"bce8f300-e21f-47c9-a015-3dfee2f35745\", \"delete_on_termination\": null,           |\n|                                 | \"disk_bus\": \"virtio\", \"image_id\": null, \"source_type\": \"snapshot\",               |\n|                                 | \"device_type\": \"disk\", \"volume_id\": null, \"destination_type\": \"volume\",          |\n|                                 | \"volume_size\": null}]                                                            |\n| Property 'container_format'     | bare                                                                             |\n| Property 'disk_format'          | qcow2                                                                            |\n| Property 'image_id'             | 9bbed3a5-00bf-4901-855e-556ca02e7fb7                                             |\n| Property 'image_name'           | mindisk2gb                                                                       |\n| Property 'min_disk'             | 2                                                                                |      <-- min_disk is set as a property\n| Property 'min_ram'              | 0                                                                                |\n| Property 'root_device_name'     | /dev/vda                                                                         |\n| Property 'size'                 | 9159168                                                                          |      <-- the size appears correct in the properties\n| created_at                      | 2014-09-16T12:57:25                                                              |\n| deleted                         | False                                                                            |\n| id                              | d44f7368-5b91-4291-b1f4-e9386fbbbe93                                             |\n| is_public                       | False                                                                            |\n| min_disk                        | 0                                                                                |       <-- min_disk is 0\n| min_ram                         | 0                                                                                |\n| name                            | my_instance_snap                                                                 |\n| owner                           | eb6acc49df4b4390a99c722ded526284                                                 |\n| protected                       | False                                                                            |\n| size                            | 0                                                                                |      <-- size is set to 0 too\n| status                          | active                                                                           |\n| updated_at                      | 2014-09-16T12:57:25                                                              |\n+---------------------------------+----------------------------------------------------------------------------------+\n\nChatting with someone on the Glance team this doesn't seem to be the expected behaviour? I would expect the size and min_disk attribute to be correct and similar to the properties, in this case.", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 18, 
    "link": "https://bugs.launchpad.net/nova/+bug/1369854", 
    "owner": "https://api.launchpad.net/1.0/~ftersin", 
    "id": 1369854, 
    "index": 4041, 
    "openned": "2014-09-16 05:24:08.800912+00:00", 
    "created": "2014-09-16 05:24:08.800912+00:00", 
    "title": "min_disk and size information wrong when creating an instance image", 
    "comments": [
        {
            "content": "If I launch an instance from an image that has min_disk set to 2GB, then create an image from the instance, the min_disk attribute is not set correctly on the image (it's set to 0). Instead of being set as an attribute, it exists as a property instead. This can cause issues when other services rely on min_disk to make decisions about size (e.g. bug 1368600 for Horizon, not sure if Cinder is affected too).\n\nThis doesn't seem to happen when creating a basic instance from an instance, only when there is also a volume involved.\n\nI'm not sure if this is a nova or glance issue so I'm opening a task on both for now.\n\nSteps to reproduce\n------------------------\n(done on a recent devstack)\n\n1. Create a new image with e.g. min_disk 2GB\n$ glance image-create --name mindisk2gb --disk-format qcow2 --container-format bare --location https://launchpad.net/cirros/trunk/0.3.0/+download/cirros-0.3.0-i386-disk.img --min-disk 2\n+------------------+--------------------------------------+\n| Property         | Value                                |\n+------------------+--------------------------------------+\n| checksum         | None                                 |\n| container_format | bare                                 |\n| created_at       | 2014-09-16T12:35:33                  |\n| deleted          | False                                |\n| deleted_at       | None                                 |\n| disk_format      | qcow2                                |\n| id               | 9bbed3a5-00bf-4901-855e-556ca02e7fb7 |\n| is_public        | False                                |\n| min_disk         | 2                                    |      <-- min_disk set as expected\n| min_ram          | 0                                    |\n| name             | mindisk2gb                           |\n| owner            | eb6acc49df4b4390a99c722ded526284     |\n| protected        | False                                |\n| size             | 9159168                              |      <-- size looks ok\n| status           | active                               |\n| updated_at       | 2014-09-16T12:35:37                  |\n| virtual_size     | None                                 |\n+------------------+--------------------------------------+\n\n2. Boot an instance from this image, backed by a volume (I believe this matches what happens when launching with \"Image (creates a new volume)\" in Horizon)\n$ nova boot --flavor 4115a835-04f0-4457-b93c-1817bc44812c --block-device device='/dev/vda',source='image',dest='volume',id='9bbed3a5-00bf-4901-855e-556ca02e7fb7',size=2,bootindex=0 my_instance \n+--------------------------------------+--------------------------------------------------+\n| Property                             | Value                                            |\n+--------------------------------------+--------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                           |\n| OS-EXT-AZ:availability_zone          | nova                                             |\n| OS-EXT-STS:power_state               | 0                                                |\n| OS-EXT-STS:task_state                | -                                                |\n| OS-EXT-STS:vm_state                  | building                                         |\n| OS-SRV-USG:launched_at               | -                                                |\n| OS-SRV-USG:terminated_at             | -                                                |\n| accessIPv4                           |                                                  |\n| accessIPv6                           |                                                  |\n| adminPass                            | Uo2DL64GaY74                                     |\n| config_drive                         |                                                  |\n| created                              | 2014-09-16T12:55:30Z                             |\n| flavor                               | m1.lowmem (4115a835-04f0-4457-b93c-1817bc44812c) |\n| hostId                               |                                                  |\n| id                                   | 3e70fd2e-1dc6-4001-941e-9496a9514882             |\n| image                                | Attempt to boot from volume - no image supplied  |\n| key_name                             | -                                                |\n| metadata                             | {}                                               |\n| name                                 | my_instance                                      |\n| os-extended-volumes:volumes_attached | []                                               |\n| progress                             | 0                                                |\n| security_groups                      | default                                          |\n| status                               | BUILD                                            |\n| tenant_id                            | eb6acc49df4b4390a99c722ded526284                 |\n| updated                              | 2014-09-16T12:55:31Z                             |\n| user_id                              | 437279436240498faca4f7bfd0fdc78a                 |\n+--------------------------------------+--------------------------------------------------+\n\n3. Create a snapshot \n$ nova image-create 3e70fd2e-1dc6-4001-941e-9496a9514882 my_instance_snap\n\n4. Find the snapshot in glance image-list and look at the details:\n$ glance image-show d44f7368-5b91-4291-b1f4-e9386fbbbe93\n+---------------------------------+----------------------------------------------------------------------------------+\n| Property                        | Value                                                                            |\n+---------------------------------+----------------------------------------------------------------------------------+\n| Property 'bdm_v2'               | True                                                                             |\n| Property 'block_device_mapping' | [{\"guest_format\": null, \"boot_index\": 0, \"no_device\": null, \"snapshot_id\":       |\n|                                 | \"bce8f300-e21f-47c9-a015-3dfee2f35745\", \"delete_on_termination\": null,           |\n|                                 | \"disk_bus\": \"virtio\", \"image_id\": null, \"source_type\": \"snapshot\",               |\n|                                 | \"device_type\": \"disk\", \"volume_id\": null, \"destination_type\": \"volume\",          |\n|                                 | \"volume_size\": null}]                                                            |\n| Property 'container_format'     | bare                                                                             |\n| Property 'disk_format'          | qcow2                                                                            |\n| Property 'image_id'             | 9bbed3a5-00bf-4901-855e-556ca02e7fb7                                             |\n| Property 'image_name'           | mindisk2gb                                                                       |\n| Property 'min_disk'             | 2                                                                                |      <-- min_disk is set as a property\n| Property 'min_ram'              | 0                                                                                |\n| Property 'root_device_name'     | /dev/vda                                                                         |\n| Property 'size'                 | 9159168                                                                          |      <-- the size appears correct in the properties\n| created_at                      | 2014-09-16T12:57:25                                                              |\n| deleted                         | False                                                                            |\n| id                              | d44f7368-5b91-4291-b1f4-e9386fbbbe93                                             |\n| is_public                       | False                                                                            |\n| min_disk                        | 0                                                                                |       <-- min_disk is 0\n| min_ram                         | 0                                                                                |\n| name                            | my_instance_snap                                                                 |\n| owner                           | eb6acc49df4b4390a99c722ded526284                                                 |\n| protected                       | False                                                                            |\n| size                            | 0                                                                                |      <-- size is set to 0 too\n| status                          | active                                                                           |\n| updated_at                      | 2014-09-16T12:57:25                                                              |\n+---------------------------------+----------------------------------------------------------------------------------+\n\nChatting with someone on the Glance team this doesn't seem to be the expected behaviour? I would expect the size and min_disk attribute to be correct and similar to the properties, in this case.", 
            "date_created": "2014-09-16 05:24:08.800912+00:00", 
            "author": "https://api.launchpad.net/1.0/~jpichon"
        }, 
        {
            "content": "I think the real question is why the data is coming up in the Property namespace, and not going back into the main namespace. It almost seems like the metadata update in glanceclient is going through the wrong path. \n\nAny idea which glance API was being used in your setup?", 
            "date_created": "2014-09-16 11:50:50.789618+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I don't recall changing anything from the devstack configuration defaults. Here are some logs extracts:\n\nn-api:\n\n2014-09-16 16:52:41.397 DEBUG nova.api.openstack.wsgi [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] Action: 'action', body: {\"createImage\": {\"name\": \"my_instance_snap2\", \"metadata\": {}}} from (pid=31342) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:931\n2014-09-16 16:52:41.398 DEBUG nova.api.openstack.wsgi [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] Calling method '<bound method Controller._action_create_image of <nova.api.openstack.compute.contrib.keypairs.Controller object at 0x351e310>>' (Content-type='application/json', Accept='application/json') from (pid=31342) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:936\n2014-09-16 16:52:41.868 DEBUG nova.volume.cinder [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] Cinderclient connection created using URL: http://192.168.100.189:8776/v1/eb6acc49df4b4390a99c722ded526284 from (pid=31342) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:255\n2014-09-16 16:52:42.362 DEBUG nova.volume.cinder [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] Cinderclient connection created using URL: http://192.168.100.189:8776/v1/eb6acc49df4b4390a99c722ded526284 from (pid=31342) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:255\n2014-09-16 16:52:42.647 DEBUG nova.volume.cinder [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] Cinderclient connection created using URL: http://192.168.100.189:8776/v1/eb6acc49df4b4390a99c722ded526284 from (pid=31342) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:255\n2014-09-16 16:52:42.943 DEBUG stevedore.extension [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] found extension EntryPoint.parse('file = nova.image.download.file') from (pid=31342) _load_plugins /usr/lib/python2.7/site-packages/stevedore/extension.py:156\n2014-09-16 16:52:42.944 DEBUG stevedore.extension [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] found extension EntryPoint.parse('file = nova.image.download.file') from (pid=31342) _load_plugins /usr/lib/python2.7/site-packages/stevedore/extension.py:156\n2014-09-16 16:52:42.946 DEBUG glanceclient.common.http [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] curl -i -X POST -H 'x-image-meta-property-image_name: mindisk2gb' -H 'Accept-Encoding: gzip, deflate' -H 'x-image-meta-property-bdm_v2: True' -H 'Content-Type: application/octet-stream' -H 'x-image-meta-property-min_disk: 2' -H 'x-image-meta-property-root_device_name: /dev/vda' -H 'Accept: */*' -H 'x-image-meta-property-min_ram: 0' -H 'x-image-meta-size: 0' -H 'x-image-meta-property-container_format: bare' -H 'x-image-meta-is_public: False' -H 'x-image-meta-property-block_device_mapping: [{\"guest_format\": null, \"boot_index\": 0, \"no_device\": null, \"snapshot_id\": \"4c3e85a8-1656-4395-aaec-d81172a8897a\", \"delete_on_termination\": null, \"disk_bus\": \"virtio\", \"image_id\": null, \"source_type\": \"snapshot\", \"device_type\": \"disk\", \"volume_id\": null, \"destination_type\": \"volume\", \"volume_size\": null}]' -H 'x-image-meta-property-disk_format: qcow2' -H 'User-Agent: python-glanceclient' -H 'X-Auth-Token: ***' -H 'x-image-meta-property-size: 9159168' -H 'x-image-meta-property-image_id: 9bbed3a5-00bf-4901-855e-556ca02e7fb7' -H 'x-image-meta-name: my_instance_snap2' http://192.168.100.189:9292/v1/images from (pid=31342) log_curl_request /opt/stack/python-glanceclient/glanceclient/common/http.py:119\n2014-09-16 16:52:43.175 DEBUG glanceclient.common.http [req-8a9287ed-c1d8-47cc-bc45-d54dcc4effd8 demo demo] \nHTTP/1.1 201 Created\ndate: Tue, 16 Sep 2014 15:52:43 GMT\ncontent-length: 1048\ncontent-type: application/json\nlocation: http://192.168.100.189:9292/v1/images/e57976c9-891b-4b82-b000-2974a07e97dd\nx-openstack-request-id: req-d552c0ef-bd7c-43ea-98fb-06421836b8f9\n\n{\"image\": {\"status\": \"active\", \"deleted\": false, \"container_format\": null, \"min_ram\": 0, \"updated_at\": \"2014-09-16T15:52:43\", \"owner\": \"eb6acc49df4b4390a99c722ded526284\", \"min_disk\": 0, \"is_public\": false, \"deleted_at\": null, \"id\": \"e57976c9-891b-4b82-b000-2974a07e97dd\", \"size\": 0, \"virtual_size\": null, \"name\": \"my_instance_snap2\", \"checksum\": null, \"created_at\": \"2014-09-16T15:52:43\", \"disk_format\": null, \"properties\": {\"block_device_mapping\": \"[{\\\"guest_format\\\": null, \\\"boot_index\\\": 0, \\\"no_device\\\": null, \\\"snapshot_id\\\": \\\"4c3e85a8-1656-4395-aaec-d81172a8897a\\\", \\\"delete_on_termination\\\": null, \\\"disk_bus\\\": \\\"virtio\\\", \\\"image_id\\\": null, \\\"source_type\\\": \\\"snapshot\\\", \\\"device_type\\\": \\\"disk\\\", \\\"volume_id\\\": null, \\\"destination_type\\\": \\\"volume\\\", \\\"volume_size\\\": null}]\", \"container_format\": \"bare\", \"min_ram\": \"0\", \"disk_format\": \"qcow2\", \"image_name\": \"mindisk2gb\", \"bdm_v2\": \"True\", \"image_id\": \"9bbed3a5-00bf-4901-855e-556ca02e7fb7\", \"root_device_name\": \"/dev/vda\", \"min_disk\": \"2\", \"size\": \"9159168\"}, \"protected\": false}}\n from (pid=31342) log_http_response /opt/stack/python-glanceclient/glanceclient/common/http.py:133\n\n\ng-api:\n\n2014-09-16 16:52:43.007 31161 DEBUG routes.middleware [-] Matched POST /images __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:100\n2014-09-16 16:52:43.007 31161 DEBUG routes.middleware [-] Route path: '/images', defaults: {'action': u'create', 'controller': <glance.common.wsgi.Resource object at 0x3134210>} __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:102\n2014-09-16 16:52:43.007 31161 DEBUG routes.middleware [-] Match dict: {'action': u'create', 'controller': <glance.common.wsgi.Resource object at 0x3134210>} __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:103\n2014-09-16 16:52:43.008 31161 DEBUG glance.registry.client.v1.api [-] Adding image metadata... add_image_metadata /opt/stack/glance/glance/registry/client/v1/api.py:159\n2014-09-16 16:52:43.008 31161 DEBUG glance.common.client [-] Constructed URL: http://0.0.0.0:9191/images _construct_url /opt/stack/glance/glance/common/client.py:413\n2014-09-16 16:52:43.134 31161 DEBUG glance.registry.client.v1.client [-] Registry request POST /images HTTP 200 request id req-c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 do_request /opt/stack/glance/glance/registry/client/v1/client.py:122\n\n\ng-reg:\n\n2014-09-16 16:52:43.082 31145 DEBUG keystonemiddleware.auth_token [-] Received request from user: 437279436240498faca4f7bfd0fdc78a with project_id : eb6acc49df4b4390a99c722ded526284 and roles: _member_,Member,heat_stack_owner,anotherrole  _build_user_headers /usr/lib/python2.7/site-packages/keystonemiddleware/auth_token.py:773\n2014-09-16 16:52:43.084 31145 DEBUG routes.middleware [c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 437279436240498faca4f7bfd0fdc78a eb6acc49df4b4390a99c722ded526284 - - -] Matched POST /images __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:100\n2014-09-16 16:52:43.084 31145 DEBUG routes.middleware [c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 437279436240498faca4f7bfd0fdc78a eb6acc49df4b4390a99c722ded526284 - - -] Route path: '/images', defaults: {'action': u'create', 'controller': <glance.common.wsgi.Resource object at 0x3378610>} __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:102\n2014-09-16 16:52:43.084 31145 DEBUG routes.middleware [c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 437279436240498faca4f7bfd0fdc78a eb6acc49df4b4390a99c722ded526284 - - -] Match dict: {'action': u'create', 'controller': <glance.common.wsgi.Resource object at 0x3378610>} __call__ /usr/lib/python2.7/site-packages/routes/middleware.py:103\n2014-09-16 16:52:43.131 31145 INFO glance.registry.api.v1.images [c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 437279436240498faca4f7bfd0fdc78a eb6acc49df4b4390a99c722ded526284 - - -] Successfully created image e57976c9-891b-4b82-b000-2974a07e97dd\n2014-09-16 16:52:43.144 31145 INFO glance.wsgi.server [c9af9bde-20ec-4e8b-a4d3-4c65ff1a6821 437279436240498faca4f7bfd0fdc78a eb6acc49df4b4390a99c722ded526284 - - -] 127.0.0.1 - - [16/Sep/2014 16:52:43] \"POST /images HTTP/1.1\" 200 1278 0.116108\n", 
            "date_created": "2014-09-17 00:48:43.577189+00:00", 
            "author": "https://api.launchpad.net/1.0/~jpichon"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/170243", 
            "date_created": "2015-04-02 19:09:20.988307+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "min_disk and size should be 0 for volume-backed instances since they does not consume host disks. See bug 1469179.\n\nBut min_ram must be copied. The proposed patch fixes it.", 
            "date_created": "2015-07-07 06:01:02.526592+00:00", 
            "author": "https://api.launchpad.net/1.0/~ftersin"
        }, 
        {
            "content": "Now https://review.openstack.org/170243 copies min_disk too.", 
            "date_created": "2015-08-13 05:45:16.117591+00:00", 
            "author": "https://api.launchpad.net/1.0/~ftersin"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/170243\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=8cf2d41344785a0752fbfe8745032aed2ec11e27\nSubmitter: Jenkins\nBranch:    master\n\ncommit 8cf2d41344785a0752fbfe8745032aed2ec11e27\nAuthor: Feodor Tersin <email address hidden>\nDate:   Mon Jul 6 21:42:14 2015 +0300\n\n    Fix collection of metadata for a snapshot of a volume-backed instance\n    \n    Currently the snapshot derives its properties from the instance source:\n    an other snapshot or a bootable volume. But that sources could be\n    changed since the instance was booted.\n    \n    To make instance snapshots independent of source changes this patch\n    collects metadata from instance system metadata rather than the sources.\n    \n    Since it brings the only way to initialize image metadata, it fixes:\n    a) min_ram attribute is not inherited from a bootable volume\n    (LP #1369854).\n    b) empty container_format and disk_format attribute are inherited from a\n    source instance snapshot (LP #1439819).\n    \n    Closes-Bug: #1369854\n    Closes-Bug: #1439819\n    Related-Bug: #1469179\n    Change-Id: I067f66356a5ebd738add1591a0069d8049f35c24\n", 
            "date_created": "2015-08-30 01:33:09.686906+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-09-03 11:44:23.686619+00:00"
}