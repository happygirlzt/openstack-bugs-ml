{
    "status": "Fix Released", 
    "last_updated": "2017-06-15 18:58:34.257884+00:00", 
    "description": "Description\n===========\nMigrate VMs failed when anti-affinity group was removed from VMs.\nWhen anti-affinity group was removed, group_hosts of request_spec is set to an empty list (here's what I got when debugging nova-conductor: {'limits': {}, 'group_policies': set([u'anti-affinity']), 'ignore_hosts': [u'test-deploy7'], 'group_hosts': set([]), 'group_updated': True, 'scheduler_hints': {u'group': u'groupId'}}), then in nova.objects.request_spec.RequestSpec#_populate_group_info line 188: hosts = list(filter_properties.get('group_hosts')), and \"TypeError: 'NoneType' object is not iterable\" exception was raised.\n\nSteps to reproduce\n==================\n1. Create an anti-affinity group named A;\n2. Create two VMs and assign these two VM into the anti-affinity group A created in previous step;\n3. Remove anti-affinity group A;\n4. Migrate these two VMs, and all of them got failed.\n\nExpected result\n===============\nThese two VMs were migrated successfully.\n\nActual result\n=============\nMigration of these two VMs got failed.\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n    OpenStack Newton.\n\n2. Which hypervisor did you use?\n   Libvirt\n\n2. Which storage type did you use?\n    Ceph\n\n3. Which networking type did you use?\n   Neutron with OpenVSwitch\n\nLogs & Configs\n==============\n2017-03-23 15:15:44.081 41242 DEBUG oslo_messaging._drivers.amqpdriver [-] received reply msg_id: c8f3a7be34c145a0a6921770994d5fae __call__ /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py:296\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions [req-16b1e2ec-9a77-48dc-ade0-980650973089 142d8663efce464c89811c63e45bd82e f21a9c86d7114bf99c711f4874d80474 - 9f95b9967b894c928880feb32fad1d0d 9f95b9967b894c928880feb32fad1d0d] Unexpected exception in API method\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/migrate_server.py\", line 52, in _migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.compute_api.resize(req.environ['nova.context'], instance)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 166, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 173, in _wrapped\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return fn(self, context, instance, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 147, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 3033, in resize\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     request_spec=request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/api.py\", line 192, in resize_instance\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     request_spec=request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/rpcapi.py\", line 317, in migrate_server\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return cctxt.call(context, 'migrate_server', **kw)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 169, in call\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     retry=self.retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/transport.py\", line 97, in _send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 464, in send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     retry=retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 455, in _send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     raise result\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions TypeError: 'NoneType' object is not iterable\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     res = self.dispatcher.dispatch(message)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     result = func(ctxt, **new_args)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 199, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return function(self, context, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 220, in migrate_server\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     reservations, clean_shutdown, request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 283, in _cold_migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     updates, ex, legacy_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.force_reraise()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 252, in _cold_migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     task.execute()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 27, in wrap\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.rollback()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.force_reraise()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 24, in wrap\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return original(self)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 42, in execute\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return self._execute()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/migrate.py\", line 54, in _execute\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.instance.availability_zone)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/request_spec.py\", line 385, in from_components\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     spec_obj._populate_group_info(filter_properties)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/request_spec.py\", line 188, in _populate_group_info\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     members = list(filter_properties.get('group_members'))\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions TypeError: 'NoneType' object is not iterable\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.084 41242 INFO nova.api.openstack.wsgi [req-16b1e2ec-9a77-48dc-ade0-980650973089 142d8663efce464c89811c63e45bd82e f21a9c86d7114bf99c711f4874d80474 - 9f95b9967b894c928880feb32fad1d0d 9f95b9967b894c928880feb32fad1d0d] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1675676", 
    "owner": "https://api.launchpad.net/1.0/~lcsong", 
    "id": 1675676, 
    "index": 8020, 
    "openned": "2017-03-24 08:22:24.004858+00:00", 
    "created": "2017-03-24 08:22:24.004858+00:00", 
    "title": "Migrate VM failed when anti-affinity group was removed.", 
    "comments": [
        {
            "content": "Description\n===========\nMigrate VMs failed when anti-affinity group was removed from VMs.\nWhen anti-affinity group was removed, group_hosts of request_spec is set to an empty list (here's what I got when debugging nova-conductor: {'limits': {}, 'group_policies': set([u'anti-affinity']), 'ignore_hosts': [u'test-deploy7'], 'group_hosts': set([]), 'group_updated': True, 'scheduler_hints': {u'group': u'groupId'}}), then in nova.objects.request_spec.RequestSpec#_populate_group_info line 188: hosts = list(filter_properties.get('group_hosts')), and \"TypeError: 'NoneType' object is not iterable\" exception was raised.\n\nSteps to reproduce\n==================\n1. Create an anti-affinity group named A;\n2. Create two VMs and assign these two VM into the anti-affinity group A created in previous step;\n3. Remove anti-affinity group A;\n4. Migrate these two VMs, and all of them got failed.\n\nExpected result\n===============\nThese two VMs were migrated successfully.\n\nActual result\n=============\nMigration of these two VMs got failed.\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n    OpenStack Newton.\n\n2. Which hypervisor did you use?\n   Libvirt\n\n2. Which storage type did you use?\n    Ceph\n\n3. Which networking type did you use?\n   Neutron with OpenVSwitch\n\nLogs & Configs\n==============\n2017-03-23 15:15:44.081 41242 DEBUG oslo_messaging._drivers.amqpdriver [-] received reply msg_id: c8f3a7be34c145a0a6921770994d5fae __call__ /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py:296\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions [req-16b1e2ec-9a77-48dc-ade0-980650973089 142d8663efce464c89811c63e45bd82e f21a9c86d7114bf99c711f4874d80474 - 9f95b9967b894c928880feb32fad1d0d 9f95b9967b894c928880feb32fad1d0d] Unexpected exception in API method\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/migrate_server.py\", line 52, in _migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.compute_api.resize(req.environ['nova.context'], instance)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 166, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 173, in _wrapped\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return fn(self, context, instance, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 147, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 3033, in resize\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     request_spec=request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/api.py\", line 192, in resize_instance\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     request_spec=request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/rpcapi.py\", line 317, in migrate_server\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return cctxt.call(context, 'migrate_server', **kw)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 169, in call\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     retry=self.retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/transport.py\", line 97, in _send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 464, in send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     retry=retry)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 455, in _send\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     raise result\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions TypeError: 'NoneType' object is not iterable\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     res = self.dispatcher.dispatch(message)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     result = func(ctxt, **new_args)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 199, in inner\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return function(self, context, *args, **kwargs)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 220, in migrate_server\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     reservations, clean_shutdown, request_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 283, in _cold_migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     updates, ex, legacy_spec)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.force_reraise()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 252, in _cold_migrate\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     task.execute()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 27, in wrap\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.rollback()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.force_reraise()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 24, in wrap\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return original(self)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/base.py\", line 42, in execute\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     return self._execute()\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/conductor/tasks/migrate.py\", line 54, in _execute\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     self.instance.availability_zone)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/request_spec.py\", line 385, in from_components\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     spec_obj._populate_group_info(filter_properties)\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/request_spec.py\", line 188, in _populate_group_info\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions     members = list(filter_properties.get('group_members'))\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions TypeError: 'NoneType' object is not iterable\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.082 41242 ERROR nova.api.openstack.extensions\n2017-03-23 15:15:44.084 41242 INFO nova.api.openstack.wsgi [req-16b1e2ec-9a77-48dc-ade0-980650973089 142d8663efce464c89811c63e45bd82e f21a9c86d7114bf99c711f4874d80474 - 9f95b9967b894c928880feb32fad1d0d 9f95b9967b894c928880feb32fad1d0d] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>", 
            "date_created": "2017-03-24 08:22:24.004858+00:00", 
            "author": "https://api.launchpad.net/1.0/~lcsong"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/451664", 
            "date_created": "2017-03-30 06:27:34.228415+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Here's the patch fixing this bug: https://review.openstack.org/#/c/451664/", 
            "date_created": "2017-03-30 06:49:21.698362+00:00", 
            "author": "https://api.launchpad.net/1.0/~lcsong"
        }
    ], 
    "closed": "2017-06-15 18:58:31.812072+00:00"
}