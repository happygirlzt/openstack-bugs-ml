{
    "status": "Invalid", 
    "last_updated": "2014-09-04 18:33:11.656363+00:00", 
    "description": "I'm trying to setup a compute node using LXC, but when I try to launch an instance I got this error in compute.log file :\n\n2013-05-03 10:19:22 ERROR nova.compute.manager [req-0192bab0-df91-45c7-8f95-a038589e8e6d 220efc2031ed4ee5a5f46c5f710f2020 e7a14c7861ff42eea61fcf0edefb8d7e] [instance: 0c41a5b7-5a2b-48c4-952b-7296157eca5a] Build error: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 501, in _run_instance\\n    injected_files, admin_password)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 754, in _spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 117, in wrapped\\n    temp_level, payload)\\n', '  File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\\n    self.gen.next()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 92, in wrapped\\n    return f(*args, **kw)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1093, in spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1933, in _create_domain_and_network\\n    domain = self._create_domain(xml)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1912, in _create_domain\\n    domain.createWithFlags(launch_flags)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 187, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 147, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 76, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 708, in createWithFlags\\n    if ret == -1: raise libvirtError (\\'virDomainCreateWithFlags() failed\\', dom=self)\\n', 'libvirtError: Unable to add bridge  port veth0: No such device\\n']\n\n\nWell, I guess the problem is related to the bridge creation. The last error above shows that libvirt was not able to add the port veth0 to the bridge \"\" (no name is mentioned !!!!)\nInvestigating the log file of nova compute shows the following weird line :\n\n2013-05-03 10:19:13 DEBUG nova.compute.manager [req-0192bab0-df91-45c7-8f95-a038589e8e6d 220efc2031ed4ee5a5f46c5f710f2020 e7a14c7861ff42eea61fcf0edefb8d7e] [instance: 0c41a5b7-5a2b-48c4-952b-7296157eca5a] Instance network_info: |[VIF({'network': Network({'bridge': '', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': 'fixed', 'floating_ips': [], 'address': u'172.18.0.3'})], 'version': 4, 'meta': {'dhcp_server': u'172.18.0.1'}, 'dns': [IP({'meta': {}, 'version': 4, 'type': 'dns', 'address': u'172.16.1.5'}), IP({'meta': {}, 'version': 4, 'type': 'dns', 'address': u'8.8.8.8'})], 'routes': [], 'cidr': u'172.18.0.0/16', 'gateway': IP({'meta': {}, 'version': 4, 'type': 'gateway', 'address': u'172.18.255.254'})})], 'meta': {'injected': False, 'tenant_id': u'e7a14c7861ff42eea61fcf0edefb8d7e'}, 'id': u'f8bb9e5b-8a51-40f9-8ce7-f3300600f9f1', 'label': u'LXC'}), 'meta': {}, 'id': u'55748af2-457f-47fa-a57d-9ae498c0a04b', 'address': u'fa:16:3e:00:c3:9f'})]| _allocate_network /usr/lib/python2.6/site-packages/nova/compute/manager.py:726\n\nthe start of the line shows this : \"VIF({'network': Network({'bridge': '', 'subnets':\"\nAs you can see there is no name affected to the bridge attribute.\nSo, my guess is that this problem is related to Quantum. Because I'm using the same configuration of Quantum on an other node running KVM, and it's working fine.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1175973", 
    "owner": "None", 
    "id": 1175973, 
    "index": 4894, 
    "openned": "2013-05-03 15:31:30.138095+00:00", 
    "created": "2013-05-03 09:58:36.632612+00:00", 
    "title": "LXC Folsom Linuxbridge", 
    "comments": [
        {
            "content": "I'm trying to setup a compute node using LXC, but when I try to launch an instance I got this error in compute.log file :\n\n2013-05-03 10:19:22 ERROR nova.compute.manager [req-0192bab0-df91-45c7-8f95-a038589e8e6d 220efc2031ed4ee5a5f46c5f710f2020 e7a14c7861ff42eea61fcf0edefb8d7e] [instance: 0c41a5b7-5a2b-48c4-952b-7296157eca5a] Build error: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 501, in _run_instance\\n    injected_files, admin_password)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 754, in _spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 117, in wrapped\\n    temp_level, payload)\\n', '  File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\\n    self.gen.next()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 92, in wrapped\\n    return f(*args, **kw)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1093, in spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1933, in _create_domain_and_network\\n    domain = self._create_domain(xml)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 1912, in _create_domain\\n    domain.createWithFlags(launch_flags)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 187, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 147, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/lib/python2.6/site-packages/eventlet/tpool.py\", line 76, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 708, in createWithFlags\\n    if ret == -1: raise libvirtError (\\'virDomainCreateWithFlags() failed\\', dom=self)\\n', 'libvirtError: Unable to add bridge  port veth0: No such device\\n']\n\n\nWell, I guess the problem is related to the bridge creation. The last error above shows that libvirt was not able to add the port veth0 to the bridge \"\" (no name is mentioned !!!!)\nInvestigating the log file of nova compute shows the following weird line :\n\n2013-05-03 10:19:13 DEBUG nova.compute.manager [req-0192bab0-df91-45c7-8f95-a038589e8e6d 220efc2031ed4ee5a5f46c5f710f2020 e7a14c7861ff42eea61fcf0edefb8d7e] [instance: 0c41a5b7-5a2b-48c4-952b-7296157eca5a] Instance network_info: |[VIF({'network': Network({'bridge': '', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': 'fixed', 'floating_ips': [], 'address': u'172.18.0.3'})], 'version': 4, 'meta': {'dhcp_server': u'172.18.0.1'}, 'dns': [IP({'meta': {}, 'version': 4, 'type': 'dns', 'address': u'172.16.1.5'}), IP({'meta': {}, 'version': 4, 'type': 'dns', 'address': u'8.8.8.8'})], 'routes': [], 'cidr': u'172.18.0.0/16', 'gateway': IP({'meta': {}, 'version': 4, 'type': 'gateway', 'address': u'172.18.255.254'})})], 'meta': {'injected': False, 'tenant_id': u'e7a14c7861ff42eea61fcf0edefb8d7e'}, 'id': u'f8bb9e5b-8a51-40f9-8ce7-f3300600f9f1', 'label': u'LXC'}), 'meta': {}, 'id': u'55748af2-457f-47fa-a57d-9ae498c0a04b', 'address': u'fa:16:3e:00:c3:9f'})]| _allocate_network /usr/lib/python2.6/site-packages/nova/compute/manager.py:726\n\nthe start of the line shows this : \"VIF({'network': Network({'bridge': '', 'subnets':\"\nAs you can see there is no name affected to the bridge attribute.\nSo, my guess is that this problem is related to Quantum. Because I'm using the same configuration of Quantum on an other node running KVM, and it's working fine.", 
            "date_created": "2013-05-03 09:58:36.632612+00:00", 
            "author": "https://api.launchpad.net/1.0/~aso-anas"
        }, 
        {
            "content": "Hi Mark. Please can you provide me with more information ?", 
            "date_created": "2013-05-03 15:58:32.282455+00:00", 
            "author": "https://api.launchpad.net/1.0/~aso-anas"
        }, 
        {
            "content": "I think that Mark is saying this isn't a quantum bug, but a nova LXC bug.", 
            "date_created": "2013-05-08 05:32:05.805510+00:00", 
            "author": "https://api.launchpad.net/1.0/~mikal"
        }, 
        {
            "content": "Can you try with grizzly or ideally the latest code in master?", 
            "date_created": "2013-05-08 15:07:10.629689+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }
    ], 
    "closed": "2014-09-04 18:33:08.318171+00:00"
}