{
    "status": "Invalid", 
    "last_updated": "2012-07-31 15:03:36.315160+00:00", 
    "description": "Description:\n\nServer is getting created with personality file size exceeding the limit , \nbut it has to OverLimit exception.\n\nExpected:\nShould raise OverLimit Exception.\n\nActual:\nServer is getting Created.\n\nSteps to be followed:\n1. Create a file with an encoded data.\n2. Set the limit of \"injected_file_content_bytes\" to the size of created file minus 1.\n3. Check for the Updated Limit value.\n4. Try to create a server with personality file created above.\n\nLOG:\n\nCreate a file with encoded data and check its size\n>>> import os\n>>> os.path.getsize('/home/muralik/banner.txt')\n141\n\nSet the limit of injected_file_content_bytes to size 140\nnova-manage project quota --project=2ade81f157df446b856bdbe38073620a --key injected_file_content_bytes --value 140\n2012-07-11 19:25:44 DEBUG nova.utils [req-bcda3941-4f26-42bc-98dc-4e74d5f997b8 None None] backend <module 'nova.db.sqlalchemy.api' from '/opt/stack/nova/nova/db/sqlalchemy/api.pyc'> from (pid=24504) __get_backend /opt/stack/nova/nova/utils.py:484\nmetadata_items: 128\ninjected_file_content_bytes: 140\nvolumes: 10\ngigabytes: 1000\nram: 51200\nfloating_ips: 10\nsecurity_group_rules: 20\ninstances: 10\nkey_pairs: 100\ninjected_files: 5\ncores: 20\ninjected_file_path_bytes: 255\nsecurity_groups: 10\n\nCreate a server with personality file created above\nmuralik@ubuntu:~$ nova boot --image 9498d38d-cfb1-4818-90e4-70e66d7c75da --flavor 1 --user_data /home/muralik/banner.txt \"exceeding_limit\"\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                               |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000016                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-STS:task_state               | scheduling                           |\n| OS-EXT-STS:vm_state                 | building                             |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| adminPass                           | 6iKunduU48vD                         |\n| config_drive                        |                                      |\n| created                             | 2012-07-11T13:57:35Z                 |\n| flavor                              | m1.tiny                              |\n| hostId                              |                                      |\n| id                                  | 657b4155-f5cb-49ac-b7d0-f99f06f724bc |\n| image                               | cirros-0.3.0-x86_64-uec              |\n| key_name                            |                                      |\n| metadata                            | {}                                   |\n| name                                | exceeding_limit                      |\n| progress                            | 0                                    |\n| status                              | BUILD                                |\n| tenant_id                           | 93f94664e0734c479945e43df39d6614     |\n| updated                             | 2012-07-11T13:57:36Z                 |\n| user_id                             | a0585fd48bee4a728422afd1c4f6bfab     |\n+-------------------------------------+--------------------------------------+\n\n\nmuralik@ubuntu:~$ nova list\n+--------------------------------------+-----------------+--------+-------------------+\n| ID                                   | Name            | Status | Networks          |\n+--------------------------------------+-----------------+--------+-------------------+\n| 657b4155-f5cb-49ac-b7d0-f99f06f724bc | exceeding_limit | ACTIVE | private=10.0.0.17 |\n+--------------------------------------+-----------------+--------+-------------------+", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1023316", 
    "owner": "None", 
    "id": 1023316, 
    "index": 2968, 
    "openned": "2012-07-11 08:58:47.073114+00:00", 
    "created": "2012-07-11 08:58:47.073114+00:00", 
    "title": "Creating server exceeding personality file size  isn't  throwing OverLimit exception.", 
    "comments": [
        {
            "content": "Description:\n\nServer is getting created with personality file size exceeding the limit , \nbut it has to OverLimit exception.\n\nExpected:\nShould raise OverLimit Exception.\n\nActual:\nServer is getting Created.\n\nSteps to be followed:\n1. Create a file with an encoded data.\n2. Set the limit of \"injected_file_content_bytes\" to the size of created file minus 1.\n3. Check for the Updated Limit value.\n4. Try to create a server with personality file created above.\n\nLOG:\n\nCreate a file with encoded data and check its size\n>>> import os\n>>> os.path.getsize('/home/muralik/banner.txt')\n141\n\nSet the limit of injected_file_content_bytes to size 140\nnova-manage project quota --project=2ade81f157df446b856bdbe38073620a --key injected_file_content_bytes --value 140\n2012-07-11 19:25:44 DEBUG nova.utils [req-bcda3941-4f26-42bc-98dc-4e74d5f997b8 None None] backend <module 'nova.db.sqlalchemy.api' from '/opt/stack/nova/nova/db/sqlalchemy/api.pyc'> from (pid=24504) __get_backend /opt/stack/nova/nova/utils.py:484\nmetadata_items: 128\ninjected_file_content_bytes: 140\nvolumes: 10\ngigabytes: 1000\nram: 51200\nfloating_ips: 10\nsecurity_group_rules: 20\ninstances: 10\nkey_pairs: 100\ninjected_files: 5\ncores: 20\ninjected_file_path_bytes: 255\nsecurity_groups: 10\n\nCreate a server with personality file created above\nmuralik@ubuntu:~$ nova boot --image 9498d38d-cfb1-4818-90e4-70e66d7c75da --flavor 1 --user_data /home/muralik/banner.txt \"exceeding_limit\"\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                               |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000016                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-STS:task_state               | scheduling                           |\n| OS-EXT-STS:vm_state                 | building                             |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| adminPass                           | 6iKunduU48vD                         |\n| config_drive                        |                                      |\n| created                             | 2012-07-11T13:57:35Z                 |\n| flavor                              | m1.tiny                              |\n| hostId                              |                                      |\n| id                                  | 657b4155-f5cb-49ac-b7d0-f99f06f724bc |\n| image                               | cirros-0.3.0-x86_64-uec              |\n| key_name                            |                                      |\n| metadata                            | {}                                   |\n| name                                | exceeding_limit                      |\n| progress                            | 0                                    |\n| status                              | BUILD                                |\n| tenant_id                           | 93f94664e0734c479945e43df39d6614     |\n| updated                             | 2012-07-11T13:57:36Z                 |\n| user_id                             | a0585fd48bee4a728422afd1c4f6bfab     |\n+-------------------------------------+--------------------------------------+\n\n\nmuralik@ubuntu:~$ nova list\n+--------------------------------------+-----------------+--------+-------------------+\n| ID                                   | Name            | Status | Networks          |\n+--------------------------------------+-----------------+--------+-------------------+\n| 657b4155-f5cb-49ac-b7d0-f99f06f724bc | exceeding_limit | ACTIVE | private=10.0.0.17 |\n+--------------------------------------+-----------------+--------+-------------------+", 
            "date_created": "2012-07-11 08:58:47.073114+00:00", 
            "author": "https://api.launchpad.net/1.0/~meenakshi-m"
        }, 
        {
            "content": "Looks like you're using the wrong option to nova boot, see help:\n\n  --file <dst-path=src-path>\n                        Store arbitrary files from <src-path> locally to <dst-\n                        path> on the new server. You may store up to 5 files.\n  --user_data <user-data>\n                        user data file to pass to be exposed by the metadata\n                        server.\n\nIn order to trigger the injected_file_content_bytes, you need to use the --file option instead of --user-data.\n\nIn which case, you should see an expected 413 response such as:\n\nPESP:{'status': '413', 'content-length': '93', 'x-compute-request-id': '...', 'retry-after': '0', 'date': 'Tue, 31 Jul 2012 14:57:12 GMT', 'content-type': 'application/json; charset=UTF-8'} {\"overLimit\": {\"message\": \"Personality file content too long\", \"code\": 413, \"retryAfter\": 0}}\n ", 
            "date_created": "2012-07-31 15:03:20.199672+00:00", 
            "author": "https://api.launchpad.net/1.0/~eglynn"
        }
    ], 
    "closed": "2012-07-31 15:03:34.715892+00:00"
}