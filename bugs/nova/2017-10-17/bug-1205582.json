{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:59:21.134966+00:00", 
    "description": "When user quota is not set, it's not restricted by the project quota.\n\nReproduce:\n1. Set project quota:\n# nova-manage project quota --project 846576498dc24660943784e25e2b5b1a --key instances --value 3\nQuota                                Limit      In Use     Reserved\nmetadata_items                       128        0          0\ninjected_file_content_bytes          10240      0          0\nram                                  51200      0          0\nfloating_ips                         10         0          0\nsecurity_group_rules                 20         0          0\ninstances                            3          0          0\nkey_pairs                            100        0          0\ninjected_files                       5          0          0\ncores                                20         0          0\nfixed_ips                            unlimited  0          0\ninjected_file_path_bytes             255        0          0\nsecurity_groups                      10         0          0\n\n2. get the users for project.\n# keystone user-list --tenant-id 846576498dc24660943784e25e2b5b1a\n+----------------------------------+--------+---------+-----------------+\n|                id                |  name  | enabled |      email      |\n+----------------------------------+--------+---------+-----------------+\n| 6a120d1a6034481fa7e905d422dceb76 |  test  |   True  |  <email address hidden>  |\n+----------------------------------+--------+---------+-----------------+\n\n3. get user quota.\n# nova-manage project quota --project 846576498dc24660943784e25e2b5b1a --user 6a120d1a6034481fa7e905d422dceb76\nmetadata_items                       128        0          0\ninjected_file_content_bytes          10240      0          0\nram                                  51200      0          0\nfloating_ips                         10         0          0\nsecurity_group_rules                 20         0          0\ninstances                            2          0          0\nkey_pairs                            100        0          0\ninjected_files                       5          0          0\ncores                                20         0          0\nfixed_ips                            unlimited  0          0\ninjected_file_path_bytes             255        0          0\nsecurity_groups                      10         0          0\n\nInstances quota for user should be 3, but in fact it's 2, and 2 is the default quota i have set in the config file.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1205582", 
    "owner": "https://api.launchpad.net/1.0/~liyingjun", 
    "id": 1205582, 
    "index": 5157, 
    "openned": "2013-07-27 07:22:28.583939+00:00", 
    "created": "2013-07-27 07:22:28.583939+00:00", 
    "title": "user quota not properly work with project quota", 
    "comments": [
        {
            "content": "When user quota is not set, it's not restricted by the project quota.\n\nReproduce:\n1. Set project quota:\n# nova-manage project quota --project 846576498dc24660943784e25e2b5b1a --key instances --value 3\nQuota                                Limit      In Use     Reserved  \nmetadata_items                       128        0          0         \ninjected_file_content_bytes          10240      0          0         \nram                                  51200      0          0         \nfloating_ips                         10         0          0         \nsecurity_group_rules                 20         0          0         \ninstances                            3          0          0         \nkey_pairs                            100        0          0         \ninjected_files                       5          0          0         \ncores                                20         0          0         \nfixed_ips                            unlimited  0          0         \ninjected_file_path_bytes             255        0          0         \nsecurity_groups                      10         0          0 \n\n2. get the users for project.\n# keystone user-list --tenant-id 846576498dc24660943784e25e2b5b1a\n+----------------------------------+--------+---------+-----------------+\n|                id                |  name  | enabled |      email      |\n+----------------------------------+--------+---------+-----------------+\n| 6a120d1a6034481fa7e905d422dceb76 |  test  |   True  |  <email address hidden>  |\n+----------------------------------+--------+---------+-----------------+\n\n3. get user quota.\n# nova-manage project quota --project 846576498dc24660943784e25e2b5b1a --user 6a120d1a6034481fa7e905d422dceb76\nmetadata_items                       128        0          0         \ninjected_file_content_bytes          10240      0          0         \nram                                  51200      0          0         \nfloating_ips                         10         0          0         \nsecurity_group_rules                 20         0          0         \ninstances                            2          0          0         \nkey_pairs                            100        0          0         \ninjected_files                       5          0          0         \ncores                                20         0          0         \nfixed_ips                            unlimited  0          0         \ninjected_file_path_bytes             255        0          0         \nsecurity_groups                      10         0          0 \n\nAs we can see, instances quota is 2, and 2 is the default quota i have set in the config file.", 
            "date_created": "2013-07-27 07:22:28.583939+00:00", 
            "author": "https://api.launchpad.net/1.0/~liyingjun"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/38966", 
            "date_created": "2013-07-28 15:02:15.360508+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/38966\nCommitted: http://github.com/openstack/nova/commit/2c84198f2b239d43bfc2a8b33465797280a34df2\nSubmitter: Jenkins\nBranch:    master\n\ncommit 2c84198f2b239d43bfc2a8b33465797280a34df2\nAuthor: liyingjun <email address hidden>\nDate:   Sun Jul 28 22:49:38 2013 +0800\n\n    Use project quota as default user quota\n    \n        * Add the missing db_api test cases for user quota.\n        * Fixes bug 1205582\n    \n    Change-Id: Iba8702b4d6d67ef6bb3257a39da3838424d0cd07\n", 
            "date_created": "2013-07-29 22:24:00.396043+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/40779\nCommitted: http://github.com/openstack/oslo-incubator/commit/4d5ce859c61e24b287be33a2b821aded3577cddb\nSubmitter: Jenkins\nBranch:    master\n\ncommit 4d5ce859c61e24b287be33a2b821aded3577cddb\nAuthor: liyingjun <email address hidden>\nDate:   Thu Aug 8 09:24:40 2013 +0800\n\n    User quota update should not exceed project quota\n    \n    When user quota is not set, the default quota set in\n    config file will be used as the default user quota,\n    this will break the logic of user quota (the default\n    user quota should be restricted by the project quota)\n    \n    Fixes bug 1208400\n    Fixes bug 1205582\n    \n    Change-Id: Id98d504d8f5e0dda642fa5e7c550acea79520c3d\n", 
            "date_created": "2013-08-26 02:58:50.884931+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-09-05 15:43:21.928581+00:00"
}