{
    "status": "Invalid", 
    "last_updated": "2013-10-03 14:39:06.186736+00:00", 
    "description": "http://logs.openstack.org/81/48581/2/check/check-tempest-devstack-vm-postgres-full/ef4ce76/logs/screen-n-api.txt.gz#_2013-09-28_09_53_39_077 caused the  failure of tempest.api.compute.admin.test_flavors.FlavorsAdminTestXML.test_create_flavor.", 
    "tags": [
        "testing"
    ], 
    "importance": "Undecided", 
    "heat": 32, 
    "link": "https://bugs.launchpad.net/nova/+bug/1232748", 
    "owner": "None", 
    "id": 1232748, 
    "index": 5400, 
    "openned": "2013-09-29 13:45:23.549485+00:00", 
    "created": "2013-09-29 13:45:23.549485+00:00", 
    "title": "[Postgres] DB error: (OperationalError) could not translate host name 'localhost' to address", 
    "comments": [
        {
            "content": "http://logs.openstack.org/81/48581/2/check/check-tempest-devstack-vm-postgres-full/ef4ce76/logs/screen-n-api.txt.gz#_2013-09-28_09_53_39_077 caused the  failure of tempest.api.compute.admin.test_flavors.FlavorsAdminTestXML.test_create_flavor.", 
            "date_created": "2013-09-29 13:45:23.549485+00:00", 
            "author": "https://api.launchpad.net/1.0/~afazekas"
        }, 
        {
            "content": "Full stacktrace:\n\n2013-10-01 21:32:33.259 ERROR nova.api.openstack [req-9b2330ff-41f5-487c-921c-bcf6fa072cf1 FixedIPsTestJson371377893-user FixedIPsTestJson371377893-tenant] Caught error: (OperationalError) could not translate host name \"localhost\" to address: Temporary failure in name resolution\n None None\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack Traceback (most recent call last):\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/__init__.py\", line 119, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 545, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 912, in __call__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     content_type, body, accept)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 971, in _process_stack\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 1052, in dispatch\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/compute/servers.py\", line 733, in show\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     want_objects=True)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1645, in get\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     context, instance_id, expected_attrs=expected_attrs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/objects/base.py\", line 108, in wrapper\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     result = fn(cls, context, *args, **kwargs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/objects/instance.py\", line 303, in get_by_uuid\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     columns_to_join=columns_to_join)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/db/api.py\", line 604, in instance_get_by_uuid\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return IMPL.instance_get_by_uuid(context, uuid, columns_to_join)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 126, in wrapper\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return f(*args, **kwargs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1678, in instance_get_by_uuid\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     columns_to_join=columns_to_join)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1684, in _instance_get_by_uuid\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     filter_by(uuid=uuid).\\\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2156, in first\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     ret = list(self[0:1])\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2023, in __getitem__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return list(res)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2227, in __iter__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return self._execute_and_instances(context)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2240, in _execute_and_instances\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     close_with_result=True)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2231, in _connection_from_session\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     **kw)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 784, in connection\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     close_with_result=close_with_result)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 790, in _connection_for_bind\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return engine.contextual_connect(**kwargs)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2489, in contextual_connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     self.pool.connect(),\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 236, in connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return _ConnectionFairy(self).checkout()\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 401, in __init__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     rec = self._connection_record = pool._do_get()\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 746, in _do_get\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     con = self._create_connection()\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 189, in _create_connection\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return _ConnectionRecord(self)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 282, in __init__\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     self.connection = self.__connect()\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 344, in __connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     connection = self.__pool._creator()\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py\", line 80, in connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return dialect.connect(*cargs, **cparams)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 281, in connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     return self.dbapi.connect(*cargs, **cparams)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/psycopg2/__init__.py\", line 179, in connect\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack     connection_factory=connection_factory, async=async)\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack OperationalError: (OperationalError) could not translate host name \"localhost\" to address: Temporary failure in name resolution\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack  None None\n2013-10-01 21:32:33.259 23942 TRACE nova.api.openstack \n2013-10-01 21:32:33.275 INFO nova.api.openstack [req-9b2330ff-41f5-487c-921c-bcf6fa072cf1 FixedIPsTestJson371377893-user FixedIPsTestJson371377893-tenant] http://127.0.0.1:8774/v2/806f9f1a95ce4b88bf524a7fcecd98b4/servers/a3332432-2592-48a6-865a-6a914f943098 returned with HTTP 500\n2013-10-01 21:32:33.276 DEBUG nova.api.openstack.wsgi [req-9b2330ff-41f5-487c-921c-bcf6fa072cf1 FixedIPsTestJson371377893-user FixedIPsTestJson371377893-tenant] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. __call__ /opt/stack/new/nova/nova/api/openstack/wsgi.py:1198\n2013-10-01 21:32:33.288 INFO nova.osapi_compute.wsgi.server [req-9b2330ff-41f5-487c-921c-bcf6fa072cf1 FixedIPsTestJson371377893-user FixedIPsTestJson371377893-tenant] 127.0.0.1 \"GET /v2/806f9f1a95ce4b88bf524a7fcecd98b4/servers/a3332432-2592-48a6-865a-6a914f943098 HTTP/1.1\" status: 500 len: 354 time: 0.7759712\n\n\nhttp://logs.openstack.org/57/49257/2/check/check-tempest-devstack-vm-postgres-full/c223888/logs/screen-n-api.txt.gz?\n\n\nThis only happens for postgres\n\nlogstash query: \"OperationalError: (OperationalError) could not translate host name \\\"localhost\\\" to address\" AND @fields.filename:\"logs/screen-n-api.txt\"", 
            "date_created": "2013-10-01 22:25:19.488878+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Its unclear if this why this only happens for postgres and unclear if this is a nova bug or a infra bug", 
            "date_created": "2013-10-01 22:36:53.872930+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "keystone: http://logs.openstack.org/45/49245/2/check/check-tempest-devstack-vm-postgres-full/5e3449a/logs/screen-key.txt.gz?", 
            "date_created": "2013-10-02 15:23:40.690287+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Looks like bug 1233857 is a duplicate of this one and has some more log links.", 
            "date_created": "2013-10-02 15:33:30.670110+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Seems like a DNS issue, we could try setting the host to 127.0.0.1 rather than localhost to see if that would resolve it.", 
            "date_created": "2013-10-02 16:07:53.673432+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "logstash query:  @message:\"OperationalError: (OperationalError) could not translate host name \\\"localhost\\\" to address\"  AND @fields.filename:\"logs/screen-n-api.txt\"\nhttps://review.openstack.org/49280", 
            "date_created": "2013-10-02 16:33:45.594909+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "It's worth noting that we have slightly different /etc/hosts situations between HPCloud and Rackspace. Can we tell easily whether this is only affecting servers in Rackspace (which would be exclusively check jobs, by the way, so if we're also seeing it on gate jobs then that means it's not just Rackspace, though the reverse is not true since check jobs can use both providers).", 
            "date_created": "2013-10-02 16:34:44.749762+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "I've got a patch up here: https://review.openstack.org/#/c/49409/", 
            "date_created": "2013-10-02 18:10:20.813019+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/49409\nCommitted: http://github.com/openstack-dev/devstack/commit/96ba6ec1bf0b7cc54f9968e4cc3aa80b8f2c368e\nSubmitter: Jenkins\nBranch:    master\n\ncommit 96ba6ec1bf0b7cc54f9968e4cc3aa80b8f2c368e\nAuthor: Matt Riedemann <email address hidden>\nDate:   Wed Oct 2 11:08:56 2013 -0700\n\n    Change DATABASE_HOST default to 127.0.0.1\n    \n    Attempt to fix what is suspected to be a DNS resolution issue with\n    postgresql check job.\n    \n    Closes-Bug: #1232748\n    \n    Change-Id: Ic82e54b2af038e6c21d4f026f3da10f34c3c185c\n", 
            "date_created": "2013-10-03 00:34:39.513055+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "\nI will be out of the office starting  2013/10/01 and will not return until\n2013/10/07.\n\nI will check mails at night and try to respond you ASAP", 
            "date_created": "2013-10-03 04:12:32+00:00", 
            "author": "https://api.launchpad.net/1.0/~xingzhou"
        }, 
        {
            "content": "This looks like an issue with postgresql depending on what the keystone database configuration URI is set to and that was handled by devstack, so I've marked the other affected projects as invalid since I don't think they really have any changes to make.", 
            "date_created": "2013-10-03 14:39:05.333025+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ], 
    "closed": "2013-10-03 14:38:04.376137+00:00"
}