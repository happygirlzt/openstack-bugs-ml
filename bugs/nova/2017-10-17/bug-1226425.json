{
    "status": "Opinion", 
    "last_updated": "2016-05-17 15:44:36.958420+00:00", 
    "description": "Unable to use an existing network (port group) on an ESX host if the network's name is not a valid Linux bridge identifier. \n\n2013-09-17 06:02:47.365 TRACE nova.openstack.common.rpc.amqp ^[[01;35m^[[00m[u'Traceback (most recent call last):\\n', u'  File \"/opt/stack/nova/nova/openstack/common/rpc/amqp.py\", line 421, in _process_data\\n    **args)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\\n    result = getattr(proxyobj, method)(ctxt, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/floating_ips.py\", line 189, in deallocate_for_instance\\n    super(FloatingIP, self).deallocate_for_instance(context, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 530, in deallocate_for_instance\\n    self.deallocate_fixed_ip(context, fixed_ip[\\'address\\'], host=host)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 237, in deallocate_fixed_ip\\n    address)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 918, in deallocate_fixed_ip\\n    self._teardown_network_on_host(context, network)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 1629, in _teardown_network_on_host\\n    self.driver.update_dhcp(elevated, dev, network)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 981, in update_dhcp\\n    restart_dhcp(context, dev, network_ref)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\\n    return f(*args, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 1098, in restart_dhcp\\n    _add_dnsmasq_accept_rules(dev)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 910, in _add_dnsmasq_accept_rules\\n    iptables_manager.apply()\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 421, in apply\\n    self._apply()\\n', u'  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\\n    return f(*args, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 450, in _apply\\n    attempts=5)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 1189, in _execute\\n    return utils.execute(*cmd, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/utils.py\", line 167, in execute\\n    return processutils.execute(*cmd, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/processutils.py\", line 178, in execute\\n    cmd=\\' \\'.join(cmd))\\n', u'ProcessExecutionError: Unexpected error while running command.\\nCommand: sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c\\nExit code: 2\\nStdout: \\'\\'\\nStderr: \"Bad argument `Network\\'\\\\nError occurred at line: 21\\\\nTry `iptables-restore -h\\' or \\'iptables-restore --help\\' for more information.\\\\n\"\\n']\n\nTriage Info :-\nWith flat networking and VMware driver, the config parameter flat_network_bridge is associated with the port group on the ESX host. This parameter is used to create a port group or to find an existing port group. This is also used as the name of the bridge containing the flat interface.\n\nEg. If there exists a network named 'VM Network' on a vswitch associated with a host in vCenter, you cannot specify the same in flat_network_bridge because a linux bridge cannot take this name.", 
    "tags": [
        "vmware"
    ], 
    "importance": "Wishlist", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1226425", 
    "owner": "None", 
    "id": 1226425, 
    "index": 2686, 
    "openned": "2013-09-17 06:21:27.615671+00:00", 
    "created": "2013-09-17 06:21:27.615671+00:00", 
    "title": "Problem specifying VMware network name in FlatNetworking", 
    "comments": [
        {
            "content": "Unable to use an existing network (port group) on an ESX host if the network's name is not a valid Linux bridge identifier. \n\n2013-09-17 06:02:47.365 TRACE nova.openstack.common.rpc.amqp ^[[01;35m^[[00m[u'Traceback (most recent call last):\\n', u'  File \"/opt/stack/nova/nova/openstack/common/rpc/amqp.py\", line 421, in _process_data\\n    **args)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\\n    result = getattr(proxyobj, method)(ctxt, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/floating_ips.py\", line 189, in deallocate_for_instance\\n    super(FloatingIP, self).deallocate_for_instance(context, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 530, in deallocate_for_instance\\n    self.deallocate_fixed_ip(context, fixed_ip[\\'address\\'], host=host)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 237, in deallocate_fixed_ip\\n    address)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 918, in deallocate_fixed_ip\\n    self._teardown_network_on_host(context, network)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 1629, in _teardown_network_on_host\\n    self.driver.update_dhcp(elevated, dev, network)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 981, in update_dhcp\\n    restart_dhcp(context, dev, network_ref)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\\n    return f(*args, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 1098, in restart_dhcp\\n    _add_dnsmasq_accept_rules(dev)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 910, in _add_dnsmasq_accept_rules\\n    iptables_manager.apply()\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 421, in apply\\n    self._apply()\\n', u'  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\\n    return f(*args, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 450, in _apply\\n    attempts=5)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 1189, in _execute\\n    return utils.execute(*cmd, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/utils.py\", line 167, in execute\\n    return processutils.execute(*cmd, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/processutils.py\", line 178, in execute\\n    cmd=\\' \\'.join(cmd))\\n', u'ProcessExecutionError: Unexpected error while running command.\\nCommand: sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c\\nExit code: 2\\nStdout: \\'\\'\\nStderr: \"Bad argument `Network\\'\\\\nError occurred at line: 21\\\\nTry `iptables-restore -h\\' or \\'iptables-restore --help\\' for more information.\\\\n\"\\n']\n\nTriage Info :-\nWith flat networking and VMware driver, the config parameter flat_network_bridge is associated with the port group on the ESX host. This parameter is used to create a port group or to find an existing port group. This is also used as the name of the bridge containing the flat interface.\n\nEg. If there exists a network named 'VM Network' on a vswitch associated with a host in vCenter, you cannot specify the same in flat_network_bridge because a linux bridge cannot take this name.", 
            "date_created": "2013-09-17 06:21:27.615671+00:00", 
            "author": "https://api.launchpad.net/1.0/~smurugesan"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/46895", 
            "date_created": "2013-09-17 07:49:23.400224+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "not touched in a year - lets let someone else have a go at it", 
            "date_created": "2014-11-07 09:02:56.353822+00:00", 
            "author": "https://api.launchpad.net/1.0/~tjones-i"
        }, 
        {
            "content": "This wishlist bug has been open a year without any activity. I'm going to move it to \"Opinion / Wishlist\", which is an easily-obtainable queue of older requests that have come on. \n\nFeature requests for nova are done with blueprints [1] and with specs [2]. I'll recommend to read [3] if not yet done. The effort to implement the requested feature is then driven only by the blueprint (and spec).\n\nReferences:\n[1] https://blueprints.launchpad.net/nova/\n[2] https://github.com/openstack/nova-specs\n[3] https://wiki.openstack.org/wiki/Blueprints", 
            "date_created": "2016-05-17 14:02:10.529614+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2016-05-17 15:44:35.281336+00:00"
}