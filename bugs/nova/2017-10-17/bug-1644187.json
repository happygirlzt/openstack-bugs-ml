{
    "status": "Invalid", 
    "last_updated": "2016-11-23 11:48:23.457831+00:00", 
    "description": "New bug introduced when upgrading nova-api on Ubuntu 14.04 for cloud archive liberty stable repo.\n(deb http://ubuntu-cloud.archive.canonical.com/ubuntu trusty-updates/liberty main)\n\n\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions [req-e3cb4d1c-a286-4450-aaa2-066072d1f306 3eb3f6111be04a8a957d8a3e8cb2dd86 6470df6b106e47508ebb00db08b557cf - - -] Unexpected exception in API method\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 611, in create\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 149, in inner\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1587, in create\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1203, in _create_instance\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     block_device_mapping, legacy_bdm)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 862, in _check_and_transform_bdm\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     context, block_device_mapping)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/block_device.py\", line 314, in block_device_make_list_from_dicts\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     for bdm in bdm_dicts_list]\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 294, in __init__\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     setattr(self, key, kwargs[key])\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 71, in setter\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     field_value = field.coerce(self, name, value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 189, in coerce\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return self._type.coerce(obj, attr, value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 304, in coerce\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return int(value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions ValueError: invalid literal for int() with base 10: ''\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions \n2016-11-23 11:31:15.361 1600 INFO nova.api.openstack.wsgi [req-e3cb4d1c-a286-4450-aaa2-066072d1f306 3eb3f6111be04a8a957d8a3e8cb2dd86 6470df6b106e47508ebb00db08b557cf - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'>", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1644187", 
    "owner": "None", 
    "id": 1644187, 
    "index": 7819, 
    "openned": "2016-11-23 10:41:06.088627+00:00", 
    "created": "2016-11-23 10:41:06.088627+00:00", 
    "title": "ValueError on creating new nova instance", 
    "comments": [
        {
            "content": "New bug introduced when upgrading nova-api on Ubuntu 14.04 for cloud archive liberty stable repo.\n(deb http://ubuntu-cloud.archive.canonical.com/ubuntu trusty-updates/liberty main)\n\n\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions [req-e3cb4d1c-a286-4450-aaa2-066072d1f306 3eb3f6111be04a8a957d8a3e8cb2dd86 6470df6b106e47508ebb00db08b557cf - - -] Unexpected exception in API method\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 611, in create\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 149, in inner\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1587, in create\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1203, in _create_instance\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     block_device_mapping, legacy_bdm)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 862, in _check_and_transform_bdm\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     context, block_device_mapping)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/block_device.py\", line 314, in block_device_make_list_from_dicts\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     for bdm in bdm_dicts_list]\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 294, in __init__\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     setattr(self, key, kwargs[key])\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 71, in setter\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     field_value = field.coerce(self, name, value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 189, in coerce\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return self._type.coerce(obj, attr, value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 304, in coerce\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions     return int(value)\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions ValueError: invalid literal for int() with base 10: ''\n2016-11-23 11:31:15.341 1600 ERROR nova.api.openstack.extensions \n2016-11-23 11:31:15.361 1600 INFO nova.api.openstack.wsgi [req-e3cb4d1c-a286-4450-aaa2-066072d1f306 3eb3f6111be04a8a957d8a3e8cb2dd86 6470df6b106e47508ebb00db08b557cf - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'>", 
            "date_created": "2016-11-23 10:41:06.088627+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "Booting a nova instance with a block device as root volume.", 
            "date_created": "2016-11-23 10:41:19.760877+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "ii  nova-api                             2:12.0.5-0ubuntu1~cloud0          all          OpenStack Compute - API frontend\nii  nova-common                          2:12.0.5-0ubuntu1~cloud0          all          OpenStack Compute - common files\nii  python-nova                          2:12.0.5-0ubuntu1~cloud0          all          OpenStack Compute Python libraries\nii  python-novaclient                    2:2.30.1-1~cloud0                 all          client library for OpenStack Compute API", 
            "date_created": "2016-11-23 10:42:52.130933+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "No other changes than a package upgrade was made.", 
            "date_created": "2016-11-23 10:45:52.713261+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "Only happens on the compute nodes running the previous version of nova, after upgrade instances could be spawned as usual.\n\nAs suggested by James on IRC:\n11:53 < jamespage> tobasco, I suspect some sort of break on the RPC compat looking at the stacktrace but I might be wrong\n\nUpgrade: nova-compute-libvirt:amd64 (12.0.4-0ubuntu1~cloud1, 12.0.5-0ubuntu1~cloud0)\nUpgrade was done from 12.0.4 to 12.0.5", 
            "date_created": "2016-11-23 11:04:50.924649+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "Not yet confirmed, checking with our product team if this could be our infrastructure sending a faulty API request. All our compute nodes is now updated thought so this issue might not be a bug.\n\nWill update with more information once I have some...", 
            "date_created": "2016-11-23 11:19:23.917781+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }, 
        {
            "content": "Was caused by our internal infrastructure sending an invalid API request. I'm sorry for the hassle, marking as invalid.", 
            "date_created": "2016-11-23 11:48:11.462785+00:00", 
            "author": "https://api.launchpad.net/1.0/~tobias-urdin"
        }
    ], 
    "closed": "2016-11-23 11:48:18.575781+00:00"
}