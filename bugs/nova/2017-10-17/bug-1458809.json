{
    "status": "Invalid", 
    "last_updated": "2015-07-08 07:17:12.231891+00:00", 
    "description": "I am on Kilo.\n\nI was using VxLAN based networks. \nAs the lab requirement changed, I had to move over to \"FLAT\" networking.\nThis involved editing the ml2_conf.ini file and the necessary changes for 'flat' networking to work.\nHowever, I didn't enable VxLAN networking any longer - even though the networks pre-created (using VxLAN) were still lying there. (This wasn't intentional).\n\nAgain without actual intentions, I ended up deploying an instance with the VxLAN based networks.\nThis results into a build failure on the compute node with the following exception:\n\nUnable to clear device ID for port 'None'\n TRACE nova.network.neutronv2.api Traceback (most recent call last):\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 366, in _unbind_ports\n TRACE nova.network.neutronv2.api     port_client.update_port(port_id, port_req_body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 549, in update_port\n TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 302, in put\nTRACE nova.network.neutronv2.api     headers=headers, params=params)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 270, in retry_request\n TRACE nova.network.neutronv2.api     headers=headers, params=params)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 211, in do_request\n TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 185, in _handle_fault_response\n TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 83, in exception_handler_v20\nTRACE nova.network.neutronv2.api     message=message)\n nova.network.neutronv2.api NeutronClientException: 404 Not Found\n\nThe bind failed because of the following error:\nNetwork a813e9e3-4e87-4de6-8f48-84e4a4cb774a is of type vxlan but agent or mechanism driver only support ['local', 'flat', 'vlan']. check_segment_for_agent /usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/mech_agent.py:193\nwhich is clear and expected.\n\nPost this, I wanted to clean up the instances and it just won't get deleted.\nEven though the delete request comes back with \"Request to delete server has been accepted\"\n\nUpon pdbing, I could see that there's an error being thrown at the nova/api/openstack/wsgi.py around line 1061 - \n\n\"'Controller' object has no attribute 'versioned_methods'\"\n\nI think this is a different bug than the ones which have been earlier reported.\n\nBug 1329559 being one for reference.", 
    "tags": [
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1458809", 
    "owner": "None", 
    "id": 1458809, 
    "index": 6828, 
    "openned": "2015-05-26 10:09:13.872138+00:00", 
    "created": "2015-05-26 10:09:13.872138+00:00", 
    "title": "Unable to delete instances created using stale networks", 
    "comments": [
        {
            "content": "I am on Kilo.\n\nI was using VxLAN based networks. \nAs the lab requirement changed, I had to move over to \"FLAT\" networking.\nThis involved editing the ml2_conf.ini file and the necessary changes for 'flat' networking to work.\nHowever, I didn't enable VxLAN networking any longer - even though the networks pre-created (using VxLAN) were still lying there. (This wasn't intentional).\n\nAgain without actual intentions, I ended up deploying an instance with the VxLAN based networks.\nThis results into a build failure on the compute node with the following exception:\n\nUnable to clear device ID for port 'None'\n TRACE nova.network.neutronv2.api Traceback (most recent call last):\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 366, in _unbind_ports\n TRACE nova.network.neutronv2.api     port_client.update_port(port_id, port_req_body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 549, in update_port\n TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 302, in put\nTRACE nova.network.neutronv2.api     headers=headers, params=params)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 270, in retry_request\n TRACE nova.network.neutronv2.api     headers=headers, params=params)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 211, in do_request\n TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 185, in _handle_fault_response\n TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 83, in exception_handler_v20\nTRACE nova.network.neutronv2.api     message=message)\n nova.network.neutronv2.api NeutronClientException: 404 Not Found\n\nThe bind failed because of the following error:\nNetwork a813e9e3-4e87-4de6-8f48-84e4a4cb774a is of type vxlan but agent or mechanism driver only support ['local', 'flat', 'vlan']. check_segment_for_agent /usr/lib/python2.7/site-packages/neutron/plugins/ml2/drivers/mech_agent.py:193\nwhich is clear and expected.\n\nPost this, I wanted to clean up the instances and it just won't get deleted.\nEven though the delete request comes back with \"Request to delete server has been accepted\"\n\nUpon pdbing, I could see that there's an error being thrown at the nova/api/openstack/wsgi.py around line 1061 - \n\n\"'Controller' object has no attribute 'versioned_methods'\"\n\nI think this is a different bug than the ones which have been earlier reported.\n\nBug 1329559 being one for reference.", 
            "date_created": "2015-05-26 10:09:13.872138+00:00", 
            "author": "https://api.launchpad.net/1.0/~sbiswas7"
        }, 
        {
            "content": "@Sudipta Biswas (sbiswas7):\nSince you are set as assignee, I switch the status to \"In Progress\".", 
            "date_created": "2015-06-11 08:21:13.716191+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2015-07-08 07:17:06.096924+00:00"
}