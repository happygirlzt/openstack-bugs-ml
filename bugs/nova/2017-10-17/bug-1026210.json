{
    "status": "Fix Released", 
    "last_updated": "2013-05-16 17:39:38.857370+00:00", 
    "description": "I installed a devstack instance yesterday (nova git version acb158714c562d3142bf2f3f560dc374daa2df7d).\n\nIf you create a flavor, then delete it, and create a new one with the same ID, the ephemeral space is wrong:\n\nstack@dave-os-devstack:~$ nova flavor-create --ephemeral 1000 flavor1 10 1000 1000 1000\nPlease input your password for the keyring\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| ID | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| 10 | flavor1 | 1000      | 1000 | 1000      |      | 1000  | 1           |\n+----+---------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n| 10 | flavor1   | 1000      | 1000 | 1000      |      | 1000  | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-delete 10\nPlease input your password for the keyring\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-create --ephemeral 2000 flavor2 10 1000 1000 1000\nPlease input your password for the keyring\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| ID | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| 10 | flavor2 | 1000      | 1000 | 1000      |      | 1000  | 1           |\n+----+---------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n| 10 | flavor2   | 1000      | 1000 | 1000      |      | 1000  | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n\nNote the ephemeral number in the last list is 1000.  It should be 2000, the number used to create the flavor.\n\nThis only seems to happen with the ephemeral number.  The other numbers are fine.", 
    "tags": [
        "essex-backport", 
        "in-stable-essex", 
        "verification-done"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1026210", 
    "owner": "https://api.launchpad.net/1.0/~david-besen", 
    "id": 1026210, 
    "index": 4219, 
    "openned": "2012-07-18 16:04:01.086587+00:00", 
    "created": "2012-07-18 16:04:01.086587+00:00", 
    "title": "Nova flavor ephemeral space size reported incorrectly", 
    "comments": [
        {
            "content": "I installed a devstack instance yesterday (nova git version acb158714c562d3142bf2f3f560dc374daa2df7d).\n\nIf you create a flavor, then delete it, and create a new one with the same ID, the ephemeral space is wrong:\n\nstack@dave-os-devstack:~$ nova flavor-create --ephemeral 1000 flavor1 10 1000 1000 1000\nPlease input your password for the keyring\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| ID | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| 10 | flavor1 | 1000      | 1000 | 1000      |      | 1000  | 1           |\n+----+---------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n| 10 | flavor1   | 1000      | 1000 | 1000      |      | 1000  | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-delete 10\nPlease input your password for the keyring\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-create --ephemeral 2000 flavor2 10 1000 1000 1000\nPlease input your password for the keyring\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| ID | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+---------+-----------+------+-----------+------+-------+-------------+\n| 10 | flavor2 | 1000      | 1000 | 1000      |      | 1000  | 1           |\n+----+---------+-----------+------+-----------+------+-------+-------------+\nstack@dave-os-devstack:~$ nova flavor-list\nPlease input your password for the keyring\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         |\n| 10 | flavor2   | 1000      | 1000 | 1000      |      | 1000  | 1.0         |\n+----+-----------+-----------+------+-----------+------+-------+-------------+\n\nNote the ephemeral number in the last list is 1000.  It should be 2000, the number used to create the flavor.\n\nThis only seems to happen with the ephemeral number.  The other numbers are fine.", 
            "date_created": "2012-07-18 16:04:01.086587+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-besen"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/9995", 
            "date_created": "2012-07-18 22:29:28.026685+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/9995\nCommitted: http://github.com/openstack/nova/commit/153c40ea1a026de17872c907ea543ea80bf5a074\nSubmitter: Jenkins\nBranch:    master\n\ncommit 153c40ea1a026de17872c907ea543ea80bf5a074\nAuthor: David Besen <email address hidden>\nDate:   Wed Jul 18 16:27:27 2012 -0600\n\n    Make flavorextradata ignore deleted flavors.\n    \n    In _get_flavor_refs, don't retrieve inactive flavors.  Fixes bug 1026210.\n    \n    Change-Id: I7c5d7848d2d1326d01770195e1c8a754bb673a7a\n", 
            "date_created": "2012-07-20 22:34:05.689750+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/essex\nReview: https://review.openstack.org/11034", 
            "date_created": "2012-08-08 16:36:13.790924+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/11034\nCommitted: http://github.com/openstack/nova/commit/2f35f8ec54d303dc48040c46cb950c7fbff9731e\nSubmitter: Jenkins\nBranch:    stable/essex\n\ncommit 2f35f8ec54d303dc48040c46cb950c7fbff9731e\nAuthor: David Besen <email address hidden>\nDate:   Wed Aug 8 10:35:32 2012 -0600\n\n    Make flavorextradata ignore deleted flavors.\n    \n    In _get_flavor_refs, don't retrieve inactive flavors. Fixes bug 1026210.\n    \n    This change was made on trunk in https://review.openstack.org/#/c/9995/\n    \n    Change-Id: I967faa661cd4177a54079a966ca8912923c5f61b\n", 
            "date_created": "2012-08-30 00:07:23.630808+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Hello David, or anyone else affected,\n\nAccepted nova into precise-proposed. The package will build now and be available at http://launchpad.net/ubuntu/+source/nova/2012.1.3+stable-20130423-e52e6912-0ubuntu1 in a few hours, and then in the -proposed repository.\n\nPlease help us by testing this new package.  See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed.  Your feedback will aid us getting this update out to other Ubuntu users.\n\nIf this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-needed to verification-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed.  In either case, details of your testing will help us make a better decision.\n\nFurther information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification .  Thank you in advance!", 
            "date_created": "2013-05-09 23:12:26.728492+00:00", 
            "author": "https://api.launchpad.net/1.0/~brian-murray"
        }, 
        {
            "content": "Please find the attached test log from the Ubuntu Server Team's CI infrastructure.  As part of the verification process for this bug, Nova has been deployed and configured across multiple nodes using precise-proposed as an installation source.  After successful bring-up and configuration of the cluster, a number of exercises and smoke tests have be invoked to ensure the updated package did not introduce any regressions. A number of test iterations were carried out to catch any possible transient errors.\n\nPlease Note the list of installed packages at the top and bottom of the report.\n\nFor records of upstream test coverage of this update, please see the Jenkins links in the comments of the relevant  upstream code-review(s):\n\nTrunk review: https://review.openstack.org/9995\nStable review: https://review.openstack.org/11034\n\nAs per the provisional Micro Release Exception granted to this package by the Technical Board, we hope this contributes toward verification of this update.", 
            "date_created": "2013-05-16 07:31:52.735948+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Test coverage log.", 
            "date_created": "2013-05-16 07:31:56.508434+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Please find the attached test log from the Ubuntu Server Team's CI infrastructure.  As part of the verification process for this bug, Nova has been deployed and configured across multiple nodes using precise-proposed as an installation source.  After successful bring-up and configuration of the cluster, a number of exercises and smoke tests have be invoked to ensure the updated package did not introduce any regressions. A number of test iterations were carried out to catch any possible transient errors.\n\nPlease Note the list of installed packages at the top and bottom of the report.\n\nFor records of upstream test coverage of this update, please see the Jenkins links in the comments of the relevant  upstream code-review(s):\n\nTrunk review: https://review.openstack.org/9995\nStable review: https://review.openstack.org/11034\n\nAs per the provisional Micro Release Exception granted to this package by the Technical Board, we hope this contributes toward verification of this update.", 
            "date_created": "2013-05-16 07:34:07.506605+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Test coverage log.", 
            "date_created": "2013-05-16 07:34:10.791237+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "This bug was fixed in the package nova - 2012.1.3+stable-20130423-e52e6912-0ubuntu1\n\n---------------\nnova (2012.1.3+stable-20130423-e52e6912-0ubuntu1) precise-proposed; urgency=low\n\n  * Resynchronize with stable/essex (e52e6912) (LP: #1089488):\n    - [48e81f1] VNC proxy can be made to connect to wrong VM LP: 1125378\n    - [3bf5a58] snat rule too broad for some network configurations LP: 1048765\n    - [efaacda] DOS by allocating all fixed ips LP: 1125468\n    - [b683ced] Add nosehtmloutput as a test dependency.\n    - [45274c8] Nova unit tests not running, but still passing for stable/essex\n      LP: 1132835\n    - [e02b459] vnc unit-test fixes\n    - [87361d3] Jenkins jobs fail because of incompatibility between sqlalchemy-\n      migrate and the newest sqlalchemy-0.8.0b1 (LP: #1073569)\n    - [e98928c] VNC proxy can be made to connect to wrong VM LP: 1125378\n    - [c0a10db] DoS through XML entity expansion (CVE-2013-1664) LP: 1100282\n    - [243d516] No authentication on block device used for os-volume_boot\n      LP: 1069904\n    - [80fefe5] use_single_default_gateway does not function correctly\n      (LP: #1075859)\n    - [bd10241] Essex 2012.1.3 : Error deleting instance with 2 Nova Volumes\n      attached (LP: #1079745)\n    - [86a5937] do_refresh_security_group_rules in nova.virt.firewall is very\n      slow (LP: #1062314)\n    - [ae9c5f4] deallocate_fixed_ip attempts to update an already deleted\n      fixed_ip (LP: #1017633)\n    - [20f98c5] failed to allocate fixed ip because old deleted one exists\n      (LP: #996482)\n    - [75f6922] snapshot stays in saving state if the vm base image is deleted\n      (LP: #921774)\n    - [1076699] lock files may be removed in error dues to permissions issues\n      (LP: #1051924)\n    - [40c5e94] ensure_default_security_group() does not call sgh (LP: #1050982)\n    - [4eebe76] At termination, LXC rootfs is not always unmounted before\n      rmtree() is called (LP: #1046313)\n    - [47dabb3] Heavily loaded nova-compute instances don't sent reports\n      frequently enough (LP: #1045152)\n    - [b375b4f] When attach volume lost attach when node restart (LP: #1004791)\n    - [4ac2dcc] nova usage-list returns  wrong usage (LP: #1043999)\n    - [014fcbc] Bridge port's hairpin mode not set after resuming a machine\n      (LP: #1040537)\n    - [2f35f8e] Nova flavor ephemeral space size reported incorrectly\n      (LP: #1026210)\n  * Dropped, superseeded by new snapshot:\n    - debian/patches/CVE-2013-0335.patch: [48e81f1]\n    - debian/patches/CVE-2013-1838.patch: [efaacda]\n    - debian/patches/CVE-2013-1664.patch: [c0a10db]\n    - debian/patches/CVE-2013-0208.patch: [243d516]\n -- Yolanda <email address hidden>   Mon, 22 Apr 2013 12:37:08 +0200", 
            "date_created": "2013-05-16 17:27:32.658916+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }, 
        {
            "content": "The verification of this Stable Release Update has completed successfully and the package has now been released to -updates.  Subsequently, the Ubuntu Stable Release Updates Team is being unsubscribed and will not receive messages about this bug report.  In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regresssions.", 
            "date_created": "2013-05-16 17:29:00.311174+00:00", 
            "author": "https://api.launchpad.net/1.0/~kitterman"
        }
    ], 
    "closed": "2012-08-16 07:43:58.882855+00:00"
}