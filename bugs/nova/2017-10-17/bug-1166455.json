{
    "status": "Invalid", 
    "last_updated": "2013-08-06 14:50:04.990853+00:00", 
    "description": "After I created a thousand new flavors (to enable some automation), with IDs 1000-1999, nova flavor-list now displays flavor 1, followed by 1000-1998, and then stops.\n\nFlavors 1999 and 2-6 are still valid and usable, just absent from the output of flavor-list (flavor-show is happy to provide details).\n\n(Also, performance seems to have been hurt by the number of flavors.  Does it read all the data over the network before printing any of it??)\n\nThe nova version in question is folsom.\n\nlamont", 
    "tags": [
        "prodstack"
    ], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1166455", 
    "owner": "None", 
    "id": 1166455, 
    "index": 4846, 
    "openned": "2013-04-08 21:11:16.606778+00:00", 
    "created": "2013-04-08 21:11:16.606778+00:00", 
    "title": "nova flavor-list only shows 1000 flavors", 
    "comments": [
        {
            "content": "After I created a thousand new flavors (to enable some automation), with IDs 1000-1999, nova flavor-list now displays flavor 1, followed by 1000-1998, and then stops.\n\nFlavors 1999 and 2-6 are still valid and usable, just absent from the output of flavor-list (flavor-show is happy to provide details).\n\n(Also, performance seems to have been hurt by the number of flavors.  Does it read all the data over the network before printing any of it??)\n\nThe nova version in question is folsom.\n\nlamont", 
            "date_created": "2013-04-08 21:11:16.606778+00:00", 
            "author": "https://api.launchpad.net/1.0/~lamont"
        }, 
        {
            "content": "I reproduct the bug.\nfirstly, close api_rate_limit.\n\nuse the command below to create 2000 flavor.\n$ for i in {1..2000}; do nova flavor-create f-$i $i 1024 20 1 ;done;\n\nthen I use novaclient to list all flavor\n$ time nova flavor-list\n\n+------+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID   | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+------+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 1    | m1.tiny | 512       | 0    | 0         |      | 1     | 1.0         | True      | {}          |\n| 10   | f-10    | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 100  | f-100   | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1000 | f-1000  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1001 | f-1001  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1002 | f-1002  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1003 | f-1003  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1004 | f-1004  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1005 | f-1005  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1006 | f-1006  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1007 | f-1007  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1008 | f-1008  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1009 | f-1009  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 101  | f-101   | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1010 | f-1010  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1011 | f-1011  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1012 | f-1012  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1013 | f-1013  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1014 | f-1014  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n......\n| 1886 | f-1886  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1887 | f-1887  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1888 | f-1888  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1889 | f-1889  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 189  | f-189   | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1890 | f-1890  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1891 | f-1891  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1892 | f-1892  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1893 | f-1893  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1894 | f-1894  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1895 | f-1895  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1896 | f-1896  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1897 | f-1897  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1898 | f-1898  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 1899 | f-1899  | 1024      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n+------+---------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n\nreal    2m11.275s\nuser    0m3.280s\nsys     0m0.456s\n\nBecause novaclient need to get each flavor's extra_specs detail, in fact it make thousands of request to nova-api. which make the command very slow.\n\nIf I just hit the REST API by\n$ time http get localhost:8774/v2/33027e9bc0914bc88414bae31c6ecc9f/flavors \n....\n        {\n            \"id\": \"1899\", \n            \"links\": [\n                {\n                    \"href\": \"http://localhost:8774/v2/33027e9bc0914bc88414bae31c6ecc9f/flavors/1899\", \n                    \"rel\": \"self\"\n                }, \n                {\n                    \"href\": \"http://localhost:8774/33027e9bc0914bc88414bae31c6ecc9f/flavors/1899\", \n                    \"rel\": \"bookmark\"\n                }\n            ], \n            \"name\": \"f-1899\"\n        }\n    ]\n}\n\nreal    0m2.777s\nuser    0m1.608s\nsys     0m0.192s\n\nThe response time is fine, but the response flavors is not complete( just to f-1899) neither.\n", 
            "date_created": "2013-04-12 06:03:54.878988+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "I found there is a configuration item named 'osapi_max_limit=1000', which set the default maximum number of items to return to 1000. So the number of flavor only up to 1000.\n\nWe can hit the REST API like this to get more items.\n/flavors?limit=2000\n\nBut novaclient default get each flavor's  extra_spec is annoying me.", 
            "date_created": "2013-04-17 12:24:48.160727+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/27060", 
            "date_created": "2013-04-17 13:19:30.606318+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/27060\nCommitted: http://github.com/openstack/python-novaclient/commit/339689483da3c1591211762ef631d432844ff9ef\nSubmitter: Jenkins\nBranch:    master\n\ncommit 339689483da3c1591211762ef631d432844ff9ef\nAuthor: Ubuntu <ubuntu@dev-stack-alone.(none)>\nDate:   Wed Apr 17 13:12:36 2013 +0000\n\n    Make list flavor show extra specs optional.\n    \n    Flavor list will get each flavors extra_specs by making fresh requests to nova.\n    When there are lots of flavors, the flavor list will take a while to run. So\n    let us make show extra-specs optional.\n    \n    Fix bug: #1166455\n    \n    Change-Id: I86aef1035be6a88b8d9fb49a89f5a608a72589dd\n", 
            "date_created": "2013-04-22 19:19:34.443832+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-04-17 12:28:29.804216+00:00"
}