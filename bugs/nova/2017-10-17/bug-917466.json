{
    "status": "Invalid", 
    "last_updated": "2012-06-07 12:18:43.356497+00:00", 
    "description": "Quantum is broken with current Nova. I believe the recent changes to introduce floating IPs are the cause. This is caused by the following request:\n\ncurl -i http://192.168.1.105:8774/v1.1/1/os-floating-ips -X GET -H \"X-Auth-Project-Id: 1\" -H \"User-Agent: python-novaclient\" -H \"X-Auth-Token: openstack\"\n\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 842, in __call__\n(nova.api.openstack.v2): TRACE:     action_result = self.dispatch(meth, request, action_args)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 903, in dispatch\n(nova.api.openstack.v2): TRACE:     return method(req=request, **action_args)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/v2/contrib/floating_ips.py\", line 106, in index\n(nova.api.openstack.v2): TRACE:     floating_ips = self.network_api.get_floating_ips_by_project(context)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/network/api.py\", line 79, in get_floating_ips_by_project\n(nova.api.openstack.v2): TRACE:     {'method': 'get_floating_ips_by_project'})\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/__init__.py\", line 61, in call\n(nova.api.openstack.v2): TRACE:     return _get_impl().call(context, topic, msg)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 845, in call\n(nova.api.openstack.v2): TRACE:     rv = list(rv)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 813, in __iter__\n(nova.api.openstack.v2): TRACE:     raise result\n(nova.api.openstack.v2): TRACE: RemoteError: Remote error: AttributeError 'QuantumManager' object has no attribute 'get_floating_ips_by_project'\n(nova.api.openstack.v2): TRACE: [u'Traceback (most recent call last):\\n', u'  File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 715, in _process_data\\n    node_func = getattr(self.proxy, str(method))\\n', u'  File \"/opt/stack/nova/nova/service.py\", line 194, in __getattr__\\n    return getattr(manager, key)\\n', u\"AttributeError: 'QuantumManager' object has no attribute 'get_floating_ips_by_project'\\n\"].", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/917466", 
    "owner": "None", 
    "id": 917466, 
    "index": 3755, 
    "openned": "2012-01-17 03:20:05.475388+00:00", 
    "created": "2012-01-17 03:16:38.795477+00:00", 
    "title": "Quantum broken with floating IPs", 
    "comments": [
        {
            "content": "Quantum is broken with current Nova. I believe the recent changes to introduce floating IPs are the cause. This is caused by the following request:\n\ncurl -i http://192.168.1.105:8774/v1.1/1/os-floating-ips -X GET -H \"X-Auth-Project-Id: 1\" -H \"User-Agent: python-novaclient\" -H \"X-Auth-Token: openstack\"\n\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 842, in __call__\n(nova.api.openstack.v2): TRACE:     action_result = self.dispatch(meth, request, action_args)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 903, in dispatch\n(nova.api.openstack.v2): TRACE:     return method(req=request, **action_args)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/api/openstack/v2/contrib/floating_ips.py\", line 106, in index\n(nova.api.openstack.v2): TRACE:     floating_ips = self.network_api.get_floating_ips_by_project(context)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/network/api.py\", line 79, in get_floating_ips_by_project\n(nova.api.openstack.v2): TRACE:     {'method': 'get_floating_ips_by_project'})\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/__init__.py\", line 61, in call\n(nova.api.openstack.v2): TRACE:     return _get_impl().call(context, topic, msg)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 845, in call\n(nova.api.openstack.v2): TRACE:     rv = list(rv)\n(nova.api.openstack.v2): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 813, in __iter__\n(nova.api.openstack.v2): TRACE:     raise result\n(nova.api.openstack.v2): TRACE: RemoteError: Remote error: AttributeError 'QuantumManager' object has no attribute 'get_floating_ips_by_project'\n(nova.api.openstack.v2): TRACE: [u'Traceback (most recent call last):\\n', u'  File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 715, in _process_data\\n    node_func = getattr(self.proxy, str(method))\\n', u'  File \"/opt/stack/nova/nova/service.py\", line 194, in __getattr__\\n    return getattr(manager, key)\\n', u\"AttributeError: 'QuantumManager' object has no attribute 'get_floating_ips_by_project'\\n\"].", 
            "date_created": "2012-01-17 03:16:38.795477+00:00", 
            "author": "https://api.launchpad.net/1.0/~paul-mcmillan"
        }, 
        {
            "content": "I don't think this ever worked, as Quantum does not yet support floating IPs, see: http://docs.openstack.org/incubation/openstack-network/admin/content/Limits-dle455.html\n\nThis capability should be added as part of Essex-3: https://blueprints.launchpad.net/nova/+spec/nova-parity-floating\n\n", 
            "date_created": "2012-01-17 06:51:04.263882+00:00", 
            "author": "https://api.launchpad.net/1.0/~danwent"
        }, 
        {
            "content": "Quantum may not support them, but it shouldn't be completely broken by their introduction. As-is, it's currently impossible to use Quantum because the API is borked.", 
            "date_created": "2012-01-17 13:53:22.473023+00:00", 
            "author": "https://api.launchpad.net/1.0/~paul-mcmillan"
        }, 
        {
            "content": "You could also not enable the floating ips extension if you are using the quantum manager until it does.", 
            "date_created": "2012-01-17 15:34:24.176081+00:00", 
            "author": "https://api.launchpad.net/1.0/~jason-koelker"
        }, 
        {
            "content": "I think the exception is cauesed by The change set of f2eb16564e12e40b8c3622bbe6fa0d26825482f0,\nor Change-Id: Ic27c45f209610a5d369cfb9f09bcabd4264cd2b9\nI attached the patch.  I'd like Trey Morris to review it.\n", 
            "date_created": "2012-01-17 15:52:04.054973+00:00", 
            "author": "https://api.launchpad.net/1.0/~yamahata"
        }, 
        {
            "content": "Hi  Isaku, I believe the patch you posted is for a separate bug:\nhttps://bugs.launchpad.net/nova/+bug/914962 .  Trey said he already had a\nfix for this issue as part of a bigger patch set, but I haven't seen it\nproposed yet.\n\nThe believe the issue Paul brought up is that he is using the nova floating\nIP API extensions when Quantum Manager does not support floating IPs.\n Normally I would suggest Jason's approach of making sure the extension is\nnot enabled if Quantum Manager is in use, but since Brad is supposed to be\nadding floating IP support to Quantum Manager this week, I don't think\ndoing so would be time well spent.\n\nPaul, I'm not sure what you mean by \"completely impossible to use Quantum\",\nbut unless I am missing something I do not expect the above issue to affect\nQuantum Manager use cases that do not require floating IPs.\n\nDan\n\n\nOn Tue, Jan 17, 2012 at 7:52 AM, Isaku Yamahata\n<email address hidden>wrote:\n\n> I think the exception is cauesed by The change set of\n> f2eb16564e12e40b8c3622bbe6fa0d26825482f0,\n> or Change-Id: Ic27c45f209610a5d369cfb9f09bcabd4264cd2b9\n> I attached the patch.  I'd like Trey Morris to review it.\n>\n>\n> ** Patch added: \"unbreak f2eb16564e12e40b8c3622bbe6fa0d26825482f0,\"\n>\n> https://bugs.launchpad.net/quantum/+bug/917466/+attachment/2679038/+files/0007-quantum-manager-unbreak-f2eb16564e12e40b8c3622bbe6fa.patch\n>\n> --\n> You received this bug notification because you are a member of Netstack\n> Core Developers, which is subscribed to quantum.\n> https://bugs.launchpad.net/bugs/917466\n>\n> Title:\n>  Quantum broken with floating IPs\n>\n> Status in OpenStack Compute (Nova):\n>  New\n> Status in OpenStack Quantum (virtual network service):\n>  New\n>\n> Bug description:\n>  Quantum is broken with current Nova. I believe the recent changes to\n>  introduce floating IPs are the cause. This is caused by the following\n>  request:\n>\n>  curl -i http://192.168.1.105:8774/v1.1/1/os-floating-ips -X GET -H \"X\n>  -Auth-Project-Id: 1\" -H \"User-Agent: python-novaclient\" -H \"X-Auth-\n>  Token: openstack\"\n>\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 842, in __call__\n>  (nova.api.openstack.v2): TRACE:     action_result = self.dispatch(meth,\n> request, action_args)\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 903, in dispatch\n>  (nova.api.openstack.v2): TRACE:     return method(req=request,\n> **action_args)\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/api/openstack/v2/contrib/floating_ips.py\", line 106,\n> in index\n>  (nova.api.openstack.v2): TRACE:     floating_ips =\n> self.network_api.get_floating_ips_by_project(context)\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/network/api.py\", line 79, in\n> get_floating_ips_by_project\n>  (nova.api.openstack.v2): TRACE:     {'method':\n> 'get_floating_ips_by_project'})\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/rpc/__init__.py\", line 61, in call\n>  (nova.api.openstack.v2): TRACE:     return _get_impl().call(context,\n> topic, msg)\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 845, in call\n>  (nova.api.openstack.v2): TRACE:     rv = list(rv)\n>  (nova.api.openstack.v2): TRACE:   File\n> \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 813, in __iter__\n>  (nova.api.openstack.v2): TRACE:     raise result\n>  (nova.api.openstack.v2): TRACE: RemoteError: Remote error: AttributeError\n> 'QuantumManager' object has no attribute 'get_floating_ips_by_project'\n>  (nova.api.openstack.v2): TRACE: [u'Traceback (most recent call last):\\n',\n> u'  File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 715, in\n> _process_data\\n    node_func = getattr(self.proxy, str(method))\\n', u'\n>  File \"/opt/stack/nova/nova/service.py\", line 194, in __getattr__\\n\n>  return getattr(manager, key)\\n', u\"AttributeError: 'QuantumManager' object\n> has no attribute 'get_floating_ips_by_project'\\n\"].\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/917466/+subscriptions\n>\n\n\n\n-- \n~~~~~~~~~~~~~~~~~~~~~~~~~~~\nDan Wendlandt\nNicira Networks: www.nicira.com\ntwitter: danwendlandt\n~~~~~~~~~~~~~~~~~~~~~~~~~~~\n", 
            "date_created": "2012-01-17 16:16:51+00:00", 
            "author": "https://api.launchpad.net/1.0/~danwent"
        }, 
        {
            "content": "Don't think anything needs to be done on Nova side... please reopen (set back to New) if you disagree.", 
            "date_created": "2012-06-07 12:18:39.131386+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2012-06-07 12:18:41.390242+00:00"
}