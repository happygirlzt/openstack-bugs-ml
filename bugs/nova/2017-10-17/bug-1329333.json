{
    "status": "Invalid", 
    "last_updated": "2016-09-24 22:45:44.772951+00:00", 
    "description": "traceback from:\nhttp://logs.openstack.org/40/99540/2/check/check-grenade-dsvm/85c496c/console.html\n\n\n2014-06-12 13:28:15.833 | tearDownClass (tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern)\n2014-06-12 13:28:15.833 | -------------------------------------------------------------------------------\n2014-06-12 13:28:15.833 | \n2014-06-12 13:28:15.833 | Captured traceback:\n2014-06-12 13:28:15.833 | ~~~~~~~~~~~~~~~~~~~\n2014-06-12 13:28:15.833 |     Traceback (most recent call last):\n2014-06-12 13:28:15.833 |       File \"tempest/scenario/manager.py\", line 157, in tearDownClass\n2014-06-12 13:28:15.833 |         cls.cleanup_resource(thing, cls.__name__)\n2014-06-12 13:28:15.834 |       File \"tempest/scenario/manager.py\", line 119, in cleanup_resource\n2014-06-12 13:28:15.834 |         resource.delete()\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/v1/volumes.py\", line 35, in delete\n2014-06-12 13:28:15.834 |         self.manager.delete(self)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/v1/volumes.py\", line 228, in delete\n2014-06-12 13:28:15.834 |         self._delete(\"/volumes/%s\" % base.getid(volume))\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/base.py\", line 162, in _delete\n2014-06-12 13:28:15.834 |         resp, body = self.api.client.delete(url)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 229, in delete\n2014-06-12 13:28:15.834 |         return self._cs_request(url, 'DELETE', **kwargs)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 187, in _cs_request\n2014-06-12 13:28:15.835 |         **kwargs)\n2014-06-12 13:28:15.835 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 170, in request\n2014-06-12 13:28:15.835 |         raise exceptions.from_response(resp, body)\n2014-06-12 13:28:15.835 |     BadRequest: Invalid volume: Volume status must be available or error, but current status is: in-use (HTTP 400) (Request-ID: req-9337623a-e2b7-48a3-97ab-f7a4845f2cd8)", 
    "tags": [
        "gate", 
        "testing"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1329333", 
    "owner": "None", 
    "id": 1329333, 
    "index": 1512, 
    "openned": "2014-10-07 11:26:20.157821+00:00", 
    "created": "2014-06-12 14:04:36.909256+00:00", 
    "title": "BadRequest: Invalid volume: Volume status must be available or error", 
    "comments": [
        {
            "content": "traceback from:\nhttp://logs.openstack.org/40/99540/2/check/check-grenade-dsvm/85c496c/console.html\n\n\n2014-06-12 13:28:15.833 | tearDownClass (tempest.scenario.test_volume_boot_pattern.TestVolumeBootPattern)\n2014-06-12 13:28:15.833 | -------------------------------------------------------------------------------\n2014-06-12 13:28:15.833 | \n2014-06-12 13:28:15.833 | Captured traceback:\n2014-06-12 13:28:15.833 | ~~~~~~~~~~~~~~~~~~~\n2014-06-12 13:28:15.833 |     Traceback (most recent call last):\n2014-06-12 13:28:15.833 |       File \"tempest/scenario/manager.py\", line 157, in tearDownClass\n2014-06-12 13:28:15.833 |         cls.cleanup_resource(thing, cls.__name__)\n2014-06-12 13:28:15.834 |       File \"tempest/scenario/manager.py\", line 119, in cleanup_resource\n2014-06-12 13:28:15.834 |         resource.delete()\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/v1/volumes.py\", line 35, in delete\n2014-06-12 13:28:15.834 |         self.manager.delete(self)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/v1/volumes.py\", line 228, in delete\n2014-06-12 13:28:15.834 |         self._delete(\"/volumes/%s\" % base.getid(volume))\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/base.py\", line 162, in _delete\n2014-06-12 13:28:15.834 |         resp, body = self.api.client.delete(url)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 229, in delete\n2014-06-12 13:28:15.834 |         return self._cs_request(url, 'DELETE', **kwargs)\n2014-06-12 13:28:15.834 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 187, in _cs_request\n2014-06-12 13:28:15.835 |         **kwargs)\n2014-06-12 13:28:15.835 |       File \"/opt/stack/new/python-cinderclient/cinderclient/client.py\", line 170, in request\n2014-06-12 13:28:15.835 |         raise exceptions.from_response(resp, body)\n2014-06-12 13:28:15.835 |     BadRequest: Invalid volume: Volume status must be available or error, but current status is: in-use (HTTP 400) (Request-ID: req-9337623a-e2b7-48a3-97ab-f7a4845f2cd8)", 
            "date_created": "2014-06-12 14:04:36.909256+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Scenario tests code has been changed to use tempest client. Irrespective of that this is happening recently too.\n\nhttp://logs.openstack.org/72/120172/2/gate/gate-tempest-dsvm-full/fb68131/console.html\n\n", 
            "date_created": "2014-10-07 11:22:06.352898+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghanshyammann"
        }, 
        {
            "content": "249 hits in last 7 days \n\nhttp://logstash.openstack.org/index.html#eyJzZWFyY2giOiJtZXNzYWdlOiBcIlZvbHVtZSBzdGF0dXMgbXVzdCBiZSBhdmFpbGFibGUgb3IgZXJyb3IsIGJ1dCBjdXJyZW50IHN0YXR1cyBpczogaW4tdXNlXCIiLCJmaWVsZHMiOlsiYnVpbGRfY2hhbmdlIiwibWVzc2FnZSJdLCJvZmZzZXQiOjAsInRpbWVmcmFtZSI6IjYwNDgwMCIsImdyYXBobW9kZSI6ImNvdW50IiwidGltZSI6eyJ1c2VyX2ludGVydmFsIjowfSwic3RhbXAiOjE0MTI2NzIxNDMzODF9", 
            "date_created": "2014-10-07 11:22:35.654789+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghanshyammann"
        }, 
        {
            "content": "Nova libvirt driver failing  to detach volume.\n\nn-api logs- \n\n2014-10-06 21:13:37.560 AUDIT nova.api.openstack.compute.contrib.volumes [req-f87a213f-6677-4288-b91e-25769f55a2f3 TestEncryptedCinderVolumes-1235148374 TestEncryptedCinderVolumes-731143481] Detach volume ec116004-afd7-4131-9ee8-02ab666ec7bd\n\n-----------------------------------------------------------------------------------------------------------------------\nc-api logs-\n\nBegin detaching - \n\n2014-10-06 21:13:37.864 18627 INFO cinder.api.openstack.wsgi [req-57cf26e1-8cdd-4e20-943c-393aba8286fd 980965010fee4b7f800ef366726b5927 ba5e42d2f06340058633ad1a5a84b1b1 - - -] POST http://127.0.0.1:8776/v1/ba5e42d2f06340058633ad1a5a84b1b1/volumes/ec116004-afd7-4131-9ee8-02ab666ec7bd/action\n2014-10-06 21:13:37.865 18627 DEBUG cinder.api.openstack.wsgi [req-57cf26e1-8cdd-4e20-943c-393aba8286fd 980965010fee4b7f800ef366726b5927 ba5e42d2f06340058633ad1a5a84b1b1 - - -] Action body: {\"os-begin_detaching\": null} get_method /opt/stack/new/cinder/cinder/api/openstack/wsgi.py:1008\n-----------------------------------------------------------------------------------------------------------------\nStatus changed to  Detaching - \n\n2014-10-06 21:13:38.078 18627 AUDIT cinder.api.v1.volumes [req-9b3ab70e-897b-4d27-80d1-89d5678a481f 980965010fee4b7f800ef366726b5927 ba5e42d2f06340058633ad1a5a84b1b1 - - -] vol={'migration_status': None, 'availability_zone': u'nova', 'terminated_at': None, 'updated_at': datetime.datetime(2014, 10, 6, 21, 13, 37), 'provider_geometry': None, 'snapshot_id': None, 'ec2_id': None, 'mountpoint': u'/dev/vdb', 'deleted_at': None, 'id': u'ec116004-afd7-4131-9ee8-02ab666ec7bd', 'size': 1L, 'user_id': u'980965010fee4b7f800ef366726b5927', 'attach_time': u'2014-10-06T21:13:35.855790', 'attached_host': None, 'display_description': None, 'volume_admin_metadata': [<cinder.db.sqlalchemy.models.VolumeAdminMetadata object at 0x4e80e90>, <cinder.db.sqlalchemy.models.VolumeAdminMetadata object at 0x5c1b250>], 'encryption_key_id': u'00000000-0000-0000-0000-000000000000', 'project_id': u'ba5e42d2f06340058633ad1a5a84b1b1', 'launched_at': datetime.datetime(2014, 10, 6, 21, 13, 29), 'scheduled_at': datetime.datetime(2014, 10, 6, 21, 13, 29), 'status': u'detaching', 'volume_type_id': u'03ce3467-70d3-442f-a93b-4bcba3ac662a', 'deleted': False, 'provider_location': \n----------------------------------------------------------------------------------------------------------------------\nn-cpu log-  error from driver while detaching volume\n\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/exception.py\", line 88, in wrapped\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/exception.py\", line 71, in wrapped\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 274, in decorated_function\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 260, in decorated_function\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 303, in decorated_function\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     e, sys.exc_info())\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 290, in decorated_function\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 4259, in detach_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     self._detach_volume(context, instance, bdm)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 4229, in _detach_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     self.volume_api.roll_detaching(context, volume_id)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 4222, in _detach_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     encryption=encryption)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 1392, in detach_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     encryptor.detach_volume(**encryption)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/volume/encryptors/cryptsetup.py\", line 101, in detach_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     self._close_volume(**kwargs)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/volume/encryptors/cryptsetup.py\", line 97, in _close_volume\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     run_as_root=True, check_exit_code=True)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/utils.py\", line 165, in execute\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     return processutils.execute(*cmd, **kwargs)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/processutils.py\", line 195, in execute\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher     cmd=sanitized_cmd)\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher ProcessExecutionError: Unexpected error while running command.\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher Command: sudo nova-rootwrap /etc/nova/rootwrap.conf cryptsetup remove ip-127.0.0.1:3260-iscsi-iqn.2010-10.org.openstack:volume-ec116004-afd7-4131-9ee8-02ab666ec7bd-lun-1\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher Exit code: 5\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher Stdout: u''\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher Stderr: u'Device ip-127.0.0.1:3260-iscsi-iqn.2010-10.org.openstack:volume-ec116004-afd7-4131-9ee8-02ab666ec7bd-lun-1 is busy.\\n'\n2014-10-06 21:13:39.391 18441 TRACE oslo.messaging.rpc.dispatcher \n\n--------------------------------------------------------------------------------------------------------------\nNova  rolling back volume from 'detach' to 'in-use'. - \n\n2014-10-06 21:13:39.146 18627 INFO cinder.api.openstack.wsgi [req-072e2662-3f8b-4ca5-82e4-569a990bc34c 980965010fee4b7f800ef366726b5927 ba5e42d2f06340058633ad1a5a84b1b1 - - -] POST http://127.0.0.1:8776/v1/ba5e42d2f06340058633ad1a5a84b1b1/volumes/ec116004-afd7-4131-9ee8-02ab666ec7bd/action\n2014-10-06 21:13:39.146 18627 DEBUG cinder.api.openstack.wsgi [req-072e2662-3f8b-4ca5-82e4-569a990bc34c 980965010fee4b7f800ef366726b5927 ba5e42d2f06340058633ad1a5a84b1b1 - - -] Action body: {\"os-roll_detaching\": null} get_method /opt/stack/new/cinder/cinder/api/openstack/wsgi.py:1008\n", 
            "date_created": "2014-10-07 11:25:50.619484+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghanshyammann"
        }, 
        {
            "content": "Invalidating for Tempest.", 
            "date_created": "2014-10-07 11:26:45.327974+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghanshyammann"
        }, 
        {
            "content": "This looks like a cinder bug: http://logs.openstack.org/73/127573/7/gate/gate-grenade-dsvm/201512f/logs/old/screen-c-vol.txt.gz#_2014-10-30_01_12_29_220", 
            "date_created": "2014-11-07 13:56:09.127078+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Hi Joe,\n\nNot able to get the logs from the link you provided in above comment.\nIs this bug still  active ? Needs to be worked upon ?\n\n ", 
            "date_created": "2015-05-12 06:48:42.790833+00:00", 
            "author": "https://api.launchpad.net/1.0/~nidhimittal19"
        }, 
        {
            "content": "Appears to have since been fixed indirectly.", 
            "date_created": "2016-09-24 22:45:33.244576+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-mcginnis"
        }
    ], 
    "closed": "2014-11-07 13:56:32.107747+00:00"
}