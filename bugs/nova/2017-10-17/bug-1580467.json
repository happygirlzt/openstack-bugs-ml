{
    "status": "Fix Released", 
    "last_updated": "2016-06-02 19:32:21.900501+00:00", 
    "description": "instance boot with invalid availability zone raises 500 InternalServerError\n\nSteps to reproduce\n==================\n\nCommand:\nnova boot --flavor 1 --image 9c1618d0-a6ca-4db6-b2a9-38a9a5cc38b4 --availability-zone invalid::::zone instance1\n\nActual result\n=============\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'nova.exception.InvalidInput'> (HTTP 500) (Request-ID: req-dcc9cfd6-1ea6-4e18-9acd-faccf54fdfd4)\n\nExpected result\n===============\nIt should give 400 HTTPBadRequest with proper error message.\n\nn-API LOG:\n\n2016-05-11 08:59:37.467 ERROR nova.api.openstack.extensions [req-dcc9cfd6-1ea6-4e18-9acd-faccf54fdfd4 admin admin] Unexpected exception in API method\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 583, in create\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     availability_zone, host, node = parse_az(context, availability_zone)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 517, in parse_availability_zone\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     reason=\"Unable to parse availability_zone\")\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions InvalidInput: Invalid input received: Unable to parse availability_zone\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1580467", 
    "owner": "https://api.launchpad.net/1.0/~dinesh-bhor", 
    "id": 1580467, 
    "index": 7473, 
    "openned": "2016-05-11 06:52:00.705351+00:00", 
    "created": "2016-05-11 06:52:00.705351+00:00", 
    "title": "instance boot with invalid availability zone raises 500 InternalServerError", 
    "comments": [
        {
            "content": "instance boot with invalid availability zone raises 500 InternalServerError\n\nSteps to reproduce\n==================\n\nCommand:\nnova boot --flavor 1 --image 9c1618d0-a6ca-4db6-b2a9-38a9a5cc38b4 --availability-zone invalid::::zone instance1\n\nActual result\n=============\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'nova.exception.InvalidInput'> (HTTP 500) (Request-ID: req-dcc9cfd6-1ea6-4e18-9acd-faccf54fdfd4)\n\nExpected result\n===============\nIt should give 400 HTTPBadRequest with proper error message.\n\nn-API LOG:\n\n2016-05-11 08:59:37.467 ERROR nova.api.openstack.extensions [req-dcc9cfd6-1ea6-4e18-9acd-faccf54fdfd4 admin admin] Unexpected exception in API method\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 583, in create\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     availability_zone, host, node = parse_az(context, availability_zone)\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 517, in parse_availability_zone\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions     reason=\"Unable to parse availability_zone\")\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions InvalidInput: Invalid input received: Unable to parse availability_zone\n2016-05-11 08:59:37.467 TRACE nova.api.openstack.extensions", 
            "date_created": "2016-05-11 06:52:00.705351+00:00", 
            "author": "https://api.launchpad.net/1.0/~dinesh-bhor"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/315979", 
            "date_created": "2016-05-13 09:18:30.315437+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/315979\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=26dcd0675a584693d923cdb2aec3cc3a591cb897\nSubmitter: Jenkins\nBranch:    master\n\ncommit 26dcd0675a584693d923cdb2aec3cc3a591cb897\nAuthor: dineshbhor <email address hidden>\nDate:   Wed May 11 10:53:58 2016 +0000\n\n    Return HTTP 400 on boot for invalid availability zone\n    \n    Currently 'nova boot' fails with 500 InternalServerError\n    if you pass invalid availability zone.\n    \n    Caught InvalidInput exception and raised HTTPBadRequest\n    exception to return 400 status code.\n    \n    APIImpact: Return 400 status code for invalid availability\n    zone.\n    \n    Change-Id: I7b730e71abbcbcf9ee1f537a84646243e9a2da7c\n    Closes-Bug: #1580467\n", 
            "date_created": "2016-05-18 15:35:54.041030+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b1 development milestone.", 
            "date_created": "2016-06-02 19:32:21.296613+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ], 
    "closed": "2016-05-18 15:35:52.343352+00:00"
}