{
    "status": "Fix Released", 
    "last_updated": "2016-07-05 08:45:15.969824+00:00", 
    "description": "Description\n===========\nUsing nova to create an instance in Aarch64,the disk.config is the 'cdrom' and has the type of 'scsi'.After instance creation ,log into the instance and can't see the cdrom device.\n\nSteps to reproduce\n==================\n1.Using devstack to deploy openstack. Using default local.conf.\n\n2.Enter into the nova directory\n$ cd /opt/stack/nova\n$ tox -e py27\n\nExpected result\n===============\nAfter running the tests, return:\n\n======\nTotals\n======\nRan: 13479 tests in 662.0000 sec.\n - Passed: 13423\n - Skipped: 56\n - Expected Fail: 0\n - Unexpected Success: 0\n - Failed: 0\nSum of execute time for each test: 4490.9027 sec.\n\n==============\nWorker Balance\n==============\n - Worker 0 (1685 tests) => 0:09:26.657728\n - Worker 1 (1687 tests) => 0:09:37.397435\n - Worker 2 (1684 tests) => 0:09:32.077593\n - Worker 3 (1684 tests) => 0:09:26.830573\n - Worker 4 (1684 tests) => 0:09:23.826421\n - Worker 5 (1685 tests) => 0:09:32.041672\n - Worker 6 (1685 tests) => 0:09:15.550618\n - Worker 7 (1685 tests) => 0:09:23.697743\n__________________________________________________________ summary __________________________________________________________\n\n  py27: commands succeeded\n  congratulations :)\n\nActual result\n=============\nGot 5 errors while running the tests.\nThe test cases are:\nnova.tests.unit.virt.libvirt.test_blockinfo.LibvirtBlockInfoTest.test_get_disk_mapping_cdrom_configdrive\nnova.tests.unit.virt.libvirt.test_blockinfo.LibvirtBlockInfoTest.test_get_disk_mapping_simple_configdrive\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_xml_disk_bus_ide\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_xml_disk_bus_ide_and_virtio\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_get_guest_config_with_configdrive\n\nThe detailed information is in the attaching log file.\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n   Nova development, commit code: 6e2e1dc912199e057e5c3a5e07d39f26cbbbdd5b\n\n2. Which hypervisor did you use?\n    Libvirt+KVM\n    $ kvm --version\n    QEMU emulator version 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.1), Copyright (c) 2003-2008 Fabrice Bellard\n    $ libvirtd --version\n    libvirtd (libvirt) 1.3.1\n\n2. Which storage type did you use?\n   In the host file system,all in one physics machine.\nstack@u202154:/opt/stack/nova$ df -hl\nFilesystem Size Used Avail Use% Mounted on\nudev 7.8G 0 7.8G 0% /dev\ntmpfs 1.6G 61M 1.6G 4% /run\n/dev/sda2 917G 41G 830G 5% /\ntmpfs 7.9G 0 7.9G 0% /dev/shm\ntmpfs 5.0M 0 5.0M 0% /run/lock\ntmpfs 7.9G 0 7.9G 0% /sys/fs/cgroup\n/dev/sda1 511M 888K 511M 1% /boot/efi\ncgmfs 100K 0 100K 0% /run/cgmanager/fs\ntmpfs 1.6G 0 1.6G 0% /run/user/1002\ntmpfs 1.6G 0 1.6G 0% /run/user/1000\ntmpfs 1.6G 0 1.6G 0% /run/user/0\n\n3. Which networking type did you use?\n   nova-network\n\n4. Environment information:\n   Architecture : AARCH64\n   OS: Ubuntu 16.04\n\nDetailed log info is in the accessory.\nThe guest xml is also in the log info.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1591966", 
    "owner": "https://api.launchpad.net/1.0/~kevin-zhao", 
    "id": 1591966, 
    "index": 7540, 
    "openned": "2016-06-13 11:50:27.386051+00:00", 
    "created": "2016-06-13 11:50:27.386051+00:00", 
    "title": "Running Unit Tests got 5 errors in Aarch64", 
    "comments": [
        {
            "content": "Description\n===========\nUsing nova to create an instance in Aarch64,the disk.config is the 'cdrom' and has the type of 'scsi'.After instance creation ,log into the instance and can't see the cdrom device.\n\nSteps to reproduce\n==================\n1.Using devstack to deploy openstack. Using default local.conf.\n\n2.Enter into the nova directory\n$ cd /opt/stack/nova\n$ tox -e py27\n\nExpected result\n===============\nAfter running the tests, return:\n\n======\nTotals\n======\nRan: 13479 tests in 662.0000 sec.\n - Passed: 13423\n - Skipped: 56\n - Expected Fail: 0\n - Unexpected Success: 0\n - Failed: 0\nSum of execute time for each test: 4490.9027 sec.\n\n==============\nWorker Balance\n==============\n - Worker 0 (1685 tests) => 0:09:26.657728\n - Worker 1 (1687 tests) => 0:09:37.397435\n - Worker 2 (1684 tests) => 0:09:32.077593\n - Worker 3 (1684 tests) => 0:09:26.830573\n - Worker 4 (1684 tests) => 0:09:23.826421\n - Worker 5 (1685 tests) => 0:09:32.041672\n - Worker 6 (1685 tests) => 0:09:15.550618\n - Worker 7 (1685 tests) => 0:09:23.697743\n__________________________________________________________ summary __________________________________________________________\n\n  py27: commands succeeded\n  congratulations :)\n\nActual result\n=============\nGot 5 errors while running the tests.\nThe test cases are:\nnova.tests.unit.virt.libvirt.test_blockinfo.LibvirtBlockInfoTest.test_get_disk_mapping_cdrom_configdrive\nnova.tests.unit.virt.libvirt.test_blockinfo.LibvirtBlockInfoTest.test_get_disk_mapping_simple_configdrive\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_xml_disk_bus_ide\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_xml_disk_bus_ide_and_virtio\nnova.tests.unit.virt.libvirt.test_driver.LibvirtConnTestCase.test_get_guest_config_with_configdrive\n\nThe detailed information is in the attaching log file.\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n   Nova development, commit code: 6e2e1dc912199e057e5c3a5e07d39f26cbbbdd5b\n\n2. Which hypervisor did you use?\n    Libvirt+KVM\n    $ kvm --version\n    QEMU emulator version 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.1), Copyright (c) 2003-2008 Fabrice Bellard\n    $ libvirtd --version\n    libvirtd (libvirt) 1.3.1\n\n2. Which storage type did you use?\n   In the host file system,all in one physics machine.\nstack@u202154:/opt/stack/nova$ df -hl\nFilesystem Size Used Avail Use% Mounted on\nudev 7.8G 0 7.8G 0% /dev\ntmpfs 1.6G 61M 1.6G 4% /run\n/dev/sda2 917G 41G 830G 5% /\ntmpfs 7.9G 0 7.9G 0% /dev/shm\ntmpfs 5.0M 0 5.0M 0% /run/lock\ntmpfs 7.9G 0 7.9G 0% /sys/fs/cgroup\n/dev/sda1 511M 888K 511M 1% /boot/efi\ncgmfs 100K 0 100K 0% /run/cgmanager/fs\ntmpfs 1.6G 0 1.6G 0% /run/user/1002\ntmpfs 1.6G 0 1.6G 0% /run/user/1000\ntmpfs 1.6G 0 1.6G 0% /run/user/0\n\n3. Which networking type did you use?\n   nova-network\n\n4. Environment information:\n   Architecture : AARCH64\n   OS: Ubuntu 16.04\n\nDetailed log info is in the accessory.\nThe guest xml is also in the log info.", 
            "date_created": "2016-06-13 11:50:27.386051+00:00", 
            "author": "https://api.launchpad.net/1.0/~kevin-zhao"
        }, 
        {
            "content": "Here is the error log information.\nFrom the log info we can see that, much of the error is because that the disk configure and disk information is not set properly.Need to modify the disk info in the test cases just like non-x86 arch does.", 
            "date_created": "2016-06-13 11:53:04.254892+00:00", 
            "author": "https://api.launchpad.net/1.0/~kevin-zhao"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/328986", 
            "date_created": "2016-06-13 12:48:36.140787+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/328986\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=033701402c7cc246a004f46d7ea2d7cc0a7d5d85\nSubmitter: Jenkins\nBranch:    master\n\ncommit 033701402c7cc246a004f46d7ea2d7cc0a7d5d85\nAuthor: Kevin Zhao <email address hidden>\nDate:   Mon Jun 13 12:29:13 2016 +0000\n\n    Modify the disk bus and device name for Aarch64\n    \n    In some error test cases, modify the disk info, so that\n    Nova can pass all the unit tests in Aarch64.\n    \n    Close-bug: #1591966\n    \n    Change-Id: If187f38960dd4eac633b29fbf890bece3db96876\n    Signed-off-by: Kevin Zhao <email address hidden>\n", 
            "date_created": "2016-06-23 11:49:05.634744+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Since the Mitaka cycle we use the direct release model, so change 'Fix Committed' status to 'Fix Released'.\n", 
            "date_created": "2016-07-05 08:45:03.650694+00:00", 
            "author": "https://api.launchpad.net/1.0/~natsume-takashi"
        }
    ], 
    "closed": "2016-07-05 08:45:13.210081+00:00"
}