{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:48:08.985557+00:00", 
    "description": "When querying for the \"absolute limits\" of a specific tenant\nthe maxTotal* values reported aren't correct.\n\nHow to reproduce:\nfor example using devstack...\n\nOS_TENANT_NAME=demo (11b2b129994844798c98f437d9809a9c)\nOS_USERNAME=demo\n\n$nova absolute-limits\n\n+-------------------------+-------+\n| Name                    | Value |\n+-------------------------+-------+\n| maxServerMeta           | 128   |\n| maxPersonality          | 5     |\n| maxImageMeta            | 128   |\n| maxPersonalitySize      | 10240 |\n| maxTotalRAMSize         | 1000  |\n| maxSecurityGroupRules   | 20    |\n| maxTotalKeypairs        | 100   |\n| totalRAMUsed            | 128   |\n| maxSecurityGroups       | 10    |\n| totalFloatingIpsUsed    | 0     |\n| totalInstancesUsed      | 2     |\n| totalSecurityGroupsUsed | 1     |\n| maxTotalFloatingIps     | 10    |\n| maxTotalInstances       | 10    |    <-----------------------\n| totalCoresUsed          | 2     |\n| maxTotalCores           | 10    |   <-----------------------\n+-------------------------+-------+\n\nOS_TENANT_NAME=admin (b0f08277004b43aab516ae7dbf36ff51)\nOS_USERNAME=admin\n\n$nova absolute-limits\n\n+-------------------------+--------+\n| Name                    | Value  |\n+-------------------------+--------+\n| maxServerMeta           | 128    |\n| maxPersonality          | 5      |\n| maxImageMeta            | 128    |\n| maxPersonalitySize      | 10240  |\n| maxTotalRAMSize         | 151200 |\n| maxSecurityGroupRules   | 20     |\n| maxTotalKeypairs        | 100    |\n| totalRAMUsed            | 1152   |\n| maxSecurityGroups       | 10     |\n| totalFloatingIpsUsed    | 0      |\n| totalInstancesUsed      | 18     |\n| totalSecurityGroupsUsed | 1      |\n| maxTotalFloatingIps     | 10     |\n| maxTotalInstances       | 30     |\n| totalCoresUsed          | 18     |\n| maxTotalCores           | 30     |\n+-------------------------+--------+\n\n$nova absolute-limits --tenant 11b2b129994844798c98f437d9809a9c\n\n+-------------------------+--------+\n| Name                    | Value  |\n+-------------------------+--------+\n| maxServerMeta           | 128    |\n| maxPersonality          | 5      |\n| maxImageMeta            | 128    |\n| maxPersonalitySize      | 10240  |\n| maxTotalRAMSize         | 151200 |\n| maxSecurityGroupRules   | 20     |\n| maxTotalKeypairs        | 100    |\n| totalRAMUsed            | 128    |\n| maxSecurityGroups       | 10     |\n| totalFloatingIpsUsed    | 0      |\n| totalInstancesUsed      | 2      |\n| totalSecurityGroupsUsed | 1      |\n| maxTotalFloatingIps     | 10     |\n| maxTotalInstances       | 30     |     <-------------------\n| totalCoresUsed          | 2      |\n| maxTotalCores           | 30     |    <-------------------\n+-------------------------+--------+\n\nnote: arrows show the wrong values.\nSeems that maxTotal* shows the values for the current tenant and not what is specified by \"--tenant\"\nas expected.\n\ntested in havana and icehouse-1", 
    "tags": [
        "api"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1334278", 
    "owner": "https://api.launchpad.net/1.0/~thang-pham", 
    "id": 1334278, 
    "index": 3939, 
    "openned": "2014-06-25 13:32:18.866215+00:00", 
    "created": "2014-06-25 13:32:18.866215+00:00", 
    "title": "limits with tenant parameter returns wrong maxTotal* values", 
    "comments": [
        {
            "content": "When querying for the \"absolute limits\" of a specific tenant\nthe maxTotal* values reported aren't correct.\n\nHow to reproduce:\nfor example using devstack...\n\nOS_TENANT_NAME=demo (11b2b129994844798c98f437d9809a9c)\nOS_USERNAME=demo\n\n$nova absolute-limits\n\n+-------------------------+-------+\n| Name                    | Value |\n+-------------------------+-------+\n| maxServerMeta           | 128   |\n| maxPersonality          | 5     |\n| maxImageMeta            | 128   |\n| maxPersonalitySize      | 10240 |\n| maxTotalRAMSize         | 1000  |\n| maxSecurityGroupRules   | 20    |\n| maxTotalKeypairs        | 100   |\n| totalRAMUsed            | 128   |\n| maxSecurityGroups       | 10    |\n| totalFloatingIpsUsed    | 0     |\n| totalInstancesUsed      | 2     |\n| totalSecurityGroupsUsed | 1     |\n| maxTotalFloatingIps     | 10    |\n| maxTotalInstances       | 10    |    <-----------------------\n| totalCoresUsed          | 2     |\n| maxTotalCores           | 10    |   <-----------------------\n+-------------------------+-------+\n\nOS_TENANT_NAME=admin (b0f08277004b43aab516ae7dbf36ff51)\nOS_USERNAME=admin\n\n$nova absolute-limits\n\n+-------------------------+--------+\n| Name                    | Value  |\n+-------------------------+--------+\n| maxServerMeta           | 128    |\n| maxPersonality          | 5      |\n| maxImageMeta            | 128    |\n| maxPersonalitySize      | 10240  |\n| maxTotalRAMSize         | 151200 |\n| maxSecurityGroupRules   | 20     |\n| maxTotalKeypairs        | 100    |\n| totalRAMUsed            | 1152   |\n| maxSecurityGroups       | 10     |\n| totalFloatingIpsUsed    | 0      |\n| totalInstancesUsed      | 18     |\n| totalSecurityGroupsUsed | 1      |\n| maxTotalFloatingIps     | 10     |\n| maxTotalInstances       | 30     |\n| totalCoresUsed          | 18     |\n| maxTotalCores           | 30     |\n+-------------------------+--------+\n\n$nova absolute-limits --tenant 11b2b129994844798c98f437d9809a9c\n\n+-------------------------+--------+\n| Name                    | Value  |\n+-------------------------+--------+\n| maxServerMeta           | 128    |\n| maxPersonality          | 5      |\n| maxImageMeta            | 128    |\n| maxPersonalitySize      | 10240  |\n| maxTotalRAMSize         | 151200 |\n| maxSecurityGroupRules   | 20     |\n| maxTotalKeypairs        | 100    |\n| totalRAMUsed            | 128    |\n| maxSecurityGroups       | 10     |\n| totalFloatingIpsUsed    | 0      |\n| totalInstancesUsed      | 2      |\n| totalSecurityGroupsUsed | 1      |\n| maxTotalFloatingIps     | 10     |\n| maxTotalInstances       | 30     |     <-------------------\n| totalCoresUsed          | 2      |\n| maxTotalCores           | 30     |    <-------------------\n+-------------------------+--------+\n\nnote: arrows show the wrong values.\nSeems that maxTotal* shows the values for the current tenant and not what is specified by \"--tenant\"\nas expected.\n\ntested in havana and icehouse-1", 
            "date_created": "2014-06-25 13:32:18.866215+00:00", 
            "author": "https://api.launchpad.net/1.0/~moreira-belmiro-email-lists"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/103709", 
            "date_created": "2014-07-01 03:31:23.015670+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/103709\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=2e6b2404155156ca336dadeacc8874645ca07bfc\nSubmitter: Jenkins\nBranch:    master\n\ncommit 2e6b2404155156ca336dadeacc8874645ca07bfc\nAuthor: Thang Pham <email address hidden>\nDate:   Mon Jun 30 23:17:35 2014 -0400\n\n    API: Enable support for tenant option in nova absolute-limits\n    \n    When querying for the absolute limits of a specific tenant,\n    the tenant option is ignored. There are no attempts to extract\n    the tenant from the request. Instead, nova uses context.project_id\n    as the project_id in QUOTAS.get_project_quotas. The following\n    patch extracts the tenant_id from the request (if any) and passes\n    that to QUOTAS.get_project_quotas to obtain the proper quota.\n    \n    Change-Id: If5f91de020ed8a40fa04fc001c7c4c92681f4ad1\n    Closes-Bug: #1334278\n", 
            "date_created": "2014-08-07 05:58:32.269586+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-09-05 09:52:51.871058+00:00"
}