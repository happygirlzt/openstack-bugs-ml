{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:23:22.121894+00:00", 
    "description": "reproduce as below:\n\nos@os2:~$ nova show vm1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| OS-EXT-SRV-ATTR:host                 | os3                                                            |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | os3                                                            |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000045                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-STS:task_state                | -                                                              |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-SRV-USG:launched_at               | 2014-08-05T03:47:09.000000                                     |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| config_drive                         |                                                                |\n| created                              | 2014-08-05T03:47:01Z                                           |\n| flavor                               | test1 (333)                                                    |\n| hostId                               | c8e8cab21e9e22dbc3779fd171e77f44940ba1c81161dc114ba4ad85       |\n| id                                   | c2e84eda-4bc6-4ef7-a5ee-f6590fb1f6f7                           |\n| image                                | cirros-0.3.2-x86_64-uec (da82a342-aeac-407a-bf9d-cf28bf68dc6b) |\n| key_name                             | -                                                              |\n| metadata                             | {}                                                             |\n| name                                 | vm1                                                            |\n| net1 network                         | 12.0.0.55                                                      |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | ACTIVE                                                         |\n| tenant_id                            | fdbb1e8f23eb40c89f3a677e2621b95c                               |\n| updated                              | 2014-08-05T03:47:09Z                                           |\n| user_id                              | 158d3c971e244f479593c86ff751bf8f                               |\n+--------------------------------------+----------------------------------------------------------------+\nos@os2:~$ nova delete ^C\nos@os2:~$ nova flavor-delete 333\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n| ID  | Name  | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public |\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n| 333 | test1 | 512       | 1    | 1         | 10   | 1     | 1.0         | True      |\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n\n\n\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134,\n in _dispatch_and_reply\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177,\n in _dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123,\n in _do_dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 406, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/server.py\", line 139, in \ninner\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 291, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 277, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 341, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 319, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 307, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2650, in rebuild_instance\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     self._rebuild_default_impl(**kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2505, in _rebuild_default_impl\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     block_device_info=new_block_device_info)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2318, in spawn\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     write_to_disk=True)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3517, in _get_guest_xml\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     disk_info, rescue, block_device_info)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3163, in _get_guest_config\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     instance['instance_type_id'])\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/base.py\", line 151, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     args, kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/conductor/rpcapi.py\", line 344, in object_class_action\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     objver=objver, args=args, kwargs=kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     wait_for_reply=True, timeout=timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     timeout=timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 386, in send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 379, in _send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     raise result\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher FlavorNotFound_Remote: Flavor 9 could not be found.\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/conductor/manager.py\", line 403, in _object_dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return getattr(target, method)(context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/base.py\", line 153, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     result = fn(cls, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/flavor.py\", line 120, in get_by_id\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     db_flavor = db.flavor_get(context, id)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/api.py\", line 1478, in flavor_get\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return IMPL.flavor_get(context, id)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 167, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 4390, in flavor_get\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     raise exception.FlavorNotFound(flavor_id=id)\n\n\n\nAnd there are also some bug for python-novaclient.\nos@os2:~$ nova rebuild vm1 da82a342-aeac-407a-bf9d-cf28bf68dc6b\nERROR (CommandError): No flavor with a name or ID of '333' exists.", 
    "tags": [
        "compute"
    ], 
    "importance": "Low", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1352668", 
    "owner": "https://api.launchpad.net/1.0/~xuhj", 
    "id": 1352668, 
    "index": 1330, 
    "openned": "2014-08-05 04:20:27.884674+00:00", 
    "created": "2014-08-05 04:20:27.884674+00:00", 
    "title": "After archive db the instance with deleted flavor failed", 
    "comments": [
        {
            "content": "reproduce as below:\n\nos@os2:~$ nova show vm1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| OS-EXT-SRV-ATTR:host                 | os3                                                            |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | os3                                                            |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000045                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-STS:task_state                | -                                                              |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-SRV-USG:launched_at               | 2014-08-05T03:47:09.000000                                     |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| config_drive                         |                                                                |\n| created                              | 2014-08-05T03:47:01Z                                           |\n| flavor                               | test1 (333)                                                    |\n| hostId                               | c8e8cab21e9e22dbc3779fd171e77f44940ba1c81161dc114ba4ad85       |\n| id                                   | c2e84eda-4bc6-4ef7-a5ee-f6590fb1f6f7                           |\n| image                                | cirros-0.3.2-x86_64-uec (da82a342-aeac-407a-bf9d-cf28bf68dc6b) |\n| key_name                             | -                                                              |\n| metadata                             | {}                                                             |\n| name                                 | vm1                                                            |\n| net1 network                         | 12.0.0.55                                                      |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | ACTIVE                                                         |\n| tenant_id                            | fdbb1e8f23eb40c89f3a677e2621b95c                               |\n| updated                              | 2014-08-05T03:47:09Z                                           |\n| user_id                              | 158d3c971e244f479593c86ff751bf8f                               |\n+--------------------------------------+----------------------------------------------------------------+\nos@os2:~$ nova delete ^C\nos@os2:~$ nova flavor-delete 333\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n| ID  | Name  | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public |\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n| 333 | test1 | 512       | 1    | 1         | 10   | 1     | 1.0         | True      |\n+-----+-------+-----------+------+-----------+------+-------+-------------+-----------+\n\n\n\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134,\n in _dispatch_and_reply\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177,\n in _dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123,\n in _do_dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 406, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/server.py\", line 139, in \ninner\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 291, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 277, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 341, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 319, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 307, in decorated_function\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2650, in rebuild_instance\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     self._rebuild_default_impl(**kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2505, in _rebuild_default_impl\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     block_device_info=new_block_device_info)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2318, in spawn\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     write_to_disk=True)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3517, in _get_guest_xml\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     disk_info, rescue, block_device_info)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3163, in _get_guest_config\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     instance['instance_type_id'])\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/base.py\", line 151, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     args, kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/conductor/rpcapi.py\", line 344, in object_class_action\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     objver=objver, args=args, kwargs=kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     wait_for_reply=True, timeout=timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     timeout=timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 386, in send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 379, in _send\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     raise result\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher FlavorNotFound_Remote: Flavor 9 could not be found.\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/conductor/manager.py\", line 403, in _object_dispatch\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return getattr(target, method)(context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/base.py\", line 153, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     result = fn(cls, context, *args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/objects/flavor.py\", line 120, in get_by_id\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     db_flavor = db.flavor_get(context, id)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/api.py\", line 1478, in flavor_get\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return IMPL.flavor_get(context, id)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 167, in wrapper\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher \n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 4390, in flavor_get\n2014-08-05 12:16:09.558 TRACE oslo.messaging.rpc.dispatcher     raise exception.FlavorNotFound(flavor_id=id)\n\n\n\nAnd there are also some bug for python-novaclient.\nos@os2:~$ nova rebuild vm1 da82a342-aeac-407a-bf9d-cf28bf68dc6b\nERROR (CommandError): No flavor with a name or ID of '333' exists.", 
            "date_created": "2014-08-05 04:20:27.884674+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "If this patch https://review.openstack.org/#/c/107505/3 is accepted, then this bug also can be fixed. ", 
            "date_created": "2014-08-05 05:12:34.986343+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "Or another way to fix this is use the flavor info from instance's system_metadata instead of get flavor info from db.", 
            "date_created": "2014-08-05 05:15:59.739374+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "This should be fixed by using system_metadata ", 
            "date_created": "2014-09-10 13:12:58.329297+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "@Alex\n\nhttps://review.openstack.org/#/c/107505/3 is abandoned \n\nwhich method are you going to use ?", 
            "date_created": "2014-10-21 09:47:30.527379+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/129199\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=49f3865854875a9269c107216fb67604e8239c81\nSubmitter: Jenkins\nBranch:    master\n\ncommit 49f3865854875a9269c107216fb67604e8239c81\nAuthor: jichenjc <email address hidden>\nDate:   Sat Oct 11 20:15:56 2014 +0800\n\n    Read flavor even if it is already deleted\n    \n    Currently libvirt code has some references to Flavor\n    as objects.Flavor.get_by_id. because the flavor might be\n    deleted before it's referenced, so most code need to\n    read deleted flavor in libvirt driver. This patch\n    makes the _prepare_args_for_get_config which is used for\n    sriov feature consistent to other Flavor get functions.\n    \n    Related-Bug: #1352668\n    \n    Change-Id: Ia4a03467720f1fed18cabe1b78bdd4488f316e34\n", 
            "date_created": "2014-10-30 06:14:31.161834+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Looks fixed in that commit", 
            "date_created": "2015-03-13 13:42:06.332320+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ], 
    "closed": "2015-03-20 07:39:48.705210+00:00"
}