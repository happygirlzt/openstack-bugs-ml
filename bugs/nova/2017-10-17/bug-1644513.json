{
    "status": "Fix Released", 
    "last_updated": "2016-12-15 17:35:08.200806+00:00", 
    "description": "The Telemetry gate is broken with PostgreSQL because of nova-api:\n\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters [req-8ed9761f-b699-4c92-8793-7dca7296d63e tempest-TelemetryNotificationAPITest-1553287657 tempest-TelemetryNotificationAPITest-1553287657] DBAPIError exception wrapped from (psycopg2.ProgrammingError) column \"deleted\" is of type integer but expression is of type boolean\nLINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n                                                             ^\nHINT:  You will need to rewrite or cast the expression.\n [SQL: 'INSERT INTO instances (created_at, updated_at, deleted_at, deleted, user_id, project_id, image_ref, kernel_id, ramdisk_id, hostname, launch_index, key_name, key_data, power_state, vm_state, task_state, memory_mb, vcpus, root_gb, ephemeral_gb, ephemeral_key_uuid, host, node, instance_type_id, user_data, reservation_id, launched_at, terminated_at, availability_zone, display_name, display_description, launched_on, locked, locked_by, os_type, architecture, vm_mode, uuid, root_device_name, default_ephemeral_device, default_swap_device, config_drive, access_ip_v4, access_ip_v6, auto_disk_config, progress, shutdown_terminate, disable_terminate, cell_name, cleaned) VALUES (%(created_at)s, %(updated_at)s, %(deleted_at)s, %(deleted)s, %(user_id)s, %(project_id)s, %(image_ref)s, %(kernel_id)s, %(ramdisk_id)s, %(hostname)s, %(launch_index)s, %(key_name)s, %(key_data)s, %(power_state)s, %(vm_state)s, %(task_state)s, %(memory_mb)s, %(vcpus)s, %(root_gb)s, %(ephemeral_gb)s, %(ephemeral_key_uuid)s, %(host)s, %(node)s, %(instance_type_id)s, %(user_data)s, %(reservation_id)s, %(launched_at)s, %(terminated_at)s, %(availability_zone)s, %(display_name)s, %(display_description)s, %(launched_on)s, %(locked)s, %(locked_by)s, %(os_type)s, %(architecture)s, %(vm_mode)s, %(uuid)s, %(root_device_name)s, %(default_ephemeral_device)s, %(default_swap_device)s, %(config_drive)s, %(access_ip_v4)s, %(access_ip_v6)s, %(auto_disk_config)s, %(progress)s, %(shutdown_terminate)s, %(disable_terminate)s, %(cell_name)s, %(cleaned)s) RETURNING instances.id'] [parameters: {'vm_state': u'building', 'availability_zone': None, 'terminated_at': None, 'ramdisk_id': u'52b2ce17-7bbd-42e7-beae-04c68862da89', 'instance_type_id': 11, 'user_data': None, 'cleaned': 0, 'vm_mode': None, 'deleted_at': None, 'reservation_id': u'r-uo48grph', 'disable_terminate': False, 'display_name': u'tempest-ceilometer-instance-28537131', 'uuid': 'd575169b-72d8-431c-a604-7073460c8d45', 'default_swap_device': None, 'hostname': u'tempest-ceilometer-instance-28537131', 'launched_on': None, 'display_description': u'tempest-ceilometer-instance-28537131', 'key_data': None, 'deleted': False, 'power_state': 0, 'default_ephemeral_device': None, 'progress': 0, 'project_id': u'859a6fcd13504baa8032ed210dc49501', 'launched_at': None, 'architecture': None, 'node': None, 'ephemeral_gb': 0, 'access_ip_v6': None, 'access_ip_v4': None, 'kernel_id': u'8e1eaad4-cb0a-4517-95da-cec482d6169c', 'key_name': None, 'updated_at': None, 'host': None, 'root_gb': 0, 'user_id': u'f21c50ce019c40e1af23463735ba2b34', 'task_state': u'scheduling', 'shutdown_terminate': False, 'cell_name': None, 'ephemeral_key_uuid': None, 'locked': False, 'created_at': datetime.datetime(2016, 11, 24, 9, 59, 34, 369835), 'locked_by': None, 'launch_index': 0, 'memory_mb': 64, 'vcpus': 1, 'image_ref': u'7000088e-adda-45ce-8bbc-dbfe4e087941', 'root_device_name': None, 'auto_disk_config': False, 'os_type': None, 'config_drive': u''}]\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters Traceback (most recent call last):\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters     context)\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters     cursor.execute(statement, parameters)\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters ProgrammingError: column \"deleted\" is of type integer but expression is of type boolean\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters LINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters                                                              ^\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters HINT:  You will need to rewrite or cast the expression.\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters \n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters \n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions [req-8ed9761f-b699-4c92-8793-7dca7296d63e tempest-TelemetryNotificationAPITest-1553287657 tempest-TelemetryNotificationAPITest-1553287657] Unexpected exception in API method\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/servers.py\", line 631, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/hooks.py\", line 154, in inner\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1599, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1224, in _create_instance\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     instances_to_build)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1213, in _create_instance\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     instance.create()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return fn(self, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/objects/instance.py\", line 540, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     db_inst = db.instance_create(self._context, updates)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/api.py\", line 715, in instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return IMPL.instance_create(context, values)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 170, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 151, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ectxt.value = e.inner_exc\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 139, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 241, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1809, in instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ec2_instance_create(context, instance_ref['uuid'])\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 170, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 241, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 6182, in ec2_instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ec2_instance_ref.save(context.session)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 48, in save\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     session.flush()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2080, in flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self._flush(objects)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2198, in _flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     transaction.rollback(_capture_exception=True)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2162, in _flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     flush_context.execute()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     rec.execute(self)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     uow\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 178, in save_obj\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     mapper, table, insert)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 804, in _emit_insert_statements\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     execute(statement, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     context)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 202, in raise_from_cause\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     context)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     cursor.execute(statement, parameters)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions DBError: (psycopg2.ProgrammingError) column \"deleted\" is of type integer but expression is of type boolean\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions LINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions                                                              ^\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions HINT:  You will need to rewrite or cast the expression.\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions  [SQL: 'INSERT INTO instances (created_at, updated_at, deleted_at, deleted, user_id, project_id, image_ref, kernel_id, ramdisk_id, hostname, launch_index, key_name, key_data, power_state, vm_state, task_state, memory_mb, vcpus, root_gb, ephemeral_gb, ephemeral_key_uuid, host, node, instance_type_id, user_data, reservation_id, launched_at, terminated_at, availability_zone, display_name, display_description, launched_on, locked, locked_by, os_type, architecture, vm_mode, uuid, root_device_name, default_ephemeral_device, default_swap_device, config_drive, access_ip_v4, access_ip_v6, auto_disk_config, progress, shutdown_terminate, disable_terminate, cell_name, cleaned) VALUES (%(created_at)s, %(updated_at)s, %(deleted_at)s, %(deleted)s, %(user_id)s, %(project_id)s, %(image_ref)s, %(kernel_id)s, %(ramdisk_id)s, %(hostname)s, %(launch_index)s, %(key_name)s, %(key_data)s, %(power_state)s, %(vm_state)s, %(task_state)s, %(memory_mb)s, %(vcpus)s, %(root_gb)s, %(ephemeral_gb)s, %(ephemeral_key_uuid)s, %(host)s, %(node)s, %(instance_type_id)s, %(user_data)s, %(reservation_id)s, %(launched_at)s, %(terminated_at)s, %(availability_zone)s, %(display_name)s, %(display_description)s, %(launched_on)s, %(locked)s, %(locked_by)s, %(os_type)s, %(architecture)s, %(vm_mode)s, %(uuid)s, %(root_device_name)s, %(default_ephemeral_device)s, %(default_swap_device)s, %(config_drive)s, %(access_ip_v4)s, %(access_ip_v6)s, %(auto_disk_config)s, %(progress)s, %(shutdown_terminate)s, %(disable_terminate)s, %(cell_name)s, %(cleaned)s) RETURNING instances.id'] [parameters: {'vm_state': u'building', 'availability_zone': None, 'terminated_at': None, 'ramdisk_id': u'52b2ce17-7bbd-42e7-beae-04c68862da89', 'instance_type_id': 11, 'user_data': None, 'cleaned': 0, 'vm_mode': None, 'deleted_at': None, 'reservation_id': u'r-uo48grph', 'disable_terminate': False, 'display_name': u'tempest-ceilometer-instance-28537131', 'uuid': 'd575169b-72d8-431c-a604-7073460c8d45', 'default_swap_device': None, 'hostname': u'tempest-ceilometer-instance-28537131', 'launched_on': None, 'display_description': u'tempest-ceilometer-instance-28537131', 'key_data': None, 'deleted': False, 'power_state': 0, 'default_ephemeral_device': None, 'progress': 0, 'project_id': u'859a6fcd13504baa8032ed210dc49501', 'launched_at': None, 'architecture': None, 'node': None, 'ephemeral_gb': 0, 'access_ip_v6': None, 'access_ip_v4': None, 'kernel_id': u'8e1eaad4-cb0a-4517-95da-cec482d6169c', 'key_name': None, 'updated_at': None, 'host': None, 'root_gb': 0, 'user_id': u'f21c50ce019c40e1af23463735ba2b34', 'task_state': u'scheduling', 'shutdown_terminate': False, 'cell_name': None, 'ephemeral_key_uuid': None, 'locked': False, 'created_at': datetime.datetime(2016, 11, 24, 9, 59, 34, 369835), 'locked_by': None, 'launch_index': 0, 'memory_mb': 64, 'vcpus': 1, 'image_ref': u'7000088e-adda-45ce-8bbc-dbfe4e087941', 'root_device_name': None, 'auto_disk_config': False, 'os_type': None, 'config_drive': u''}]\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions \n\n\nFull log at http://logs.openstack.org/34/385934/21/check/gate-ceilometer-dsvm-tempest-plugin-postgresql/a9bbba3/logs/screen-n-api.txt.gz", 
    "tags": [
        "testing"
    ], 
    "importance": "Critical", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1644513", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1644513, 
    "index": 284, 
    "openned": "2016-11-24 10:56:13.752556+00:00", 
    "created": "2016-11-24 10:56:13.752556+00:00", 
    "title": "(psycopg2.ProgrammingError) column 'deleted' is of type integer but expression is of type boolean", 
    "comments": [
        {
            "content": "The Telemetry gate is broken with PostgreSQL because of nova-api:\n\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters [req-8ed9761f-b699-4c92-8793-7dca7296d63e tempest-TelemetryNotificationAPITest-1553287657 tempest-TelemetryNotificationAPITest-1553287657] DBAPIError exception wrapped from (psycopg2.ProgrammingError) column \"deleted\" is of type integer but expression is of type boolean\nLINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n                                                             ^\nHINT:  You will need to rewrite or cast the expression.\n [SQL: 'INSERT INTO instances (created_at, updated_at, deleted_at, deleted, user_id, project_id, image_ref, kernel_id, ramdisk_id, hostname, launch_index, key_name, key_data, power_state, vm_state, task_state, memory_mb, vcpus, root_gb, ephemeral_gb, ephemeral_key_uuid, host, node, instance_type_id, user_data, reservation_id, launched_at, terminated_at, availability_zone, display_name, display_description, launched_on, locked, locked_by, os_type, architecture, vm_mode, uuid, root_device_name, default_ephemeral_device, default_swap_device, config_drive, access_ip_v4, access_ip_v6, auto_disk_config, progress, shutdown_terminate, disable_terminate, cell_name, cleaned) VALUES (%(created_at)s, %(updated_at)s, %(deleted_at)s, %(deleted)s, %(user_id)s, %(project_id)s, %(image_ref)s, %(kernel_id)s, %(ramdisk_id)s, %(hostname)s, %(launch_index)s, %(key_name)s, %(key_data)s, %(power_state)s, %(vm_state)s, %(task_state)s, %(memory_mb)s, %(vcpus)s, %(root_gb)s, %(ephemeral_gb)s, %(ephemeral_key_uuid)s, %(host)s, %(node)s, %(instance_type_id)s, %(user_data)s, %(reservation_id)s, %(launched_at)s, %(terminated_at)s, %(availability_zone)s, %(display_name)s, %(display_description)s, %(launched_on)s, %(locked)s, %(locked_by)s, %(os_type)s, %(architecture)s, %(vm_mode)s, %(uuid)s, %(root_device_name)s, %(default_ephemeral_device)s, %(default_swap_device)s, %(config_drive)s, %(access_ip_v4)s, %(access_ip_v6)s, %(auto_disk_config)s, %(progress)s, %(shutdown_terminate)s, %(disable_terminate)s, %(cell_name)s, %(cleaned)s) RETURNING instances.id'] [parameters: {'vm_state': u'building', 'availability_zone': None, 'terminated_at': None, 'ramdisk_id': u'52b2ce17-7bbd-42e7-beae-04c68862da89', 'instance_type_id': 11, 'user_data': None, 'cleaned': 0, 'vm_mode': None, 'deleted_at': None, 'reservation_id': u'r-uo48grph', 'disable_terminate': False, 'display_name': u'tempest-ceilometer-instance-28537131', 'uuid': 'd575169b-72d8-431c-a604-7073460c8d45', 'default_swap_device': None, 'hostname': u'tempest-ceilometer-instance-28537131', 'launched_on': None, 'display_description': u'tempest-ceilometer-instance-28537131', 'key_data': None, 'deleted': False, 'power_state': 0, 'default_ephemeral_device': None, 'progress': 0, 'project_id': u'859a6fcd13504baa8032ed210dc49501', 'launched_at': None, 'architecture': None, 'node': None, 'ephemeral_gb': 0, 'access_ip_v6': None, 'access_ip_v4': None, 'kernel_id': u'8e1eaad4-cb0a-4517-95da-cec482d6169c', 'key_name': None, 'updated_at': None, 'host': None, 'root_gb': 0, 'user_id': u'f21c50ce019c40e1af23463735ba2b34', 'task_state': u'scheduling', 'shutdown_terminate': False, 'cell_name': None, 'ephemeral_key_uuid': None, 'locked': False, 'created_at': datetime.datetime(2016, 11, 24, 9, 59, 34, 369835), 'locked_by': None, 'launch_index': 0, 'memory_mb': 64, 'vcpus': 1, 'image_ref': u'7000088e-adda-45ce-8bbc-dbfe4e087941', 'root_device_name': None, 'auto_disk_config': False, 'os_type': None, 'config_drive': u''}]\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters Traceback (most recent call last):\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters     context)\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters     cursor.execute(statement, parameters)\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters ProgrammingError: column \"deleted\" is of type integer but expression is of type boolean\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters LINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters                                                              ^\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters HINT:  You will need to rewrite or cast the expression.\n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters \n2016-11-24 09:59:34.431 32192 ERROR oslo_db.sqlalchemy.exc_filters \n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions [req-8ed9761f-b699-4c92-8793-7dca7296d63e tempest-TelemetryNotificationAPITest-1553287657 tempest-TelemetryNotificationAPITest-1553287657] Unexpected exception in API method\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/servers.py\", line 631, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/hooks.py\", line 154, in inner\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1599, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1224, in _create_instance\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     instances_to_build)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1213, in _create_instance\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     instance.create()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return fn(self, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/objects/instance.py\", line 540, in create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     db_inst = db.instance_create(self._context, updates)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/api.py\", line 715, in instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return IMPL.instance_create(context, values)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 170, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 151, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ectxt.value = e.inner_exc\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 139, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 241, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1809, in instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ec2_instance_create(context, instance_ref['uuid'])\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 170, in wrapper\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 241, in wrapped\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 6182, in ec2_instance_create\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     ec2_instance_ref.save(context.session)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 48, in save\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     session.flush()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2080, in flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     self._flush(objects)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2198, in _flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     transaction.rollback(_capture_exception=True)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2162, in _flush\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     flush_context.execute()\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     rec.execute(self)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     uow\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 178, in save_obj\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     mapper, table, insert)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 804, in _emit_insert_statements\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     execute(statement, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     context)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 202, in raise_from_cause\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     context)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions     cursor.execute(statement, parameters)\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions DBError: (psycopg2.ProgrammingError) column \"deleted\" is of type integer but expression is of type boolean\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions LINE 1: ...16-11-24T09:59:34.369835'::timestamp, NULL, NULL, false, 'f2...\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions                                                              ^\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions HINT:  You will need to rewrite or cast the expression.\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions  [SQL: 'INSERT INTO instances (created_at, updated_at, deleted_at, deleted, user_id, project_id, image_ref, kernel_id, ramdisk_id, hostname, launch_index, key_name, key_data, power_state, vm_state, task_state, memory_mb, vcpus, root_gb, ephemeral_gb, ephemeral_key_uuid, host, node, instance_type_id, user_data, reservation_id, launched_at, terminated_at, availability_zone, display_name, display_description, launched_on, locked, locked_by, os_type, architecture, vm_mode, uuid, root_device_name, default_ephemeral_device, default_swap_device, config_drive, access_ip_v4, access_ip_v6, auto_disk_config, progress, shutdown_terminate, disable_terminate, cell_name, cleaned) VALUES (%(created_at)s, %(updated_at)s, %(deleted_at)s, %(deleted)s, %(user_id)s, %(project_id)s, %(image_ref)s, %(kernel_id)s, %(ramdisk_id)s, %(hostname)s, %(launch_index)s, %(key_name)s, %(key_data)s, %(power_state)s, %(vm_state)s, %(task_state)s, %(memory_mb)s, %(vcpus)s, %(root_gb)s, %(ephemeral_gb)s, %(ephemeral_key_uuid)s, %(host)s, %(node)s, %(instance_type_id)s, %(user_data)s, %(reservation_id)s, %(launched_at)s, %(terminated_at)s, %(availability_zone)s, %(display_name)s, %(display_description)s, %(launched_on)s, %(locked)s, %(locked_by)s, %(os_type)s, %(architecture)s, %(vm_mode)s, %(uuid)s, %(root_device_name)s, %(default_ephemeral_device)s, %(default_swap_device)s, %(config_drive)s, %(access_ip_v4)s, %(access_ip_v6)s, %(auto_disk_config)s, %(progress)s, %(shutdown_terminate)s, %(disable_terminate)s, %(cell_name)s, %(cleaned)s) RETURNING instances.id'] [parameters: {'vm_state': u'building', 'availability_zone': None, 'terminated_at': None, 'ramdisk_id': u'52b2ce17-7bbd-42e7-beae-04c68862da89', 'instance_type_id': 11, 'user_data': None, 'cleaned': 0, 'vm_mode': None, 'deleted_at': None, 'reservation_id': u'r-uo48grph', 'disable_terminate': False, 'display_name': u'tempest-ceilometer-instance-28537131', 'uuid': 'd575169b-72d8-431c-a604-7073460c8d45', 'default_swap_device': None, 'hostname': u'tempest-ceilometer-instance-28537131', 'launched_on': None, 'display_description': u'tempest-ceilometer-instance-28537131', 'key_data': None, 'deleted': False, 'power_state': 0, 'default_ephemeral_device': None, 'progress': 0, 'project_id': u'859a6fcd13504baa8032ed210dc49501', 'launched_at': None, 'architecture': None, 'node': None, 'ephemeral_gb': 0, 'access_ip_v6': None, 'access_ip_v4': None, 'kernel_id': u'8e1eaad4-cb0a-4517-95da-cec482d6169c', 'key_name': None, 'updated_at': None, 'host': None, 'root_gb': 0, 'user_id': u'f21c50ce019c40e1af23463735ba2b34', 'task_state': u'scheduling', 'shutdown_terminate': False, 'cell_name': None, 'ephemeral_key_uuid': None, 'locked': False, 'created_at': datetime.datetime(2016, 11, 24, 9, 59, 34, 369835), 'locked_by': None, 'launch_index': 0, 'memory_mb': 64, 'vcpus': 1, 'image_ref': u'7000088e-adda-45ce-8bbc-dbfe4e087941', 'root_device_name': None, 'auto_disk_config': False, 'os_type': None, 'config_drive': u''}]\n2016-11-24 09:59:34.443 32192 ERROR nova.api.openstack.extensions \n\n\nFull log at http://logs.openstack.org/34/385934/21/check/gate-ceilometer-dsvm-tempest-plugin-postgresql/a9bbba3/logs/screen-n-api.txt.gz", 
            "date_created": "2016-11-24 10:56:13.752556+00:00", 
            "author": "https://api.launchpad.net/1.0/~jdanjou"
        }, 
        {
            "content": "Confirmed for all projects gating PostgreSQL :\n\nhttp://logstash.openstack.org/#/dashboard/file/logstash.json?query=message:\\%22%28psycopg2.ProgrammingError%29%20column%20\\%22deleted\\%22%20is%20of%20type%20integer%20but%20expression%20is%20of%20type%20boolean\\%22&from=2d\n\n", 
            "date_created": "2016-11-24 13:09:02.350265+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "I'm suspecting https://review.openstack.org/#/c/399672/ to have caused the regression, could someone locally try to git revert it ?", 
            "date_created": "2016-11-24 14:23:40.876634+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/402090", 
            "date_created": "2016-11-24 15:05:00.337370+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Also affecting Ironic's job on PostgreSQL (non-voting so it does not block Ironic's CI, but this is a single job that tests classic PXE instead of iPXE boot, so we'd like to turn it to voting).\n\nhttp://logs.openstack.org/43/391943/12/check/gate-tempest-dsvm-ironic-pxe_ipmitool-postgres-ubuntu-xenial-nv/a353dbb/logs/screen-n-api.txt.gz?level=ERROR", 
            "date_created": "2016-11-25 10:25:34.235088+00:00", 
            "author": "https://api.launchpad.net/1.0/~pshchelo"
        }, 
        {
            "content": "So, after discussing woth Roman, I think the problem is because we merged https://review.openstack.org/#/c/374267/24 where we're hydrating an Instance object from the BuildRequest.instance field and where the deleted field is set.\n\nIMHO the real problem is that 'deleted' is a Boolean field (while it should be just an integer) in https://github.com/openstack/nova/blob/520ee65a55bf9894d5915d3cebc892439d703312/nova/objects/base.py#L219 but fixing that could be difficult.\n\n\n", 
            "date_created": "2016-11-25 10:30:17.471898+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "Sylvain,\n\nI agree with you, but my understanding is that changing of the object field would effectively mean we would have to update all objects versions. Coercing of the value on INSERT or UPDATE in the DB layer seems to be simpler solution. I'll update my commit with comments and reasoning.", 
            "date_created": "2016-11-25 10:59:25.686474+00:00", 
            "author": "https://api.launchpad.net/1.0/~rpodolyaka"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/402517", 
            "date_created": "2016-11-25 12:45:58.470597+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Ironic CI passes with depends-on Roman's patch\n\nhttps://review.openstack.org/#/c/402470/\n\nhttp://logs.openstack.org/70/402470/1/check/gate-tempest-dsvm-ironic-pxe_ipmitool-postgres-ubuntu-xenial-nv/1be0edd/", 
            "date_created": "2016-11-25 13:00:03.512871+00:00", 
            "author": "https://api.launchpad.net/1.0/~pshchelo"
        }, 
        {
            "content": "So, after discussing woth Roman, I think the problem is because we merged https://review.openstack.org/#/c/374267/24 where we're hydrating an Instance object from the BuildRequest.instance field and where the deleted field is set.\n\nIMHO the real problem is that 'deleted' is a Boolean field (while it should be just an integer) in https://github.com/openstack/nova/blob/520ee65a55bf9894d5915d3cebc892439d703312/nova/objects/base.py#L219 but fixing that could be difficult.\n\n\n", 
            "date_created": "2016-11-25 14:09:36.338523+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "Change abandoned by Roman Podoliaka (<email address hidden>) on branch: master\nReview: https://review.openstack.org/402517\nReason: in favor of https://review.openstack.org/#/c/402090/", 
            "date_created": "2016-11-25 14:11:21.657915+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/403035", 
            "date_created": "2016-11-25 16:39:59.745030+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/403694", 
            "date_created": "2016-11-28 13:26:17.425620+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "The fact that we're using a boolean for deleted instead of an integer is intentional and should not be changed. We're modeling the behavior we want, independent of how we store it in the backend. The deleted=$id thing has not been around forever and may not be around forever. Deleted should be a boolean to higher layers.", 
            "date_created": "2016-11-28 14:52:49.985611+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/403756", 
            "date_created": "2016-11-28 15:20:52.661080+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Roman Podoliaka (<email address hidden>) on branch: master\nReview: https://review.openstack.org/402090\nReason: in favor of https://review.openstack.org/#/c/403756", 
            "date_created": "2016-11-28 15:29:43.577677+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/403821", 
            "date_created": "2016-11-28 17:40:07.518062+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/403756\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=f3a280959a0237fc3b0f3eeaaa3154566f8620c0\nSubmitter: Jenkins\nBranch:    master\n\ncommit f3a280959a0237fc3b0f3eeaaa3154566f8620c0\nAuthor: Dan Smith <email address hidden>\nDate:   Mon Nov 28 07:24:21 2016 -0800\n\n    Check deleted flag in Instance.create()\n    \n    An attempt to create an instance with the deleted flag set will\n    not work as intended, especially from instance.create(), which\n    can't properly pass the yet-to-be-determined deleted=id protocol.\n    \n    This makes Instance.create() throw an error like the one for\n    being already created, and fixes the one test where we depend\n    on this working.\n    \n    Change-Id: I60d18ca694a2eb7f333c0cf2a898cf8f17eb83dd\n    Closes-Bug: #1644513\n", 
            "date_created": "2016-11-28 23:44:21.509024+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Sylvain Bauza (<email address hidden>) on branch: master\nReview: https://review.openstack.org/403035\nReason: As discussed on IRC, agreed on the direction", 
            "date_created": "2016-11-29 09:08:53.260597+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Sylvain Bauza (<email address hidden>) on branch: master\nReview: https://review.openstack.org/403694\nReason: As discussed over IRC, fine by me.", 
            "date_created": "2016-11-29 09:08:58.568337+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Bug is NOT FIXED, problem still exists:\n\nhttp://logs.openstack.org/18/404118/1/check/gate-manila-tempest-dsvm-postgres-generic-singlebackend-ubuntu-xenial-nv/3b61be9/logs/screen-n-api.txt.gz?level=TRACE", 
            "date_created": "2016-11-29 11:07:57.334620+00:00", 
            "author": "https://api.launchpad.net/1.0/~vponomaryov"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/403821\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=37ec9b99c7ca85467f5d274505e86436d86657dc\nSubmitter: Jenkins\nBranch:    master\n\ncommit 37ec9b99c7ca85467f5d274505e86436d86657dc\nAuthor: Sylvain Bauza <email address hidden>\nDate:   Mon Nov 28 18:36:53 2016 +0100\n\n    Default deleted if the instance from BuildRequest is not having it\n    \n    We should already have the rehydrated instance having the deleted field being\n    set. That field is also a BooleanField type, so we should never try to cast it\n    from an integer (even if we support it). Instead, we need to make sure that if\n    the field is not set for any reason (mostly because an Instance wasn't persisted\n    before we persisted the BuildRequest object that was nesting it), then we would\n    default the deleted field to False.\n    \n    Change-Id: I828191f750a5978fed65a86e797388d11042b4a0\n    Related-Bug: #1644513\n", 
            "date_created": "2016-11-29 11:51:28.975109+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/404255", 
            "date_created": "2016-11-29 15:00:20.033528+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/404374", 
            "date_created": "2016-11-29 18:29:59.499967+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/404255\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=69ff7e5190ff47ae6dc7c39bac7f78ae4c0af8fd\nSubmitter: Jenkins\nBranch:    master\n\ncommit 69ff7e5190ff47ae6dc7c39bac7f78ae4c0af8fd\nAuthor: Dan Smith <email address hidden>\nDate:   Tue Nov 29 07:05:17 2016 -0800\n\n    Never pass boolean deleted to instance_create()\n    \n    This explicitly converts the deleted flag to an integer (which will\n    always be zero) at Instance.create() time. We already require it to\n    be False, but if set, we will pass the boolean instead of an integer,\n    which will confuse some (self-respecting) DBMs.\n    \n    Change-Id: I67a340eea79b4423e77a00242ec6ae345e8c0e19\n    Closes-Bug: #1644513\n", 
            "date_created": "2016-11-29 19:12:33.740147+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/oslo.db 4.15.0 release.", 
            "date_created": "2016-12-01 16:33:42.682715+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:35:01.698492+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:35:07.393922+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2016-11-28 23:44:18.433725+00:00"
}