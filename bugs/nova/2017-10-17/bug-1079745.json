{
    "status": "Invalid", 
    "last_updated": "2013-05-16 17:39:40.057769+00:00", 
    "description": "Hi, we are using \"Essex 2012.1.3\" with Ubuntu 12.04, and when we delete an instance that has 2 nova volumes attached, we see in the compute logs, that it tries to detach the same volume twice, stacking because of iscsadm commnad, leaving both nova volumes in \"in-use\" state, and the instance in \"deleting\" task, and shutoff state.\n\nHere's the volume-list command for the volumes after the \"delete\" command.\n\n+-----+----------------+--------------+------+-------------+--------------------------------------+\n| ID  | Status         | Display Name | Size | Volume Type | Attached to                          |\n+-----+----------------+--------------+------+-------------+--------------------------------------+\n| 306 | in-use         | ev-00000160  | 8    | None        | 6e97906c-6122-408a-b151-7d23aaae089b |\n| 311 | in-use         | ev-00000161  | 10   | None        | 6e97906c-6122-408a-b151-7d23aaae089b |\n\nHere's the \"show\" command for the vm :\n\n+-------------------------------------+-------------------------------------------------------------+\n| Property                            | Value                                                       |\n+-------------------------------------+-------------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                      |\n| OS-EXT-SRV-ATTR:host                | DC2-r9-23vms                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                                        |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000003f8                                           |\n| OS-EXT-STS:power_state              | 0                                                           |\n| OS-EXT-STS:task_state               | deleting                                                    |\n| OS-EXT-STS:vm_state                 | shutoff                                                     |\n| accessIPv4                          |                                                             |\n| accessIPv6                          |                                                             |\n| config_drive                        |                                                             |\n| created                             | 2012-11-15T18:13:16Z                                        |\n| flavor                              | gz.micro (1)                                                |\n| hostId                              | 1251f2dc1db48c4c0692d5dd7152312461e83536014d81da5c8c8a27    |\n| id                                  | 6e97906c-6122-408a-b151-7d23aaae089b                        |\n| image                               | ami_PRECISE_20120927 (f76cb3f7-7e83-4fb1-a189-611f6a2e9eef) |\n| key_name                            |                                                             |\n| metadata                            | {u'region': u'DC2_r9', u'name': u'e-000004dc'}              |\n| name                                | e-000004dc                                                  |\n| private network                     | 172.16.76.218                                               |\n| status                              | SHUTOFF                                                     |\n| tenant_id                           | 7ca5bf73c54f4647b689b01c2a4f0bde                            |\n| updated                             | 2012-11-16T14:56:58Z                                        |\n| user_id                             | 5744a1b442e8400ca3da9e85845045e4                            |\n+-------------------------------------+-------------------------------------------------------------+\n\nAnd here are the nova-compute.log for the operation that stacks:\n\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [-] received {u'_context_roles': [u'asoc_arquitectura'], u'_context_request_id': u'req-ed637bc2-9e77-4564-bb27-27658cc699db', u'_context_read_deleted': u'no', u'args': {u'instance_uuid': u'6e97906c-6122-408a-b151-7d23aaae089b'}, u'_context_auth_token': '<SANITIZED>', u'_context_is_admin': False, u'_context_project_id': u'7ca5bf73c54f4647b689b01c2a4f0bde', u'_context_timestamp': u'2012-11-16T14:46:06.546864', u'_context_user_id': u'5744a1b442e8400ca3da9e85845045e4', u'method': u'terminate_instance', u'_context_remote_address': u'172.16.150.76'} from (pid=25044) _safe_log /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/common.py:160\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] unpacked context: {'user_id': u'5744a1b442e8400ca3da9e85845045e4', 'roles': [u'asoc_arquitectura'], 'timestamp': '2012-11-16T14:46:06.546864', 'auth_token': '<SANITIZED>', 'remote_address': u'172.16.150.76', 'is_admin': False, 'request_id': u'req-ed637bc2-9e77-4564-bb27-27658cc699db', 'project_id': u'7ca5bf73c54f4647b689b01c2a4f0bde', 'read_deleted': u'no'} from (pid=25044) _safe_log /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/common.py:160\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: decorating: |<function terminate_instance at 0x1d56de8>|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x7f6da2a1f610>| |<nova.rpc.amqp.RpcContext object at 0x407d5d0>| |6e97906c-6122-408a-b151-7d23aaae089b|\n2012-11-16 09:46:33 DEBUG nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] instance 6e97906c-6122-408a-b151-7d23aaae089b: getting locked state from (pid=25044) get_lock /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py:1626\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: locked: |False|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: admin: |False|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: executing: |<function terminate_instance at 0x1d56de8>|\n2012-11-16 09:46:33 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"6e97906c-6122-408a-b151-7d23aaae089b\" for method \"do_terminate_instance\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:33 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"6e97906c-6122-408a-b151-7d23aaae089b\" for method \"do_terminate_instance\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:33 AUDIT nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Terminating instance\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Making asynchronous call on network ... from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:326\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] MSG_ID is a60c1d4fb94344b3a8a4ded3ff83ed86 from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:329\n2012-11-16 09:46:33 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003f8/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:33 DEBUG nova.virt.libvirt.connection [-] skipping None since it looks like volume from (pid=25044) get_instance_disk_info /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py:2287\n2012-11-16 09:46:33 DEBUG nova.virt.libvirt.connection [-] skipping None since it looks like volume from (pid=25044) get_instance_disk_info /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py:2287\n2012-11-16 09:46:34 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000385/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:34 DEBUG nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Deallocating network for instance from (pid=25044) _deallocate_network /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py:641\n2012-11-16 09:46:34 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Making asynchronous call on network ... from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:326\n2012-11-16 09:46:34 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] MSG_ID is 025d818087da436697458c520195300f from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:329\n2012-11-16 09:46:34 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000385/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:35 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000308/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:35 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000308/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:36 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000009/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:935\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got file lock \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:942\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-save -t filter from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:39 INFO nova.virt.libvirt.connection [-] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Instance destroyed successfully.\n2012-11-16 09:46:39 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000009/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:39 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-restore from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000002fd/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000002fd/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-save -t nat from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000161/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-restore from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000161/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:42 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000000b9/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:42 DEBUG nova.network.linux_net [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] IPTablesManager.apply completed with success from (pid=25044) apply /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/network/linux_net.py:335\n2012-11-16 09:46:44 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:44 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:53 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:54 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000000b9/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:54 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--op', 'update', '-n', 'node.startup', '-v', 'manual'): stdout= stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:54 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --logout from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003fc/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--logout',): stdout=Logging out of session [sid: 4, target: iqn.1992-08.com.netapp:sn.1574861693, portal: 10.1.1.160,3260]\nLogout of [sid: 4, target: iqn.1992-08.com.netapp:sn.1574861693, portal: 10.1.1.160,3260]: successful\n stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:55 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op delete from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003fc/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:56 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-0000010d/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:56 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--op', 'delete'): stdout= stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:56 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:56 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:47:06 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:47:06 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-0000010d/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:47:06 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Result was 255 from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:235\n2012-11-16 09:47:06 ERROR nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Exception during message handling\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py\", line 253, in _process_data\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/exception.py\", line 114, in wrapped\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 159, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     function(self, context, instance_uuid, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 183, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     sys.exc_info())\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self.gen.next()\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 772, in terminate_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     do_terminate_instance()\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 945, in inner\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 765, in do_terminate_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._delete_instance(context, instance)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 743, in _delete_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._shutdown_instance(context, instance, 'Terminating')\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 712, in _shutdown_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     block_device_info)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 487, in destroy\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     cleanup=True)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 479, in _destroy\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     mount_device)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 525, in volume_driver_method\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return method(connection_info, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 945, in inner\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 204, in disconnect_volume\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._iscsiadm_update(iscsi_properties, \"node.startup\", \"manual\")\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 118, in _iscsiadm_update\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return self._run_iscsiadm(iscsi_properties, iscsi_command)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 110, in _run_iscsiadm\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     check_exit_code=check_exit_code)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 242, in execute\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     cmd=' '.join(cmd))\n2012-11-16 09:47:06 TRACE nova.rpc.amqp ProcessExecutionError: Unexpected error while running command.\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Command: sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Exit code: 255\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Stdout: ''\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Stderr: 'iscsiadm: no records found!\\n'\n2012-11-16 09:47:06 TRACE nova.rpc.amqp", 
    "tags": [
        "essex", 
        "nova-volume", 
        "verification-done"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1079745", 
    "owner": "None", 
    "id": 1079745, 
    "index": 4479, 
    "openned": "2012-11-16 16:01:05.536830+00:00", 
    "created": "2012-11-16 16:01:05.536830+00:00", 
    "title": "Essex 2012.1.3 : Error deleting instance with 2 Nova Volumes attached", 
    "comments": [
        {
            "content": "Hi, we are using \"Essex 2012.1.3\" with Ubuntu 12.04, and when we delete an instance that has 2 nova volumes attached, we see in the compute logs, that it tries to detach the same volume twice, stacking because of iscsadm commnad, leaving both nova volumes in \"in-use\" state, and the instance in \"deleting\" task, and shutoff state.\n\nHere's the volume-list command for the volumes after the \"delete\" command.\n\n+-----+----------------+--------------+------+-------------+--------------------------------------+\n| ID  | Status         | Display Name | Size | Volume Type | Attached to                          |\n+-----+----------------+--------------+------+-------------+--------------------------------------+\n| 306 | in-use         | ev-00000160  | 8    | None        | 6e97906c-6122-408a-b151-7d23aaae089b |\n| 311 | in-use         | ev-00000161  | 10   | None        | 6e97906c-6122-408a-b151-7d23aaae089b |\n\nHere's the \"show\" command for the vm :\n\n+-------------------------------------+-------------------------------------------------------------+\n| Property                            | Value                                                       |\n+-------------------------------------+-------------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                      |\n| OS-EXT-SRV-ATTR:host                | DC2-r9-23vms                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                                        |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000003f8                                           |\n| OS-EXT-STS:power_state              | 0                                                           |\n| OS-EXT-STS:task_state               | deleting                                                    |\n| OS-EXT-STS:vm_state                 | shutoff                                                     |\n| accessIPv4                          |                                                             |\n| accessIPv6                          |                                                             |\n| config_drive                        |                                                             |\n| created                             | 2012-11-15T18:13:16Z                                        |\n| flavor                              | gz.micro (1)                                                |\n| hostId                              | 1251f2dc1db48c4c0692d5dd7152312461e83536014d81da5c8c8a27    |\n| id                                  | 6e97906c-6122-408a-b151-7d23aaae089b                        |\n| image                               | ami_PRECISE_20120927 (f76cb3f7-7e83-4fb1-a189-611f6a2e9eef) |\n| key_name                            |                                                             |\n| metadata                            | {u'region': u'DC2_r9', u'name': u'e-000004dc'}              |\n| name                                | e-000004dc                                                  |\n| private network                     | 172.16.76.218                                               |\n| status                              | SHUTOFF                                                     |\n| tenant_id                           | 7ca5bf73c54f4647b689b01c2a4f0bde                            |\n| updated                             | 2012-11-16T14:56:58Z                                        |\n| user_id                             | 5744a1b442e8400ca3da9e85845045e4                            |\n+-------------------------------------+-------------------------------------------------------------+\n\nAnd here are the nova-compute.log for the operation that stacks:\n\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [-] received {u'_context_roles': [u'asoc_arquitectura'], u'_context_request_id': u'req-ed637bc2-9e77-4564-bb27-27658cc699db', u'_context_read_deleted': u'no', u'args': {u'instance_uuid': u'6e97906c-6122-408a-b151-7d23aaae089b'}, u'_context_auth_token': '<SANITIZED>', u'_context_is_admin': False, u'_context_project_id': u'7ca5bf73c54f4647b689b01c2a4f0bde', u'_context_timestamp': u'2012-11-16T14:46:06.546864', u'_context_user_id': u'5744a1b442e8400ca3da9e85845045e4', u'method': u'terminate_instance', u'_context_remote_address': u'172.16.150.76'} from (pid=25044) _safe_log /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/common.py:160\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] unpacked context: {'user_id': u'5744a1b442e8400ca3da9e85845045e4', 'roles': [u'asoc_arquitectura'], 'timestamp': '2012-11-16T14:46:06.546864', 'auth_token': '<SANITIZED>', 'remote_address': u'172.16.150.76', 'is_admin': False, 'request_id': u'req-ed637bc2-9e77-4564-bb27-27658cc699db', 'project_id': u'7ca5bf73c54f4647b689b01c2a4f0bde', 'read_deleted': u'no'} from (pid=25044) _safe_log /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/common.py:160\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: decorating: |<function terminate_instance at 0x1d56de8>|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x7f6da2a1f610>| |<nova.rpc.amqp.RpcContext object at 0x407d5d0>| |6e97906c-6122-408a-b151-7d23aaae089b|\n2012-11-16 09:46:33 DEBUG nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] instance 6e97906c-6122-408a-b151-7d23aaae089b: getting locked state from (pid=25044) get_lock /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py:1626\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: locked: |False|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: admin: |False|\n2012-11-16 09:46:33 INFO nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] check_instance_lock: executing: |<function terminate_instance at 0x1d56de8>|\n2012-11-16 09:46:33 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"6e97906c-6122-408a-b151-7d23aaae089b\" for method \"do_terminate_instance\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:33 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"6e97906c-6122-408a-b151-7d23aaae089b\" for method \"do_terminate_instance\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:33 AUDIT nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Terminating instance\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Making asynchronous call on network ... from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:326\n2012-11-16 09:46:33 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] MSG_ID is a60c1d4fb94344b3a8a4ded3ff83ed86 from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:329\n2012-11-16 09:46:33 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003f8/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:33 DEBUG nova.virt.libvirt.connection [-] skipping None since it looks like volume from (pid=25044) get_instance_disk_info /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py:2287\n2012-11-16 09:46:33 DEBUG nova.virt.libvirt.connection [-] skipping None since it looks like volume from (pid=25044) get_instance_disk_info /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py:2287\n2012-11-16 09:46:34 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000385/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:34 DEBUG nova.compute.manager [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Deallocating network for instance from (pid=25044) _deallocate_network /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py:641\n2012-11-16 09:46:34 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Making asynchronous call on network ... from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:326\n2012-11-16 09:46:34 DEBUG nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] MSG_ID is 025d818087da436697458c520195300f from (pid=25044) multicall /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py:329\n2012-11-16 09:46:34 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000385/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:35 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000308/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:35 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000308/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:36 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000009/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:935\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got file lock \"iptables\" for method \"apply\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:942\n2012-11-16 09:46:38 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-save -t filter from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:39 INFO nova.virt.libvirt.connection [-] [instance: 6e97906c-6122-408a-b151-7d23aaae089b] Instance destroyed successfully.\n2012-11-16 09:46:39 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000009/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:39 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-restore from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000002fd/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000002fd/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:40 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-save -t nat from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000161/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iptables-restore from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:41 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-00000161/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:42 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000000b9/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:42 DEBUG nova.network.linux_net [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] IPTablesManager.apply completed with success from (pid=25044) apply /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/network/linux_net.py:335\n2012-11-16 09:46:44 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:44 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:46:53 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:54 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000000b9/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:54 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--op', 'update', '-n', 'node.startup', '-v', 'manual'): stdout= stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:54 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --logout from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003fc/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--logout',): stdout=Logging out of session [sid: 4, target: iqn.1992-08.com.netapp:sn.1574861693, portal: 10.1.1.160,3260]\nLogout of [sid: 4, target: iqn.1992-08.com.netapp:sn.1574861693, portal: 10.1.1.160,3260]: successful\n stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:55 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op delete from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:55 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-000003fc/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:56 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-0000010d/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:46:56 DEBUG nova.virt.libvirt.volume [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] iscsiadm ('--op', 'delete'): stdout= stderr= from (pid=25044) _run_iscsiadm /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py:112\n2012-11-16 09:46:56 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Attempting to grab semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:927\n2012-11-16 09:46:56 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=25044) inner /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:931\n2012-11-16 09:47:06 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Running cmd (subprocess): sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:47:06 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img info /var/lib/nova/instances/instance-0000010d/disk from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:219\n2012-11-16 09:47:06 DEBUG nova.utils [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Result was 255 from (pid=25044) execute /usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py:235\n2012-11-16 09:47:06 ERROR nova.rpc.amqp [req-ed637bc2-9e77-4564-bb27-27658cc699db 5744a1b442e8400ca3da9e85845045e4 7ca5bf73c54f4647b689b01c2a4f0bde] Exception during message handling\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/rpc/amqp.py\", line 253, in _process_data\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/exception.py\", line 114, in wrapped\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 159, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     function(self, context, instance_uuid, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 183, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     sys.exc_info())\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self.gen.next()\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 772, in terminate_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     do_terminate_instance()\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 945, in inner\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 765, in do_terminate_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._delete_instance(context, instance)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 743, in _delete_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._shutdown_instance(context, instance, 'Terminating')\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/compute/manager.py\", line 712, in _shutdown_instance\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     block_device_info)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 487, in destroy\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     cleanup=True)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 479, in _destroy\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     mount_device)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/connection.py\", line 525, in volume_driver_method\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return method(connection_info, *args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 945, in inner\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 204, in disconnect_volume\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     self._iscsiadm_update(iscsi_properties, \"node.startup\", \"manual\")\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 118, in _iscsiadm_update\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     return self._run_iscsiadm(iscsi_properties, iscsi_command)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/virt/libvirt/volume.py\", line 110, in _run_iscsiadm\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     check_exit_code=check_exit_code)\n2012-11-16 09:47:06 TRACE nova.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.1.3-py2.7.egg/nova/utils.py\", line 242, in execute\n2012-11-16 09:47:06 TRACE nova.rpc.amqp     cmd=' '.join(cmd))\n2012-11-16 09:47:06 TRACE nova.rpc.amqp ProcessExecutionError: Unexpected error while running command.\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Command: sudo nova-rootwrap iscsiadm -m node -T iqn.1992-08.com.netapp:sn.1574861693 -p 10.1.1.160:3260 --op update -n node.startup -v manual\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Exit code: 255\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Stdout: ''\n2012-11-16 09:47:06 TRACE nova.rpc.amqp Stderr: 'iscsiadm: no records found!\\n'\n2012-11-16 09:47:06 TRACE nova.rpc.amqp", 
            "date_created": "2012-11-16 16:01:05.536830+00:00", 
            "author": "https://api.launchpad.net/1.0/~alejandro-comisario"
        }, 
        {
            "content": "For us, this is very critical", 
            "date_created": "2012-11-16 16:10:43.979869+00:00", 
            "author": "https://api.launchpad.net/1.0/~alejandro-comisario"
        }, 
        {
            "content": "Marked as Invalid for master since the code is not even there anymore (moved to Cinder).\n\nI nominated the bug for the Essex series for the stable-maint-essex team", 
            "date_created": "2012-11-16 16:29:26.408176+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "Oops, this particular code hasn't moved, but it has certainly changed a lot since Essex.  Feel free to ping this bug if you reproduce on master and we can change the status.", 
            "date_created": "2012-11-16 16:30:39.881197+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "Actually, i dont want to reporduce it in master, since we are not planing to try Grizzly till the first milestones, and since we are running Essex into production, we would like to get this fixed in essex.\n\nSo, how can i do get this reviewed in essex release ?\nI Know there's the 2012.1.4 release, but i dont know if this release fixes this issue.", 
            "date_created": "2012-11-16 16:51:20.742968+00:00", 
            "author": "https://api.launchpad.net/1.0/~alejandro-comisario"
        }, 
        {
            "content": "I'll take a look to see if I can reproduce this in our Essex environments and propose a fix accordingly.", 
            "date_created": "2012-11-16 22:47:46.256547+00:00", 
            "author": "https://api.launchpad.net/1.0/~rkhardalian"
        }, 
        {
            "content": "Fix proposed to branch: stable/essex\nReview: https://review.openstack.org/16356", 
            "date_created": "2012-11-17 01:06:14.300568+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "I don't know why you're getting a duplicate disconnect.  I wasn't able to reproduce your issue in our environments specifically because we already had the proposed patch applied in our local stable tree.\n\nThe patch (from Dan Smith) is a backport from what went into master some time back, which accepts 0 and 255 as exit codes for disconnect operations.  It will mitigate this problem.  ", 
            "date_created": "2012-11-17 01:08:51.035407+00:00", 
            "author": "https://api.launchpad.net/1.0/~rkhardalian"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/16356\nCommitted: http://github.com/openstack/nova/commit/bd1024194a384bbc2f332e74587b577d7b79c539\nSubmitter: Jenkins\nBranch:    stable/essex\n\ncommit bd1024194a384bbc2f332e74587b577d7b79c539\nAuthor: Dan Smith <email address hidden>\nDate:   Mon Jul 9 13:37:01 2012 -0700\n\n    When deleting an instance, avoid freakout if iscsi device is gone\n    \n    It's fairly easy to get into a state where an instance is not running,\n    the iscsi infrastructure has been torn down, and the instance cannot\n    be deleted because the iscsi device cannot be successfully removed.\n    This patch ignores the associated return value for that scenario and\n    marches forward in the teardown process.\n    \n    Fixes bug 1079745 (Cherry picked for Essex)\n    \n    Change-Id: Ib28790892eebe341ac10a92250cf872605fefe9b\n", 
            "date_created": "2012-12-02 00:32:42.155336+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "The fix above will ignore retcode 0 and 255. My 'isciadm' is returning 21.\n\n2012-12-11 10:39:04 TRACE nova.rpc.amqp   File \"/opt/common-python/lib/python2.6/site-packages/nova/virt/libvirt/volume.py\", line 221, in disconnect_volume\n2012-12-11 10:39:04 TRACE nova.rpc.amqp     check_exit_code=[0, 255])\n2012-12-11 10:39:04 TRACE nova.rpc.amqp   File \"/opt/common-python/lib/python2.6/site-packages/nova/virt/libvirt/volume.py\", line 134, in _iscsiadm_update\n2012-12-11 10:39:04 TRACE nova.rpc.amqp     return self._run_iscsiadm(iscsi_properties, iscsi_command, **kwargs)\n2012-12-11 10:39:04 TRACE nova.rpc.amqp   File \"/opt/common-python/lib/python2.6/site-packages/nova/virt/libvirt/volume.py\", line 125, in _run_iscsiadm\n2012-12-11 10:39:04 TRACE nova.rpc.amqp     check_exit_code=check_exit_code)\n2012-12-11 10:39:04 TRACE nova.rpc.amqp   File \"/opt/common-python/lib/python2.6/site-packages/nova/utils.py\", line 243, in execute\n2012-12-11 10:39:04 TRACE nova.rpc.amqp     cmd=' '.join(cmd))\n2012-12-11 10:39:04 TRACE nova.rpc.amqp ProcessExecutionError: Unexpected error while running command.\n2012-12-11 10:39:04 TRACE nova.rpc.amqp Command: sudo /opt/openstack/bin/nova-rootwrap iscsiadm -m node -T iqn.2010-10.org.openstack:vol-00000385 -p 172.30.0.232:3260 --op update -n node.startup -v manual\n2012-12-11 10:39:04 TRACE nova.rpc.amqp Exit code: 21\n2012-12-11 10:39:04 TRACE nova.rpc.amqp Stdout: ''\n2012-12-11 10:39:04 TRACE nova.rpc.amqp Stderr: 'iscsiadm: No records found\\n'\n2012-12-11 10:39:04 TRACE nova.rpc.amqp \n\nman iscsiadm\n\n       21     ISCSI_ERR_NO_OBJS_FOUND - no records/targets/sessions/portals found to execute operation on.\n\n# rpm -qf /sbin/iscsiadm\niscsi-initiator-utils-6.2.0.872-41.el6.x86_64\n\nWorkaround:\nEither change [0, 255] to [0, 21, 255] or ignore everything by changing it to range(256).\n", 
            "date_created": "2012-12-11 10:22:38.097738+00:00", 
            "author": "https://api.launchpad.net/1.0/~zarnovican"
        }, 
        {
            "content": "Hello Alejandro, or anyone else affected,\n\nAccepted nova into precise-proposed. The package will build now and be available at http://launchpad.net/ubuntu/+source/nova/2012.1.3+stable-20130423-e52e6912-0ubuntu1 in a few hours, and then in the -proposed repository.\n\nPlease help us by testing this new package.  See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed.  Your feedback will aid us getting this update out to other Ubuntu users.\n\nIf this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-needed to verification-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-failed.  In either case, details of your testing will help us make a better decision.\n\nFurther information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification .  Thank you in advance!", 
            "date_created": "2013-05-09 23:15:37.561734+00:00", 
            "author": "https://api.launchpad.net/1.0/~brian-murray"
        }, 
        {
            "content": "Please find the attached test log from the Ubuntu Server Team's CI infrastructure.  As part of the verification process for this bug, Nova has been deployed and configured across multiple nodes using precise-proposed as an installation source.  After successful bring-up and configuration of the cluster, a number of exercises and smoke tests have be invoked to ensure the updated package did not introduce any regressions. A number of test iterations were carried out to catch any possible transient errors.\n\nPlease Note the list of installed packages at the top and bottom of the report.\n\nFor records of upstream test coverage of this update, please see the Jenkins links in the comments of the relevant  upstream code-review(s):\n\nStable review: https://review.openstack.org/16356\n\nAs per the provisional Micro Release Exception granted to this package by the Technical Board, we hope this contributes toward verification of this update.", 
            "date_created": "2013-05-16 07:30:30.591478+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Test coverage log.", 
            "date_created": "2013-05-16 07:30:34.884651+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Please find the attached test log from the Ubuntu Server Team's CI infrastructure.  As part of the verification process for this bug, Nova has been deployed and configured across multiple nodes using precise-proposed as an installation source.  After successful bring-up and configuration of the cluster, a number of exercises and smoke tests have be invoked to ensure the updated package did not introduce any regressions. A number of test iterations were carried out to catch any possible transient errors.\n\nPlease Note the list of installed packages at the top and bottom of the report.\n\nFor records of upstream test coverage of this update, please see the Jenkins links in the comments of the relevant  upstream code-review(s):\n\nStable review: https://review.openstack.org/16356\n\nAs per the provisional Micro Release Exception granted to this package by the Technical Board, we hope this contributes toward verification of this update.", 
            "date_created": "2013-05-16 07:32:50.653051+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "Test coverage log.", 
            "date_created": "2013-05-16 07:32:53.982673+00:00", 
            "author": "https://api.launchpad.net/1.0/~yolanda.robla"
        }, 
        {
            "content": "This bug was fixed in the package nova - 2012.1.3+stable-20130423-e52e6912-0ubuntu1\n\n---------------\nnova (2012.1.3+stable-20130423-e52e6912-0ubuntu1) precise-proposed; urgency=low\n\n  * Resynchronize with stable/essex (e52e6912) (LP: #1089488):\n    - [48e81f1] VNC proxy can be made to connect to wrong VM LP: 1125378\n    - [3bf5a58] snat rule too broad for some network configurations LP: 1048765\n    - [efaacda] DOS by allocating all fixed ips LP: 1125468\n    - [b683ced] Add nosehtmloutput as a test dependency.\n    - [45274c8] Nova unit tests not running, but still passing for stable/essex\n      LP: 1132835\n    - [e02b459] vnc unit-test fixes\n    - [87361d3] Jenkins jobs fail because of incompatibility between sqlalchemy-\n      migrate and the newest sqlalchemy-0.8.0b1 (LP: #1073569)\n    - [e98928c] VNC proxy can be made to connect to wrong VM LP: 1125378\n    - [c0a10db] DoS through XML entity expansion (CVE-2013-1664) LP: 1100282\n    - [243d516] No authentication on block device used for os-volume_boot\n      LP: 1069904\n    - [80fefe5] use_single_default_gateway does not function correctly\n      (LP: #1075859)\n    - [bd10241] Essex 2012.1.3 : Error deleting instance with 2 Nova Volumes\n      attached (LP: #1079745)\n    - [86a5937] do_refresh_security_group_rules in nova.virt.firewall is very\n      slow (LP: #1062314)\n    - [ae9c5f4] deallocate_fixed_ip attempts to update an already deleted\n      fixed_ip (LP: #1017633)\n    - [20f98c5] failed to allocate fixed ip because old deleted one exists\n      (LP: #996482)\n    - [75f6922] snapshot stays in saving state if the vm base image is deleted\n      (LP: #921774)\n    - [1076699] lock files may be removed in error dues to permissions issues\n      (LP: #1051924)\n    - [40c5e94] ensure_default_security_group() does not call sgh (LP: #1050982)\n    - [4eebe76] At termination, LXC rootfs is not always unmounted before\n      rmtree() is called (LP: #1046313)\n    - [47dabb3] Heavily loaded nova-compute instances don't sent reports\n      frequently enough (LP: #1045152)\n    - [b375b4f] When attach volume lost attach when node restart (LP: #1004791)\n    - [4ac2dcc] nova usage-list returns  wrong usage (LP: #1043999)\n    - [014fcbc] Bridge port's hairpin mode not set after resuming a machine\n      (LP: #1040537)\n    - [2f35f8e] Nova flavor ephemeral space size reported incorrectly\n      (LP: #1026210)\n  * Dropped, superseeded by new snapshot:\n    - debian/patches/CVE-2013-0335.patch: [48e81f1]\n    - debian/patches/CVE-2013-1838.patch: [efaacda]\n    - debian/patches/CVE-2013-1664.patch: [c0a10db]\n    - debian/patches/CVE-2013-0208.patch: [243d516]\n -- Yolanda <email address hidden>   Mon, 22 Apr 2013 12:37:08 +0200", 
            "date_created": "2013-05-16 17:27:32.658916+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }, 
        {
            "content": "The verification of this Stable Release Update has completed successfully and the package has now been released to -updates.  Subsequently, the Ubuntu Stable Release Updates Team is being unsubscribed and will not receive messages about this bug report.  In the event that you encounter a regression using the package from -updates please report a new bug using ubuntu-bug and tag the bug report regression-update so we can easily find any regresssions.", 
            "date_created": "2013-05-16 17:29:36.505447+00:00", 
            "author": "https://api.launchpad.net/1.0/~kitterman"
        }
    ], 
    "closed": "2012-11-16 16:28:28.237899+00:00"
}