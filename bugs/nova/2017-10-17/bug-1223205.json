{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 12:11:16.461896+00:00", 
    "description": "Try get console as below:\n\ncurl -i http://cloudcontroller:8774/v3/servers/570a0058-3094-4201-b313-a337a984f773/consoles -X GET\n\n\nThen get error in nova-api as below:\n\n2013-09-10 14:59:46.107 ERROR nova.api.openstack.extensions [req-8f981cd0-96ef-4c95-b2b5-2d42a666deed admin admin] Unexpected exception in API method\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 469, in wrapped\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/consoles.py\", line 98, in index\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     for console in consoles])\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/consoles.py\", line 30, in _translate_keys\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     pool = cons['pool']\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/openstack/common/db/sqlalchemy/models.py\", line 59, in __getitem__\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return getattr(self, key)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/attributes.py\", line 168, in __get__\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return self.impl.get(instance_state(instance),dict_)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/attributes.py\", line 453, in get\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     value = self.callable_(state, passive)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/strategies.py\", line 481, in _load_for_state\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     (mapperutil.state_str(state), self.key)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions DetachedInstanceError: Parent instance <Console at 0x635d5d0> is not bound to a Session; lazy load operation of attribute 'pool' cannot proceed\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions", 
    "tags": [
        "console"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1223205", 
    "owner": "https://api.launchpad.net/1.0/~xuhj", 
    "id": 1223205, 
    "index": 3570, 
    "openned": "2013-09-10 07:01:31.436008+00:00", 
    "created": "2013-09-10 07:01:31.436008+00:00", 
    "title": "get console failed because can't load attribute 'pool'", 
    "comments": [
        {
            "content": "Try get console as below:\n\ncurl -i http://cloudcontroller:8774/v3/servers/570a0058-3094-4201-b313-a337a984f773/consoles -X GET\n\n\nThen get error in nova-api as below:\n\n2013-09-10 14:59:46.107 ERROR nova.api.openstack.extensions [req-8f981cd0-96ef-4c95-b2b5-2d42a666deed admin admin] Unexpected exception in API method\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 469, in wrapped\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/consoles.py\", line 98, in index\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     for console in consoles])\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/consoles.py\", line 30, in _translate_keys\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     pool = cons['pool']\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/openstack/common/db/sqlalchemy/models.py\", line 59, in __getitem__\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return getattr(self, key)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/attributes.py\", line 168, in __get__\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     return self.impl.get(instance_state(instance),dict_)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/attributes.py\", line 453, in get\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     value = self.callable_(state, passive)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/strategies.py\", line 481, in _load_for_state\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions     (mapperutil.state_str(state), self.key)\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions DetachedInstanceError: Parent instance <Console at 0x635d5d0> is not bound to a Session; lazy load operation of attribute 'pool' cannot proceed\n2013-09-10 14:59:46.107 TRACE nova.api.openstack.extensions", 
            "date_created": "2013-09-10 07:01:31.436008+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/45820", 
            "date_created": "2013-09-10 07:05:01.924918+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/45820\nCommitted: http://github.com/openstack/nova/commit/18f417c14a9313d90918285b22263623ba0c7e22\nSubmitter: Jenkins\nBranch:    master\n\ncommit 18f417c14a9313d90918285b22263623ba0c7e22\nAuthor: He Jie Xu <email address hidden>\nDate:   Tue Sep 10 14:59:08 2013 +0800\n\n    Fix console db can't load attribute pool\n    \n    Lists consoles failed when populate console_type from console\n    db's pool attribute. The reason was db api console_get_all_by_instance\n    didn't join with pool. So add param 'columns_to_join' for db api, and\n    join pool attribute when lists consoles.\n    \n    Change-Id: I18b44860270a401c55cf02b4334b973fbf357b03\n    Closes-bug: #1223205\n", 
            "date_created": "2013-09-29 02:22:30.009323+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-10-03 07:54:29.252301+00:00"
}