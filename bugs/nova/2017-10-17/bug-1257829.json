{
    "status": "Fix Released", 
    "last_updated": "2014-06-13 05:25:43.996792+00:00", 
    "description": "Location: openstack.common.imageutils.QemuImgInfo\nMethod: __init__\nError: line 45, self.encryption = details.get('encryption')\n\nThe parsing of the encryption field for qemu-img commands does not work. The key used to index the details dictionary for encryption information, 'encryption', does not match the key generated by qemu-img, 'encrypted.' As a result, the encryption field is always 'None', regardless of the image's encryption status.\n\nExample call to 'qemu-img info':\n$ qemu-img info encrypted_disk.qcow2\nDisk image 'encrypted_disk.qcow2' is encrypted.\npassword: \nimage: encrypted_disk.qcow2\nfile format: qcow2\nvirtual size: 16G (17179869184 bytes)\ndisk size: 136K\nencrypted: yes\ncluster_size: 65536\nbacking file: debian_squeeze_i386_standard.qcow2 (actual path: debian_squeeze_i386_standard.qcow2)\n\nProposed Fix:\nSimply change the key used to index the encryption information.\n\nself.encrypted = details.get('encrypted')\n\nSince the fields in __init__ seem to be named to match the keys used to index the corresponding information, I would also propose changing the attribute from self.encryption to self.encrypted, and updating any references to it wherever appropriate.", 
    "tags": [
        "cinder", 
        "encryption", 
        "libvirt", 
        "nova", 
        "oslo", 
        "qemu"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1257829", 
    "owner": "https://api.launchpad.net/1.0/~peter-hamilton", 
    "id": 1257829, 
    "index": 5623, 
    "openned": "2013-12-04 16:56:12.380449+00:00", 
    "created": "2013-12-04 16:56:12.380449+00:00", 
    "title": "Misspelled encryption field in QemuImgInfo", 
    "comments": [
        {
            "content": "Location: openstack.common.imageutils.QemuImgInfo\nMethod: __init__\nError: line 45, self.encryption = details.get('encryption')\n\nThe parsing of the encryption field for qemu-img commands does not work. The key used to index the details dictionary for encryption information, 'encryption', does not match the key generated by qemu-img, 'encrypted.' As a result, the encryption field is always 'None', regardless of the image's encryption status.\n\nExample call to 'qemu-img info':\n$ qemu-img info encrypted_disk.qcow2\nDisk image 'encrypted_disk.qcow2' is encrypted.\npassword: \nimage: encrypted_disk.qcow2\nfile format: qcow2\nvirtual size: 16G (17179869184 bytes)\ndisk size: 136K\nencrypted: yes\ncluster_size: 65536\nbacking file: debian_squeeze_i386_standard.qcow2 (actual path: debian_squeeze_i386_standard.qcow2)\n\nProposed Fix:\nSimply change the key used to index the encryption information.\n\nself.encrypted = details.get('encrypted')\n\nSince the fields in __init__ seem to be named to match the keys used to index the corresponding information, I would also propose changing the attribute from self.encryption to self.encrypted, and updating any references to it wherever appropriate.", 
            "date_created": "2013-12-04 16:56:12.380449+00:00", 
            "author": "https://api.launchpad.net/1.0/~peter-hamilton"
        }, 
        {
            "content": "For some reason (perhaps because this bug spans projects) the bug patch I've submitted for this has not been linked.\n\nhttps://review.openstack.org/#/c/60500/\n\nI'm not sure what the process is for cross-project bug fixes, but once the nova patch is approved I plan on submitting the same for cinder. I tagged oslo in this bug report since the bug affects openstack.common, but I don't know if anything different needs to be done to account for an oslo bug fix.", 
            "date_created": "2013-12-12 13:20:01.946761+00:00", 
            "author": "https://api.launchpad.net/1.0/~peter-hamilton"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/61877", 
            "date_created": "2013-12-12 21:35:49.758318+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/61877\nCommitted: https://git.openstack.org/cgit/openstack/oslo-incubator/commit/?id=aad179d4f98bfde4d1816ad9321fecf28d993dbe\nSubmitter: Jenkins\nBranch:    master\n\ncommit aad179d4f98bfde4d1816ad9321fecf28d993dbe\nAuthor: Peter Hamilton <email address hidden>\nDate:   Thu Dec 12 16:30:01 2013 -0500\n\n    Fixing misspelled encryption key in QemuImgInfo\n    \n    This modification fixes Bug #1257829, specifically addressing the use\n    of a misspelled 'encryption' key to retrieve image encryption\n    information returned by calls to the 'qemu-img' command. In addition\n    to fixing the key ('encryption' -> 'encrypted'), the QemuImgInfo class\n    attribute has been renamed to reflect the change and the encryption\n    information added to the string representation of the class. Test\n    cases verifying the parsing of the encryption information are also\n    included.\n    \n    Change-Id: Ice087d95c52506dec735921c6e9477caf082bf7e\n    Closes-Bug: #1257829\n", 
            "date_created": "2013-12-13 00:14:46.858061+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/62071", 
            "date_created": "2013-12-13 19:51:15.960708+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/66246", 
            "date_created": "2014-01-13 01:48:13.166352+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/66246\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=9a8d41e0132d4676b611f940de552dd450b7cac7\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9a8d41e0132d4676b611f940de552dd450b7cac7\nAuthor: Zhongyue Luo <email address hidden>\nDate:   Mon Jan 13 09:44:56 2014 +0800\n\n    Sync oslo imageutils, strutils to cinder\n    \n    Changes in imageutils:\n    ===============================\n    bec3a5e Implements SI/IEC unit system conversion to bytes\n    8b2b0b7 Use hacking import_exceptions for gettextutils._\n    aad179d Fixing misspelled encryption key in QemuImgInfo\n    12bcdb7 Remove vim header\n    2bd46eb Refactors byte size extraction logic\n    \n    Changes in strutils:\n    ====================\n    bec3a5e Implements SI/IEC unit system conversion to bytes\n    e53fe85 strutils bool_from_string, allow specified default\n    8b2b0b7 Use hacking import_exceptions for gettextutils._\n    84d461e Fix a bug in safe_encode where it returns a bytes object in py3\n    12bcdb7 Remove vim header\n    3970d46 Fix typos in oslo\n    1a2df89 Enable H302 hacking check\n    67bd769 python3: Fix traceback while running python3.\n    b0c51ec Refactors to_bytes\n    \n    Change-Id: I765bcd40f959162874bfda412b69e673c6e5f732\n    Related-bug: #1189635\n    Related-bug: #1193765\n    Related-Bug: #1257829\n", 
            "date_created": "2014-02-24 18:07:31.989805+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/66242\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=4f91f1d116a2bd68cca388aee8138b754c9cd55d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 4f91f1d116a2bd68cca388aee8138b754c9cd55d\nAuthor: Zhongyue Luo <email address hidden>\nDate:   Mon Jan 13 09:18:52 2014 +0800\n\n    Sync oslo imageutils, strutils to Nova\n    \n    Changes in imageutils:\n    ===============================\n    b455fac Enable decimal value input in imageutils.QemuImgInfo\n    bec3a5e Implements SI/IEC unit system conversion to bytes\n    8b2b0b7 Use hacking import_exceptions for gettextutils._\n    aad179d Fixing misspelled encryption key in QemuImgInfo\n    12bcdb7 Remove vim header\n    2bd46eb Refactors byte size extraction logic\n    \n    Changes in strutils:\n    ====================\n    bec3a5e Implements SI/IEC unit system conversion to bytes\n    e53fe85 strutils bool_from_string, allow specified default\n    8b2b0b7 Use hacking import_exceptions for gettextutils._\n    84d461e Fix a bug in safe_encode where it returns a bytes object in py3\n    12bcdb7 Remove vim header\n    3970d46 Fix typos in oslo\n    1a2df89 Enable H302 hacking check\n    67bd769 python3: Fix traceback while running python3.\n    b0c51ec Refactors to_bytes\n    \n    Change-Id: I3e887756af37823dc6486d1496222825ddc20f0c\n    Related-bug: #1189635\n    Related-bug: #1193765\n    Related-Bug: #1257829\n", 
            "date_created": "2014-04-09 03:09:43.642260+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-06-13 05:25:41.601568+00:00"
}