{
    "status": "Expired", 
    "last_updated": "2016-07-05 09:45:36.230630+00:00", 
    "description": "tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON fails sporadically.\n\nSee:  http://logs.openstack.org/66/54966/2/check/check-tempest-devstack-vm-full/d611ed0/console.html\n\n2013-11-19 22:24:52.379 | ======================================================================\n2013-11-19 22:24:52.380 | FAIL: setUpClass (tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON)\n2013-11-19 22:24:52.380 | setUpClass (tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON)\n2013-11-19 22:24:52.380 | ----------------------------------------------------------------------\n2013-11-19 22:24:52.380 | _StringException: Traceback (most recent call last):\n2013-11-19 22:24:52.380 |   File \"tempest/api/compute/servers/test_servers_negative.py\", line 46, in setUpClass\n2013-11-19 22:24:52.380 |     resp, server = cls.create_test_server(wait_until='ACTIVE')\n2013-11-19 22:24:52.381 |   File \"tempest/api/compute/base.py\", line 118, in create_test_server\n2013-11-19 22:24:52.381 |     server['id'], kwargs['wait_until'])\n2013-11-19 22:24:52.381 |   File \"tempest/services/compute/json/servers_client.py\", line 160, in wait_for_server_status\n2013-11-19 22:24:52.381 |     extra_timeout=extra_timeout)\n2013-11-19 22:24:52.381 |   File \"tempest/common/waiters.py\", line 73, in wait_for_server_status\n2013-11-19 22:24:52.381 |     raise exceptions.BuildErrorException(server_id=server_id)\n2013-11-19 22:24:52.381 | BuildErrorException: Server 62bfeebd-8878-477f-9eac-a8b21ec5ac26 failed to build and is in ERROR status", 
    "tags": [
        "libvirt", 
        "testing"
    ], 
    "importance": "Undecided", 
    "heat": 24, 
    "link": "https://bugs.launchpad.net/nova/+bug/1252947", 
    "owner": "None", 
    "id": 1252947, 
    "index": 5566, 
    "openned": "2013-12-12 21:30:04.767012+00:00", 
    "created": "2013-11-20 04:15:27.132471+00:00", 
    "title": "libvirtError: Cannot recv data: Connection reset by peer", 
    "comments": [
        {
            "content": "tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON fails sporadically.\n\nSee:  http://logs.openstack.org/66/54966/2/check/check-tempest-devstack-vm-full/d611ed0/console.html\n\n2013-11-19 22:24:52.379 | ======================================================================\n2013-11-19 22:24:52.380 | FAIL: setUpClass (tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON)\n2013-11-19 22:24:52.380 | setUpClass (tempest.api.compute.servers.test_servers_negative.ServersNegativeTestJSON)\n2013-11-19 22:24:52.380 | ----------------------------------------------------------------------\n2013-11-19 22:24:52.380 | _StringException: Traceback (most recent call last):\n2013-11-19 22:24:52.380 |   File \"tempest/api/compute/servers/test_servers_negative.py\", line 46, in setUpClass\n2013-11-19 22:24:52.380 |     resp, server = cls.create_test_server(wait_until='ACTIVE')\n2013-11-19 22:24:52.381 |   File \"tempest/api/compute/base.py\", line 118, in create_test_server\n2013-11-19 22:24:52.381 |     server['id'], kwargs['wait_until'])\n2013-11-19 22:24:52.381 |   File \"tempest/services/compute/json/servers_client.py\", line 160, in wait_for_server_status\n2013-11-19 22:24:52.381 |     extra_timeout=extra_timeout)\n2013-11-19 22:24:52.381 |   File \"tempest/common/waiters.py\", line 73, in wait_for_server_status\n2013-11-19 22:24:52.381 |     raise exceptions.BuildErrorException(server_id=server_id)\n2013-11-19 22:24:52.381 | BuildErrorException: Server 62bfeebd-8878-477f-9eac-a8b21ec5ac26 failed to build and is in ERROR status", 
            "date_created": "2013-11-20 04:15:27.132471+00:00", 
            "author": "https://api.launchpad.net/1.0/~peter-a-portante"
        }, 
        {
            "content": " tempest.api.compute.servers.test_list_servers_negative.ListServersNegativeTestJSON has also been reported to have leaked resources, see http://logs.openstack.org/67/59967/4/check/check-tempest-dsvm-postgres-full/54dadda/console.html\n\n\n2013-12-12 16:36:30.396 | OK (skipped=117)\n2013-12-12 16:36:30.397 | ___________________________________ summary ____________________________________\n2013-12-12 16:36:30.400 |   full: commands succeeded\n2013-12-12 16:36:30.404 |   congratulations :)\n2013-12-12 16:36:30.406 | Checking logs...\n2013-12-12 16:36:31.982 | Log File: n-api\n2013-12-12 16:36:31.982 | 2013-12-12 16:23:47.368 ERROR nova.api.openstack [req-a60466bb-2b71-4df5-9223-601caa1a9e98 ServersNegativeTestJSON-tempest-1555050594-user ServersNegativeTestJSON-tempest-1555050594-t2013-12-12 16:23:47.377 24881 DEBUG routes.middleware [-] Route path: '/servers/:(id)', defaults: {'action': u'show', 'controller': <nova.api.openstack.wsgi.Resource object at 0x3ad5fd0>} __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-12-12 16:36:31.983 | \n2013-12-12 16:36:37.617 | Logs have errors\n2013-12-12 16:36:37.618 | FAILED\n2013-12-12 16:38:58.566 | Process leaked file descriptors. See http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build for more information\n2013-12-12 16:38:58.704 | Build step 'Execute shell' marked build as failure", 
            "date_created": "2013-12-12 17:14:24.442676+00:00", 
            "author": "https://api.launchpad.net/1.0/~oliver-leahy-l"
        }, 
        {
            "content": "There is one hit in the last 2 weeks in the gate on this:\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiRkFJTDogc2V0VXBDbGFzcyAodGVtcGVzdC5hcGkuY29tcHV0ZS5zZXJ2ZXJzLnRlc3Rfc2VydmVyc19uZWdhdGl2ZS5TZXJ2ZXJzTmVnYXRpdmVUZXN0SlNPTilcIiBBTkQgZmlsZW5hbWU6XCJjb25zb2xlLmh0bWxcIiBBTkQgYnVpbGRfcXVldWU6Z2F0ZSIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiYWxsIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTM5MDg0MTE2ODkyNX0=\n\nAnd that one run has 58 failures, so guessing something snowballed it.\n\nhttp://logs.openstack.org/49/55449/14/gate/gate-tempest-dsvm-full/7154785/console.html.gz\n\nGiven the age of this and the fact it's not showing up in the gate reliably makes me think we can close it.", 
            "date_created": "2014-01-27 16:51:06.894564+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Going back to the original logs, the instance does show up with the build failure in the nova scheduler logs here:\n\nhttp://logs.openstack.org/66/54966/2/check/check-tempest-devstack-vm-full/d611ed0/logs/screen-n-sch.txt.gz#_2013-11-19_22_06_38_278\n\nWhich then shows up in the n-cpu logs here:\n\nhttp://logs.openstack.org/66/54966/2/check/check-tempest-devstack-vm-full/d611ed0/logs/screen-n-cpu.txt.gz#_2013-11-19_22_06_33_235\n\n2013-11-19 22:06:33.235 ERROR nova.compute.manager [req-873bc199-a51e-4f4c-a085-3ae084c0d4dc ServersNegativeTestJSON-tempest-616305902-user ServersNegativeTestJSON-tempest-616305902-tenant] [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26] Instance failed to spawn\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26] Traceback (most recent call last):\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1436, in _spawn\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     block_device_info)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 2107, in spawn\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     block_device_info, context=context)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 3296, in _create_domain_and_network\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     self.firewall_driver.setup_basic_filtering(instance, network_info)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/virt/libvirt/firewall.py\", line 305, in setup_basic_filtering\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     self.nwfilter.setup_basic_filtering(instance, network_info)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/virt/libvirt/firewall.py\", line 134, in setup_basic_filtering\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     vif))\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/opt/stack/new/nova/nova/virt/libvirt/firewall.py\", line 249, in _define_filter\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     self._conn.nwfilterDefineXML(xml)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     rv = execute(f,*args,**kwargs)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     rv = meth(*args,**kwargs)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2651, in nwfilterDefineXML\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26]     if ret is None:raise libvirtError('virNWFilterDefineXML() failed', conn=self)\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26] libvirtError: Cannot recv data: Connection reset by peer\n2013-11-19 22:06:33.235 24775 TRACE nova.compute.manager [instance: 62bfeebd-8878-477f-9eac-a8b21ec5ac26] \n\nThis may be similar to bug 1255624, but the error is a bit different.\n\nHere is the query:\n\nmessage:\"libvirtError: Cannot recv data: Connection reset by peer\" AND filename:\"logs/screen-n-cpu.txt\"\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwibGlidmlydEVycm9yOiBDYW5ub3QgcmVjdiBkYXRhOiBDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXJcIiBBTkQgZmlsZW5hbWU6XCJsb2dzL3NjcmVlbi1uLWNwdS50eHRcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiYWxsIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTM5MDg0MTk1MjExNH0=\n\nThat has 3 hits in the last 2 weeks, so looks like it's still a problem.  I'm surprised there isn't an existing bug/query for this yet.", 
            "date_created": "2014-01-27 17:02:07.734703+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "No hits in logstash (we keep logs for 2 weeks), so marking as resolved.", 
            "date_created": "2014-03-31 17:04:41.751137+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "This is still around:\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwibGlidmlydEVycm9yOiBDYW5ub3QgcmVjdiBkYXRhOiBDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXJcIiBBTkQgdGFnczpcInNjcmVlbi1uLWNwdS50eHRcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7ImZyb20iOiIyMDE1LTA0LTIyVDIzOjA0OjQ3KzAwOjAwIiwidG8iOiIyMDE1LTA1LTA2VDIzOjA0OjQ3KzAwOjAwIiwidXNlcl9pbnRlcnZhbCI6IjAifSwic3RhbXAiOjE0MzA5NTM1NjIyMTR9", 
            "date_created": "2015-05-06 23:06:23.780162+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "\nThis is an automated cleanup. This bug report has been closed because it\nis older than 18 months and there is no open code change to fix this.\nAfter this time it is unlikely that the circumstances which lead to\nthe observed issue can be reproduced.\n\nIf you can reproduce the bug, please:\n* reopen the bug report (set to status \"New\")\n* AND add the detailed steps to reproduce the issue (if applicable)\n* AND leave a comment \"CONFIRMED FOR: <RELEASE_NAME>\"\n  Only still supported release names are valid (LIBERTY, MITAKA, OCATA, NEWTON).\n  Valid example: CONFIRMED FOR: LIBERTY\n", 
            "date_created": "2016-07-05 09:45:35.467144+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2016-07-05 09:45:32.928007+00:00"
}