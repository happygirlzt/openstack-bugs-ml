{
    "status": "Invalid", 
    "last_updated": "2013-02-26 23:21:21.002635+00:00", 
    "description": "on folsom 2012.2.3, I have create a shared provider network so that tenant can attach VM directly on it. The command was : \n\n#quantum net-create --shared provider_net --provider:network_type vlan --provider:physical_network physnet1 --provider:segmentation_id 254\n#quantum subnet-create --allocation-pool start=192.168.254.230,end=192.168.254.249 --enable_dhcp=false provider_net 192.168.254.0/24\n\nTenant can see the network with \"quantum net-list\"\nAdmin tenant can attach a VM to this network.\nWhen a normal tenant try to boot a VM with a nic attached to this network, nova-compute crashes : \n\n\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] Making asynchronous cast on compute.precise-folsom-cpu1... cast /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py:377\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'Member', u'admin'], u'_context_request_id': u'req-3525291e-8e52-487a-a353-03dc55edff62', u'_context_quota_class': None, u'_context_project_name': u'project_one', u'_context_service_catalog': [{u'endpoints': [{u'adminURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'id': u'02c60163ed1d4e79b4068ac2bcebf13d', u'internalURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'publicURL': u'http://192.168.254.60:8774/v2/57ffb85101824a73ae4872ab0c6780cf'}], u'endpoints_links': [], u'type': u'compute', u'name': u'nova'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:9696/', u'region': u'RegionOne', u'id': u'3a37d99ccd4c4fab9e3007f71eb148b7', u'internalURL': u'http://192.168.100.120:9696/', u'publicURL': u'http://192.168.254.60:9696/'}], u'endpoints_links': [], u'type': u'network', u'name': u'quantum'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:9292/v2', u'region': u'RegionOne', u'id': u'6edc252d4dcb481687a803186c385b20', u'internalURL': u'http://192.168.100.120:9292/v2', u'publicURL': u'http://192.168.254.60:9292/v2'}], u'endpoints_links': [], u'type': u'image', u'name': u'glance'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'id': u'7048a0b970fa4ffd89ac8e61a92fa209', u'internalURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'publicURL': u'http://192.168.254.60:8776/v1/57ffb85101824a73ae4872ab0c6780cf'}], u'endpoints_links': [], u'type': u'volume', u'name': u'cinder'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:8773/services/Admin', u'region': u'RegionOne', u'id': u'841c7b5965794e4984beddb58a86401b', u'internalURL': u'http://192.168.100.120:8773/services/Cloud', u'publicURL': u'http://192.168.254.60:8773/services/Cloud'}], u'endpoints_links': [], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:35357/v2.0', u'region': u'RegionOne', u'id': u'041dc587fdfb4de28fc6a78de090e7dd', u'internalURL': u'http://192.168.100.120:5000/v2.0', u'publicURL': u'http://192.168.254.60:5000/v2.0'}], u'endpoints_links': [], u'type': u'identity', u'name': u'keystone'}], u'_context_user_name': u'user_one', u'_context_auth_token': '<SANITIZED>', u'args': {u'instance': {u'vm_state': u'building', u'availability_zone': None, u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 2, u'user_data': None, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-vc09bh7l', u'id': 42, u'disable_terminate': False, u'user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', u'uuid': u'6e4fee10-afbc-414d-be89-0d22704bd99c', u'server_name': None, u'default_swap_device': None, u'hostname': u'vm-userone-provider', u'launched_on': u'precise-folsom-cpu1', u'display_description': u'vm_userone_provider', u'key_data': None, u'kernel_id': u'', u'power_state': 0, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'57ffb85101824a73ae4872ab0c6780cf', u'launched_at': None, u'scheduled_at': u'2013-02-14T08:27:45.000000', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2013-02-14T08:27:47.000000', u'host': u'precise-folsom-cpu1', u'display_name': u'vm_userone_provider', u'task_state': u'networking', u'shutdown_terminate': False, u'architecture': None, u'root_gb': 0, u'locked': False, u'name': u'instance-0000002a', u'created_at': u'2013-02-14T08:27:45.000000', u'launch_index': 0, u'memory_mb': 512, u'vcpus': 1, u'image_ref': u'167b529c-f124-4cd0-ae45-f9366b61d34f', u'root_device_name': None, u'auto_disk_config': None, u'os_type': None, u'config_drive': u''}}, u'_context_instance_lock_checked': False, u'_context_is_admin': True, u'version': u'2.0', u'_context_project_id': u'57ffb85101824a73ae4872ab0c6780cf', u'_context_timestamp': u'2013-02-14T08:27:45.426888', u'_context_read_deleted': u'no', u'_context_user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', u'method': u'refresh_instance_security_rules', u'_context_remote_address': u'192.168.254.60'} _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] unpacked context: {'project_name': u'project_one', 'user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', 'roles': [u'Member', u'admin'], 'timestamp': u'2013-02-14T08:27:45.426888', 'auth_token': '<SANITIZED>', 'remote_address': u'192.168.254.60', 'quota_class': None, 'is_admin': True, 'service_catalog': [{u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'id': u'02c60163ed1d4e79b4068ac2bcebf13d', u'internalURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf'}], u'type': u'compute', u'name': u'nova'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:9696/', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:9696/', u'id': u'3a37d99ccd4c4fab9e3007f71eb148b7', u'internalURL': u'http://192.168.100.120:9696/'}], u'type': u'network', u'name': u'quantum'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:9292/v2', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:9292/v2', u'id': u'6edc252d4dcb481687a803186c385b20', u'internalURL': u'http://192.168.100.120:9292/v2'}], u'type': u'image', u'name': u'glance'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'id': u'7048a0b970fa4ffd89ac8e61a92fa209', u'internalURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf'}], u'type': u'volume', u'name': u'cinder'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8773/services/Admin', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8773/services/Cloud', u'id': u'841c7b5965794e4984beddb58a86401b', u'internalURL': u'http://192.168.100.120:8773/services/Cloud'}], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:35357/v2.0', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:5000/v2.0', u'id': u'041dc587fdfb4de28fc6a78de090e7dd', u'internalURL': u'http://192.168.100.120:5000/v2.0'}], u'type': u'identity', u'name': u'keystone'}], 'request_id': u'req-3525291e-8e52-487a-a353-03dc55edff62', 'instance_lock_checked': False, 'project_id': u'57ffb85101824a73ae4872ab0c6780cf', 'user_name': u'user_one', 'read_deleted': u'no'} _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2013-02-14 09:27:47 1584 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 276, in _process_data\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 388, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return self.driver.refresh_instance_security_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2234, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.firewall_driver.refresh_instance_security_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/firewall.py\", line 430, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.do_refresh_instance_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/firewall.py\", line 447, in do_refresh_instance_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     network_info = self.network_infos[instance['id']]\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp KeyError: 42\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp \n2013-02-14 09:27:47 DEBUG nova.network.quantumv2.api [req-3525291e-8e52-487a-a353-03dc55edff62 7ebe10b4ac294298b22925fa6b6ee8cf 57ffb85101824a73ae4872ab0c6780cf] get_instance_nw_info() for vm_userone_provider _get_instance_nw_info /usr/lib/python2.7/dist-packages/nova/network/quantumv2/api.py:191\n2013-02-14 09:27:48 DEBUG nova.compute.manager [req-3525291e-8e52-487a-a353-03dc55edff62 7ebe10b4ac294298b22925fa6b6ee8cf 57ffb85101824a73ae4872ab0c6780cf] [instance: 6e4fee10-afbc-414d-be89-0d22704bd99c] Instance network_info: |[VIF({'network': Network({'bridge': '', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': 'fixed', 'floating_ips': [], 'address': u'192.168.254.233'})], 'version': 4, 'meta': {}, 'dns': [], 'routes': [], 'cidr': u'192.168.254.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': 'gateway', 'address': u'192.168.254.1'})})], 'meta': {'injected': False, 'tenant_id': u'e83cdb7b3f6b4417986b81c8d05fbd2c'}, 'id': u'f2845023-c669-4ccc-b529-6f0ff623657e', 'label': u'provider_net'}), 'meta': {}, 'id': u'b7b8875e-6598-45ac-9f3a-09b28eff18e4', 'address': u'fa:16:3e:e5:4c:06'})]| _allocate_network /usr/lib/python2.7/dist-packages/nova/compute/manager.py:726", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1124977", 
    "owner": "None", 
    "id": 1124977, 
    "index": 4679, 
    "openned": "2013-02-14 08:42:32.719891+00:00", 
    "created": "2013-02-14 08:42:32.719891+00:00", 
    "title": "folsom : nova-compute crashed when tenant add VM to shared provider network", 
    "comments": [
        {
            "content": "on folsom 2012.2.3, I have create a shared provider network so that tenant can attach VM directly on it. The command was : \n\n#quantum net-create --shared provider_net --provider:network_type vlan --provider:physical_network physnet1 --provider:segmentation_id 254\n#quantum subnet-create --allocation-pool start=192.168.254.230,end=192.168.254.249 --enable_dhcp=false provider_net 192.168.254.0/24\n\nTenant can see the network with \"quantum net-list\"\nAdmin tenant can attach a VM to this network.\nWhen a normal tenant try to boot a VM with a nic attached to this network, nova-compute crashes : \n\n\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] Making asynchronous cast on compute.precise-folsom-cpu1... cast /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py:377\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'Member', u'admin'], u'_context_request_id': u'req-3525291e-8e52-487a-a353-03dc55edff62', u'_context_quota_class': None, u'_context_project_name': u'project_one', u'_context_service_catalog': [{u'endpoints': [{u'adminURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'id': u'02c60163ed1d4e79b4068ac2bcebf13d', u'internalURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'publicURL': u'http://192.168.254.60:8774/v2/57ffb85101824a73ae4872ab0c6780cf'}], u'endpoints_links': [], u'type': u'compute', u'name': u'nova'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:9696/', u'region': u'RegionOne', u'id': u'3a37d99ccd4c4fab9e3007f71eb148b7', u'internalURL': u'http://192.168.100.120:9696/', u'publicURL': u'http://192.168.254.60:9696/'}], u'endpoints_links': [], u'type': u'network', u'name': u'quantum'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:9292/v2', u'region': u'RegionOne', u'id': u'6edc252d4dcb481687a803186c385b20', u'internalURL': u'http://192.168.100.120:9292/v2', u'publicURL': u'http://192.168.254.60:9292/v2'}], u'endpoints_links': [], u'type': u'image', u'name': u'glance'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'id': u'7048a0b970fa4ffd89ac8e61a92fa209', u'internalURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'publicURL': u'http://192.168.254.60:8776/v1/57ffb85101824a73ae4872ab0c6780cf'}], u'endpoints_links': [], u'type': u'volume', u'name': u'cinder'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:8773/services/Admin', u'region': u'RegionOne', u'id': u'841c7b5965794e4984beddb58a86401b', u'internalURL': u'http://192.168.100.120:8773/services/Cloud', u'publicURL': u'http://192.168.254.60:8773/services/Cloud'}], u'endpoints_links': [], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints': [{u'adminURL': u'http://192.168.100.120:35357/v2.0', u'region': u'RegionOne', u'id': u'041dc587fdfb4de28fc6a78de090e7dd', u'internalURL': u'http://192.168.100.120:5000/v2.0', u'publicURL': u'http://192.168.254.60:5000/v2.0'}], u'endpoints_links': [], u'type': u'identity', u'name': u'keystone'}], u'_context_user_name': u'user_one', u'_context_auth_token': '<SANITIZED>', u'args': {u'instance': {u'vm_state': u'building', u'availability_zone': None, u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 2, u'user_data': None, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-vc09bh7l', u'id': 42, u'disable_terminate': False, u'user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', u'uuid': u'6e4fee10-afbc-414d-be89-0d22704bd99c', u'server_name': None, u'default_swap_device': None, u'hostname': u'vm-userone-provider', u'launched_on': u'precise-folsom-cpu1', u'display_description': u'vm_userone_provider', u'key_data': None, u'kernel_id': u'', u'power_state': 0, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'57ffb85101824a73ae4872ab0c6780cf', u'launched_at': None, u'scheduled_at': u'2013-02-14T08:27:45.000000', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2013-02-14T08:27:47.000000', u'host': u'precise-folsom-cpu1', u'display_name': u'vm_userone_provider', u'task_state': u'networking', u'shutdown_terminate': False, u'architecture': None, u'root_gb': 0, u'locked': False, u'name': u'instance-0000002a', u'created_at': u'2013-02-14T08:27:45.000000', u'launch_index': 0, u'memory_mb': 512, u'vcpus': 1, u'image_ref': u'167b529c-f124-4cd0-ae45-f9366b61d34f', u'root_device_name': None, u'auto_disk_config': None, u'os_type': None, u'config_drive': u''}}, u'_context_instance_lock_checked': False, u'_context_is_admin': True, u'version': u'2.0', u'_context_project_id': u'57ffb85101824a73ae4872ab0c6780cf', u'_context_timestamp': u'2013-02-14T08:27:45.426888', u'_context_read_deleted': u'no', u'_context_user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', u'method': u'refresh_instance_security_rules', u'_context_remote_address': u'192.168.254.60'} _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2013-02-14 09:27:47 1584 DEBUG nova.openstack.common.rpc.amqp [-] unpacked context: {'project_name': u'project_one', 'user_id': u'7ebe10b4ac294298b22925fa6b6ee8cf', 'roles': [u'Member', u'admin'], 'timestamp': u'2013-02-14T08:27:45.426888', 'auth_token': '<SANITIZED>', 'remote_address': u'192.168.254.60', 'quota_class': None, 'is_admin': True, 'service_catalog': [{u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8774/v2/57ffb85101824a73ae4872ab0c6780cf', u'id': u'02c60163ed1d4e79b4068ac2bcebf13d', u'internalURL': u'http://192.168.100.120:8774/v2/57ffb85101824a73ae4872ab0c6780cf'}], u'type': u'compute', u'name': u'nova'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:9696/', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:9696/', u'id': u'3a37d99ccd4c4fab9e3007f71eb148b7', u'internalURL': u'http://192.168.100.120:9696/'}], u'type': u'network', u'name': u'quantum'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:9292/v2', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:9292/v2', u'id': u'6edc252d4dcb481687a803186c385b20', u'internalURL': u'http://192.168.100.120:9292/v2'}], u'type': u'image', u'name': u'glance'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8776/v1/57ffb85101824a73ae4872ab0c6780cf', u'id': u'7048a0b970fa4ffd89ac8e61a92fa209', u'internalURL': u'http://192.168.100.120:8776/v1/57ffb85101824a73ae4872ab0c6780cf'}], u'type': u'volume', u'name': u'cinder'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:8773/services/Admin', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:8773/services/Cloud', u'id': u'841c7b5965794e4984beddb58a86401b', u'internalURL': u'http://192.168.100.120:8773/services/Cloud'}], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://192.168.100.120:35357/v2.0', u'region': u'RegionOne', u'publicURL': u'http://192.168.254.60:5000/v2.0', u'id': u'041dc587fdfb4de28fc6a78de090e7dd', u'internalURL': u'http://192.168.100.120:5000/v2.0'}], u'type': u'identity', u'name': u'keystone'}], 'request_id': u'req-3525291e-8e52-487a-a353-03dc55edff62', 'instance_lock_checked': False, 'project_id': u'57ffb85101824a73ae4872ab0c6780cf', 'user_name': u'user_one', 'read_deleted': u'no'} _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2013-02-14 09:27:47 1584 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 276, in _process_data\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 388, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     return self.driver.refresh_instance_security_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2234, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.firewall_driver.refresh_instance_security_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/firewall.py\", line 430, in refresh_instance_security_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     self.do_refresh_instance_rules(instance)\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/firewall.py\", line 447, in do_refresh_instance_rules\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp     network_info = self.network_infos[instance['id']]\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp KeyError: 42\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp \n2013-02-14 09:27:47 DEBUG nova.network.quantumv2.api [req-3525291e-8e52-487a-a353-03dc55edff62 7ebe10b4ac294298b22925fa6b6ee8cf 57ffb85101824a73ae4872ab0c6780cf] get_instance_nw_info() for vm_userone_provider _get_instance_nw_info /usr/lib/python2.7/dist-packages/nova/network/quantumv2/api.py:191\n2013-02-14 09:27:48 DEBUG nova.compute.manager [req-3525291e-8e52-487a-a353-03dc55edff62 7ebe10b4ac294298b22925fa6b6ee8cf 57ffb85101824a73ae4872ab0c6780cf] [instance: 6e4fee10-afbc-414d-be89-0d22704bd99c] Instance network_info: |[VIF({'network': Network({'bridge': '', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': 'fixed', 'floating_ips': [], 'address': u'192.168.254.233'})], 'version': 4, 'meta': {}, 'dns': [], 'routes': [], 'cidr': u'192.168.254.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': 'gateway', 'address': u'192.168.254.1'})})], 'meta': {'injected': False, 'tenant_id': u'e83cdb7b3f6b4417986b81c8d05fbd2c'}, 'id': u'f2845023-c669-4ccc-b529-6f0ff623657e', 'label': u'provider_net'}), 'meta': {}, 'id': u'b7b8875e-6598-45ac-9f3a-09b28eff18e4', 'address': u'fa:16:3e:e5:4c:06'})]| _allocate_network /usr/lib/python2.7/dist-packages/nova/compute/manager.py:726", 
            "date_created": "2013-02-14 08:42:32.719891+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "Hi Mathieu,\n\nI have one question on the tb you posted:\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp network_info = self.network_infos[instance['id']]\n2013-02-14 09:27:47 1584 TRACE nova.openstack.common.rpc.amqp KeyError: 42\n\nI find strange to find an integer there, I thought nova instance identifiers are all uuids now. Or am I missing something?\n\nAlso, it would be good to know how you attempt to boot your VM (--nic net-id, --nic port-id or without any networks selection); as there are different code paths associated with those options it might really help triaging.", 
            "date_created": "2013-02-14 11:45:09.275971+00:00", 
            "author": "https://api.launchpad.net/1.0/~salvatore-orlando"
        }, 
        {
            "content": "Hi salvatore,\n\ni'm booting the VM with --nic net-id=provider_net.\n\nMay be the use of uuids began with grizzly? this bugs occurs with folsom, i'll try to reproduce it on grizzly asap.\n\nThanks\n\nMathieu", 
            "date_created": "2013-02-14 14:18:52.628370+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "hi,\n\ni've just tested on devstack/grizzly and it doesn't occur. I have disabled q-l3, q-meta, q-dhcp on devstack.", 
            "date_created": "2013-02-15 16:46:00.161244+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }
    ], 
    "closed": "2013-02-26 23:21:11.156450+00:00"
}