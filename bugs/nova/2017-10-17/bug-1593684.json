{
    "status": "Confirmed", 
    "last_updated": "2017-06-27 16:03:36.998921+00:00", 
    "description": "Description\n===========\nAfter shut off an instance and starting it again the disk path changes inside the virtual instance. This is usually a small issue if you are only using the disk label/or any other ID rather than disk path.\nIf any application is using the disk path inside windows the application becamomes failed until replacing the device path.\n\nAlso I understand that most people won't even notice the problem, but we don't have similar issues with VMware and we believe that the path should be the same regardless of any kind of shut off/startup operation.\n\nSteps to reproduce\n==================\n- Deploy a new instance - eg: Windows 2012 R2 \n- Attach a new CEPH block device volume \n- Verify the disk path inside Windows\n    Device instance path: SCSI\\DISK&VEN_RED_HAT&PROD_VIRTIO\\4&1618751F&0&000000\n\tParent: PCI\\VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\\3&13c0b0c5&0&30\n\tLocation: Bus Number 0, Target Id 0, LUN 0\n- Shut off the instance\n- Start the instance\n- The disk is offline after the startup, changing to online working\n- Verify the disk path:\n\tDevice instance path: SCSI\\DISK&VEN_RED_HAT&PROD_VIRTIO\\4&352177D0&1&000000\n\tParent: PCI\\VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\\3&13c0b0c5&0&28\n\tLocation: Bus Number 0, Target Id 0, LUN 0\n\nUsing  Ubuntu 16.04 LTS:\n- Spin up a new Instance using Ubuntu 16.04 LTS\n- Attach a new CEPH block device\n\troot@attach-test-2:~# lsblk\n\tNAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\n\tvda    253:0    0  16G  0 disk\n\t\u2514\u2500vda1 253:1    0  16G  0 part /\n\tvdb    253:16   0   1G  0 disk\n\t\n\troot@attach-test-2:~# ls -la /dev/disk/by-path\n\ttotal 0\n\tdrwxr-xr-x 2 root root 100 Jun 17 11:26 .\n\tdrwxr-xr-x 6 root root 120 Jun 17 11:26 ..\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:23 virtio-pci-0000:00:04.0 -> ../../vda\n\tlrwxrwxrwx 1 root root  10 Jun 17 11:23 virtio-pci-0000:00:04.0-part1 -> ../../vda1\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:26 virtio-pci-0000:00:06.0 -> ../../vdb\n\n- Shut ioff the instance\n- Start the instance\n- Check disk path\n\troot@attach-test-2:~# ls -la /dev/disk/by-path\n\ttotal 0\n\tdrwxr-xr-x 2 root root 100 Jun 17 11:28 .\n\tdrwxr-xr-x 6 root root 120 Jun 17 11:28 ..\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:28 virtio-pci-0000:00:04.0 -> ../../vda\n\tlrwxrwxrwx 1 root root  10 Jun 17 11:28 virtio-pci-0000:00:04.0-part1 -> ../../vda1\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:28 virtio-pci-0000:00:05.0 -> ../../vdb\n\nTHe disk path changed using Linux too\n\nI have a feeling that this is a KVM/LibVirt issue...\n\t\n\t\nExpected result\n===============\nNova & Libvirt & KVM should use the same details when attaching the disk on the instance regardless how many time we shut it down and start it.\nSo both instance path and parent should be unchanged.\n\nActual result\n=============\nPath changes\n\nEnvironment\n===========\nControl node:\nroot@openstack1:/etc/nova# dpkg -l | grep nova\nii nova-api 2:13.0.0-0ubuntu2 all OpenStack Compute - API frontend\nii nova-cells 2:13.0.0-0ubuntu2 all Openstack Compute - cells\nii nova-cert 2:13.0.0-0ubuntu2 all OpenStack Compute - certificate management\nii nova-common 2:13.0.0-0ubuntu2 all OpenStack Compute - common files\nii nova-conductor 2:13.0.0-0ubuntu2 all OpenStack Compute - conductor service\nii nova-consoleauth 2:13.0.0-0ubuntu2 all OpenStack Compute - Console Authenticator\nii nova-novncproxy 2:13.0.0-0ubuntu2 all OpenStack Compute - NoVNC proxy\nii nova-scheduler 2:13.0.0-0ubuntu2 all OpenStack Compute - virtual machine scheduler\nii python-nova 2:13.0.0-0ubuntu2 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2 all client library for OpenStack Compute API - Python 2.7\n\nCompute node1:\nroot@openstackcompute:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2~cloud0 all client library for OpenStack Compute API - Python 2.7\n\nCompute node2:\nroot@openstackcompute2:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2~cloud0 all client library for OpenStack Compute API - Python 2.7\n\nCompute node3:\nroot@openstackcompute3:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2 all client library for OpenStack Compute API - Python 2.7\n\nHypervisors:\nKVM + Libvirt on all compute nodes\n\nStorage:\nCEPH, iSCSI and FC using Netapp\n\nCEPH version - the same on all storage nodes\nii ceph 10.2.0-0ubuntu0.16.04.1 amd64 distributed storage and file system\nii ceph-common 10.2.0-0ubuntu0.16.04.1 amd64 common utilities to mount and interact with a ceph storage cluster\nii ceph-deploy 1.5.32-0ubuntu1 all Deployment and configuration of Ceph.\nii ceph-mds 10.2.0-0ubuntu0.16.04.1 amd64 metadata server for the ceph distributed file system\nii libcephfs1 10.2.0-0ubuntu0.16.04.1 amd64 Ceph distributed file system client library\nii python-cephfs 10.2.0-0ubuntu0.16.04.1 amd64 Python libraries for the Ceph libcephfs library\n\nNetworking\nNeutron networking with Openvswitch\n   \n----\nroot@openstack1:~# nova show Attach_Test_Win2k12\n\n+--------------------------------------+----------------------------------------------------------------------------------+\n| Property                             | Value                                                                            |\n+--------------------------------------+----------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                                             |\n| OS-EXT-AZ:availability_zone          | nova                                                                             |\n| OS-EXT-SRV-ATTR:host                 | openstackcompute3                                                                |\n| OS-EXT-SRV-ATTR:hostname             | attach-test-win2k12                                                              |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | openstackcompute3                                                                |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000114                                                                |\n| OS-EXT-SRV-ATTR:kernel_id            |                                                                                  |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                                                |\n| OS-EXT-SRV-ATTR:ramdisk_id           |                                                                                  |\n| OS-EXT-SRV-ATTR:reservation_id       | r-jiddtkfq                                                                       |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                                         |\n| OS-EXT-SRV-ATTR:user_data            | -                                                                                |\n| OS-EXT-STS:power_state               | 1                                                                                |\n| OS-EXT-STS:task_state                | -                                                                                |\n| OS-EXT-STS:vm_state                  | active                                                                           |\n| OS-SRV-USG:launched_at               | 2016-06-17T10:44:43.000000                                                       |\n| OS-SRV-USG:terminated_at             | -                                                                                |\n| accessIPv4                           |                                                                                  |\n| accessIPv6                           |                                                                                  |\n| config_drive                         |                                                                                  |\n| created                              | 2016-06-17T10:44:27Z                                                             |\n| description                          | Attach_Test_Win2k12                                                              |\n| flavor                               | CCL-Win2k12 (b383ddeb-f52b-4554-94b6-49981bada108)                               |\n| hostId                               | c340bdd941f659cce547150bf407432536d9a856192a100ec3a2ebec                         |\n| host_status                          | UP                                                                               |\n| id                                   | 08c04ee9-b922-408d-8642-0e8f1fa59a1d                                             |\n| image                                | Windows 2012 R2 X64 (86612cca-ce9f-4920-997d-6e81d9ea0068)                       |\n| key_name                             | CCLTests                                                                         |\n| locked                               | False                                                                            |\n| metadata                             | {}                                                                               |\n| name                                 | Attach_Test_Win2k12                                                              |\n| net-10.10.128 network                | 10.10.128.51                                                                     |\n| os-extended-volumes:volumes_attached | [{\"id\": \"32595603-6c42-4bcb-818d-53b0c93b7c06\", \"delete_on_termination\": false}] |\n| progress                             | 0                                                                                |\n| security_groups                      | CCL                                                                              |\n| status                               | ACTIVE                                                                           |\n| tenant_id                            | 6d0fa2c2b45a4f6c8aac185b4592d44f                                                 |\n| updated                              | 2016-06-17T10:46:15Z                                                             |\n| user_id                              | 75f412ba1601457a8415519bbdd3a932                                                 |\n+--------------------------------------+----------------------------------------------------------------------------------+\nroot@openstack1:~# openstack volume show 32595603-6c42-4bcb-818d-53b0c93b7c06\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Field                                 | Value                                                                                                                                                                                                                                                                   |\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| attachments                           | [{u'server_id': u'08c04ee9-b922-408d-8642-0e8f1fa59a1d', u'attachment_id': u'280a5b3b-599b-41a9-9793-ea6d774a1cb7', u'host_name': None, u'volume_id': u'32595603-6c42-4bcb-818d-53b0c93b7c06', u'device': u'/dev/vdb', u'id': u'32595603-6c42-4bcb-818d-53b0c93b7c06'}] |\n| availability_zone                     | nova                                                                                                                                                                                                                                                                    |\n| bootable                              | false                                                                                                                                                                                                                                                                   |\n| consistencygroup_id                   | None                                                                                                                                                                                                                                                                    |\n| created_at                            | 2016-06-17T10:53:38.000000                                                                                                                                                                                                                                              |\n| description                           |                                                                                                                                                                                                                                                                         |\n| encrypted                             | False                                                                                                                                                                                                                                                                   |\n| id                                    | 32595603-6c42-4bcb-818d-53b0c93b7c06                                                                                                                                                                                                                                    |\n| migration_status                      | None                                                                                                                                                                                                                                                                    |\n| multiattach                           | False                                                                                                                                                                                                                                                                   |\n| name                                  | Attachment_Test_1                                                                                                                                                                                                                                                       |\n| os-vol-host-attr:host                 | openstackblock.ccl-dev.net@rbd#CEPH                                                                                                                                                                                                                                     |\n| os-vol-mig-status-attr:migstat        | None                                                                                                                                                                                                                                                                    |\n| os-vol-mig-status-attr:name_id        | None                                                                                                                                                                                                                                                                    |\n| os-vol-tenant-attr:tenant_id          | 6d0fa2c2b45a4f6c8aac185b4592d44f                                                                                                                                                                                                                                        |\n| os-volume-replication:driver_data     | None                                                                                                                                                                                                                                                                    |\n| os-volume-replication:extended_status | None                                                                                                                                                                                                                                                                    |\n| properties                            | attached_mode='rw', readonly='False'                                                                                                                                                                                                                                    |\n| replication_status                    | disabled                                                                                                                                                                                                                                                                |\n| size                                  | 1                                                                                                                                                                                                                                                                       |\n| snapshot_id                           | None                                                                                                                                                                                                                                                                    |\n| source_volid                          | None                                                                                                                                                                                                                                                                    |\n| status                                | in-use                                                                                                                                                                                                                                                                  |\n| type                                  | CEPH                                                                                                                                                                                                                                                                    |\n| user_id                               | 75f412ba1601457a8415519bbdd3a932                                                                                                                                                                                                                                        |\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+", 
    "tags": [
        "openstack-version.mitaka", 
        "volumes"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1593684", 
    "owner": "None", 
    "id": 1593684, 
    "index": 7552, 
    "openned": "2016-06-17 11:35:08.886128+00:00", 
    "created": "2016-06-17 11:35:08.886128+00:00", 
    "title": "Nova & Cinder - Disk attachement changes after shutoff/start", 
    "comments": [
        {
            "content": "Description\n===========\nAfter shut off an instance and starting it again the disk path changes inside the virtual instance. This is usually a small issue if you are only using the disk label/or any other ID rather than disk path.\nIf any application is using the disk path inside windows the application becamomes failed until replacing the device path.\n\nAlso I understand that most people won't even notice the problem, but we don't have similar issues with VMware and we believe that the path should be the same regardless of any kind of shut off/startup operation.\n\nSteps to reproduce\n==================\n- Deploy a new instance - eg: Windows 2012 R2 \n- Attach a new CEPH block device volume \n- Verify the disk path inside Windows\n    Device instance path: SCSI\\DISK&VEN_RED_HAT&PROD_VIRTIO\\4&1618751F&0&000000\n\tParent: PCI\\VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\\3&13c0b0c5&0&30\n\tLocation: Bus Number 0, Target Id 0, LUN 0\n- Shut off the instance\n- Start the instance\n- The disk is offline after the startup, changing to online working\n- Verify the disk path:\n\tDevice instance path: SCSI\\DISK&VEN_RED_HAT&PROD_VIRTIO\\4&352177D0&1&000000\n\tParent: PCI\\VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\\3&13c0b0c5&0&28\n\tLocation: Bus Number 0, Target Id 0, LUN 0\n\nUsing  Ubuntu 16.04 LTS:\n- Spin up a new Instance using Ubuntu 16.04 LTS\n- Attach a new CEPH block device\n\troot@attach-test-2:~# lsblk\n\tNAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\n\tvda    253:0    0  16G  0 disk\n\t\u2514\u2500vda1 253:1    0  16G  0 part /\n\tvdb    253:16   0   1G  0 disk\n\t\n\troot@attach-test-2:~# ls -la /dev/disk/by-path\n\ttotal 0\n\tdrwxr-xr-x 2 root root 100 Jun 17 11:26 .\n\tdrwxr-xr-x 6 root root 120 Jun 17 11:26 ..\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:23 virtio-pci-0000:00:04.0 -> ../../vda\n\tlrwxrwxrwx 1 root root  10 Jun 17 11:23 virtio-pci-0000:00:04.0-part1 -> ../../vda1\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:26 virtio-pci-0000:00:06.0 -> ../../vdb\n\n- Shut ioff the instance\n- Start the instance\n- Check disk path\n\troot@attach-test-2:~# ls -la /dev/disk/by-path\n\ttotal 0\n\tdrwxr-xr-x 2 root root 100 Jun 17 11:28 .\n\tdrwxr-xr-x 6 root root 120 Jun 17 11:28 ..\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:28 virtio-pci-0000:00:04.0 -> ../../vda\n\tlrwxrwxrwx 1 root root  10 Jun 17 11:28 virtio-pci-0000:00:04.0-part1 -> ../../vda1\n\tlrwxrwxrwx 1 root root   9 Jun 17 11:28 virtio-pci-0000:00:05.0 -> ../../vdb\n\nTHe disk path changed using Linux too\n\nI have a feeling that this is a KVM/LibVirt issue...\n\t\n\t\nExpected result\n===============\nNova & Libvirt & KVM should use the same details when attaching the disk on the instance regardless how many time we shut it down and start it.\nSo both instance path and parent should be unchanged.\n\nActual result\n=============\nPath changes\n\nEnvironment\n===========\nControl node:\nroot@openstack1:/etc/nova# dpkg -l | grep nova\nii nova-api 2:13.0.0-0ubuntu2 all OpenStack Compute - API frontend\nii nova-cells 2:13.0.0-0ubuntu2 all Openstack Compute - cells\nii nova-cert 2:13.0.0-0ubuntu2 all OpenStack Compute - certificate management\nii nova-common 2:13.0.0-0ubuntu2 all OpenStack Compute - common files\nii nova-conductor 2:13.0.0-0ubuntu2 all OpenStack Compute - conductor service\nii nova-consoleauth 2:13.0.0-0ubuntu2 all OpenStack Compute - Console Authenticator\nii nova-novncproxy 2:13.0.0-0ubuntu2 all OpenStack Compute - NoVNC proxy\nii nova-scheduler 2:13.0.0-0ubuntu2 all OpenStack Compute - virtual machine scheduler\nii python-nova 2:13.0.0-0ubuntu2 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2 all client library for OpenStack Compute API - Python 2.7\n\nCompute node1:\nroot@openstackcompute:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2~cloud0 all client library for OpenStack Compute API - Python 2.7\n\nCompute node2:\nroot@openstackcompute2:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2~cloud0 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2~cloud0 all client library for OpenStack Compute API - Python 2.7\n\nCompute node3:\nroot@openstackcompute3:~# dpkg -l | grep nova\nii nova-common 2:13.0.0-0ubuntu2 all OpenStack Compute - common files\nii nova-compute 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node base\nii nova-compute-kvm 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node (KVM)\nii nova-compute-libvirt 2:13.0.0-0ubuntu2 all OpenStack Compute - compute node libvirt support\nii python-nova 2:13.0.0-0ubuntu2 all OpenStack Compute Python libraries\nii python-novaclient 2:3.3.1-2 all client library for OpenStack Compute API - Python 2.7\n\nHypervisors:\nKVM + Libvirt on all compute nodes\n\nStorage:\nCEPH, iSCSI and FC using Netapp\n\nCEPH version - the same on all storage nodes\nii ceph 10.2.0-0ubuntu0.16.04.1 amd64 distributed storage and file system\nii ceph-common 10.2.0-0ubuntu0.16.04.1 amd64 common utilities to mount and interact with a ceph storage cluster\nii ceph-deploy 1.5.32-0ubuntu1 all Deployment and configuration of Ceph.\nii ceph-mds 10.2.0-0ubuntu0.16.04.1 amd64 metadata server for the ceph distributed file system\nii libcephfs1 10.2.0-0ubuntu0.16.04.1 amd64 Ceph distributed file system client library\nii python-cephfs 10.2.0-0ubuntu0.16.04.1 amd64 Python libraries for the Ceph libcephfs library\n\nNetworking\nNeutron networking with Openvswitch\n   \n----\nroot@openstack1:~# nova show Attach_Test_Win2k12\n\n+--------------------------------------+----------------------------------------------------------------------------------+\n| Property                             | Value                                                                            |\n+--------------------------------------+----------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                                             |\n| OS-EXT-AZ:availability_zone          | nova                                                                             |\n| OS-EXT-SRV-ATTR:host                 | openstackcompute3                                                                |\n| OS-EXT-SRV-ATTR:hostname             | attach-test-win2k12                                                              |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | openstackcompute3                                                                |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000114                                                                |\n| OS-EXT-SRV-ATTR:kernel_id            |                                                                                  |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                                                |\n| OS-EXT-SRV-ATTR:ramdisk_id           |                                                                                  |\n| OS-EXT-SRV-ATTR:reservation_id       | r-jiddtkfq                                                                       |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                                         |\n| OS-EXT-SRV-ATTR:user_data            | -                                                                                |\n| OS-EXT-STS:power_state               | 1                                                                                |\n| OS-EXT-STS:task_state                | -                                                                                |\n| OS-EXT-STS:vm_state                  | active                                                                           |\n| OS-SRV-USG:launched_at               | 2016-06-17T10:44:43.000000                                                       |\n| OS-SRV-USG:terminated_at             | -                                                                                |\n| accessIPv4                           |                                                                                  |\n| accessIPv6                           |                                                                                  |\n| config_drive                         |                                                                                  |\n| created                              | 2016-06-17T10:44:27Z                                                             |\n| description                          | Attach_Test_Win2k12                                                              |\n| flavor                               | CCL-Win2k12 (b383ddeb-f52b-4554-94b6-49981bada108)                               |\n| hostId                               | c340bdd941f659cce547150bf407432536d9a856192a100ec3a2ebec                         |\n| host_status                          | UP                                                                               |\n| id                                   | 08c04ee9-b922-408d-8642-0e8f1fa59a1d                                             |\n| image                                | Windows 2012 R2 X64 (86612cca-ce9f-4920-997d-6e81d9ea0068)                       |\n| key_name                             | CCLTests                                                                         |\n| locked                               | False                                                                            |\n| metadata                             | {}                                                                               |\n| name                                 | Attach_Test_Win2k12                                                              |\n| net-10.10.128 network                | 10.10.128.51                                                                     |\n| os-extended-volumes:volumes_attached | [{\"id\": \"32595603-6c42-4bcb-818d-53b0c93b7c06\", \"delete_on_termination\": false}] |\n| progress                             | 0                                                                                |\n| security_groups                      | CCL                                                                              |\n| status                               | ACTIVE                                                                           |\n| tenant_id                            | 6d0fa2c2b45a4f6c8aac185b4592d44f                                                 |\n| updated                              | 2016-06-17T10:46:15Z                                                             |\n| user_id                              | 75f412ba1601457a8415519bbdd3a932                                                 |\n+--------------------------------------+----------------------------------------------------------------------------------+\nroot@openstack1:~# openstack volume show 32595603-6c42-4bcb-818d-53b0c93b7c06\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Field                                 | Value                                                                                                                                                                                                                                                                   |\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| attachments                           | [{u'server_id': u'08c04ee9-b922-408d-8642-0e8f1fa59a1d', u'attachment_id': u'280a5b3b-599b-41a9-9793-ea6d774a1cb7', u'host_name': None, u'volume_id': u'32595603-6c42-4bcb-818d-53b0c93b7c06', u'device': u'/dev/vdb', u'id': u'32595603-6c42-4bcb-818d-53b0c93b7c06'}] |\n| availability_zone                     | nova                                                                                                                                                                                                                                                                    |\n| bootable                              | false                                                                                                                                                                                                                                                                   |\n| consistencygroup_id                   | None                                                                                                                                                                                                                                                                    |\n| created_at                            | 2016-06-17T10:53:38.000000                                                                                                                                                                                                                                              |\n| description                           |                                                                                                                                                                                                                                                                         |\n| encrypted                             | False                                                                                                                                                                                                                                                                   |\n| id                                    | 32595603-6c42-4bcb-818d-53b0c93b7c06                                                                                                                                                                                                                                    |\n| migration_status                      | None                                                                                                                                                                                                                                                                    |\n| multiattach                           | False                                                                                                                                                                                                                                                                   |\n| name                                  | Attachment_Test_1                                                                                                                                                                                                                                                       |\n| os-vol-host-attr:host                 | openstackblock.ccl-dev.net@rbd#CEPH                                                                                                                                                                                                                                     |\n| os-vol-mig-status-attr:migstat        | None                                                                                                                                                                                                                                                                    |\n| os-vol-mig-status-attr:name_id        | None                                                                                                                                                                                                                                                                    |\n| os-vol-tenant-attr:tenant_id          | 6d0fa2c2b45a4f6c8aac185b4592d44f                                                                                                                                                                                                                                        |\n| os-volume-replication:driver_data     | None                                                                                                                                                                                                                                                                    |\n| os-volume-replication:extended_status | None                                                                                                                                                                                                                                                                    |\n| properties                            | attached_mode='rw', readonly='False'                                                                                                                                                                                                                                    |\n| replication_status                    | disabled                                                                                                                                                                                                                                                                |\n| size                                  | 1                                                                                                                                                                                                                                                                       |\n| snapshot_id                           | None                                                                                                                                                                                                                                                                    |\n| source_volid                          | None                                                                                                                                                                                                                                                                    |\n| status                                | in-use                                                                                                                                                                                                                                                                  |\n| type                                  | CEPH                                                                                                                                                                                                                                                                    |\n| user_id                               | 75f412ba1601457a8415519bbdd3a932                                                                                                                                                                                                                                        |\n+---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+", 
            "date_created": "2016-06-17 11:35:08.886128+00:00", 
            "author": "https://api.launchpad.net/1.0/~hajduarpad-gmail"
        }, 
        {
            "content": "", 
            "date_created": "2016-06-17 11:35:08.886128+00:00", 
            "author": "https://api.launchpad.net/1.0/~hajduarpad-gmail"
        }, 
        {
            "content": "Libvirt.xml after the shut off attached", 
            "date_created": "2016-06-17 11:35:51.275688+00:00", 
            "author": "https://api.launchpad.net/1.0/~hajduarpad-gmail"
        }, 
        {
            "content": "Hi Arpad,\n\nhttps://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/Online_Storage_Reconfiguration_Guide/persistent_naming.html\n\nAccording to this documentation path based address in non persistent , it gets changed as soon as system is rebooted. So I think this should be expected behavior. \n\nI think this naming is somewhat related to time taken while discovering the device. That is why it can not be persistent.\n\nPlease correct me if I am wrong. \n\n~prashant", 
            "date_created": "2016-06-17 16:35:53.697172+00:00", 
            "author": "https://api.launchpad.net/1.0/~prashant-upadhyay"
        }, 
        {
            "content": "Hello,\n\nI ran some other tests in our environment and I found the following:\n\n- Attached the volume -> not reflected in the XML of the domain\n- Shut down instance\n- Start instance -> parent changed\n- Shut down instance\n- Start instance -> parent unchanged\n\nTo me it seems the issue is the KVM/Libvirt in this case. Actually this is a solution for us about how can we still use a Windows based application if it is using the full disk path... Attach a volume, shut down instance, start again and only start using the volume from this time. ", 
            "date_created": "2016-06-17 18:55:06.720090+00:00", 
            "author": "https://api.launchpad.net/1.0/~hajduarpad-gmail"
        }, 
        {
            "content": "Automatically discovered version mitaka in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 16:03:36.486634+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}