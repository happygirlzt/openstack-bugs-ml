{
    "status": "Invalid", 
    "last_updated": "2015-07-03 07:17:36.571553+00:00", 
    "description": "Steps to reproduce:\n\n1. Create a few networks. In my case they were shared external networks of 'vlan' type.\n\nExample:\nneutron net-create internet_192.168.16.64/27 --router:external True --provider:physical_network internet --provider:network_type  vlan --provider:segmentation_id 20 --shared\nneutron subnet-create internet_192.168.16.64/27 --enable-dhcp --gateway=192.168.16.65 --dns-nameserver=8.8.8.8 --dns-nameserver=77.88.8.8 192.168.16.64/27\nneutron net-create local_private --router:external True --provider:physical_network local --provider:network_type  vlan --provider:segmentation_id 21\nneutron subnet-create local_private --enable-dhcp --gateway=10.0.0.1 --dns-nameserver=8.8.8.8 --dns-nameserver=77.88.8.8 10.0.0.0/24\n\n2. Boot instance:\n\n\u00a0nova boot  --flavor  m1.small --image cirros --key-name x220 --nic net-id=25f7440e-5ffd-4407-a83e-0bce6e8c216d --nic net-id=a3af8097-f348-4767-97c3-b9bf75263ef9 --nic net-id=4dcd411c-1987-11e5-aac2-43478645c3b7 myinstance\n\n3. Get instance info after it becomes 'ACTIVE':\n\nnova show 0111cff2-205f-493c-9d37-bf8a550270a2\n+--------------------------------------+-------------------------------------------------------------------+\n| Property                             | Value                                                             |\n+--------------------------------------+-------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                            |\n| OS-EXT-AZ:availability_zone          | nova                                                              |\n| OS-EXT-STS:power_state               | 1                                                                 |\n| OS-EXT-STS:task_state                | -                                                                 |\n| OS-EXT-STS:vm_state                  | active                                                            |\n| OS-SRV-USG:launched_at               | 2015-06-22T13:47:10.000000                                        |\n| OS-SRV-USG:terminated_at             | -                                                                 |\n| accessIPv4                           |                                                                   |\n| accessIPv6                           |                                                                   |\n| config_drive                         |                                                                   |\n| created                              | 2015-06-22T13:47:03Z                                              |\n| flavor                               | SSD.30 (30)                                                       |\n| hostId                               | ac01a9c7098d3d6f769fabd7071794ba11cca06d11a15867da898dbc          |\n| id                                   | 0111cff2-205f-493c-9d37-bf8a550270a2                              |\n| image                                | Debian 8.0 Jessie (x86_64) (cc00f340-c927-4309-965e-63f02c94027d) |\n| internet_192.168.16.192/27 network   | 192.168.16.205                                                    |\n| key_name                             | x220                                                              |\n| local_private network                |                                                                   |\n| metadata                             | {}                                                                |\n| name                                 | hands                                                             |\n| os-extended-volumes:volumes_attached | []                                                                |\n| progress                             | 0                                                                 |\n| security_groups                      | default                                                           |\n| status                               | ACTIVE                                                            |\n| tenant_id                            | 1d7f6604ebb54c69820f9d157bcea5f9                                  |\n| updated                              | 2015-06-22T13:47:10Z                                              |\n| user_id                              | 51b457fc5dee4b6098093542bd659e8a                                  |\n+--------------------------------------+-------------------------------------------------------------------+\n\nThe local_private network field is empty.\n\nExpected: it contains an IP address.\n\nThis can be fixed by nova refresh-network, but it requires admin privileges.\n\nVersion: nova 2014.2.4 with neutron network.", 
    "tags": [
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1467544", 
    "owner": "https://api.launchpad.net/1.0/~yuywz", 
    "id": 1467544, 
    "index": 6882, 
    "openned": "2015-06-22 14:13:00.240614+00:00", 
    "created": "2015-06-22 14:13:00.240614+00:00", 
    "title": "Network field update delayed if a few net-id were specified during creation", 
    "comments": [
        {
            "content": "Steps to reproduce:\n\n1. Create a few networks. In my case they were external networks of 'vlan' type. \n2. Boot instance:\n\n nova boot  --flavor  m1.small --image cirros --key-name x220 --nic net-id=25f7440e-5ffd-4407-a83e-0bce6e8c216d --nic net-id=a3af8097-f348-4767-97c3-b9bf75263ef9 myinstance\n\n3. Get instance info after it becomes 'ACTIVE':\n\nnova show 0111cff2-205f-493c-9d37-bf8a550270a2\n+--------------------------------------+-------------------------------------------------------------------+\n| Property                             | Value                                                             |\n+--------------------------------------+-------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                            |\n| OS-EXT-AZ:availability_zone          | nova                                                              |\n| OS-EXT-STS:power_state               | 1                                                                 |\n| OS-EXT-STS:task_state                | -                                                                 |\n| OS-EXT-STS:vm_state                  | active                                                            |\n| OS-SRV-USG:launched_at               | 2015-06-22T13:47:10.000000                                        |\n| OS-SRV-USG:terminated_at             | -                                                                 |\n| accessIPv4                           |                                                                   |\n| accessIPv6                           |                                                                   |\n| config_drive                         |                                                                   |\n| created                              | 2015-06-22T13:47:03Z                                              |\n| flavor                               | SSD.30 (30)                                                       |\n| hostId                               | ac01a9c7098d3d6f769fabd7071794ba11cca06d11a15867da898dbc          |\n| id                                   | 0111cff2-205f-493c-9d37-bf8a550270a2                              |\n| image                                | Debian 8.0 Jessie (x86_64) (cc00f340-c927-4309-965e-63f02c94027d) |\n| internet_192.168.16.192/27 network   | 192.168.16.205                                                    |\n| key_name                             | x220                                                              |\n| local_private network                |                                                                   |\n| metadata                             | {}                                                                |\n| name                                 | hands                                                             |\n| os-extended-volumes:volumes_attached | []                                                                |\n| progress                             | 0                                                                 |\n| security_groups                      | default                                                           |\n| status                               | ACTIVE                                                            |\n| tenant_id                            | 1d7f6604ebb54c69820f9d157bcea5f9                                  |\n| updated                              | 2015-06-22T13:47:10Z                                              |\n| user_id                              | 51b457fc5dee4b6098093542bd659e8a                                  |\n+--------------------------------------+-------------------------------------------------------------------+\n\n\nThe local_private network field is empty.\n\nExpected: it contains an IP address.\n\nThis can be fixed by nova refresh-network, but it requires admin privileges.\n\nVersion: nova 2014.2.4 with neutron network.", 
            "date_created": "2015-06-22 14:13:00.240614+00:00", 
            "author": "https://api.launchpad.net/1.0/~george-shuklin"
        }, 
        {
            "content": "Hi George,\n\nI tried to reproduce this issue but failed. Following is the my environment info:\n\nOpenstack: Devstack\nOS: Ubuntu 14.04(4G RAM)\n\nI specified 8 local networks to my instance for testing and after the VM booted successfully, \"nova show\" displays all of the nets I specified:\n\n1. Create networks for testing:\n\ndevstack$ neutron net-list\n\n+--------------------------------------+---------+----------------------------------------------------------+\n\n| id                                   | name    | subnets                                                  |\n\n+--------------------------------------+---------+----------------------------------------------------------+\n\n| 02c41ba7-b6ba-4a39-9b30-ee9e47bcc400 | net2    | 915fa0b6-2083-4d1f-8181-918deda98efc 10.0.2.0/24         |\n\n| 2b576226-e2e5-4bac-9011-7edde48305d6 | private | 47704cbe-9a43-4544-9a65-4a3d5e124b55 10.0.0.0/24         |\n\n|                                      |         | 9abd7d06-7bca-4035-a857-9e9266f41f5b fd6a:3a4f:3091::/64 |\n\n| 3c6a3f92-8b7a-4d41-91b9-5a9a8dd8dcc6 | net3    | 734e1da7-f4e8-4932-b261-531a2eeb8540 10.0.3.0/24         |\n\n| 46ac6541-4015-4ef3-90f5-cec88bbd3028 | net8    | cd37a9f3-624f-4483-a166-3625e51c2396 10.0.8.0/24         |\n\n| 6c614876-5d00-41f6-a941-13df6a2f60a0 | net6    | b6d56992-c183-4942-bc2d-6cbf7704d6f6 10.0.6.0/24         |\n\n| 6f96006d-ea78-4e8d-95c9-54552356e365 | net1    | 0caa097f-fc68-4904-ac5d-9024a15215d8 10.0.1.0/24         |\n\n| 9eb1a1d6-ab63-4fe2-8650-5c933e092582 | net5    | fae7d273-b875-4822-a105-89a75d4b07c8 10.0.5.0/24         |\n\n| b735f04f-223e-414d-a7b6-1c5ff7295c48 | net4    | 7c07c3af-e688-49a8-8bde-e7cf036d9456 10.0.4.0/24         |\n\n| db656f3e-043e-4249-b243-82d7db201a13 | public  | 43178d5e-4a35-43db-bafc-1fa92809fe72                     |\n\n|                                      |         | b402e7e7-a70d-4150-9ff9-088bc698ef3f                     |\n\n| ea3d7f6d-437b-4549-8a97-1f2af672e0d4 | net7    | 4a7ab3f5-4ad3-4370-8d56-b2773d4286d0 10.0.7.0/24         |\n\n+--------------------------------------+---------+----------------------------------------------------------+\n\n\n2. Boot an instance:\n\n/devstack$ nova boot --image e23f9e95-7882-4a91-a74d-c9a9d2ef06c7 --flavor 1 --nic net-id=6f96006d-ea78-4e8d-95c9-54552356e365 --nic net-id=02c41ba7-b6ba-4a39-9b30-ee9e47bcc400 --nic net-id=3c6a3f92-8b7a-4d41-91b9-5a9a8dd8dcc6 --nic net-id=b735f04f-223e-414d-a7b6-1c5ff7295c48 --nic net-id=9eb1a1d6-ab63-4fe2-8650-5c933e092582 --nic net-id=6c614876-5d00-41f6-a941-13df6a2f60a0 --nic net-id=ea3d7f6d-437b-4549-8a97-1f2af672e0d4 --nic net-id=46ac6541-4015-4ef3-90f5-cec88bbd3028 test_vm\n\n3. Nova show instance:\n\n/devstack$ nova show test_vm\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-STS:task_state                | -                                                              |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-SRV-USG:launched_at               | 2015-06-24T06:07:05.000000                                     |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| config_drive                         | True                                                           |\n| created                              | 2015-06-24T06:06:11Z                                           |\n| flavor                               | m1.tiny (1)                                                    |\n| hostId                               | 72dfdc375144ab2636f383aa2d09ba22d9fbedd9debc2ba89fb186f2       |\n| id                                   | bc798e67-25f0-42dc-9c34-e622b31c4377                           |\n| image                                | cirros-0.3.4-x86_64-uec (e23f9e95-7882-4a91-a74d-c9a9d2ef06c7) |\n| key_name                             | -                                                              |\n| metadata                             | {}                                                             |\n| name                                 | test_vm                                                        |\n| net1 network                         | 10.0.1.3                                                       |\n| net2 network                         | 10.0.2.3                                                       |\n| net3 network                         | 10.0.3.3                                                       |\n| net4 network                         | 10.0.4.3                                                       |\n| net5 network                         | 10.0.5.3                                                       |\n| net6 network                         | 10.0.6.3                                                       |\n| net7 network                         | 10.0.7.3                                                       |\n| net8 network                         | 10.0.8.3                                                       |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | ACTIVE                                                         |\n| tenant_id                            | 866a6112280f4fc4adc9368a46436855                               |\n| updated                              | 2015-06-24T06:07:06Z                                           |\n| user_id                              | 0ab7b781b5c54fed8ab92cea612e2a6b                               |\n+--------------------------------------+----------------------------------------------------------------+", 
            "date_created": "2015-06-24 06:33:27.097695+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuywz"
        }, 
        {
            "content": "Hello.\n\nThank you for retesting. Few notes: Juno (2014.2) release, and networks are external.\n\nBut I'll try to pinpoint problem from our current production environment to something devstack-reproduceable.", 
            "date_created": "2015-06-24 13:29:03.700437+00:00", 
            "author": "https://api.launchpad.net/1.0/~george-shuklin"
        }, 
        {
            "content": "@Wen Zhi Yu (yuywz):\n\nSince you are set as assignee, I switch the status to \"In Progress\".", 
            "date_created": "2015-06-24 15:28:34.664610+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "Hello.\n\nI've ran some tests.\n\nI found bug in our configuration, and same time found funny bug in nova.\n\nIf network and subnet are belong to different tenants, network field are left empy.\n\nBut more, if few networks was attached in this way, and one network is removed, address is written in wrong network filed.\n\n(Short: Minor bug for broken configuration).", 
            "date_created": "2015-07-01 11:57:10.638489+00:00", 
            "author": "https://api.launchpad.net/1.0/~george-shuklin"
        }, 
        {
            "content": "Hi George,\n\nSince this bug is caused by invalid configuration, I'm closing this bug.\n\nAccording to your comment #4, I think \"if few networks was attached in this way, and one network is removed, address is written in wrong network filed\" is a defect, please open a new bug against this defect.\n\n ", 
            "date_created": "2015-07-03 07:16:50.280329+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuywz"
        }
    ], 
    "closed": "2015-07-03 07:17:34.682351+00:00"
}