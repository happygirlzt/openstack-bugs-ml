{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 09:32:59.320789+00:00", 
    "description": "There are several unit tests in test_libvirt.py that are failing. \n\nMy guess is that this is being missed on the jenkins server because it doesn't have libvirt installed. Each of these failing methods starts like this:\n\n        if not self.lazy_load_library_exists():\n            return\n\n\nFailing stack traces (seems related to image ids changed from integers to uuids):\n\n\n\n======================================================================\nERROR: test_snapshot_in_ami_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 388, in test_snapshot_in_ami_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 3 could not be found.\n\n======================================================================\nERROR: test_snapshot_in_qcow2_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 461, in test_snapshot_in_qcow2_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 123456 could not be found.\n\n======================================================================\nERROR: test_snapshot_in_raw_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 424, in test_snapshot_in_raw_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 123456 could not be found.\n\n======================================================================\nERROR: test_snapshot_no_image_architecture (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 502, in test_snapshot_no_image_architecture\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 2 could not be found.", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/885037", 
    "owner": "https://api.launchpad.net/1.0/~bcwaldon", 
    "id": 885037, 
    "index": 512, 
    "openned": "2011-11-02 02:29:41.880071+00:00", 
    "created": "2011-11-02 02:29:41.880071+00:00", 
    "title": "libvirt-related unit tests are failing", 
    "comments": [
        {
            "content": "There are several unit tests in test_libvirt.py that are failing. \n\nMy guess is that this is being missed on the jenkins server because it doesn't have libvirt installed. Each of these failing methods starts like this:\n\n        if not self.lazy_load_library_exists():\n            return\n\n\nFailing stack traces (seems related to image ids changed from integers to uuids):\n\n\n\n======================================================================\nERROR: test_snapshot_in_ami_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 388, in test_snapshot_in_ami_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 3 could not be found.\n\n======================================================================\nERROR: test_snapshot_in_qcow2_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 461, in test_snapshot_in_qcow2_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 123456 could not be found.\n\n======================================================================\nERROR: test_snapshot_in_raw_format (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 424, in test_snapshot_in_raw_format\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 123456 could not be found.\n\n======================================================================\nERROR: test_snapshot_no_image_architecture (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/lorin/nova/nova/tests/test_libvirt.py\", line 502, in test_snapshot_no_image_architecture\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/lorin/nova/nova/exception.py\", line 113, in wrapped\n    return f(*args, **kw)\n  File \"/home/lorin/nova/nova/virt/libvirt/connection.py\", line 429, in snapshot\n    base = image_service.show(context, image_id)\n  File \"/home/lorin/nova/nova/image/fake.py\", line 146, in show\n    raise exception.ImageNotFound(image_id=image_id)\nImageNotFound: Image 2 could not be found.", 
            "date_created": "2011-11-02 02:29:41.880071+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "Proposed fix at https://review.openstack.org/1249", 
            "date_created": "2011-11-02 13:07:17.641739+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "Note that the proposed fix are for particular libvirt unit tests that are failing. Fixing the Jenkins server will have to be done by somebody who manages the Jenkins server.", 
            "date_created": "2011-11-03 14:44:50.290932+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/1293\nCommitted: http://github.com/openstack/nova/commit/c3c53ba83abe3a23050eb3a2ffd665f6e24ab5aa\nSubmitter: Jenkins\nBranch:    master\n\n status fixcommitted\n done\n\ncommit c3c53ba83abe3a23050eb3a2ffd665f6e24ab5aa\nAuthor: Brian Waldon <email address hidden>\nDate:   Thu Nov 3 10:55:28 2011 -0400\n\n    Correcting libvirt tests that were failing\n    \n    Fixes bug 885037. With this merge prop we need to get libvirt tests\n    running in Jenkins.\n    \n    Change-Id: I48e69f8ef3b70036f5d161c85b6c423344a695a2\n", 
            "date_created": "2011-11-08 23:35:32+00:00", 
            "author": "https://api.launchpad.net/1.0/~openstack-gerrit"
        }
    ], 
    "closed": "2011-11-17 09:54:25.276486+00:00"
}