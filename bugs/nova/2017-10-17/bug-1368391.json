{
    "status": "Fix Released", 
    "last_updated": "2015-09-15 08:39:27.960228+00:00", 
    "description": "sqlalchemy-migrate 0.9.2 is breaking nova unit tests\n\nOperationalError: (OperationalError) cannot commit - no transaction is active u'COMMIT;' ()\n\nhttp://logs.openstack.org/39/117839/18/gate/gate-nova-python27/8a7aa8c/", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 32, 
    "link": "https://bugs.launchpad.net/nova/+bug/1368391", 
    "owner": "https://api.launchpad.net/1.0/~jogo", 
    "id": 1368391, 
    "index": 208, 
    "openned": "2014-09-11 19:27:54.220651+00:00", 
    "created": "2014-09-11 19:27:54.220651+00:00", 
    "title": "sqlalchemy-migrate 0.9.2 is breaking nova unit tests", 
    "comments": [
        {
            "content": "sqlalchemy-migrate 0.9.2 is breaking nova unit tests\n\nOperationalError: (OperationalError) cannot commit - no transaction is active u'COMMIT;' ()\n\nhttp://logs.openstack.org/39/117839/18/gate/gate-nova-python27/8a7aa8c/", 
            "date_created": "2014-09-11 19:27:54.220651+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "This is the change in the 0.9.2 release that's breaking it:\n\nhttps://review.openstack.org/#/c/110611/", 
            "date_created": "2014-09-11 19:39:18.710006+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/120893", 
            "date_created": "2014-09-11 19:39:41.846029+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/120893\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=9c2d6f21854bc79f03095163b8133a9fec68f9f2\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9c2d6f21854bc79f03095163b8133a9fec68f9f2\nAuthor: Joe Gordon <email address hidden>\nDate:   Thu Sep 11 12:38:57 2014 -0700\n\n    Block sqlalchemy migrate 0.9.2 as it breaks all of nova\n    \n    This is breaking nova unit tests\n    \n    Change-Id: Ic82d787e41f7b6d6153d3c6b19902cc11a1c43bb\n    Closes-Bug: #1368391\n", 
            "date_created": "2014-09-11 20:59:33.167577+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Cinder: https://review.openstack.org/#/c/120907/", 
            "date_created": "2014-09-11 21:00:46.030202+00:00", 
            "author": "https://api.launchpad.net/1.0/~eharney"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/120998", 
            "date_created": "2014-09-12 07:08:53.335278+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/120999", 
            "date_created": "2014-09-12 07:12:15.470963+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/121001", 
            "date_created": "2014-09-12 07:15:18.563081+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/121007", 
            "date_created": "2014-09-12 07:29:20.638420+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/121009", 
            "date_created": "2014-09-12 07:31:14.425723+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/121010", 
            "date_created": "2014-09-12 07:33:05.114257+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/121012", 
            "date_created": "2014-09-12 07:36:31.575053+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/121013", 
            "date_created": "2014-09-12 07:41:15.752761+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/121028", 
            "date_created": "2014-09-12 08:45:22.926865+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/121032", 
            "date_created": "2014-09-12 08:58:55.317114+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/121062", 
            "date_created": "2014-09-12 11:53:29.080033+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/121063", 
            "date_created": "2014-09-12 11:54:30.965310+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/120907\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=eb01ccba28b0feabe6220c125776fee3c2c52505\nSubmitter: Jenkins\nBranch:    master\n\ncommit eb01ccba28b0feabe6220c125776fee3c2c52505\nAuthor: Eric Harney <email address hidden>\nDate:   Thu Sep 11 16:53:11 2014 -0400\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Closes-Bug: #1368391\n    \n    Change-Id: Ic814a91038800201603baf33ca40e4586944343b\n", 
            "date_created": "2014-09-12 16:53:01.192365+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Adam Gandelman (<email address hidden>) on branch: stable/icehouse\nReview: https://review.openstack.org/120998\nReason: https://review.openstack.org/#/c/121062/", 
            "date_created": "2014-09-12 17:37:01.559980+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Adam Gandelman (<email address hidden>) on branch: stable/havana\nReview: https://review.openstack.org/120999\nReason: https://review.openstack.org/#/c/121063/", 
            "date_created": "2014-09-12 17:37:27.472766+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Adam Gandelman (<email address hidden>) on branch: stable/havana\nReview: https://review.openstack.org/121013\nReason: https://review.openstack.org/#/c/121063/", 
            "date_created": "2014-09-12 17:37:40.640542+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "e-r query: https://review.openstack.org/#/c/121203/", 
            "date_created": "2014-09-12 19:06:58.330531+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121009\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=8ffded729b65d52c21b048e2eff6f6265cc588fe\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 8ffded729b65d52c21b048e2eff6f6265cc588fe\nAuthor: Joe Gordon <email address hidden>\nDate:   Thu Sep 11 12:38:57 2014 -0700\n\n    Block sqlalchemy migrate 0.9.2 as it breaks all of nova\n    \n    This is breaking nova unit tests\n    \n    Closes-Bug: #1368391\n    (cherry picked from commit 9c2d6f21854bc79f03095163b8133a9fec68f9f2)\n    \n    Change-Id: Ic82d787e41f7b6d6153d3c6b19902cc11a1c43bb\n", 
            "date_created": "2014-09-13 07:18:53.477510+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121001\nCommitted: https://git.openstack.org/cgit/openstack/glance/commit/?id=a8e54eccbb11ccdff2ac336514e669bc9218b5c9\nSubmitter: Jenkins\nBranch:    master\n\ncommit a8e54eccbb11ccdff2ac336514e669bc9218b5c9\nAuthor: Adam Gandelman <email address hidden>\nDate:   Fri Sep 12 00:14:23 2014 -0700\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Change-Id: I347a20fd35ae20f1de5db7f2608090b08af6c0ff\n    Closes-Bug: #1368391\n", 
            "date_created": "2014-09-13 07:21:09.096212+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121012\nCommitted: https://git.openstack.org/cgit/openstack/glance/commit/?id=a3bca656104d3067912de73176d5ae0beee51b37\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit a3bca656104d3067912de73176d5ae0beee51b37\nAuthor: Adam Gandelman <email address hidden>\nDate:   Fri Sep 12 00:14:23 2014 -0700\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Closes-Bug: #1368391\n    (cherry picked from commit a8e54eccbb11ccdff2ac336514e669bc9218b5c9)\n    \n    Change-Id: I347a20fd35ae20f1de5db7f2608090b08af6c0ff\n", 
            "date_created": "2014-09-13 08:13:01.129187+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121062\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=8178590a9c999070e24bb516cffb7da41287a745\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit 8178590a9c999070e24bb516cffb7da41287a745\nAuthor: Eric Harney <email address hidden>\nDate:   Thu Sep 11 16:53:11 2014 -0400\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Conflicts:\n    \trequirements.txt\n    \n    Closes-Bug: #1368391\n    Change-Id: Ic814a91038800201603baf33ca40e4586944343b\n    (cherry picked from commit eb01ccba28b0feabe6220c125776fee3c2c52505)\n", 
            "date_created": "2014-09-13 20:07:59.210981+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121063\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=a4d595b4a8adee9a96f7b56bfd8347056bc88b2a\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit a4d595b4a8adee9a96f7b56bfd8347056bc88b2a\nAuthor: Eric Harney <email address hidden>\nDate:   Thu Sep 11 16:53:11 2014 -0400\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Conflicts:\n    \trequirements.txt\n    \n    Closes-Bug: #1368391\n    Change-Id: Ic814a91038800201603baf33ca40e4586944343b\n    (cherry picked from commit eb01ccba28b0feabe6220c125776fee3c2c52505)\n", 
            "date_created": "2014-09-14 22:23:04.073273+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121007\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=4a8d6ca1ac9292d859b479eece8b741ad1163776\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit 4a8d6ca1ac9292d859b479eece8b741ad1163776\nAuthor: Joe Gordon <email address hidden>\nDate:   Thu Sep 11 12:38:57 2014 -0700\n\n    Block sqlalchemy migrate 0.9.2 as it breaks all of nova\n    \n    This is breaking nova unit tests\n    \n    Closes-Bug: #1368391\n    (cherry picked from commit 9c2d6f21854bc79f03095163b8133a9fec68f9f2)\n    \n    Change-Id: Ic82d787e41f7b6d6153d3c6b19902cc11a1c43bb\n", 
            "date_created": "2014-09-15 14:33:30.991406+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121010\nCommitted: https://git.openstack.org/cgit/openstack/glance/commit/?id=f43b1c2612580ddd8430c8d5cc7a07831c6ae97e\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit f43b1c2612580ddd8430c8d5cc7a07831c6ae97e\nAuthor: Adam Gandelman <email address hidden>\nDate:   Fri Sep 12 00:14:23 2014 -0700\n\n    Block sqlalchemy-migrate 0.9.2\n    \n    Breaks unit tests.\n    \n    Closes-Bug: #1368391\n    (cherry picked from commit a8e54eccbb11ccdff2ac336514e669bc9218b5c9)\n    \n    Change-Id: I347a20fd35ae20f1de5db7f2608090b08af6c0ff\n", 
            "date_created": "2014-09-16 14:30:10.659405+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121032\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=675e0e5889cce269a758abf5fc6933dd09b0f9fd\nSubmitter: Jenkins\nBranch:    master\n\ncommit 675e0e5889cce269a758abf5fc6933dd09b0f9fd\nAuthor: Ihar Hrachyshka <email address hidden>\nDate:   Fri Sep 12 10:57:34 2014 +0200\n\n    SQL scripts should not manage transactions\n    \n    Cinder SQL scripts assume too much about the environment and the way in\n    which they are executed by sqlalchemy-migrate. Particularly, they manage\n    transactions on their own even though sqlalchemy-migrate do it itself,\n    plus it assumes that scripts are executed in one go (even though\n    standard Python DB-API 2.0 does not mention multi-statement SQL commands\n    to be executed on DB cursors.\n    \n    blueprint enable-mysql-connector\n    \n    Change-Id: I10c58b3af75d3ab9153a8bbd2a539bf1577de328\n    Closes-Bug: 1368391\n", 
            "date_created": "2014-10-14 06:39:00.822193+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "The migrate patch is here: https://review.openstack.org/#/c/121517/", 
            "date_created": "2015-01-08 21:38:11.187100+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121517\nCommitted: https://git.openstack.org/cgit/stackforge/sqlalchemy-migrate/commit/?id=938757e7aa581646a6a501426a5dae84ebe5631f\nSubmitter: Jenkins\nBranch:    master\n\ncommit 938757e7aa581646a6a501426a5dae84ebe5631f\nAuthor: Ihar Hrachyshka <email address hidden>\nDate:   Mon Sep 15 13:58:07 2014 +0200\n\n    Ignore transaction management statements in SQL scripts\n    \n    Now that we don't run SQL script with a single .execute() call,\n    transaction management statements (BEGIN, COMMIT, END) fail with\n    operational error. Ignore them if occurred in a script.\n    \n    All in all, transactions are managed by SQLAlchemy-migrate itself, so\n    there is no reason for the calling code to pass those statements in a\n    SQL script. Warn user about the statements that are ignored.\n    \n    The ideal response to such a warning from library users is removing\n    those redundant transaction management statements from their scripts.\n    \n    Note: ROLLBACK is not ignored even though it's one of transaction\n    management statements because its usage in migration scripts is insane\n    anyway, and we're better fail on it and not (almost) silently ignore it.\n    \n    Change-Id: Ie4179c0e9341d42656d66821aaac23f8dcd33927\n    Closes-bug: 1368391\n", 
            "date_created": "2015-01-09 23:57:48.527132+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121033\nCommitted: https://git.openstack.org/cgit/openstack/glance/commit/?id=92a7111e9e5a9e3494ba1ce074f673bc11328c63\nSubmitter: Jenkins\nBranch:    master\n\ncommit 92a7111e9e5a9e3494ba1ce074f673bc11328c63\nAuthor: Ihar Hrachyshka <email address hidden>\nDate:   Fri Sep 12 11:02:31 2014 +0200\n\n    SQL scripts should not manage transactions\n    \n    Glance SQL scripts assume too much about the environment and the way in\n    which they are executed by sqlalchemy-migrate. Particularly, they manage\n    transactions on their own even though sqlalchemy-migrate do it itself,\n    plus it assumes that scripts are executed in one go (even though\n    standard Python DB-API 2.0 does not mention multi-statement SQL commands\n    to be executed on DB cursors.\n    \n    Also fix comments to be actual SQL comments and not C comments\n    \n    https://blueprints.launchpad.net/oslo.db/+spec/enable-mysql-connector\n    \n    Change-Id: I10c58b3af75d3ab9153a8bbd2a539bf1577de328\n    Closes-Bug: 1368391\n    Closes-Bug: 1410494\n", 
            "date_created": "2015-01-14 15:37:47.735466+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Ihar Hrachyshka (<email address hidden>) on branch: stable/juno\nReview: https://review.openstack.org/147217\nReason: We're going to cap sqlalchemy-migrate version instead.", 
            "date_created": "2015-01-14 19:27:55.531871+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Ihar Hrachyshka (<email address hidden>) on branch: stable/icehouse\nReview: https://review.openstack.org/147218\nReason: We're going to cap sqlalchemy-migrate version instead.", 
            "date_created": "2015-01-14 19:28:04.801386+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/121028\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=1a488589089ba5e5e44560badbea8e9c8a9fc3fe\nSubmitter: Jenkins\nBranch:    master\n\ncommit 1a488589089ba5e5e44560badbea8e9c8a9fc3fe\nAuthor: Ihar Hrachyshka <email address hidden>\nDate:   Fri Sep 12 10:40:09 2014 +0200\n\n    SQL scripts should not manage transactions\n    \n    Nova SQL scripts assume too much about the environment and the way in\n    which they are executed by sqlalchemy-migrate. Particularly, they manage\n    transactions on their own even though sqlalchemy-migrate do it itself,\n    plus it assumes that scripts are executed in one go (even though\n    standard Python DB-API 2.0 does not mention multi-statement SQL commands\n    to be executed on DB cursors.\n    \n    blueprint enable-mysql-connector\n    \n    Change-Id: I10c58b3af75d3ab9153a8bbd2a539bf1577de328\n    Closes-Bug: 1368391\n", 
            "date_created": "2015-01-15 16:06:44.683203+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/191956", 
            "date_created": "2015-06-15 20:04:13.479017+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/191956\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=f20d5943c9310e742d976c26337fac5d07238c97\nSubmitter: Jenkins\nBranch:    master\n\ncommit f20d5943c9310e742d976c26337fac5d07238c97\nAuthor: John Griffith <email address hidden>\nDate:   Mon Jun 15 14:02:28 2015 -0600\n\n    SQL scripts should not manage transactions\n    \n    This bug was fixed a while back, but the migration added for\n    multi-attach reintroduced it for its sqlite_downgrade file.\n    \n    This patch removes it.\n    \n    blueprint enable-mysql-connector\n    \n    Change-Id: Iaec8713bf5cf36bcc97afbca8dd025cda9c2238d\n    Closes-Bug: 1368391\n", 
            "date_created": "2015-06-16 04:04:02.160432+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-10-01 07:35:24.573642+00:00"
}