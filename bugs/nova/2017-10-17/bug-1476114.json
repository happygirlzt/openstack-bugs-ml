{
    "status": "Confirmed", 
    "last_updated": "2017-09-28 13:23:14.911985+00:00", 
    "description": "Launching instance fails when using a volume that is created using a snapshot of  a volume-backended instance.\n\nHow to reproduce:\n\nStep 1:\nCreate an volume backended instance.\n\nroot@zheng-dev1:/var/log/nova# nova boot --flavor 1 --boot-volume daaddb77-4257-4ccd-86f2-220b31a0ce9b --nic net-id=8744ee96-7690-43bb-89b4-fcac805557bc test1\n\nroot@zheng-dev1:/var/log/nova# nova list\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name  | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n| ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a | test1 | ACTIVE | -          | Running     | public=2001:db8::6, 172.24.4.5 |\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n\nStep 2:\nCreate a snapshot of this instance using nova image-create, this will create an image in glance.\n\nroot@zheng-dev1:/var/log/nova# nova image-create ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a test-image\nroot@zheng-dev1:/var/log/nova# glance image-list\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n| ID                                   | Name                            | Disk Format | Container Format | Size     | Status |\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n| 7bdff9a3-d051-4e75-bcd3-de69dbffe063 | cirros-0.3.4-x86_64-uec         | ami         | ami              | 25165824 | active |\n| 2af2dce2-f778-4d73-b827-5281741fc1cf | cirros-0.3.4-x86_64-uec-kernel  | aki         | aki              | 4979632  | active |\n| 60ea7020-fcc1-4535-af5e-0e894a01a44a | cirros-0.3.4-x86_64-uec-ramdisk | ari         | ari              | 3740163  | active |\n| ce7b2d17-196a-4871-bc1b-9dcb184863be | test-image                      |             |                  |          | active |\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n\nStep 3:\nCreate a new volume using the previously created image.\n\nroot@zheng-dev1:/var/log/nova# cinder create --image-id ce7b2d17-196a-4871-bc1b-9dcb184863be --name test-volume 1\n+---------------------------------------+--------------------------------------+\n|                Property               |                Value                 |\n+---------------------------------------+--------------------------------------+\n|              attachments              |                  []                  |\n|           availability_zone           |                 nova                 |\n|                bootable               |                false                 |\n|          consistencygroup_id          |                 None                 |\n|               created_at              |      2015-07-20T06:44:41.000000      |\n|              description              |                 None                 |\n|               encrypted               |                False                 |\n|                   id                  | cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 |\n|                metadata               |                  {}                  |\n|              multiattach              |                False                 |\n|                  name                 |             test-volume              |\n|         os-vol-host-attr:host         |                 None                 |\n|     os-vol-mig-status-attr:migstat    |                 None                 |\n|     os-vol-mig-status-attr:name_id    |                 None                 |\n|      os-vol-tenant-attr:tenant_id     |   b8112a8d8227490eba99419b8a8c2555   |\n|   os-volume-replication:driver_data   |                 None                 |\n| os-volume-replication:extended_status |                 None                 |\n|           replication_status          |               disabled               |\n|                  size                 |                  1                   |\n|              snapshot_id              |                 None                 |\n|              source_volid             |                 None                 |\n|                 status                |               creating               |\n|                user_id                |   ed64bccd0227444fa02dbd7695769a7d   |\n|              volume_type              |             lvmdriver-1              |\n+---------------------------------------+--------------------------------------+\nroot@zheng-dev1:/var/log/nova# cinder list\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n|                  ID                  |   Status  |       Name      | Size | Volume Type | Bootable |             Attached to              |\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n| cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 | available |   test-volume   |  1   | lvmdriver-1 |   true   |                                      |\n| daaddb77-4257-4ccd-86f2-220b31a0ce9b |   in-use  | bootable-volume |  1   | lvmdriver-1 |   true   | ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a |\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n\nStep 4:\nUsing this volume to boot an new instance.\n\nroot@zheng-dev1:/var/log/nova# nova boot --flavor 1 --boot-volume cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 --nic net-id=8744ee96-7690-43bb-89b4-fcac805557bc test2\n\n\n\nERROR LOG:\n\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack [req-079d1169-0bbb-4b0a-bb1b-a72467585385 ed64bccd0227444fa02dbd7695769a7d b8112a8d8227490eba99419b8a8c2555 - - -] Caught error: 'unicode' object has no attribute 'update'\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack Traceback (most recent call last):\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 126, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return req.get_response(self.application)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1317, in send\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     application, catch_exc_info=False)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1281, in call_application\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token/__init__.py\", line 536, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     response = request.get_response(self._app)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1317, in send\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     application, catch_exc_info=False)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1281, in call_application\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 136, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     response = self.app(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 756, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     content_type, body, accept)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 821, in _process_stack\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 911, in dispatch\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return method(req=request, **action_args)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 643, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     self._handle_create_exception(*sys.exc_info())\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 472, in _handle_create_exception\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     six.reraise(*exc_info)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 628, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     check_server_group_quota=check_server_group_quota)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/hooks.py\", line 149, in inner\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     rv = f(*args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1479, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     check_server_group_quota=check_server_group_quota)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1114, in _create_instance\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     block_device_mapping, legacy_bdm)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 738, in _check_and_transform_bdm\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     base_options, instance_type, image_meta, root_device_name)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 684, in _get_image_defined_bdms\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     image_defined_bdms = image_properties.get('block_device_mapping', [])\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/block_device.py\", line 83, in __init__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     bdm_dict.update(kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack AttributeError: 'unicode' object has no attribute 'update'\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack \n2015-07-20 14:45:27.455 12962 INFO nova.api.openstack [req-079d1169-0bbb-4b0a-bb1b-a72467585385 ed64bccd0227444fa02dbd7695769a7d b8112a8d8227490eba99419b8a8c2555 - - -] http://10.250.10.17:8774/v2/b8112a8d8227490eba99419b8a8c2555/os-volumes_boot returned with HTTP 500", 
    "tags": [
        "api", 
        "low-hanging-fruit", 
        "volumes"
    ], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1476114", 
    "owner": "https://api.launchpad.net/1.0/~omkar-telee", 
    "id": 1476114, 
    "index": 4298, 
    "openned": "2015-07-20 06:46:16.889406+00:00", 
    "created": "2015-07-20 06:46:16.889406+00:00", 
    "title": "Launch instance failed using instances' snapshot created volume", 
    "comments": [
        {
            "content": "Launching instance fails when using a volume that is created using a snapshot of  a volume-backended instance.\n\nHow to reproduce:\n\nStep 1:\nCreate an volume backended instance.\n\nroot@zheng-dev1:/var/log/nova# nova boot --flavor 1 --boot-volume daaddb77-4257-4ccd-86f2-220b31a0ce9b --nic net-id=8744ee96-7690-43bb-89b4-fcac805557bc test1\n\nroot@zheng-dev1:/var/log/nova# nova list\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name  | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n| ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a | test1 | ACTIVE | -          | Running     | public=2001:db8::6, 172.24.4.5 |\n+--------------------------------------+-------+--------+------------+-------------+--------------------------------+\n\nStep 2:\nCreate a snapshot of this instance using nova image-create, this will create an image in glance.\n\nroot@zheng-dev1:/var/log/nova# nova image-create ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a test-image\nroot@zheng-dev1:/var/log/nova# glance image-list\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n| ID                                   | Name                            | Disk Format | Container Format | Size     | Status |\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n| 7bdff9a3-d051-4e75-bcd3-de69dbffe063 | cirros-0.3.4-x86_64-uec         | ami         | ami              | 25165824 | active |\n| 2af2dce2-f778-4d73-b827-5281741fc1cf | cirros-0.3.4-x86_64-uec-kernel  | aki         | aki              | 4979632  | active |\n| 60ea7020-fcc1-4535-af5e-0e894a01a44a | cirros-0.3.4-x86_64-uec-ramdisk | ari         | ari              | 3740163  | active |\n| ce7b2d17-196a-4871-bc1b-9dcb184863be | test-image                      |             |                  |          | active |\n+--------------------------------------+---------------------------------+-------------+------------------+----------+--------+\n\nStep 3:\nCreate a new volume using the previously created image.\n\nroot@zheng-dev1:/var/log/nova# cinder create --image-id ce7b2d17-196a-4871-bc1b-9dcb184863be --name test-volume 1\n+---------------------------------------+--------------------------------------+\n|                Property               |                Value                 |\n+---------------------------------------+--------------------------------------+\n|              attachments              |                  []                  |\n|           availability_zone           |                 nova                 |\n|                bootable               |                false                 |\n|          consistencygroup_id          |                 None                 |\n|               created_at              |      2015-07-20T06:44:41.000000      |\n|              description              |                 None                 |\n|               encrypted               |                False                 |\n|                   id                  | cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 |\n|                metadata               |                  {}                  |\n|              multiattach              |                False                 |\n|                  name                 |             test-volume              |\n|         os-vol-host-attr:host         |                 None                 |\n|     os-vol-mig-status-attr:migstat    |                 None                 |\n|     os-vol-mig-status-attr:name_id    |                 None                 |\n|      os-vol-tenant-attr:tenant_id     |   b8112a8d8227490eba99419b8a8c2555   |\n|   os-volume-replication:driver_data   |                 None                 |\n| os-volume-replication:extended_status |                 None                 |\n|           replication_status          |               disabled               |\n|                  size                 |                  1                   |\n|              snapshot_id              |                 None                 |\n|              source_volid             |                 None                 |\n|                 status                |               creating               |\n|                user_id                |   ed64bccd0227444fa02dbd7695769a7d   |\n|              volume_type              |             lvmdriver-1              |\n+---------------------------------------+--------------------------------------+\nroot@zheng-dev1:/var/log/nova# cinder list\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n|                  ID                  |   Status  |       Name      | Size | Volume Type | Bootable |             Attached to              |\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n| cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 | available |   test-volume   |  1   | lvmdriver-1 |   true   |                                      |\n| daaddb77-4257-4ccd-86f2-220b31a0ce9b |   in-use  | bootable-volume |  1   | lvmdriver-1 |   true   | ef3c6074-4d38-4d7b-8d93-d0ace58d3a6a |\n+--------------------------------------+-----------+-----------------+------+-------------+----------+--------------------------------------+\n\nStep 4:\nUsing this volume to boot an new instance.\n\nroot@zheng-dev1:/var/log/nova# nova boot --flavor 1 --boot-volume cc21dc7d-aa4b-4e24-8f11-8b916c5d6347 --nic net-id=8744ee96-7690-43bb-89b4-fcac805557bc test2\n\n\n\nERROR LOG:\n\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack [req-079d1169-0bbb-4b0a-bb1b-a72467585385 ed64bccd0227444fa02dbd7695769a7d b8112a8d8227490eba99419b8a8c2555 - - -] Caught error: 'unicode' object has no attribute 'update'\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack Traceback (most recent call last):\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 126, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return req.get_response(self.application)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1317, in send\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     application, catch_exc_info=False)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1281, in call_application\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token/__init__.py\", line 536, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     response = request.get_response(self._app)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1317, in send\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     application, catch_exc_info=False)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1281, in call_application\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 136, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     response = self.app(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return resp(environ, start_response)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 756, in __call__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     content_type, body, accept)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 821, in _process_stack\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 911, in dispatch\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     return method(req=request, **action_args)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 643, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     self._handle_create_exception(*sys.exc_info())\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 472, in _handle_create_exception\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     six.reraise(*exc_info)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 628, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     check_server_group_quota=check_server_group_quota)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/hooks.py\", line 149, in inner\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     rv = f(*args, **kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1479, in create\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     check_server_group_quota=check_server_group_quota)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1114, in _create_instance\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     block_device_mapping, legacy_bdm)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 738, in _check_and_transform_bdm\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     base_options, instance_type, image_meta, root_device_name)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 684, in _get_image_defined_bdms\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     image_defined_bdms = image_properties.get('block_device_mapping', [])\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack   File \"/opt/stack/nova/nova/block_device.py\", line 83, in __init__\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack     bdm_dict.update(kwargs)\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack AttributeError: 'unicode' object has no attribute 'update'\n2015-07-20 14:45:27.450 12962 ERROR nova.api.openstack \n2015-07-20 14:45:27.455 12962 INFO nova.api.openstack [req-079d1169-0bbb-4b0a-bb1b-a72467585385 ed64bccd0227444fa02dbd7695769a7d b8112a8d8227490eba99419b8a8c2555 - - -] http://10.250.10.17:8774/v2/b8112a8d8227490eba99419b8a8c2555/os-volumes_boot returned with HTTP 500", 
            "date_created": "2015-07-20 06:46:16.889406+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhengzhenyu"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/203500", 
            "date_created": "2015-07-20 07:10:20.180330+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Zhenyu Zheng (<email address hidden>) on branch: master\nReview: https://review.openstack.org/203500", 
            "date_created": "2015-08-04 01:15:27.600288+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "So looks like the above fix was OK ish. We need to double check this still happens, then fix up this case in the API\n\nAs this is a 500 error the fix does not require a microversion, it's a bug that could potentially be backported.", 
            "date_created": "2016-07-12 14:41:02.282555+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "@John Garbutt, I have checked and it seems correct now in master branch.", 
            "date_created": "2016-07-14 08:11:47.702094+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhengzhenyu"
        }, 
        {
            "content": "reproduced in master:\nroot@zhenyu-dev:/opt/stack/nova# git log\ncommit 1a643bf934e5b113a61b0dc9f812e66f55f19769\nMerge: d966d33 fb9a0b8\nAuthor: Jenkins <email address hidden>\nDate:   Wed May 17 00:26:21 2017 +0000\n\n    Merge \"Make NovaException format errors fatal for tests\"\n\n\nNova API log\nhttp://paste.openstack.org/show/609733/", 
            "date_created": "2017-05-17 06:01:41.468488+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhengzhenyu"
        }
    ]
}