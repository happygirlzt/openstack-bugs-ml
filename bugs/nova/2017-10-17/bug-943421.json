{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 10:53:28.760749+00:00", 
    "description": "Sample traceback\n\n2012-02-23 16:27:51,425 ERROR nova.compute.manager [-] Missing required credential: p\nassword. Setting instance vm_state to ERROR\n2012-02-23 16:27:51,684 DEBUG nova.rpc.common [-] Sending notification on notifications.error... from (pid=30124) notify /usr/lib/python2.6/dist-packages/nova/rpc/amqp.py:358\n2012-02-23 16:27:51,701 ERROR nova.rpc.common [-] Exception during message handling\n(nova.rpc.common): TRACE: Traceback (most recent call last):\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/rpc/amqp.py\", line 249, in _process_data\n(nova.rpc.common): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/exception.py\", line 125, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 150, in decorated_function\n(nova.rpc.common): TRACE:     function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 173, in decorated_function\n(nova.rpc.common): TRACE:     self.add_instance_fault_from_exc(context, instance_uuid, e)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/contextlib.py\", line 23, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 168, in decorated_function\n(nova.rpc.common): TRACE:     return function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1332, in finish_resize\n(nova.rpc.common): TRACE:     self._set_instance_error_state(context, instance_ref.uuid)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/contextlib.py\", line 23, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1327, in finish_resize\n(nova.rpc.common): TRACE:     disk_info)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1294, in _finish_resize\n(nova.rpc.common): TRACE:     image_meta = _get_image_meta(context, instance_ref['image_ref'])\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 180, in _get_image_meta\n(nova.rpc.common): TRACE:     return image_service.show(context, image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/image/glance.py\", line 235, in show\n(nova.rpc.common): TRACE:     image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/image/glance.py\", line 144, in _call_retry\n(nova.rpc.common): TRACE:     return getattr(client, name)(*args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/client.py\", line 97, in get_image_meta\n(nova.rpc.common): TRACE:     res = self.do_request(\"HEAD\", \"/images/%s\" % image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/client.py\", line 60, in wrapped\n(nova.rpc.common): TRACE:     self._authenticate(force_reauth=True)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/client.py\", line 367, in _authenticate\n(nova.rpc.common): TRACE:     auth_plugin.authenticate()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/auth.py\", line 107, in authenticate\n(nova.rpc.common): TRACE:     check_auth_params()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/auth.py\", line 89, in check_auth_params\n(nova.rpc.common): TRACE:     raise exception.MissingCredentialError(required=required)\n(nova.rpc.common): TRACE: MissingCredentialError: Missing required credential: password\n(nova.rpc.common): TRACE:", 
    "tags": [], 
    "importance": "High", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/943421", 
    "owner": "https://api.launchpad.net/1.0/~markwash", 
    "id": 943421, 
    "index": 602, 
    "openned": "2012-02-29 17:20:14.724908+00:00", 
    "created": "2012-02-29 17:20:14.724908+00:00", 
    "title": "Token expiration during resize causes vm to go to ERROR state", 
    "comments": [
        {
            "content": "Sample traceback\n\n2012-02-23 16:27:51,425 ERROR nova.compute.manager [-] Missing required credential: p\nassword. Setting instance vm_state to ERROR\n2012-02-23 16:27:51,684 DEBUG nova.rpc.common [-] Sending notification on notifications.error... from (pid=30124) notify /usr/lib/python2.6/dist-packages/nova/rpc/amqp.py:358\n2012-02-23 16:27:51,701 ERROR nova.rpc.common [-] Exception during message handling\n(nova.rpc.common): TRACE: Traceback (most recent call last):\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/rpc/amqp.py\", line 249, in _process_data\n(nova.rpc.common): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/exception.py\", line 125, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 150, in decorated_function\n(nova.rpc.common): TRACE:     function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 173, in decorated_function\n(nova.rpc.common): TRACE:     self.add_instance_fault_from_exc(context, instance_uuid, e)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/contextlib.py\", line 23, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 168, in decorated_function\n(nova.rpc.common): TRACE:     return function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1332, in finish_resize\n(nova.rpc.common): TRACE:     self._set_instance_error_state(context, instance_ref.uuid)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/contextlib.py\", line 23, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1327, in finish_resize\n(nova.rpc.common): TRACE:     disk_info)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 1294, in _finish_resize\n(nova.rpc.common): TRACE:     image_meta = _get_image_meta(context, instance_ref['image_ref'])\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/compute/manager.py\", line 180, in _get_image_meta\n(nova.rpc.common): TRACE:     return image_service.show(context, image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/image/glance.py\", line 235, in show\n(nova.rpc.common): TRACE:     image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/nova/image/glance.py\", line 144, in _call_retry\n(nova.rpc.common): TRACE:     return getattr(client, name)(*args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/client.py\", line 97, in get_image_meta\n(nova.rpc.common): TRACE:     res = self.do_request(\"HEAD\", \"/images/%s\" % image_id)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/client.py\", line 60, in wrapped\n(nova.rpc.common): TRACE:     self._authenticate(force_reauth=True)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/client.py\", line 367, in _authenticate\n(nova.rpc.common): TRACE:     auth_plugin.authenticate()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/auth.py\", line 107, in authenticate\n(nova.rpc.common): TRACE:     check_auth_params()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.6/dist-packages/glance/common/auth.py\", line 89, in check_auth_params\n(nova.rpc.common): TRACE:     raise exception.MissingCredentialError(required=required)\n(nova.rpc.common): TRACE: MissingCredentialError: Missing required credential: password\n(nova.rpc.common): TRACE:", 
            "date_created": "2012-02-29 17:20:14.724908+00:00", 
            "author": "https://api.launchpad.net/1.0/~markwash"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/4698", 
            "date_created": "2012-02-29 17:26:02.710420+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/4698\nCommitted: http://github.com/openstack/nova/commit/65a7a677c0b1956268939637e384f82ef16cd412\nSubmitter: Jenkins\nBranch:    master\n\ncommit 65a7a677c0b1956268939637e384f82ef16cd412\nAuthor: Mark Washenberger <email address hidden>\nDate:   Fri Feb 24 08:52:51 2012 -0500\n\n    Perform image show early in the resize process\n    \n    This change addresses bug 943421 by performing glance interactions\n    much earlier in the resize process. This prevents token expiration\n    from breaking resizes.\n    \n    - added a comment to the compute api change to give some context and\n      help prevent regression on this bug\n    \n    Change-Id: I21619f9f6189d5bdec64de47988985cbc3b8016d\n", 
            "date_created": "2012-02-29 19:31:54.704812+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-03-20 08:41:08.202709+00:00"
}