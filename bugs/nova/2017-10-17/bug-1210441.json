{
    "status": "Invalid", 
    "last_updated": "2013-08-20 04:47:45.724050+00:00", 
    "description": "On the latest nova source(2013/08/08 commit: a943f1403f66272655c337c5863c79dc2ed79549),\nrun_tests.sh fails with following log:\n\n== start of log =========================================================================\n$ ./run_tests.sh\n[snip]\nDownloading/unpacking python-cinderclient>=1.0.1 (from -r /opt/stack/nova/requirements.txt (line 24))\n  Downloading python-cinderclient-1.0.5.tar.gz (117kB): 117kB downloaded\n  Running setup.py egg_info for package python-cinderclient\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    Couldn't find index page for 'pbr' (maybe misspelled?)\n    Download error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    No local packages or download links found for pbr>=0.5.20\n    Traceback (most recent call last):\n      File \"<string>\", line 16, in <module>\n      File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n        pbr=True)\n      File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n        self.fetch_build_eggs(attrs.pop('setup_requires'))\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n        parse_requirements(requires), installer=self.fetch_build_egg\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n        dist = best[req.key] = env.best_match(req, self, installer)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n        return self.obtain(req, installer) # try and download/install\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n        return installer(requirement)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n        return cmd.easy_install(req)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n        raise DistutilsError(msg)\n    distutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n    Complete output from command python setup.py egg_info:\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nCouldn't find index page for 'pbr' (maybe misspelled?)\n\nDownload error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nNo local packages or download links found for pbr>=0.5.20\n\nTraceback (most recent call last):\n  File \"<string>\", line 16, in <module>\n  File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n    pbr=True)\n  File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n    _setup_distribution = dist = klass(attrs)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n    self.fetch_build_eggs(attrs.pop('setup_requires'))\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n    parse_requirements(requires), installer=self.fetch_build_egg\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n    dist = best[req.key] = env.best_match(req, self, installer)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n    return self.obtain(req, installer) # try and download/install\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n    return installer(requirement)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n    return cmd.easy_install(req)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n    raise DistutilsError(msg)\ndistutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in /opt/stack/nova/.venv/build/python-cinderclient\nStoring complete log in /home/oomichi/.pip/pip.log\nCommand \"tools/with_venv.sh pip install --upgrade -r /opt/stack/nova/requirements.txt\" failed.\nNone\n$\n== end of log =========================================================================\n\nThe environment where this problem happens is in http proxy, and run_tests.sh should get necessary python library through http proxy.\nOn the other environment where possible to access to the internet directly, this problem does not happen and run_tests.sh succeeds.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1210441", 
    "owner": "None", 
    "id": 1210441, 
    "index": 5206, 
    "openned": "2013-08-09 08:49:38.565935+00:00", 
    "created": "2013-08-09 08:49:38.565935+00:00", 
    "title": "run_tests.sh fails to install venv when installing pbr", 
    "comments": [
        {
            "content": "On the latest nova source(2013/08/08 commit: a943f1403f66272655c337c5863c79dc2ed79549),\nrun_tests.sh fails with following log:\n\n== start of log =========================================================================\n$ ./run_tests.sh\n[snip]\nDownloading/unpacking python-cinderclient>=1.0.1 (from -r /opt/stack/nova/requirements.txt (line 24))\n  Downloading python-cinderclient-1.0.5.tar.gz (117kB): 117kB downloaded\n  Running setup.py egg_info for package python-cinderclient\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    Couldn't find index page for 'pbr' (maybe misspelled?)\n    Download error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    No local packages or download links found for pbr>=0.5.20\n    Traceback (most recent call last):\n      File \"<string>\", line 16, in <module>\n      File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n        pbr=True)\n      File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n        self.fetch_build_eggs(attrs.pop('setup_requires'))\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n        parse_requirements(requires), installer=self.fetch_build_egg\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n        dist = best[req.key] = env.best_match(req, self, installer)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n        return self.obtain(req, installer) # try and download/install\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n        return installer(requirement)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n        return cmd.easy_install(req)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n        raise DistutilsError(msg)\n    distutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n    Complete output from command python setup.py egg_info:\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nCouldn't find index page for 'pbr' (maybe misspelled?)\n\nDownload error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nNo local packages or download links found for pbr>=0.5.20\n\nTraceback (most recent call last):\n  File \"<string>\", line 16, in <module>\n  File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n    pbr=True)\n  File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n    _setup_distribution = dist = klass(attrs)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n    self.fetch_build_eggs(attrs.pop('setup_requires'))\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n    parse_requirements(requires), installer=self.fetch_build_egg\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n    dist = best[req.key] = env.best_match(req, self, installer)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n    return self.obtain(req, installer) # try and download/install\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n    return installer(requirement)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n    return cmd.easy_install(req)\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n    raise DistutilsError(msg)\ndistutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in /opt/stack/nova/.venv/build/python-cinderclient\nStoring complete log in /home/oomichi/.pip/pip.log\nCommand \"tools/with_venv.sh pip install --upgrade -r /opt/stack/nova/requirements.txt\" failed.\nNone\n$\n== end of log =========================================================================\n\nThe environment where this problem happens is in http proxy, and run_tests.sh should get necessary python library through http proxy.\nOn the other environment where possible to access to the internet directly, this problem does not happen and run_tests.sh succeeds.", 
            "date_created": "2013-08-09 08:49:38.565935+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "The problem would happen when installing library required on setup.py.\n\nThe latest requirements.txt is:\n d2to1>=0.2.10,<0.3\n pbr>=0.5.16,<0.6\n [..]\n python-cinderclient>=1.0.1\n\nand  python-cinderclient's setup.py is:\n setuptools.setup(\n     setup_requires=[\n         'd2to1>=0.2.10,<0.3',\n         'pbr>=0.5,<0.6'\n     ],\n     d2to1=True\n )\n\nso if run_tests.sh runs, the download of pbr happens twice.\nOn problematic environment(in http proxy), the first download succeeds and the second fails.\n", 
            "date_created": "2013-08-09 09:00:15.495292+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "python-cinderclient now requires pbr >= 0.5.21, is this still an issue for you?\n\nhttps://github.com/openstack/python-cinderclient/blob/master/requirements.txt#L1", 
            "date_created": "2013-08-15 01:06:09.416363+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Hi Matt,\n\nThanks for your advice.\nI tried run_tests.sh of nova again and get the same issue still, because run_tests.sh tries to get the latest python-cinderclient package(version 1.0.5 now) and setup.py of python-cinderclient 1.0.5 requires 'pbr>=0.5.20'.\n\n=== the log of nova's run_tests.sh ===========================================\n\n$ ./run_tests.sh\n[..]\nDownloading/unpacking python-cinderclient>=1.0.1 (from -r /opt/stack/nova/requirements.txt (line 24))\n  Downloading python-cinderclient-1.0.5.tar.gz (117kB): 117kB downloaded\n  Running setup.py egg_info for package python-cinderclient\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    Couldn't find index page for 'pbr' (maybe misspelled?)\n    Download error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n    No local packages or download links found for pbr>=0.5.20\n    Traceback (most recent call last):\n      File \"<string>\", line 16, in <module>\n      File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n        pbr=True)\n      File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n        self.fetch_build_eggs(attrs.pop('setup_requires'))\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n        parse_requirements(requires), installer=self.fetch_build_egg\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n        dist = best[req.key] = env.best_match(req, self, installer)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n        return self.obtain(req, installer) # try and download/install\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n        return installer(requirement)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n        return cmd.easy_install(req)\n      File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n        raise DistutilsError(msg)\n    distutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n    Complete output from command python setup.py egg_info:\n    Download error on https://pypi.python.org/simple/pbr/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nCouldn't find index page for 'pbr' (maybe misspelled?)\n\nDownload error on https://pypi.python.org/simple/: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol -- Some packages may not be found!\n\nNo local packages or download links found for pbr>=0.5.20\n\nTraceback (most recent call last):\n\n  File \"<string>\", line 16, in <module>\n\n  File \"/opt/stack/nova/.venv/build/python-cinderclient/setup.py\", line 22, in <module>\n\n    pbr=True)\n\n  File \"/usr/lib/python2.7/distutils/core.py\", line 112, in setup\n\n    _setup_distribution = dist = klass(attrs)\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 265, in __init__\n\n    self.fetch_build_eggs(attrs.pop('setup_requires'))\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 289, in fetch_build_eggs\n\n    parse_requirements(requires), installer=self.fetch_build_egg\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 618, in resolve\n\n    dist = best[req.key] = env.best_match(req, self, installer)\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 862, in best_match\n\n    return self.obtain(req, installer) # try and download/install\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/pkg_resources.py\", line 874, in obtain\n\n    return installer(requirement)\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/dist.py\", line 339, in fetch_build_egg\n\n    return cmd.easy_install(req)\n\n  File \"/opt/stack/nova/.venv/local/lib/python2.7/site-packages/setuptools/command/easy_install.py\", line 617, in easy_install\n\n    raise DistutilsError(msg)\n\ndistutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('pbr>=0.5.20')\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in /opt/stack/nova/.venv/build/python-cinderclient\nStoring complete log in /home/oomichi/.pip/pip.log\nCommand \"tools/with_venv.sh pip install --upgrade -r /opt/stack/nova/requirements.txt\" failed.\nNone\n$\n", 
            "date_created": "2013-08-15 01:36:38.895982+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "I'm not sure we're looking at the same thing, but the setup.py and requirements.txt for python-cinderclient require pbr>=0.5.21, not 0.5.20 from what I see:\n\nhttps://github.com/openstack/python-cinderclient/blob/master/setup.py#L21", 
            "date_created": "2013-08-15 01:57:22.788172+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Do you have any problems if you try building a virtual environment using this:\n\nrun_tests.sh -V -f\n\nIf you're running the tests with your local site packages, maybe try installing python-cinderclient via pip directly:\n\nsudo pip install --upgrade python-cinderclient\n\nAnd then run run_tests?", 
            "date_created": "2013-08-15 01:58:37.496433+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "> I'm not sure we're looking at the same thing, but the setup.py and requirements.txt for\n> python-cinderclient require pbr>=0.5.21, not 0.5.20 from what I see:\n\nThe latest code of python-cinderclient requires pbr>=0.5.2 as you said.\nbut nova's run_tests.sh tries to install the *package* of python-cinderclient\nand the latest package (version 1.0.5) requires 'pbr>=0.5.20'.\nhttps://pypi.python.org/pypi/python-cinderclient/1.0.5\n", 
            "date_created": "2013-08-15 02:20:54.588289+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "\"run_tests.sh -V -f\" does not solve this problem, I get the same log. (I always remove .venv directory before run_tests.sh)\n\n> If you're running the tests with your local site packages, maybe try installing python-cinderclient via pip directly:\n\nThat would be nice advice, thanks.\nI am going to try some patterns of venv/without venv and report the results later.", 
            "date_created": "2013-08-15 02:35:54.559488+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "Today(2013/08/20), I tried to run_tests.sh of nova again, it succeeded.\nThe pbr, which is installed with run_tests.sh, is version 0.5.21 and it would take over this problem.", 
            "date_created": "2013-08-20 04:45:04.982030+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "Matt, thanks for your comments.\n", 
            "date_created": "2013-08-20 04:46:50.413501+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }
    ], 
    "closed": "2013-08-20 04:47:44.236872+00:00"
}