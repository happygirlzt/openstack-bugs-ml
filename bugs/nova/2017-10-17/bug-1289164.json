{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 09:18:24.357614+00:00", 
    "description": "When showing the floating ips by host, I got this error.\n\n$ nova floating-ip-bulk-list --host xxx\nERROR: The resource could not be found. (HTTP 404) (Request-ID: req-9a17c8cf-b1cd-4092-b853-7e24126db7e8)\n\nand in the nova-api log I got this message:\n\n014-03-05 04:01:40.270 ERROR nova.api.openstack [req-9a17c8cf-b1cd-4092-b853-7e24126db7e8 admin demo] Caught error: Floating ip not found for host xxx.\n2014-03-05 04:01:40.270 TRACE nova.api.openstack Traceback (most recent call last):\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 598, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 929, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     content_type, body, accept)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 991, in _process_stack\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/floating_ips_bulk.py\", line 48, in show\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self._get_floating_ip_info(context, id)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/floating_ips_bulk.py\", line 57, in _get_floating_ip_info\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     floating_ips = db.floating_ip_get_all_by_host(context, host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/api.py\", line 356, in floating_ip_get_all_by_host\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return IMPL.floating_ip_get_all_by_host(context, host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 110, in wrapper\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return f(*args, **kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 918, in floating_ip_get_all_by_host\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     raise exception.FloatingIpNotFoundForHost(host=host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack FloatingIpNotFoundForHost: Floating ip not found for host xxx.\n2014-03-05 04:01:40.270 TRACE nova.api.openstack\n\nThe FloatingIpNotFoundForHost exception should be handled.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1289164", 
    "owner": "https://api.launchpad.net/1.0/~xu-haiwei", 
    "id": 1289164, 
    "index": 5895, 
    "openned": "2014-03-07 07:06:01.054397+00:00", 
    "created": "2014-03-07 07:06:01.054397+00:00", 
    "title": "FloatingIpNotFoundForHost isn't handled when showing floating ips by host", 
    "comments": [
        {
            "content": "When showing the floating ips by host, I got this error.\n\n$ nova floating-ip-bulk-list --host xxx\nERROR: The resource could not be found. (HTTP 404) (Request-ID: req-9a17c8cf-b1cd-4092-b853-7e24126db7e8)\n\nand in the nova-api log I got this message:\n\n014-03-05 04:01:40.270 ERROR nova.api.openstack [req-9a17c8cf-b1cd-4092-b853-7e24126db7e8 admin demo] Caught error: Floating ip not found for host xu-dev.\n2014-03-05 04:01:40.270 TRACE nova.api.openstack Traceback (most recent call last):\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 598, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 929, in __call__\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     content_type, body, accept)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 991, in _process_stack\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/floating_ips_bulk.py\", line 48, in show\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return self._get_floating_ip_info(context, id)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/floating_ips_bulk.py\", line 57, in _get_floating_ip_info\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     floating_ips = db.floating_ip_get_all_by_host(context, host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/api.py\", line 356, in floating_ip_get_all_by_host\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return IMPL.floating_ip_get_all_by_host(context, host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 110, in wrapper\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     return f(*args, **kwargs)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 918, in floating_ip_get_all_by_host\n2014-03-05 04:01:40.270 TRACE nova.api.openstack     raise exception.FloatingIpNotFoundForHost(host=host)\n2014-03-05 04:01:40.270 TRACE nova.api.openstack FloatingIpNotFoundForHost: Floating ip not found for host xu-dev.\n2014-03-05 04:01:40.270 TRACE nova.api.openstack\n\nThe FloatingIpNotFoundForHost exception should be handled.", 
            "date_created": "2014-03-07 07:06:01.054397+00:00", 
            "author": "https://api.launchpad.net/1.0/~xu-haiwei"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/78882", 
            "date_created": "2014-03-07 07:17:12.098942+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/78882\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=27b405e46c62e7084ac8db038f4b213a30dc3d23\nSubmitter: Jenkins\nBranch:    master\n\ncommit 27b405e46c62e7084ac8db038f4b213a30dc3d23\nAuthor: Haiwei Xu <email address hidden>\nDate:   Sat Mar 8 01:13:30 2014 +0900\n\n    Catch FloatingIpNotFoundForHost exception\n    \n    When showing floating ips for a given host, the FloatingIpNotFoundForHost\n    exception isn't handled when no floating ips can be found for the host.\n    This patch fixes this bug.\n    \n    Closes-Bug: #1289164\n    Change-Id: Ic25ffd66945fd40ba10d69515e0cbfeae840313c\n", 
            "date_created": "2014-03-20 23:23:16.482801+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-03-31 19:14:08.990818+00:00"
}