{
    "status": "Invalid", 
    "last_updated": "2017-09-04 23:33:41.139682+00:00", 
    "description": "With stable/newton and placement-api an instance fails to start. \n\nCompute logs shows this error:\n\n2017-03-11 04:20:58.830 7 DEBUG nova.scheduler.client.report [req-330e1b63-286f-47f4-b8ca-49365d9509b5 - - - - -] [instance: 4a33b8fc-b9a4-49ea-8afc-4cb15bd3f841] Sending allocation for instance {'allocations': [{'resource_provider': {'uuid': '610ee875-405e-4738-8099-5a218fa4986f'}, 'resources': {'MEMORY_MB': 512, 'VCPU': 1, 'DISK_GB': 1}}]} _allocate_for_instance /var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/scheduler/client/report.py:397\n2017-03-11 04:20:58.863 7 WARNING nova.scheduler.client.report [req-330e1b63-286f-47f4-b8ca-49365d9509b5 - - - - -] Unable to submit allocation for instance 4a33b8fc-b9a4-49ea-8afc-4cb15bd3f841 (409 409 Conflict\n\nThere was a conflict when trying to complete your request.\n\n Unable to allocate inventory: Unable to create allocation for 'MEMORY_MB' on resource provider '610ee875-405e-4738-8099-5a218fa4986f'. The requested amount would violate inventory constraints.  )\n\nCorresponding to this event placement-api log show this:\n\n2017-03-11 04:20:58.857 15 WARNING nova.objects.resource_provider [req-a56a49ea-eda8-4e37-b87e-cffffd26e9e1 - - - - -] Allocation for MEMORY_MB on resource provider 610ee875-405e-4738-8099-5a218fa4986f violates min_unit, max_unit, or step_size. Requested: 512, min_unit: 1, max_unit: 1, step_size: 1\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation [req-a56a49ea-eda8-4e37-b87e-cffffd26e9e1 - - - - -] Bad inventory\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation Traceback (most recent call last):\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/api/openstack/placement/handlers/allocation.py\", line 253, in set_allocations\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     allocations.create_all()\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1184, in create_all\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     self._set_allocations(self._context, self.objects)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 894, in wrapper\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     return fn(*args, **kwargs)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1146, in _set_allocations\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     before_gens = _check_capacity_exceeded(conn, allocs)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1058, in _check_capacity_exceeded\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     resource_provider=rp_uuid)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation InvalidAllocationConstraintsViolated: Unable to create allocation for 'MEMORY_MB' on resource provider '610ee875-405e-4738-8099-5a218fa4986f'. The requested amount would violate inventory constraints.\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1672041", 
    "owner": "None", 
    "id": 1672041, 
    "index": 7990, 
    "openned": "2017-03-11 14:54:47.266516+00:00", 
    "created": "2017-03-11 14:54:47.266516+00:00", 
    "title": "nova.scheduler.client.report  409 Conflict", 
    "comments": [
        {
            "content": "With stable/newton and placement-api an instance fails to start. \n\nCompute logs shows this error:\n\n2017-03-11 04:20:58.830 7 DEBUG nova.scheduler.client.report [req-330e1b63-286f-47f4-b8ca-49365d9509b5 - - - - -] [instance: 4a33b8fc-b9a4-49ea-8afc-4cb15bd3f841] Sending allocation for instance {'allocations': [{'resource_provider': {'uuid': '610ee875-405e-4738-8099-5a218fa4986f'}, 'resources': {'MEMORY_MB': 512, 'VCPU': 1, 'DISK_GB': 1}}]} _allocate_for_instance /var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/scheduler/client/report.py:397\n2017-03-11 04:20:58.863 7 WARNING nova.scheduler.client.report [req-330e1b63-286f-47f4-b8ca-49365d9509b5 - - - - -] Unable to submit allocation for instance 4a33b8fc-b9a4-49ea-8afc-4cb15bd3f841 (409 409 Conflict\n\nThere was a conflict when trying to complete your request.\n\n Unable to allocate inventory: Unable to create allocation for 'MEMORY_MB' on resource provider '610ee875-405e-4738-8099-5a218fa4986f'. The requested amount would violate inventory constraints.  )\n\nCorresponding to this event placement-api log show this:\n\n2017-03-11 04:20:58.857 15 WARNING nova.objects.resource_provider [req-a56a49ea-eda8-4e37-b87e-cffffd26e9e1 - - - - -] Allocation for MEMORY_MB on resource provider 610ee875-405e-4738-8099-5a218fa4986f violates min_unit, max_unit, or step_size. Requested: 512, min_unit: 1, max_unit: 1, step_size: 1\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation [req-a56a49ea-eda8-4e37-b87e-cffffd26e9e1 - - - - -] Bad inventory\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation Traceback (most recent call last):\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/api/openstack/placement/handlers/allocation.py\", line 253, in set_allocations\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     allocations.create_all()\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1184, in create_all\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     self._set_allocations(self._context, self.objects)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 894, in wrapper\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     return fn(*args, **kwargs)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1146, in _set_allocations\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     before_gens = _check_capacity_exceeded(conn, allocs)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/nova/objects/resource_provider.py\", line 1058, in _check_capacity_exceeded\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation     resource_provider=rp_uuid)\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation InvalidAllocationConstraintsViolated: Unable to create allocation for 'MEMORY_MB' on resource provider '610ee875-405e-4738-8099-5a218fa4986f'. The requested amount would violate inventory constraints.\n2017-03-11 04:20:58.858 15 ERROR nova.api.openstack.placement.handlers.allocation", 
            "date_created": "2017-03-11 14:54:47.266516+00:00", 
            "author": "https://api.launchpad.net/1.0/~sbezverk"
        }, 
        {
            "content": "From description you provided it doesn't look like an error.\n\n> Unable to create allocation for 'MEMORY_MB' on resource provider '610ee875-405e-4738-8099-5a218fa4986f'. The requested amount would violate inventory constraints.\n\nmeans that on compute node you don't have enough memory resource.\nYou could look either at DB state (http://ix.io/oXq) or at placement API (http://ix.io/oXr)", 
            "date_created": "2017-03-13 16:30:42.690318+00:00", 
            "author": "https://api.launchpad.net/1.0/~avolkov"
        }
    ], 
    "closed": "2017-09-04 23:33:39.755471+00:00"
}