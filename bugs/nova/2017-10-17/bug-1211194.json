{
    "status": "Won't Fix", 
    "last_updated": "2014-09-04 17:40:13.061961+00:00", 
    "description": "\nnova-compute(folsom)  segmentation fault  libvirt_type=lxc\ngrizzly seems to be the same .\n\nwhen I was creating a new instance, the nova-compute segmentation fault. but the LXC container seems running ok !\n\n=======================LOG===========================\n\n2013-08-12 07:34:38 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:38 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:39 DEBUG nova.network.linux_net [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] IPTablesManager.apply completed with success _apply /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/network/linux_net.py:375\n2013-08-12 07:34:39 DEBUG nova.virt.firewall [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] [instance: 608dae79-e40b-4139-a925-80b77783eaec] Provider Firewall Rules refreshed prepare_instance_filter /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/virt/firewall.py:193\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Got semaphore \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:764\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Attempting to grab file lock \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:768\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Got file lock \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:794\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t filter execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:42 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:42 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:43 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:43 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t mangle execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:44 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:44 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:45 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:45 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t nat execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:47 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:47 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:48 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:48 DEBUG nova.network.linux_net [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] IPTablesManager.apply completed with success _apply /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/network/linux_net.py:375\nSegmentation fault", 
    "tags": [
        "compute", 
        "lxc"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1211194", 
    "owner": "None", 
    "id": 1211194, 
    "index": 1179, 
    "openned": "2013-08-12 07:41:25.118485+00:00", 
    "created": "2013-08-12 07:41:25.118485+00:00", 
    "title": " nova-compute(folsom)  segmentation fault  libvirt_type=lxc", 
    "comments": [
        {
            "content": " nova-compute(folsom)  segmentation fault  libvirt_type=lxc\ngrizzly seems to be the same .\n\nwhen I was creating a new instance, the nova-compute segmentation fault. but the LXC container seems running ok !\n\n\n2013-08-12 07:34:38 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:38 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:39 DEBUG nova.network.linux_net [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] IPTablesManager.apply completed with success _apply /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/network/linux_net.py:375\n2013-08-12 07:34:39 DEBUG nova.virt.firewall [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] [instance: 608dae79-e40b-4139-a925-80b77783eaec] Provider Firewall Rules refreshed prepare_instance_filter /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/virt/firewall.py:193\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Got semaphore \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:764\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Attempting to grab file lock \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:768\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Got file lock \"iptables\" for method \"_apply\"... inner /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:794\n2013-08-12 07:34:39 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t filter execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:42 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:42 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:43 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:43 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t mangle execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:44 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:44 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:45 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:45 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-save -c -t nat execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:47 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:47 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iptables-restore -c execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:187\n2013-08-12 07:34:48 DEBUG nova.utils [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] Result was 0 execute /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/utils.py:203\n2013-08-12 07:34:48 DEBUG nova.network.linux_net [req-fe05d497-a694-4208-80aa-cb20a9ec8315 651f24b16d33415cb0aa684ee4d0a7d5 b9aa4945e61e47e39f0687c740d1017e] IPTablesManager.apply completed with success _apply /usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/network/linux_net.py:375\nSegmentation fault", 
            "date_created": "2013-08-12 07:41:25.118485+00:00", 
            "author": "https://api.launchpad.net/1.0/~jj-t"
        }, 
        {
            "content": "diff --git a/nova/virt/libvirt/driver.py b/nova/virt/libvirt/driver.py\n\n\n@@ -1918,7 +1936,9 @@ class LibvirtDriver(driver.ComputeDriver):\n         \"\"\"\n         if xml:\n             domain = self._conn.defineXML(xml)\n-        domain.createWithFlags(launch_flags)\n+        domain.create()\n         self._enable_hairpin(domain.XMLDesc(0))\n         return domain\n\nThis would solve it ,but i digged into libvirt 1.1.1, the domain.create() and domain.createWithFlags(0) seem to\ninvoke the same driver function in libvirt ~~.", 
            "date_created": "2013-09-20 04:26:39.128921+00:00", 
            "author": "https://api.launchpad.net/1.0/~jj-t"
        }, 
        {
            "content": "Is this still valid?  Folsom has been end of lifed.", 
            "date_created": "2014-07-12 19:48:03.354732+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }
    ], 
    "closed": "2014-09-04 17:40:10.313933+00:00"
}