{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:19:05.744150+00:00", 
    "description": "When measuring coverage repeatedly, nova-api and other nova services represent a different approach to coverage data.\nOn the one hand nova-api accumulates each data, but other services reset data each time. \n\nFor example:\n $ nova coverage-start\n $ nova coverage-report result01\n $ nova coverage-start\n $ nova boot --image da16693a-1048-417a-8e88-976d817b4403 --flavor 1 --poll server01\n $ nova coverage-report result02\n $ nova coverage-start\n $ nova coverage-report result03\n\nThe coverage data of nova-api, nova-compute and nova-scheduler are:\n\n [nova-api] \n           Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n           ----------------------------------------------------------------------------------------------------------------------------------\n  result01 TOTAL                                                                                  50695  50127  12403  12204     1%\n  result02 TOTAL                                                                                  50695  48841  12403  11800     4%\n  result03 TOTAL                                                                                  50695  48841  12403  11800     4%\n\n [nova-compute] \n            Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n            ----------------------------------------------------------------------------------------------------------------------------------\n  result01: TOTAL                                                                                  50695  50445  12403  12289     1%\n  result02: TOTAL                                                                                  50695  48403  12403  11690     5%\n  result03: TOTAL                                                                                  50695  50694  12403  12358     1%\n\n [nova-scheduler] \n            Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n            ----------------------------------------------------------------------------------------------------------------------------------\n  result01: TOTAL                                                                                  50695  50548  12403  12317     1%\n  result02: TOTAL                                                                                  50695  49807  12403  12105     2%\n  result03: TOTAL                                                                                  50695  50694  12403  12358     1%", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1122720", 
    "owner": "https://api.launchpad.net/1.0/~ymzk37", 
    "id": 1122720, 
    "index": 3228, 
    "openned": "2013-02-12 05:02:19.161596+00:00", 
    "created": "2013-02-12 05:02:19.161596+00:00", 
    "title": "nova-api accumulates coverage data and other nova services does not", 
    "comments": [
        {
            "content": "When measuring coverage repeatedly, nova-api and other nova services represent a different approach to coverage data.\nOn the one hand nova-api accumulates each data, but other services reset data each time. \n\nFor example:\n $ nova coverage-start\n $ nova coverage-report result01\n $ nova coverage-start\n $ nova boot --image da16693a-1048-417a-8e88-976d817b4403 --flavor 1 --poll server01\n $ nova coverage-report result02\n $ nova coverage-start\n $ nova coverage-report result03\n\nThe coverage data of nova-api, nova-compute and nova-scheduler are:\n\n [nova-api] \n           Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n           ----------------------------------------------------------------------------------------------------------------------------------\n  result01 TOTAL                                                                                  50695  50127  12403  12204     1%\n  result02 TOTAL                                                                                  50695  48841  12403  11800     4%\n  result03 TOTAL                                                                                  50695  48841  12403  11800     4%\n\n [nova-compute] \n            Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n            ----------------------------------------------------------------------------------------------------------------------------------\n  result01: TOTAL                                                                                  50695  50445  12403  12289     1%\n  result02: TOTAL                                                                                  50695  48403  12403  11690     5%\n  result03: TOTAL                                                                                  50695  50694  12403  12358     1%\n\n [nova-scheduler] \n            Name                                                                                   Stmts   Miss Branch BrPart  Cover   Missing\n            ----------------------------------------------------------------------------------------------------------------------------------\n  result01: TOTAL                                                                                  50695  50548  12403  12317     1%\n  result02: TOTAL                                                                                  50695  49807  12403  12105     2%\n  result03: TOTAL                                                                                  50695  50694  12403  12358     1%", 
            "date_created": "2013-02-12 05:02:19.161596+00:00", 
            "author": "https://api.launchpad.net/1.0/~ymzk37"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/21853", 
            "date_created": "2013-02-13 05:23:47.442922+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/21853\nCommitted: http://github.com/openstack/nova/commit/9e53cbbe18e7aa292ed585958f18eda516e2bb84\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9e53cbbe18e7aa292ed585958f18eda516e2bb84\nAuthor: Mitsuhiko Yamazaki <email address hidden>\nDate:   Tue Feb 12 17:50:06 2013 +0900\n\n    Standardize the coverage initializations.\n    \n    Now when we measure coverage repeatedly, the coverage data of\n    nova-api is accumulated but the ones of other nova services are\n    reset each time.\n    This is due to create new \"coverage\" class each time\n    \"_start_coverage_telnet\" method is executed.\n    \n    This patch limits creating \"coverage\" class the first time\n    the method is executed.\n    \n    Fixes bug 1122720\n    \n    Change-Id: Ia900c96113bee65362ccb7c4c1975535d814d835\n", 
            "date_created": "2013-03-04 22:06:03.505243+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-03-20 16:09:11.761865+00:00"
}