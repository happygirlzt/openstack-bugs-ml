{
    "status": "Fix Released", 
    "last_updated": "2016-09-02 01:13:35.011869+00:00", 
    "description": "Caught here:\n\nhttps://review.openstack.org/#/c/353443/\n\nhttp://logs.openstack.org/43/353443/2/check/gate-cross-nova-python27-db-ubuntu-xenial/2b8780d/console.html#_2016-08-11_20_43_00_664121\n\n2016-08-11 20:43:00.664195 | nova.tests.unit.api.openstack.compute.test_neutron_security_groups.TestNeutronSecurityGroupsV21.test_disassociate\n2016-08-11 20:43:00.664238 | -----------------------------------------------------------------------------------------------------------------\n2016-08-11 20:43:00.664251 | \n2016-08-11 20:43:00.664270 | Captured traceback:\n2016-08-11 20:43:00.664288 | ~~~~~~~~~~~~~~~~~~~\n2016-08-11 20:43:00.664310 |     Traceback (most recent call last):\n2016-08-11 20:43:00.664351 |       File \"nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py\", line 333, in test_disassociate\n2016-08-11 20:43:00.664380 |         self.manager._removeSecurityGroup(req, UUID_SERVER, body)\n2016-08-11 20:43:00.664409 |       File \"nova/api/openstack/extensions.py\", line 370, in wrapped\n2016-08-11 20:43:00.664438 |         raise webob.exc.HTTPInternalServerError(explanation=msg)\n2016-08-11 20:43:00.664490 |     webob.exc.HTTPInternalServerError: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n2016-08-11 20:43:00.664515 |     <type 'exceptions.AttributeError'>\n2016-08-11 20:43:00.664528 |     \n2016-08-11 20:43:00.664541 | \n2016-08-11 20:43:00.664559 | Captured pythonlogging:\n2016-08-11 20:43:00.664578 | ~~~~~~~~~~~~~~~~~~~~~~~\n2016-08-11 20:43:00.664616 |     2016-08-11 20:37:58,280 ERROR [nova.api.openstack.extensions] Unexpected exception in API method\n2016-08-11 20:43:00.664638 |     Traceback (most recent call last):\n2016-08-11 20:43:00.664667 |       File \"nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-08-11 20:43:00.664688 |         return f(*args, **kwargs)\n2016-08-11 20:43:00.664725 |       File \"nova/api/openstack/compute/security_groups.py\", line 424, in _removeSecurityGroup\n2016-08-11 20:43:00.664746 |         context, id, group_name)\n2016-08-11 20:43:00.664778 |       File \"nova/api/openstack/compute/security_groups.py\", line 391, in _invoke\n2016-08-11 20:43:00.664815 |         method(context, instance, group_name)\n2016-08-11 20:43:00.664852 |       File \"nova/network/security_group/neutron_driver.py\", line 491, in remove_from_instance\n2016-08-11 20:43:00.664872 |         context.project_id)\n2016-08-11 20:43:00.664937 |       File \"/home/jenkins/workspace/gate-cross-nova-python27-db-ubuntu-xenial/.tox/py27/local/lib/python2.7/site-packages/neutronclient/neutron/v2_0/__init__.py\", line 61, in find_resourceid_by_name_or_id\n2016-08-11 20:43:00.664960 |         parent_id, fields='id')['id']\n2016-08-11 20:43:00.665025 |       File \"/home/jenkins/workspace/gate-cross-nova-python27-db-ubuntu-xenial/.tox/py27/local/lib/python2.7/site-packages/neutronclient/neutron/v2_0/__init__.py\", line 52, in find_resource_by_name_or_id\n2016-08-11 20:43:00.665055 |         return client.find_resource(resource, name_or_id, project_id,\n2016-08-11 20:43:00.665086 |     AttributeError: 'MockClient' object has no attribute 'find_resource'\n\nThese are the changes in 5.1.0:\n\nhttps://github.com/openstack/python-neutronclient/compare/5.0.0...5.1.0\n\nLooks like this is the breaking change:\n\nhttps://review.openstack.org/#/c/348096/\n\nProbably fails in nova unit tests because we use mox to mock the neutronclient", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1612494", 
    "owner": "https://api.launchpad.net/1.0/~mriedem", 
    "id": 1612494, 
    "index": 1970, 
    "openned": "2016-08-12 04:33:32.707144+00:00", 
    "created": "2016-08-12 04:33:32.707144+00:00", 
    "title": "neutronv2 unit tests fail with python-neutronclient 5.1.0", 
    "comments": [
        {
            "content": "Caught here:\n\nhttps://review.openstack.org/#/c/353443/\n\nhttp://logs.openstack.org/43/353443/2/check/gate-cross-nova-python27-db-ubuntu-xenial/2b8780d/console.html#_2016-08-11_20_43_00_664121\n\n2016-08-11 20:43:00.664195 | nova.tests.unit.api.openstack.compute.test_neutron_security_groups.TestNeutronSecurityGroupsV21.test_disassociate\n2016-08-11 20:43:00.664238 | -----------------------------------------------------------------------------------------------------------------\n2016-08-11 20:43:00.664251 | \n2016-08-11 20:43:00.664270 | Captured traceback:\n2016-08-11 20:43:00.664288 | ~~~~~~~~~~~~~~~~~~~\n2016-08-11 20:43:00.664310 |     Traceback (most recent call last):\n2016-08-11 20:43:00.664351 |       File \"nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py\", line 333, in test_disassociate\n2016-08-11 20:43:00.664380 |         self.manager._removeSecurityGroup(req, UUID_SERVER, body)\n2016-08-11 20:43:00.664409 |       File \"nova/api/openstack/extensions.py\", line 370, in wrapped\n2016-08-11 20:43:00.664438 |         raise webob.exc.HTTPInternalServerError(explanation=msg)\n2016-08-11 20:43:00.664490 |     webob.exc.HTTPInternalServerError: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n2016-08-11 20:43:00.664515 |     <type 'exceptions.AttributeError'>\n2016-08-11 20:43:00.664528 |     \n2016-08-11 20:43:00.664541 | \n2016-08-11 20:43:00.664559 | Captured pythonlogging:\n2016-08-11 20:43:00.664578 | ~~~~~~~~~~~~~~~~~~~~~~~\n2016-08-11 20:43:00.664616 |     2016-08-11 20:37:58,280 ERROR [nova.api.openstack.extensions] Unexpected exception in API method\n2016-08-11 20:43:00.664638 |     Traceback (most recent call last):\n2016-08-11 20:43:00.664667 |       File \"nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-08-11 20:43:00.664688 |         return f(*args, **kwargs)\n2016-08-11 20:43:00.664725 |       File \"nova/api/openstack/compute/security_groups.py\", line 424, in _removeSecurityGroup\n2016-08-11 20:43:00.664746 |         context, id, group_name)\n2016-08-11 20:43:00.664778 |       File \"nova/api/openstack/compute/security_groups.py\", line 391, in _invoke\n2016-08-11 20:43:00.664815 |         method(context, instance, group_name)\n2016-08-11 20:43:00.664852 |       File \"nova/network/security_group/neutron_driver.py\", line 491, in remove_from_instance\n2016-08-11 20:43:00.664872 |         context.project_id)\n2016-08-11 20:43:00.664937 |       File \"/home/jenkins/workspace/gate-cross-nova-python27-db-ubuntu-xenial/.tox/py27/local/lib/python2.7/site-packages/neutronclient/neutron/v2_0/__init__.py\", line 61, in find_resourceid_by_name_or_id\n2016-08-11 20:43:00.664960 |         parent_id, fields='id')['id']\n2016-08-11 20:43:00.665025 |       File \"/home/jenkins/workspace/gate-cross-nova-python27-db-ubuntu-xenial/.tox/py27/local/lib/python2.7/site-packages/neutronclient/neutron/v2_0/__init__.py\", line 52, in find_resource_by_name_or_id\n2016-08-11 20:43:00.665055 |         return client.find_resource(resource, name_or_id, project_id,\n2016-08-11 20:43:00.665086 |     AttributeError: 'MockClient' object has no attribute 'find_resource'\n\nThese are the changes in 5.1.0:\n\nhttps://github.com/openstack/python-neutronclient/compare/5.0.0...5.1.0\n\nLooks like this is the breaking change:\n\nhttps://review.openstack.org/#/c/348096/\n\nProbably fails in nova unit tests because we use mox to mock the neutronclient", 
            "date_created": "2016-08-12 04:33:32.707144+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/355213", 
            "date_created": "2016-08-14 01:34:45.980298+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/355213\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=be729235674b0b476b588547cd94806c59ebf2a8\nSubmitter: Jenkins\nBranch:    master\n\ncommit be729235674b0b476b588547cd94806c59ebf2a8\nAuthor: Matt Riedemann <email address hidden>\nDate:   Sat Aug 13 17:51:40 2016 -0400\n\n    Fix neutron security group tests for 5.1.0 neutronclient\n    \n    python-neutronclient 5.1.0 has a different API call for\n    find_resourceid_by_name_or_id now:\n    \n    84c42160e9eac654e734a19032237fdf1a8cb058\n    \n    That breaks the neutron security group driver unit tests\n    which are relying on a mocked out version of the neutronclient\n    which itself is a bad idea but not completely re-written here\n    \n    This blocks getting to use neutronclient 5.1.0 in\n    upper-constraints so this change just fixes the immediate\n    breakage.\n    \n    Also removes test_get_raises_no_unique_match_error which\n    duplicates the coverage from test_associate_duplicate_names\n    for the 409 scenario.\n    \n    Change-Id: Iee340361bc656a0bd3a246e02de41a8f4f89bebf\n    Closes-Bug: #1612494\n", 
            "date_created": "2016-08-17 00:13:25.965276+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b3 development milestone.", 
            "date_created": "2016-09-02 01:13:34.036451+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2016-08-17 00:13:22.835047+00:00"
}