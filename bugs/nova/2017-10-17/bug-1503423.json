{
    "status": "Fix Released", 
    "last_updated": "2015-12-03 21:37:01.665484+00:00", 
    "description": "new metadata variable: xenapi_device_id integer, expected string:\n\n\n... Failed to spawn, rolling back\n Traceback (most recent call last):\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 663, in _spawn\n     kernel_file, ramdisk_file)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 214, in inner\n     rv = f(*args, **kwargs)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 585, in create_vm_record_step\n     ramdisk_file, image_meta, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 756, in _create_vm_record\n     use_pv_kernel, device_id)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vm_utils.py\", line 333, in create_vm\n     vm_ref = session.VM.create(rec)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 62, in <lambda>\n     return lambda *params: self._call_method(method_name, *params)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 59, in _call_method\n     return self.session.call_xenapi(call, *args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/session.py\", line 212, in call_xenapi\n     return session.xenapi_request(method, args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 133, in xenapi_request\n     result = _parse_result(getattr(self, methodname)(*full_params))\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 203, in _parse_result\n     raise Failure(result['ErrorDescription'])\n Failure: ['FIELD_TYPE_ERROR', 'platform']\n\n... Instance failed to spawn\n Traceback (most recent call last):\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/compute/manager.py\", line 2208, in _build_resources\n     yield resources\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/compute/manager.py\", line 2061, in _build_and_run_instance\n     block_device_info=block_device_info)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/driver.py\", line 201, in spawn\n     admin_password, network_info, block_device_info)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 510, in spawn\n     network_info, block_device_info, name_label, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 681, in _spawn\n     undo_mgr.rollback_and_reraise(msg=msg, instance=instance)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/utils.py\", line 936, in rollback_and_reraise\n     self._rollback()\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 195, in __exit__\n     six.reraise(self.type_, self.value, self.tb)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 663, in _spawn\n     kernel_file, ramdisk_file)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 214, in inner\n     rv = f(*args, **kwargs)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 585, in create_vm_record_step\n     ramdisk_file, image_meta, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 756, in _create_vm_record\n     use_pv_kernel, device_id)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vm_utils.py\", line 333, in create_vm\n     vm_ref = session.VM.create(rec)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 62, in <lambda>\n     return lambda *params: self._call_method(method_name, *params)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 59, in _call_method\n     return self.session.call_xenapi(call, *args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/session.py\", line 212, in call_xenapi\n     return session.xenapi_request(method, args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 133, in xenapi_request\n     result = _parse_result(getattr(self, methodname)(*full_params))\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 203, in _parse_result\n     raise Failure(result['ErrorDescription'])\n Failure: ['FIELD_TYPE_ERROR', 'platform']\n \n... Terminating instance", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1503423", 
    "owner": "https://api.launchpad.net/1.0/~jesse-j-cook", 
    "id": 1503423, 
    "index": 7064, 
    "openned": "2015-10-06 20:29:50.966319+00:00", 
    "created": "2015-10-06 20:29:50.966319+00:00", 
    "title": "Build failures: device_id assigned as int instead of expected string", 
    "comments": [
        {
            "content": "new metadata variable: xenapi_device_id integer, expected string:\n\n\n... Failed to spawn, rolling back\n Traceback (most recent call last):\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 663, in _spawn\n     kernel_file, ramdisk_file)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 214, in inner\n     rv = f(*args, **kwargs)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 585, in create_vm_record_step\n     ramdisk_file, image_meta, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 756, in _create_vm_record\n     use_pv_kernel, device_id)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vm_utils.py\", line 333, in create_vm\n     vm_ref = session.VM.create(rec)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 62, in <lambda>\n     return lambda *params: self._call_method(method_name, *params)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 59, in _call_method\n     return self.session.call_xenapi(call, *args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/session.py\", line 212, in call_xenapi\n     return session.xenapi_request(method, args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 133, in xenapi_request\n     result = _parse_result(getattr(self, methodname)(*full_params))\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 203, in _parse_result\n     raise Failure(result['ErrorDescription'])\n Failure: ['FIELD_TYPE_ERROR', 'platform']\n\n... Instance failed to spawn\n Traceback (most recent call last):\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/compute/manager.py\", line 2208, in _build_resources\n     yield resources\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/compute/manager.py\", line 2061, in _build_and_run_instance\n     block_device_info=block_device_info)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/driver.py\", line 201, in spawn\n     admin_password, network_info, block_device_info)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 510, in spawn\n     network_info, block_device_info, name_label, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 681, in _spawn\n     undo_mgr.rollback_and_reraise(msg=msg, instance=instance)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/utils.py\", line 936, in rollback_and_reraise\n     self._rollback()\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 195, in __exit__\n     six.reraise(self.type_, self.value, self.tb)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 663, in _spawn\n     kernel_file, ramdisk_file)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 214, in inner\n     rv = f(*args, **kwargs)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 585, in create_vm_record_step\n     ramdisk_file, image_meta, rescue)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vmops.py\", line 756, in _create_vm_record\n     use_pv_kernel, device_id)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/vm_utils.py\", line 333, in create_vm\n     vm_ref = session.VM.create(rec)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 62, in <lambda>\n     return lambda *params: self._call_method(method_name, *params)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/objects.py\", line 59, in _call_method\n     return self.session.call_xenapi(call, *args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/nova/virt/xenapi/client/session.py\", line 212, in call_xenapi\n     return session.xenapi_request(method, args)\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 133, in xenapi_request\n     result = _parse_result(getattr(self, methodname)(*full_params))\n   File \"/opt/rackstack/rackstack.381.15/nova/lib/python2.7/site-packages/XenAPI.py\", line 203, in _parse_result\n     raise Failure(result['ErrorDescription'])\n Failure: ['FIELD_TYPE_ERROR', 'platform']\n \n... Terminating instance", 
            "date_created": "2015-10-06 20:29:50.966319+00:00", 
            "author": "https://api.launchpad.net/1.0/~jesse-j-cook"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/231703", 
            "date_created": "2015-10-06 20:33:15.758631+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/231703\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=b03ab6c2981aa0e8d71ae5b1374a44e64e8bbbf7\nSubmitter: Jenkins\nBranch:    master\n\ncommit b03ab6c2981aa0e8d71ae5b1374a44e64e8bbbf7\nAuthor: Jesse J. Cook <email address hidden>\nDate:   Tue Oct 6 15:30:47 2015 -0500\n\n    xenapi_device_id integer, expected string\n    \n    XAPI expects to get a string, not an integer, so we convert it to a\n    string before assigning it to the rec dictionary.\n    \n    The current test examples use a device_id of \"0002\". To keep consistency,\n    minimize changes, and prevent introducing further bugs, the string is\n    zero padded to maintain this format.\n    \n    Change-Id: I1a6b11ced0dc053903e91378203f5afb5740fa79\n    Closes-bug: #1503423\n", 
            "date_created": "2015-11-16 21:50:39.665665+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-12-03 21:36:59.868512+00:00"
}