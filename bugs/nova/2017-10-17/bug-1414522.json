{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:20:48.440915+00:00", 
    "description": "When call os-baremetal-nodes API at the environment in which ironic is not enable,\ninternal error occurs like below.\n\nTraceback (most recent call last):\n  File \"tempest/api/compute/admin/test_baremetal.py\", line 34, in test_list_baremetal_nodes\n    baremetal_nodes = self.client.list_baremetal_nodes()\n  File \"tempest/services/compute/json/baremetal_client.py\", line 33, in list_baremetal_nodes\n    resp, body = self.get(url)\n  File \"/usr/local/lib/python2.7/dist-packages/tempest_lib/common/rest_client.py\", line 171, in get\n    return self.request('GET', url, extra_headers, headers)\n  File \"tempest/common/service_client.py\", line 83, in request\n    raise exceptions.ServerFault(ex)\nServerFault: Got server fault\nDetails: Got server fault\nDetails: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'>\n\nhttp://logs.openstack.org/25/149125/1/check/check-tempest-dsvm-nova-v21-full/86687c5/logs/testr_results.html.gz\n\nnova-api's error log is below.\n\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 451, in wrapped\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/plugins/v3/baremetal_nodes.py\", line 97, in ind\nex\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     icli = _get_ironic_client()\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/plugins/v3/baremetal_nodes.py\", line 69, in _get_ironic_client\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     icli = ironic_client.get_client(CONF.ironic.api_version, **kwargs)\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions AttributeError: 'NoneType' object has no attribute 'get_client'\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions\n2015-01-22 03:12:47.895 INFO nova.api.openstack.wsgi [req-dc985e8a-edc5-4d34-9424-50c424e5a55c BaremetalAdminTestJSON-1435782774 BaremetalAdminTestJSON-219186341] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'>\n\nWe should catch NotImplement exception and handle it.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1414522", 
    "owner": "https://api.launchpad.net/1.0/~takada-yuiko", 
    "id": 1414522, 
    "index": 6668, 
    "openned": "2015-01-26 01:35:15.557268+00:00", 
    "created": "2015-01-26 01:35:15.557268+00:00", 
    "title": "_get_ironic_client should catch NotImplement exception and handle it", 
    "comments": [
        {
            "content": "When call os-baremetal-nodes API at the environment in which ironic is not enable,\ninternal error occurs like below.\n\nTraceback (most recent call last):\n  File \"tempest/api/compute/admin/test_baremetal.py\", line 34, in test_list_baremetal_nodes\n    baremetal_nodes = self.client.list_baremetal_nodes()\n  File \"tempest/services/compute/json/baremetal_client.py\", line 33, in list_baremetal_nodes\n    resp, body = self.get(url)\n  File \"/usr/local/lib/python2.7/dist-packages/tempest_lib/common/rest_client.py\", line 171, in get\n    return self.request('GET', url, extra_headers, headers)\n  File \"tempest/common/service_client.py\", line 83, in request\n    raise exceptions.ServerFault(ex)\nServerFault: Got server fault\nDetails: Got server fault\nDetails: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'>\n\nhttp://logs.openstack.org/25/149125/1/check/check-tempest-dsvm-nova-v21-full/86687c5/logs/testr_results.html.gz\n\nnova-api's error log is below.\n\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 451, in wrapped\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/plugins/v3/baremetal_nodes.py\", line 97, in ind\nex\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     icli = _get_ironic_client()\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/plugins/v3/baremetal_nodes.py\", line 69, in _get_ironic_client\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions     icli = ironic_client.get_client(CONF.ironic.api_version, **kwargs)\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions AttributeError: 'NoneType' object has no attribute 'get_client'\n2015-01-22 03:12:47.894 18727 TRACE nova.api.openstack.extensions\n2015-01-22 03:12:47.895 INFO nova.api.openstack.wsgi [req-dc985e8a-edc5-4d34-9424-50c424e5a55c BaremetalAdminTestJSON-1435782774 BaremetalAdminTestJSON-219186341] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'>\n\nWe should catch NotImplement exception and handle it.", 
            "date_created": "2015-01-26 01:35:15.557268+00:00", 
            "author": "https://api.launchpad.net/1.0/~takada-yuiko"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/149919", 
            "date_created": "2015-01-26 04:06:26.778729+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/149919\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=b77b11b0d47b5ee87889652d328dfb05c4e39866\nSubmitter: Jenkins\nBranch:    master\n\ncommit b77b11b0d47b5ee87889652d328dfb05c4e39866\nAuthor: YuikoTakada <email address hidden>\nDate:   Mon Jan 26 03:59:30 2015 +0000\n\n    Handle ironic_client non-existent case\n    \n    When call os-baremetal-nodes API at the environment\n    in which ironic is not enable, internal error occurs\n    because ironicclient module doesn't exist.\n    This patch set fixes this bug by raising HTTPNotImplemented in such a case.\n    \n    Change-Id: I64cf5a2b38b729dbdeb68887f0ddf0866e9679a0\n    Closes-Bug: #1414522\n", 
            "date_created": "2015-01-29 19:28:12.005532+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-02-05 20:25:16.054981+00:00"
}