{
    "status": "Invalid", 
    "last_updated": "2016-11-12 00:11:26.336715+00:00", 
    "description": "Openstack Newton (4 nodes. controller, neutron, nova, cinder)\nUbuntu 16.04.1 LTS\n\nopenstack server create --flavor m1.nano --image cirros   --nic net-id=048e2b61-dcd0-4af9-a8a9-f84e140cbea7  --security-group default   --key-name keysec selfservice-instance\nWARNING: openstackclient.common.utils is deprecated and will be removed after Jun 2017. Please use osc_lib.utils\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-8f3e873c-548a-4282-bee2-7e7ef8fc8419)", 
    "tags": [
        "db"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1641021", 
    "owner": "None", 
    "id": 1641021, 
    "index": 7794, 
    "openned": "2016-11-11 06:29:18.716630+00:00", 
    "created": "2016-11-11 06:29:18.716630+00:00", 
    "title": "openstack create server cli genrates error", 
    "comments": [
        {
            "content": "Openstack Newton (4 nodes. controller, neutron, nova, cinder)\nUbuntu 16.04.1 LTS\n\nopenstack server create --flavor m1.nano --image cirros   --nic net-id=048e2b61-dcd0-4af9-a8a9-f84e140cbea7  --security-group default   --key-name keysec selfservice-instance\nWARNING: openstackclient.common.utils is deprecated and will be removed after Jun 2017. Please use osc_lib.utils\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-8f3e873c-548a-4282-bee2-7e7ef8fc8419)", 
            "date_created": "2016-11-11 06:29:18.716630+00:00", 
            "author": "https://api.launchpad.net/1.0/~fcosafo"
        }, 
        {
            "content": "", 
            "date_created": "2016-11-11 06:29:18.716630+00:00", 
            "author": "https://api.launchpad.net/1.0/~fcosafo"
        }, 
        {
            "content": "These are the errors in the API log:\n\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service [req-f31b2dd1-6e1c-4aae-81ad-bc21f65255fd - - - - -] Error starting thread.\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service Traceback (most recent call last):\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_service/service.py\", line 708, in run_service\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     service.start()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 357, in start\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self.binary)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     result = fn(cls, context, *args, **kwargs)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/nova/objects/service.py\", line 252, in get_by_host_and_binary\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     host, binary)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/nova/db/api.py\", line 127, in service_get_by_host_and_binary\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return IMPL.service_get_by_host_and_binary(context, host, binary)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 254, in wrapped\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     with ctxt_mgr.reader.using(context):\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return self.gen.next()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 874, in _transaction_scope\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     allow_async=self._allow_async) as resource:\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return self.gen.next()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 518, in _session\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     bind=self.connection, mode=self.mode)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 277, in _create_session\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self._start()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 363, in _start\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     engine_args, maker_args)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 387, in _setup_for_connection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     sql_connection=sql_connection, **engine_kwargs)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     test_conn = _test_connection(engine, max_retries, retry_interval)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return engine.connect()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return self._connection_cls(self, **kwargs)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     if connection is not None else engine.raw_connection()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self.pool.unique_connection, _connection)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     e, dialect, self)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     util.raise_from_cause(newraise, exc_info)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     reraise(type(exception), exception, tb=exc_tb)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return fn()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return _ConnectionFairy._checkout(self)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     fairy = _ConnectionRecord.checkout(pool)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 480, in checkout\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     rec = pool._do_get()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self._dec_overflow()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     compat.reraise(exc_type, exc_value, exc_tb)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1057, in _do_get\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return self._create_connection()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return _ConnectionRecord(self)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 449, in __init__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self.connection = self.__connect()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 607, in __connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     connection = self.__pool._invoke_creator(self)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return dialect.connect(*cargs, **cparams)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return self.dbapi.connect(*cargs, **cparams)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/__init__.py\", line 88, in Connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     return Connection(*args, **kwargs)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 679, in __init__\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self.connect()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 891, in connect\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     self._request_authentication()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1097, in _request_authentication\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     auth_packet = self._read_packet()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 966, in _read_packet\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     packet.check_error()\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 394, in check_error\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     err.raise_mysql_exception(self._data)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 120, in raise_mysql_exception\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     _check_mysql_exception(errinfo)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 112, in _check_mysql_exception\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service     raise errorclass(errno, errorvalue)\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\n2016-11-11 00:36:13.192 8718 ERROR oslo_service.service \n\nWhat size is the deployment? What is the MySQL configuration with respect to number of open connections? What is the database configuration in nova.conf (the oslo.db options)? This seems like a deployment issue rather than a nova issue.", 
            "date_created": "2016-11-12 00:10:18.325062+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ], 
    "closed": "2016-11-12 00:11:23.561388+00:00"
}