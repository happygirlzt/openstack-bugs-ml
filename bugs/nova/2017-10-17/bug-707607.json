{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:58:08.233389+00:00", 
    "description": "kost@island106:~/openstack/nova/trunk$ bzr revno\n611\n\nkost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\nTraceback (most recent call last):\n  File \"./trunk/bin/nova-manage\", line 675, in <module>\n    main()\n  File \"./trunk/bin/nova-manage\", line 667, in main\n    fn(*argv)\n  File \"./trunk/bin/nova-manage\", line 546, in sync\n    return migration.db_sync(version)\n  File \"/home/kost/openstack/nova/trunk/nova/db/migration.py\", line 33, in db_sync\n    return IMPL.db_sync(version=version)\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 335, in __getattr__\n    backend = self.__get_backend()\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 330, in __get_backend\n    self.__backend = __import__(name, None, None, fromlist)\n  File \"/home/kost/openstack/nova/trunk/nova/db/sqlalchemy/migration.py\", line 24, in <module>\n    from migrate.versioning import api as versioning_api\nImportError: No module named migrate.versioning\nkost@island106:~/openstack/nova$ vim nova.sh.trunk \nkost@island106:~/openstack/nova$ sudo apt-get install python-migrate\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following extra packages will be installed:\n  python-decorator python-tempita\nThe following NEW packages will be installed:\n  python-decorator python-migrate python-tempita\n0 upgraded, 3 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 345kB of archives.\nAfter this operation, 1,884kB of additional disk space will be used.\nDo you want to continue [Y/n]? y\nGet:1 http://ppa.launchpad.net/nova-core/trunk/ubuntu/ lucid/main python-migrate 0.6-4~lucid1 [162kB]\nGet:2 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-decorator 3.1.2-1 [131kB]\nGet:3 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-tempita 0.4-1 [52.0kB]\nFetched 345kB in 1s (270kB/s)                                          \nSelecting previously deselected package python-decorator.\n(Reading database ... 93903 files and directories currently installed.)\nUnpacking python-decorator (from .../python-decorator_3.1.2-1_all.deb) ...\nSelecting previously deselected package python-tempita.\nUnpacking python-tempita (from .../python-tempita_0.4-1_all.deb) ...\nSelecting previously deselected package python-migrate.\nUnpacking python-migrate (from .../python-migrate_0.6-4~lucid1_all.deb) ...\nProcessing triggers for man-db ...\nSetting up python-decorator (3.1.2-1) ...\n\nSetting up python-tempita (0.4-1) ...\n\nSetting up python-migrate (0.6-4~lucid1) ...\n\nProcessing triggers for python-support ...\nkost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n2011-01-25 15:03:40,793 INFO migrate.versioning.api [-] 0 -> 1... \n2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] done\n2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] 1 -> 2... \n2011-01-25 15:03:41,500 INFO migrate.versioning.api [-] done\n\n---\n\nbug fix submitted @\nlp:~usc-isi/nova/kost-bugfix-migrate-nova.sh", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/707607", 
    "owner": "None", 
    "id": 707607, 
    "index": 3281, 
    "openned": "2011-01-25 20:13:46.632663+00:00", 
    "created": "2011-01-25 20:13:46.632663+00:00", 
    "title": "nova.sh doesn't install python-migrate", 
    "comments": [
        {
            "content": "kost@island106:~/openstack/nova/trunk$ bzr revno\n611\n\nkost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\nTraceback (most recent call last):\n  File \"./trunk/bin/nova-manage\", line 675, in <module>\n    main()\n  File \"./trunk/bin/nova-manage\", line 667, in main\n    fn(*argv)\n  File \"./trunk/bin/nova-manage\", line 546, in sync\n    return migration.db_sync(version)\n  File \"/home/kost/openstack/nova/trunk/nova/db/migration.py\", line 33, in db_sync\n    return IMPL.db_sync(version=version)\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 335, in __getattr__\n    backend = self.__get_backend()\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 330, in __get_backend\n    self.__backend = __import__(name, None, None, fromlist)\n  File \"/home/kost/openstack/nova/trunk/nova/db/sqlalchemy/migration.py\", line 24, in <module>\n    from migrate.versioning import api as versioning_api\nImportError: No module named migrate.versioning\nkost@island106:~/openstack/nova$ vim nova.sh.trunk \nkost@island106:~/openstack/nova$ sudo apt-get install python-migrate\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following extra packages will be installed:\n  python-decorator python-tempita\nThe following NEW packages will be installed:\n  python-decorator python-migrate python-tempita\n0 upgraded, 3 newly installed, 0 to remove and 22 not upgraded.\nNeed to get 345kB of archives.\nAfter this operation, 1,884kB of additional disk space will be used.\nDo you want to continue [Y/n]? y\nGet:1 http://ppa.launchpad.net/nova-core/trunk/ubuntu/ lucid/main python-migrate 0.6-4~lucid1 [162kB]\nGet:2 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-decorator 3.1.2-1 [131kB]\nGet:3 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-tempita 0.4-1 [52.0kB]\nFetched 345kB in 1s (270kB/s)                                          \nSelecting previously deselected package python-decorator.\n(Reading database ... 93903 files and directories currently installed.)\nUnpacking python-decorator (from .../python-decorator_3.1.2-1_all.deb) ...\nSelecting previously deselected package python-tempita.\nUnpacking python-tempita (from .../python-tempita_0.4-1_all.deb) ...\nSelecting previously deselected package python-migrate.\nUnpacking python-migrate (from .../python-migrate_0.6-4~lucid1_all.deb) ...\nProcessing triggers for man-db ...\nSetting up python-decorator (3.1.2-1) ...\n\nSetting up python-tempita (0.4-1) ...\n\nSetting up python-migrate (0.6-4~lucid1) ...\n\nProcessing triggers for python-support ...\nkost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n2011-01-25 15:03:40,793 INFO migrate.versioning.api [-] 0 -> 1... \n2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] done\n2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] 1 -> 2... \n2011-01-25 15:03:41,500 INFO migrate.versioning.api [-] done\n\n---\n\nbug fix submitted @\nlp:~usc-isi/nova/kost-bugfix-migrate-nova.sh", 
            "date_created": "2011-01-25 20:13:46.632663+00:00", 
            "author": "https://api.launchpad.net/1.0/~kost-isi"
        }, 
        {
            "content": "This is fixed in lp:~vishvananda/nova/friendly-db if it ever merges\n\nVish\n\nOn Jan 25, 2011, at 12:13 PM, Kost wrote:\n\n> Public bug reported:\n> \n> kost@island106:~/openstack/nova/trunk$ bzr revno\n> 611\n> \n> kost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n> Traceback (most recent call last):\n>  File \"./trunk/bin/nova-manage\", line 675, in <module>\n>    main()\n>  File \"./trunk/bin/nova-manage\", line 667, in main\n>    fn(*argv)\n>  File \"./trunk/bin/nova-manage\", line 546, in sync\n>    return migration.db_sync(version)\n>  File \"/home/kost/openstack/nova/trunk/nova/db/migration.py\", line 33, in db_sync\n>    return IMPL.db_sync(version=version)\n>  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 335, in __getattr__\n>    backend = self.__get_backend()\n>  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 330, in __get_backend\n>    self.__backend = __import__(name, None, None, fromlist)\n>  File \"/home/kost/openstack/nova/trunk/nova/db/sqlalchemy/migration.py\", line 24, in <module>\n>    from migrate.versioning import api as versioning_api\n> ImportError: No module named migrate.versioning\n> kost@island106:~/openstack/nova$ vim nova.sh.trunk \n> kost@island106:~/openstack/nova$ sudo apt-get install python-migrate\n> Reading package lists... Done\n> Building dependency tree       \n> Reading state information... Done\n> The following extra packages will be installed:\n>  python-decorator python-tempita\n> The following NEW packages will be installed:\n>  python-decorator python-migrate python-tempita\n> 0 upgraded, 3 newly installed, 0 to remove and 22 not upgraded.\n> Need to get 345kB of archives.\n> After this operation, 1,884kB of additional disk space will be used.\n> Do you want to continue [Y/n]? y\n> Get:1 http://ppa.launchpad.net/nova-core/trunk/ubuntu/ lucid/main python-migrate 0.6-4~lucid1 [162kB]\n> Get:2 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-decorator 3.1.2-1 [131kB]\n> Get:3 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-tempita 0.4-1 [52.0kB]\n> Fetched 345kB in 1s (270kB/s)                                          \n> Selecting previously deselected package python-decorator.\n> (Reading database ... 93903 files and directories currently installed.)\n> Unpacking python-decorator (from .../python-decorator_3.1.2-1_all.deb) ...\n> Selecting previously deselected package python-tempita.\n> Unpacking python-tempita (from .../python-tempita_0.4-1_all.deb) ...\n> Selecting previously deselected package python-migrate.\n> Unpacking python-migrate (from .../python-migrate_0.6-4~lucid1_all.deb) ...\n> Processing triggers for man-db ...\n> Setting up python-decorator (3.1.2-1) ...\n> \n> Setting up python-tempita (0.4-1) ...\n> \n> Setting up python-migrate (0.6-4~lucid1) ...\n> \n> Processing triggers for python-support ...\n> kost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n> 2011-01-25 15:03:40,793 INFO migrate.versioning.api [-] 0 -> 1... \n> 2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] done\n> 2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] 1 -> 2... \n> 2011-01-25 15:03:41,500 INFO migrate.versioning.api [-] done\n> \n> ---\n> \n> bug fix submitted @\n> lp:~usc-isi/nova/kost-bugfix-migrate-nova.sh\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/707607\n> \n> Title:\n>  nova.sh doesn't install python-migrate\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  kost@island106:~/openstack/nova/trunk$ bzr revno\n>  611\n> \n>  kost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n>  Traceback (most recent call last):\n>    File \"./trunk/bin/nova-manage\", line 675, in <module>\n>      main()\n>    File \"./trunk/bin/nova-manage\", line 667, in main\n>      fn(*argv)\n>    File \"./trunk/bin/nova-manage\", line 546, in sync\n>      return migration.db_sync(version)\n>    File \"/home/kost/openstack/nova/trunk/nova/db/migration.py\", line 33, in db_sync\n>      return IMPL.db_sync(version=version)\n>    File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 335, in __getattr__\n>      backend = self.__get_backend()\n>    File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 330, in __get_backend\n>      self.__backend = __import__(name, None, None, fromlist)\n>    File \"/home/kost/openstack/nova/trunk/nova/db/sqlalchemy/migration.py\", line 24, in <module>\n>      from migrate.versioning import api as versioning_api\n>  ImportError: No module named migrate.versioning\n>  kost@island106:~/openstack/nova$ vim nova.sh.trunk \n>  kost@island106:~/openstack/nova$ sudo apt-get install python-migrate\n>  Reading package lists... Done\n>  Building dependency tree       \n>  Reading state information... Done\n>  The following extra packages will be installed:\n>    python-decorator python-tempita\n>  The following NEW packages will be installed:\n>    python-decorator python-migrate python-tempita\n>  0 upgraded, 3 newly installed, 0 to remove and 22 not upgraded.\n>  Need to get 345kB of archives.\n>  After this operation, 1,884kB of additional disk space will be used.\n>  Do you want to continue [Y/n]? y\n>  Get:1 http://ppa.launchpad.net/nova-core/trunk/ubuntu/ lucid/main python-migrate 0.6-4~lucid1 [162kB]\n>  Get:2 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-decorator 3.1.2-1 [131kB]\n>  Get:3 http://us.archive.ubuntu.com/ubuntu/ lucid/universe python-tempita 0.4-1 [52.0kB]\n>  Fetched 345kB in 1s (270kB/s)                                          \n>  Selecting previously deselected package python-decorator.\n>  (Reading database ... 93903 files and directories currently installed.)\n>  Unpacking python-decorator (from .../python-decorator_3.1.2-1_all.deb) ...\n>  Selecting previously deselected package python-tempita.\n>  Unpacking python-tempita (from .../python-tempita_0.4-1_all.deb) ...\n>  Selecting previously deselected package python-migrate.\n>  Unpacking python-migrate (from .../python-migrate_0.6-4~lucid1_all.deb) ...\n>  Processing triggers for man-db ...\n>  Setting up python-decorator (3.1.2-1) ...\n> \n>  Setting up python-tempita (0.4-1) ...\n> \n>  Setting up python-migrate (0.6-4~lucid1) ...\n> \n>  Processing triggers for python-support ...\n>  kost@island106:~/openstack/nova$ sudo ./trunk/bin/nova-manage db sync\n>  2011-01-25 15:03:40,793 INFO migrate.versioning.api [-] 0 -> 1... \n>  2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] done\n>  2011-01-25 15:03:41,238 INFO migrate.versioning.api [-] 1 -> 2... \n>  2011-01-25 15:03:41,500 INFO migrate.versioning.api [-] done\n> \n>  ---\n> \n>  bug fix submitted @\n>  lp:~usc-isi/nova/kost-bugfix-migrate-nova.sh\n> \n> \n\n", 
            "date_created": "2011-01-25 20:38:13+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Found two more missing components of nova.sh. \n\nSince these bugs are similar I'll add them here:\n\n1.\n2011-01-25 15:31:33,288 DEBUG nova.root [-] Inner Exception: No module named glance.client from MainProcess (pid=30268) import_class /home/kost/openstack/nova/trunk/nova/utils.py:56\nTraceback (most recent call last):\n  File \"/home/kost/openstack/nova/trunk/bin/nova-compute\", line 44, in <module>\n    service.serve()\n  File \"/home/kost/openstack/nova/trunk/nova/service.py\", line 230, in serve\n    x.start()\n  File \"/home/kost/openstack/nova/trunk/nova/service.py\", line 80, in start\n    **self.saved_kwargs)\n  File \"/home/kost/openstack/nova/trunk/nova/compute/manager.py\", line 112, in __init__\n    self.driver = utils.import_object(compute_driver)\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 66, in import_object\n    cls = import_class(import_str)\n  File \"/home/kost/openstack/nova/trunk/nova/utils.py\", line 57, in import_class\n    raise exception.NotFound(_('Class %s cannot be found') % class_str)\nnova.exception.NotFound: Class get_connection cannot be found\n\n---\nFIX:  nova.sh needs to install python-glance\n---\n\n2.\nhttp://paste.org/pastebin/view/27925\ntables aren't updated when using nova.sh with a mysql db.  This is b/c the database is deleted, then created.\n\n\nFIX:  add line #126...\n\n123     if [ \"$USE_MYSQL\" == 1 ]; then                                                                                                        \n124         mysql -p$MYSQL_PASS -e 'DROP DATABASE nova;'                                                                                      \n125         mysql -p$MYSQL_PASS -e 'CREATE DATABASE nova;'                                                                                    \n126         $NOVA_DIR/bin/nova-manage --flagfile $NOVA_DIR/bin/nova.conf db sync                                                              \n127     else    \n\nbug fix submitted @\nlp:~usc-isi/nova/kost-bugfix-migrate-nova.sh\n\n\n", 
            "date_created": "2011-01-25 20:40:48.552659+00:00", 
            "author": "https://api.launchpad.net/1.0/~kost-isi"
        }
    ], 
    "closed": "2011-02-07 13:58:07.248810+00:00"
}