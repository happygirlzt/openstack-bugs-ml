{
    "status": "Expired", 
    "last_updated": "2016-07-05 09:54:38.916954+00:00", 
    "description": "NOTE: tests run against devstack install on Ubuntu 14.04\ntests conducted via randomized testing, no definitive test case produced yet, but have repeated this several times.\n\nUsing libvirtd (libvirt) 1.2.2 \n\nIt appears that deleting a resizing instance can cause the nova compute node to crash with the following error / traceback:\n(more detailed output below)\nscreen-n-cpu.2014-10-31-081111.log:354289:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\nscreen-n-cpu.2014-10-31-081111.log:354290:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\nscreen-n-cpu.2014-10-31-081111.log:354291:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher libvirtError: Domain not found: no domain with matching uuid '2aadc976-951e-47d6-bb20-9e071a6a89a9' (instance-00000360)\n\nWhen this is triggered, the compute node will crash and all instances will end up in ERROR state.\nHave not perfected the timing parameters, but will provide output from two runs below.\n\nAlso noting that this ends up with <instance_id>_resize and <instance_id>_del directories in /opt/stack/data/nova/instances on these failures.", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1388213", 
    "owner": "None", 
    "id": 1388213, 
    "index": 6523, 
    "openned": "2014-10-31 18:43:55.101079+00:00", 
    "created": "2014-10-31 18:43:55.101079+00:00", 
    "title": "libvirt: Possible to crash nova compute node via deletion of a resizing / rebooting instance (timing bug)", 
    "comments": [
        {
            "content": "NOTE: tests run against devstack install on Ubuntu 14.04\ntests conducted via randomized testing, no definitive test case produced yet, but have repeated this several times.\n\nIt appears that deleting a resizing instance can cause the nova compute node to crash with the following error / traceback:\n(more detailed output below)\nscreen-n-cpu.2014-10-31-081111.log:354289:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\nscreen-n-cpu.2014-10-31-081111.log:354290:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\nscreen-n-cpu.2014-10-31-081111.log:354291:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher libvirtError: Domain not found: no domain with matching uuid '2aadc976-951e-47d6-bb20-9e071a6a89a9' (instance-00000360)\n\nWhen this is triggered, the compute node will crash and all instances will end up in ERROR state.\nHave not perfected the timing parameters, but will provide output from two runs below.", 
            "date_created": "2014-10-31 18:43:55.101079+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "API LOG:\n grep -n 2aadc976-951e-47d6-bb20-9e071a6a89a9 screen-n-api.log \n252392:2014-10-31 11:00:37.551 DEBUG nova.compute.api [req-d8bd93c0-5242-4199-8ddf-5acca3e4c052 demo demo] [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] block_device_mapping [{'guest_format': None, 'boot_index': 0, 'no_device': None, 'connection_info': None, 'snapshot_id': None, 'volume_size': None, 'device_name': None, 'disk_bus': None, 'image_id': u'1c3250a9-52ec-412a-a592-5ce7f5896f3a', 'source_type': 'image', 'device_type': 'disk', 'volume_id': None, 'destination_type': 'local', 'delete_on_termination': True}] from (pid=17649) _update_block_device_mapping /opt/stack/nova/nova/compute/api.py:1172\n253031:2014-10-31 11:00:53.654 INFO nova.osapi_compute.wsgi.server [req-5be8c74b-9b0c-40e6-983e-95fa979f1468 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 400 len: 298 time: 0.0666690\n253211:2014-10-31 11:00:56.025 INFO nova.osapi_compute.wsgi.server [req-6f1e67a3-3a15-4ed9-8373-1bb01d2abe85 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 400 len: 298 time: 0.1521800\n253279:2014-10-31 11:01:03.051 INFO nova.osapi_compute.wsgi.server [req-72784f5b-13bc-462b-be98-4213f185553a demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 409 len: 329 time: 0.3915288\n253306:2014-10-31 11:01:03.488 INFO nova.osapi_compute.wsgi.server [req-9d0f3a7c-96c1-4fc7-9c17-3dc8c6bf366a demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 409 len: 328 time: 0.0578229\n253541:2014-10-31 11:01:06.109 INFO nova.osapi_compute.wsgi.server [req-088e2b26-3c30-4790-afd4-2e50e11cb9e5 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 409 len: 329 time: 0.0793512\n254995:2014-10-31 11:01:33.910 DEBUG nova.compute.api [req-77c524f0-f3ca-42cf-a51c-6e59fb137c05 demo demo] [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] Old instance type m1.micro,  new instance type m1.nano from (pid=17648) resize /opt/stack/nova/nova/compute/api.py:2496\n255046:2014-10-31 11:01:34.877 INFO nova.osapi_compute.wsgi.server [req-77c524f0-f3ca-42cf-a51c-6e59fb137c05 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 202 len: 209 time: 1.0368700\n255805:2014-10-31 11:01:48.917 INFO nova.osapi_compute.wsgi.server [req-2825d528-a7c7-4393-b65e-89ce94587228 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 409 len: 328 time: 0.1100979\n256023:2014-10-31 11:01:52.224 DEBUG nova.compute.api [req-fc238063-16c4-442a-9a9f-60147bddd8b4 demo demo] [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] Going to try to terminate instance from (pid=17654) delete /opt/stack/nova/nova/compute/api.py:1792\n256045:2014-10-31 11:01:52.415 DEBUG nova.compute.api [req-fc238063-16c4-442a-9a9f-60147bddd8b4 demo demo] [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] going to delete a resizing instance from (pid=17654) _create_reservations /opt/stack/nova/nova/compute/api.py:1695\n256061:2014-10-31 11:01:52.630 INFO nova.osapi_compute.wsgi.server [req-fc238063-16c4-442a-9a9f-60147bddd8b4 demo demo] 192.168.0.5 \"DELETE /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9 HTTP/1.1\" status: 204 len: 203 time: 1.0050709\n256498:2014-10-31 11:01:59.941 INFO nova.osapi_compute.wsgi.server [req-eddb7bc0-ed5e-402a-ba28-07bde8c730b3 demo demo] 192.168.0.5 \"POST /v2/14d383da43384a719ae5dbf511e30870/servers/2aadc976-951e-47d6-bb20-9e071a6a89a9/action HTTP/1.1\" status: 404 len: 291 time: 0.0580511\n", 
            "date_created": "2014-10-31 18:44:53.975150+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "CPU LOG:\nscreen-n-cpu.2014-10-31-081111.log:353912:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\nscreen-n-cpu.2014-10-31-081111.log:353913:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\nscreen-n-cpu.2014-10-31-081111.log:353914:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\nscreen-n-cpu.2014-10-31-081111.log:353915:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\nscreen-n-cpu.2014-10-31-081111.log:353916:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\nscreen-n-cpu.2014-10-31-081111.log:353917:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\nscreen-n-cpu.2014-10-31-081111.log:353918:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\nscreen-n-cpu.2014-10-31-081111.log:353919:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\nscreen-n-cpu.2014-10-31-081111.log:353920:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     payload)\nscreen-n-cpu.2014-10-31-081111.log:353921:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:353922:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:353923:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\nscreen-n-cpu.2014-10-31-081111.log:353924:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\nscreen-n-cpu.2014-10-31-081111.log:353925:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 298, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:353926:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     pass\nscreen-n-cpu.2014-10-31-081111.log:353927:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:353928:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:353929:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 284, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:353930:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:353931:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 348, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:353932:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:353933:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 314, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:353934:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:353935:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2941, in reboot_instance\nscreen-n-cpu.2014-10-31-081111.log:353936:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     self._set_instance_obj_error_state(context, instance)\nscreen-n-cpu.2014-10-31-081111.log:353937:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:353938:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:353939:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2922, in reboot_instance\nscreen-n-cpu.2014-10-31-081111.log:353940:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     bad_volumes_callback=bad_volumes_callback)\nscreen-n-cpu.2014-10-31-081111.log:353941:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2253, in reboot\nscreen-n-cpu.2014-10-31-081111.log:353942:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     soft_reboot_success = self._soft_reboot(instance)\nscreen-n-cpu.2014-10-31-081111.log:353943:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2307, in _soft_reboot\nscreen-n-cpu.2014-10-31-081111.log:353944:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     timer.start(interval=0.5).wait()\nscreen-n-cpu.2014-10-31-081111.log:353945:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/event.py\", line 121, in wait\nscreen-n-cpu.2014-10-31-081111.log:353946:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return hubs.get_hub().switch()\nscreen-n-cpu.2014-10-31-081111.log:353947:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 293, in switch\nscreen-n-cpu.2014-10-31-081111.log:353948:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     return self.greenlet.switch()\nscreen-n-cpu.2014-10-31-081111.log:353949:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/loopingcall.py\", line 81, in _inner\nscreen-n-cpu.2014-10-31-081111.log:353950:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     self.f(*self.args, **self.kw)\nscreen-n-cpu.2014-10-31-081111.log:353951:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5895, in _wait_for_running\nscreen-n-cpu.2014-10-31-081111.log:353952:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     state = self.get_info(instance)['state']\nscreen-n-cpu.2014-10-31-081111.log:353953:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4214, in get_info\nscreen-n-cpu.2014-10-31-081111.log:353954:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     virt_dom = self._lookup_by_name(instance['name'])\nscreen-n-cpu.2014-10-31-081111.log:353955:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4197, in _lookup_by_name\nscreen-n-cpu.2014-10-31-081111.log:353956:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher     raise exception.InstanceNotFound(instance_id=instance_name)\nscreen-n-cpu.2014-10-31-081111.log:353957:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher InstanceNotFound: Instance instance-0000035b could not be found.\nscreen-n-cpu.2014-10-31-081111.log:353958:2014-10-31 11:01:53.617 TRACE oslo.messaging.rpc.dispatcher \nscreen-n-cpu.2014-10-31-081111.log:354170:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] Traceback (most recent call last):\nscreen-n-cpu.2014-10-31-081111.log:354171:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354172:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     disk_info, image)\nscreen-n-cpu.2014-10-31-081111.log:354173:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354174:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     old_instance_type, sys_meta)\nscreen-n-cpu.2014-10-31-081111.log:354175:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354176:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354177:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354178:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     block_device_info, power_on)\nscreen-n-cpu.2014-10-31-081111.log:354179:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5991, in finish_migration\nscreen-n-cpu.2014-10-31-081111.log:354180:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     vifs_already_plugged=True)\nscreen-n-cpu.2014-10-31-081111.log:354181:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4416, in _create_domain_and_network\nscreen-n-cpu.2014-10-31-081111.log:354182:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     power_on=power_on)\nscreen-n-cpu.2014-10-31-081111.log:354183:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4340, in _create_domain\nscreen-n-cpu.2014-10-31-081111.log:354184:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     LOG.error(err)\nscreen-n-cpu.2014-10-31-081111.log:354185:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354186:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354187:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4331, in _create_domain\nscreen-n-cpu.2014-10-31-081111.log:354188:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     domain.createWithFlags(launch_flags)\nscreen-n-cpu.2014-10-31-081111.log:354189:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\nscreen-n-cpu.2014-10-31-081111.log:354190:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     result = proxy_call(self._autowrap, f, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354191:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\nscreen-n-cpu.2014-10-31-081111.log:354192:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     rv = execute(f, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354193:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\nscreen-n-cpu.2014-10-31-081111.log:354194:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     six.reraise(c, e, tb)\nscreen-n-cpu.2014-10-31-081111.log:354195:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\nscreen-n-cpu.2014-10-31-081111.log:354196:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     rv = meth(*args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354197:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\nscreen-n-cpu.2014-10-31-081111.log:354198:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\nscreen-n-cpu.2014-10-31-081111.log:354199:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] libvirtError: Domain not found: no domain with matching uuid '2aadc976-951e-47d6-bb20-9e071a6a89a9' (instance-00000360)\nscreen-n-cpu.2014-10-31-081111.log:354200:2014-10-31 11:01:57.180 TRACE nova.compute.manager [instance: 2aadc976-951e-47d6-bb20-9e071a6a89a9] \nscreen-n-cpu.2014-10-31-081111.log:354226:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\nscreen-n-cpu.2014-10-31-081111.log:354227:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\nscreen-n-cpu.2014-10-31-081111.log:354228:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\nscreen-n-cpu.2014-10-31-081111.log:354229:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\nscreen-n-cpu.2014-10-31-081111.log:354230:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\nscreen-n-cpu.2014-10-31-081111.log:354231:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\nscreen-n-cpu.2014-10-31-081111.log:354232:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\nscreen-n-cpu.2014-10-31-081111.log:354233:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\nscreen-n-cpu.2014-10-31-081111.log:354234:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     payload)\nscreen-n-cpu.2014-10-31-081111.log:354235:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354236:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354237:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\nscreen-n-cpu.2014-10-31-081111.log:354238:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\nscreen-n-cpu.2014-10-31-081111.log:354239:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 298, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354240:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     pass\nscreen-n-cpu.2014-10-31-081111.log:354241:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354242:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354243:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 284, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354244:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354245:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 348, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354246:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354247:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 272, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354248:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     migration.instance_uuid, exc_info=True)\nscreen-n-cpu.2014-10-31-081111.log:354249:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354250:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354251:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 259, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354252:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354253:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 326, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354254:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\nscreen-n-cpu.2014-10-31-081111.log:354255:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354256:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354257:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 314, in decorated_function\nscreen-n-cpu.2014-10-31-081111.log:354258:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354259:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3900, in finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354260:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     self._set_instance_error_state(context, instance)\nscreen-n-cpu.2014-10-31-081111.log:354261:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354262:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354263:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354264:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     disk_info, image)\nscreen-n-cpu.2014-10-31-081111.log:354265:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354266:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     old_instance_type, sys_meta)\nscreen-n-cpu.2014-10-31-081111.log:354267:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354268:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354269:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize\nscreen-n-cpu.2014-10-31-081111.log:354270:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     block_device_info, power_on)\nscreen-n-cpu.2014-10-31-081111.log:354271:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5991, in finish_migration\nscreen-n-cpu.2014-10-31-081111.log:354272:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     vifs_already_plugged=True)\nscreen-n-cpu.2014-10-31-081111.log:354273:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4416, in _create_domain_and_network\nscreen-n-cpu.2014-10-31-081111.log:354274:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     power_on=power_on)\nscreen-n-cpu.2014-10-31-081111.log:354275:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4340, in _create_domain\nscreen-n-cpu.2014-10-31-081111.log:354276:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     LOG.error(err)\nscreen-n-cpu.2014-10-31-081111.log:354277:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\nscreen-n-cpu.2014-10-31-081111.log:354278:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\nscreen-n-cpu.2014-10-31-081111.log:354279:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4331, in _create_domain\nscreen-n-cpu.2014-10-31-081111.log:354280:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     domain.createWithFlags(launch_flags)\nscreen-n-cpu.2014-10-31-081111.log:354281:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\nscreen-n-cpu.2014-10-31-081111.log:354282:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354283:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\nscreen-n-cpu.2014-10-31-081111.log:354284:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354285:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\nscreen-n-cpu.2014-10-31-081111.log:354286:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     six.reraise(c, e, tb)\nscreen-n-cpu.2014-10-31-081111.log:354287:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\nscreen-n-cpu.2014-10-31-081111.log:354288:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\nscreen-n-cpu.2014-10-31-081111.log:354289:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\nscreen-n-cpu.2014-10-31-081111.log:354290:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\nscreen-n-cpu.2014-10-31-081111.log:354291:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher libvirtError: Domain not found: no domain with matching uuid '2aadc976-951e-47d6-bb20-9e071a6a89a9' (instance-00000360)\nscreen-n-cpu.2014-10-31-081111.log:354292:2014-10-31 11:01:58.093 TRACE oslo.messaging.rpc.dispatcher \nscreen-n-crt.2014-10-31-081111.log:107:2014-10-31 08:18:21.662 DEBUG nova.openstack.common.service [-] logging_exception_prefix       = %(color)s%(asctime)s.%(msecs)03d TRACE %(name)s %(instance)s from (pid=17830) log_opt_values /usr/local/lib/python2.7/dist-packages/oslo/config/cfg.py:1992\nscreen-n-net.2014-10-31-081111.log:122:2014-10-31 08:18:24.741 DEBUG nova.openstack.common.service [-] logging_exception_prefix       = %(color)s%(asctime)s.%(msecs)03d TRACE %(name)s %(instance)s from (pid=17868) log_opt_values /usr/local/lib/python2.7/dist-packages/oslo/config/cfg.py:1992\nscreen-n-obj.2014-10-31-081111.log:82:2014-10-31 08:18:39.854 DEBUG nova.openstack.common.service [-] logging_exception_prefix       = %(color)s%(asctime)s.%(msecs)03d TRACE %(name)s %(instance)s from (pid=18059) log_opt_values /usr/local/lib/python2.7/dist-packages/oslo/config/cfg.py:1992\nscreen-n-sch.2014-10-31-081111.log:112:2014-10-31 08:18:27.921 DEBUG nova.openstack.common.service [-] logging_exception_prefix       = %(color)s%(asctime)s.%(msecs)03d TRACE %(name)s %(instance)s from (pid=17931) log_opt_values /usr/local/lib/python2.7/dist-packages/oslo/config/cfg.py:1992\nscreen-n-xvnc.2014-10-31-081111.log:82:2014-10-31 08:18:33.821 DEBUG nova.openstack.common.service [-] logging_exception_prefix       = %(color)s%(asctime)s.%(msecs)03d TRACE %(name)s %(instance)s from (pid=17993) log_opt_values /usr/local/lib/python2.7/dist-packages/oslo/config/cfg.py:1992", 
            "date_created": "2014-10-31 18:46:48.450689+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Another crash sequence showing a deletion of a resizing server causing this crash / traceback\n\n######################\n# REQUESTS MADE\n######################\n[2014-10-29 16:44:33,735] mahmachine/INFO/stdout: 0x7f337b3ec210: Resize server | cb7fb96c-1fac-4154-878c-e63717e3d5fd | 9998\n[2014-10-29 16:44:34,380] mahmachine/INFO/stdout: 0x7f337b3ec210: http://192.168.0.5:8774/v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action\n[2014-10-29 16:44:34,380] mahmachine/INFO/stdout: \n[2014-10-29 16:44:34,381] mahmachine/INFO/stdout: 0x7f337b3ec210: Response status code: 202\n[2014-10-29 16:44:34,381] mahmachine/INFO/stdout: \n[2014-10-29 16:44:34,381] mahmachine/INFO/stdout: 0x7f337b3ec210: Response content:\n\n[2014-10-29 16:44:44,231] mahmachine/INFO/stdout: 0x7f337b3b32d0: http://192.168.0.5:8774/v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd\n[2014-10-29 16:44:44,231] mahmachine/INFO/stdout: \n[2014-10-29 16:44:44,231] mahmachine/INFO/stdout: 0x7f337b3b32d0: Response status code: 204\n[2014-10-29 16:44:44,231] mahmachine/INFO/stdout: \n[2014-10-29 16:44:44,231] mahmachine/INFO/stdout: 0x7f337b3b32d0: Response content:\n\n[2014-10-29 16:44:45,628] mahmachine/INFO/stdout: 0x7f337b43b9d0: Resize server | cb7fb96c-1fac-4154-878c-e63717e3d5fd | 9999\n[2014-10-29 16:44:45,706] mahmachine/INFO/stdout: 0x7f337b43b9d0: http://192.168.0.5:8774/v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action\n[2014-10-29 16:44:45,706] mahmachine/INFO/stdout: \n[2014-10-29 16:44:45,707] mahmachine/INFO/stdout: 0x7f337b43b9d0: Response status code: 409\n[2014-10-29 16:44:45,707] mahmachine/INFO/stdout: \n[2014-10-29 16:44:45,707] mahmachine/INFO/stdout: 0x7f337b43b9d0: Response content: {\"conflictingRequest\": {\"message\": \"Cannot 'resize' while instance is in task_state deleting\", \"code\": 409}}\n[2014-10-29 16:44:45,707] mahmachine/INFO/stdout: \n[2014-10-29 16:44:47,283] mahmachine/INFO/stdout: 0x7f337b37e090: http://192.168.0.5:8774/v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action\n[2014-10-29 16:44:47,284] mahmachine/INFO/stdout: \n[2014-10-29 16:44:47,284] mahmachine/INFO/stdout: 0x7f337b37e090: Response status code: 409\n[2014-10-29 16:44:47,284] mahmachine/INFO/stdout: \n[2014-10-29 16:44:47,284] mahmachine/INFO/stdout: 0x7f337b37e090: Response content: {\"conflictingRequest\": {\"message\": \"Cannot 'confirmResize' while instance is in vm_state error\", \"code\": 409}}\n\n[2014-10-29 16:44:50,778] mahmachine/INFO/stdout: 0x7f337b43b9d0: http://192.168.0.5:8774/v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action\n[2014-10-29 16:44:50,778] mahmachine/INFO/stdout: \n[2014-10-29 16:44:50,778] mahmachine/INFO/stdout: 0x7f337b43b9d0: Response status code: 409\n[2014-10-29 16:44:50,778] mahmachine/INFO/stdout: \n[2014-10-29 16:44:50,778] mahmachine/INFO/stdout: 0x7f337b43b9d0: Response content: {\"conflictingRequest\": {\"message\": \"Cannot 'confirmResize' while instance is in vm_state deleted\", \"code\": 409}}\n\n\n######################\n# API LOG\n######################\ngrep -rn cb7fb96c-1fac-4154-878c-e63717e3d5fd screen-n-api.log \n132042:2014-10-29 16:43:58.546 DEBUG nova.compute.api [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] block_device_mapping [{'guest_format': None, 'boot_index': 0, 'no_device': None, 'connection_info': None, 'snapshot_id': None, 'volume_size': None, 'device_name': None, 'disk_bus': None, 'image_id': u'ce812a90-f402-47f2-bcb5-e39d4e07f655', 'source_type': 'image', 'device_type': 'disk', 'volume_id': None, 'destination_type': 'local', 'delete_on_termination': True}] from (pid=4149) _update_block_device_mapping /opt/stack/nova/nova/compute/api.py:1172\n132076:2014-10-29 16:44:00.366 INFO nova.osapi_compute.wsgi.server [req-0ae483ab-ca34-497a-8741-0dfb3f694283 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 324 time: 0.0694630\n132124:2014-10-29 16:44:01.430 INFO nova.osapi_compute.wsgi.server [req-94dcb2c6-1671-49b3-8e76-6b8f3a8020f8 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 331 time: 0.0591111\n132411:2014-10-29 16:44:06.952 INFO nova.osapi_compute.wsgi.server [req-3d077b34-b661-42e9-8166-bd5b2b720a14 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 331 time: 0.0590479\n132606:2014-10-29 16:44:11.432 INFO nova.osapi_compute.wsgi.server [req-52a5d0c4-3e90-4884-9c66-8d7de20c841e demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 331 time: 0.0606740\n132777:2014-10-29 16:44:14.177 INFO nova.osapi_compute.wsgi.server [req-0c688f65-7127-453e-99a4-894eb60f9e00 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 324 time: 0.0653450\n132828:2014-10-29 16:44:15.053 INFO nova.osapi_compute.wsgi.server [req-fcc29384-c467-479a-91ae-40eee7c4184b demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 324 time: 0.0602360\n132931:2014-10-29 16:44:18.161 INFO nova.osapi_compute.wsgi.server [req-9a6cc8e1-268f-4a1c-8237-c538a469c91d demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 329 time: 0.0610850\n133291:2014-10-29 16:44:24.240 INFO nova.osapi_compute.wsgi.server [req-f9b308e7-c32b-4305-8999-7699c10ba58a demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 329 time: 0.0580060\n133787:2014-10-29 16:44:33.808 DEBUG nova.compute.api [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Old instance type m1.micro,  new instance type test2 from (pid=4149) resize /opt/stack/nova/nova/compute/api.py:2496\n133796:2014-10-29 16:44:34.379 INFO nova.osapi_compute.wsgi.server [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 202 len: 209 time: 0.6405592\n134136:2014-10-29 16:44:43.743 DEBUG nova.compute.api [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Going to try to terminate instance from (pid=4150) delete /opt/stack/nova/nova/compute/api.py:1792\n134144:2014-10-29 16:44:43.869 DEBUG nova.compute.api [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] going to delete a resizing instance from (pid=4150) _create_reservations /opt/stack/nova/nova/compute/api.py:1695\n134181:2014-10-29 16:44:44.228 INFO nova.osapi_compute.wsgi.server [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] 192.168.0.5 \"DELETE /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd HTTP/1.1\" status: 204 len: 203 time: 0.5507541\n134262:2014-10-29 16:44:45.705 INFO nova.osapi_compute.wsgi.server [req-4656989f-2671-4dc8-800a-60f5b1b58ac3 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 326 time: 0.0739882\n134304:2014-10-29 16:44:47.283 INFO nova.osapi_compute.wsgi.server [req-5025a607-524f-4e91-b237-0e92cbb93a2d demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 328 time: 0.0634460\n134317:2014-10-29 16:44:47.523 INFO nova.osapi_compute.wsgi.server [req-3edaaf7a-8c2f-4b59-af1d-39ced0b677dc demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 329 time: 0.0633931\n134372:2014-10-29 16:44:50.777 INFO nova.osapi_compute.wsgi.server [req-82de239a-3161-48f1-bcb2-e00d6d6185b3 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 330 time: 0.0639100\n135061:2014-10-29 16:44:59.451 INFO nova.osapi_compute.wsgi.server [req-b84f566d-acd4-4b88-9e77-f07eef762f19 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 330 time: 0.0662169\n135910:2014-10-29 16:45:10.824 INFO nova.osapi_compute.wsgi.server [req-1943398f-ad40-4a58-b6d6-b8000d45c7fa demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 323 time: 0.0639670\n136357:2014-10-29 16:45:20.893 INFO nova.osapi_compute.wsgi.server [req-137aca3f-fc13-4dfe-a72d-12ef56bcc7d7 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 330 time: 0.0630999\n136498:2014-10-29 16:45:24.832 DEBUG nova.compute.api [req-f47f240a-9fed-490d-9f52-b555d75d2b0c demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Going to try to terminate instance from (pid=4146) delete /opt/stack/nova/nova/compute/api.py:1792\n136515:2014-10-29 16:45:25.075 INFO nova.osapi_compute.wsgi.server [req-f47f240a-9fed-490d-9f52-b555d75d2b0c demo demo] 192.168.0.5 \"DELETE /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd HTTP/1.1\" status: 204 len: 203 time: 0.3050511\n136562:2014-10-29 16:45:26.415 DEBUG nova.compute.api [req-070532b7-1742-490e-ad0f-3539ebb94d82 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Going to try to terminate instance from (pid=4149) delete /opt/stack/nova/nova/compute/api.py:1792\n136566:2014-10-29 16:45:26.580 INFO nova.compute.api [req-070532b7-1742-490e-ad0f-3539ebb94d82 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance is already in deleting state, ignoring this request\n136568:2014-10-29 16:45:26.627 INFO nova.osapi_compute.wsgi.server [req-070532b7-1742-490e-ad0f-3539ebb94d82 demo demo] 192.168.0.5 \"DELETE /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd HTTP/1.1\" status: 204 len: 203 time: 0.2714150\n136813:2014-10-29 16:45:30.161 DEBUG nova.compute.api [req-847c5ae9-21fb-44e2-8246-b653bc772932 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Going to try to terminate instance from (pid=4149) delete /opt/stack/nova/nova/compute/api.py:1792\n136827:2014-10-29 16:45:30.439 INFO nova.compute.api [req-847c5ae9-21fb-44e2-8246-b653bc772932 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance is already in deleting state, ignoring this request\n136829:2014-10-29 16:45:30.503 INFO nova.osapi_compute.wsgi.server [req-847c5ae9-21fb-44e2-8246-b653bc772932 demo demo] 192.168.0.5 \"DELETE /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd HTTP/1.1\" status: 204 len: 203 time: 0.4029031\n137060:2014-10-29 16:45:36.491 INFO nova.osapi_compute.wsgi.server [req-89c09914-afdf-4595-89f6-2dee3fcf9bf2 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 323 time: 0.0669060\n137129:2014-10-29 16:45:38.444 INFO nova.osapi_compute.wsgi.server [req-f0aff53a-40eb-4c8a-b3c1-0f6de3b400dd demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 323 time: 0.0652530\n137381:2014-10-29 16:45:41.542 INFO nova.osapi_compute.wsgi.server [req-ee76eeae-4bbb-4047-99ca-cb56e1f5f0ed demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 330 time: 0.0926120\n138000:2014-10-29 16:45:53.420 INFO nova.osapi_compute.wsgi.server [req-1eb6fc4d-1965-4a52-bc9d-123861d387e4 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 329 time: 0.0616751\n138255:2014-10-29 16:46:00.137 INFO nova.osapi_compute.wsgi.server [req-f8c5ddf7-0d1c-408e-8e84-9a8d1ff552e3 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 323 time: 0.0710421\n138383:2014-10-29 16:46:01.271 INFO nova.osapi_compute.wsgi.server [req-dd6a0d78-11cc-4fb7-a18c-388816daec16 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 329 time: 0.1936400\n138441:2014-10-29 16:46:03.236 INFO nova.osapi_compute.wsgi.server [req-6a9b3861-58d9-404d-96ce-17f9479c8e48 demo demo] 192.168.0.5 \"POST /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd/action HTTP/1.1\" status: 409 len: 330 time: 0.0917919\n138620:2014-10-29 16:46:07.904 DEBUG nova.compute.api [req-6a9d2081-fac9-47f3-9781-7b88cfadb6c8 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Going to try to terminate instance from (pid=4150) delete /opt/stack/nova/nova/compute/api.py:1792\n138628:2014-10-29 16:46:08.052 WARNING nova.compute.api [req-6a9d2081-fac9-47f3-9781-7b88cfadb6c8 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] instance's host mahmachine is down, deleting from database\n138630:2014-10-29 16:46:08.436 INFO nova.osapi_compute.wsgi.server [req-6a9d2081-fac9-47f3-9781-7b88cfadb6c8 demo demo] 192.168.0.5 \"DELETE /v2/4acf27dcf6dd4663a60ff9a8342d2d2a/servers/cb7fb96c-1fac-4154-878c-e63717e3d5fd HTTP/1.1\" status: 204 len: 203 time: 0.5939291\n\n\n######################\n# CPU LOG\n######################\n\n271936:2014-10-29 16:43:59.105 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Created new semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n271937:2014-10-29 16:43:59.106 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Acquired semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n271939:2014-10-29 16:43:59.106 AUDIT nova.compute.manager [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Starting instance...\n272120:2014-10-29 16:43:59.828 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Attempting claim: memory 128 MB, disk 0 GB\n272121:2014-10-29 16:43:59.828 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Total memory: 36198 MB, used: 5440.00 MB\n272122:2014-10-29 16:43:59.828 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] memory limit: 54297.00 MB, free: 48857.00 MB\n272123:2014-10-29 16:43:59.829 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Total disk: 422 GB, used: 0.00 GB\n272124:2014-10-29 16:43:59.829 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] disk limit not specified, defaulting to unlimited\n272128:2014-10-29 16:43:59.853 AUDIT nova.compute.claims [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Claim successful\n272181:2014-10-29 16:44:00.714 DEBUG nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Allocating IP information in the background. from (pid=4255) _allocate_network_async /opt/stack/nova/nova/compute/manager.py:1627\n272256:2014-10-29 16:44:01.467 INFO nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Creating image\n272262:2014-10-29 16:44:01.469 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/6664bd12-c474-469b-947c-dcdcb28a4b13 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272267:2014-10-29 16:44:01.493 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272269:2014-10-29 16:44:01.525 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n272270:2014-10-29 16:44:01.526 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n272272:2014-10-29 16:44:01.527 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n272279:2014-10-29 16:44:01.530 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/ba527cc2-321c-44ac-aabb-f0b8c0e11b79 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272284:2014-10-29 16:44:01.551 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272286:2014-10-29 16:44:01.578 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n272287:2014-10-29 16:44:01.578 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n272289:2014-10-29 16:44:01.579 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n272291:2014-10-29 16:44:01.580 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n272292:2014-10-29 16:44:01.581 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n272294:2014-10-29 16:44:01.635 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n272323:2014-10-29 16:44:01.867 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): qemu-img create -f qcow2 -o backing_file=/opt/stack/data/nova/instances/_base/f41a0c8844559079ee536ee876f477427d374c2a /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272348:2014-10-29 16:44:02.289 INFO nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Using config drive\n272559:2014-10-29 16:44:03.318 DEBUG nova.openstack.common.lockutils [-] Created new semaphore \"refresh_cache-cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n272560:2014-10-29 16:44:03.318 DEBUG nova.openstack.common.lockutils [-] Acquired semaphore \"refresh_cache-cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n272567:2014-10-29 16:44:03.343 DEBUG nova.openstack.common.lockutils [-] Releasing semaphore \"refresh_cache-cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n272568:2014-10-29 16:44:03.343 DEBUG nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance network_info: |[VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.5'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None})]| from (pid=4255) _allocate_network_async /opt/stack/nova/nova/compute/manager.py:1644\n272586:2014-10-29 16:44:04.042 INFO nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Creating config drive at /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\n272587:2014-10-29 16:44:04.044 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): genisoimage -o /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config -ldots -allow-lowercase -allow-multidot -l -publisher OpenStack Nova 2014.2.0 -quiet -J -r -V config-2 /tmp/tmpyRhdyM from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272591:2014-10-29 16:44:04.080 DEBUG nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Start _get_guest_xml network_info=[VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.5'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None})] disk_info={'disk_bus': 'virtio', 'cdrom_bus': 'ide', 'mapping': {'disk.config': {'bus': 'ide', 'type': 'cdrom', 'dev': 'hdd'}, 'disk': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': u'vda'}, 'root': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': u'vda'}}} image_meta={u'status': u'active', u'deleted': False, u'container_format': u'ami', u'min_ram': 0, u'updated_at': u'2014-10-29T17:22:11.000000', u'min_disk': 0, u'owner': u'709e583be930497f86c3d42c6c081774', u'is_public': True, u'deleted_at': None, u'properties': {u'kernel_id': u'6664bd12-c474-469b-947c-dcdcb28a4b13', u'ramdisk_id': u'ba527cc2-321c-44ac-aabb-f0b8c0e11b79'}, u'size': 25165824, u'name': u'cirros-0.3.2-x86_64-uec', u'checksum': u'4eada48c2843d2a262c814ddc92ecf2c', u'created_at': u'2014-10-29T17:22:11.000000', u'disk_format': u'ami', u'id': u'ce812a90-f402-47f2-bcb5-e39d4e07f655'} rescue=None block_device_info={'block_device_mapping': [], 'root_device_name': u'/dev/vda', 'ephemerals': [], 'swap': None} from (pid=4255) _get_guest_xml /opt/stack/nova/nova/virt/libvirt/driver.py:4149\n272623:2014-10-29 16:44:04.220 DEBUG nova.openstack.common.processutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n272636:2014-10-29 16:44:04.275 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n272637:2014-10-29 16:44:04.279 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n272639:2014-10-29 16:44:04.280 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n272641:2014-10-29 16:44:04.284 DEBUG nova.virt.libvirt.vif [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-10-29T23:43:58Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f337b3695d0-17',display_name='server-0x7f337b3695d0-17',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f337b3695d0-17',id=746,image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',info_cache=InstanceInfoCache,instance_type_id=7,kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',key_data=None,key_name=None,launch_index=0,launched_at=None,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=128,metadata={},node='mahmachine',numa_topology=None,os_type=None,pci_devices=<?>,power_state=0,progress=0,project_id='4acf27dcf6dd4663a60ff9a8342d2d2a',ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',reservation_id='r-n13hel5k',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',image_container_format='ami',image_disk_format='ami',image_kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',image_min_disk='0',image_min_ram='0',image_ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',instance_type_ephemeral_gb='0',instance_type_flavorid='84',instance_type_id='7',instance_type_memory_mb='128',instance_type_name='m1.micro',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='1',network_allocated='True'},task_state='spawning',terminated_at=None,updated_at=2014-10-29T23:44:01Z,user_data=None,user_id='be06d55efd2f4f63bbe210d78a1b2aa1',uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,vcpus=1,vm_mode=None,vm_state='building') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.5'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None}) virt_typekvm from (pid=4255) get_config /opt/stack/nova/nova/virt/libvirt/vif.py:342\n272642:2014-10-29 16:44:04.286 DEBUG nova.objects.instance [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Lazy-loading `pci_devices' on Instance uuid cb7fb96c-1fac-4154-878c-e63717e3d5fd from (pid=4255) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n272830:2014-10-29 16:44:04.366 DEBUG nova.virt.libvirt.config [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Generated XML ('<domain type=\"kvm\">\\n  <uuid>cb7fb96c-1fac-4154-878c-e63717e3d5fd</uuid>\\n  <name>instance-000002ea</name>\\n  <memory>131072</memory>\\n  <vcpu cpuset=\"4-7\">1</vcpu>\\n  <metadata>\\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\\n      <nova:package version=\"2014.2.0\"/>\\n      <nova:name>server-0x7f337b3695d0-17</nova:name>\\n      <nova:creationTime>2014-10-29 23:44:04</nova:creationTime>\\n      <nova:flavor name=\"m1.micro\">\\n        <nova:memory>128</nova:memory>\\n        <nova:disk>0</nova:disk>\\n        <nova:swap>0</nova:swap>\\n        <nova:ephemeral>0</nova:ephemeral>\\n        <nova:vcpus>1</nova:vcpus>\\n      </nova:flavor>\\n      <nova:owner>\\n        <nova:user uuid=\"be06d55efd2f4f63bbe210d78a1b2aa1\">demo</nova:user>\\n        <nova:project uuid=\"4acf27dcf6dd4663a60ff9a8342d2d2a\">demo</nova:project>\\n      </nova:owner>\\n      <nova:root type=\"image\" uuid=\"ce812a90-f402-47f2-bcb5-e39d4e07f655\"/>\\n    </nova:instance>\\n  </metadata>\\n  <sysinfo type=\"smbios\">\\n    <system>\\n      <entry name=\"manufacturer\">OpenStack Foundation</entry>\\n      <entry name=\"product\">OpenStack Nova</entry>\\n      <entry name=\"version\">2014.2.0</entry>\\n      <entry name=\"serial\">14291010-00b1-ed51-5422-003048fbec60</entry>\\n      <entry name=\"uuid\">cb7fb96c-1fac-4154-878c-e63717e3d5fd</entry>\\n    </system>\\n  </sysinfo>\\n  <os>\\n    <type>hvm</type>\\n    <kernel>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel</kernel>\\n    <initrd>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk</initrd>\\n    <cmdline>root=/dev/vda console=tty0 console=ttyS0</cmdline>\\n    <smbios mode=\"sysinfo\"/>\\n  </os>\\n  <features>\\n    <acpi/>\\n    <apic/>\\n  </features>\\n  <clock offset=\"utc\">\\n    <timer name=\"pit\" tickpolicy=\"delay\"/>\\n    <timer name=\"rtc\" tickpolicy=\"catchup\"/>\\n    <timer name=\"hpet\" present=\"no\"/>\\n  </clock>\\n  <cpu match=\"exact\">\\n    <topology sockets=\"1\" cores=\"1\" threads=\"1\"/>\\n  </cpu>\\n  <devices>\\n    <disk type=\"file\" device=\"disk\">\\n      <driver name=\"qemu\" type=\"qcow2\" cache=\"none\"/>\\n      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk\"/>\\n      <target bus=\"virtio\" dev=\"vda\"/>\\n    </disk>\\n    <disk type=\"file\" device=\"cdrom\">\\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\\n      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\"/>\\n      <target bus=\"ide\" dev=\"hdd\"/>\\n    </disk>\\n    <interface type=\"bridge\">\\n      <mac address=\"fa:16:3e:c6:46:93\"/>\\n      <model type=\"virtio\"/>\\n      <source bridge=\"br100\"/>\\n      <filterref filter=\"nova-instance-instance-000002ea-fa163ec64693\"/>\\n    </interface>\\n    <serial type=\"file\">\\n      <source path=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log\"/>\\n    </serial>\\n    <serial type=\"pty\"/>\\n    <graphics type=\"vnc\" autoport=\"yes\" keymap=\"en-us\" listen=\"127.0.0.1\"/>\\n    <video>\\n      <model type=\"cirrus\"/>\\n    </video>\\n    <memballoon model=\"virtio\">\\n      <stats period=\"10\"/>\\n    </memballoon>\\n  </devices>\\n</domain>\\n',)  from (pid=4255) to_xml /opt/stack/nova/nova/virt/libvirt/config.py:80\n272831:2014-10-29 16:44:04.368 DEBUG nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] End _get_guest_xml xml=<domain type=\"kvm\">\n272832:  <uuid>cb7fb96c-1fac-4154-878c-e63717e3d5fd</uuid>\n272861:      <entry name=\"uuid\">cb7fb96c-1fac-4154-878c-e63717e3d5fd</entry>\n272866:    <kernel>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel</kernel>\n272867:    <initrd>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk</initrd>\n272886:      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk\"/>\n272891:      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\"/>\n272901:      <source path=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log\"/>\n272914:2014-10-29 16:44:04.369 DEBUG nova.virt.libvirt.vif [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-10-29T23:43:58Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f337b3695d0-17',display_name='server-0x7f337b3695d0-17',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f337b3695d0-17',id=746,image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',info_cache=InstanceInfoCache,instance_type_id=7,kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',key_data=None,key_name=None,launch_index=0,launched_at=None,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=128,metadata={},node='mahmachine',numa_topology=None,os_type=None,pci_devices=PciDeviceList,power_state=0,progress=0,project_id='4acf27dcf6dd4663a60ff9a8342d2d2a',ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',reservation_id='r-n13hel5k',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',image_container_format='ami',image_disk_format='ami',image_kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',image_min_disk='0',image_min_ram='0',image_ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',instance_type_ephemeral_gb='0',instance_type_flavorid='84',instance_type_id='7',instance_type_memory_mb='128',instance_type_name='m1.micro',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='1',network_allocated='True'},task_state='spawning',terminated_at=None,updated_at=2014-10-29T23:44:01Z,user_data=None,user_id='be06d55efd2f4f63bbe210d78a1b2aa1',uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,vcpus=1,vm_mode=None,vm_state='building') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.5'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None}) from (pid=4255) plug /opt/stack/nova/nova/virt/libvirt/vif.py:531\n272915:2014-10-29 16:44:04.370 DEBUG nova.virt.libvirt.vif [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Ensuring bridge br100 from (pid=4255) plug_bridge /opt/stack/nova/nova/virt/libvirt/vif.py:376\n273030:2014-10-29 16:44:07.864 INFO nova.virt.libvirt.firewall [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Called setup_basic_filtering in nwfilter\n273031:2014-10-29 16:44:07.864 INFO nova.virt.libvirt.firewall [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Ensuring static filters\n273466:2014-10-29 16:44:11.482 DEBUG nova.virt.firewall [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Security Groups SecurityGroupList(objects=[SecurityGroup(1)]) translated to ipv4: ['-m state --state INVALID -j DROP', '-m state --state ESTABLISHED,RELATED -j ACCEPT', '-j $provider', u'-s 10.0.0.1 -p udp --sport 67 --dport 68 -j ACCEPT', u'-s 10.0.0.0/24 -j ACCEPT', '-j $sg-fallback'], ipv6: ['-m state --state INVALID -j DROP', '-m state --state ESTABLISHED,RELATED -j ACCEPT', '-j $provider', '-j $sg-fallback'] from (pid=4255) instance_rules /opt/stack/nova/nova/virt/firewall.py:420\n273467:2014-10-29 16:44:11.488 DEBUG nova.virt.firewall [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Filters added to instance: 746 from (pid=4255) prepare_instance_filter /opt/stack/nova/nova/virt/firewall.py:183\n273756:2014-10-29 16:44:12.228 DEBUG nova.virt.firewall [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Provider Firewall Rules refreshed: 746 from (pid=4255) prepare_instance_filter /opt/stack/nova/nova/virt/firewall.py:186\n274134:2014-10-29 16:44:16.654 DEBUG nova.virt.driver [-] Emitting event <LifecycleEvent: 1414626256.65, cb7fb96c-1fac-4154-878c-e63717e3d5fd => Started> from (pid=4255) emit_event /opt/stack/nova/nova/virt/driver.py:1298\n274135:2014-10-29 16:44:16.655 INFO nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] VM Started (Lifecycle Event)\n274144:2014-10-29 16:44:17.081 DEBUG nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Synchronizing instance power state after lifecycle event \"Started\"; current vm_state: building, current task_state: spawning, current DB power_state: 0, VM power_state: 1 from (pid=4255) handle_lifecycle_event /opt/stack/nova/nova/compute/manager.py:1105\n274146:2014-10-29 16:44:17.104 DEBUG nova.virt.libvirt.driver [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance is running from (pid=4255) spawn /opt/stack/nova/nova/virt/libvirt/driver.py:2618\n274150:2014-10-29 16:44:17.126 INFO nova.virt.libvirt.driver [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance spawned successfully.\n274151:2014-10-29 16:44:17.128 DEBUG nova.compute.manager [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Checking state from (pid=4255) _get_power_state /opt/stack/nova/nova/compute/manager.py:1156\n274160:2014-10-29 16:44:17.170 INFO nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] During sync_power_state the instance has a pending task (spawning). Skip.\n274187:2014-10-29 16:44:17.318 DEBUG nova.openstack.common.lockutils [req-3800f16a-cd2c-42ae-b809-95322e3e6873 demo demo] Releasing semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n275720:2014-10-29 16:44:34.448 DEBUG nova.compute.manager [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Stashing vm_state: active from (pid=4255) _prep_resize /opt/stack/nova/nova/compute/manager.py:3608\n275731:2014-10-29 16:44:34.630 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Attempting claim: memory 4096 MB, disk 0 GB\n275732:2014-10-29 16:44:34.630 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Total memory: 36198 MB, used: 5184.00 MB\n275733:2014-10-29 16:44:34.630 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] memory limit: 54297.00 MB, free: 49113.00 MB\n275734:2014-10-29 16:44:34.631 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Total disk: 422 GB, used: 0.00 GB\n275735:2014-10-29 16:44:34.631 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] disk limit not specified, defaulting to unlimited\n275739:2014-10-29 16:44:34.648 AUDIT nova.compute.claims [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Claim successful\n275740:2014-10-29 16:44:34.706 AUDIT nova.compute.resource_tracker [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Updating from migration cb7fb96c-1fac-4154-878c-e63717e3d5fd\n275744:2014-10-29 16:44:34.785 AUDIT nova.compute.manager [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Migrating\n275817:2014-10-29 16:44:35.357 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Starting migrate_disk_and_power_off from (pid=4255) migrate_disk_and_power_off /opt/stack/nova/nova/virt/libvirt/driver.py:5803\n275842:2014-10-29 16:44:36.400 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n275859:2014-10-29 16:44:36.608 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n275866:2014-10-29 16:44:36.650 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Shutting down instance from state 1 from (pid=4255) _clean_shutdown /opt/stack/nova/nova/virt/libvirt/driver.py:2427\n276173:2014-10-29 16:44:40.769 DEBUG nova.virt.driver [-] Emitting event <LifecycleEvent: 1414626280.77, cb7fb96c-1fac-4154-878c-e63717e3d5fd => Stopped> from (pid=4255) emit_event /opt/stack/nova/nova/virt/driver.py:1298\n276174:2014-10-29 16:44:40.771 INFO nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] VM Stopped (Lifecycle Event)\n276177:2014-10-29 16:44:40.796 INFO nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance shutdown successfully after 3 seconds.\n276186:2014-10-29 16:44:40.823 DEBUG nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Synchronizing instance power state after lifecycle event \"Stopped\"; current vm_state: active, current task_state: resize_migrating, current DB power_state: 1, VM power_state: 4 from (pid=4255) handle_lifecycle_event /opt/stack/nova/nova/compute/manager.py:1105\n276187:2014-10-29 16:44:40.852 INFO nova.virt.libvirt.driver [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance destroyed successfully.\n276188:2014-10-29 16:44:40.853 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276190:2014-10-29 16:44:40.871 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): mkdir -p /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276282:2014-10-29 16:44:40.915 INFO nova.compute.manager [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] During sync_power_state the instance has a pending task (resize_migrating). Skip.\n276286:2014-10-29 16:44:40.919 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): qemu-img convert -f qcow2 -O qcow2 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize/disk /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize/disk_rbase from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276341:2014-10-29 16:44:41.540 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize/disk_rbase /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276343:2014-10-29 16:44:41.554 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize/disk.config /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276348:2014-10-29 16:44:41.666 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Could not determine fibre channel world wide node names from (pid=4255) get_volume_connector /opt/stack/nova/nova/virt/libvirt/driver.py:1277\n276351:2014-10-29 16:44:41.764 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Could not determine fibre channel world wide port names from (pid=4255) get_volume_connector /opt/stack/nova/nova/virt/libvirt/driver.py:1284\n276352:2014-10-29 16:44:41.979 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Created new semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276353:2014-10-29 16:44:41.979 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Acquired semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276355:2014-10-29 16:44:41.980 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Releasing semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276377:2014-10-29 16:44:43.158 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Starting finish_migration from (pid=4255) finish_migration /opt/stack/nova/nova/virt/libvirt/driver.py:5966\n276378:2014-10-29 16:44:43.159 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): qemu-img convert -f raw -O qcow2 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config_qcow from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276394:2014-10-29 16:44:43.483 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config_qcow /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276397:2014-10-29 16:44:43.500 INFO nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Creating image\n276398:2014-10-29 16:44:43.500 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf chown 1001 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276405:2014-10-29 16:44:43.605 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/6664bd12-c474-469b-947c-dcdcb28a4b13 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276414:2014-10-29 16:44:43.634 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276416:2014-10-29 16:44:43.666 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276417:2014-10-29 16:44:43.666 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276419:2014-10-29 16:44:43.667 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276426:2014-10-29 16:44:43.669 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/ba527cc2-321c-44ac-aabb-f0b8c0e11b79 /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276431:2014-10-29 16:44:43.692 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276433:2014-10-29 16:44:43.720 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276434:2014-10-29 16:44:43.720 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276436:2014-10-29 16:44:43.721 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276438:2014-10-29 16:44:43.723 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276439:2014-10-29 16:44:43.723 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276441:2014-10-29 16:44:43.725 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276443:2014-10-29 16:44:43.725 INFO nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Using config drive\n276444:2014-10-29 16:44:43.812 INFO nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Creating config drive at /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\n276445:2014-10-29 16:44:43.813 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): genisoimage -o /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config -ldots -allow-lowercase -allow-multidot -l -publisher OpenStack Nova 2014.2.0 -quiet -J -r -V config-2 /tmp/tmpQcR0SY from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276474:2014-10-29 16:44:43.877 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Start _get_guest_xml network_info=[VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'version': 4, 'vif_mac': u'fa:16:3e:c6:46:93', 'floating_ips': [], 'label': u'private', 'meta': {}, 'address': u'10.0.0.5', 'type': u'fixed'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None})] disk_info={'disk_bus': 'virtio', 'cdrom_bus': 'ide', 'mapping': {'disk.config': {'bus': 'ide', 'type': 'cdrom', 'dev': 'hdd'}, 'disk': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': 'vda'}, 'root': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': 'vda'}}} image_meta={u'min_disk': 0, u'container_format': u'ami', u'min_ram': 0, u'disk_format': u'ami', 'properties': {u'old_vm_state': u'active', 'old_instance_type_flavorid': u'84', 'old_instance_type_vcpus': u'1', u'instance_type_name': u'test2', u'new_instance_type_ephemeral_gb': u'0', u'base_image_ref': u'ce812a90-f402-47f2-bcb5-e39d4e07f655', u'new_instance_type_root_gb': u'0', u'instance_type_ephemeral_gb': u'0', u'new_instance_type_rxtx_factor': u'1.0', u'instance_type_root_gb': u'0', u'network_allocated': u'True', 'old_instance_type_swap': u'0', 'old_instance_type_root_gb': u'0', u'new_instance_type_swap': u'0', 'old_instance_type_ephemeral_gb': u'0', 'old_instance_type_rxtx_factor': u'1.0', u'ramdisk_id': u'ba527cc2-321c-44ac-aabb-f0b8c0e11b79', u'kernel_id': u'6664bd12-c474-469b-947c-dcdcb28a4b13', u'new_instance_type_name': u'test2', 'old_instance_type_id': u'7', u'new_instance_type_flavorid': u'9998', u'instance_type_rxtx_factor': u'1.0', u'new_instance_type_memory_mb': u'4096', u'new_instance_type_id': u'13', u'instance_type_vcpus': u'2', u'instance_type_memory_mb': u'4096', u'instance_type_swap': u'0', u'new_instance_type_vcpus': u'2', 'old_instance_type_memory_mb': u'128', u'instance_type_id': u'13', u'instance_type_flavorid': u'9998', 'old_instance_type_name': u'm1.micro'}} rescue=None block_device_info={'swap': None, 'ephemerals': [], 'block_device_mapping': []} from (pid=4255) _get_guest_xml /opt/stack/nova/nova/virt/libvirt/driver.py:4149\n276475:2014-10-29 16:44:43.898 DEBUG nova.objects.instance [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Lazy-loading `numa_topology' on Instance uuid cb7fb96c-1fac-4154-878c-e63717e3d5fd from (pid=4255) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n276484:2014-10-29 16:44:43.918 DEBUG nova.openstack.common.processutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276486:2014-10-29 16:44:43.949 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Created new semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276487:2014-10-29 16:44:43.949 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276489:2014-10-29 16:44:43.950 DEBUG nova.openstack.common.lockutils [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.info\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276492:2014-10-29 16:44:43.965 DEBUG nova.virt.libvirt.vif [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-10-29T23:43:58Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f337b3695d0-17',display_name='server-0x7f337b3695d0-17',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f337b3695d0-17',id=746,image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',info_cache=InstanceInfoCache,instance_type_id=13,kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',key_data=None,key_name=None,launch_index=0,launched_at=2014-10-29T23:44:17Z,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=4096,metadata={},node='mahmachine',numa_topology=None,os_type=None,pci_devices=<?>,power_state=1,progress=0,project_id='4acf27dcf6dd4663a60ff9a8342d2d2a',ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',reservation_id='r-n13hel5k',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',image_container_format='ami',image_disk_format='ami',image_kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',image_min_disk='0',image_min_ram='0',image_ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',instance_type_ephemeral_gb='0',instance_type_flavorid='9998',instance_type_id='13',instance_type_memory_mb='4096',instance_type_name='test2',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='2',network_allocated='True',new_instance_type_ephemeral_gb='0',new_instance_type_flavorid='9998',new_instance_type_id='13',new_instance_type_memory_mb='4096',new_instance_type_name='test2',new_instance_type_root_gb='0',new_instance_type_rxtx_factor='1.0',new_instance_type_swap='0',new_instance_type_vcpu_weight=None,new_instance_type_vcpus='2',old_instance_type_ephemeral_gb='0',old_instance_type_flavorid='84',old_instance_type_id='7',old_instance_type_memory_mb='128',old_instance_type_name='m1.micro',old_instance_type_root_gb='0',old_instance_type_rxtx_factor='1.0',old_instance_type_swap='0',old_instance_type_vcpu_weight=None,old_instance_type_vcpus='1',old_vm_state='active'},task_state='resize_finish',terminated_at=None,updated_at=2014-10-29T23:44:43Z,user_data=None,user_id='be06d55efd2f4f63bbe210d78a1b2aa1',uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,vcpus=2,vm_mode=None,vm_state='active') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'version': 4, 'vif_mac': u'fa:16:3e:c6:46:93', 'floating_ips': [], 'label': u'private', 'meta': {}, 'address': u'10.0.0.5', 'type': u'fixed'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None}) virt_typekvm from (pid=4255) get_config /opt/stack/nova/nova/virt/libvirt/vif.py:342\n276493:2014-10-29 16:44:43.967 DEBUG nova.objects.instance [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Lazy-loading `pci_devices' on Instance uuid cb7fb96c-1fac-4154-878c-e63717e3d5fd from (pid=4255) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n276494:2014-10-29 16:44:44.048 DEBUG nova.virt.libvirt.config [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Generated XML ('<domain type=\"kvm\">\\n  <uuid>cb7fb96c-1fac-4154-878c-e63717e3d5fd</uuid>\\n  <name>instance-000002ea</name>\\n  <memory>4194304</memory>\\n  <vcpu cpuset=\"4-7\">2</vcpu>\\n  <metadata>\\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\\n      <nova:package version=\"2014.2.0\"/>\\n      <nova:name>server-0x7f337b3695d0-17</nova:name>\\n      <nova:creationTime>2014-10-29 23:44:43</nova:creationTime>\\n      <nova:flavor name=\"test2\">\\n        <nova:memory>4096</nova:memory>\\n        <nova:disk>0</nova:disk>\\n        <nova:swap>0</nova:swap>\\n        <nova:ephemeral>0</nova:ephemeral>\\n        <nova:vcpus>2</nova:vcpus>\\n      </nova:flavor>\\n      <nova:owner>\\n        <nova:user uuid=\"be06d55efd2f4f63bbe210d78a1b2aa1\">demo</nova:user>\\n        <nova:project uuid=\"4acf27dcf6dd4663a60ff9a8342d2d2a\">demo</nova:project>\\n      </nova:owner>\\n      <nova:root type=\"image\" uuid=\"ce812a90-f402-47f2-bcb5-e39d4e07f655\"/>\\n    </nova:instance>\\n  </metadata>\\n  <sysinfo type=\"smbios\">\\n    <system>\\n      <entry name=\"manufacturer\">OpenStack Foundation</entry>\\n      <entry name=\"product\">OpenStack Nova</entry>\\n      <entry name=\"version\">2014.2.0</entry>\\n      <entry name=\"serial\">14291010-00b1-ed51-5422-003048fbec60</entry>\\n      <entry name=\"uuid\">cb7fb96c-1fac-4154-878c-e63717e3d5fd</entry>\\n    </system>\\n  </sysinfo>\\n  <os>\\n    <type>hvm</type>\\n    <kernel>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel</kernel>\\n    <initrd>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk</initrd>\\n    <cmdline>root=/dev/vda console=tty0 console=ttyS0</cmdline>\\n    <smbios mode=\"sysinfo\"/>\\n  </os>\\n  <features>\\n    <acpi/>\\n    <apic/>\\n  </features>\\n  <clock offset=\"utc\">\\n    <timer name=\"pit\" tickpolicy=\"delay\"/>\\n    <timer name=\"rtc\" tickpolicy=\"catchup\"/>\\n    <timer name=\"hpet\" present=\"no\"/>\\n  </clock>\\n  <cpu match=\"exact\">\\n    <topology sockets=\"2\" cores=\"1\" threads=\"1\"/>\\n  </cpu>\\n  <devices>\\n    <disk type=\"file\" device=\"disk\">\\n      <driver name=\"qemu\" type=\"qcow2\" cache=\"none\"/>\\n      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk\"/>\\n      <target bus=\"virtio\" dev=\"vda\"/>\\n    </disk>\\n    <disk type=\"file\" device=\"cdrom\">\\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\\n      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\"/>\\n      <target bus=\"ide\" dev=\"hdd\"/>\\n    </disk>\\n    <interface type=\"bridge\">\\n      <mac address=\"fa:16:3e:c6:46:93\"/>\\n      <model type=\"virtio\"/>\\n      <source bridge=\"br100\"/>\\n      <filterref filter=\"nova-instance-instance-000002ea-fa163ec64693\"/>\\n    </interface>\\n    <serial type=\"file\">\\n      <source path=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log\"/>\\n    </serial>\\n    <serial type=\"pty\"/>\\n    <graphics type=\"vnc\" autoport=\"yes\" keymap=\"en-us\" listen=\"127.0.0.1\"/>\\n    <video>\\n      <model type=\"cirrus\"/>\\n    </video>\\n    <memballoon model=\"virtio\">\\n      <stats period=\"10\"/>\\n    </memballoon>\\n  </devices>\\n</domain>\\n',)  from (pid=4255) to_xml /opt/stack/nova/nova/virt/libvirt/config.py:80\n276495:2014-10-29 16:44:44.049 DEBUG nova.virt.libvirt.driver [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] End _get_guest_xml xml=<domain type=\"kvm\">\n276496:  <uuid>cb7fb96c-1fac-4154-878c-e63717e3d5fd</uuid>\n276525:      <entry name=\"uuid\">cb7fb96c-1fac-4154-878c-e63717e3d5fd</entry>\n276530:    <kernel>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel</kernel>\n276531:    <initrd>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk</initrd>\n276550:      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk\"/>\n276555:      <source file=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config\"/>\n276565:      <source path=\"/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log\"/>\n276578:2014-10-29 16:44:44.050 DEBUG nova.virt.libvirt.vif [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-10-29T23:43:58Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f337b3695d0-17',display_name='server-0x7f337b3695d0-17',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f337b3695d0-17',id=746,image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',info_cache=InstanceInfoCache,instance_type_id=13,kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',key_data=None,key_name=None,launch_index=0,launched_at=2014-10-29T23:44:17Z,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=4096,metadata={},node='mahmachine',numa_topology=None,os_type=None,pci_devices=PciDeviceList,power_state=1,progress=0,project_id='4acf27dcf6dd4663a60ff9a8342d2d2a',ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',reservation_id='r-n13hel5k',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',image_container_format='ami',image_disk_format='ami',image_kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',image_min_disk='0',image_min_ram='0',image_ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',instance_type_ephemeral_gb='0',instance_type_flavorid='9998',instance_type_id='13',instance_type_memory_mb='4096',instance_type_name='test2',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='2',network_allocated='True',new_instance_type_ephemeral_gb='0',new_instance_type_flavorid='9998',new_instance_type_id='13',new_instance_type_memory_mb='4096',new_instance_type_name='test2',new_instance_type_root_gb='0',new_instance_type_rxtx_factor='1.0',new_instance_type_swap='0',new_instance_type_vcpu_weight=None,new_instance_type_vcpus='2',old_instance_type_ephemeral_gb='0',old_instance_type_flavorid='84',old_instance_type_id='7',old_instance_type_memory_mb='128',old_instance_type_name='m1.micro',old_instance_type_root_gb='0',old_instance_type_rxtx_factor='1.0',old_instance_type_swap='0',old_instance_type_vcpu_weight=None,old_instance_type_vcpus='1',old_vm_state='active'},task_state='resize_finish',terminated_at=None,updated_at=2014-10-29T23:44:43Z,user_data=None,user_id='be06d55efd2f4f63bbe210d78a1b2aa1',uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,vcpus=2,vm_mode=None,vm_state='active') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'version': 4, 'vif_mac': u'fa:16:3e:c6:46:93', 'floating_ips': [], 'label': u'private', 'meta': {}, 'address': u'10.0.0.5', 'type': u'fixed'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None}) from (pid=4255) plug /opt/stack/nova/nova/virt/libvirt/vif.py:531\n276579:2014-10-29 16:44:44.051 DEBUG nova.virt.libvirt.vif [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Ensuring bridge br100 from (pid=4255) plug_bridge /opt/stack/nova/nova/virt/libvirt/vif.py:376\n276607:2014-10-29 16:44:44.318 INFO nova.virt.libvirt.firewall [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Called setup_basic_filtering in nwfilter\n276608:2014-10-29 16:44:44.318 INFO nova.virt.libvirt.firewall [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Ensuring static filters\n276614:2014-10-29 16:44:44.338 DEBUG nova.openstack.common.lockutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Created new semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276615:2014-10-29 16:44:44.339 DEBUG nova.openstack.common.lockutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Acquired semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276617:2014-10-29 16:44:44.339 DEBUG nova.openstack.common.lockutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Created new semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n276618:2014-10-29 16:44:44.340 DEBUG nova.openstack.common.lockutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Acquired semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n276620:2014-10-29 16:44:44.340 DEBUG nova.openstack.common.lockutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Releasing semaphore \"cb7fb96c-1fac-4154-878c-e63717e3d5fd-events\" from (pid=4255) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n276657:2014-10-29 16:44:44.456 AUDIT nova.compute.manager [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Terminating instance\n276660:2014-10-29 16:44:44.486 INFO nova.virt.libvirt.driver [-] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Instance destroyed successfully.\n276661:2014-10-29 16:44:44.487 DEBUG nova.virt.libvirt.vif [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-10-29T23:43:58Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f337b3695d0-17',display_name='server-0x7f337b3695d0-17',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f337b3695d0-17',id=746,image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',info_cache=InstanceInfoCache,instance_type_id=13,kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',key_data=None,key_name=None,launch_index=0,launched_at=2014-10-29T23:44:17Z,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=4096,metadata={},node='mahmachine',numa_topology=<?>,os_type=None,pci_devices=<?>,power_state=1,progress=0,project_id='4acf27dcf6dd4663a60ff9a8342d2d2a',ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',reservation_id='r-n13hel5k',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='ce812a90-f402-47f2-bcb5-e39d4e07f655',image_container_format='ami',image_disk_format='ami',image_kernel_id='6664bd12-c474-469b-947c-dcdcb28a4b13',image_min_disk='0',image_min_ram='0',image_ramdisk_id='ba527cc2-321c-44ac-aabb-f0b8c0e11b79',instance_type_ephemeral_gb='0',instance_type_flavorid='9998',instance_type_id='13',instance_type_memory_mb='4096',instance_type_name='test2',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='2',network_allocated='True',new_instance_type_ephemeral_gb='0',new_instance_type_flavorid='9998',new_instance_type_id='13',new_instance_type_memory_mb='4096',new_instance_type_name='test2',new_instance_type_root_gb='0',new_instance_type_rxtx_factor='1.0',new_instance_type_swap='0',new_instance_type_vcpu_weight=None,new_instance_type_vcpus='2',old_instance_type_ephemeral_gb='0',old_instance_type_flavorid='84',old_instance_type_id='7',old_instance_type_memory_mb='128',old_instance_type_name='m1.micro',old_instance_type_root_gb='0',old_instance_type_rxtx_factor='1.0',old_instance_type_swap='0',old_instance_type_vcpu_weight=None,old_instance_type_vcpus='1',old_vm_state='active'},task_state='deleting',terminated_at=None,updated_at=2014-10-29T23:44:43Z,user_data=None,user_id='be06d55efd2f4f63bbe210d78a1b2aa1',uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,vcpus=2,vm_mode=None,vm_state='active') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.5'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'63428585-ed86-4300-a032-2da21b7d5701', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:c6:46:93', 'active': False, 'type': u'bridge', 'id': u'744ac7bf-a399-43f1-83da-84a34a6ba471', 'qbg_params': None}) from (pid=4255) unplug /opt/stack/nova/nova/virt/libvirt/vif.py:678\n276668:2014-10-29 16:44:44.518 DEBUG nova.virt.firewall [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Security Groups SecurityGroupList(objects=[SecurityGroup(1)]) translated to ipv4: ['-m state --state INVALID -j DROP', '-m state --state ESTABLISHED,RELATED -j ACCEPT', '-j $provider', u'-s 10.0.0.1 -p udp --sport 67 --dport 68 -j ACCEPT', u'-s 10.0.0.0/24 -j ACCEPT', '-j $sg-fallback'], ipv6: ['-m state --state INVALID -j DROP', '-m state --state ESTABLISHED,RELATED -j ACCEPT', '-j $provider', '-j $sg-fallback'] from (pid=4255) instance_rules /opt/stack/nova/nova/virt/firewall.py:420\n276669:2014-10-29 16:44:44.520 DEBUG nova.virt.firewall [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Filters added to instance: 746 from (pid=4255) prepare_instance_filter /opt/stack/nova/nova/virt/firewall.py:183\n276696:2014-10-29 16:44:45.088 DEBUG nova.objects.instance [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Lazy-loading `system_metadata' on Instance uuid cb7fb96c-1fac-4154-878c-e63717e3d5fd from (pid=4255) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n276707:2014-10-29 16:44:45.164 DEBUG nova.openstack.common.processutils [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_del from (pid=4255) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n276709:2014-10-29 16:44:45.177 INFO nova.virt.libvirt.driver [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Deletion of /opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd_resize failed\n276716:2014-10-29 16:44:45.250 DEBUG nova.virt.firewall [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Provider Firewall Rules refreshed: 746 from (pid=4255) prepare_instance_filter /opt/stack/nova/nova/virt/firewall.py:186\n276792:2014-10-29 16:44:46.129 DEBUG nova.compute.manager [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Deallocating network for instance from (pid=4255) _deallocate_network /opt/stack/nova/nova/compute/manager.py:1915\n276796:  <uuid>cb7fb96c-1fac-4154-878c-e63717e3d5fd</uuid>\n276825:      <entry name='uuid'>cb7fb96c-1fac-4154-878c-e63717e3d5fd</entry>\n276830:    <kernel>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/kernel</kernel>\n276831:    <initrd>/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/ramdisk</initrd>\n276855:      <source file='/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk'/>\n276861:      <source file='/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/disk.config'/>\n276881:      <source path='/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log'/>\n276888:      <source path='/opt/stack/data/nova/instances/cb7fb96c-1fac-4154-878c-e63717e3d5fd/console.log'/>\n276926:2014-10-29 16:44:46.330 ERROR nova.compute.manager [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Setting instance vm_state to ERROR\n276927:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] Traceback (most recent call last):\n276928:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize\n276929:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     disk_info, image)\n276930:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize\n276931:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     old_instance_type, sys_meta)\n276932:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n276933:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     six.reraise(self.type_, self.value, self.tb)\n276934:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize\n276935:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     block_device_info, power_on)\n276936:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5991, in finish_migration\n276937:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     vifs_already_plugged=True)\n276938:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4416, in _create_domain_and_network\n276939:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     power_on=power_on)\n276940:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4340, in _create_domain\n276941:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     LOG.error(err)\n276942:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n276943:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     six.reraise(self.type_, self.value, self.tb)\n276944:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4331, in _create_domain\n276945:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     domain.createWithFlags(launch_flags)\n276946:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\n276947:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n276948:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\n276949:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     rv = execute(f, *args, **kwargs)\n276950:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\n276951:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     six.reraise(c, e, tb)\n276952:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\n276953:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     rv = meth(*args, **kwargs)\n276954:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\n276955:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n276956:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] libvirtError: Domain not found: no domain with matching uuid 'cb7fb96c-1fac-4154-878c-e63717e3d5fd' (instance-000002ea)\n276957:2014-10-29 16:44:46.330 TRACE nova.compute.manager [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] \n276975:2014-10-29 16:44:47.095 ERROR oslo.messaging.rpc.dispatcher [req-6b751e14-b6c1-4048-9c1e-98d33a7adfe6 demo demo] Exception during message handling: Domain not found: no domain with matching uuid 'cb7fb96c-1fac-4154-878c-e63717e3d5fd' (instance-000002ea)\n277041:2014-10-29 16:44:47.095 TRACE oslo.messaging.rpc.dispatcher libvirtError: Domain not found: no domain with matching uuid 'cb7fb96c-1fac-4154-878c-e63717e3d5fd' (instance-000002ea)\n277043:2014-10-29 16:44:47.204 DEBUG nova.compute.manager [req-94104529-9a6d-40a9-a3c8-d0ebf8a22f3f demo demo] [instance: cb7fb96c-1fac-4154-878c-e63717e3d5fd] terminating bdm BlockDeviceMapping(boot_index=0,connection_info=None,created_at=2014-10-29T23:43:58Z,delete_on_termination=True,deleted=False,deleted_at=None,destination_type='local',device_name='/dev/vda',device_type='disk',disk_bus=None,guest_format=None,id=746,image_id='ce812a90-f402-47f2-bcb5-e39d4e07f655',instance=<?>,instance_uuid=cb7fb96c-1fac-4154-878c-e63717e3d5fd,no_device=False,snapshot_id=None,source_type='image',updated_at=2014-10-29T23:44:00Z,volume_id=None,volume_size=None) from (pid=4255) _cleanup_volumes /opt/stack/nova/nova/compute/manager.py:2407", 
            "date_created": "2014-10-31 18:52:15.735230+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "This looks like it may be a  libvirt bug, what version of libvirt are you using?", 
            "date_created": "2014-11-02 07:48:39.564869+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Looks like we are seeing this in the gate as well:  \n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwidmlyRG9tYWluQ3JlYXRlV2l0aEZsYWdzXCIgQU5EIHRhZ3M6XCJzY3JlZW4tbi1jcHUudHh0XCIiLCJmaWVsZHMiOltdLCJvZmZzZXQiOjAsInRpbWVmcmFtZSI6ImFsbCIsImdyYXBobW9kZSI6ImNvdW50IiwidGltZSI6eyJ1c2VyX2ludGVydmFsIjowfSwic3RhbXAiOjE0MTQ5MTQ3MTc2MzYsIm1vZGUiOiIiLCJhbmFseXplX2ZpZWxkIjoiIn0=", 
            "date_created": "2014-11-02 07:54:23.116579+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Better query: http://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwidmlyRG9tYWluQ3JlYXRlV2l0aEZsYWdzXCIgQU5EIChtZXNzYWdlOlwiZmluaXNoX3JldmVydF9yZXNpemVcIiBPUiBtZXNzYWdlOlwiZmluaXNoX3Jlc2l6ZVwiKSBBTkQgIHRhZ3M6XCJzY3JlZW4tbi1jcHUudHh0XCIgQU5EIHRhZ3M6XCJtdWx0aWxpbmVcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiYWxsIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTQxNDkxNTkyNzQ4MCwibW9kZSI6IiIsImFuYWx5emVfZmllbGQiOiIifQ==\n\nmessage:\"virDomainCreateWithFlags\" AND (message:\"finish_revert_resize\" OR message:\"finish_resize\") AND  tags:\"screen-n-cpu.txt\" AND tags:\"multiline\"", 
            "date_created": "2014-11-02 08:12:59.652285+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "I have libvirtd (libvirt) 1.2.2 on my test box.\n", 
            "date_created": "2014-11-02 20:13:09.738080+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Crash via reboot(), update_metadata(), delete() calls\n\ngrep -n 711c279a-f242-492a-8273-5fad1f967cff screen-n-api.log \n207475:2014-11-05 09:51:19.947 DEBUG nova.compute.api [req-30f31003-283b-4e5d-89f2-d59467b68170 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] block_device_mapping [{'guest_format': None, 'boot_index': 0, 'no_device': None, 'connection_info': None, 'snapshot_id': None, 'volume_size': None, 'device_name': None, 'disk_bus': None, 'image_id': u'719c9942-1ee3-4bb3-901a-b146f0595373', 'source_type': 'image', 'device_type': 'disk', 'volume_id': None, 'destination_type': 'local', 'delete_on_termination': True}] from (pid=11351) _update_block_device_mapping /opt/stack/nova/nova/compute/api.py:1172\n207618:2014-11-05 09:51:25.227 INFO nova.osapi_compute.wsgi.server [req-cfb545bc-69c2-459f-b2d4-9a1948b5bfbc demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 409 len: 333 time: 0.0620651\n207714:2014-11-05 09:51:29.912 INFO nova.osapi_compute.wsgi.server [req-108049ec-2442-41bd-913e-f780b935d69d demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 200 len: 251 time: 0.1966851\n208037:2014-11-05 09:51:41.005 INFO nova.osapi_compute.wsgi.server [req-eba7f818-2f02-479c-9c95-19509dddc11e demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 200 len: 249 time: 0.1794751\n208212:2014-11-05 09:51:45.296 INFO nova.osapi_compute.wsgi.server [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/action HTTP/1.1\" status: 202 len: 209 time: 0.3154659\n208375:2014-11-05 09:51:48.021 INFO nova.osapi_compute.wsgi.server [req-0f3d1b5f-2d53-40fc-a3ae-363faad4bcb9 demo demo] 192.168.0.5 \"PUT /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 200 len: 264 time: 0.6731498\n208499:2014-11-05 09:51:52.604 DEBUG nova.compute.api [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Going to try to terminate instance from (pid=11353) delete /opt/stack/nova/nova/compute/api.py:1792\n208505:2014-11-05 09:51:52.825 INFO nova.osapi_compute.wsgi.server [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] 192.168.0.5 \"DELETE /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff HTTP/1.1\" status: 204 len: 203 time: 0.2831891\n208537:2014-11-05 09:51:54.238 INFO nova.osapi_compute.wsgi.server [req-2bac69ee-b42c-49b3-9434-d563cdfd502a demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 200 len: 287 time: 0.2273030\n208757:2014-11-05 09:52:00.488 INFO nova.osapi_compute.wsgi.server [req-169f083c-8cc3-46f8-84b5-ed3cc5f24baf admin admin] 192.168.0.5 \"GET /v2/e4eb3162d7cb4760b6c0d2760ecc07a0/servers/711c279a-f242-492a-8273-5fad1f967cff HTTP/1.1\" status: 200 len: 1973 time: 0.2073791\n208877:2014-11-05 09:52:02.242 INFO nova.osapi_compute.wsgi.server [req-c7b0f93c-7a9d-46db-b818-1691290c8a95 demo demo] 192.168.0.5 \"POST /v2/2b6cfb1011a842aca8b3f8c52d969ce3/servers/711c279a-f242-492a-8273-5fad1f967cff/metadata HTTP/1.1\" status: 200 len: 289 time: 0.7764730\n208918:2014-11-05 09:52:03.779 INFO nova.osapi_compute.wsgi.server [req-e2348a5d-e082-4bdc-9bbf-fa7528870351 admin admin] 192.168.0.5 \"GET /v2/e4eb3162d7cb4760b6c0d2760ecc07a0/servers/711c279a-f242-492a-8273-5fad1f967cff HTTP/1.1\" status: 404 len: 291 time: 0.0901701\n\n\n###############################################################################\nscreen-n-cpu.log\n232229:2014-11-05 09:51:41.006 DEBUG nova.compute.manager [req-eba7f818-2f02-479c-9c95-19509dddc11e demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Changing instance metadata according to {u'key0': [u'+', u'p']} from (pid=11447) change_instance_metadata /opt/stack/nova/nova/compute/manager.py:3313\n232256:2014-11-05 09:51:45.336 AUDIT nova.compute.manager [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Rebooting instance\n232258:2014-11-05 09:51:45.556 DEBUG nova.compute.manager [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Checking state from (pid=11447) _get_power_state /opt/stack/nova/nova/compute/manager.py:1156\n232259:2014-11-05 09:51:45.818 DEBUG nova.objects.instance [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] Lazy-loading `pci_devices' on Instance uuid 711c279a-f242-492a-8273-5fad1f967cff from (pid=11447) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n232265:2014-11-05 09:51:48.021 DEBUG nova.compute.manager [req-0f3d1b5f-2d53-40fc-a3ae-363faad4bcb9 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Changing instance metadata according to {u'key2': [u'+', u'mC00ODrb1I'], u'key1': [u'+', u'DLc'], u'key0': [u'+', u'LR0x9']} from (pid=11447) change_instance_metadata /opt/stack/nova/nova/compute/manager.py:3313\n232299:2014-11-05 09:51:52.887 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Created new semaphore \"711c279a-f242-492a-8273-5fad1f967cff\" from (pid=11447) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n232300:2014-11-05 09:51:52.888 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Acquired semaphore \"711c279a-f242-492a-8273-5fad1f967cff\" from (pid=11447) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n232302:2014-11-05 09:51:52.888 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Created new semaphore \"711c279a-f242-492a-8273-5fad1f967cff-events\" from (pid=11447) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\n232303:2014-11-05 09:51:52.889 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Acquired semaphore \"711c279a-f242-492a-8273-5fad1f967cff-events\" from (pid=11447) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\n232305:2014-11-05 09:51:52.889 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Releasing semaphore \"711c279a-f242-492a-8273-5fad1f967cff-events\" from (pid=11447) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n232307:2014-11-05 09:51:52.947 AUDIT nova.compute.manager [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Terminating instance\n232327:2014-11-05 09:51:54.237 DEBUG nova.compute.manager [req-2bac69ee-b42c-49b3-9434-d563cdfd502a demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Changing instance metadata according to {u'key3': [u'+', u'XiT'], u'key2': [u'+', u'tMmTC'], u'key1': [u'+', u'KpJ'], u'key0': [u'+', u's'], u'key4': [u'+', u'Nj4gg']} from (pid=11447) change_instance_metadata /opt/stack/nova/nova/compute/manager.py:3313\n232337:2014-11-05 09:51:54.595 DEBUG nova.virt.driver [-] Emitting event <LifecycleEvent: 1415209914.59, 711c279a-f242-492a-8273-5fad1f967cff => Stopped> from (pid=11447) emit_event /opt/stack/nova/nova/virt/driver.py:1298\n232338:2014-11-05 09:51:54.596 INFO nova.compute.manager [-] [instance: 711c279a-f242-492a-8273-5fad1f967cff] VM Stopped (Lifecycle Event)\n232347:2014-11-05 09:51:54.624 INFO nova.virt.libvirt.driver [-] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Instance destroyed successfully.\n232348:2014-11-05 09:51:54.625 DEBUG nova.virt.libvirt.vif [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] vif_type=bridge instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=None,cell_name=None,cleaned=False,config_drive='',created_at=2014-11-05T17:51:19Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description='server-0x7f21cd2035d0-5',display_name='server-0x7f21cd2035d0-5',ephemeral_gb=0,ephemeral_key_uuid=None,fault=<?>,host='mahmachine',hostname='server-0x7f21cd2035d0-5',id=717,image_ref='719c9942-1ee3-4bb3-901a-b146f0595373',info_cache=InstanceInfoCache,instance_type_id=7,kernel_id='',key_data=None,key_name=None,launch_index=0,launched_at=2014-11-05T17:51:28Z,launched_on='mahmachine',locked=False,locked_by=None,memory_mb=128,metadata={key0='LR0x9',key1='DLc',key2='mC00ODrb1I'},node='mahmachine',numa_topology=<?>,os_type=None,pci_devices=<?>,power_state=1,progress=0,project_id='2b6cfb1011a842aca8b3f8c52d969ce3',ramdisk_id='',reservation_id='r-kdk5nzh7',root_device_name='/dev/vda',root_gb=0,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata={image_base_image_ref='719c9942-1ee3-4bb3-901a-b146f0595373',image_container_format='aki',image_disk_format='aki',image_min_disk='0',image_min_ram='0',instance_type_ephemeral_gb='0',instance_type_flavorid='84',instance_type_id='7',instance_type_memory_mb='128',instance_type_name='m1.micro',instance_type_root_gb='0',instance_type_rxtx_factor='1.0',instance_type_swap='0',instance_type_vcpu_weight=None,instance_type_vcpus='1',network_allocated='True'},task_state='deleting',terminated_at=None,updated_at=2014-11-05T17:51:52Z,user_data=None,user_id='166a824eaf504ec9a4728c3b2643bd92',uuid=711c279a-f242-492a-8273-5fad1f967cff,vcpus=1,vm_mode=None,vm_state='active') vif=VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.8'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'df92ecbe-b1d4-4897-96b7-0973bf0ea7f4', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:a9:6b:fa', 'active': False, 'type': u'bridge', 'id': u'660fe5b4-2e27-447c-945e-5b6a328fc121', 'qbg_params': None}) from (pid=11447) unplug /opt/stack/nova/nova/virt/libvirt/vif.py:678\n232350:2014-11-05 09:51:54.647 DEBUG nova.compute.manager [-] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Synchronizing instance power state after lifecycle event \"Stopped\"; current vm_state: active, current task_state: deleting, current DB power_state: 1, VM power_state: 4 from (pid=11447) handle_lifecycle_event /opt/stack/nova/nova/compute/manager.py:1105\n232353:2014-11-05 09:51:54.717 INFO nova.compute.manager [-] [instance: 711c279a-f242-492a-8273-5fad1f967cff] During sync_power_state the instance has a pending task (deleting). Skip.\n232382:2014-11-05 09:51:56.700 INFO nova.virt.libvirt.driver [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Instance shutdown successfully.\n232385:2014-11-05 09:51:56.803 DEBUG nova.objects.instance [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Lazy-loading `system_metadata' on Instance uuid 711c279a-f242-492a-8273-5fad1f967cff from (pid=11447) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n232390:2014-11-05 09:51:56.890 DEBUG nova.openstack.common.processutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff /opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff_del from (pid=11447) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\n232392:2014-11-05 09:51:56.914 INFO nova.virt.libvirt.driver [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Deleting instance files /opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff_del\n232393:2014-11-05 09:51:56.915 INFO nova.virt.libvirt.driver [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Deletion of /opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff_del complete\n232398:  <uuid>711c279a-f242-492a-8273-5fad1f967cff</uuid>\n232427:      <entry name='uuid'>711c279a-f242-492a-8273-5fad1f967cff</entry>\n232454:      <source file='/opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff/disk'/>\n232460:      <source file='/opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff/disk.config'/>\n232480:      <source path='/opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff/console.log'/>\n232487:      <source path='/opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff/console.log'/>\n232506:2014-11-05 09:51:57.193 DEBUG nova.virt.libvirt.driver [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] Instance soft reboot failed: Failed to open file '/opt/stack/data/nova/instances/711c279a-f242-492a-8273-5fad1f967cff/disk.config': No such file or directory from (pid=11447) reboot /opt/stack/nova/nova/virt/libvirt/driver.py:2255\n232507:2014-11-05 09:51:57.193 WARNING nova.virt.libvirt.driver [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Failed to soft reboot instance. Trying hard reboot.\n232547:2014-11-05 09:52:00.328 DEBUG nova.compute.manager [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Deallocating network for instance from (pid=11447) _deallocate_network /opt/stack/nova/nova/compute/manager.py:1915\n232551:2014-11-05 09:52:00.339 DEBUG nova.compute.manager [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Checking state from (pid=11447) _get_power_state /opt/stack/nova/nova/compute/manager.py:1156\n232585:2014-11-05 09:52:01.560 ERROR nova.compute.manager [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Cannot reboot instance: Domain not found: no domain with matching uuid '711c279a-f242-492a-8273-5fad1f967cff' (instance-000002cd)\n232592:2014-11-05 09:52:02.246 DEBUG nova.compute.manager [req-c7b0f93c-7a9d-46db-b818-1691290c8a95 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] Changing instance metadata according to {u'key0': [u'+', u'Zj6']} from (pid=11447) change_instance_metadata /opt/stack/nova/nova/compute/manager.py:3313\n232593:2014-11-05 09:52:02.248 DEBUG nova.compute.manager [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] [instance: 711c279a-f242-492a-8273-5fad1f967cff] terminating bdm BlockDeviceMapping(boot_index=0,connection_info=None,created_at=2014-11-05T17:51:19Z,delete_on_termination=True,deleted=False,deleted_at=None,destination_type='local',device_name='/dev/vda',device_type='disk',disk_bus=None,guest_format=None,id=717,image_id='719c9942-1ee3-4bb3-901a-b146f0595373',instance=<?>,instance_uuid=711c279a-f242-492a-8273-5fad1f967cff,no_device=False,snapshot_id=None,source_type='image',updated_at=2014-11-05T17:51:21Z,volume_id=None,volume_size=None) from (pid=11447) _cleanup_volumes /opt/stack/nova/nova/compute/manager.py:2407\n232605:2014-11-05 09:52:02.418 DEBUG nova.objects.instance [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Lazy-loading `numa_topology' on Instance uuid 711c279a-f242-492a-8273-5fad1f967cff from (pid=11447) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\n232613:2014-11-05 09:52:02.504 ERROR oslo.messaging.rpc.dispatcher [req-b5953c12-796c-4a86-b97a-e47556c78a27 demo demo] Exception during message handling: Domain not found: no domain with matching uuid '711c279a-f242-492a-8273-5fad1f967cff' (instance-000002cd)\n232663:2014-11-05 09:52:02.504 TRACE oslo.messaging.rpc.dispatcher libvirtError: Domain not found: no domain with matching uuid '711c279a-f242-492a-8273-5fad1f967cff' (instance-000002cd)\n232665:2014-11-05 09:52:02.832 DEBUG nova.openstack.common.lockutils [req-68c39822-c295-4665-9551-a3b0833b4a21 demo demo] Releasing semaphore \"711c279a-f242-492a-8273-5fad1f967cff\" from (pid=11447) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\n", 
            "date_created": "2014-11-07 20:10:48.976857+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Is there a tempest test that will trigger this? ", 
            "date_created": "2014-12-10 20:25:36.112515+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "@Patrick\nwhen you say 'crash' are you saying the compute service is dead ? or there are some call back traces to show some errors? \nI took a look at most of your attachment, looks to me all shows correct exception , not compute crash, can you let me know \nif I missed it ? \n\nIf you do (resize or reboot )and delete concurrently, there are chance that they might lead to some thing like \nthe domain is not exist, what's the harm if we have those exception? after all, the user delete the instance and \nour compute service is still alive ..", 
            "date_created": "2014-12-23 02:01:34.384420+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "@jichenjc\nI agree that the exceptions themselves are not an issue, but the compute service completely dies and is reported as down/inoperable.\n\nI will re-run my test scripts to see if I can find output showing the crash of the compute node, but in the interim - is there any specific information that would help you determine what is going on once the compute node hits such a state (logs, specific log error messages, etc)?", 
            "date_created": "2014-12-23 16:01:58.701878+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Test for reproducing:\nTo repeat / view this:\n1) git clone https://github.com/pcrews/rannsaka.git\n2) from ransakka/ransakka, use this command line: \n     python rannsaka.py --host=http://$KEYSTONE_IP_ADDR --requests 20000 -w 15 --test-file=locust_files/server_basic.py\n\nNOTE: This will run as-is against a devstack installation (assuming standard location of config files, etc)\n\nThis will execute a sequence of test actions that trigger the bug / crashes nova on my system (system information reports the compute host as 'Down')", 
            "date_created": "2015-01-09 20:52:50.054520+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Patrick:\n\nI haven't investigated this deeply, but if you can reproduce this consistently, please also provide:\n\n(a) Nova Guru Meditation Report on compute hosts. If you're using IceHouse or above version, it can be generated if you simply do (no prior configuration required):\n\n    $ kill -USR1 `pgrep nova-compute`\n\n    https://www.berrange.com/posts/2015/02/19/nova-and-its-use-of-olso-incubator-guru-meditation-reports/\n\n(b)  libvirt debug logs with these log filters set:\n\n\n- In /etc/libvirt/libvirtd.conf on Compute nodes:\n\n    log_filters=\"3:event 3:file 1:util 1:security 1:qemu 1:libvirt\"\n    log_outputs=\"1:file:/var/log/libvirt/libvirtd.log\"\n\n- Restart the libvirtd service:\n\n    systemd restart libvirtd\n\n- Perform your test and attach the relevant libvirtd.log files.", 
            "date_created": "2015-09-29 22:28:38.827086+00:00", 
            "author": "https://api.launchpad.net/1.0/~kashyapc"
        }, 
        {
            "content": "Not able to reproduce this after running  the tempest several time.  I do see the instances getting created, re-sized, confirmed and deleted while the test is running. Some of them go into error status, but not seeing any crash. My devstack environment continues to work after the test finishes.", 
            "date_created": "2016-03-09 22:10:16.753085+00:00", 
            "author": "https://api.launchpad.net/1.0/~manjunath-ranganathaiah"
        }, 
        {
            "content": "\nThis is an automated cleanup. This bug report has been closed because it\nis older than 18 months and there is no open code change to fix this.\nAfter this time it is unlikely that the circumstances which lead to\nthe observed issue can be reproduced.\n\nIf you can reproduce the bug, please:\n* reopen the bug report (set to status \"New\")\n* AND add the detailed steps to reproduce the issue (if applicable)\n* AND leave a comment \"CONFIRMED FOR: <RELEASE_NAME>\"\n  Only still supported release names are valid (LIBERTY, MITAKA, OCATA, NEWTON).\n  Valid example: CONFIRMED FOR: LIBERTY\n", 
            "date_created": "2016-07-05 09:54:38.200032+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2016-07-05 09:54:36.094036+00:00"
}