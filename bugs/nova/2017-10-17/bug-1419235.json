{
    "status": "Fix Released", 
    "last_updated": "2015-04-01 14:32:33.165611+00:00", 
    "description": "Fail to start  nova-compute service after reboot kvm, here are steps\n1: reboot kvm\n2:# /etc/init.d/openstack-nova-compute restart\n\nOpenstack Version\nicehouse\nopenstack-nova-compute-2014.1.2\n\nResult\nFails to start nova-service and throws the following errors\n2015-02-06 15:16:44.761 30137 AUDIT nova.service [-] Starting compute node (version 2014.1.2-201408122139.ibm.el6.169)\n2015-02-06 15:16:44.998 30137 ERROR nova.openstack.common.threadgroup [-] vif_type parameter must be present for this vif_driver implementation\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     x.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/greenthread.py\", line 168, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 187, in switch\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/greenthread.py\", line 194, in main\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/service.py\", line 483, in run_service\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     service.start()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 166, in start\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.manager.init_host()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1030, in init_host\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self._init_instance(context, instance)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 888, in _init_instance\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.driver.plug_vifs(instance, net_info)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 861, in plug_vifs\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.vif_driver.plug(instance, vif)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/vif.py\", line 596, in plug\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     _(\"vif_type parameter must be present \"\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup NovaException: vif_type parameter must be present for this vif_driver implementation\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1419235", 
    "owner": "None", 
    "id": 1419235, 
    "index": 1687, 
    "openned": "2015-02-07 06:25:14.468764+00:00", 
    "created": "2015-02-07 06:25:14.468764+00:00", 
    "title": "nova-compute service fails to startup after reboot kvm", 
    "comments": [
        {
            "content": "Fail to start  nova-compute service after reboot kvm, here are steps\n1: reboot kvm\n2:# /etc/init.d/openstack-nova-compute restart\n\nOpenstack Version\nicehouse\nopenstack-nova-compute-2014.1.2\n\nResult\nFails to start nova-service and throws the following errors\n2015-02-06 15:16:44.761 30137 AUDIT nova.service [-] Starting compute node (version 2014.1.2-201408122139.ibm.el6.169)\n2015-02-06 15:16:44.998 30137 ERROR nova.openstack.common.threadgroup [-] vif_type parameter must be present for this vif_driver implementation\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     x.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/greenthread.py\", line 168, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 187, in switch\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/eventlet/greenthread.py\", line 194, in main\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/service.py\", line 483, in run_service\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     service.start()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 166, in start\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.manager.init_host()\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1030, in init_host\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self._init_instance(context, instance)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 888, in _init_instance\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.driver.plug_vifs(instance, net_info)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/driver.py\", line 861, in plug_vifs\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     self.vif_driver.plug(instance, vif)\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt/vif.py\", line 596, in plug\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup     _(\"vif_type parameter must be present \"\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup NovaException: vif_type parameter must be present for this vif_driver implementation\n2015-02-06 15:16:44.998 30137 TRACE nova.openstack.common.threadgroup", 
            "date_created": "2015-02-07 06:25:14.468764+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuxingw"
        }, 
        {
            "content": "nova-compute service can't be started up after reboot kvm if kvm has some vms. If I delete all vms which hosts in KVM, nova-compute service can be started up successfully.\n", 
            "date_created": "2015-02-07 09:29:56.678504+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuxingw"
        }, 
        {
            "content": "Hi, @yuxingw, this should be fixed in https://github.com/openstack/nova/commit/4cc4cf52afa48dc251819fa7e29219c9ba285f4e\n\nthanks,\ndims", 
            "date_created": "2015-02-10 23:32:49.214906+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Please try that and let us know.", 
            "date_created": "2015-02-10 23:33:11.709608+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ], 
    "closed": "2015-04-01 14:32:26.311567+00:00"
}