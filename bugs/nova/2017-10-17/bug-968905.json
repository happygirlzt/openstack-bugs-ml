{
    "status": "Invalid", 
    "last_updated": "2012-06-07 14:49:24.258913+00:00", 
    "description": "When use a nfs mount /opt/stack/nova/instances directory, the launched instance status error when performing spawing task.\n the nova log as follows, it must be some previlege issue. the instances directory already has 'drwxrwxrwx' property.\n \nbtw: can we use the same nfs filesytem as the instance directory for every compute node currently?\n \n8781 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-89dd96cd-9e05-44ee-879b-13788fa0e324 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] http://192.168.3.102:8774/v2/e604df4f3b314b7197d3297b0359030e/flavors/detail returned with HTTP 200\n 8782 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] GET http://192.168.3.102:8776/v1/e604df4f3b314b7197d3297b0359030e/volumes/detail\n 8783 2012-03-22 20:47:31 DEBUG nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b31 4b7197d3297b0359030e] Unrecognized Content-Type provided in request from (pid=3610) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:6 97\n 8784 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] http://192.168.3.102:8776/v1/e604df4f3b314b7197d3297b0359030e/volumes/detail returned with HTTP 200\n 8785 2012-03-22 20:47:31 ERROR nova.compute.manager [req-3dd6f119-5cef-4d92-b6f0-85c2323bea1f d3e5280a607b4e20bb4cac220d385394 e604df4f3b314b7 197d3297b0359030e] [instance: 4a3fff88-761a-4f64-aaaf-f7a58866a16e] Instance failed to spawn\n 8786 (nova.compute.manager): TRACE: Traceback (most recent call last):\n 8787 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/compute/manager.py\", line 592, in _spawn\n 8788 (nova.compute.manager): TRACE: self._legacy_nw_info(network_info), block_device_info)\n 8789 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/exception.py\", line 114, in wrapped\n 8790 (nova.compute.manager): TRACE: return f(*args, **kw)\n 8791 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/virt/libvirt/connection.py\", line 884, in spawn\n 8792 (nova.compute.manager): TRACE: self._create_new_domain(xml)\n 8793 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/virt/libvirt/connection.py\", line 1498, in _create_new_domain\n 8794 (nova.compute.manager): TRACE: domain.createWithFlags(launch_flags)\n 8795 (nova.compute.manager): TRACE: File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 372, in createWithFlags\n 8796 (nova.compute.manager): TRACE: if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n 8797 (nova.compute.manager): TRACE: libvirtError: Unable to pre-create chardev file '/opt/stack/nova/instances/instance-00000002/console.log': Permission denied\n 8798 (nova.compute.manager): TRACE:\n 8799 2012-03-22 20:47:31 DEBUG nova.compute.manager [req-3dd6f119-5cef-4d92-b6f0-85c2323bea1f d3e5280a607b4e20bb4cac220d385394 e604df4f3b314b7 197d3297b0359030e] [instance: 4a3fff88-761a-4f64-aaaf-f7a58866a16e] Deallocating network for instance from (pid=3762) _deallocate_network /opt/stack/nova/nova/compute/manager.py:616", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/968905", 
    "owner": "None", 
    "id": 968905, 
    "index": 4005, 
    "openned": "2012-03-30 17:15:13.465844+00:00", 
    "created": "2012-03-30 06:38:16.018979+00:00", 
    "title": "When use a nfs mount /opt/stack/nova/instances directory, the launched instance status error when performing spawing task.", 
    "comments": [
        {
            "content": "When use a nfs mount /opt/stack/nova/instances directory, the launched instance status error when performing spawing task.\n the nova log as follows, it must be some previlege issue. the instances directory already has 'drwxrwxrwx' property.\n \nbtw: can we use the same nfs filesytem as the instance directory for every compute node currently?\n \n8781 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-89dd96cd-9e05-44ee-879b-13788fa0e324 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] http://192.168.3.102:8774/v2/e604df4f3b314b7197d3297b0359030e/flavors/detail returned with HTTP 200\n 8782 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] GET http://192.168.3.102:8776/v1/e604df4f3b314b7197d3297b0359030e/volumes/detail\n 8783 2012-03-22 20:47:31 DEBUG nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b31 4b7197d3297b0359030e] Unrecognized Content-Type provided in request from (pid=3610) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:6 97\n 8784 2012-03-22 20:47:31 INFO nova.api.openstack.wsgi [req-fefe0943-639e-49d5-9225-6731e9034891 d3e5280a607b4e20bb4cac220d385394 e604df4f3b314 b7197d3297b0359030e] http://192.168.3.102:8776/v1/e604df4f3b314b7197d3297b0359030e/volumes/detail returned with HTTP 200\n 8785 2012-03-22 20:47:31 ERROR nova.compute.manager [req-3dd6f119-5cef-4d92-b6f0-85c2323bea1f d3e5280a607b4e20bb4cac220d385394 e604df4f3b314b7 197d3297b0359030e] [instance: 4a3fff88-761a-4f64-aaaf-f7a58866a16e] Instance failed to spawn\n 8786 (nova.compute.manager): TRACE: Traceback (most recent call last):\n 8787 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/compute/manager.py\", line 592, in _spawn\n 8788 (nova.compute.manager): TRACE: self._legacy_nw_info(network_info), block_device_info)\n 8789 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/exception.py\", line 114, in wrapped\n 8790 (nova.compute.manager): TRACE: return f(*args, **kw)\n 8791 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/virt/libvirt/connection.py\", line 884, in spawn\n 8792 (nova.compute.manager): TRACE: self._create_new_domain(xml)\n 8793 (nova.compute.manager): TRACE: File \"/opt/stack/nova/nova/virt/libvirt/connection.py\", line 1498, in _create_new_domain\n 8794 (nova.compute.manager): TRACE: domain.createWithFlags(launch_flags)\n 8795 (nova.compute.manager): TRACE: File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 372, in createWithFlags\n 8796 (nova.compute.manager): TRACE: if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n 8797 (nova.compute.manager): TRACE: libvirtError: Unable to pre-create chardev file '/opt/stack/nova/instances/instance-00000002/console.log': Permission denied\n 8798 (nova.compute.manager): TRACE:\n 8799 2012-03-22 20:47:31 DEBUG nova.compute.manager [req-3dd6f119-5cef-4d92-b6f0-85c2323bea1f d3e5280a607b4e20bb4cac220d385394 e604df4f3b314b7 197d3297b0359030e] [instance: 4a3fff88-761a-4f64-aaaf-f7a58866a16e] Deallocating network for instance from (pid=3762) _deallocate_network /opt/stack/nova/nova/compute/manager.py:616", 
            "date_created": "2012-03-30 06:38:16.018979+00:00", 
            "author": "https://api.launchpad.net/1.0/~shwinpiocess"
        }, 
        {
            "content": "this doesn't appear to be an issue with keystone and authorizing a request, but permissions settings in a deployment of nova. Attaching to nova, marking invalid on Keystone", 
            "date_created": "2012-03-30 17:15:05.040006+00:00", 
            "author": "https://api.launchpad.net/1.0/~heckj"
        }, 
        {
            "content": "please see https://bugs.launchpad.net/openstack-manuals/+bug/968771\n\nin fact, you have to set POSIX users/groups of qemu driver. have a look at http://libvirt.org/drvqemu.html", 
            "date_created": "2012-03-31 01:01:05.902197+00:00", 
            "author": "https://api.launchpad.net/1.0/~gongysh"
        }, 
        {
            "content": "Another suggestion:\nUse nfsv3 rather than nfsv4 as other wise you could have chown issues\nas mentioned at the bottom of: https://answers.launchpad.net/nova/+question/164689\n\nSince this is almost certainly an NFS permissions issue,\nalbeit a common one, I'm marking as invalid as it's not\nan issue with the nova code.", 
            "date_created": "2012-06-07 14:49:23.559022+00:00", 
            "author": "https://api.launchpad.net/1.0/~p-draigbrady"
        }
    ], 
    "closed": "2012-06-07 14:49:05.252981+00:00"
}