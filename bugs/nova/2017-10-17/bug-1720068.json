{
    "status": "Incomplete", 
    "last_updated": "2017-09-28 22:43:47.212429+00:00", 
    "description": "I am running OpenStack Mitaka on CentOS7.1 with VMware vCenter Server 5.5.0\uff0cbuild 3000241. When I attached cinder volume test_vol01 to the instance test_vm01, the action succeeded. Then detached this volume. When I re-attached this volume to this instance, I failed. \n\nIn volume.log file, I find following message:\n2017-08-09 15:12:20.908 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.080 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.454 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.457 18613 DEBUG cinder.volume.drivers.vmware.vmdk [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] The instance: (Property){\n   value = \"vm-3634\"\n   _type = \"VirtualMachine\"\n } for which initialize connection is called, exists. _initialize_connection /usr/lib/python2.7/site-packages/cinder/volume/drivers/vmware/vmdk.py:592\n2017-08-09 15:12:21.460 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.485 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.501 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.521 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.548 18613 DEBUG oslo_vmware.service [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Creating suds client with soap_url='https://10.153.193.34:443/pbm' and wsdl_url='file:///usr/lib/python2.7/site-packages/oslo_vmware/wsdl/5.5/pbmService.wsdl' __init__ /usr/lib/python2.7/site-packages/oslo_vmware/service.py:195\n2017-08-09 15:12:22.084 18613 WARNING py.warnings [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:22.097 18613 ERROR cinder.volume.manager [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Exception during message handling: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     incoming.message))\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 183, in _dispatch\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 1484, in initialize_connection\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     raise exception.VolumeBackendAPIException(data=err_msg)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher VolumeBackendAPIException: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher Cause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher \n2017-08-09 15:12:22.113 18613 ERROR oslo_messaging._drivers.common [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Returning exception Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes'). to caller\n2017-08-09 15:12:22.115 18613 ERROR oslo_messaging._drivers.common [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 183, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\\n    result = func(ctxt, **new_args)\\n', '  File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 1484, in initialize_connection\\n    raise exception.VolumeBackendAPIException(data=err_msg)\\n', \"VolumeBackendAPIException: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\\nCause: 'NoneType' object has no attribute 'promotePrefixes').\\n\"]\n2017-08-09 15:12:22.118 18613 DEBUG oslo_messaging._drivers.amqpdriver [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] sending reply msg_id: 2d232d4bbb55401eb7f823d6aecd14d1 reply queue: reply_004e21ea5ccc4714b94b2cc3ac41b689 time elapsed: 2.98925610702s _send_reply /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py:74", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1720068", 
    "owner": "None", 
    "id": 1720068, 
    "index": 8323, 
    "openned": "2017-09-28 06:59:45.963464+00:00", 
    "created": "2017-09-28 06:59:45.963464+00:00", 
    "title": "VMware attach volume", 
    "comments": [
        {
            "content": "I am running OpenStack Mitaka on CentOS7.1 with VMware vCenter Server 5.5.0\uff0cbuild 3000241. When I attached cinder volume test_vol01 to the instance test_vm01, the action succeeded. Then detached this volume. When I re-attached this volume to this instance, I failed. \n\nIn volume.log file, I find following message:\n2017-08-09 15:12:20.908 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.080 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.454 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.457 18613 DEBUG cinder.volume.drivers.vmware.vmdk [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] The instance: (Property){\n   value = \"vm-3634\"\n   _type = \"VirtualMachine\"\n } for which initialize connection is called, exists. _initialize_connection /usr/lib/python2.7/site-packages/cinder/volume/drivers/vmware/vmdk.py:592\n2017-08-09 15:12:21.460 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.485 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.501 18613 DEBUG oslo_vmware.api [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Waiting for function oslo_vmware.api._invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:122\n2017-08-09 15:12:21.521 18613 WARNING py.warnings [-] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:21.548 18613 DEBUG oslo_vmware.service [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Creating suds client with soap_url='https://10.153.193.34:443/pbm' and wsdl_url='file:///usr/lib/python2.7/site-packages/oslo_vmware/wsdl/5.5/pbmService.wsdl' __init__ /usr/lib/python2.7/site-packages/oslo_vmware/service.py:195\n2017-08-09 15:12:22.084 18613 WARNING py.warnings [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] /usr/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py:821: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html\n  InsecureRequestWarning)\n\n2017-08-09 15:12:22.097 18613 ERROR cinder.volume.manager [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Exception during message handling: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     incoming.message))\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 183, in _dispatch\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 1484, in initialize_connection\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher     raise exception.VolumeBackendAPIException(data=err_msg)\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher VolumeBackendAPIException: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher Cause: 'NoneType' object has no attribute 'promotePrefixes').\n2017-08-09 15:12:22.102 18613 ERROR oslo_messaging.rpc.dispatcher \n2017-08-09 15:12:22.113 18613 ERROR oslo_messaging._drivers.common [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] Returning exception Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\nCause: 'NoneType' object has no attribute 'promotePrefixes'). to caller\n2017-08-09 15:12:22.115 18613 ERROR oslo_messaging._drivers.common [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 183, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\\n    result = func(ctxt, **new_args)\\n', '  File \"/usr/lib/python2.7/site-packages/cinder/volume/manager.py\", line 1484, in initialize_connection\\n    raise exception.VolumeBackendAPIException(data=err_msg)\\n', \"VolumeBackendAPIException: Bad or unexpected response from the storage volume backend API: Driver initialize connection failed (error: No such SOAP method PbmRetrieveServiceContent.\\nCause: 'NoneType' object has no attribute 'promotePrefixes').\\n\"]\n2017-08-09 15:12:22.118 18613 DEBUG oslo_messaging._drivers.amqpdriver [req-ad24cbe1-38ab-404c-8012-a4272f885200 1df71957d770436493a84f24d9344853 9052ae85792143ff955c35c52e8e41bd - - -] sending reply msg_id: 2d232d4bbb55401eb7f823d6aecd14d1 reply queue: reply_004e21ea5ccc4714b94b2cc3ac41b689 time elapsed: 2.98925610702s _send_reply /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py:74", 
            "date_created": "2017-09-28 06:59:45.963464+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhoujm-cri"
        }, 
        {
            "content": "mitaka is no loner supported can you verify this is still a problem on master?", 
            "date_created": "2017-09-28 22:43:23.875309+00:00", 
            "author": "https://api.launchpad.net/1.0/~o-tony"
        }
    ]
}