{
    "status": "Invalid", 
    "last_updated": "2012-11-01 06:23:50.685735+00:00", 
    "description": "Scenario: \n- XCP 1.499 with openstack plugins\n- DomU CentOS 6.2 with nova-network and nova-compute from grid dynamics\n\nPoint of failure:\nnetwork_driver=nova.virt.xenapi.vif.XenAPIOpenVswitchDriver \n\nThe problem occurs when the function instantiates the driver object, the xenapi driver needs a extra parameter during the initialization. Below the code of nova.utils :93 where  the exception is raised:\n\ndef import_object(import_str):\n    \"\"\"Returns an object including a module or module and class.\"\"\"\n    try:\n        __import__(import_str)\n        return sys.modules[import_str]\n    except ImportError:\n        cls = import_class(import_str)\n        return cls()\n\ntraceback:\n2012-06-05 16:18:38 CRITICAL nova [-] __init__() takes exactly 2 arguments (1 given)\n2012-06-05 16:18:38 TRACE nova Traceback (most recent call last):\n2012-06-05 16:18:38 TRACE nova   File \"/usr/bin/nova-network\", line 47, in <module>\n2012-06-05 16:18:38 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 241, in create\n2012-06-05 16:18:38 TRACE nova     report_interval, periodic_interval)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 150, in __init__\n2012-06-05 16:18:38 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 710, in __init__\n2012-06-05 16:18:38 TRACE nova     self.driver = utils.import_object(network_driver)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 93, in import_object\n2012-06-05 16:18:38 TRACE nova     return cls()\n2012-06-05 16:18:38 TRACE nova TypeError: __init__() takes exactly 2 arguments (1 given)\n2012-06-05 16:18:38 TRACE nova \n\nConfiguration:\n[DEFAULT]\nverbose=True\nauth_strategy=keystone\nallow_resize_to_same_host=True\nroot_helper=sudo /usr/bin/nova-rootwrap\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\nscheduler_default_filters=AllHostsFilter\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfixed_range=172.25.24.0/21\nfloating_range=10.170.3.0/24\ns3_host=s3\ns3_port=3333\nvolume_group=nova-volume\nvolume_name_template=volume-%08x\niscsi_helper=tgtadm\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nmy_ip=10.170.0.7\npublic_interface=eth3\nvlan_interface=eth1\nsql_connection=mysql://nova:Mysql-Nova@db/nova\ninstance_name_template=instance-%08x\nnovncproxy_base_url=http://nova:6080/vnc_auto.html\nxvpvncproxy_base_url=http://nova:6081/console\nvncserver_listen=127.0.0.1\nvncserver_proxyclient_address=127.0.0.1\napi_paste_config=/etc/nova/api-paste.ini\nimage_service=nova.image.glance.GlanceImageService\nec2_dmz_host=nova\nrabbit_host=rabbit\nrabbit_password=guest\nglance_api_servers=glance:9292\nforce_dhcp_release=True\ninstances_path=/var/lib/nova/instances\nmulti_host=True\nsend_arp_for_ha=False\nuse_syslog=True\napi_rate_limit=False\nlock_path = /var/lib/nova/lock\nstate_path = /var/run/nova\ncredentials_template = /usr/share/nova/auth/novarc.template\nlibvirt_xml_template = /usr/share/nova/libvirt.xml.template\nnetworks_path = /var/lib/nova/networks\nvpn_client_template = /usr/share/nova/cloudpipe/client.ovpn.template\nkeys_path = /var/lib/nova/keys\ndhcpbridge = /usr/bin/nova-dhcpbridge\nca_path = /var/lib/nova/CA\nbindir = /opt/nova/bin\npybasedir = /opt/nova\nauto_assign_floating_ip=True\nconnection_type=xenapi\nxenapi_connection_url=http://169.254.0.1/\nxenapi_connection_username=root\nxenapi_connection_password=MyPassWord\nfirewall_driver=nova.virt.firewall.IptablesFirewallDriver\nnetwork_manager=nova.network.manager.VlanManager\nnetwork_driver=nova.virt.xenapi.vif.XenAPIOpenVswitchDriver  #<= this flag fail during daemon initialization independent of value\n\n\nthanks,", 
    "tags": [
        "network", 
        "xenserver"
    ], 
    "importance": "Undecided", 
    "heat": 18, 
    "link": "https://bugs.launchpad.net/nova/+bug/1009239", 
    "owner": "None", 
    "id": 1009239, 
    "index": 4130, 
    "openned": "2012-06-05 21:55:54.188148+00:00", 
    "created": "2012-06-05 21:55:54.188148+00:00", 
    "title": "network_driver flag for XenAPI fails during nova-network daemon start", 
    "comments": [
        {
            "content": "Scenario: \n- XCP 1.499 with openstack plugins\n- DomU CentOS 6.2 with nova-network and nova-compute from grid dynamics\n\nPoint of failure:\nnetwork_driver=nova.virt.xenapi.vif.XenAPIOpenVswitchDriver \n\nThe problem occurs when the function instantiates the driver object, the xenapi driver needs a extra parameter during the initialization. Below the code of nova.utils :93 where  the exception is raised:\n\ndef import_object(import_str):\n    \"\"\"Returns an object including a module or module and class.\"\"\"\n    try:\n        __import__(import_str)\n        return sys.modules[import_str]\n    except ImportError:\n        cls = import_class(import_str)\n        return cls()\n\ntraceback:\n2012-06-05 16:18:38 CRITICAL nova [-] __init__() takes exactly 2 arguments (1 given)\n2012-06-05 16:18:38 TRACE nova Traceback (most recent call last):\n2012-06-05 16:18:38 TRACE nova   File \"/usr/bin/nova-network\", line 47, in <module>\n2012-06-05 16:18:38 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 241, in create\n2012-06-05 16:18:38 TRACE nova     report_interval, periodic_interval)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 150, in __init__\n2012-06-05 16:18:38 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 710, in __init__\n2012-06-05 16:18:38 TRACE nova     self.driver = utils.import_object(network_driver)\n2012-06-05 16:18:38 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 93, in import_object\n2012-06-05 16:18:38 TRACE nova     return cls()\n2012-06-05 16:18:38 TRACE nova TypeError: __init__() takes exactly 2 arguments (1 given)\n2012-06-05 16:18:38 TRACE nova \n\nConfiguration:\n[DEFAULT]\nverbose=True\nauth_strategy=keystone\nallow_resize_to_same_host=True\nroot_helper=sudo /usr/bin/nova-rootwrap\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\nscheduler_default_filters=AllHostsFilter\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfixed_range=172.25.24.0/21\nfloating_range=10.170.3.0/24\ns3_host=s3\ns3_port=3333\nvolume_group=nova-volume\nvolume_name_template=volume-%08x\niscsi_helper=tgtadm\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nmy_ip=10.170.0.7\npublic_interface=eth3\nvlan_interface=eth1\nsql_connection=mysql://nova:Mysql-Nova@db/nova\ninstance_name_template=instance-%08x\nnovncproxy_base_url=http://nova:6080/vnc_auto.html\nxvpvncproxy_base_url=http://nova:6081/console\nvncserver_listen=127.0.0.1\nvncserver_proxyclient_address=127.0.0.1\napi_paste_config=/etc/nova/api-paste.ini\nimage_service=nova.image.glance.GlanceImageService\nec2_dmz_host=nova\nrabbit_host=rabbit\nrabbit_password=guest\nglance_api_servers=glance:9292\nforce_dhcp_release=True\ninstances_path=/var/lib/nova/instances\nmulti_host=True\nsend_arp_for_ha=False\nuse_syslog=True\napi_rate_limit=False\nlock_path = /var/lib/nova/lock\nstate_path = /var/run/nova\ncredentials_template = /usr/share/nova/auth/novarc.template\nlibvirt_xml_template = /usr/share/nova/libvirt.xml.template\nnetworks_path = /var/lib/nova/networks\nvpn_client_template = /usr/share/nova/cloudpipe/client.ovpn.template\nkeys_path = /var/lib/nova/keys\ndhcpbridge = /usr/bin/nova-dhcpbridge\nca_path = /var/lib/nova/CA\nbindir = /opt/nova/bin\npybasedir = /opt/nova\nauto_assign_floating_ip=True\nconnection_type=xenapi\nxenapi_connection_url=http://169.254.0.1/\nxenapi_connection_username=root\nxenapi_connection_password=MyPassWord\nfirewall_driver=nova.virt.firewall.IptablesFirewallDriver\nnetwork_manager=nova.network.manager.VlanManager\nnetwork_driver=nova.virt.xenapi.vif.XenAPIOpenVswitchDriver  #<= this flag fail during daemon initialization independent of value\n\n\nthanks,", 
            "date_created": "2012-06-05 21:55:54.188148+00:00", 
            "author": "https://api.launchpad.net/1.0/~msinhore"
        }, 
        {
            "content": "I believe this might not be a bug, but a misconfiguration. nova.virt.xenapi.vif.XenAPIOpenVswitchDriver  is not a network_driver, but a xenapi_vif_driver.\n\nIf you provided information about the revision of the source you're using, I can provide more input on what network_driver should look like; however the file flags.py should give you a hint.", 
            "date_created": "2012-06-06 01:48:47.533011+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "I used this flag based on this:\nhttp://wiki.openstack.org/XenServer/NetworkingFlags. Perhaps the wiki is\nwrong. I will investigate tomorrow. I'll keep in touch.\n\nThanks,\n\n On Tue, Jun 5, 2012 at 10:48 PM, Armando Migliaccio <\n<email address hidden>> wrote:\n\n> I believe this might not be a bug, but a misconfiguration.\n> nova.virt.xenapi.vif.XenAPIOpenVswitchDriver  is not a network_driver,\n> but a xenapi_vif_driver.\n>\n> If you provided information about the revision of the source you're\n> using, I can provide more input on what network_driver should look like;\n> however the file flags.py should give you a hint.\n>\n> ** Tags removed: xen\n>\n> --\n> You received this bug notification because you are subscribed to the bug\n> report.\n> https://bugs.launchpad.net/bugs/1009239\n>\n> Title:\n>  network_driver flag for XenAPI fails during nova-network daemon start\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/1009239/+subscriptions\n>\n\n\n\n-- \nMarco Sinhoreli\n", 
            "date_created": "2012-06-06 03:35:21+00:00", 
            "author": "https://api.launchpad.net/1.0/~msinhore"
        }, 
        {
            "content": "I got the same problem. What's the root cause? Could you show me the right configuration.", 
            "date_created": "2012-11-01 06:23:49.240691+00:00", 
            "author": "https://api.launchpad.net/1.0/~jeffrey4l"
        }
    ], 
    "closed": "2012-06-23 05:47:13.940763+00:00"
}