{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:16:18.497938+00:00", 
    "description": "Using the latest version of Nova Grizzly (git 76c47c1) we seem to have broken the libvirt vif driver interface for the get_config call. I now get the following error when trying to spawn instances w/ SmokeStack:\n\n2013-03-16 09:03:10.886 ERROR nova.compute.manager [req-d77836b7-3b5a-4a78-976a-0cdc0d008957 e7b7a663d1e54dff8a0e380c03b7509f e32ebecb48b64606ba43fda7b52a57b3] [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] Instance failed to spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] Traceback (most recent call last):\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1055, in _spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1510, in spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     block_device_info=block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2327, in to_xml\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     disk_info, rescue, block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2251, in get_guest_config\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     inst_type)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] TypeError: get_config() takes exactly 5 arguments (6 given)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]\n2013-03-16 09:03:11.581 24296 ERROR nova.virt.libvirt.driver [-] [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] During wait destroy, instance disappeared.", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1155950", 
    "owner": "https://api.launchpad.net/1.0/~dan-prince", 
    "id": 1155950, 
    "index": 122, 
    "openned": "2013-03-16 13:38:51.342910+00:00", 
    "created": "2013-03-16 13:38:51.342910+00:00", 
    "title": "libvirt vif get_config interface broken", 
    "comments": [
        {
            "content": "Using the latest version of Nova Grizzly (git 76c47c1) we seem to have broken the libvirt vif driver interface for the get_config call. I now get the following error when trying to spawn instances w/ SmokeStack:\n\n2013-03-16 09:03:10.886 ERROR nova.compute.manager [req-d77836b7-3b5a-4a78-976a-0cdc0d008957 e7b7a663d1e54dff8a0e380c03b7509f e32ebecb48b64606ba43fda7b52a57b3] [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] Instance failed to spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] Traceback (most recent call last):\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1055, in _spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1510, in spawn\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     block_device_info=block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2327, in to_xml\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     disk_info, rescue, block_device_info)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2251, in get_guest_config\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]     inst_type)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] TypeError: get_config() takes exactly 5 arguments (6 given)\n2013-03-16 09:03:10.886 24296 TRACE nova.compute.manager [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178]\n2013-03-16 09:03:11.581 24296 ERROR nova.virt.libvirt.driver [-] [instance: b1084143-a0ab-42de-a7a8-bd9acac3f178] During wait destroy, instance disappeared.", 
            "date_created": "2013-03-16 13:38:51.342910+00:00", 
            "author": "https://api.launchpad.net/1.0/~dan-prince"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/24576", 
            "date_created": "2013-03-16 13:44:27.942337+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/24576\nCommitted: http://github.com/openstack/nova/commit/6031a81fd5e513473e82fb65a46cec56c5613379\nSubmitter: Jenkins\nBranch:    master\n\ncommit 6031a81fd5e513473e82fb65a46cec56c5613379\nAuthor: Dan Prince <email address hidden>\nDate:   Sat Mar 16 10:24:20 2013 -0400\n\n    Revert \"Remove the usage of instance['extra_specs'\n    \n    This reverts commit 76c47c1c3057d5ee479cf1e55b803f5ac9faba1d.\n    \n    Fix libvirt vif get_config interface breakage.\n    \n    In 76c47c1 we added a new arg to the libvirt vif driver get_config\n    interface (instance_type=None). We did not update all the libvirt\n    drivers to use it however which can break things badly (instances\n    fail to spawn, etc). We clearly need more test coverage here as well.\n    \n    This should fix SmokeStack.\n    \n    Fixes LP Bug #1155950.\n    \n    Change-Id: I073d119ea2bfd5c314d2d8c8bbf2f6d7d649753a\n", 
            "date_created": "2013-03-17 19:29:45.098751+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-03-20 16:05:08.033317+00:00"
}