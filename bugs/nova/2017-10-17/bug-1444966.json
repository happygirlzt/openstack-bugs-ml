{
    "status": "Confirmed", 
    "last_updated": "2017-06-23 12:49:44.924790+00:00", 
    "description": "\nwhile I associate a floating IP to an instance  and when I remove fixed IP  associated to that instance  ,  fixed IP as well as floating IP are  removed  but when  I list floating IP  for the current tenant , floating  IP list  still  maintains  the  old data .  Floating IP  list still shows the attachment  of  the fixed IP with  the instance from which it  was removed    that is  required clean up operations  was not performed properly . \n\nI reproduced this bug using the following steps:-\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     | private=10.0.0.18              |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\nvyom@vyom:~$ nova floating-ip-list\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | -                                    | -          | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   |-                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                    | -          | public |\n +-------------+--------------------------------------+------------+--------+ \n\n*Associating  floating IP 172.24.4.10  to instance3 .\nvyom@vyom:~$ nova floating-ip-associate  7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 172.24.4.10\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     | private=10.0.0.18, 172.24.4.10 |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\nvyom@vyom:~$ nova floating-ip-list\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | 10.0.0.18  | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   | -                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                    | -          | public |\n+-------------+--------------------------------------+------------+--------+ \n\n* Removing fixed ip from instance instance3 \n\nvyom@vyom:~$ nova  remove-fixed-ip 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 10.0.0.18\n\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     |                                |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\n* Floating  IP list still shows  the old information . \n\nvyom@vyom:~$ nova floating-ip-list\n\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | 10.0.0.18  | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   | -                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                   | -          | public |\n +-------------+--------------------------------------+------------+--------+\n\n\nI think association of fixed  IP  10.0.0.18  and server Id  7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434  to floating IP 172.24.4.10  should be removed from  the list of floating  IP .", 
    "tags": [
        "db"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1444966", 
    "owner": "None", 
    "id": 1444966, 
    "index": 1689, 
    "openned": "2015-04-16 11:40:43.651105+00:00", 
    "created": "2015-04-16 11:40:43.651105+00:00", 
    "title": "Clean up  operation not performed  properly by nova .", 
    "comments": [
        {
            "content": "\nwhile I associate a floating IP to an instance  and when I remove fixed IP  associated to that instance  ,  fixed IP as well as floating IP are  removed  but when  I list floating IP  for the current tenant , floating  IP list  still  maintains  the  old data .  Floating IP  list still shows the attachment  of  the fixed IP with  the instance from which it  was removed    that is  required clean up operations  was not performed properly . \n\nI reproduced this bug using the following steps:-\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     | private=10.0.0.18              |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\nvyom@vyom:~$ nova floating-ip-list\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | -                                    | -          | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   |-                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                    | -          | public |\n +-------------+--------------------------------------+------------+--------+ \n\n*Associating  floating IP 172.24.4.10  to instance3 .\nvyom@vyom:~$ nova floating-ip-associate  7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 172.24.4.10\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     | private=10.0.0.18, 172.24.4.10 |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\nvyom@vyom:~$ nova floating-ip-list\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | 10.0.0.18  | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   | -                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                    | -          | public |\n+-------------+--------------------------------------+------------+--------+ \n\n* Removing fixed ip from instance instance3 \n\nvyom@vyom:~$ nova  remove-fixed-ip 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 10.0.0.18\n\n\nvyom@vyom:~$ nova list\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name            | Status | Task State | Power State | Networks                       |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n| 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | instance3       | ACTIVE | -          | Running     |                                |\n| 973cc64d-ee93-4419-8e1f-9b5f413eed6f | test_instance22 | ACTIVE | -          | Running     | private=10.0.0.201, 172.24.4.5 |\n+--------------------------------------+-----------------+--------+------------+-------------+--------------------------------+\n\n* Floating  IP list still shows  the old information . \n\nvyom@vyom:~$ nova floating-ip-list\n\n+-------------+--------------------------------------+------------+--------+\n| Ip          | Server Id                            | Fixed Ip   | Pool   |\n+-------------+--------------------------------------+------------+--------+\n| 172.24.4.10 | 7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434 | 10.0.0.18  | public |\n| 172.24.4.16 | -                                    | -          | public |\n| 172.24.4.15 | -                                    | -          | public |\n| 172.24.4.11 | -                                    | -          | public |\n| 172.24.4.7   | -                                     | -          | public |\n| 172.24.4.12 | -                                    | -          | public |\n| 172.24.4.5  | 973cc64d-ee93-4419-8e1f-9b5f413eed6f | 10.0.0.201 | public |\n| 172.24.4.13 | -                                    | -          | public |\n| 172.24.4.9   | -                                    | -          | public |\n| 172.24.4.14 | -                                   | -          | public |\n +-------------+--------------------------------------+------------+--------+\n\n\nI think association of fixed  IP  10.0.0.18  and server Id  7d4a97df-f0e0-4a15-bd1f-1e0d3e76c434  to floating IP 172.24.4.10  should be removed from  the list of floating  IP .", 
            "date_created": "2015-04-16 11:40:43.651105+00:00", 
            "author": "https://api.launchpad.net/1.0/~sonu-bhumca11"
        }, 
        {
            "content": "This bug report has an assignee for a while now but there is no patch\nfor that. It looks like that the chance of getting a patch is low. \nI'm going to remove the assignee to signal to others that they can take\nover if they like.\n\nIf you want to work on this, please:\n* add yourself as assignee AND \n* set the status to \"In Progress\" AND\n* provide a (WIP) patch within the next 2 weeks after that. \n\nIf you need assistance, reach out on the IRC channel #openstack-nova or \nuse the mailing list.", 
            "date_created": "2016-04-18 14:54:17.591659+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "\nThere are no currently open reviews on this bug, changing\nthe status back to the previous state and unassigning. If\nthere are active reviews related to this bug, please include\nlinks in comments.\n", 
            "date_created": "2017-06-23 12:49:42.018424+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}