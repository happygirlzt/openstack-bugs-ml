{
    "status": "Invalid", 
    "last_updated": "2015-04-20 17:42:13.976765+00:00", 
    "description": "http://logs.openstack.org/60/147460/7/gate/gate-tempest-dsvm-large-ops/12ba360/logs/screen-n-cpu-1.txt.gz?level=TRACE\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiU2V0dGluZyBpbnN0YW5jZSB2bV9zdGF0ZSB0byBFUlJPUlwiIEFORCBtZXNzYWdlOlwiX3RyeV9kZWFsbG9jYXRlX25ldHdvcmtcIiBBTkQgbWVzc2FnZTpcIk1lc3NhZ2luZ1RpbWVvdXRcIiBBTkQgYnVpbGRfbmFtZTpcImdhdGUtdGVtcGVzdC1kc3ZtLWxhcmdlLW9wc1wiIiwiZmllbGRzIjpbXSwib2Zmc2V0IjowLCJ0aW1lZnJhbWUiOiI2MDQ4MDAiLCJncmFwaG1vZGUiOiJjb3VudCIsInRpbWUiOnsidXNlcl9pbnRlcnZhbCI6MH0sInN0YW1wIjoxNDIyMzc3NTI3MzgwLCJtb2RlIjoiIiwiYW5hbHl6ZV9maWVsZCI6IiJ9\n\n61 hits in 7 days, check and gate, all failures.\n\n2015-01-27 10:55:34.025 ERROR nova.compute.manager [req-34f0ef2f-34f0-4b06-9e30-fd72565a3388 TestLargeOpsScenario-405264936 TestLargeOpsScenario-221766999] [instance: 63145652-811e-4124-8ef7-cc64b594336a] Setting instance vm_state to ERROR\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] Traceback (most recent call last):\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2569, in do_terminate_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._delete_instance(context, instance, bdms, quotas)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/hooks.py\", line 149, in inner\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     rv = f(*args, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2538, in _delete_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     quotas.rollback()\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 82, in __exit__\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     six.reraise(self.type_, self.value, self.tb)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2515, in _delete_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._shutdown_instance(context, instance, bdms)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2449, in _shutdown_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._try_deallocate_network(context, instance, requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2379, in _try_deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._set_instance_error_state(context, instance)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 82, in __exit__\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     six.reraise(self.type_, self.value, self.tb)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2374, in _try_deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._deallocate_network(context, instance, requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1954, in _deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     context, instance, requested_networks=requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/api.py\", line 47, in wrapped\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return func(self, context, *args, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/api.py\", line 292, in deallocate_for_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     requested_networks=requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/rpcapi.py\", line 209, in deallocate_for_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return cctxt.call(ctxt, 'deallocate_for_instance', **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 389, in call\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return self.prepare().call(ctxt, method, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 152, in call\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     retry=self.retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     timeout=timeout, retry=retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 436, in send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     retry=retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 425, in _send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     result = self._waiter.wait(msg_id, timeout)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 328, in wait\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     reply, ending, trylock = self._poll_queue(msg_id, timer)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 267, in _poll_queue\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     message = self.waiters.get(msg_id, timeout=timer.check_return(msg_id))\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 173, in get\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     'to message ID %s' % msg_id)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] MessagingTimeout: Timed out waiting for a reply to message ID 2717e1139f6d414dbebbc85164e05f9c\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] \n\n\nThis job uses nova-network, it's doing an rpc call on the network deallocate so if something is holding a lock in the same area would could be timing out that way, need to check the code to see what's all using locks at the same time in these flows.", 
    "tags": [
        "network"
    ], 
    "importance": "Critical", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1415106", 
    "owner": "https://api.launchpad.net/1.0/~mriedem", 
    "id": 1415106, 
    "index": 231, 
    "openned": "2015-01-27 16:55:50.261191+00:00", 
    "created": "2015-01-27 16:55:50.261191+00:00", 
    "title": "gate-tempest-dsvm-large-ops fails with RPC MessagingTimeout in _try_deallocate_network", 
    "comments": [
        {
            "content": "http://logs.openstack.org/60/147460/7/gate/gate-tempest-dsvm-large-ops/12ba360/logs/screen-n-cpu-1.txt.gz?level=TRACE\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiU2V0dGluZyBpbnN0YW5jZSB2bV9zdGF0ZSB0byBFUlJPUlwiIEFORCBtZXNzYWdlOlwiX3RyeV9kZWFsbG9jYXRlX25ldHdvcmtcIiBBTkQgbWVzc2FnZTpcIk1lc3NhZ2luZ1RpbWVvdXRcIiBBTkQgYnVpbGRfbmFtZTpcImdhdGUtdGVtcGVzdC1kc3ZtLWxhcmdlLW9wc1wiIiwiZmllbGRzIjpbXSwib2Zmc2V0IjowLCJ0aW1lZnJhbWUiOiI2MDQ4MDAiLCJncmFwaG1vZGUiOiJjb3VudCIsInRpbWUiOnsidXNlcl9pbnRlcnZhbCI6MH0sInN0YW1wIjoxNDIyMzc3NTI3MzgwLCJtb2RlIjoiIiwiYW5hbHl6ZV9maWVsZCI6IiJ9\n\n61 hits in 7 days, check and gate, all failures.\n\n2015-01-27 10:55:34.025 ERROR nova.compute.manager [req-34f0ef2f-34f0-4b06-9e30-fd72565a3388 TestLargeOpsScenario-405264936 TestLargeOpsScenario-221766999] [instance: 63145652-811e-4124-8ef7-cc64b594336a] Setting instance vm_state to ERROR\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] Traceback (most recent call last):\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2569, in do_terminate_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._delete_instance(context, instance, bdms, quotas)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/hooks.py\", line 149, in inner\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     rv = f(*args, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2538, in _delete_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     quotas.rollback()\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 82, in __exit__\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     six.reraise(self.type_, self.value, self.tb)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2515, in _delete_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._shutdown_instance(context, instance, bdms)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2449, in _shutdown_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._try_deallocate_network(context, instance, requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2379, in _try_deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._set_instance_error_state(context, instance)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 82, in __exit__\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     six.reraise(self.type_, self.value, self.tb)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2374, in _try_deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     self._deallocate_network(context, instance, requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1954, in _deallocate_network\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     context, instance, requested_networks=requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/api.py\", line 47, in wrapped\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return func(self, context, *args, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/api.py\", line 292, in deallocate_for_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     requested_networks=requested_networks)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/opt/stack/new/nova/nova/network/rpcapi.py\", line 209, in deallocate_for_instance\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return cctxt.call(ctxt, 'deallocate_for_instance', **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 389, in call\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     return self.prepare().call(ctxt, method, **kwargs)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 152, in call\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     retry=self.retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     timeout=timeout, retry=retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 436, in send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     retry=retry)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 425, in _send\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     result = self._waiter.wait(msg_id, timeout)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 328, in wait\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     reply, ending, trylock = self._poll_queue(msg_id, timer)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 267, in _poll_queue\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     message = self.waiters.get(msg_id, timeout=timer.check_return(msg_id))\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 173, in get\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a]     'to message ID %s' % msg_id)\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] MessagingTimeout: Timed out waiting for a reply to message ID 2717e1139f6d414dbebbc85164e05f9c\n2015-01-27 10:55:34.025 32626 TRACE nova.compute.manager [instance: 63145652-811e-4124-8ef7-cc64b594336a] \n\n\nThis job uses nova-network, it's doing an rpc call on the network deallocate so if something is holding a lock in the same area would could be timing out that way, need to check the code to see what's all using locks at the same time in these flows.", 
            "date_created": "2015-01-27 16:55:50.261191+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "From logstash it looks like this showed up on 1/19.", 
            "date_created": "2015-01-27 22:37:13.480165+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "2015-01-27 22:24:46.812 DEBUG oslo_concurrency.lockutils [req-3392f0ad-b103-4648-8a72-ea1dfd8678a5 TestLargeOpsScenario-1669034559 TestLargeOpsScenario-1787167515] Lock \"dnsmasq_start\" acquired by \"restart_dhcp\" :: waited 38.814s inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:430\n\n\nhttp://logs.openstack.org/65/140565/6/gate/gate-tempest-dsvm-large-ops/d40a5c9/logs/screen-n-net.txt.gz?#_2015-01-27_22_24_46_812", 
            "date_created": "2015-01-27 22:38:19.494955+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "This might be suspect:\n\nhttps://github.com/openstack/nova/commit/a888996bac7ca236092ad67e52bb6a8441ce0952", 
            "date_created": "2015-01-27 22:41:03.562334+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This bug started on the 19th", 
            "date_created": "2015-01-27 22:42:07.049363+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/150607", 
            "date_created": "2015-01-27 22:44:57.828525+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Based on logs from before this patch was introduced http://logs.openstack.org/45/142345/1/check//gate-tempest-dsvm-large-ops/4ca3f72/logs/screen-n-net.txt.gz\n\nWe are holding the lock for the same amount of time, but waiting longer to acquire it.", 
            "date_created": "2015-01-27 23:32:34.123261+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Contrary to my previous comment:\n\naverage time the lock was held with this issue: \n\nAverage: 0.442208\n\nAnd before:\n\nAverage: 0.261565\n", 
            "date_created": "2015-01-27 23:45:19.795919+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "grep \"restart_dhcp\\\" \\:\\: held\" screen-n-net.txt.good | cut -d' ' -f15  | awk '{s+=$1} END {print \"Average: \" s/NR}'  ", 
            "date_created": "2015-01-27 23:45:59.758473+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "After further investigation, it looks like https://review.openstack.org/#/c/38000/ appears to not be working anymore, rootwrap command are taking longer again, and they don't have the \"PBR Generated from\" line  in `which nova-rootwrap`", 
            "date_created": "2015-01-28 00:09:00.571747+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Here's an old one from Nov\n\nstack@bigblue:~$ cat /usr/local/bin/nova-rootwrap\n#!/usr/bin/python\n# PBR Generated from u'console_scripts'\n\nimport sys\n\nfrom oslo.rootwrap.cmd import main\n\n\nif __name__ == \"__main__\":\n    sys.exit(main())\nstack@bigblue:~$\nstack@bigblue:~$ ls -altr /usr/local/bin/nova-rootwrap\n-rwxr-xr-x 1 root root 156 Nov 12 13:21 /usr/local/bin/nova-rootwrap", 
            "date_created": "2015-01-28 00:12:36.431346+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "It looks like this may  be due to a setuptools change\n\nhttps://bitbucket.org/pypa/setuptools/commits/tag/12.0.5\n\nhttps://pythonhosted.org/setuptools/history.html", 
            "date_created": "2015-01-28 00:26:36.683734+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "current rootwrap:\n\n#!/usr/bin/python\n# EASY-INSTALL-ENTRY-SCRIPT: 'nova==2015.1.dev567','console_scripts','nova-rootwrap'\n__requires__ = 'nova==2015.1.dev567'\nimport sys\nfrom pkg_resources import load_entry_point\n\nif __name__ == '__main__':\n    sys.exit(\n        load_entry_point('nova==2015.1.dev567', 'console_scripts', 'nova-rootwrap')()\n    )\n", 
            "date_created": "2015-01-28 00:28:40.575589+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "looks like this is the issue: \n\nhttps://bitbucket.org/pypa/setuptools/commits/b7ff4497056b8b940b6b5c0b313988f54c4e9cd3?at=12.0.5\n\n\npip install -e hg+https://bitbucket.org/pypa/setuptools/@8b136e4#egg=setuptools\n\n\nfrom python-novaclient:\n\n python setup.py develop && cat /usr/local/bin/nova", 
            "date_created": "2015-01-28 01:01:52.463949+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "https://bitbucket.org/pypa/setuptools/commits/7646fed735c1c3849ab401ef7c5d00597e68c0a9?at=12.0.5", 
            "date_created": "2015-01-28 01:08:07.184944+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "So it looks like setuptools patch https://bitbucket.org/pypa/setuptools/commits/7646fed735c1c3849ab401ef7c5d00597e68c0a9?at=12.0.5 (new in 12.0.0) broke our pbr patch:\n\nhttps://review.openstack.org/gitweb?p=openstack-dev%2Fpbr.git;a=commitdiff;h=8e58c2fa58fd1aa6f9985dcb4e210508a73e1df7", 
            "date_created": "2015-01-28 01:25:08.859143+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/150904", 
            "date_created": "2015-01-28 18:52:49.593661+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Matt Riedemann (<email address hidden>) on branch: master\nReview: https://review.openstack.org/150607\nReason: This is supposed to fix it:\n\nhttps://review.openstack.org/#/c/150890/", 
            "date_created": "2015-01-28 21:33:50.936186+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/150904\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=10c510ec922792c6c59c9d7fe59951997b3a0aae\nSubmitter: Jenkins\nBranch:    master\n\ncommit 10c510ec922792c6c59c9d7fe59951997b3a0aae\nAuthor: Chet Burgess <email address hidden>\nDate:   Wed Jan 28 10:20:24 2015 -0800\n\n    Use a workarounds option to disable rootwrap\n    \n    Create a workarounds option to disable rootwrap to work around\n    recent setuptools changes that impacted PBRs ability to make\n    rootwrap performance not terrible.\n    \n    DocImpact\n    Related-Bug: #1415106\n    \n    Change-Id: Iad1e57b18e490a10b1638f00f21e05e7e2a68b22\n", 
            "date_created": "2015-01-29 06:21:39.088624+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/152691\nCommitted: https://git.openstack.org/cgit/openstack-dev/pbr/commit/?id=1457aafa6095da4e33a6eb0a52218f077d991a67\nSubmitter: Jenkins\nBranch:    feature/0.10\n\ncommit 1457aafa6095da4e33a6eb0a52218f077d991a67\nAuthor: Monty Taylor <email address hidden>\nDate:   Wed Jan 28 06:57:06 2015 -0800\n\n    Support script text override for newer develop\n    \n    setuptools > 12 has a new flow for writing out generated script text.\n    It's nicer, actually, because it means we can just subclass and extend\n    one method instead of monekypatching.\n    \n    Closes-Bug: 1415106\n    Change-Id: I56e7bea60df8a59d859575d426ce93c45ffee314\n", 
            "date_created": "2015-03-02 17:27:29.344629+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-01-28 21:34:27.578653+00:00"
}