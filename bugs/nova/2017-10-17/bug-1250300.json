{
    "status": "Invalid", 
    "last_updated": "2014-03-14 14:20:14.699862+00:00", 
    "description": "I create a secgroup with chinese description just as following:\nhzguanqiang@debian:/data/log/nova$ nova secgroup-list\n+----+----------+-------------+\n| Id | Name     | Description |\n+----+----------+-------------+\n| 11 | bingoxxx | \u65e0          |\n\nThen I create an instance with this secgroup, It report an 500 error.\n\nAnd when I execute 'nova list' command, it failed with such error info in nova-api.log:\n\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack Traceback (most recent call last):\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 111, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystoneclient/middleware/auth_token.py\", line 571, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 904, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     content_type, body, accept)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 963, in _process_stack\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1044, in dispatch\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 505, in detail\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 567, in _get_servers\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     want_objects=True)   \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/compute/api.py\", line 1668, in get_all\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     marker=marker)            \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/compute/api.py\", line 1695, in _get_instances_by_filters\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     limit=limit, marker=marker, expected_attrs=fields)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 107, in wrapper\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     result = fn(cls, context, *args, **kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 514, in get_by_filters\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     expected_attrs)           \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 489, in _make_instance_list\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     expected_attrs=expected_attrs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 252, in _from_db_object\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     db_inst['security_groups'])\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/security_group.py\", line 72, in _make_secgroup_list\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     secgroup = SecurityGroup._from_db_object(SecurityGroup(), db_secgroup)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/security_group.py\", line 32, in _from_db_object\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     secgroup[field] = db_secgroup[field]\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 381, in __setitem__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     setattr(self, name, value)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 66, in setter\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return setattr(self, get_attrname(name), typefn(value))\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack UnicodeEncodeError: 'ascii' codec can't encode character u'\\u65e0' in position 0: ordinal not in range(128)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack                               \n2013-11-12 11:12:24.139 26386 INFO nova.api.openstack [req-97cf054c-0e7f-474a-a4a7-3cb82a6d1eb5 7a8786f4a75c41e8a6741865a64a6cb8 9b55f00769924d969880c0955c2871b0] http://10.120.120.21:8774/v2/9b55f00769924d969880c0955c2871b0\n/servers/detail returned with HTTP 500", 
    "tags": [
        "unified-objects"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1250300", 
    "owner": "None", 
    "id": 1250300, 
    "index": 5544, 
    "openned": "2013-11-12 03:56:15.720637+00:00", 
    "created": "2013-11-12 03:56:15.720637+00:00", 
    "title": "chinese secgroup description make nova list failed", 
    "comments": [
        {
            "content": "I create a secgroup with chinese description just as following:\nhzguanqiang@debian:/data/log/nova$ nova secgroup-list\n+----+----------+-------------+\n| Id | Name     | Description |\n+----+----------+-------------+\n| 11 | bingoxxx | \u65e0          |\n\nThen I create an instance with this secgroup, It report an 500 error.\n\nAnd when I execute 'nova list' command, it failed with such error info in nova-api.log:\n\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack Traceback (most recent call last):\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 111, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystoneclient/middleware/auth_token.py\", line 571, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 904, in __call__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     content_type, body, accept)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 963, in _process_stack\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1044, in dispatch\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 505, in detail\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 567, in _get_servers\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     want_objects=True)   \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/compute/api.py\", line 1668, in get_all\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     marker=marker)            \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/compute/api.py\", line 1695, in _get_instances_by_filters\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     limit=limit, marker=marker, expected_attrs=fields)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 107, in wrapper\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     result = fn(cls, context, *args, **kwargs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 514, in get_by_filters\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     expected_attrs)           \n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 489, in _make_instance_list\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     expected_attrs=expected_attrs)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/instance.py\", line 252, in _from_db_object\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     db_inst['security_groups'])\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/security_group.py\", line 72, in _make_secgroup_list\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     secgroup = SecurityGroup._from_db_object(SecurityGroup(), db_secgroup)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/security_group.py\", line 32, in _from_db_object\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     secgroup[field] = db_secgroup[field]\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 381, in __setitem__\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     setattr(self, name, value)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/nova/objects/base.py\", line 66, in setter\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack     return setattr(self, get_attrname(name), typefn(value))\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack UnicodeEncodeError: 'ascii' codec can't encode character u'\\u65e0' in position 0: ordinal not in range(128)\n2013-11-12 11:12:24.137 26386 TRACE nova.api.openstack                               \n2013-11-12 11:12:24.139 26386 INFO nova.api.openstack [req-97cf054c-0e7f-474a-a4a7-3cb82a6d1eb5 7a8786f4a75c41e8a6741865a64a6cb8 9b55f00769924d969880c0955c2871b0] http://10.120.120.21:8774/v2/9b55f00769924d969880c0955c2871b0\n/servers/detail returned with HTTP 500", 
            "date_created": "2013-11-12 03:56:15.720637+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzguanqiang"
        }, 
        {
            "content": "What level of code are you on because the line numbers are a bit off and it seems like a similar bug with unicode was already fixed for string types.", 
            "date_created": "2013-11-17 02:16:32.581213+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This is the change I was thinking of:\n\nhttps://github.com/openstack/nova/commit/61bedc9aa04b0bac21e5c4bd17d6d2c09e2d9e01", 
            "date_created": "2013-11-17 02:18:10.035874+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Marking as incomplete, as we still need the response to the previous question about nova version.", 
            "date_created": "2014-02-08 17:25:51.687722+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "Sorry  to response so late, I met the problem with first havana release version. I 'll see whether the problem still exists in the latest code.", 
            "date_created": "2014-02-11 02:56:30.097325+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzguanqiang"
        }, 
        {
            "content": "In the latest code of master branch, this problem has been fixed.", 
            "date_created": "2014-02-11 11:28:52.827855+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzguanqiang"
        }, 
        {
            "content": "Original poster confirms this is no longer a problem", 
            "date_created": "2014-03-14 14:20:09.539872+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }
    ], 
    "closed": "2014-03-14 14:20:11.219639+00:00"
}