{
    "status": "Invalid", 
    "last_updated": "2013-01-14 20:21:15.677748+00:00", 
    "description": "root@folsom-compute:~# aptitude install nova-api-metadata\nThe following NEW packages will be installed:\n  nova-api-metadata nova-common{a}\n0 packages upgraded, 2 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 0 B/28.7 kB of archives. After unpacking 2,082 kB will be used.\nDo you want to continue? [Y/n/?]\nSelecting previously unselected package nova-common.\n(Reading database ... 117308 files and directories currently installed.)\nUnpacking nova-common (from .../nova-common_2012.2-0ubuntu5~cloud0_all.deb) ...\nSelecting previously unselected package nova-api-metadata.\nUnpacking nova-api-metadata (from .../nova-api-metadata_2012.2-0ubuntu5~cloud0_all.deb) ...\nProcessing triggers for man-db ...\nProcessing triggers for ureadahead ...\nSetting up nova-common (2012.2-0ubuntu5~cloud0) ...\nusermod: no changes\n2013-01-04 01:43:26 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.migration' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from (pid=4878) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\nCommand failed, please check log for more info\n2013-01-04 01:43:26 CRITICAL nova [-] fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:26 TRACE nova Traceback (most recent call last):\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1400, in <module>\n2013-01-04 01:43:26 TRACE nova     main()\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1387, in main\n2013-01-04 01:43:26 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 756, in sync\n2013-01-04 01:43:26 TRACE nova     return migration.db_sync(version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n2013-01-04 01:43:26 TRACE nova     return IMPL.db_sync(version=version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-01-04 01:43:26 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-01-04 01:43:26 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-01-04 01:43:26 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-01-04 01:43:26 TRACE nova     return f(*a, **kw)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-01-04 01:43:26 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-01-04 01:43:26 TRACE nova     change.run(self.engine, step)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line 41, in run\n2013-01-04 01:43:26 TRACE nova     dbapi.executescript(text)\n2013-01-04 01:43:26 TRACE nova IntegrityError: fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:26 TRACE nova\ndpkg: error processing nova-common (--configure):\n subprocess installed post-installation script returned error exit status 1\nNo apport report written because MaxReports is reached already\n                                                              dpkg: dependency problems prevent configuration of nova-api-metadata:\n nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0); however:\n  Package nova-common is not configured yet.\ndpkg: error processing nova-api-metadata (--configure):\n dependency problems - leaving unconfigured\nNo apport report written because MaxReports is reached already\n                                                              Errors were encountered while processing:\n nova-common\n nova-api-metadata\nE: Sub-process /usr/bin/dpkg returned an error code (1)\nA package failed to install.  Trying to recover:\nSetting up nova-common (2012.2-0ubuntu5~cloud0) ...\nusermod: no changes\n2013-01-04 01:43:27 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.migration' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from (pid=4922) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\nCommand failed, please check log for more info\n2013-01-04 01:43:27 CRITICAL nova [-] fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:27 TRACE nova Traceback (most recent call last):\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1400, in <module>\n2013-01-04 01:43:27 TRACE nova     main()\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1387, in main\n2013-01-04 01:43:27 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 756, in sync\n2013-01-04 01:43:27 TRACE nova     return migration.db_sync(version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n2013-01-04 01:43:27 TRACE nova     return IMPL.db_sync(version=version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-01-04 01:43:27 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-01-04 01:43:27 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-01-04 01:43:27 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-01-04 01:43:27 TRACE nova     return f(*a, **kw)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-01-04 01:43:27 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-01-04 01:43:27 TRACE nova     change.run(self.engine, step)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line 41, in run\n2013-01-04 01:43:27 TRACE nova     dbapi.executescript(text)\n2013-01-04 01:43:27 TRACE nova IntegrityError: fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:27 TRACE nova\ndpkg: error processing nova-common (--configure):\n subprocess installed post-installation script returned error exit status 1\ndpkg: dependency problems prevent configuration of nova-api-metadata:\n nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0); however:\n  Package nova-common is not configured yet.\ndpkg: error processing nova-api-metadata (--configure):\n dependency problems - leaving unconfigured\nErrors were encountered while processing:\n nova-common\n nova-api-metadata\n\n\nThe corruption is happening with nova-compute-kvm as well.\n\nThe release and repository information is as follows:\n\nroot@folsom-compute:~# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 12.04.1 LTS\nRelease:        12.04\nCodename:       precise\nroot@folsom-compute:~# cat //etc/apt/sources.list.d/cloud-archive.list\ndeb http://ubuntu-cloud.archive.canonical.com/ubuntu precise-updates/folsom main\n\n\nI appreciate any help in fixing this issue.\n\nThanks,\nSrini", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1095988", 
    "owner": "None", 
    "id": 1095988, 
    "index": 4564, 
    "openned": "2013-01-04 09:50:23.356006+00:00", 
    "created": "2013-01-04 09:50:23.356006+00:00", 
    "title": "nova-api-metadata update causing corruption", 
    "comments": [
        {
            "content": "root@folsom-compute:~# aptitude install nova-api-metadata\nThe following NEW packages will be installed:\n  nova-api-metadata nova-common{a}\n0 packages upgraded, 2 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 0 B/28.7 kB of archives. After unpacking 2,082 kB will be used.\nDo you want to continue? [Y/n/?]\nSelecting previously unselected package nova-common.\n(Reading database ... 117308 files and directories currently installed.)\nUnpacking nova-common (from .../nova-common_2012.2-0ubuntu5~cloud0_all.deb) ...\nSelecting previously unselected package nova-api-metadata.\nUnpacking nova-api-metadata (from .../nova-api-metadata_2012.2-0ubuntu5~cloud0_all.deb) ...\nProcessing triggers for man-db ...\nProcessing triggers for ureadahead ...\nSetting up nova-common (2012.2-0ubuntu5~cloud0) ...\nusermod: no changes\n2013-01-04 01:43:26 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.migration' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from (pid=4878) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\nCommand failed, please check log for more info\n2013-01-04 01:43:26 CRITICAL nova [-] fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:26 TRACE nova Traceback (most recent call last):\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1400, in <module>\n2013-01-04 01:43:26 TRACE nova     main()\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1387, in main\n2013-01-04 01:43:26 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 756, in sync\n2013-01-04 01:43:26 TRACE nova     return migration.db_sync(version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n2013-01-04 01:43:26 TRACE nova     return IMPL.db_sync(version=version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-01-04 01:43:26 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-01-04 01:43:26 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-01-04 01:43:26 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-01-04 01:43:26 TRACE nova     return f(*a, **kw)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-01-04 01:43:26 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-01-04 01:43:26 TRACE nova     change.run(self.engine, step)\n2013-01-04 01:43:26 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line 41, in run\n2013-01-04 01:43:26 TRACE nova     dbapi.executescript(text)\n2013-01-04 01:43:26 TRACE nova IntegrityError: fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:26 TRACE nova\ndpkg: error processing nova-common (--configure):\n subprocess installed post-installation script returned error exit status 1\nNo apport report written because MaxReports is reached already\n                                                              dpkg: dependency problems prevent configuration of nova-api-metadata:\n nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0); however:\n  Package nova-common is not configured yet.\ndpkg: error processing nova-api-metadata (--configure):\n dependency problems - leaving unconfigured\nNo apport report written because MaxReports is reached already\n                                                              Errors were encountered while processing:\n nova-common\n nova-api-metadata\nE: Sub-process /usr/bin/dpkg returned an error code (1)\nA package failed to install.  Trying to recover:\nSetting up nova-common (2012.2-0ubuntu5~cloud0) ...\nusermod: no changes\n2013-01-04 01:43:27 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.migration' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from (pid=4922) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\nCommand failed, please check log for more info\n2013-01-04 01:43:27 CRITICAL nova [-] fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:27 TRACE nova Traceback (most recent call last):\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1400, in <module>\n2013-01-04 01:43:27 TRACE nova     main()\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1387, in main\n2013-01-04 01:43:27 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 756, in sync\n2013-01-04 01:43:27 TRACE nova     return migration.db_sync(version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n2013-01-04 01:43:27 TRACE nova     return IMPL.db_sync(version=version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-01-04 01:43:27 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-01-04 01:43:27 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-01-04 01:43:27 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-01-04 01:43:27 TRACE nova     return f(*a, **kw)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-01-04 01:43:27 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-01-04 01:43:27 TRACE nova     change.run(self.engine, step)\n2013-01-04 01:43:27 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line 41, in run\n2013-01-04 01:43:27 TRACE nova     dbapi.executescript(text)\n2013-01-04 01:43:27 TRACE nova IntegrityError: fixed_ips_backup.instance_id may not be NULL\n2013-01-04 01:43:27 TRACE nova\ndpkg: error processing nova-common (--configure):\n subprocess installed post-installation script returned error exit status 1\ndpkg: dependency problems prevent configuration of nova-api-metadata:\n nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0); however:\n  Package nova-common is not configured yet.\ndpkg: error processing nova-api-metadata (--configure):\n dependency problems - leaving unconfigured\nErrors were encountered while processing:\n nova-common\n nova-api-metadata\n\n\nThe corruption is happening with nova-compute-kvm as well.\n\nThe release and repository information is as follows:\n\nroot@folsom-compute:~# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 12.04.1 LTS\nRelease:        12.04\nCodename:       precise\nroot@folsom-compute:~# cat //etc/apt/sources.list.d/cloud-archive.list\ndeb http://ubuntu-cloud.archive.canonical.com/ubuntu precise-updates/folsom main\n\n\nI appreciate any help in fixing this issue.\n\nThanks,\nSrini", 
            "date_created": "2013-01-04 09:50:23.356006+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "Looks like an Ubuntu packaging issue.", 
            "date_created": "2013-01-04 13:10:04.202862+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Was misled by the \"corruption\" you mentioned, looks like you have a corrupted DB in the first place...\r\nWhat version are you trying to upgrade from ?", 
            "date_created": "2013-01-04 14:00:07.059333+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Hi Thierry .. sorry for not wording properly .. yes it is a packaging issue \n\nI had 12.04 LTS on the system before and was trying to do basic installation of openstack \nhttp://docs.openstack.org/folsom/basic-install/content/\n\nfollowing the instruction given in the document\n\nSetting up of controller was not a problem.  I am seeing this issue on the 'compute' node when I was\ntrying to install 'nova' component on it.\n\nI installed ubuntu-cloud-keyring added 'folsom main' to the apt source list\n\nadded /etc/apt/sources.list.d/cloud-archive.list\ndeb http://ubuntu-cloud.archive.canonical.com/ubuntu precise-updates/folsom\nmain\n\ndid an update and upgrade\ninstalled hypervisor packages and followed it with 'nova' installation\n\nThe packages suggested for nova installation  were  the following two packages to begin with\napt-get install nova-api-metadata nova-compute-kvm\n\nCurrently installed packages on nova on the system are:\nroot@folsom-compute:~# dpkg -l | grep nova\nrc  nova-api                           2012.1.3+stable-20120827-4d2a4afe-0ubuntu1 OpenStack Compute - API frontend\nrc  nova-common                        2012.2-0ubuntu5~cloud0                     OpenStack Compute - common files\nrc  nova-compute                       2012.2-0ubuntu5~cloud0                     OpenStack Compute - compute node\nii  nova-doc                           2012.2-0ubuntu5~cloud0                     OpenStack Compute - documentation\nrc  nova-vncproxy                      2012.1.3+stable-20120827-4d2a4afe-0ubuntu1 OpenStack Compute - VNC proxy\nrc  nova-volume                        2012.2-0ubuntu5~cloud0                     OpenStack Compute - storage\nii  python-nova                        2012.2-0ubuntu5~cloud0                     OpenStack Compute Python libraries\nii  python-novaclient                  1:2.9.0-0ubuntu1~cloud0                    client library for OpenStack Compute API\n\nPlease let me know if you need any further information.", 
            "date_created": "2013-01-04 16:37:59.231566+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "BTW the package database on the system by itself seems to be ok and consistent.  But it is unable to install the above two mentioned packages.\n\nroot@folsom-compute:~# dpkg --configure -a\nroot@folsom-compute:~# aptitude update && aptitude upgrade\nIgn http://us.archive.ubuntu.com precise InRelease\nIgn http://us.archive.ubuntu.com precise-updates InRelease\nIgn http://us.archive.ubuntu.com precise-backports InRelease\nHit http://us.archive.ubuntu.com precise Release.gpg\nGet: 1 http://us.archive.ubuntu.com precise-updates Release.gpg [198 B]\nIgn http://security.ubuntu.com precise-security InRelease\nIgn http://ubuntu-cloud.archive.canonical.com precise-updates/folsom InRelease\nGet: 2 http://us.archive.ubuntu.com precise-backports Release.gpg [198 B]\nHit http://us.archive.ubuntu.com precise Release\nHit http://security.ubuntu.com precise-security Release.gpg\nGet: 3 http://ubuntu-cloud.archive.canonical.com precise-updates/folsom Release.gpg [543 B]\nGet: 4 http://us.archive.ubuntu.com precise-updates Release [49.6 kB]\nHit http://security.ubuntu.com precise-security Release\nHit http://ubuntu-cloud.archive.canonical.com precise-updates/folsom Release\nGet: 5 http://us.archive.ubuntu.com precise-backports Release [49.6 kB]\nHit http://security.ubuntu.com precise-security/main Sources\nHit http://ubuntu-cloud.archive.canonical.com precise-updates/folsom/main amd64 Packages\nHit http://us.archive.ubuntu.com precise/main Sources\nHit http://us.archive.ubuntu.com precise/restricted Sources\nHit http://us.archive.ubuntu.com precise/universe Sources\nHit http://us.archive.ubuntu.com precise/multiverse Sources\nHit http://us.archive.ubuntu.com precise/main amd64 Packages\nHit http://us.archive.ubuntu.com precise/restricted amd64 Packages\nHit http://us.archive.ubuntu.com precise/universe amd64 Packages\nHit http://us.archive.ubuntu.com precise/multiverse amd64 Packages\nHit http://us.archive.ubuntu.com precise/main i386 Packages\nHit http://us.archive.ubuntu.com precise/restricted i386 Packages\nHit http://us.archive.ubuntu.com precise/universe i386 Packages\nHit http://us.archive.ubuntu.com precise/multiverse i386 Packages\nHit http://us.archive.ubuntu.com precise/main TranslationIndex\nHit http://us.archive.ubuntu.com precise/multiverse TranslationIndex\nHit http://security.ubuntu.com precise-security/restricted Sources\nHit http://ubuntu-cloud.archive.canonical.com precise-updates/folsom/main i386 Packages\nHit http://security.ubuntu.com precise-security/universe Sources\nHit http://security.ubuntu.com precise-security/multiverse Sources\nHit http://security.ubuntu.com precise-security/main amd64 Packages\nHit http://security.ubuntu.com precise-security/restricted amd64 Packages\nHit http://security.ubuntu.com precise-security/universe amd64 Packages\nHit http://security.ubuntu.com precise-security/multiverse amd64 Packages\nHit http://us.archive.ubuntu.com precise/restricted TranslationIndex\nHit http://us.archive.ubuntu.com precise/universe TranslationIndex\nGet: 6 http://us.archive.ubuntu.com precise-updates/main Sources [198 kB]\nIgn http://ubuntu-cloud.archive.canonical.com precise-updates/folsom/main TranslationIndex\nHit http://security.ubuntu.com precise-security/main i386 Packages\nHit http://security.ubuntu.com precise-security/restricted i386 Packages\nHit http://security.ubuntu.com precise-security/universe i386 Packages\nHit http://security.ubuntu.com precise-security/multiverse i386 Packages\nHit http://security.ubuntu.com precise-security/main TranslationIndex\nHit http://security.ubuntu.com precise-security/multiverse TranslationIndex\nHit http://security.ubuntu.com precise-security/restricted TranslationIndex\nHit http://security.ubuntu.com precise-security/universe TranslationIndex\nHit http://security.ubuntu.com precise-security/main Translation-en\nHit http://security.ubuntu.com precise-security/multiverse Translation-en\nHit http://security.ubuntu.com precise-security/restricted Translation-en\nGet: 7 http://us.archive.ubuntu.com precise-updates/restricted Sources [4,419 B]\nGet: 8 http://us.archive.ubuntu.com precise-updates/universe Sources [67.9 kB]\nHit http://security.ubuntu.com precise-security/universe Translation-en\nGet: 9 http://us.archive.ubuntu.com precise-updates/multiverse Sources [4,244 B]\nGet: 10 http://us.archive.ubuntu.com precise-updates/main amd64 Packages [449 kB]\nIgn http://ubuntu-cloud.archive.canonical.com precise-updates/folsom/main Translation-en_US\nIgn http://ubuntu-cloud.archive.canonical.com precise-updates/folsom/main Translation-en\nGet: 11 http://us.archive.ubuntu.com precise-updates/restricted amd64 Packages [8,366 B]\nGet: 12 http://us.archive.ubuntu.com precise-updates/universe amd64 Packages [164 kB]\nGet: 13 http://us.archive.ubuntu.com precise-updates/multiverse amd64 Packages [8,671 B]\nGet: 14 http://us.archive.ubuntu.com precise-updates/main i386 Packages [457 kB]\nGet: 15 http://us.archive.ubuntu.com precise-updates/restricted i386 Packages [8,374 B]\nGet: 16 http://us.archive.ubuntu.com precise-updates/universe i386 Packages [166 kB]\nGet: 17 http://us.archive.ubuntu.com precise-updates/multiverse i386 Packages [9,675 B]\nHit http://us.archive.ubuntu.com precise-updates/main TranslationIndex\nHit http://us.archive.ubuntu.com precise-updates/multiverse TranslationIndex\nHit http://us.archive.ubuntu.com precise-updates/restricted TranslationIndex\nHit http://us.archive.ubuntu.com precise-updates/universe TranslationIndex\nGet: 18 http://us.archive.ubuntu.com precise-backports/main Sources [2,422 B]\nGet: 19 http://us.archive.ubuntu.com precise-backports/restricted Sources [14 B]\nGet: 20 http://us.archive.ubuntu.com precise-backports/universe Sources [21.4 kB]\nGet: 21 http://us.archive.ubuntu.com precise-backports/multiverse Sources [2,669 B]\nGet: 22 http://us.archive.ubuntu.com precise-backports/main amd64 Packages [1,945 B]\nGet: 23 http://us.archive.ubuntu.com precise-backports/restricted amd64 Packages [14 B]\nGet: 24 http://us.archive.ubuntu.com precise-backports/universe amd64 Packages [22.0 kB]\nGet: 25 http://us.archive.ubuntu.com precise-backports/multiverse amd64 Packages [2,489 B]\nGet: 26 http://us.archive.ubuntu.com precise-backports/main i386 Packages [1,941 B]\nGet: 27 http://us.archive.ubuntu.com precise-backports/restricted i386 Packages [14 B]\nGet: 28 http://us.archive.ubuntu.com precise-backports/universe i386 Packages [22.1 kB]\nGet: 29 http://us.archive.ubuntu.com precise-backports/multiverse i386 Packages [2,504 B]\nHit http://us.archive.ubuntu.com precise-backports/main TranslationIndex\nHit http://us.archive.ubuntu.com precise-backports/multiverse TranslationIndex\nHit http://us.archive.ubuntu.com precise-backports/restricted TranslationIndex\nHit http://us.archive.ubuntu.com precise-backports/universe TranslationIndex\nHit http://us.archive.ubuntu.com precise/main Translation-en\nHit http://us.archive.ubuntu.com precise/multiverse Translation-en\nHit http://us.archive.ubuntu.com precise/restricted Translation-en\nHit http://us.archive.ubuntu.com precise/universe Translation-en\nHit http://us.archive.ubuntu.com precise-updates/main Translation-en\nHit http://us.archive.ubuntu.com precise-updates/multiverse Translation-en\nHit http://us.archive.ubuntu.com precise-updates/restricted Translation-en\nHit http://us.archive.ubuntu.com precise-updates/universe Translation-en\nHit http://us.archive.ubuntu.com precise-backports/main Translation-en\nHit http://us.archive.ubuntu.com precise-backports/multiverse Translation-en\nHit http://us.archive.ubuntu.com precise-backports/restricted Translation-en\nHit http://us.archive.ubuntu.com precise-backports/universe Translation-en\nFetched 1,725 kB in 5s (336 kB/s)\n\nNo packages will be installed, upgraded, or removed.\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 0 B of archives. After unpacking 0 B will be used.\n\nroot@folsom-compute:~#\n", 
            "date_created": "2013-01-04 16:40:58.585470+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "the packages being nova-api-metadata and nova-compute-kvm", 
            "date_created": "2013-01-04 16:42:18.742425+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "Looks like your database was corrupted with a weird entry at some point that now prevents the database migration script from running. The simplest solution if you don't have VMs or data lying around would be to purge the current install and reinstall from scratch with a new database.", 
            "date_created": "2013-01-07 15:57:52.706103+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Hi Thierry,\n\nI can do that. But did you mean removing openstack components only and resintalling them again - doing a search using dpkg -l, looking for openstack components and purging them ? - thanx", 
            "date_created": "2013-01-08 16:38:27.302488+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "Yes, purge Nova packages (removing nova-common is a good start). Make sure your /var/lib/nova is empty, then reinstall. This will ensure you get a clean empty database.", 
            "date_created": "2013-01-10 10:22:16.103774+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Thanks .. got the basic stuff working.  Didn't get the smiley faces for all services :-(\n\nroot@folsom-controller:~# nova-manage service list\n2013-01-11 16:01:48 DEBUG nova.utils [req-a0726341-61a3-4dae-9c4f-146658cf6c78 None None] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc'> __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:502\nBinary           Host                                 Zone             Status     State Updated_At\nnova-consoleauth folsom-controller                    nova             enabled    XXX   None\nnova-compute     folsom-compute                       nova             enabled    :-)   2013-01-12 00:01:45\nnova-scheduler   folsom-controller                    nova             enabled    XXX   None\nnova-cert        folsom-controller                    nova             enabled    XXX   None\n\n\nSecondly what ppa would you suggest for getting all the good stuff with reasonable stability.  I started with folsom-stable-testing PPA\n\nI need to extend this to include swift and atlas. - thanx", 
            "date_created": "2013-01-12 00:07:59.135645+00:00", 
            "author": "https://api.launchpad.net/1.0/~skanduru"
        }, 
        {
            "content": "I would recommend using the Cloud Archive (Folsom on Precise), not a PPA.\r\n\r\nClosing this bug since it's not really pointing to a particular defect anymore, but is more a call for help. I'd suggest you ask further questions on the OpenStack general mailing-list.", 
            "date_created": "2013-01-14 10:15:30.433696+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Please remove this email addy from your system.   Robert Carr is no longer\nwith RightScale.\n\nIf I need to redirect this internally here - let me know.\n\nThanks,\nRobert\n\nOn Mon, Jan 14, 2013 at 2:15 AM, Thierry Carrez <<email address hidden>\n> wrote:\n\n> I would recommend using the Cloud Archive (Folsom on Precise), not a\n> PPA.\n>\n> Closing this bug since it's not really pointing to a particular defect\n> anymore, but is more a call for help. I'd suggest you ask further\n> questions on the OpenStack general mailing-list.\n>\n> ** Changed in: nova\n>        Status: Incomplete => Invalid\n>\n> --\n> You received this bug notification because you are subscribed to\n> OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/1095988\n>\n> Title:\n>   nova-api-metadata update causing corruption\n>\n> Status in OpenStack Compute (Nova):\n>   Invalid\n>\n> Bug description:\n>   root@folsom-compute:~# aptitude install nova-api-metadata\n>   The following NEW packages will be installed:\n>     nova-api-metadata nova-common{a}\n>   0 packages upgraded, 2 newly installed, 0 to remove and 0 not upgraded.\n>   Need to get 0 B/28.7 kB of archives. After unpacking 2,082 kB will be\n> used.\n>   Do you want to continue? [Y/n/?]\n>   Selecting previously unselected package nova-common.\n>   (Reading database ... 117308 files and directories currently installed.)\n>   Unpacking nova-common (from\n> .../nova-common_2012.2-0ubuntu5~cloud0_all.deb) ...\n>   Selecting previously unselected package nova-api-metadata.\n>   Unpacking nova-api-metadata (from\n> .../nova-api-metadata_2012.2-0ubuntu5~cloud0_all.deb) ...\n>   Processing triggers for man-db ...\n>   Processing triggers for ureadahead ...\n>   Setting up nova-common (2012.2-0ubuntu5~cloud0) ...\n>   usermod: no changes\n>   2013-01-04 01:43:26 DEBUG nova.utils [-] backend <module\n> 'nova.db.sqlalchemy.migration' from\n> '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from\n> (pid=4878) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\n>   Command failed, please check log for more info\n>   2013-01-04 01:43:26 CRITICAL nova [-] fixed_ips_backup.instance_id may\n> not be NULL\n>   2013-01-04 01:43:26 TRACE nova Traceback (most recent call last):\n>   2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1400,\n> in <module>\n>   2013-01-04 01:43:26 TRACE nova     main()\n>   2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 1387,\n> in main\n>   2013-01-04 01:43:26 TRACE nova     fn(*fn_args, **fn_kwargs)\n>   2013-01-04 01:43:26 TRACE nova   File \"/usr/bin/nova-manage\", line 756,\n> in sync\n>   2013-01-04 01:43:26 TRACE nova     return migration.db_sync(version)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n>   2013-01-04 01:43:26 TRACE nova     return IMPL.db_sync(version=version)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line\n> 79, in db_sync\n>   2013-01-04 01:43:26 TRACE nova     return\n> versioning_api.upgrade(get_engine(), repository, version)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in\n> upgrade\n>   2013-01-04 01:43:26 TRACE nova     return _migrate(url, repository,\n> version, upgrade=True, err=err, **opts)\n>   2013-01-04 01:43:26 TRACE nova   File \"<string>\", line 2, in _migrate\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line\n> 44, in patched_with_engine\n>   2013-01-04 01:43:26 TRACE nova     return f(*a, **kw)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in\n> _migrate\n>   2013-01-04 01:43:26 TRACE nova     schema.runchange(ver, change,\n> changeset.step)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91,\n> in runchange\n>   2013-01-04 01:43:26 TRACE nova     change.run(self.engine, step)\n>   2013-01-04 01:43:26 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line\n> 41, in run\n>   2013-01-04 01:43:26 TRACE nova     dbapi.executescript(text)\n>   2013-01-04 01:43:26 TRACE nova IntegrityError:\n> fixed_ips_backup.instance_id may not be NULL\n>   2013-01-04 01:43:26 TRACE nova\n>   dpkg: error processing nova-common (--configure):\n>    subprocess installed post-installation script returned error exit\n> status 1\n>   No apport report written because MaxReports is reached already\n>                                                                 dpkg:\n> dependency problems prevent configuration of nova-api-metadata:\n>    nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0);\n> however:\n>     Package nova-common is not configured yet.\n>   dpkg: error processing nova-api-metadata (--configure):\n>    dependency problems - leaving unconfigured\n>   No apport report written because MaxReports is reached already\n>                                                                 Errors\n> were encountered while processing:\n>    nova-common\n>    nova-api-metadata\n>   E: Sub-process /usr/bin/dpkg returned an error code (1)\n>   A package failed to install.  Trying to recover:\n>   Setting up nova-common (2012.2-0ubuntu5~cloud0) ...\n>   usermod: no changes\n>   2013-01-04 01:43:27 DEBUG nova.utils [-] backend <module\n> 'nova.db.sqlalchemy.migration' from\n> '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.pyc'> from\n> (pid=4922) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:494\n>   Command failed, please check log for more info\n>   2013-01-04 01:43:27 CRITICAL nova [-] fixed_ips_backup.instance_id may\n> not be NULL\n>   2013-01-04 01:43:27 TRACE nova Traceback (most recent call last):\n>   2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1400,\n> in <module>\n>   2013-01-04 01:43:27 TRACE nova     main()\n>   2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 1387,\n> in main\n>   2013-01-04 01:43:27 TRACE nova     fn(*fn_args, **fn_kwargs)\n>   2013-01-04 01:43:27 TRACE nova   File \"/usr/bin/nova-manage\", line 756,\n> in sync\n>   2013-01-04 01:43:27 TRACE nova     return migration.db_sync(version)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 32, in db_sync\n>   2013-01-04 01:43:27 TRACE nova     return IMPL.db_sync(version=version)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line\n> 79, in db_sync\n>   2013-01-04 01:43:27 TRACE nova     return\n> versioning_api.upgrade(get_engine(), repository, version)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in\n> upgrade\n>   2013-01-04 01:43:27 TRACE nova     return _migrate(url, repository,\n> version, upgrade=True, err=err, **opts)\n>   2013-01-04 01:43:27 TRACE nova   File \"<string>\", line 2, in _migrate\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line\n> 44, in patched_with_engine\n>   2013-01-04 01:43:27 TRACE nova     return f(*a, **kw)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in\n> _migrate\n>   2013-01-04 01:43:27 TRACE nova     schema.runchange(ver, change,\n> changeset.step)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91,\n> in runchange\n>   2013-01-04 01:43:27 TRACE nova     change.run(self.engine, step)\n>   2013-01-04 01:43:27 TRACE nova   File\n> \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/sql.py\", line\n> 41, in run\n>   2013-01-04 01:43:27 TRACE nova     dbapi.executescript(text)\n>   2013-01-04 01:43:27 TRACE nova IntegrityError:\n> fixed_ips_backup.instance_id may not be NULL\n>   2013-01-04 01:43:27 TRACE nova\n>   dpkg: error processing nova-common (--configure):\n>    subprocess installed post-installation script returned error exit\n> status 1\n>   dpkg: dependency problems prevent configuration of nova-api-metadata:\n>    nova-api-metadata depends on nova-common (= 2012.2-0ubuntu5~cloud0);\n> however:\n>     Package nova-common is not configured yet.\n>   dpkg: error processing nova-api-metadata (--configure):\n>    dependency problems - leaving unconfigured\n>   Errors were encountered while processing:\n>    nova-common\n>    nova-api-metadata\n>\n>\n>   The corruption is happening with nova-compute-kvm as well.\n>\n>   The release and repository information is as follows:\n>\n>   root@folsom-compute:~# lsb_release -a\n>   No LSB modules are available.\n>   Distributor ID: Ubuntu\n>   Description:    Ubuntu 12.04.1 LTS\n>   Release:        12.04\n>   Codename:       precise\n>   root@folsom-compute:~# cat //etc/apt/sources.list.d/cloud-archive.list\n>   deb http://ubuntu-cloud.archive.canonical.com/ubuntuprecise-updates/folsom main\n>\n>\n>   I appreciate any help in fixing this issue.\n>\n>   Thanks,\n>   Srini\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/1095988/+subscriptions\n>\n", 
            "date_created": "2013-01-14 20:18:57+00:00", 
            "author": "https://api.launchpad.net/1.0/~robert-x7y-deactivatedaccount"
        }
    ], 
    "closed": "2013-01-14 10:15:33.323598+00:00"
}