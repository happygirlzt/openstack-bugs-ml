{
    "status": "Invalid", 
    "last_updated": "2013-11-14 23:37:42.638590+00:00", 
    "description": "This is likely due to some patches I'm testing, so probably not due to upstream code.  Original description included below for completeness.\n\nSorry for the noise...\n\nChris\n\n\n\n\n\nI'm running devstack, running havana with a couple of unrelated local tweaks.\n\nI was playing with the instance group affinity stuff, trying to boot 4 instances at a time.  It was unable to boot up all the instances due to a lack of RAM on the compute node.\n\nNow when I run \"nova list\", I get:\n\n\u00a0ERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-aaecebbc-6074-495d-8b21-5822c5a4b5db)\n\nThe logs in nova-api are as follows:\n\n2013-11-13 22:25:08.179 DEBUG routes.middleware [-] Matched GET /6c1cae5b7bce4fb4bb6e5a280e8bcab3/servers/detail from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-11-13 22:25:08.180 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/detail', defaults: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x49bd450>} from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-11-13 22:25:08.180 DEBUG routes.middleware [-] Match dict: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x49bd450>, 'project_id': u'6c1cae5b7bce4fb4bb6e5a280e8bcab3'} from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-11-13 22:25:08.180 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] No Content-Type provided in request from (pid=17745) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:835\n2013-11-13 22:25:08.181 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Calling method <bound method Controller.detail of <nova.api.openstack.compute.servers.Controller object at 0x47d26d0>> from (pid=17745) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:962\n2013-11-13 22:25:08.182 DEBUG nova.compute.api [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Searching by: {'deleted': False, 'project_id': u'6c1cae5b7bce4fb4bb6e5a280e8bcab3'} from (pid=17745) get_all /opt/stack/nova/nova/compute/api.py:1695\n2013-11-13 22:25:08.224 ERROR nova.api.openstack [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Caught error: 'instance_type_memory_mb'\n2013-11-13 22:25:08.224 TRACE nova.api.openstack Traceback (most recent call last):\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 119, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 571, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 938, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     content_type, body, accept)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 502, in detail\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 579, in _get_servers\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     response = self._view_builder.detail(req, instance_list)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 126, in detail\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self._list_view(self.show, request, instances)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 130, in _list_view\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     server_list = [func(request, server)[\"server\"] for server in servers]\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 98, in show\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     \"flavor\": self._get_flavor(request, instance),\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 186, in _get_flavor\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     instance_type = flavors.extract_flavor(instance)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/flavors.py\", line 282, in extract_flavor\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     instance_type[key] = type_fn(sys_meta[type_key])\n2013-11-13 22:25:08.224 TRACE nova.api.openstack KeyError: 'instance_type_memory_mb'\n2013-11-13 22:25:08.224 TRACE nova.api.openstack\n2013-11-13 22:25:08.225 INFO nova.api.openstack [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] http://192.168.2.109:8774/v2/6c1cae5b7bce4fb4bb6e5a280e8bcab3/servers/detail returned with HTTP 500\n2013-11-13 22:25:08.226 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=17745) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1224", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 2, 
    "link": "https://bugs.launchpad.net/nova/+bug/1251446", 
    "owner": "None", 
    "id": 1251446, 
    "index": 5553, 
    "openned": "2013-11-14 22:07:54.933683+00:00", 
    "created": "2013-11-14 22:07:54.933683+00:00", 
    "title": "HTTP 500 error when running 'nova list' after running out of RAM on compute node", 
    "comments": [
        {
            "content": "I'm running devstack, running havana with a couple of unrelated local tweaks.\n\nI was playing with the instance group affinity stuff, trying to boot 4 instances at a time.  It was unable to boot up all the instances due to a lack of RAM on the compute node.\n\nNow when I run \"nova list\", I get:\n\n ERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-aaecebbc-6074-495d-8b21-5822c5a4b5db)\n\nThe logs in nova-api are as follows:\n\n2013-11-13 22:25:08.179 DEBUG routes.middleware [-] Matched GET /6c1cae5b7bce4fb4bb6e5a280e8bcab3/servers/detail from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-11-13 22:25:08.180 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/detail', defaults: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x49bd450>} from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-11-13 22:25:08.180 DEBUG routes.middleware [-] Match dict: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x49bd450>, 'project_id': u'6c1cae5b7bce4fb4bb6e5a280e8bcab3'} from (pid=17745) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-11-13 22:25:08.180 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] No Content-Type provided in request from (pid=17745) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:835\n2013-11-13 22:25:08.181 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Calling method <bound method Controller.detail of <nova.api.openstack.compute.servers.Controller object at 0x47d26d0>> from (pid=17745) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:962\n2013-11-13 22:25:08.182 DEBUG nova.compute.api [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Searching by: {'deleted': False, 'project_id': u'6c1cae5b7bce4fb4bb6e5a280e8bcab3'} from (pid=17745) get_all /opt/stack/nova/nova/compute/api.py:1695\n2013-11-13 22:25:08.224 ERROR nova.api.openstack [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Caught error: 'instance_type_memory_mb'\n2013-11-13 22:25:08.224 TRACE nova.api.openstack Traceback (most recent call last):\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 119, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 571, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 938, in __call__\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     content_type, body, accept)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 502, in detail\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 579, in _get_servers\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     response = self._view_builder.detail(req, instance_list)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 126, in detail\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     return self._list_view(self.show, request, instances)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 130, in _list_view\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     server_list = [func(request, server)[\"server\"] for server in servers]\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 98, in show\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     \"flavor\": self._get_flavor(request, instance),\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/views/servers.py\", line 186, in _get_flavor\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     instance_type = flavors.extract_flavor(instance)\n2013-11-13 22:25:08.224 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/flavors.py\", line 282, in extract_flavor\n2013-11-13 22:25:08.224 TRACE nova.api.openstack     instance_type[key] = type_fn(sys_meta[type_key])\n2013-11-13 22:25:08.224 TRACE nova.api.openstack KeyError: 'instance_type_memory_mb'\n2013-11-13 22:25:08.224 TRACE nova.api.openstack \n2013-11-13 22:25:08.225 INFO nova.api.openstack [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] http://192.168.2.109:8774/v2/6c1cae5b7bce4fb4bb6e5a280e8bcab3/servers/detail returned with HTTP 500\n2013-11-13 22:25:08.226 DEBUG nova.api.openstack.wsgi [req-aaecebbc-6074-495d-8b21-5822c5a4b5db admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=17745) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1224", 
            "date_created": "2013-11-14 22:07:54.933683+00:00", 
            "author": "https://api.launchpad.net/1.0/~cbf123"
        }, 
        {
            "content": "Never mind, seems like the stuff I thought was unrelated was in fact related.", 
            "date_created": "2013-11-14 23:36:17.984367+00:00", 
            "author": "https://api.launchpad.net/1.0/~cbf123"
        }
    ], 
    "closed": "2013-11-14 23:36:03.280754+00:00"
}