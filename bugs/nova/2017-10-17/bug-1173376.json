{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:43:10.543927+00:00", 
    "description": "After a live migration, we see the following instance data:\n\n[root@z3-9-5-127-161 nova]# nova show aix_mig_109\n+-------------------------------------+-------------------------------------------------------------------------+\n| Property                            | Value                                                                   |\n+-------------------------------------+-------------------------------------------------------------------------+\n| OS-EXT-STS:task_state               | None                                                                    |\n| image                               | aix (cee63b35-a5e7-4f3c-ab04-5f52d288d743)                              |\n| max_vcpus                           | 4.00                                                                    |\n| OS-EXT-STS:vm_state                 | active                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | nova-z3-9-5-127-161-0000002a                                            |\n| cpu_utilization                     | 0.2                                                                     |\n| flavor                              | f59f51106a0738a6e827dc1abb74b8ca (93887940-b41c-4859-9000-1abbf6000352) |\n| id                                  | fe546877-872d-442f-be31-84a0d0c2b80e                                    |\n| security_groups                     | [{u'name': u'default'}]                                                 |\n| user_id                             | 0ab4f16656dd418fac86f9893f65ec13                                        |\n| pva network                         | 10.32.74.109                                                            |\n| OS-DCF:diskConfig                   | MANUAL                                                                  |\n| vcpus                               | 0.10                                                                    |\n| accessIPv4                          |                                                                         |\n| accessIPv6                          |                                                                         |\n| progress                            | 0                                                                       |\n| OS-EXT-STS:power_state              | 1                                                                       |\n| OS-EXT-AZ:availability_zone         | nova                                                                    |\n| metadata                            | {}                                                                      |\n| status                              | ACTIVE                                                                  |\n| updated                             | 2013-04-25T21:42:40Z                                                    |\n| hostId                              | f10a414b4a0b02c51051fea9f4c51697ade6b34a84248bd3ca535416                |\n| OS-EXT-SRV-ATTR:host                | pva138                                                                  |\n| memory_mode                         | dedicated                                                               |\n| key_name                            | None                                                                    |\n| vcpu_mode                           | shared                                                                  |\n| min_memory_mb                       | 512                                                                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | pva137                                                                  |\n| name                                | aix_mig_109                                                             |\n| created                             | 2013-04-25T21:22:12Z                                                    |\n| tenant_id                           | f8fabb7a96d24e4e97d0a2926576a90a                                        |\n| min_vcpus                           | 0.10                                                                    |\n| memory_mb                           | 512                                                                     |\n| health_status                       | {u'health_value': u'OK'}                                                |\n| max_memory_mb                       | 4096                                                                    |\n+-------------------------------------+-------------------------------------------------------------------------+\n\nNote that host and hypervisor_hostname no longer match (and they should in this case).  It appears the hypervisor_hostname was not updated after the live migration.", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1173376", 
    "owner": "https://api.launchpad.net/1.0/~bnemec", 
    "id": 1173376, 
    "index": 3372, 
    "openned": "2013-04-26 20:44:11.542156+00:00", 
    "created": "2013-04-26 20:44:11.542156+00:00", 
    "title": "The hypervisor_hostname is not updated after live migration", 
    "comments": [
        {
            "content": "After a live migration, we see the following instance data:\n\n[root@z3-9-5-127-161 nova]# nova show aix_mig_109\n+-------------------------------------+-------------------------------------------------------------------------+\n| Property                            | Value                                                                   |\n+-------------------------------------+-------------------------------------------------------------------------+\n| OS-EXT-STS:task_state               | None                                                                    |\n| image                               | aix (cee63b35-a5e7-4f3c-ab04-5f52d288d743)                              |\n| max_vcpus                           | 4.00                                                                    |\n| OS-EXT-STS:vm_state                 | active                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | nova-z3-9-5-127-161-0000002a                                            |\n| cpu_utilization                     | 0.2                                                                     |\n| flavor                              | f59f51106a0738a6e827dc1abb74b8ca (93887940-b41c-4859-9000-1abbf6000352) |\n| id                                  | fe546877-872d-442f-be31-84a0d0c2b80e                                    |\n| security_groups                     | [{u'name': u'default'}]                                                 |\n| user_id                             | 0ab4f16656dd418fac86f9893f65ec13                                        |\n| pva network                         | 10.32.74.109                                                            |\n| OS-DCF:diskConfig                   | MANUAL                                                                  |\n| vcpus                               | 0.10                                                                    |\n| accessIPv4                          |                                                                         |\n| accessIPv6                          |                                                                         |\n| progress                            | 0                                                                       |\n| OS-EXT-STS:power_state              | 1                                                                       |\n| OS-EXT-AZ:availability_zone         | nova                                                                    |\n| metadata                            | {}                                                                      |\n| status                              | ACTIVE                                                                  |\n| updated                             | 2013-04-25T21:42:40Z                                                    |\n| hostId                              | f10a414b4a0b02c51051fea9f4c51697ade6b34a84248bd3ca535416                |\n| OS-EXT-SRV-ATTR:host                | pva138                                                                  |\n| memory_mode                         | dedicated                                                               |\n| key_name                            | None                                                                    |\n| vcpu_mode                           | shared                                                                  |\n| min_memory_mb                       | 512                                                                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | pva137                                                                  |\n| name                                | aix_mig_109                                                             |\n| created                             | 2013-04-25T21:22:12Z                                                    |\n| tenant_id                           | f8fabb7a96d24e4e97d0a2926576a90a                                        |\n| min_vcpus                           | 0.10                                                                    |\n| memory_mb                           | 512                                                                     |\n| health_status                       | {u'health_value': u'OK'}                                                |\n| max_memory_mb                       | 4096                                                                    |\n+-------------------------------------+-------------------------------------------------------------------------+\n\nNote that host and hypervisor_hostname no longer match (and they should in this case).  It appears the hypervisor_hostname was not update after the live migration.", 
            "date_created": "2013-04-26 20:44:11.542156+00:00", 
            "author": "https://api.launchpad.net/1.0/~bnemec"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/27604", 
            "date_created": "2013-04-26 22:25:42.505256+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/27604\nCommitted: http://github.com/openstack/nova/commit/8c8e44cf37be9c6a9f418e923c9ff16df8619832\nSubmitter: Jenkins\nBranch:    master\n\ncommit 8c8e44cf37be9c6a9f418e923c9ff16df8619832\nAuthor: Ben Nemec <email address hidden>\nDate:   Tue Mar 19 03:14:10 2013 +0000\n\n    Update hypervisor_hostname after live migration\n    \n    After a live migration, the OS-EXT-SRV-ATTR:hypervisor_hostname\n    attribute of the instance is not updated correctly.  This change\n    adds a parameter to the call to _instance_update that fixes the\n    problem.\n    \n    Fixes bug 1173376\n    \n    Change-Id: I40f1ead2d93c7a9979a914e0fb96e3e5bb287b48\n", 
            "date_created": "2013-05-04 20:14:35.645359+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/28311", 
            "date_created": "2013-05-06 15:17:01.004329+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/28311\nCommitted: http://github.com/openstack/nova/commit/158f00329163f65df4d0f0c56b8ed72c81359447\nSubmitter: Jenkins\nBranch:    stable/grizzly\n\ncommit 158f00329163f65df4d0f0c56b8ed72c81359447\nAuthor: Ben Nemec <email address hidden>\nDate:   Tue Mar 19 03:14:10 2013 +0000\n\n    Update hypervisor_hostname after live migration\n    \n    After a live migration, the OS-EXT-SRV-ATTR:hypervisor_hostname\n    attribute of the instance is not updated correctly.  This change\n    adds a parameter to the call to _instance_update that fixes the\n    problem.\n    \n    Fixes bug 1173376\n    \n    Change-Id: I40f1ead2d93c7a9979a914e0fb96e3e5bb287b48\n    (cherry picked from commit 8c8e44cf37be9c6a9f418e923c9ff16df8619832)\n", 
            "date_created": "2013-05-31 02:17:33.430518+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-05-29 10:21:46.087094+00:00"
}