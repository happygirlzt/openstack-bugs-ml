{
    "status": "Invalid", 
    "last_updated": "2013-10-01 13:30:34.325180+00:00", 
    "description": "Hi,\n\nRunning on Devstack from the current master (1st of October), I create an instance named \"\u042f\u043d\u0434\u0435\u043a\u0441\" using the dashboard.\n\n\nNow, when I visit the dashboard to list instances, it gives:\n\n\"\"\"\nError: Unable to retrieve instances.\n\"\"\"\n\nHowever, I can see in the instance summary and quota summary in launch instances table that the instance does appear to exist in some form:\n\nInstance Name \tVCPUs \tDisk \tRAM \tUptime\n\u042f\u043d\u0434\u0435\u043a\u0441\t1\t20\t2GB\t3 minutes\n\n\nif i do a virsh list, I can see the instance running\n\nError logs from apache2:\n\n\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] RESP: [500] {'date': 'Tue, 01 Oct 2013 07:58:09 GMT', 'content-length': '128', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-053e05a5-36c5-4329-bd1a-157ef8d8e021'}\n[Tue Oct 01 07:58:09 2013] [error] RESP BODY: {\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] \\x1b[31;1mRecoverable error: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-053e05a5-36c5-4329-bd1a-157ef8d8e021)\\x1b[0m\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/limits?reserved=1 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] RESP: [200] {'date': 'Tue, 01 Oct 2013 07:58:10 GMT', 'content-length': '1310', 'content-type': 'application/json', 'x-compute-request-id': 'req-364f4484-b381-4b0b-a53e-8a9d5aa045c6'}\n[Tue Oct 01 07:58:10 2013] [error] RESP BODY: {\"limits\": {\"rate\": [{\"regex\": \".*\", \"limit\": [{\"next-available\": \"2013-10-01T07:48:25Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 119, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"PUT\", \"remaining\": 120, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"DELETE\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*\"}, {\"regex\": \"^/servers\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*/servers\"}, {\"regex\": \".*changes-since.*\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*changes-since*\"}, {\"regex\": \"^/os-fping\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 12, \"value\": 12}], \"uri\": \"*/os-fping\"}], \"absolute\": {\"maxServerMeta\": 128, \"maxPersonality\": 5, \"maxImageMeta\": 128, \"maxPersonalitySize\": 10240, \"maxSecurityGroupRules\": 20, \"maxTotalKeypairs\": 100, \"totalRAMUsed\": 2048, \"totalInstancesUsed\": 1, \"maxSecurityGroups\": 10, \"totalFloatingIpsUsed\": 0, \"maxTotalCores\": 20, \"totalSecurityGroupsUsed\": 0, \"maxTotalFloatingIps\": 10, \"maxTotalInstances\": 10, \"totalCoresUsed\": 1, \"maxTotalRAMSize\": 51200}}}\n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/limits?reserved=1 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] RESP: [200] {'date': 'Tue, 01 Oct 2013 07:58:10 GMT', 'content-length': '1310', 'content-type': 'application/json', 'x-compute-request-id': 'req-923177f1-ba14-4a49-a398-90172fbf8018'}\n[Tue Oct 01 07:58:10 2013] [error] RESP BODY: {\"limits\": {\"rate\": [{\"regex\": \".*\", \"limit\": [{\"next-available\": \"2013-10-01T07:48:25Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 119, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"PUT\", \"remaining\": 120, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"DELETE\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*\"}, {\"regex\": \"^/servers\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*/servers\"}, {\"regex\": \".*changes-since.*\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*changes-since*\"}, {\"regex\": \"^/os-fping\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 12, \"value\": 12}], \"uri\": \"*/os-fping\"}], \"absolute\": {\"maxServerMeta\": 128, \"maxPersonality\": 5, \"maxImageMeta\": 128, \"maxPersonalitySize\": 10240, \"maxSecurityGroupRules\": 20, \"maxTotalKeypairs\": 100, \"totalRAMUsed\": 2048, \"totalInstancesUsed\": 1, \"maxSecurityGroups\": 10, \"totalFloatingIpsUsed\": 0, \"maxTotalCores\": 20, \"totalSecurityGroupsUsed\": 0, \"maxTotalFloatingIps\": 10, \"maxTotalInstances\": 10, \"totalCoresUsed\": 1, \"maxTotalRAMSize\": 51200}}}\n[Tue Oct 01 07:58:10 2013] [error] \n\n\nNova-api logs:\n\n2013-10-01 01:05:39.823 INFO nova.osapi_compute.wsgi.server [-] (867) accepted ('192.168.122.228', 43406)\n\n2013-10-01 01:05:39.829 DEBUG keystoneclient.middleware.auth_token [-] Authenticating user token from (pid=867) __call__ /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:448\n2013-10-01 01:05:39.831 DEBUG keystoneclient.middleware.auth_token [-] Removing headers from request environment: X-Identity-Status,X-Domain-Id,X-Domain-Name,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-User-Id,X-User-Name,X-User-Domain-Id,X-User-Domain-Name,X-Roles,X-Service-Catalog,X-User,X-Tenant-Id,X-Tenant-Name,X-Tenant,X-Role from (pid=867) _remove_auth_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:506\n2013-10-01 01:05:39.832 INFO keystoneclient.middleware.auth_token [-] Auth Token proceeding with requested v2.0 apis\n2013-10-01 01:05:40.269 DEBUG keystoneclient.middleware.auth_token [-] Storing 8e2e0267d6989d08687b403724569c50 token in memcache from (pid=867) _cache_put /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:953\n2013-10-01 01:05:40.278 DEBUG nova.utils [-] Reloading cached file /etc/nova/policy.json from (pid=867) read_cached_file /opt/stack/nova/nova/utils.py:814\n2013-10-01 01:05:43.379 DEBUG routes.middleware [-] Matched GET /bdb4f15bac494ef89df7f691334a757f/servers/detail from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-10-01 01:05:43.380 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/detail', defaults: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x2af2a90>} from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-10-01 01:05:43.381 DEBUG routes.middleware [-] Match dict: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x2af2a90>, 'project_id': u'bdb4f15bac494ef89df7f691334a757f'} from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-10-01 01:05:43.383 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] No Content-Type provided in request from (pid=867) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:800\n2013-10-01 01:05:43.385 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Calling method <bound method Controller.detail of <nova.api.openstack.compute.servers.Controller object at 0x28589d0>> from (pid=867) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:927\n2013-10-01 01:05:43.388 DEBUG nova.compute.api [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Searching by: {'deleted': False, u'project_id': u'bdb4f15bac494ef89df7f691334a757f', u'limit': u'21'} from (pid=867) get_all /opt/stack/nova/nova/compute/api.py:1518\n2013-10-01 01:05:43.391 DEBUG nova.openstack.common.lockutils [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Got semaphore \"dbapi_backend\" for method \"__get_backend\"... from (pid=867) inner /opt/stack/nova/nova/openstack/common/lockutils.py:191\n2013-10-01 01:05:44.636 ERROR object [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Error setting Instance.display_name\n2013-10-01 01:05:44.636 TRACE object Traceback (most recent call last):\n2013-10-01 01:05:44.636 TRACE object   File \"/opt/stack/nova/nova/objects/base.py\", line 51, in setter\n2013-10-01 01:05:44.636 TRACE object     return setattr(self, get_attrname(name), typefn(value))\n2013-10-01 01:05:44.636 TRACE object   File \"/opt/stack/nova/nova/objects/utils.py\", line 61, in str_or_none\n2013-10-01 01:05:44.636 TRACE object     return str(val)\n2013-10-01 01:05:44.636 TRACE object UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.636 TRACE object \n2013-10-01 01:05:44.640 ERROR nova.api.openstack [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Caught error: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack Traceback (most recent call last):\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 110, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 461, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 903, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     content_type, body, accept)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 962, in _process_stack\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1043, in dispatch\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 481, in detail\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 543, in _get_servers\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     want_objects=True)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1569, in get_all\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     marker=marker)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1596, in _get_instances_by_filters\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     limit=limit, marker=marker, expected_attrs=fields)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 92, in wrapper\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     result = fn(cls, context, *args, **kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 452, in get_by_filters\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     expected_attrs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 427, in _make_instance_list\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     expected_attrs=expected_attrs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 219, in _from_db_object\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     instance[field] = db_inst[field]\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 354, in __setitem__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     setattr(self, name, value)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 51, in setter\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return setattr(self, get_attrname(name), typefn(value))\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/utils.py\", line 61, in str_or_none\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return str(val)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack \n2013-10-01 01:05:44.665 INFO nova.api.openstack [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 returned with HTTP 500\n2013-10-01 01:05:44.670 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=867) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1186\n2013-10-01 01:05:44.684 INFO nova.osapi_compute.wsgi.server [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] 192.168.122.228 \"GET /v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 HTTP/1.1\" status: 500 len: 335 time: 4.8567691\n\n2013-10-01 01:05:45.081 INFO nova.osapi_compute.wsgi.server [-] (867) accepted ('192.168.122.228', 43411)", 
    "tags": [
        "unified-objects"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1233544", 
    "owner": "None", 
    "id": 1233544, 
    "index": 5406, 
    "openned": "2013-10-01 08:06:29.838311+00:00", 
    "created": "2013-10-01 08:06:15.081988+00:00", 
    "title": "Error listing instances after naming an instance in Russian", 
    "comments": [
        {
            "content": "Hi,\n\nRunning on Devstack from the current master (1st of October), I create an instance named \"\u042f\u043d\u0434\u0435\u043a\u0441\" using the dashboard.\n\n\nNow, when I visit the dashboard to list instances, it gives:\n\n\"\"\"\nError: Unable to retrieve instances.\n\"\"\"\n\nHowever, I can see in the instance summary and quota summary in launch instances table that the instance does appear to exist in some form:\n\nInstance Name \tVCPUs \tDisk \tRAM \tUptime\n\u042f\u043d\u0434\u0435\u043a\u0441\t1\t20\t2GB\t3 minutes\n\n\nif i do a virsh list, I can see the instance running\n\nError logs from apache2:\n\n\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] RESP: [500] {'date': 'Tue, 01 Oct 2013 07:58:09 GMT', 'content-length': '128', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-053e05a5-36c5-4329-bd1a-157ef8d8e021'}\n[Tue Oct 01 07:58:09 2013] [error] RESP BODY: {\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] \\x1b[31;1mRecoverable error: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-053e05a5-36c5-4329-bd1a-157ef8d8e021)\\x1b[0m\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:09 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/limits?reserved=1 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:09 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] RESP: [200] {'date': 'Tue, 01 Oct 2013 07:58:10 GMT', 'content-length': '1310', 'content-type': 'application/json', 'x-compute-request-id': 'req-364f4484-b381-4b0b-a53e-8a9d5aa045c6'}\n[Tue Oct 01 07:58:10 2013] [error] RESP BODY: {\"limits\": {\"rate\": [{\"regex\": \".*\", \"limit\": [{\"next-available\": \"2013-10-01T07:48:25Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 119, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"PUT\", \"remaining\": 120, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"DELETE\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*\"}, {\"regex\": \"^/servers\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*/servers\"}, {\"regex\": \".*changes-since.*\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*changes-since*\"}, {\"regex\": \"^/os-fping\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:09Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 12, \"value\": 12}], \"uri\": \"*/os-fping\"}], \"absolute\": {\"maxServerMeta\": 128, \"maxPersonality\": 5, \"maxImageMeta\": 128, \"maxPersonalitySize\": 10240, \"maxSecurityGroupRules\": 20, \"maxTotalKeypairs\": 100, \"totalRAMUsed\": 2048, \"totalInstancesUsed\": 1, \"maxSecurityGroups\": 10, \"totalFloatingIpsUsed\": 0, \"maxTotalCores\": 20, \"totalSecurityGroupsUsed\": 0, \"maxTotalFloatingIps\": 10, \"maxTotalInstances\": 10, \"totalCoresUsed\": 1, \"maxTotalRAMSize\": 51200}}}\n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] REQ: curl -i http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/limits?reserved=1 -X GET -H \"X-Auth-Project-Id: bdb4f15bac494ef89df7f691334a757f\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: 8e2e0267d6989d08687b403724569c50\"\n[Tue Oct 01 07:58:10 2013] [error] \n[Tue Oct 01 07:58:10 2013] [error] RESP: [200] {'date': 'Tue, 01 Oct 2013 07:58:10 GMT', 'content-length': '1310', 'content-type': 'application/json', 'x-compute-request-id': 'req-923177f1-ba14-4a49-a398-90172fbf8018'}\n[Tue Oct 01 07:58:10 2013] [error] RESP BODY: {\"limits\": {\"rate\": [{\"regex\": \".*\", \"limit\": [{\"next-available\": \"2013-10-01T07:48:25Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 119, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"PUT\", \"remaining\": 120, \"value\": 120}, {\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"DELETE\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*\"}, {\"regex\": \"^/servers\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"POST\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*/servers\"}, {\"regex\": \".*changes-since.*\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 120, \"value\": 120}], \"uri\": \"*changes-since*\"}, {\"regex\": \"^/os-fping\", \"limit\": [{\"next-available\": \"2013-10-01T07:58:10Z\", \"unit\": \"MINUTE\", \"verb\": \"GET\", \"remaining\": 12, \"value\": 12}], \"uri\": \"*/os-fping\"}], \"absolute\": {\"maxServerMeta\": 128, \"maxPersonality\": 5, \"maxImageMeta\": 128, \"maxPersonalitySize\": 10240, \"maxSecurityGroupRules\": 20, \"maxTotalKeypairs\": 100, \"totalRAMUsed\": 2048, \"totalInstancesUsed\": 1, \"maxSecurityGroups\": 10, \"totalFloatingIpsUsed\": 0, \"maxTotalCores\": 20, \"totalSecurityGroupsUsed\": 0, \"maxTotalFloatingIps\": 10, \"maxTotalInstances\": 10, \"totalCoresUsed\": 1, \"maxTotalRAMSize\": 51200}}}\n[Tue Oct 01 07:58:10 2013] [error] \n\n\nNova-api logs:\n\n2013-10-01 01:05:39.823 INFO nova.osapi_compute.wsgi.server [-] (867) accepted ('192.168.122.228', 43406)\n\n2013-10-01 01:05:39.829 DEBUG keystoneclient.middleware.auth_token [-] Authenticating user token from (pid=867) __call__ /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:448\n2013-10-01 01:05:39.831 DEBUG keystoneclient.middleware.auth_token [-] Removing headers from request environment: X-Identity-Status,X-Domain-Id,X-Domain-Name,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-User-Id,X-User-Name,X-User-Domain-Id,X-User-Domain-Name,X-Roles,X-Service-Catalog,X-User,X-Tenant-Id,X-Tenant-Name,X-Tenant,X-Role from (pid=867) _remove_auth_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:506\n2013-10-01 01:05:39.832 INFO keystoneclient.middleware.auth_token [-] Auth Token proceeding with requested v2.0 apis\n2013-10-01 01:05:40.269 DEBUG keystoneclient.middleware.auth_token [-] Storing 8e2e0267d6989d08687b403724569c50 token in memcache from (pid=867) _cache_put /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:953\n2013-10-01 01:05:40.278 DEBUG nova.utils [-] Reloading cached file /etc/nova/policy.json from (pid=867) read_cached_file /opt/stack/nova/nova/utils.py:814\n2013-10-01 01:05:43.379 DEBUG routes.middleware [-] Matched GET /bdb4f15bac494ef89df7f691334a757f/servers/detail from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-10-01 01:05:43.380 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/detail', defaults: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x2af2a90>} from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-10-01 01:05:43.381 DEBUG routes.middleware [-] Match dict: {'action': u'detail', 'controller': <nova.api.openstack.wsgi.Resource object at 0x2af2a90>, 'project_id': u'bdb4f15bac494ef89df7f691334a757f'} from (pid=867) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-10-01 01:05:43.383 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] No Content-Type provided in request from (pid=867) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:800\n2013-10-01 01:05:43.385 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Calling method <bound method Controller.detail of <nova.api.openstack.compute.servers.Controller object at 0x28589d0>> from (pid=867) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:927\n2013-10-01 01:05:43.388 DEBUG nova.compute.api [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Searching by: {'deleted': False, u'project_id': u'bdb4f15bac494ef89df7f691334a757f', u'limit': u'21'} from (pid=867) get_all /opt/stack/nova/nova/compute/api.py:1518\n2013-10-01 01:05:43.391 DEBUG nova.openstack.common.lockutils [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Got semaphore \"dbapi_backend\" for method \"__get_backend\"... from (pid=867) inner /opt/stack/nova/nova/openstack/common/lockutils.py:191\n2013-10-01 01:05:44.636 ERROR object [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Error setting Instance.display_name\n2013-10-01 01:05:44.636 TRACE object Traceback (most recent call last):\n2013-10-01 01:05:44.636 TRACE object   File \"/opt/stack/nova/nova/objects/base.py\", line 51, in setter\n2013-10-01 01:05:44.636 TRACE object     return setattr(self, get_attrname(name), typefn(value))\n2013-10-01 01:05:44.636 TRACE object   File \"/opt/stack/nova/nova/objects/utils.py\", line 61, in str_or_none\n2013-10-01 01:05:44.636 TRACE object     return str(val)\n2013-10-01 01:05:44.636 TRACE object UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.636 TRACE object \n2013-10-01 01:05:44.640 ERROR nova.api.openstack [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Caught error: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack Traceback (most recent call last):\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 110, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 461, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 903, in __call__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     content_type, body, accept)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 962, in _process_stack\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1043, in dispatch\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 481, in detail\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=True)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 543, in _get_servers\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     want_objects=True)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1569, in get_all\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     marker=marker)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1596, in _get_instances_by_filters\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     limit=limit, marker=marker, expected_attrs=fields)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 92, in wrapper\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     result = fn(cls, context, *args, **kwargs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 452, in get_by_filters\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     expected_attrs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 427, in _make_instance_list\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     expected_attrs=expected_attrs)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/instance.py\", line 219, in _from_db_object\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     instance[field] = db_inst[field]\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 354, in __setitem__\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     setattr(self, name, value)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/base.py\", line 51, in setter\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return setattr(self, get_attrname(name), typefn(value))\n2013-10-01 01:05:44.640 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/utils.py\", line 61, in str_or_none\n2013-10-01 01:05:44.640 TRACE nova.api.openstack     return str(val)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128)\n2013-10-01 01:05:44.640 TRACE nova.api.openstack \n2013-10-01 01:05:44.665 INFO nova.api.openstack [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] http://192.168.122.228:8774/v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 returned with HTTP 500\n2013-10-01 01:05:44.670 DEBUG nova.api.openstack.wsgi [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=867) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1186\n2013-10-01 01:05:44.684 INFO nova.osapi_compute.wsgi.server [req-a64d3d5b-1deb-4d75-bd40-ba94700708d0 admin demo] 192.168.122.228 \"GET /v2/bdb4f15bac494ef89df7f691334a757f/servers/detail?project_id=bdb4f15bac494ef89df7f691334a757f&limit=21 HTTP/1.1\" status: 500 len: 335 time: 4.8567691\n\n2013-10-01 01:05:45.081 INFO nova.osapi_compute.wsgi.server [-] (867) accepted ('192.168.122.228', 43411)", 
            "date_created": "2013-10-01 08:06:15.081988+00:00", 
            "author": "https://api.launchpad.net/1.0/~fifieldt"
        }, 
        {
            "content": "Note this commit:\n\nhttps://github.com/openstack/nova/commit/b738ea5cea487204b4853ef9c4362562e2c13f0e", 
            "date_created": "2013-10-01 13:26:21.319976+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "The line numbers in the stack trace above aren't lining up for me on the latest code on master:\n\n2013-10-01 01:05:44.640 TRACE nova.api.openstack File \"/opt/stack/nova/nova/objects/utils.py\", line 61, in str_or_none", 
            "date_created": "2013-10-01 13:27:02.355495+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Given the stack trace, you're not on trunk code, see the diff in this patch (the commit is noted above):\n\nhttps://review.openstack.org/#/c/48526/3/nova/objects/utils.py\n\nThe problem is already fixed if you're on the very latest.  Maybe restack?", 
            "date_created": "2013-10-01 13:29:13.799881+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Horizon shouldn't be in the 'affected projects' list, so I just invalidated it.", 
            "date_created": "2013-10-01 13:30:32.690191+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ], 
    "closed": "2013-10-01 13:28:43.754335+00:00"
}