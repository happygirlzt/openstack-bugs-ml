{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:23:42.719157+00:00", 
    "description": "As the following recreate scenario shows, a server's \"updated\" timestamp is not being change when a network is added.  This same problem occurs when a network is removed.  As a result, the server is not returned as being changed when using the \"changes-since\" parameter to collect all server changes since a particular time.\n\nI am using OpenStack Grizzly with quantum.\n\n[root@node1 \u02dc]# nova show TTY_LINUX_TEST\n+-------------------------------------+----------------------------------------------------------+\n| Property                            | Value                                                    |\n+-------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                   |\n| OS-EXT-SRV-ATTR:host                | node1                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | node1                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000000cb                                        |\n| OS-EXT-STS:power_state              | 1                                                        |\n| OS-EXT-STS:task_state               | None                                                     |\n| OS-EXT-STS:vm_state                 | active                                                   |\n| accessIPv4                          |                                                          |\n| accessIPv6                          |                                                          |\n| config_drive                        |                                                          |\n| created                             | 2013-02-21T15:19:13Z                                     |\n| flavor                              | m1.tiny (1)                                              |\n| hostId                              | 4d86eac0d9f375223c54f8b1712c2f4238f072db86afc6ef9cdb1096 |\n| id                                  | 1e928526-a106-4971-beb7-73ade9dbd239                     |\n| image                               | MyBackup_backup (b9a92225-3951-4cf5-8e80-2800c73df77e)   |\n| key_name                            | None                                                     |\n| metadata                            | {}                                                       |\n| name                                | TTY_LINUX_TEST                                       |\n| network1 network                    |                                                          |\n| progress                            | 0                                                        |\n| security_groups                     | [{u'name': u'default'}]                                  |\n| status                              | ACTIVE                                                   |\n| tenant_id                           | aef72eee4db84e84b3dc8f507d2a9e63                         |\n| updated                             | 2013-02-21T15:19:46Z                                     |\n| user_id                             | e6de9232200b4597b9f230a9dd126bf8                         |\n+-------------------------------------+----------------------------------------------------------+\n[root@node1 \u02dc]#\n[root@node1 \u02dc]# quantum net-list\n+--------------------------------------+----------+--------------------------------------------------+\n| id                                   | name     | subnets                                          |\n+--------------------------------------+----------+--------------------------------------------------+\n| d26101d5-5c11-470b-babc-6e2564965d29 | network1 | 8eaedfc9-2f7e-410e-b2a9-9e02be9ca020 10.0.1.0/24 |\n+--------------------------------------+----------+--------------------------------------------------+\n[root@node1 \u02dc]# nova add-fixed-ip TTY_LINUX_TEST d26101d5-5c11-470b-babc-6e2564965d29\n[root@node1 \u02dc]# nova show TTY_LINUX_TEST\n+-------------------------------------+----------------------------------------------------------+\n| Property                            | Value                                                    |\n+-------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                   |\n| OS-EXT-SRV-ATTR:host                | node1                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | node1                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000000cb                                        |\n| OS-EXT-STS:power_state              | 1                                                        |\n| OS-EXT-STS:task_state               | None                                                     |\n| OS-EXT-STS:vm_state                 | active                                                   |\n| accessIPv4                          |                                                          |\n| accessIPv6                          |                                                          |\n| config_drive                        |                                                          |\n| created                             | 2013-02-21T15:19:13Z                                     |\n| flavor                              | m1.tiny (1)                                              |\n| hostId                              | 4d86eac0d9f375223c54f8b1712c2f4238f072db86afc6ef9cdb1096 |\n| id                                  | 1e928526-a106-4971-beb7-73ade9dbd239                     |\n| image                               | MyBackup_backup (b9a92225-3951-4cf5-8e80-2800c73df77e)   |\n| key_name                            | None                                                     |\n| metadata                            | {}                                                       |\n| name                                | TTY_LINUX_TEST                                       |\n| network1 network                    | 10.0.1.4                                                 |\n| progress                            | 0                                                        |\n| security_groups                     | [{u'name': u'default'}]                                  |\n| status                              | ACTIVE                                                   |\n| tenant_id                           | aef72eee4db84e84b3dc8f507d2a9e63                         |\n| updated                             | 2013-02-21T15:19:46Z                                     |\n| user_id                             | e6de9232200b4597b9f230a9dd126bf8                         |\n+-------------------------------------+----------------------------------------------------------+", 
    "tags": [
        "low-hanging-fruit"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1143466", 
    "owner": "https://api.launchpad.net/1.0/~russellb", 
    "id": 1143466, 
    "index": 796, 
    "openned": "2013-03-04 04:09:07.111927+00:00", 
    "created": "2013-03-04 04:09:07.111927+00:00", 
    "title": "Server update timestamp not changed when networks are added or removed", 
    "comments": [
        {
            "content": "As the following recreate scenario shows, a server's \"updated\" timestamp is not being change when a network is added.  This same problem occurs when a network is removed.  As a result, the server is not returned as being changed when using the \"changes-since\" parameter to collect all server changes since a particular time.\n\nI am using OpenStack Grizzly with quantum.\n\n[root@node1 \u02dc]# nova show TTY_LINUX_TEST\n+-------------------------------------+----------------------------------------------------------+\n| Property                            | Value                                                    |\n+-------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                   |\n| OS-EXT-SRV-ATTR:host                | node1                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | node1                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000000cb                                        |\n| OS-EXT-STS:power_state              | 1                                                        |\n| OS-EXT-STS:task_state               | None                                                     |\n| OS-EXT-STS:vm_state                 | active                                                   |\n| accessIPv4                          |                                                          |\n| accessIPv6                          |                                                          |\n| config_drive                        |                                                          |\n| created                             | 2013-02-21T15:19:13Z                                     |\n| flavor                              | m1.tiny (1)                                              |\n| hostId                              | 4d86eac0d9f375223c54f8b1712c2f4238f072db86afc6ef9cdb1096 |\n| id                                  | 1e928526-a106-4971-beb7-73ade9dbd239                     |\n| image                               | MyBackup_backup (b9a92225-3951-4cf5-8e80-2800c73df77e)   |\n| key_name                            | None                                                     |\n| metadata                            | {}                                                       |\n| name                                | TTY_LINUX_TEST                                       |\n| network1 network                    |                                                          |\n| progress                            | 0                                                        |\n| security_groups                     | [{u'name': u'default'}]                                  |\n| status                              | ACTIVE                                                   |\n| tenant_id                           | aef72eee4db84e84b3dc8f507d2a9e63                         |\n| updated                             | 2013-02-21T15:19:46Z                                     |\n| user_id                             | e6de9232200b4597b9f230a9dd126bf8                         |\n+-------------------------------------+----------------------------------------------------------+\n[root@node1 \u02dc]#\n[root@node1 \u02dc]# quantum net-list\n+--------------------------------------+----------+--------------------------------------------------+\n| id                                   | name     | subnets                                          |\n+--------------------------------------+----------+--------------------------------------------------+\n| d26101d5-5c11-470b-babc-6e2564965d29 | network1 | 8eaedfc9-2f7e-410e-b2a9-9e02be9ca020 10.0.1.0/24 |\n+--------------------------------------+----------+--------------------------------------------------+\n[root@node1 \u02dc]# nova add-fixed-ip TTY_LINUX_TEST d26101d5-5c11-470b-babc-6e2564965d29\n[root@node1 \u02dc]# nova show TTY_LINUX_TEST\n+-------------------------------------+----------------------------------------------------------+\n| Property                            | Value                                                    |\n+-------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                                                   |\n| OS-EXT-SRV-ATTR:host                | node1                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | node1                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-000000cb                                        |\n| OS-EXT-STS:power_state              | 1                                                        |\n| OS-EXT-STS:task_state               | None                                                     |\n| OS-EXT-STS:vm_state                 | active                                                   |\n| accessIPv4                          |                                                          |\n| accessIPv6                          |                                                          |\n| config_drive                        |                                                          |\n| created                             | 2013-02-21T15:19:13Z                                     |\n| flavor                              | m1.tiny (1)                                              |\n| hostId                              | 4d86eac0d9f375223c54f8b1712c2f4238f072db86afc6ef9cdb1096 |\n| id                                  | 1e928526-a106-4971-beb7-73ade9dbd239                     |\n| image                               | MyBackup_backup (b9a92225-3951-4cf5-8e80-2800c73df77e)   |\n| key_name                            | None                                                     |\n| metadata                            | {}                                                       |\n| name                                | TTY_LINUX_TEST                                       |\n| network1 network                    | 10.0.1.4                                                 |\n| progress                            | 0                                                        |\n| security_groups                     | [{u'name': u'default'}]                                  |\n| status                              | ACTIVE                                                   |\n| tenant_id                           | aef72eee4db84e84b3dc8f507d2a9e63                         |\n| updated                             | 2013-02-21T15:19:46Z                                     |\n| user_id                             | e6de9232200b4597b9f230a9dd126bf8                         |\n+-------------------------------------+----------------------------------------------------------+", 
            "date_created": "2013-03-04 04:09:07.111927+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhhuabj"
        }, 
        {
            "content": "An easy fix for this would be to simply update the instance in the add-fixed-ip remove-fixed-ip code path.", 
            "date_created": "2013-03-04 22:42:47.890269+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/23501", 
            "date_created": "2013-03-05 01:46:31.078965+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/23501\nCommitted: http://github.com/openstack/nova/commit/5d83d23cb7f7e95fedbd339405d93bc3841049ea\nSubmitter: Jenkins\nBranch:    master\n\ncommit 5d83d23cb7f7e95fedbd339405d93bc3841049ea\nAuthor: Russell Bryant <email address hidden>\nDate:   Mon Mar 4 20:35:27 2013 -0500\n\n    Bump instance updated_at on network change.\n    \n    Update add-fixed-ip and remove-fixed-ip code paths to update the\n    updated_at field of the instance, since from the user's perspective\n    through the API, they have made a change to the instance's\n    configuration.  In that case, it makes sense to expect that the\n    updated_at field gets changed.\n    \n    Fix bug 1143466.\n    \n    Change-Id: Icfd7d0b1b556795d94a22c1719727f8c9fc744f0\n", 
            "date_created": "2013-03-05 04:08:35.009099+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-03-20 16:15:58.345178+00:00"
}