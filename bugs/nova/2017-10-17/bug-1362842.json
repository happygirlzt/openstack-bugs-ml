{
    "status": "Invalid", 
    "last_updated": "2015-04-01 14:11:27.001079+00:00", 
    "description": "When detaching a volume from an instance, and then re-attaching that same volume to that same instance nova fails to attach.\n\nError:\n2014-08-28 13:36:02.134 \u001b[01;31mERROR nova.virt.block_device [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[01;31mDriver failed to attach volume a2439dd9-49ef-4ce0-8b91-155ff6ecd3b0 at /dev/vdb\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m\n2014-08-28 13:36:02.136 \u001b[00;32mDEBUG nova.volume.cinder [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mCinderclient connection created using URL: http://10.50.142.1:8776/v1/a7b96ab31ea340ff8a6c900c7b3449ba\u001b[00m \u001b[00;33mfrom (pid=36738) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:238\u001b[00m\n2014-08-28 13:36:02.748 \u001b[01;31mERROR nova.compute.manager [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[01;31mFailed to attach a2439dd9-49ef-4ce0-8b91-155ff6ecd3b0 at /dev/vdb\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    do_check_attach=False, do_driver_attach=True)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    ret_val = method(obj, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    connector)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m\n2014-08-28 13:36:02.750 \u001b[00;32mDEBUG nova.volume.cinder [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mCinderclient connection created using URL: http://10.50.142.1:8776/v1/a7b96ab31ea340ff8a6c900c7b3449ba\u001b[00m \u001b[00;33mfrom (pid=36738) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:238\u001b[00m\n2014-08-28 13:36:02.888 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mGot semaphore \"compute_resources\"\u001b[00m \u001b[00;33mfrom (pid=36738) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:263\u001b[00m\n2014-08-28 13:36:02.888 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mGot semaphore / lock \"update_usage\"\u001b[00m \u001b[00;33mfrom (pid=36738) inner /opt/stack/nova/nova/openstack/common/lockutils.py:324\u001b[00m\n2014-08-28 13:36:02.914 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mReleased semaphore \"compute_resources\"\u001b[00m \u001b[00;33mfrom (pid=36738) lock /opt/stack/nova/nova/openstack/common/lockutils.py:291\u001b[00m\n2014-08-28 13:36:02.914 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mSemaphore / lock released \"update_usage\"\u001b[00m \u001b[00;33mfrom (pid=36738) inner /opt/stack/nova/nova/openstack/common/lockutils.py:328\u001b[00m\n2014-08-28 13:36:02.917 \u001b[01;31mERROR oslo.messaging.rpc.dispatcher [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31mException during message handling: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    incoming.message))\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return self._do_dispatch(endpoint, method, ctxt, args)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    result = getattr(endpoint, method)(ctxt, **new_args)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 412, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    payload)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return f(self, context, *args, **kw)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 296, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    pass\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 282, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 324, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    kwargs['instance'], e, sys.exc_info())\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 312, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4358, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    bdm.destroy(context)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4355, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return self._attach_volume(context, instance, driver_bdm)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4376, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    self.volume_api.unreserve_volume(context, bdm.volume_id)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    do_check_attach=False, do_driver_attach=True)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    ret_val = method(obj, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    connector)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m\n2014-08-28 13:36:02.921 \u001b[01;31mERROR oslo.messaging._drivers.common [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31mReturning exception internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device to caller\u001b[00m\n2014-08-28 13:36:02.922 \u001b[01;31mERROR oslo.messaging._drivers.common [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31m['Traceback (most recent call last):\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 412, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\\n    payload)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\\n    return f(self, context, *args, **kw)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 296, in decorated_function\\n    pass\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 282, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 324, in decorated_function\\n    kwargs[\\'instance\\'], e, sys.exc_info())\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 312, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4358, in attach_volume\\n    bdm.destroy(context)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4355, in attach_volume\\n    return self._attach_volume(context, instance, driver_bdm)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4376, in _attach_volume\\n    self.volume_api.unreserve_volume(context, bdm.volume_id)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\\n    do_check_attach=False, do_driver_attach=True)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\\n    ret_val = method(obj, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\\n    connector)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\\n    device_type=self[\\'device_type\\'], encryption=encryption)\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\\n    self._disconnect_volume(connection_info, disk_dev)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\\n    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\\n    if ret == -1: raise libvirtError (\\'virDomainAttachDeviceFlags() failed\\', dom=self)\\n', \"libvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\\n\"]\u001b[00m", 
    "tags": [], 
    "importance": "Low", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1362842", 
    "owner": "None", 
    "id": 1362842, 
    "index": 1348, 
    "openned": "2014-08-28 22:24:04.771327+00:00", 
    "created": "2014-08-28 22:24:04.771327+00:00", 
    "title": "Can't re-attach volumes to instances", 
    "comments": [
        {
            "content": "When detaching a volume from an instance, and then re-attaching that same volume to that same instance nova fails to attach.\n\nError:\n2014-08-28 13:36:02.134 \u001b[01;31mERROR nova.virt.block_device [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[01;31mDriver failed to attach volume a2439dd9-49ef-4ce0-8b91-155ff6ecd3b0 at /dev/vdb\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.134 TRACE nova.virt.block_device \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m\n2014-08-28 13:36:02.136 \u001b[00;32mDEBUG nova.volume.cinder [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mCinderclient connection created using URL: http://10.50.142.1:8776/v1/a7b96ab31ea340ff8a6c900c7b3449ba\u001b[00m \u001b[00;33mfrom (pid=36738) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:238\u001b[00m\n2014-08-28 13:36:02.748 \u001b[01;31mERROR nova.compute.manager [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[01;31mFailed to attach a2439dd9-49ef-4ce0-8b91-155ff6ecd3b0 at /dev/vdb\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    do_check_attach=False, do_driver_attach=True)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    ret_val = method(obj, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    connector)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.748 TRACE nova.compute.manager \u001b[01;35m[instance: b813c603-6dad-44bd-acdb-76f1fd84899f] \u001b[00m\n2014-08-28 13:36:02.750 \u001b[00;32mDEBUG nova.volume.cinder [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mCinderclient connection created using URL: http://10.50.142.1:8776/v1/a7b96ab31ea340ff8a6c900c7b3449ba\u001b[00m \u001b[00;33mfrom (pid=36738) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:238\u001b[00m\n2014-08-28 13:36:02.888 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mGot semaphore \"compute_resources\"\u001b[00m \u001b[00;33mfrom (pid=36738) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:263\u001b[00m\n2014-08-28 13:36:02.888 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mGot semaphore / lock \"update_usage\"\u001b[00m \u001b[00;33mfrom (pid=36738) inner /opt/stack/nova/nova/openstack/common/lockutils.py:324\u001b[00m\n2014-08-28 13:36:02.914 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mReleased semaphore \"compute_resources\"\u001b[00m \u001b[00;33mfrom (pid=36738) lock /opt/stack/nova/nova/openstack/common/lockutils.py:291\u001b[00m\n2014-08-28 13:36:02.914 \u001b[00;32mDEBUG nova.openstack.common.lockutils [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[00;32m] \u001b[01;35m\u001b[00;32mSemaphore / lock released \"update_usage\"\u001b[00m \u001b[00;33mfrom (pid=36738) inner /opt/stack/nova/nova/openstack/common/lockutils.py:328\u001b[00m\n2014-08-28 13:36:02.917 \u001b[01;31mERROR oslo.messaging.rpc.dispatcher [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31mException during message handling: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\u001b[00m\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00mTraceback (most recent call last):\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    incoming.message))\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return self._do_dispatch(endpoint, method, ctxt, args)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    result = getattr(endpoint, method)(ctxt, **new_args)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 412, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    payload)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return f(self, context, *args, **kw)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 296, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    pass\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 282, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 324, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    kwargs['instance'], e, sys.exc_info())\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 312, in decorated_function\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return function(self, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4358, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    bdm.destroy(context)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4355, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    return self._attach_volume(context, instance, driver_bdm)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4376, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    self.volume_api.unreserve_volume(context, bdm.volume_id)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    do_check_attach=False, do_driver_attach=True)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    ret_val = method(obj, context, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    connector)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    device_type=self['device_type'], encryption=encryption)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    self._disconnect_volume(connection_info, disk_dev)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    six.reraise(self.type_, self.value, self.tb)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    rv = execute(f,*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    rv = meth(*args,**kwargs)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m    if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00mlibvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\n\u001b[01;31m2014-08-28 13:36:02.917 TRACE oslo.messaging.rpc.dispatcher \u001b[01;35m\u001b[00m\n2014-08-28 13:36:02.921 \u001b[01;31mERROR oslo.messaging._drivers.common [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31mReturning exception internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device to caller\u001b[00m\n2014-08-28 13:36:02.922 \u001b[01;31mERROR oslo.messaging._drivers.common [\u001b[01;36mreq-79e463d4-7e6d-4fce-8b04-e98de64d91a7 \u001b[00;36madmin admin\u001b[01;31m] \u001b[01;35m\u001b[01;31m['Traceback (most recent call last):\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 412, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\\n    payload)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\\n    return f(self, context, *args, **kw)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 296, in decorated_function\\n    pass\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 282, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 324, in decorated_function\\n    kwargs[\\'instance\\'], e, sys.exc_info())\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 312, in decorated_function\\n    return function(self, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4358, in attach_volume\\n    bdm.destroy(context)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4355, in attach_volume\\n    return self._attach_volume(context, instance, driver_bdm)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4376, in _attach_volume\\n    self.volume_api.unreserve_volume(context, bdm.volume_id)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _attach_volume\\n    do_check_attach=False, do_driver_attach=True)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 46, in wrapped\\n    ret_val = method(obj, context, *args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 261, in attach\\n    connector)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/virt/block_device.py\", line 252, in attach\\n    device_type=self[\\'device_type\\'], encryption=encryption)\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1315, in attach_volume\\n    self._disconnect_volume(connection_info, disk_dev)\\n', '  File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\\n    six.reraise(self.type_, self.value, self.tb)\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1306, in attach_volume\\n    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\\n    if ret == -1: raise libvirtError (\\'virDomainAttachDeviceFlags() failed\\', dom=self)\\n', \"libvirtError: internal error unable to execute QEMU command 'device_add': Duplicate ID 'virtio-disk1' for device\\n\"]\u001b[00m", 
            "date_created": "2014-08-28 22:24:04.771327+00:00", 
            "author": "https://api.launchpad.net/1.0/~jason-khabra"
        }, 
        {
            "content": "I cannot reproduce the bug you described above using the latest code in nova.  Attaching and re-attaching a volume to the same instance works.  Could you specify the specific commands you used, the cinder backend you are using, environment setup, etc.?", 
            "date_created": "2014-09-03 01:56:29.157809+00:00", 
            "author": "https://api.launchpad.net/1.0/~thang-pham"
        }, 
        {
            "content": "environment: hp3PAR array and lefthand array using hp3PARFC, hp3PARISCSI, and lefthand drivers\n\nsteps:\n1. create a cinder volume(vol01)\n2. create a nova instance(inst01)\n3. attach volume to instance\n4. snapshot that volume\n5. create a volume from that snapshot(snapVol)\n6. create a second instance(inst02)\n6. detach the original volume(vol01) from the first instance(inst01)\n7.reattach the original volume(vol01) to the first instance(vol01)", 
            "date_created": "2014-09-05 23:28:17.695209+00:00", 
            "author": "https://api.launchpad.net/1.0/~jason-khabra"
        }, 
        {
            "content": "We actually have basically a test for this upstream, which works (most of the time). I wonder if you are not waiting long enough on the detach command (which is asyn iirc). Is this reproducable with open source volume backends?", 
            "date_created": "2014-09-10 12:18:15.662883+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "We need more extensive logs around n-cpu and cinder to get to the bottom of this, because the important part is probably around the detach and not the attach.", 
            "date_created": "2014-09-10 12:19:20.810045+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ], 
    "closed": "2015-04-01 14:11:24.788578+00:00"
}