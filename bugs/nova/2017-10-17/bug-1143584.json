{
    "status": "Fix Released", 
    "last_updated": "2013-04-11 19:54:43.267299+00:00", 
    "description": "Test steps:\n1. get tokens successfully:\ntoken:<1f0d9345795f413380c662934277cf67>\ntenant:<0dfe9d0e4a9347a0a9553800ac8a05d9>\n\n2. do request for creating a network:\nPOST:http://9.181.137.197:8774/v2/0dfe9d0e4a9347a0a9553800ac8a05d9/os-networks\nbody:\n{\n    \"network\":\n       {\n            \"cidr\": \"9.71.105.0/24\",\n            \"label\": \"mynetwork\",\n            \"multi_host\": \"false\"\n        }\n}\nResults:\nReturn 500 error like \"{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\"\n1. check network list, find the network actually created successfully to add to list.\n2. why the task status is error? The error message from network.log as below:\n2013-01-28 13:54:10.755 ERROR nova.openstack.common.rpc.amqp [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Exception during message handling\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 282, in _process_data\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     ctxt.reply(rval, None, connection_pool=self.connection_pool)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 191, in reply\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     ending, log_failure)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 171, in msg_reply\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     conn.direct_send(msg_id, rpc_common.serialize_msg(msg))\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 124, in __exit__\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self._done()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 113, in _done\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.connection.reset()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 387, in reset\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.session.close()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in close\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 739, in close\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.sync(timeout=timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 730, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     snd.sync(timeout=timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 885, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     if not self._ewait(lambda: self.acked >= mno, timeout=timeout):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 799, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     result = self.session._ewait(lambda: self.error or predicate(), timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 566, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     result = self.connection._ewait(lambda: self.error or predicate(), timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 209, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.check_error()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 202, in check_error\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     raise self.error\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp InternalError: Traceback (most recent call last):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.engine.dispatch()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.process(ssn)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.send(snd, msg)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     body = enc(msg.content)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write_primitive(type, x)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     getattr(self, \"write_%s\" % type.NAME)(v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write_primitive(type, v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     getattr(self, \"write_%s\" % type.NAME)(v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     type = self.encoding(o)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     raise CodecException(\"no encoding for %r\" % obj)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp CodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp\n2013-01-28 13:54:11.402 INFO nova.openstack.common.rpc.impl_qpid [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Connected to AMQP server on localhost:5672\n2013-01-28 13:54:11.404 ERROR nova.openstack.common.rpc.common [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Returning exception Traceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\n    self.engine.dispatch()\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\n    self.process(ssn)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\n    self.send(snd, msg)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\n    body = enc(msg.content)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\n    sc.write_primitive(type, x)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n    getattr(self, \"write_%s\" % type.NAME)(v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\n    sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\n    sc.write_primitive(type, v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n    getattr(self, \"write_%s\" % type.NAME)(v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\n    type = self.encoding(o)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\n    raise CodecException(\"no encoding for %r\" % obj)\nCodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\n to caller\n2013-01-28 13:54:11.404 ERROR nova.openstack.common.rpc.common [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 282, in _process_data\\n    ctxt.reply(rval, None, connection_pool=self.connection_pool)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 191, in reply\\n    ending, log_failure)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 171, in msg_reply\\n    conn.direct_send(msg_id, rpc_common.serialize_msg(msg))\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 124, in __exit__\\n    self._done()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 113, in _done\\n    self.connection.reset()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 387, in reset\\n    self.session.close()\\n', '  File \"<string>\", line 6, in close\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 739, in close\\n    self.sync(timeout=timeout)\\n', '  File \"<string>\", line 6, in sync\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 730, in sync\\n    snd.sync(timeout=timeout)\\n', '  File \"<string>\", line 6, in sync\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 885, in sync\\n    if not self._ewait(lambda: self.acked >= mno, timeout=timeout):\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 799, in _ewait\\n    result = self.session._ewait(lambda: self.error or predicate(), timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 566, in _ewait\\n    result = self.connection._ewait(lambda: self.error or predicate(), timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 209, in _ewait\\n    self.check_error()\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 202, in check_error\\n    raise self.error\\n', 'InternalError: Traceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\\n    self.engine.dispatch()\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\\n    self.process(ssn)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\\n    self.send(snd, msg)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\\n    body = enc(msg.content)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\\n    sc.write_primitive(type, x)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\\n    getattr(self, \"write_%s\" % type.NAME)(v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\\n    sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\\n    sc.write_primitive(type, v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\\n    getattr(self, \"write_%s\" % type.NAME)(v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\\n    type = self.encoding(o)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\\n    raise CodecException(\"no encoding for %r\" % obj)\\nCodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\\n\\n']", 
    "tags": [
        "low-hanging-fruit"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1143584", 
    "owner": "https://api.launchpad.net/1.0/~zhhuabj", 
    "id": 1143584, 
    "index": 998, 
    "openned": "2013-03-04 05:23:23.872262+00:00", 
    "created": "2013-03-04 05:23:23.872262+00:00", 
    "title": "Creating network failed with message handling via REST API", 
    "comments": [
        {
            "content": "Test steps:\n1. get tokens successfully:\ntoken:<1f0d9345795f413380c662934277cf67>\ntenant:<0dfe9d0e4a9347a0a9553800ac8a05d9>\n\n2. do request for creating a network:\nPOST:http://9.181.137.197:8774/v2/0dfe9d0e4a9347a0a9553800ac8a05d9/os-networks\nbody:\n{\n    \"network\":\n       {\n            \"cidr\": \"9.71.105.0/24\",\n            \"label\": \"mynetwork\",\n            \"multi_host\": \"false\"\n        }\n}\nResults:\nReturn 500 error like \"{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\"\n1. check network list, find the network actually created successfully to add to list.\n2. why the task status is error? The error message from network.log as below:\n2013-01-28 13:54:10.755 ERROR nova.openstack.common.rpc.amqp [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Exception during message handling\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 282, in _process_data\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     ctxt.reply(rval, None, connection_pool=self.connection_pool)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 191, in reply\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     ending, log_failure)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 171, in msg_reply\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     conn.direct_send(msg_id, rpc_common.serialize_msg(msg))\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 124, in __exit__\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self._done()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 113, in _done\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.connection.reset()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 387, in reset\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.session.close()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in close\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 739, in close\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.sync(timeout=timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 730, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     snd.sync(timeout=timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"<string>\", line 6, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 885, in sync\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     if not self._ewait(lambda: self.acked >= mno, timeout=timeout):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 799, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     result = self.session._ewait(lambda: self.error or predicate(), timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 566, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     result = self.connection._ewait(lambda: self.error or predicate(), timeout)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 209, in _ewait\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.check_error()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 202, in check_error\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     raise self.error\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp InternalError: Traceback (most recent call last):\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.engine.dispatch()\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.process(ssn)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     self.send(snd, msg)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     body = enc(msg.content)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write_primitive(type, x)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     getattr(self, \"write_%s\" % type.NAME)(v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     sc.write_primitive(type, v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     getattr(self, \"write_%s\" % type.NAME)(v)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     type = self.encoding(o)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp     raise CodecException(\"no encoding for %r\" % obj)\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp CodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp\n2013-01-28 13:54:10.755 12667 TRACE nova.openstack.common.rpc.amqp\n2013-01-28 13:54:11.402 INFO nova.openstack.common.rpc.impl_qpid [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Connected to AMQP server on localhost:5672\n2013-01-28 13:54:11.404 ERROR nova.openstack.common.rpc.common [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] Returning exception Traceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\n    self.engine.dispatch()\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\n    self.process(ssn)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\n    self.send(snd, msg)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\n    body = enc(msg.content)\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\n    sc.write_primitive(type, x)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n    getattr(self, \"write_%s\" % type.NAME)(v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\n    sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\n    sc.write_primitive(type, v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\n    getattr(self, \"write_%s\" % type.NAME)(v)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\n    type = self.encoding(o)\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\n    raise CodecException(\"no encoding for %r\" % obj)\nCodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\n to caller\n2013-01-28 13:54:11.404 ERROR nova.openstack.common.rpc.common [req-43f72cf1-df74-4580-81da-90377b7b2d0c 5b8a7abfedb944b1987227ae12c0e16e 0dfe9d0e4a9347a0a9553800ac8a05d9] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 282, in _process_data\\n    ctxt.reply(rval, None, connection_pool=self.connection_pool)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 191, in reply\\n    ending, log_failure)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 171, in msg_reply\\n    conn.direct_send(msg_id, rpc_common.serialize_msg(msg))\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 124, in __exit__\\n    self._done()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 113, in _done\\n    self.connection.reset()\\n', '  File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 387, in reset\\n    self.session.close()\\n', '  File \"<string>\", line 6, in close\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 739, in close\\n    self.sync(timeout=timeout)\\n', '  File \"<string>\", line 6, in sync\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 730, in sync\\n    snd.sync(timeout=timeout)\\n', '  File \"<string>\", line 6, in sync\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 885, in sync\\n    if not self._ewait(lambda: self.acked >= mno, timeout=timeout):\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 799, in _ewait\\n    result = self.session._ewait(lambda: self.error or predicate(), timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 566, in _ewait\\n    result = self.connection._ewait(lambda: self.error or predicate(), timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 209, in _ewait\\n    self.check_error()\\n', '  File \"/usr/lib/python2.6/site-packages/qpid/messaging/endpoints.py\", line 202, in check_error\\n    raise self.error\\n', 'InternalError: Traceback (most recent call last):\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 511, in dispatch\\n    self.engine.dispatch()\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 817, in dispatch\\n    self.process(ssn)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1052, in process\\n    self.send(snd, msg)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/driver.py\", line 1263, in send\\n    body = enc(msg.content)\\n  File \"/usr/lib/python2.6/site-packages/qpid/messaging/message.py\", line 28, in encode\\n    sc.write_primitive(type, x)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\\n    getattr(self, \"write_%s\" % type.NAME)(v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 257, in write_map\\n    sc.write(string.joinfields(map(self._write_map_elem, m.keys(), m.values()), \"\"))\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 250, in _write_map_elem\\n    sc.write_primitive(type, v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 73, in write_primitive\\n    getattr(self, \"write_%s\" % type.NAME)(v)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 300, in write_list\\n    type = self.encoding(o)\\n  File \"/usr/lib/python2.6/site-packages/qpid/codec010.py\", line 59, in encoding\\n    raise CodecException(\"no encoding for %r\" % obj)\\nCodecException: no encoding for <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\\n\\n']", 
            "date_created": "2013-03-04 05:23:23.872262+00:00", 
            "author": "https://api.launchpad.net/1.0/~bjzhfan"
        }, 
        {
            "content": "This problem could be fixed by change \"return networks\" to \"return jsonutils.to_primitive(networks)\" in nova/network/manager.py def _do_create_networks() method.", 
            "date_created": "2013-03-04 05:27:49.903493+00:00", 
            "author": "https://api.launchpad.net/1.0/~bjzhfan"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/23529", 
            "date_created": "2013-03-05 10:16:35.251520+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/23529\nCommitted: http://github.com/openstack/nova/commit/b4d43b0d0c890ccb940862719c6b88a24029d44a\nSubmitter: Jenkins\nBranch:    master\n\ncommit b4d43b0d0c890ccb940862719c6b88a24029d44a\nAuthor: zhhuabj <email address hidden>\nDate:   Tue Mar 5 17:39:50 2013 +0800\n\n    Fix Network object encoding issue when using qpid\n    \n    When creating network via REST API will throw the exception\n    \"CodecException: no encoding for\n    <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\".\n    It only occurs when using qpid.\n    Fix this issue through using jsonutils.to_primitive method.\n    \n    Fix bug 1143584.\n    \n    Change-Id: I833aef451f8e3d5eaa246c19d67b2474a9d36910\n", 
            "date_created": "2013-03-09 01:42:56.962902+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/folsom\nReview: https://review.openstack.org/26225", 
            "date_created": "2013-04-05 14:18:22.238643+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/26225\nCommitted: http://github.com/openstack/nova/commit/975a312da9cb8f601e4ffb71ddfa934f5b06abe7\nSubmitter: Jenkins\nBranch:    stable/folsom\n\ncommit 975a312da9cb8f601e4ffb71ddfa934f5b06abe7\nAuthor: zhhuabj <email address hidden>\nDate:   Tue Mar 5 17:39:50 2013 +0800\n\n    Fix Network object encoding issue when using qpid\n    \n    When creating network via REST API will throw the exception\n    \"CodecException: no encoding for\n    <nova.db.sqlalchemy.models.Network object at 0x4a8ea10>\".\n    It only occurs when using qpid.\n    Fix this issue through using jsonutils.to_primitive method.\n    \n    Fix bug 1143584.\n    \n    Change-Id: I833aef451f8e3d5eaa246c19d67b2474a9d36910\n    (cherry picked from commit b4d43b0d0c890ccb940862719c6b88a24029d44a)\n", 
            "date_created": "2013-04-05 18:38:33.540845+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-03-20 16:07:18.572945+00:00"
}