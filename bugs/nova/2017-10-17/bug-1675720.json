{
    "status": "Invalid", 
    "last_updated": "2017-03-27 08:24:03.918500+00:00", 
    "description": "Description\n===========\nWhile run \"nova list\" to get instance list, NOVA report \"[root@ARCHS22K8144 httpd]# nova list\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-e08c4a96-d986-4250-8186-7d5974b0a1b5)\" randomly.\n\nSteps to reproduce\n==================\nfor i in `seq 0 100`; do echo ===========================$i; nova list; sleep 3; done\n\nExpected result\n===============\nit should list all instances successfully.\n\nActual result\n=============\nmost time it can list instances, but some time it report \"Unexpected API Error\".\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n# rpm -qa | grep nova\nopenstack-nova-common-14.0.3-1.el7.noarch\nopenstack-nova-console-14.0.3-1.el7.noarch\npython2-novaclient-6.0.0-1.el7.noarch\nopenstack-nova-novncproxy-14.0.3-1.el7.noarch\npython-nova-14.0.3-1.el7.noarch\nopenstack-nova-api-14.0.3-1.el7.noarch\nopenstack-nova-conductor-14.0.3-1.el7.noarch\nopenstack-nova-scheduler-14.0.3-1.el7.noarch\n\n2. Which hypervisor did you use?\n  Libvirt + KVM\n\n2. Which storage type did you use?\n   Ceph\n\n3. Which networking type did you use?\n   nova-network\n\nLogs & Configs\n==============\nnova.conf:\n[DEFAULT]\nauth_strategy=keystone\nmy_ip=23.10.10.4\nuse_neutron=true\nscheduler_default_filters=AllHostsFilter\nenabled_apis=osapi_compute,metadata\nfirewall_driver=nova.virt.firewall.NoopFirewallDriver\ndebug=true\nverbose=true\nrpc_backend=rabbit\n[api_database]\nconnection=mysql+pymysql://nova:open1sys@controller/nova_api\n[cinder]\nos_region_name=RegionOne\n[database]\nconnection=mysql+pymysql://nova:open1sys@controller/nova\n[glance]\napi_servers=http://23.10.10.254:9292\n[keystone_authtoken]\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = 23.10.10.4:11211,23.10.10.5:11211,23.10.10.6:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = nova\npassword = open1sys\n[neutron]\nurl = http://controller:9696\nauth_url = http://controller:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = open1sys\nservice_metadata_proxy = True\nmetadata_proxy_shared_secret = open1sys\n[oslo_concurrency]\nlock_path=/var/lib/nova/tmp\n[oslo_messaging_rabbit]\nrabbit_port=5672\nrabbit_hosts=23.10.10.4:5672,23.10.10.5:5672,23.10.10.6:5672\nrabbit_userid=openstack\nrabbit_password=open1sys\n[vnc]\nvncserver_listen=$my_ip\nvncserver_proxyclient_address=$my_ip\n\nnova-api.log:\n2017-03-24 03:14:54.618 3460 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:54.619 3460 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0018852\n2017-03-24 03:14:56.620 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42466) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:56.623 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:56.624 3452 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0018470\n2017-03-24 03:14:56.776 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42472) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:57.558 3452 INFO nova.osapi_compute.wsgi.server [req-2f8b6a98-a927-4073-8322-c73c282078f2 - - - - -] 23.10.10.1 \"GET /v2.1/b4c6cddfe2f74046a33784d01ded0942 HTTP/1.1\" status: 404 len: 331 time: 0.7801268\n2017-03-24 03:14:57.572 3452 DEBUG nova.api.openstack.wsgi [req-8d59ffbe-f6b2-4ed3-aa08-cd9ac9f0e401 - - - - -] Calling method '<bound method VersionsController.show of <nova.api.openstack.compute.versionsV21.VersionsController object at 0x7a978d0>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:57.573 3452 INFO nova.osapi_compute.wsgi.server [req-8d59ffbe-f6b2-4ed3-aa08-cd9ac9f0e401 - - - - -] 23.10.10.1 \"GET /v2.1/ HTTP/1.1\" status: 200 len: 717 time: 0.0126722\n2017-03-24 03:14:57.950 3452 DEBUG nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Calling method '<bound method ServersController.detail of <nova.api.openstack.compute.servers.ServersController object at 0x794c3d0>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:57.956 3452 DEBUG nova.compute.api [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Searching by: {'deleted': False, 'project_id': u'b4c6cddfe2f74046a33784d01ded0942'} get_all /usr/lib/python2.7/site-packages/nova/compute/api.py:2245\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Unexpected exception in API method\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 207,\nin detail\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 347,\nin _get_servers\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 2313, in get_all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 324, in get_by_filters\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     build_requests = cls.get_all(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 239, in get_all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     db_build_reqs = cls._get_all_from_db(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 894, in\nwrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return fn(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 234, in _get_all_from_db\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     db_reqs = query.all()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2588, in all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return list(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2736, in __iter__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self._execute_and_instances(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2749, in _execute_and_instances\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     close_with_result=True)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2740, in _connection_from_session\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 905, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     execution_options=execution_options)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 910, in _connection_for_bind\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     engine, execution_options)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 334, in _connection_for_bind\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     conn = bind.contextual_connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2041, in contextual_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 92, in __init__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.dispatch.engine_connect(self, self.__branch)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/event/attr.py\", line 256, in __call__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fn(*args, **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 80, in _connect_ping_listener\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     connection.scalar(select([1]))\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 844, in scalar\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.execute(object, *multiparams, **params).scalar()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1078, in _execute_context\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     None, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1334, in _handle_dbapi_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._autorollback()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 791, in _autorollback\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._root._rollback_impl()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 662, in _rollback_impl\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.dispatch.rollback(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/event/attr.py\", line 256, in __call__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fn(*args, **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/exc_filters.py\", line 496, in pop_exc_tx\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     conn.info.pop(ROLLBACK_CAUSE_KEY, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 425, in info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.connection.info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 318, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._handle_dbapi_exception(e, None, None, None, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1266, in _handle_dbapi_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     exc_info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 316, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self._revalidate_connection()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 393, in _revalidate_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.__connection = self.engine.raw_connection(_connection=self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2080, in _wrap_pool_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     util.reraise(*sys.exc_info())\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return fn()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 485, in checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     rec.checkin()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 482, in checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     dbapi_connection = rec.get_connection()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 563, in get_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.connection = self.__connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 607, in __connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/__init__.py\", line 90, in Connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 694, in __init__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 916, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._request_authentication()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 1124, in _request_authentication\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 991, in _read_packet\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     packet.check_error()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 393, in check_error\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions\n2017-03-24 03:14:57.972 3452 INFO nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'>\n2017-03-24 03:14:57.973 3452 DEBUG nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1044\n2017-03-24 03:14:57.975 3452 INFO nova.osapi_compute.wsgi.server [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] 23.10.10.1 \"GET /v2.1/b4c6cddfe2f74046a33784d01ded0942/servers/detail HTTP/1.1\" status: 500 len: 574 time: 0.0400600\n2017-03-24 03:14:58.626 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42502) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:58.629 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:58.631 3452 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0024850\n2017-03-24 03:15:00.632 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42530) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:15:00.634 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1675720", 
    "owner": "None", 
    "id": 1675720, 
    "index": 8022, 
    "openned": "2017-03-24 10:28:46.326075+00:00", 
    "created": "2017-03-24 10:28:46.326075+00:00", 
    "title": "NOVA report 'Unexpected API Error' on Newton while run 'Nova list'", 
    "comments": [
        {
            "content": "Description\n===========\nWhile run \"nova list\" to get instance list, NOVA report \"[root@ARCHS22K8144 httpd]# nova list\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-e08c4a96-d986-4250-8186-7d5974b0a1b5)\" randomly.\n\nSteps to reproduce\n==================\nfor i in `seq 0 100`; do echo ===========================$i; nova list; sleep 3; done\n\nExpected result\n===============\nit should list all instances successfully.\n\nActual result\n=============\nmost time it can list instances, but some time it report \"Unexpected API Error\".\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n# rpm -qa | grep nova\nopenstack-nova-common-14.0.3-1.el7.noarch\nopenstack-nova-console-14.0.3-1.el7.noarch\npython2-novaclient-6.0.0-1.el7.noarch\nopenstack-nova-novncproxy-14.0.3-1.el7.noarch\npython-nova-14.0.3-1.el7.noarch\nopenstack-nova-api-14.0.3-1.el7.noarch\nopenstack-nova-conductor-14.0.3-1.el7.noarch\nopenstack-nova-scheduler-14.0.3-1.el7.noarch\n\n2. Which hypervisor did you use?\n  Libvirt + KVM\n\n2. Which storage type did you use?\n   Ceph\n\n3. Which networking type did you use?\n   nova-network\n\nLogs & Configs\n==============\nnova.conf:\n[DEFAULT]\nauth_strategy=keystone\nmy_ip=23.10.10.4\nuse_neutron=true\nscheduler_default_filters=AllHostsFilter\nenabled_apis=osapi_compute,metadata\nfirewall_driver=nova.virt.firewall.NoopFirewallDriver\ndebug=true\nverbose=true\nrpc_backend=rabbit\n[api_database]\nconnection=mysql+pymysql://nova:open1sys@controller/nova_api\n[cinder]\nos_region_name=RegionOne\n[database]\nconnection=mysql+pymysql://nova:open1sys@controller/nova\n[glance]\napi_servers=http://23.10.10.254:9292\n[keystone_authtoken]\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = 23.10.10.4:11211,23.10.10.5:11211,23.10.10.6:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = nova\npassword = open1sys\n[neutron]\nurl = http://controller:9696\nauth_url = http://controller:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = open1sys\nservice_metadata_proxy = True\nmetadata_proxy_shared_secret = open1sys\n[oslo_concurrency]\nlock_path=/var/lib/nova/tmp\n[oslo_messaging_rabbit]\nrabbit_port=5672\nrabbit_hosts=23.10.10.4:5672,23.10.10.5:5672,23.10.10.6:5672\nrabbit_userid=openstack\nrabbit_password=open1sys\n[vnc]\nvncserver_listen=$my_ip\nvncserver_proxyclient_address=$my_ip\n\nnova-api.log:\n2017-03-24 03:14:54.618 3460 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:54.619 3460 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0018852\n2017-03-24 03:14:56.620 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42466) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:56.623 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:56.624 3452 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0018470\n2017-03-24 03:14:56.776 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42472) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:57.558 3452 INFO nova.osapi_compute.wsgi.server [req-2f8b6a98-a927-4073-8322-c73c282078f2 - - - - -] 23.10.10.1 \"GET /v2.1/b4c6cddfe2f74046a33784d01ded0942 HTTP/1.1\" status: 404 len: 331 time: 0.7801268\n2017-03-24 03:14:57.572 3452 DEBUG nova.api.openstack.wsgi [req-8d59ffbe-f6b2-4ed3-aa08-cd9ac9f0e401 - - - - -] Calling method '<bound method VersionsController.show of <nova.api.openstack.compute.versionsV21.VersionsController object at 0x7a978d0>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:57.573 3452 INFO nova.osapi_compute.wsgi.server [req-8d59ffbe-f6b2-4ed3-aa08-cd9ac9f0e401 - - - - -] 23.10.10.1 \"GET /v2.1/ HTTP/1.1\" status: 200 len: 717 time: 0.0126722\n2017-03-24 03:14:57.950 3452 DEBUG nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Calling method '<bound method ServersController.detail of <nova.api.openstack.compute.servers.ServersController object at 0x794c3d0>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:57.956 3452 DEBUG nova.compute.api [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Searching by: {'deleted': False, 'project_id': u'b4c6cddfe2f74046a33784d01ded0942'} get_all /usr/lib/python2.7/site-packages/nova/compute/api.py:2245\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Unexpected exception in API method\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 207,\nin detail\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 347,\nin _get_servers\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 2313, in get_all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 324, in get_by_filters\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     build_requests = cls.get_all(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 239, in get_all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     db_build_reqs = cls._get_all_from_db(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 894, in\nwrapper\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return fn(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 234, in _get_all_from_db\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     db_reqs = query.all()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2588, in all\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return list(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2736, in __iter__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self._execute_and_instances(context)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2749, in _execute_and_instances\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     close_with_result=True)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2740, in _connection_from_session\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 905, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     execution_options=execution_options)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 910, in _connection_for_bind\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     engine, execution_options)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/orm/session.py\", line 334, in _connection_for_bind\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     conn = bind.contextual_connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2041, in contextual_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 92, in __init__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.dispatch.engine_connect(self, self.__branch)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/event/attr.py\", line 256, in __call__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fn(*args, **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 80, in _connect_ping_listener\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     connection.scalar(select([1]))\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 844, in scalar\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.execute(object, *multiparams, **params).scalar()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1078, in _execute_context\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     None, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1334, in _handle_dbapi_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._autorollback()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 791, in _autorollback\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._root._rollback_impl()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 662, in _rollback_impl\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.dispatch.rollback(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/event/attr.py\", line 256, in __call__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fn(*args, **kw)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/exc_filters.py\", line 496, in pop_exc_tx\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     conn.info.pop(ROLLBACK_CAUSE_KEY, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 425, in info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.connection.info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 318, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._handle_dbapi_exception(e, None, None, None, None)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1266, in _handle_dbapi_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     exc_info\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 316, in connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self._revalidate_connection()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 393, in _revalidate_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.__connection = self.engine.raw_connection(_connection=self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2080, in _wrap_pool_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     util.reraise(*sys.exc_info())\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return fn()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 485, in checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     rec.checkin()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 482, in checkout\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     dbapi_connection = rec.get_connection()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 563, in get_connection\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.connection = self.__connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 607, in __connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/__init__.py\", line 90, in Connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 694, in __init__\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self.connect()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 916, in connect\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     self._request_authentication()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 1124, in _request_authentication\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 991, in _read_packet\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     packet.check_error()\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 393, in check_error\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\n2017-03-24 03:14:57.967 3452 ERROR nova.api.openstack.extensions\n2017-03-24 03:14:57.972 3452 INFO nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'>\n2017-03-24 03:14:57.973 3452 DEBUG nova.api.openstack.wsgi [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1044\n2017-03-24 03:14:57.975 3452 INFO nova.osapi_compute.wsgi.server [req-e08c4a96-d986-4250-8186-7d5974b0a1b5 - - - - -] 23.10.10.1 \"GET /v2.1/b4c6cddfe2f74046a33784d01ded0942/servers/detail HTTP/1.1\" status: 500 len: 574 time: 0.0400600\n2017-03-24 03:14:58.626 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42502) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:14:58.629 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636\n2017-03-24 03:14:58.631 3452 INFO nova.osapi_compute.wsgi.server [-] 23.10.10.1 \"OPTIONS / HTTP/1.0\" status: 200 len: 497 time: 0.0024850\n2017-03-24 03:15:00.632 3452 DEBUG nova.osapi_compute.wsgi.server [req-c89693a9-2ee6-4e90-9341-a41b19ebbee6 - - - - -] (3452) accepted ('23.10.10.1', 42530) server /usr/lib/python2.7/site-packages/eventlet/wsgi.py:867\n2017-03-24 03:15:00.634 3452 DEBUG nova.api.openstack.wsgi [-] Calling method '<bound method Versions.index of <nova.api.openstack.compute.versions.Versions object at 0x57a3c10>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:636", 
            "date_created": "2017-03-24 10:28:46.326075+00:00", 
            "author": "https://api.launchpad.net/1.0/~mytxyang215"
        }, 
        {
            "content": "", 
            "date_created": "2017-03-24 10:28:46.326075+00:00", 
            "author": "https://api.launchpad.net/1.0/~mytxyang215"
        }, 
        {
            "content": "looks like you have something related to db , so the mysql operation has some exception, this *is* internal error so you need check that first...", 
            "date_created": "2017-03-27 08:23:02.574694+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }
    ], 
    "closed": "2017-03-27 08:24:01.380711+00:00"
}