{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:43:21.331906+00:00", 
    "description": "Evacuate the VM to another compute host when the old compute host is down.  But there are some exceptions which blocked the evacuate operation.\n\n2013-05-06 13:14:31.718 ERROR nova.openstack.common.rpc.amqp [req-f6296094-ae7e-4f87-9c72-d834877c6133 588c69d00419438389d7a38f882a3015 48417f97dd794c509b35ab860b80671e] Exception during message handling\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 97, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 215, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     pass\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 201, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 266, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 243, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 230, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1622, in rebuild_instance\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.stop_instance(context, instance['uuid'])\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 97, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 215, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     pass\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 201, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 260, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     instance_uuid = keyed_args['instance']['uuid']\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp TypeError: string indices must be integers\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1176773", 
    "owner": "https://api.launchpad.net/1.0/~yuyangbj", 
    "id": 1176773, 
    "index": 3379, 
    "openned": "2013-05-06 06:27:51.163894+00:00", 
    "created": "2013-05-06 06:27:51.163894+00:00", 
    "title": "Nova evacuate failed when the VM is in shutoff status", 
    "comments": [
        {
            "content": "Evacuate the VM to another compute host when the old compute host is down.  But there are some exceptions which blocked the evacuate operation.\n\n2013-05-06 13:14:31.718 ERROR nova.openstack.common.rpc.amqp [req-f6296094-ae7e-4f87-9c72-d834877c6133 588c69d00419438389d7a38f882a3015 48417f97dd794c509b35ab860b80671e] Exception during message handling\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 97, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 215, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     pass\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 201, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 266, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 243, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 230, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1622, in rebuild_instance\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.stop_instance(context, instance['uuid'])\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 97, in wrapped\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 215, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     pass\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 201, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 260, in decorated_function\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp     instance_uuid = keyed_args['instance']['uuid']\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp TypeError: string indices must be integers\n2013-05-06 13:14:31.718 1894 TRACE nova.openstack.common.rpc.amqp", 
            "date_created": "2013-05-06 06:27:51.163894+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuyangbj"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/28273", 
            "date_created": "2013-05-06 06:46:49.584906+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/28273\nCommitted: http://github.com/openstack/nova/commit/2c1bd79a202c868bfeee7ca92e817ad19ef06b76\nSubmitter: Jenkins\nBranch:    master\n\ncommit 2c1bd79a202c868bfeee7ca92e817ad19ef06b76\nAuthor: Yang Yu <email address hidden>\nDate:   Mon May 6 14:33:54 2013 +0800\n\n    Nova evacuate failed when VM is in SHUTOFF status\n    \n    When the VM is in SHUTOFF status and the original compute host is\n    down, issue the \"nova evacuate\" command to rebuild the VM on\n    another host, it is failed due to a type error: string indices\n    must be integers.\n    \n    Fix bug 1176773\n    Change-Id: I76ebce6882198365717167f29a484e4ec994db0c\n", 
            "date_created": "2013-05-07 15:24:59.930432+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/28437", 
            "date_created": "2013-05-07 16:56:21.073780+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/28437\nCommitted: http://github.com/openstack/nova/commit/4226aa9f0d1360510ce3e9963c633f4924486f2b\nSubmitter: Jenkins\nBranch:    stable/grizzly\n\ncommit 4226aa9f0d1360510ce3e9963c633f4924486f2b\nAuthor: Yang Yu <email address hidden>\nDate:   Mon May 6 14:33:54 2013 +0800\n\n    Nova evacuate failed when VM is in SHUTOFF status\n    \n    When the VM is in SHUTOFF status and the original compute host is\n    down, issue the \"nova evacuate\" command to rebuild the VM on\n    another host, it is failed due to a type error: string indices\n    must be integers.\n    \n    Fix bug 1176773\n    Change-Id: I76ebce6882198365717167f29a484e4ec994db0c\n    (cherry picked from commit 2c1bd79a202c868bfeee7ca92e817ad19ef06b76)\n", 
            "date_created": "2013-05-13 17:16:36.195244+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-05-29 10:26:48.985076+00:00"
}