{
    "status": "Fix Released", 
    "last_updated": "2011-09-22 13:27:30.714088+00:00", 
    "description": "[root@cloud ~]# nova boot --flavor 1 --image 365320335 mike\ndatetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable (HTTP 500)\n\nTrace in nova-api:\n2011-05-25 21:52:36,949 DEBUG nova.rpc [-] Making asynchronous cast on scheduler... from (pid=4237) cast /usr/lib/python2.7/site-packages/nova/rpc.py:411\n2011-05-25 21:52:36,994 ERROR nova.api.openstack [-] Caught error: datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 59, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 364, in __call__\n(nova.api.openstack): TRACE:     result = method(**arg_dict)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/servers.py\", line 183, in create\n(nova.api.openstack): TRACE:     injected_files=injected_files)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 268, in create\n(nova.api.openstack): TRACE:     \"injected_files\": injected_files}})\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/rpc.py\", line 415, in cast\n(nova.api.openstack): TRACE:     publisher.send(msg)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 765, in send\n(nova.api.openstack): TRACE:     serializer=serializer)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 690, in create_message\n(nova.api.openstack): TRACE:     serializer=serializer)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/serialization.py\", line 144, in encode\n(nova.api.openstack): TRACE:     payload = encoder(data)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 124, in <lambda>\n(nova.api.openstack): TRACE:     serialize = lambda value: implementation.serialize(value)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 86, in serialize\n(nova.api.openstack): TRACE:     raise TypeError(*exc.args)\n(nova.api.openstack): TRACE: TypeError: datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable\n(nova.api.openstack): TRACE: \n\nAfter commenting instance_type in RPC call it works fine:\n            rpc.cast(context,\n                     FLAGS.scheduler_topic,\n                     {\"method\": \"run_instance\",\n                      \"args\": {\"topic\": FLAGS.compute_topic,\n                               \"instance_id\": instance_id,\n                               #\"instance_type\": instance_type,\n                               \"availability_zone\": availability_zone,\n                               \"injected_files\": injected_files}})\n\n[root@cloud ~]# nova-manage --version\nOpenStack Nova version: 2011.3-dev (2011.3-nova:tarmac-20110524231040-0tt6rxdaf77re6es)", 
    "tags": [], 
    "importance": "Low", 
    "heat": 22, 
    "link": "https://bugs.launchpad.net/nova/+bug/788265", 
    "owner": "https://api.launchpad.net/1.0/~sandy-walsh", 
    "id": 788265, 
    "index": 188, 
    "openned": "2011-05-25 18:17:54.202692+00:00", 
    "created": "2011-05-25 18:17:54.202692+00:00", 
    "title": "Can't boot instance because of instance_type wrong pass", 
    "comments": [
        {
            "content": "[root@cloud ~]# nova boot --flavor 1 --image 365320335 mike\ndatetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable (HTTP 500)\n\nTrace in nova-api:\n2011-05-25 21:52:36,949 DEBUG nova.rpc [-] Making asynchronous cast on scheduler... from (pid=4237) cast /usr/lib/python2.7/site-packages/nova/rpc.py:411\n2011-05-25 21:52:36,994 ERROR nova.api.openstack [-] Caught error: datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 59, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 364, in __call__\n(nova.api.openstack): TRACE:     result = method(**arg_dict)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/servers.py\", line 183, in create\n(nova.api.openstack): TRACE:     injected_files=injected_files)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 268, in create\n(nova.api.openstack): TRACE:     \"injected_files\": injected_files}})\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/nova/rpc.py\", line 415, in cast\n(nova.api.openstack): TRACE:     publisher.send(msg)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 765, in send\n(nova.api.openstack): TRACE:     serializer=serializer)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 690, in create_message\n(nova.api.openstack): TRACE:     serializer=serializer)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/carrot/serialization.py\", line 144, in encode\n(nova.api.openstack): TRACE:     payload = encoder(data)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 124, in <lambda>\n(nova.api.openstack): TRACE:     serialize = lambda value: implementation.serialize(value)\n(nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 86, in serialize\n(nova.api.openstack): TRACE:     raise TypeError(*exc.args)\n(nova.api.openstack): TRACE: TypeError: datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable\n(nova.api.openstack): TRACE: \n\nAfter commenting instance_type in RPC call it works fine:\n            rpc.cast(context,\n                     FLAGS.scheduler_topic,\n                     {\"method\": \"run_instance\",\n                      \"args\": {\"topic\": FLAGS.compute_topic,\n                               \"instance_id\": instance_id,\n                               #\"instance_type\": instance_type,\n                               \"availability_zone\": availability_zone,\n                               \"injected_files\": injected_files}})\n\n[root@cloud ~]# nova-manage --version\nOpenStack Nova version: 2011.3-dev (2011.3-nova:tarmac-20110524231040-0tt6rxdaf77re6es)", 
            "date_created": "2011-05-25 18:17:54.202692+00:00", 
            "author": "https://api.launchpad.net/1.0/~mihgen"
        }, 
        {
            "content": "In version:\n2011.3-dev (2011.3-workspace:tarmac-20110602174653-azonyll6ctjjtxvf)\n\nCommenting the \"request_spec\" argument makes it work:\n     rpc.cast(context,\n                     FLAGS.scheduler_topic,\n                     {\"method\": \"run_instance\",\n                      \"args\": {\"topic\": FLAGS.compute_topic,\n                               \"instance_id\": instance_id,\n                               #\"request_spec\": {\n                               #         'instance_type': instance_type,\n                               #         'filter':\n                               #             'nova.scheduler.host_filter.'\n                               #             'InstanceTypeFilter',\n                               #},\n                               \"availability_zone\": availability_zone,\n                               \"injected_files\": injected_files,\n                               \"admin_password\": admin_password,\n                              },\n                     })\n\nSee link for a possible explanation of the exception:\nhttp://stackoverflow.com/questions/455580/json-datetime-between-python-and-javascript/2680060#2680060", 
            "date_created": "2011-06-03 09:06:54.256137+00:00", 
            "author": "https://api.launchpad.net/1.0/~xavicampa"
        }, 
        {
            "content": "[root@cloud ~]$ nova boot --flavor 1 --image 1206608969 test\ndatetime.datetime(2011, 5, 20, 12, 25, 49) is not JSON serializable (HTTP 500)\n\n[root@cloud ~]$ sudo nova-manage version list\n2011.3-dev (2011.3-nova:<email address hidden>)\n", 
            "date_created": "2011-06-16 11:01:01.581424+00:00", 
            "author": "https://api.launchpad.net/1.0/~usrleon"
        }, 
        {
            "content": "Why am I not seeing this problem in my environment? I'm able to create instances without issue.\n\nWhich version of json are you running?\n", 
            "date_created": "2011-06-22 12:00:05.786085+00:00", 
            "author": "https://api.launchpad.net/1.0/~sandy-walsh"
        }, 
        {
            "content": "This issue does appear only on custom created instance types, because they have real time instead of None in created_at field.\nBuilt-in (EC2-like) instance types are not affected.", 
            "date_created": "2011-06-22 12:05:25.879634+00:00", 
            "author": "https://api.launchpad.net/1.0/~yorik-sar"
        }, 
        {
            "content": "I can confirm I'm testing with custom instance types.\n\n2011/6/22 Yuriy Taraday <email address hidden>\n\n> This issue does appear only on custom created instance types, because they\n> have real time instead of None in created_at field.\n> Built-in (EC2-like) instance types are not affected.\n>\n> --\n> You received this bug notification because you are subscribed to the bug\n> report.\n> https://bugs.launchpad.net/bugs/788265\n>\n> Title:\n>  Can't boot instance because of instance_type wrong pass\n>\n> Status in OpenStack Compute (Nova):\n>  New\n>\n> Bug description:\n>  [root@cloud ~]# nova boot --flavor 1 --image 365320335 mike\n>  datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable (HTTP\n> 500)\n>\n>  Trace in nova-api:\n>  2011-05-25 21:52:36,949 DEBUG nova.rpc [-] Making asynchronous cast on\n> scheduler... from (pid=4237) cast\n> /usr/lib/python2.7/site-packages/nova/rpc.py:411\n>  2011-05-25 21:52:36,994 ERROR nova.api.openstack [-] Caught error:\n> datetime.datetime(2011, 5, 25, 17, 19, 57) is not JSON serializable\n>  (nova.api.openstack): TRACE: Traceback (most recent call last):\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 59,\n> in __call__\n>  (nova.api.openstack): TRACE:     return req.get_response(self.application)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/request.py\", line 919, in\n> get_response\n>  (nova.api.openstack): TRACE:     application, catch_exc_info=False)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/request.py\", line 887, in\n> call_application\n>  (nova.api.openstack): TRACE:     app_iter = application(self.environ,\n> start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n>  (nova.api.openstack): TRACE:     return resp(environ, start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n>  (nova.api.openstack): TRACE:     return resp(environ, start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n>  (nova.api.openstack): TRACE:     return resp(environ, start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/routes/middleware.py\", line 131, in\n> __call__\n>  (nova.api.openstack): TRACE:     response = self.app(environ,\n> start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 159, in __call__\n>  (nova.api.openstack): TRACE:     return resp(environ, start_response)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 147, in __call__\n>  (nova.api.openstack): TRACE:     resp = self.call_func(req, *args,\n> **self.kwargs)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 208, in call_func\n>  (nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 364, in __call__\n>  (nova.api.openstack): TRACE:     result = method(**arg_dict)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/nova/api/openstack/servers.py\", line 183,\n> in create\n>  (nova.api.openstack): TRACE:     injected_files=injected_files)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 268, in create\n>  (nova.api.openstack): TRACE:     \"injected_files\": injected_files}})\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/nova/rpc.py\", line 415, in cast\n>  (nova.api.openstack): TRACE:     publisher.send(msg)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 765, in send\n>  (nova.api.openstack): TRACE:     serializer=serializer)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/carrot/messaging.py\", line 690, in\n> create_message\n>  (nova.api.openstack): TRACE:     serializer=serializer)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/carrot/serialization.py\", line 144, in\n> encode\n>  (nova.api.openstack): TRACE:     payload = encoder(data)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 124, in\n> <lambda>\n>  (nova.api.openstack): TRACE:     serialize = lambda value:\n> implementation.serialize(value)\n>  (nova.api.openstack): TRACE:   File\n> \"/usr/lib/python2.7/site-packages/anyjson/__init__.py\", line 86, in\n> serialize\n>  (nova.api.openstack): TRACE:     raise TypeError(*exc.args)\n>  (nova.api.openstack): TRACE: TypeError: datetime.datetime(2011, 5, 25, 17,\n> 19, 57) is not JSON serializable\n>  (nova.api.openstack): TRACE:\n>\n>  After commenting instance_type in RPC call it works fine:\n>              rpc.cast(context,\n>                       FLAGS.scheduler_topic,\n>                       {\"method\": \"run_instance\",\n>                        \"args\": {\"topic\": FLAGS.compute_topic,\n>                                 \"instance_id\": instance_id,\n>                                 #\"instance_type\": instance_type,\n>                                 \"availability_zone\": availability_zone,\n>                                 \"injected_files\": injected_files}})\n>\n>  [root@cloud ~]# nova-manage --version\n>  OpenStack Nova version: 2011.3-dev\n> (2011.3-nova:tarmac-20110524231040-0tt6rxdaf77re6es)\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/788265/+subscriptions\n>\n", 
            "date_created": "2011-06-22 12:29:38+00:00", 
            "author": "https://api.launchpad.net/1.0/~xavicampa"
        }, 
        {
            "content": "Ah ... interesting. Ok, let me look further. Thanks.", 
            "date_created": "2011-06-22 13:09:33.069071+00:00", 
            "author": "https://api.launchpad.net/1.0/~sandy-walsh"
        }
    ], 
    "closed": "2011-09-22 13:27:29.558782+00:00"
}