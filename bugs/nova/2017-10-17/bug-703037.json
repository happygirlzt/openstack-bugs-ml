{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:57:19.169346+00:00", 
    "description": "Fresh install of Ubuntu 10.10, installed Nova from trunk.  This is an error I am getting after correcting the issue found in Bug 702723 (added permissions for /usr/bin/qemu-nbd via 'vusudo''\n\n####\nroot@ubuntu117:~# tail -f /var/log/nova/nova-compute.log \n-A nova-inst-8 -j nova-fallback\n-A nova-local -d fd00::16:3eff:fe4c:d85e -j nova-inst-9\n-A nova-inst-9 -m state --state INVALID -j DROP\n-A nova-inst-9 -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A nova-inst-9 -j nova-sg-1\n-A nova-inst-9 -s None -p icmpv6\n-A nova-inst-9 -j nova-fallback\nCOMMIT\n# Completed on Fri Jan 14 13:28:18 2011\n\n\n\n(nova.exception 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 86, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 389, in spawn\n(nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1196, in prepare_instance_filter\n(nova.exception): TRACE:     self.apply_ruleset()\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1209, in apply_ruleset\n(nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 146, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: sudo ip6tables-restore\n(nova.exception): TRACE: Exit code: 2\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.exception): TRACE: \n(nova.compute.manager 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [WWKMRD7I-J4DULC555VT dub dubproject] instance 9: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 212, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 92, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: sudo ip6tables-restore\n(nova.compute.manager): TRACE: Exit code: 2\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.compute.manager): TRACE: \nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000009'\n####", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/703037", 
    "owner": "https://api.launchpad.net/1.0/~ishii-hisaharu", 
    "id": 703037, 
    "index": 2244, 
    "openned": "2011-01-14 19:41:48.713373+00:00", 
    "created": "2011-01-14 19:41:48.713373+00:00", 
    "title": "Instances fail to spawn - ip6tables-restore v1.4.4: host/network `None' not found", 
    "comments": [
        {
            "content": "Fresh install of Ubuntu 10.10, installed Nova from trunk.  This is an error I am getting after correcting the issue found in Bug 702723 (added permissions for /usr/bin/qemu-nbd via 'vusudo''\n\n####\nroot@ubuntu117:~# tail -f /var/log/nova/nova-compute.log \n-A nova-inst-8 -j nova-fallback\n-A nova-local -d fd00::16:3eff:fe4c:d85e -j nova-inst-9\n-A nova-inst-9 -m state --state INVALID -j DROP\n-A nova-inst-9 -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A nova-inst-9 -j nova-sg-1\n-A nova-inst-9 -s None -p icmpv6\n-A nova-inst-9 -j nova-fallback\nCOMMIT\n# Completed on Fri Jan 14 13:28:18 2011\n\n\n\n(nova.exception 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 86, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 389, in spawn\n(nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1196, in prepare_instance_filter\n(nova.exception): TRACE:     self.apply_ruleset()\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1209, in apply_ruleset\n(nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 146, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: sudo ip6tables-restore\n(nova.exception): TRACE: Exit code: 2\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.exception): TRACE: \n(nova.compute.manager 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [WWKMRD7I-J4DULC555VT dub dubproject] instance 9: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 212, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 92, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: sudo ip6tables-restore\n(nova.compute.manager): TRACE: Exit code: 2\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.compute.manager): TRACE: \nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000009'\n####", 
            "date_created": "2011-01-14 19:41:48.713373+00:00", 
            "author": "https://api.launchpad.net/1.0/~wayne-walls"
        }, 
        {
            "content": "Thank you for your bug report.\nWe can not repro the bug, however we assume the reason of the bug,and fixed.\n\nIf you don't mind, would you please check this branch?\nhttps://code.launchpad.net/~ntt-pf-lab/nova/lp703037\n", 
            "date_created": "2011-01-18 02:52:04.141973+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "Setting to critical since I don't know how to workaround this and use_ipv6 is set to True by default.\r\nI tried the fix in https://code.launchpad.net/~ntt-pf-lab/nova/lp703037 (\"Fixed error message in get_my_linklocal\") but that doesn't fix it.", 
            "date_created": "2011-01-18 15:27:15.172244+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Downgrading to High, as running with use_ipv6=False avoids this issue.", 
            "date_created": "2011-01-18 15:52:46.822141+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": ">Thierry Carrez\nThank you for your report.\nI confirmed the patch which disable use_ipv6 as default, however I would like to continue to \nfix this bug. \nHowever, we can not repro bug now.\nWe add some log message in lp703037, so would you send me log in compute node and network node?\nWe also want to know the result of ifconfig.\n\n# Sorry, my previous comment is not informal.\n\n", 
            "date_created": "2011-01-19 01:24:07.394327+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "Sure, I'll help you test that. I'm struggling a bit with my test setup though, and your branch seems a bit outdated. I'll try again tomorrow. In the mean time, maybe Wayne can help you...", 
            "date_created": "2011-01-19 15:57:31.164079+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "sorry, I mean your branch is fine, my setup is outdated.", 
            "date_created": "2011-01-19 16:53:07.775085+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I could reproduce the problem using Revision No 589.\n\n(nova.compute.manager 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): AUDIT [W-QW06W9D-NCARV3HY5- admin project-1] instance 40: starting...\n(nova.virt.libvirt_conn 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): DEBUG [N/A] instance instance-00000028: starting toXML method from MainProcess (pid=4748) to_xml /usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py:647\n(nova.virt.libvirt_conn 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): DEBUG [N/A] instance instance-00000028: starting toXML method from MainProcess (pid=4748) to_xml /usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py:650\n(nova.virt.libvirt_conn 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): DEBUG [N/A] instance instance-00000028: finished toXML method from MainProcess (pid=4748) to_xml /usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py:717\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] called setup_basic_filtering in nwfilter\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] ensuring static filters\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0xa8cf26c>\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0xa8b6d0c>\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] new_filter: # Generated by iptables-save v1.4.4 on Wed Jan 19 17:32:31 2011\n*filter\n:INPUT ACCEPT [730:130600]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [928:167991]\n:nova-fallback - [0:0]\n:nova-local - [0:0]\n:nova-inst-40 - [0:0]\n:nova-sg-1 - [0:0]\n-A nova-fallback -j DROP\n-A FORWARD -j nova-local\n-A nova-local -d 172.16.0.6 -j nova-inst-40\n-A nova-inst-40 -m state --state INVALID -j DROP\n-A nova-inst-40 -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A nova-inst-40 -j nova-sg-1\n-A nova-inst-40 -s 172.16.0.1 -p udp --sport 67 --dport 68\n-A nova-inst-40 -j nova-fallback\n-A nova-sg-1 -p tcp -s 0.0.0.0/0 --dport 22 -j ACCEPT\n-A nova-sg-1 -p icmp -s 0.0.0.0/0 -j ACCEPT\n-A FORWARD -o br100 -j ACCEPT\n-A FORWARD -i br100 -j ACCEPT\nCOMMIT\n# Completed on Wed Jan 19 17:32:31 2011\n\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0xb1a554c>\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0xb19dcac>\n(nova.root 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): INFO [N/A] new_filter: # Generated by ip6tables-save v1.4.4 on Wed Jan 19 17:32:32 2011\n*filter\n:INPUT ACCEPT [26:2496]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n:nova-fallback - [0:0]\n:nova-local - [0:0]\n:nova-inst-40 - [0:0]\n:nova-sg-1 - [0:0]\n-A nova-fallback -j DROP\n-A FORWARD -j nova-local\n-A nova-local -d fd00::16:3eff:fe1c:fd9a -j nova-inst-40\n-A nova-inst-40 -m state --state INVALID -j DROP\n-A nova-inst-40 -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A nova-inst-40 -j nova-sg-1\n-A nova-inst-40 -s None -p icmpv6\n-A nova-inst-40 -j nova-fallback\nCOMMIT\n# Completed on Wed Jan 19 17:32:32 2011\n\n(nova.exception 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/exception.py\", line 86, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py\", line 389, in spawn\n(nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py\", line 1199, in prepare_instance_filter\n(nova.exception): TRACE:     self.apply_ruleset()\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/virt/libvirt_conn.py\", line 1212, in apply_ruleset\n(nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/utils.py\", line 147, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: sudo ip6tables-restore\n(nova.exception): TRACE: Exit code: 2\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 16\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.exception): TRACE:\n(nova.compute.manager 2011.1-trunk:tarmac-20110119224631-2hev79vlb2sau2lo): ERROR [W-QW06W9D-NCARV3HY5- admin project-1] instance 40: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/compute/manager.py\", line 212, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/nova-2011.1-py2.6.egg/nova/exception.py\", line 92, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: sudo ip6tables-restore\n(nova.compute.manager): TRACE: Exit code: 2\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 16\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n(nova.compute.manager): TRACE:\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000028'\n", 
            "date_created": "2011-01-20 01:39:36.927483+00:00", 
            "author": "https://api.launchpad.net/1.0/~tpatil"
        }, 
        {
            "content": "I think the main culprit is switching from ipv4 to ipv6.\n\nWhen you run nova services with \"use_ipv6\" flag set to False and run the instance, at that time host for the network is set but the ra_server column is left to NULL since you are not using ipv6. This ra_server column is updated only if you are using ipv6.\n(Please refer to networks database table)\n\nNow if you decide to switch from ipv4 to ipv6 and try to run a new instance you will encounter with the above problem. This is because host is already set for the network so it will not try to set it again and ra_server in this case will still be NULL and it causes issue when it try to set the filters for ipv6.\n\nSo I believe this is very important test case, Switching from ipv4 to ipv6. \nI feel we should have some kind of documentation around this, so that we don't end up with such problems.\n\n", 
            "date_created": "2011-01-20 18:11:15.943123+00:00", 
            "author": "https://api.launchpad.net/1.0/~tpatil"
        }, 
        {
            "content": ">Tushar Patil\nYes, and also our branch has another bug, we found.\n\nhttp://bazaar.launchpad.net/~ntt-pf-lab/nova/ipv6-support/view/head:/nova/network/linux_net.py#L302\nAt the above line, when radvd process is already running and found, 'kill -HUP' is executed but ra_server column is NOT updated.\n\nThen I'm writing such a short patch that update_ra() updates ra_server column every time.\nAfter this patch is merged, we can switch from ipv4 to ipv6 only with enabling use_ipv6 flag and restarting all network nodes.\nBecause init_host() of NetworkManager sets up all networks which the host is already assigned.", 
            "date_created": "2011-01-21 01:38:35.603741+00:00", 
            "author": "https://api.launchpad.net/1.0/~ishii-hisaharu"
        }, 
        {
            "content": ">Hisaharu Ishii \n\nBeen bogged down with some other stuff at work, have you got all the information that you need?  From the looks of it, you have it under control and the issue will hopefully be solved with your patch.  Please let me know if I can be of any assistance!\n\nCheers", 
            "date_created": "2011-01-21 06:05:55.830767+00:00", 
            "author": "https://api.launchpad.net/1.0/~wayne-walls"
        }, 
        {
            "content": "> Wayne A. Walls\nThanks for your offer!\n\nAlready I uploaded my patch.\nhttp://bazaar.launchpad.net/~ntt-pf-lab/nova/lp703037/revision/577\n\nBut I have not merged it with latest trunk and tested yet because I could not boot rev597 of trunk by 'nova.sh run'.\nI think it may be fixed by lp:~vishvananda/nova/friendly-db.\n\nCould you test my patch?", 
            "date_created": "2011-01-21 06:42:25.498121+00:00", 
            "author": "https://api.launchpad.net/1.0/~ishii-hisaharu"
        }, 
        {
            "content": "You can also get an updated version of nova.sh from github\nwget https://github.com/vishvananda/novascript/raw/master/nova.sh\n\nVish\n\nOn Jan 20, 2011, at 10:42 PM, Hisaharu Ishii wrote:\n\n>> Wayne A. Walls\n> Thanks for your offer!\n> \n> Already I uploaded my patch.\n> http://bazaar.launchpad.net/~ntt-pf-lab/nova/lp703037/revision/577\n> \n> But I have not merged it with latest trunk and tested yet because I could not boot rev597 of trunk by 'nova.sh run'.\n> I think it may be fixed by lp:~vishvananda/nova/friendly-db.\n> \n> Could you test my patch?\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/703037\n> \n> Title:\n>  Instances fail to spawn - ip6tables-restore v1.4.4: host/network\n>  `None' not found\n> \n> Status in OpenStack Compute (Nova):\n>  Confirmed\n> \n> Bug description:\n>  Fresh install of Ubuntu 10.10, installed Nova from trunk.  This is an\n>  error I am getting after correcting the issue found in Bug 702723\n>  (added permissions for /usr/bin/qemu-nbd via 'vusudo''\n> \n>  ####\n>  root@ubuntu117:~# tail -f /var/log/nova/nova-compute.log \n>  -A nova-inst-8 -j nova-fallback\n>  -A nova-local -d fd00::16:3eff:fe4c:d85e -j nova-inst-9\n>  -A nova-inst-9 -m state --state INVALID -j DROP\n>  -A nova-inst-9 -m state --state ESTABLISHED,RELATED -j ACCEPT\n>  -A nova-inst-9 -j nova-sg-1\n>  -A nova-inst-9 -s None -p icmpv6\n>  -A nova-inst-9 -j nova-fallback\n>  COMMIT\n>  # Completed on Fri Jan 14 13:28:18 2011\n> \n> \n>  (nova.exception 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [N/A] Uncaught exception\n>  (nova.exception): TRACE: Traceback (most recent call last):\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 86, in _wrap\n>  (nova.exception): TRACE:     return f(*args, **kw)\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 389, in spawn\n>  (nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1196, in prepare_instance_filter\n>  (nova.exception): TRACE:     self.apply_ruleset()\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1209, in apply_ruleset\n>  (nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 146, in execute\n>  (nova.exception): TRACE:     cmd=cmd)\n>  (nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n>  (nova.exception): TRACE: Command: sudo ip6tables-restore\n>  (nova.exception): TRACE: Exit code: 2\n>  (nova.exception): TRACE: Stdout: ''\n>  (nova.exception): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n>  (nova.exception): TRACE: \n>  (nova.compute.manager 2011.1-workspace:tarmac-20110114074941-h6utzsii5voibaf9): ERROR [WWKMRD7I-J4DULC555VT dub dubproject] instance 9: Failed to spawn\n>  (nova.compute.manager): TRACE: Traceback (most recent call last):\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 212, in run_instance\n>  (nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 92, in _wrap\n>  (nova.compute.manager): TRACE:     raise Error(str(e))\n>  (nova.compute.manager): TRACE: Error: Unexpected error while running command.\n>  (nova.compute.manager): TRACE: Command: sudo ip6tables-restore\n>  (nova.compute.manager): TRACE: Exit code: 2\n>  (nova.compute.manager): TRACE: Stdout: ''\n>  (nova.compute.manager): TRACE: Stderr: \"ip6tables-restore v1.4.4: host/network `None' not found\\nError occurred at line: 23\\nTry `ip6tables-restore -h' or 'ip6tables-restore --help' for more information.\\n\"\n>  (nova.compute.manager): TRACE: \n>  libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000009'\n>  ####\n> \n> \n\n", 
            "date_created": "2011-01-21 06:52:19+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Downgrading severity since it is only affecting people switching from one mode to the other without recreating networks.", 
            "date_created": "2011-01-21 08:19:34.066701+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I have merged the patch with latest trunk and proposed to merge.\nhttps://code.launchpad.net/~ntt-pf-lab/nova/lp703037/+merge/47028\nThe above change of status is my miss.", 
            "date_created": "2011-01-21 12:11:02.915803+00:00", 
            "author": "https://api.launchpad.net/1.0/~ishii-hisaharu"
        }
    ], 
    "closed": "2011-02-07 13:57:18.081695+00:00"
}