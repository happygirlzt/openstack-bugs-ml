{
    "status": "Won't Fix", 
    "last_updated": "2016-02-10 16:31:05.811954+00:00", 
    "description": "I created instance with one NIC attached.\nThen I try to attach another NIC:\n\nnova add-fixed-ip  ServerId NetworkId\n\nNova compute raises exception:\n\n2014-10-24 15:40:33.925 31955 ERROR oslo.messaging.rpc.dispatcher [req-43570a05-937a-4ddf-a0e9-e05d42660817 ] Exception during message handling: Network could not be found for instance 09b6e137-37d6-475d-992c-bdcb7d3cb841.\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 414, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 326, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 314, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 3915, in add_fixed_ip_to_instance\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     network_id)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/network/base_api.py\", line 61, in wrapper\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     res = f(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 684, in add_fixed_ip_to_instance\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     instance_id=instance['uuid'])\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher NetworkNotFoundForInstance: Network could not be found for instance 09b6e137-37d6-475d-992c-bdcb7d3cb841.\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher \n\n\nIn nova/network/neutronv2/api.py ther's line:\n\nneutronv2.get_client(context).list_ports(**search_opts)\n\nIt cannot find port by device_id. Probably because nova do not create port ?", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1385318", 
    "owner": "None", 
    "id": 1385318, 
    "index": 6509, 
    "openned": "2014-11-19 06:12:44.900373+00:00", 
    "created": "2014-10-24 14:42:52.971039+00:00", 
    "title": "Nova fails to add fixed IP", 
    "comments": [
        {
            "content": "I created instance with one NIC attached.\nThen I try to attach another NIC:\n\nnova add-fixed-ip  ServerId NetworkId\n\nNova compute raises exception:\n\n2014-10-24 15:40:33.925 31955 ERROR oslo.messaging.rpc.dispatcher [req-43570a05-937a-4ddf-a0e9-e05d42660817 ] Exception during message handling: Network could not be found for instance 09b6e137-37d6-475d-992c-bdcb7d3cb841.\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 414, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 326, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 314, in decorated_function\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/compute/manager.py\", line 3915, in add_fixed_ip_to_instance\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     network_id)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/network/base_api.py\", line 61, in wrapper\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     res = f(self, context, *args, **kwargs)\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher   File \"/home/vb/.virtualenvs/ecs/local/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 684, in add_fixed_ip_to_instance\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher     instance_id=instance['uuid'])\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher NetworkNotFoundForInstance: Network could not be found for instance 09b6e137-37d6-475d-992c-bdcb7d3cb841.\n2014-10-24 15:40:33.925 31955 TRACE oslo.messaging.rpc.dispatcher \n\n\nIn nova/network/neutronv2/api.py ther's line:\n\nneutronv2.get_client(context).list_ports(**search_opts)\n\nIt cannot find port by device_id. Probably because nova do not create port ?", 
            "date_created": "2014-10-24 14:42:52.971039+00:00", 
            "author": "https://api.launchpad.net/1.0/~vb-d"
        }, 
        {
            "content": "This might not be a bug after all. Does the network actually exist? Are you executing the command with the right credentials?", 
            "date_created": "2014-10-24 17:54:09.525248+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "Yes, network exists and I have only one tenant. Also when you specify network ids as arguments for nova boot command, exception not raised. Obviously because nova says neutron to create network port for this instance.", 
            "date_created": "2014-10-25 10:11:42.080167+00:00", 
            "author": "https://api.launchpad.net/1.0/~vb-d"
        }, 
        {
            "content": "Here you are trying to attach another nic to the vm. But we cannot attach a new nic using the command \"nova add-fixed-ip <serverId> <networkId>\"\nGenerally this command is used to add new IP address to the existing VM.\n\nTo attach multiple nic's to the VM, any of the following methods can be followed:\n\n1. While booting, multiple NICs can be create using the option \"--nic net-id\" multiple times as shown below.\n\nnova boot --image <image_id> --flavor <flavor_id> --nic net-id=<net_id> --nic net-id=<net_id>\n\n2. To attach a new NIC to existing VM, we can use \"interface-attach\" command.\n\nnova interface-attach <serverId> --port-id <port_id> | --fixed-ip <fixed-ip> | --net-id <net-id>\n", 
            "date_created": "2014-12-09 07:22:26.059433+00:00", 
            "author": "https://api.launchpad.net/1.0/~avinash-jalumuru"
        }, 
        {
            "content": "[Expired for neutron because there has been no activity for 60 days.]", 
            "date_created": "2015-02-21 04:17:16.506147+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }, 
        {
            "content": "@Vitalii (vb-d): \nReminder: Could you please check if the information from Avinash (avinash-jalumuru) in comment #3 solves this bug (or maybe makes it invalid)?", 
            "date_created": "2015-06-08 12:30:55.143812+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "Cleanup\n=======\n\nThis bug report has the status \"Incomplete\" since more than 30 days\nand it looks like that there are no open reviews for it. To keep\nthe bug list sane, I close this bug with \"won't fix\". This does not\nmean that it is not a valid bug report, it's more to acknowledge that\nno progress can be expected here anymore. You are still free to push a\nnew patch for this bug. If you could reproduce it on the current master\ncode or on a maintained stable branch, please switch it to \"Confirmed\".", 
            "date_created": "2016-02-10 16:31:04.982973+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2016-02-10 16:30:59.237218+00:00"
}