{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:48:41.058172+00:00", 
    "description": "The baremetal API extension require administrator privileges to use it, but it does not expose the information that an administrator will need, such as the task state.\n\nHere is what the database stores for a node with an active deployment.\n\nubuntu@foo:~$ mysql nova_bm -e \"select * from bm_nodes where uuid='dda8bd00-0cf6-4211-8c8c-81dfafe8c1fb'\\G\"\n*************************** 1. row ***************************\n      created_at: 2013-05-15 19:58:21\n      updated_at: 2013-05-24 09:45:17\n      deleted_at: NULL\n         deleted: 0\n              id: 77\n            cpus: 24\n       memory_mb: 98304\n        local_gb: 2048\n      pm_address: xx.xx.xx.xx\n         pm_user: xxxxxx\n     pm_password: xxxxxxx\n    service_host: foo.novalocal\nprov_mac_address: NULL\n   instance_uuid: 0c2690cd-c431-41f7-90f2-10ea678e137a\n      task_state: active\n   terminal_port: NULL\n      image_path: /var/lib/nova/instances/instance-00000133/disk\n pxe_config_path: /tftpboot/0c2690cd-c431-41f7-90f2-10ea678e137a/config\n      deploy_key: 8PXQS4ZPIMR6FVXH842YFFYJDTZHIPT9\n         root_mb: 1536000\n         swap_mb: 1\n            uuid: dda8bd00-0cf6-4211-8c8c-81dfafe8c1fb\n   instance_name: compute-test0.novacompute0.novacompute\n\n\nHere is what the API exposes for the same node.\n\nubuntu@foo:~$ nova baremetal-node-show 77\n+---------------+-----------------------------------------------------------------------------------------+\n| Property      | Value                                                                                   |\n+---------------+-----------------------------------------------------------------------------------------+\n| instance_uuid | 0c2690cd-c431-41f7-90f2-10ea678e137a                                                    |\n| pm_address    | xx.xx.xx.xx                                                                             |\n| interfaces    | [{u'datapath_id': None, u'id': 77, u'port_no': None, u'address': u'aa:aa:aa:aa:aa:aa'}] |\n| cpus          | 24                                                                                      |\n| memory_mb     | 98304                                                                                   |\n| service_host  | foo.novalocal                                                                           |\n| local_gb      | 2048                                                                                    |\n| id            | 77                                                                                      |\n| pm_user       | xxxxxxx                                                                           |\n| terminal_port | None                                                                                    |\n+---------------+-----------------------------------------------------------------------------------------+\n\n\nAt a minimum, I believe the API should also expose the uuid, task_state, and updated fields. Including the pxe_config_path would help system admins troubleshoot some problems as well.", 
    "tags": [
        "baremetal"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1184449", 
    "owner": "https://api.launchpad.net/1.0/~melwitt", 
    "id": 1184449, 
    "index": 3413, 
    "openned": "2013-05-27 00:07:39.307016+00:00", 
    "created": "2013-05-27 00:07:39.307016+00:00", 
    "title": "baremetal API extension does not show important status information", 
    "comments": [
        {
            "content": "The baremetal API extension require administrator privileges to use it, but it does not expose the information that an administrator will need, such as the task state.\n\nHere is what the database stores for a node with an active deployment.\n\nubuntu@foo:~$ mysql nova_bm -e \"select * from bm_nodes where uuid='dda8bd00-0cf6-4211-8c8c-81dfafe8c1fb'\\G\"\n*************************** 1. row ***************************\n      created_at: 2013-05-15 19:58:21\n      updated_at: 2013-05-24 09:45:17\n      deleted_at: NULL\n         deleted: 0\n              id: 77\n            cpus: 24\n       memory_mb: 98304\n        local_gb: 2048\n      pm_address: xx.xx.xx.xx\n         pm_user: xxxxxx\n     pm_password: xxxxxxx\n    service_host: foo.novalocal\nprov_mac_address: NULL\n   instance_uuid: 0c2690cd-c431-41f7-90f2-10ea678e137a\n      task_state: active\n   terminal_port: NULL\n      image_path: /var/lib/nova/instances/instance-00000133/disk\n pxe_config_path: /tftpboot/0c2690cd-c431-41f7-90f2-10ea678e137a/config\n      deploy_key: 8PXQS4ZPIMR6FVXH842YFFYJDTZHIPT9\n         root_mb: 1536000\n         swap_mb: 1\n            uuid: dda8bd00-0cf6-4211-8c8c-81dfafe8c1fb\n   instance_name: compute-test0.novacompute0.novacompute\n\n\nHere is what the API exposes for the same node.\n\nubuntu@foo:~$ nova baremetal-node-show 77\n+---------------+-----------------------------------------------------------------------------------------+\n| Property      | Value                                                                                   |\n+---------------+-----------------------------------------------------------------------------------------+\n| instance_uuid | 0c2690cd-c431-41f7-90f2-10ea678e137a                                                    |\n| pm_address    | xx.xx.xx.xx                                                                             |\n| interfaces    | [{u'datapath_id': None, u'id': 77, u'port_no': None, u'address': u'aa:aa:aa:aa:aa:aa'}] |\n| cpus          | 24                                                                                      |\n| memory_mb     | 98304                                                                                   |\n| service_host  | foo.novalocal                                                                           |\n| local_gb      | 2048                                                                                    |\n| id            | 77                                                                                      |\n| pm_user       | xxxxxxx                                                                           |\n| terminal_port | None                                                                                    |\n+---------------+-----------------------------------------------------------------------------------------+\n\n\nAt a minimum, I believe the API should also expose the uuid, task_state, and updated fields. Including the pxe_config_path would help system admins troubleshoot some problems as well.", 
            "date_created": "2013-05-27 00:07:39.307016+00:00", 
            "author": "https://api.launchpad.net/1.0/~devananda"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/42047", 
            "date_created": "2013-08-15 02:51:33.038026+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/42047\nCommitted: http://github.com/openstack/nova/commit/e5a5a0f310ca0bce4902c11044d1bd5cbb329adb\nSubmitter: Jenkins\nBranch:    master\n\ncommit e5a5a0f310ca0bce4902c11044d1bd5cbb329adb\nAuthor: Melanie Witt <email address hidden>\nDate:   Thu Oct 10 18:13:20 2013 +0000\n\n    Expose additional status in baremetal API extension\n    \n    Add fields: uuid, task_state, updated_at, and pxe_config_path\n    to aid system admins in troubleshooting issues.\n    \n    Fixes bug 1184449\n    \n    Change-Id: Ia4c03cb228b3efe602455bf05883ddf03b7f18da\n", 
            "date_created": "2013-10-23 04:45:27.987501+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-12-04 10:05:46.691130+00:00"
}