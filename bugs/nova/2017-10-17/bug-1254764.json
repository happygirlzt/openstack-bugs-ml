{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 09:00:22.379328+00:00", 
    "description": "By design, \"events\" in nova instance-action-list result should be listed in in chronological order. However, often can be seen \"compute_run_instance\" event happens before \"schedule\" event.\n\nFor example:\n\n+---------------+--------------------------------------------------+\n| Property      | Value                                            |\n+---------------+--------------------------------------------------+\n| instance_uuid | 461e1aae-6eae-4172-b2fe-2984dab34a1f             |\n| user_id       | 30d8f5a8deaf446ba51131b751ab8b46                 |\n| start_time    | 2013-11-25T14:26:18.000000                       |\n| request_id    | req-18c907ac-dbd7-4898-a6ed-e5dbb5c8da91         |\n| action        | create                                           |\n| message       | None                                             |\n| project_id    | 5bd1b3ec18b84b8ea3403bdc662983fb                 |\n| events        | [{u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:49.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': u'2013-11-25T14:26:49.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:26:19.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': u'2013-11-25T14:26:47.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:27:35.000000',  |\n|               |   u'traceback': None}]                           |\n+---------------+--------------------------------------------------+\n\nshould be:\n\n+---------------+--------------------------------------------------+\n| Property      | Value                                            |\n+---------------+--------------------------------------------------+\n| instance_uuid | 461e1aae-6eae-4172-b2fe-2984dab34a1f             |\n| user_id       | 30d8f5a8deaf446ba51131b751ab8b46                 |\n| start_time    | 2013-11-25T14:26:18.000000                       |\n| request_id    | req-18c907ac-dbd7-4898-a6ed-e5dbb5c8da91         |\n| action        | create                                           |\n| message       | None                                             |\n| project_id    | 5bd1b3ec18b84b8ea3403bdc662983fb                 |\n| events        | [{u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:49.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': u'2013-11-25T14:26:47.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:27:35.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': u'2013-11-25T14:26:49.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:26:19.000000',  |\n|               |   u'traceback': None}]                           |\n+---------------+--------------------------------------------------+", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1254764", 
    "owner": "https://api.launchpad.net/1.0/~unicell", 
    "id": 1254764, 
    "index": 1071, 
    "openned": "2013-11-25 15:31:50.632041+00:00", 
    "created": "2013-11-25 15:31:50.632041+00:00", 
    "title": "instance-action-list events are not ordered by time", 
    "comments": [
        {
            "content": "By design, \"events\" in nova instance-action-list result should be listed in in chronological order. However, often can be seen \"compute_run_instance\" event happens before \"schedule\" event.\n\nFor example:\n\n+---------------+--------------------------------------------------+\n| Property      | Value                                            |\n+---------------+--------------------------------------------------+\n| instance_uuid | 461e1aae-6eae-4172-b2fe-2984dab34a1f             |\n| user_id       | 30d8f5a8deaf446ba51131b751ab8b46                 |\n| start_time    | 2013-11-25T14:26:18.000000                       |\n| request_id    | req-18c907ac-dbd7-4898-a6ed-e5dbb5c8da91         |\n| action        | create                                           |\n| message       | None                                             |\n| project_id    | 5bd1b3ec18b84b8ea3403bdc662983fb                 |\n| events        | [{u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:49.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': u'2013-11-25T14:26:49.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:26:19.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': u'2013-11-25T14:26:47.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:27:35.000000',  |\n|               |   u'traceback': None}]                           |\n+---------------+--------------------------------------------------+\n\nshould be:\n\n+---------------+--------------------------------------------------+\n| Property      | Value                                            |\n+---------------+--------------------------------------------------+\n| instance_uuid | 461e1aae-6eae-4172-b2fe-2984dab34a1f             |\n| user_id       | 30d8f5a8deaf446ba51131b751ab8b46                 |\n| start_time    | 2013-11-25T14:26:18.000000                       |\n| request_id    | req-18c907ac-dbd7-4898-a6ed-e5dbb5c8da91         |\n| action        | create                                           |\n| message       | None                                             |\n| project_id    | 5bd1b3ec18b84b8ea3403bdc662983fb                 |\n| events        | [{u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:49.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': None,                          |\n|               |   u'result': None,                               |\n|               |   u'start_time': u'2013-11-25T14:26:46.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'compute_run_instance',             |\n|               |   u'finish_time': u'2013-11-25T14:26:47.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:27:35.000000',  |\n|               |   u'traceback': None},                           |\n|               |  {u'event': u'schedule',                         |\n|               |   u'finish_time': u'2013-11-25T14:26:49.000000', |\n|               |   u'result': u'Success',                         |\n|               |   u'start_time': u'2013-11-25T14:26:19.000000',  |\n|               |   u'traceback': None}]                           |\n+---------------+--------------------------------------------------+", 
            "date_created": "2013-11-25 15:31:50.632041+00:00", 
            "author": "https://api.launchpad.net/1.0/~unicell"
        }, 
        {
            "content": "Don't know why the gerrit link doesn't show up here. Updating manually.\n\nFix proposed to branch: master\nReview: https://review.openstack.org/58319", 
            "date_created": "2013-12-07 04:25:47.519630+00:00", 
            "author": "https://api.launchpad.net/1.0/~unicell"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/58319\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=1eab1e9aefe6da83204b3705b01433add113ec06\nSubmitter: Jenkins\nBranch:    master\n\ncommit 1eab1e9aefe6da83204b3705b01433add113ec06\nAuthor: Qiu Yu <email address hidden>\nDate:   Mon Nov 25 20:28:39 2013 +0800\n\n    Ensure instance action event list in order\n    \n    For two events also most happening at the same time, e.g. schedule and\n    run_instance, instance-action may fail to do the correct sorting because\n    the \"create_at\" column in db has the same value.\n    \n    This change fixes this issue by sorting in \"create_at\" first, and then\n    in database generated \"id\" column, both in descending order.\n    \n    Closes-bug: 1254764\n    \n    Change-Id: I245a577ef2821fa7f3316bb8a21b7e6370498dd0\n", 
            "date_created": "2014-01-11 14:19:52.325394+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-01-22 16:17:07.042250+00:00"
}