{
    "status": "Invalid", 
    "last_updated": "2011-07-04 08:45:03.320021+00:00", 
    "description": "I failed to start an instance in redhat6. I pasted the error log and related info as below.\n\nnova-compute.log:\n\n2011-03-18 11:30:11,127 nova.root: Starting compute node (version 2011.1.1-workspace:tarmac-20110224184504-4e19t5nx33b8gpy9)\n2011-03-18 12:15:19,210 nova.compute.manager: AUDIT [VDZV50V03FK-MZD9G9JK anne IRT] instance 1: starting...\n2011-03-18 12:25:21,328 nova.root: Exception during message handling\n(nova.root): TRACE: Traceback (most recent call last):\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 192, in receive\n(nova.root): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.root): TRACE:     return f(*args, **kw)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 196, in run_instance\n(nova.root): TRACE:     self.get_network_topic(context),\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 151, in get_network_topic\n(nova.root): TRACE:     host = self.network_manager.get_network_host(context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 552, in get_network_host\n(nova.root): TRACE:     \"args\": {\"network_id\": network_ref['id']}})\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 341, in call\n(nova.root): TRACE:     raise wait_msg.result\n(nova.root): TRACE: RemoteError: ProcessExecutionError Unexpected error while running command.\n(nova.root): TRACE: Command: sudo -E dnsmasq --strict-order --bind-interfaces --conf-file= --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\n(nova.root): TRACE: Exit code: 3\n(nova.root): TRACE: Stdout: ''\n(nova.root): TRACE: Stderr: '\\ndnsmasq: cannot run lease-init script /usr/bin/nova-dhcpbridge: No such file or directory\\n'\n(nova.root): TRACE: [u'Traceback (most recent call last):\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 192, in receive\\n    rval = node_func(context=ctxt, **node_args)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 143, in set_network_host\\n    self._on_set_network_host(context, network_id)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 577, in _on_set_network_host\\n    self.driver.update_dhcp(context, network_id)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/linux_net.py\", line 267, in update_dhcp\\n    _execute(command, addl_env=env)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/linux_net.py\", line 327, in _execute\\n    return utils.execute(cmd, *args, **kwargs)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 147, in execute\\n    cmd=cmd)\\n', u\"ProcessExecutionError: Unexpected error while running command.\\nCommand: sudo -E dnsmasq --strict-order --bind-interfaces --conf-file= --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\nExit code: 3\\nStdout: ''\\nStderr: '\\\\ndnsmasq: cannot run lease-init script /usr/bin/nova-dhcpbridge: No such file or directory\\\\n'\\n\"]\n(nova.root): TRACE:\n\nThe version of nova-compute is 2011.1.1.\n\nAnd the contents of nova.conf is as below.\n\n--verbose=false\n--ec2_url=http://127.0.0.1:8773/services/Cloud\n--s3_host=127.0.0.1\n--cc_host=127.0.0.1\n--rabbit_host=127.0.0.1\n--sql_connection=mysql://root:nova@127.0.0.1/nova\n--glance_port=9292\n--glance_host=127.0.0.1\n--use_s3=true\n--libvirt_type=kvm\n--use_syslog=false\n--node_availability_zone=\n--logging_context_format_string=%(asctime)s %(name)s: %(levelname)s [%(request_id)s %(user)s %(project)s] %(message)s\n--logging_default_format_string=%(asctime)s %(name)s: %(message)s\n--logging_debug_format_suffix=\n--use_cow_images=true\n--auth_driver=nova.auth.dbdriver.DbDriver\n--network_manager=nova.network.manager.VlanManager\n--scheduler_driver=nova.scheduler.zone.ZoneScheduler\n--image_service=nova.image.s3.S3ImageService\n--use_ipv6=false\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n--instances_path=/var/lib/nova/instances\n--networks_path=/var/lib/nova/networks\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n--injected_network_template=/usr/share/nova/interfaces.rhel.template\n--libvirt_xml_template=/usr/share/nova/libvirt.xml.template\n--vpn_client_template=/usr/share/nova/client.ovpn.template\n--credentials_template=/usr/share/nova/novarc.template\n--state_path=/var/lib/nova\n--volume_group=vg_redhat6", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/737346", 
    "owner": "None", 
    "id": 737346, 
    "index": 3337, 
    "openned": "2011-03-18 05:44:36.363078+00:00", 
    "created": "2011-03-18 05:44:36.363078+00:00", 
    "title": "RunInstance failed due to network error  in RHEL6", 
    "comments": [
        {
            "content": "I failed to start an instance in redhat6. I pasted the error log and related info as below.\n\nnova-compute.log:\n\n2011-03-18 11:30:11,127 nova.root: Starting compute node (version 2011.1.1-workspace:tarmac-20110224184504-4e19t5nx33b8gpy9)\n2011-03-18 12:15:19,210 nova.compute.manager: AUDIT [VDZV50V03FK-MZD9G9JK anne IRT] instance 1: starting...\n2011-03-18 12:25:21,328 nova.root: Exception during message handling\n(nova.root): TRACE: Traceback (most recent call last):\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 192, in receive\n(nova.root): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.root): TRACE:     return f(*args, **kw)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 196, in run_instance\n(nova.root): TRACE:     self.get_network_topic(context),\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 151, in get_network_topic\n(nova.root): TRACE:     host = self.network_manager.get_network_host(context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 552, in get_network_host\n(nova.root): TRACE:     \"args\": {\"network_id\": network_ref['id']}})\n(nova.root): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 341, in call\n(nova.root): TRACE:     raise wait_msg.result\n(nova.root): TRACE: RemoteError: ProcessExecutionError Unexpected error while running command.\n(nova.root): TRACE: Command: sudo -E dnsmasq --strict-order --bind-interfaces --conf-file= --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\n(nova.root): TRACE: Exit code: 3\n(nova.root): TRACE: Stdout: ''\n(nova.root): TRACE: Stderr: '\\ndnsmasq: cannot run lease-init script /usr/bin/nova-dhcpbridge: No such file or directory\\n'\n(nova.root): TRACE: [u'Traceback (most recent call last):\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/rpc.py\", line 192, in receive\\n    rval = node_func(context=ctxt, **node_args)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 143, in set_network_host\\n    self._on_set_network_host(context, network_id)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/manager.py\", line 577, in _on_set_network_host\\n    self.driver.update_dhcp(context, network_id)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/linux_net.py\", line 267, in update_dhcp\\n    _execute(command, addl_env=env)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/network/linux_net.py\", line 327, in _execute\\n    return utils.execute(cmd, *args, **kwargs)\\n', u'  File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 147, in execute\\n    cmd=cmd)\\n', u\"ProcessExecutionError: Unexpected error while running command.\\nCommand: sudo -E dnsmasq --strict-order --bind-interfaces --conf-file= --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\nExit code: 3\\nStdout: ''\\nStderr: '\\\\ndnsmasq: cannot run lease-init script /usr/bin/nova-dhcpbridge: No such file or directory\\\\n'\\n\"]\n(nova.root): TRACE:\n\nThe version of nova-compute is 2011.1.1.\n\nAnd the contents of nova.conf is as below.\n\n--verbose=false\n--ec2_url=http://127.0.0.1:8773/services/Cloud\n--s3_host=127.0.0.1\n--cc_host=127.0.0.1\n--rabbit_host=127.0.0.1\n--sql_connection=mysql://root:nova@127.0.0.1/nova\n--glance_port=9292\n--glance_host=127.0.0.1\n--use_s3=true\n--libvirt_type=kvm\n--use_syslog=false\n--node_availability_zone=\n--logging_context_format_string=%(asctime)s %(name)s: %(levelname)s [%(request_id)s %(user)s %(project)s] %(message)s\n--logging_default_format_string=%(asctime)s %(name)s: %(message)s\n--logging_debug_format_suffix=\n--use_cow_images=true\n--auth_driver=nova.auth.dbdriver.DbDriver\n--network_manager=nova.network.manager.VlanManager\n--scheduler_driver=nova.scheduler.zone.ZoneScheduler\n--image_service=nova.image.s3.S3ImageService\n--use_ipv6=false\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n--instances_path=/var/lib/nova/instances\n--networks_path=/var/lib/nova/networks\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n--injected_network_template=/usr/share/nova/interfaces.rhel.template\n--libvirt_xml_template=/usr/share/nova/libvirt.xml.template\n--vpn_client_template=/usr/share/nova/client.ovpn.template\n--credentials_template=/usr/share/nova/novarc.template\n--state_path=/var/lib/nova\n--volume_group=vg_redhat6", 
            "date_created": "2011-03-18 05:44:36.363078+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Please provide additional details:\n- which scenario did you used\n- which image did you tried\n\nI got this build working with RHEL 5.6 image on RHEL 6.0 host, here is my nova-compute.log:\n\n2011-03-18 17:02:50,469 nova.root: Starting compute node (version 2011.1.1-workspace:tarmac-20110224184504-4e19t5nx33b8gpy9)\n2011-03-18 17:07:19,712 nova.compute.manager: AUDIT [3TW7--O43HHE1C5JKEAN abr rhelimg] instance 1: starting...\n2011-03-18 17:07:21,732 nova.root: called setup_basic_filtering in nwfilter\n2011-03-18 17:07:21,732 nova.root: ensuring static filters\n2011-03-18 17:07:21,856 nova.root: new_filter: # Generated by iptables-save v1.4.7 on Fri Mar 18 17:07:21 2011\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [80:65200]\n:nova-fallback - [0:0]\n:nova-local - [0:0]\n:nova-inst-1 - [0:0]\n:nova-sg-1 - [0:0]\n-A nova-fallback -j DROP\n-A FORWARD -j nova-local\n-A OUTPUT -j nova-local\n-A nova-local -d 192.168.99.3 -j nova-inst-1\n-A nova-inst-1 -m state --state INVALID -j DROP\n-A nova-inst-1 -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A nova-inst-1 -j nova-sg-1\n-A nova-inst-1 -s 192.168.99.1 -p udp --sport 67 --dport 68 -j ACCEPT \n-A nova-inst-1 -s 192.168.99.0/25 -j ACCEPT\n-A nova-inst-1 -j nova-fallback\n-A INPUT -i virbr0 -p udp -m udp --dport 53 -j ACCEPT \n-A INPUT -i virbr0 -p tcp -m tcp --dport 53 -j ACCEPT \n-A INPUT -i virbr0 -p udp -m udp --dport 67 -j ACCEPT \n-A INPUT -i virbr0 -p tcp -m tcp --dport 67 -j ACCEPT \n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A INPUT -p icmp -j ACCEPT \n-A INPUT -i lo -j ACCEPT \n-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT \n-A INPUT -j REJECT --reject-with icmp-host-prohibited \n-A FORWARD -o br100 -j ACCEPT \n-A FORWARD -i br100 -j ACCEPT \n-A FORWARD -d 192.168.99.2/32 -p udp -m udp --dport 1194 -j ACCEPT \n-A FORWARD -d 192.168.122.0/24 -o virbr0 -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A FORWARD -s 192.168.122.0/24 -i virbr0 -j ACCEPT \n-A FORWARD -i virbr0 -o virbr0 -j ACCEPT \n-A FORWARD -o virbr0 -j REJECT --reject-with icmp-port-unreachable \n-A FORWARD -i virbr0 -j REJECT --reject-with icmp-port-unreachable \n-A FORWARD -m physdev --physdev-is-bridged -j ACCEPT \n-A FORWARD -j REJECT --reject-with icmp-host-prohibited \nCOMMIT\n# Completed on Fri Mar 18 17:07:21 2011\n\n2011-03-18 17:07:21,911 nova.virt.libvirt_conn: instance instance-00000001: Creating image\n2011-03-18 17:07:22,657 nova.virt.libvirt_conn: instance instance-00000001: injecting key into image ami-kk6kb8bs", 
            "date_created": "2011-03-18 14:18:01.285817+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "@guan: we can't make progress on this without additional information... Could you provide the requested information ?", 
            "date_created": "2011-06-29 12:28:41.482956+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Sorry, I forgot the reply. I will try to repeat the error. Please wait for a while.", 
            "date_created": "2011-06-30 02:40:23.943810+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "@guan: we'll going to release diablo-2 release at the end of this week so probably you want to test on that never build.", 
            "date_created": "2011-06-30 05:03:18.666250+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "I didn't use RHEL6 now. so it wasn't easy to reproduced the error. Please invalidate the bug firstly anyway. If I meet the same error in future, I will report it again.", 
            "date_created": "2011-06-30 05:37:47.686849+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }
    ], 
    "closed": "2011-07-04 08:45:01.954814+00:00"
}