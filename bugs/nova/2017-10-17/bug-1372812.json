{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:18:56.276991+00:00", 
    "description": "\nWhen doing reboot, the task status will be REBOOT_STARTED for\nlong time in some cases, it's better to add this status \nwhen polling the rebooting instances and try to trigger\nreboot again.\n\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova reboot t2\nERROR (Conflict): Cannot 'reboot' while instance is in task_state reboot_started (HTTP 409) (Request-ID: req-9006c602-dd74-41ef-b154-2e5e0ed53d65)\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:11:54 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:12:00 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:12:08 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1372812", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1372812, 
    "index": 1396, 
    "openned": "2014-09-23 08:22:32.066490+00:00", 
    "created": "2014-09-23 08:22:32.066490+00:00", 
    "title": "instance task status keep for long time when reboot", 
    "comments": [
        {
            "content": "\nWhen doing reboot, the task status will be REBOOT_STARTED for\nlong time in some cases, it's better to add this status \nwhen polling the rebooting instances and try to trigger\nreboot again.\n\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova reboot t2\nERROR (Conflict): Cannot 'reboot' while instance is in task_state reboot_started (HTTP 409) (Request-ID: req-9006c602-dd74-41ef-b154-2e5e0ed53d65)\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:11:54 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:12:00 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ date\n2014\u5e74 09\u6708 23\u65e5 \u661f\u671f\u4e8c 16:12:08 CST\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n[tagett@stack-01 devstack]$ nova list\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| ID                                   | Name      | Status | Task State     | Power State | Networks                          |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+\n| bb44fafb-7a63-4c93-974f-031a9cceeaa3 | instance0 | ACTIVE | -              | Running     | private=192.168.1.74, 172.24.4.41 |\n| 990a03e7-4487-4137-9b51-e8f20986ffcb | t2        | REBOOT | reboot_started | Running     | private=192.168.1.91              |\n+--------------------------------------+-----------+--------+----------------+-------------+-----------------------------------+", 
            "date_created": "2014-09-23 08:22:32.066490+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/123392", 
            "date_created": "2014-09-23 08:24:06.412227+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/123392\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=cb42b79c1bf3a260c52087416ce46d4602bf2941\nSubmitter: Jenkins\nBranch:    master\n\ncommit cb42b79c1bf3a260c52087416ce46d4602bf2941\nAuthor: Eli Qiao <email address hidden>\nDate:   Tue Sep 23 16:15:57 2014 +0800\n\n    Add more status when do _poll_rebooting_instances\n    \n    Add task_states.REBOOT_STARTED and REBOOT_PENDING to the filters\n    when doing _poll_rebooting_instances.\n    \n    When doing reboot, the task status will be REBOOT_STARTED for\n    long time in some cases, it's better to add this status\n    when polling the rebooting instances and try to trigger\n    reboot again.\n    for REBOOT_PENDING, it is also reasonable to be added.\n    \n    besides, this patch also adds new unit test case for\n    _poll_rebooting_instances.\n    \n    Change-Id: I84e8cb402291ab1401d432cac8701d34a82d2d60\n    Closes-Bug: 1372812\n", 
            "date_created": "2015-02-03 00:26:00.759354+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-02-05 20:21:11.669038+00:00"
}