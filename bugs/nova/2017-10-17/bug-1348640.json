{
    "status": "Invalid", 
    "last_updated": "2016-07-01 15:12:10.757916+00:00", 
    "description": "Instance fails when using ceph as a storage backend.\n\nThe main complain comes from \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 527.\n\nPutting a print bedore \"if self.auth_secret_type is not None:\" shows that the code is hit twice, first with auth_secret_type=cepg, second time with auth_secret_type=None. \n\nWe fixed it in our side by commenting the entire if statement.\n\nStack trace:\n\n2014-07-25 08:44:17.042 13642 ERROR nova.compute.manager [req-1c542f62-1f54-4515-8290-425a62354d95 43d9d5b6c6794f52ab17a90855200436 034f45eb9e24410db64f7c0c53110f02] [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Instance failed to spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Traceback (most recent call last):\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1715, in _spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     block_device_info)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2262, in spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     write_to_disk=True)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3444, in to_xml\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     xml = conf.to_xml()\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 69, in to_xml\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     root = self.format_dom()\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 1240, in format_dom\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     self._format_devices(root)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 1217, in _format_devices\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     devices.append(dev.format_dom())\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 527, in format_dom\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     auth.set(\"username\", self.auth_username)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"lxml.etree.pyx\", line 713, in lxml.etree._Element.set (src/lxml/lxml.etree.c:39438)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"apihelpers.pxi\", line 520, in lxml.etree._setAttributeValue (src/lxml/lxml.etree.c:17627)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"apihelpers.pxi\", line 1333, in lxml.etree._utf8 (src/lxml/lxml.etree.c:24601)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] TypeError: Argument must be bytes or unicode, got 'NoneType'\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]\n2014-07-25 08:44:17.097 13642 AUDIT nova.compute.manager [req-1c542f62-1f54-4515-8290-425a62354d95 43d9d5b6c6794f52ab17a90855200436 034f45eb9e24410db64f7c0c53110f02] [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Terminating instance", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Low", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1348640", 
    "owner": "None", 
    "id": 1348640, 
    "index": 1318, 
    "openned": "2014-07-25 13:14:57.081986+00:00", 
    "created": "2014-07-25 13:14:57.081986+00:00", 
    "title": "can't launch instance using ceph without authentication ", 
    "comments": [
        {
            "content": "Instance fails when using ceph as a storage backend.\n\nThe main complain comes from \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 527.\n\nPutting a print bedore \"if self.auth_secret_type is not None:\" shows that the code is hit twice, first with auth_secret_type=cepg, second time with auth_secret_type=None. \n\nWe fixed it in our side by commenting the entire if statement.\n\nStack trace:\n\n2014-07-25 08:44:17.042 13642 ERROR nova.compute.manager [req-1c542f62-1f54-4515-8290-425a62354d95 43d9d5b6c6794f52ab17a90855200436 034f45eb9e24410db64f7c0c53110f02] [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Instance failed to spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Traceback (most recent call last):\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1715, in _spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     block_device_info)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2262, in spawn\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     write_to_disk=True)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3444, in to_xml\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     xml = conf.to_xml()\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 69, in to_xml\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     root = self.format_dom()\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 1240, in format_dom\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     self._format_devices(root)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 1217, in _format_devices\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     devices.append(dev.format_dom())\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py\", line 527, in format_dom\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]     auth.set(\"username\", self.auth_username)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"lxml.etree.pyx\", line 713, in lxml.etree._Element.set (src/lxml/lxml.etree.c:39438)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"apihelpers.pxi\", line 520, in lxml.etree._setAttributeValue (src/lxml/lxml.etree.c:17627)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]   File \"apihelpers.pxi\", line 1333, in lxml.etree._utf8 (src/lxml/lxml.etree.c:24601)\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] TypeError: Argument must be bytes or unicode, got 'NoneType'\n2014-07-25 08:44:17.042 13642 TRACE nova.compute.manager [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40]\n2014-07-25 08:44:17.097 13642 AUDIT nova.compute.manager [req-1c542f62-1f54-4515-8290-425a62354d95 43d9d5b6c6794f52ab17a90855200436 034f45eb9e24410db64f7c0c53110f02] [instance: b3e9b0ee-50d9-4579-9cc7-de36762b2e40] Terminating instance", 
            "date_created": "2014-07-25 13:14:57.081986+00:00", 
            "author": "https://api.launchpad.net/1.0/~cristi-falcas"
        }, 
        {
            "content": "Looks like a roadmap of synchronizing the code as listed in the bug is given", 
            "date_created": "2014-09-09 15:59:13.777925+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I'm not able to reproduce the bug. I installed devstack with ceph as storage backend. Tried to create instance using nova boot. Its working as expected.", 
            "date_created": "2015-11-17 22:08:12.113252+00:00", 
            "author": "https://api.launchpad.net/1.0/~sujitha-neti"
        }, 
        {
            "content": "This bug is nearly 2 years old and in the latest comment #2 it was not able to be reproduced. Marking as Invalid", 
            "date_created": "2016-07-01 15:12:06.790616+00:00", 
            "author": "https://api.launchpad.net/1.0/~melwitt"
        }
    ], 
    "closed": "2016-07-01 15:12:08.459843+00:00"
}