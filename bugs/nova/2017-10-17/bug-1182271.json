{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 12:18:31.047685+00:00", 
    "description": "The requests library released 1.2.1 today which brings in sphinx as a new dependency. One of sphinx's transitive dependencies is on a newer version of jinja than is provided in the python-jinja2 package on CentOS 6, and since nova's unit tests allow site-packages in the venv for libvirt support this cap is needed so that gate-nova-python26 will continue to work.\n\n2013-05-20 22:58:19.611 | Downloading/unpacking requests>=0.8 (from python-cinderclient>=1.0.1->-r /home/jenkins/workspace/gate-nova-python26/tools/pip-requires (line 25))\n2013-05-20 22:58:19.611 |   Running setup.py egg_info for package requests\n2013-05-20 22:58:19.611 |     Couldn't find index page for 'sphinx' (maybe misspelled?)\n2013-05-20 22:58:19.611 |     warning: no files found matching 'README'\n2013-05-20 22:58:19.611 |     no previously-included directories found matching 'doc/_build'\n2013-05-20 22:58:19.611 |     \n2013-05-20 22:58:19.611 |     Installed /home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/Sphinx-1.2b1-py2.6.egg\n2013-05-20 22:58:19.611 |     Searching for docutils>=0.7\n2013-05-20 22:58:19.611 |     Reading http://pypi.openstack.org/openstack/docutils/\n2013-05-20 22:58:19.611 |     Reading http://pypi.openstack.org/openstack/docutils/?C=S;O=A\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=N;O=D\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=D;O=A\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=M;O=A\n2013-05-20 22:58:19.612 |     Best match: docutils 0.10\n2013-05-20 22:58:19.612 |     Downloading http://pypi.openstack.org/openstack/docutils/docutils-0.10.tar.gz\n2013-05-20 22:58:19.612 |     Processing docutils-0.10.tar.gz\n2013-05-20 22:58:19.612 |     Writing /tmp/tmp.xs1DIWN3pg/easy_install-ma2nIo/docutils-0.10/setup.cfg\n2013-05-20 22:58:19.612 |     Running docutils-0.10/setup.py -q bdist_egg --dist-dir /tmp/tmp.xs1DIWN3pg/easy_install-ma2nIo/docutils-0.10/egg-dist-tmp-DJs1s0\n2013-05-20 22:58:19.612 |     warning: no files found matching 'MANIFEST'\n2013-05-20 22:58:19.612 |     warning: no files found matching '*' under directory 'extras'\n2013-05-20 22:58:19.612 |     warning: no previously-included files matching '.cvsignore' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '*.pyc' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '*~' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '.DS_Store' found under directory '*'\n2013-05-20 22:58:19.613 |     zip_safe flag not set; analyzing archive contents...\n2013-05-20 22:58:19.613 |     docutils.parsers.rst.directives.misc: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.docutils_xml: module references __path__\n2013-05-20 22:58:19.613 |     docutils.writers.latex2e.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.odf_odt.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.s5_html.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.html4css1.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.pep_html.__init__: module references __file__\n2013-05-20 22:58:19.613 |     \n2013-05-20 22:58:19.613 |     Installed /home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/docutils-0.10-py2.6.egg\n2013-05-20 22:58:19.613 |     Traceback (most recent call last):\n2013-05-20 22:58:19.614 |       File \"<string>\", line 16, in <module>\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/setup.py\", line 55, in <module>\n2013-05-20 22:58:19.614 |         'Programming Language :: Python :: 3.3',\n2013-05-20 22:58:19.614 |       File \"/usr/lib64/python2.6/distutils/core.py\", line 113, in setup\n2013-05-20 22:58:19.614 |         _setup_distribution = dist = klass(attrs)\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/setuptools/dist.py\", line 221, in __init__\n2013-05-20 22:58:19.614 |         self.fetch_build_eggs(attrs.pop('setup_requires'))\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/setuptools/dist.py\", line 245, in fetch_build_eggs\n2013-05-20 22:58:19.614 |         parse_requirements(requires), installer=self.fetch_build_egg\n2013-05-20 22:58:19.615 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/pkg_resources.py\", line 598, in resolve\n2013-05-20 22:58:19.615 |         raise VersionConflict(dist,req) # XXX put more info here\n2013-05-20 22:58:19.615 |     pkg_resources.VersionConflict: (Jinja2 2.2.1 (/usr/lib64/python2.6/site-packages), Requirement.parse('Jinja2>=2.3'))\n2013-05-20 22:58:19.615 |     Complete output from command python setup.py egg_info:\n2013-05-20 22:58:19.615 |     Couldn't find index page for 'sphinx' (maybe misspelled?)", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 30, 
    "link": "https://bugs.launchpad.net/nova/+bug/1182271", 
    "owner": "https://api.launchpad.net/1.0/~fungi", 
    "id": 1182271, 
    "index": 3402, 
    "openned": "2013-05-21 00:14:50.722798+00:00", 
    "created": "2013-05-21 00:14:50.722798+00:00", 
    "title": "Nova unit tests fail on CentOS 6 when python-jinja2 package is installed", 
    "comments": [
        {
            "content": "The requests library released 1.2.1 today which brings in sphinx as a new dependency. One of sphinx's transitive dependencies is on a newer version of jinja than is provided in the python-jinja2 package on CentOS 6, and since nova's unit tests allow site-packages in the venv for libvirt support this cap is needed so that gate-nova-python26 will continue to work.\n\n2013-05-20 22:58:19.611 | Downloading/unpacking requests>=0.8 (from python-cinderclient>=1.0.1->-r /home/jenkins/workspace/gate-nova-python26/tools/pip-requires (line 25))\n2013-05-20 22:58:19.611 |   Running setup.py egg_info for package requests\n2013-05-20 22:58:19.611 |     Couldn't find index page for 'sphinx' (maybe misspelled?)\n2013-05-20 22:58:19.611 |     warning: no files found matching 'README'\n2013-05-20 22:58:19.611 |     no previously-included directories found matching 'doc/_build'\n2013-05-20 22:58:19.611 |     \n2013-05-20 22:58:19.611 |     Installed /home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/Sphinx-1.2b1-py2.6.egg\n2013-05-20 22:58:19.611 |     Searching for docutils>=0.7\n2013-05-20 22:58:19.611 |     Reading http://pypi.openstack.org/openstack/docutils/\n2013-05-20 22:58:19.611 |     Reading http://pypi.openstack.org/openstack/docutils/?C=S;O=A\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=N;O=D\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=D;O=A\n2013-05-20 22:58:19.612 |     Reading http://pypi.openstack.org/openstack/docutils/?C=M;O=A\n2013-05-20 22:58:19.612 |     Best match: docutils 0.10\n2013-05-20 22:58:19.612 |     Downloading http://pypi.openstack.org/openstack/docutils/docutils-0.10.tar.gz\n2013-05-20 22:58:19.612 |     Processing docutils-0.10.tar.gz\n2013-05-20 22:58:19.612 |     Writing /tmp/tmp.xs1DIWN3pg/easy_install-ma2nIo/docutils-0.10/setup.cfg\n2013-05-20 22:58:19.612 |     Running docutils-0.10/setup.py -q bdist_egg --dist-dir /tmp/tmp.xs1DIWN3pg/easy_install-ma2nIo/docutils-0.10/egg-dist-tmp-DJs1s0\n2013-05-20 22:58:19.612 |     warning: no files found matching 'MANIFEST'\n2013-05-20 22:58:19.612 |     warning: no files found matching '*' under directory 'extras'\n2013-05-20 22:58:19.612 |     warning: no previously-included files matching '.cvsignore' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '*.pyc' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '*~' found under directory '*'\n2013-05-20 22:58:19.613 |     warning: no previously-included files matching '.DS_Store' found under directory '*'\n2013-05-20 22:58:19.613 |     zip_safe flag not set; analyzing archive contents...\n2013-05-20 22:58:19.613 |     docutils.parsers.rst.directives.misc: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.docutils_xml: module references __path__\n2013-05-20 22:58:19.613 |     docutils.writers.latex2e.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.odf_odt.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.s5_html.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.html4css1.__init__: module references __file__\n2013-05-20 22:58:19.613 |     docutils.writers.pep_html.__init__: module references __file__\n2013-05-20 22:58:19.613 |     \n2013-05-20 22:58:19.613 |     Installed /home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/docutils-0.10-py2.6.egg\n2013-05-20 22:58:19.613 |     Traceback (most recent call last):\n2013-05-20 22:58:19.614 |       File \"<string>\", line 16, in <module>\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/build/requests/setup.py\", line 55, in <module>\n2013-05-20 22:58:19.614 |         'Programming Language :: Python :: 3.3',\n2013-05-20 22:58:19.614 |       File \"/usr/lib64/python2.6/distutils/core.py\", line 113, in setup\n2013-05-20 22:58:19.614 |         _setup_distribution = dist = klass(attrs)\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/setuptools/dist.py\", line 221, in __init__\n2013-05-20 22:58:19.614 |         self.fetch_build_eggs(attrs.pop('setup_requires'))\n2013-05-20 22:58:19.614 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/setuptools/dist.py\", line 245, in fetch_build_eggs\n2013-05-20 22:58:19.614 |         parse_requirements(requires), installer=self.fetch_build_egg\n2013-05-20 22:58:19.615 |       File \"/home/jenkins/workspace/gate-nova-python26/.tox/py26/lib/python2.6/site-packages/distribute-0.6.34-py2.6.egg/pkg_resources.py\", line 598, in resolve\n2013-05-20 22:58:19.615 |         raise VersionConflict(dist,req) # XXX put more info here\n2013-05-20 22:58:19.615 |     pkg_resources.VersionConflict: (Jinja2 2.2.1 (/usr/lib64/python2.6/site-packages), Requirement.parse('Jinja2>=2.3'))\n2013-05-20 22:58:19.615 |     Complete output from command python setup.py egg_info:\n2013-05-20 22:58:19.615 |     Couldn't find index page for 'sphinx' (maybe misspelled?)", 
            "date_created": "2013-05-21 00:14:50.722798+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "One wrinkle in this is that requests is actually a transitive dependency of nova via python-cinderclient, so we may need to cap it there and get them to tag a new release (and possibily update nova's dependency on python-cinderclient to point to a master branch tarball in the interim).", 
            "date_created": "2013-05-21 00:24:38.847826+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/29852", 
            "date_created": "2013-05-21 00:34:09.358933+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This situation does not actually seem to be impacting stable/grizzly based on the most recent bitrot job... http://logs.openstack.org/periodic/periodic-nova-python26-stable-grizzly/41/console.html.gz\n\nI don't think it's affecting stable/folsom either, but that job's no longer relevant since (gate|periodic)-nova-python26-stable-folsom never worked on CentOS anyway.", 
            "date_created": "2013-05-21 19:45:13.967036+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/29852\nCommitted: http://github.com/openstack/nova/commit/c39687edb9138c6eac675b8781a5d4bf5a51c968\nSubmitter: Jenkins\nBranch:    master\n\ncommit c39687edb9138c6eac675b8781a5d4bf5a51c968\nAuthor: Jeremy Stanley <email address hidden>\nDate:   Tue May 21 00:28:24 2013 +0000\n\n    Add requests requirement capped <1.2.1.\n    \n    Fixes bug 1182271.\n    \n    * tools/pip-requires: The requests library released 1.2.1 today\n    which brings in sphinx as a new dependency. One of sphinx's\n    transitive dependencies is on a newer version of jinja than is\n    provided in the python-jinja2 package on CentOS 6, and since nova's\n    unit tests allow site-packages in the venv for libvirt support this\n    cap is needed so that gate-nova-python26 will continue to work.\n    Because requests is actually a dependency of python-cinderclient but\n    is only breaking nova's unit tests, it has to be added and come\n    before python-cinderclient in the pip-requires list. A separate\n    change has been proposed to openstack/requirements which will need\n    to merge first. https://review.openstack.org/29850\n    \n    Change-Id: Ia198192d6231f71272d3aa4f5942828a45d86ceb\n", 
            "date_created": "2013-05-21 20:02:37.585478+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Removed grizzly-backport-potential tag after confirming that this is not impacting stable/grizzly because sitepackages = True was not actually used until commit dbbbbf4 when it was added to the testenv section of tox.ini.", 
            "date_created": "2013-05-21 21:56:24.287398+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "Issues with the package version pin introduced with the fix for this issue\nare being discussed at https://review.openstack.org/#/c/37461\n\nWe're probably going to revert this change.\n\nWould it be possible to install the centos version of sphinx that is compatible with its version of jinja2?\n\nIf that's not possible would it be possible to install a newer jinja2 package on the gate system?\nFor example if you ensured that python-jinja2-26 was installed first from EPEL or directly from http://kojipkgs.fedoraproject.org/packages/python-jinja2-26/, and then that the default python-jinja2\npackage was not installed, then this shouldn't be an issue right?\n", 
            "date_created": "2013-07-19 14:00:12.902692+00:00", 
            "author": "https://api.launchpad.net/1.0/~p-draigbrady"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/38011", 
            "date_created": "2013-07-20 02:33:13.314723+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Abandoned that change. Apparently it should now be possible to simply uncap requests since we've started doing a pip install -U to work around the previoys site packages related breakage. I'll propose that revert to nova instead and see how it fares.", 
            "date_created": "2013-07-20 02:41:13.947167+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/38012", 
            "date_created": "2013-07-20 02:48:04.822956+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This merged to nova master on August 1, but failed to mark the bug fix-committed for some reason.", 
            "date_created": "2013-08-07 00:11:11.976431+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }
    ], 
    "closed": "2013-10-17 12:18:29.106437+00:00"
}