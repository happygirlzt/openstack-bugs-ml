{
    "status": "Invalid", 
    "last_updated": "2014-11-22 22:35:53.388883+00:00", 
    "description": "Starting a live-migration using \"nova live-migration a7a78e36-e088-416c-9479-e95aa1a0f7ef\" failes due to the fact that he's trying to detach the volume from the instance of the destination host instead of the source host.\n\n* Start live migration\n* Check logs on both Source and Destination Host\n\n=== Source Host ===\n2014-01-27 15:03:57.554 2681 ERROR nova.virt.libvirt.driver [-] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Live Migration failure: End of file while reading data: Input/output error\n\n=== Destination Host ===\n2014-01-27 15:02:13.129 3742 AUDIT nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Detach volume 2ab8cb25-8f79-4b8e-bc93-c52351df84ee from mountpoint vda\n2014-01-27 15:02:13.134 3742 WARNING nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Detaching volume from unknown instance\n2014-01-27 15:02:13.138 3742 ERROR nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Failed to detach volume 2ab8cb25-8f79-4b8e-bc93-c52351df84ee from vda\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Traceback (most recent call last):\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3725, in _detach_volume\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     encryption=encryption)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1202, in detach_volume\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     virt_dom = self._lookup_by_name(instance_name)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3085, in _lookup_by_name\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     raise exception.InstanceNotFound(instance_id=instance_name)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] InstanceNotFound: Instance instance-00000084 could not be found.\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]\n2014-01-27 15:02:13.139 3742 DEBUG nova.volume.cinder [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] Cinderclient connection created using URL: http://10.3.0.2:8776/v1/cd0e923440eb4bbc8f3388e38544b977 cinderclient /usr/lib/python2.7/dist-packages/nova/volume/cinder.py:96\n2014-01-27 15:02:13.142 3742 INFO urllib3.connectionpool [-] Starting new HTTP connection (1): 10.3.0.2\n2014-01-27 15:02:13.230 3742 DEBUG urllib3.connectionpool [-] \"POST /v1/cd0e923440eb4bbc8f3388e38544b977/volumes/2ab8cb25-8f79-4b8e-bc93-c52351df84ee/action HTTP/1.1\" 202 0 _make_request /usr/lib/python2.7/dist-packages/urllib3/connectionpool.py:296", 
    "tags": [
        "live-migration"
    ], 
    "importance": "Undecided", 
    "heat": 40, 
    "link": "https://bugs.launchpad.net/nova/+bug/1273268", 
    "owner": "None", 
    "id": 1273268, 
    "index": 5775, 
    "openned": "2014-01-27 15:18:27.530600+00:00", 
    "created": "2014-01-27 15:18:27.530600+00:00", 
    "title": "live-migration - instance could not be found", 
    "comments": [
        {
            "content": "Starting a live-migration using \"nova live-migration a7a78e36-e088-416c-9479-e95aa1a0f7ef\" failes due to the fact that he's trying to detach the volume from the instance of the destination host instead of the source host.\n\n* Start live migration\n* Check logs on both Source and Destination Host\n\n=== Source Host ===\n2014-01-27 15:03:57.554 2681 ERROR nova.virt.libvirt.driver [-] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Live Migration failure: End of file while reading data: Input/output error\n\n=== Destination Host ===\n2014-01-27 15:02:13.129 3742 AUDIT nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Detach volume 2ab8cb25-8f79-4b8e-bc93-c52351df84ee from mountpoint vda\n2014-01-27 15:02:13.134 3742 WARNING nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Detaching volume from unknown instance\n2014-01-27 15:02:13.138 3742 ERROR nova.compute.manager [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Failed to detach volume 2ab8cb25-8f79-4b8e-bc93-c52351df84ee from vda\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] Traceback (most recent call last):\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3725, in _detach_volume\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     encryption=encryption)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1202, in detach_volume\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     virt_dom = self._lookup_by_name(instance_name)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3085, in _lookup_by_name\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]     raise exception.InstanceNotFound(instance_id=instance_name)\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef] InstanceNotFound: Instance instance-00000084 could not be found.\n2014-01-27 15:02:13.138 3742 TRACE nova.compute.manager [instance: a7a78e36-e088-416c-9479-e95aa1a0f7ef]\n2014-01-27 15:02:13.139 3742 DEBUG nova.volume.cinder [req-8e878227-5ba7-4079-993b-aefa8ba621ed f17443ad86764e3a847667a608cb7181 cd0e923440eb4bbc8f3388e38544b977] Cinderclient connection created using URL: http://10.3.0.2:8776/v1/cd0e923440eb4bbc8f3388e38544b977 cinderclient /usr/lib/python2.7/dist-packages/nova/volume/cinder.py:96\n2014-01-27 15:02:13.142 3742 INFO urllib3.connectionpool [-] Starting new HTTP connection (1): 10.3.0.2\n2014-01-27 15:02:13.230 3742 DEBUG urllib3.connectionpool [-] \"POST /v1/cd0e923440eb4bbc8f3388e38544b977/volumes/2ab8cb25-8f79-4b8e-bc93-c52351df84ee/action HTTP/1.1\" 202 0 _make_request /usr/lib/python2.7/dist-packages/urllib3/connectionpool.py:296", 
            "date_created": "2014-01-27 15:18:27.530600+00:00", 
            "author": "https://api.launchpad.net/1.0/~darkyat"
        }, 
        {
            "content": "Was meant to be fixed but still appears.\n\nhttps://bugs.launchpad.net/nova/+bug/1044237 ", 
            "date_created": "2014-01-28 14:32:06.998094+00:00", 
            "author": "https://api.launchpad.net/1.0/~darkyat"
        }, 
        {
            "content": "I have tried to reproduce this bug using current Icehouse code, with the following configuration:\n-Controller node:\nkey horizon g-reg g-api n-api n-cpu n-cond n-crt n-net n-sch n-novnc n-xvnc n-cauth n-obj c-api c-sch c-vol   \n-Compute node:\nn-cpu n-net   \n\nI have migrated one instance using the command as stated in bug description (not specifying destination node): \nnova live-migration 85f8eede-3da2-4e26-9e84-b11d195704ad\n\nCould not reproduce the bug, the vm was properly migrated (trying a pair of times):\nvm1        compute         m1.nano    active\nvm1        controller      m1.nano    active     \nvm1        compute         m1.nano    active\n\nPlease provide some more details if there is any specific release/configuration where this bug was reproduced.\nThanks.\n", 
            "date_created": "2014-02-24 13:35:37.557504+00:00", 
            "author": "https://api.launchpad.net/1.0/~cristian-fiorentino"
        }, 
        {
            "content": "Seeing this behavior here as well. Anyone find out if this is a bug or a result from some other issue ?", 
            "date_created": "2014-11-22 22:35:52.749523+00:00", 
            "author": "https://api.launchpad.net/1.0/~dmsimard"
        }
    ], 
    "closed": "2014-09-17 13:01:48.718389+00:00"
}