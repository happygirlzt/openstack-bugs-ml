{
    "status": "Invalid", 
    "last_updated": "2014-08-13 13:30:56.015706+00:00", 
    "description": "When issuing:\n\n$ nova --debug --insecure image-delete tty-linux-kernel\nconnect: (109.234.208.72, 5000)\nsend: 'POST /v2.0/tokens HTTP/1.1\\r\\nHost: 109.234.208.72:5000\\r\\nContent-Length: 120\\r\\ncontent-type: application/json\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n{\"auth\": {\"tenantName\": \"<email address hidden>\", \"passwordCredentials\": {\"username\": \"<email address hidden>\", \"password\": \"*******\"}}}'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Content-Type: application/json\nheader: Vary: X-Auth-Token\nheader: Content-Length: 2619\nheader: Date: Thu, 03 May 2012 14:02:54 GMT\nconnect: (109.234.208.72, 444)\nsend: u'GET /v2/7bef76f5941341fcb133bfc04f156810/images/detail HTTP/1.1\\r\\nHost: 109.234.208.72:444\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 0e73e6f23b72443f8066ece54610ed1f\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: X-Compute-Request-Id: req-12ccf4e9-f657-4db5-9fba-92ce985f1e82\nheader: Content-Type: application/json\nheader: Content-Length: 11826\nheader: Date: Thu, 03 May 2012 14:02:55 GMT\nsend: u'DELETE /v2/7bef76f5941341fcb133bfc04f156810/images/30130507-4c7a-43d6-8d47-0ac24133bf3b HTTP/1.1\\r\\nHost: 109.234.208.72:444\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 0e73e6f23b72443f8066ece54610ed1f\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.0 501 Not Implemented\\r\\n'\nheader: Content-Type: text/html\nheader: Content-Length: 28\nheader: Expires: now\nheader: Pragma: no-cache\nheader: Cache-control: no-cache,no-store\nDEBUG (shell:416) n/a (HTTP 501)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 413, in main\n    OpenStackComputeShell().main(sys.argv[1:])\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 364, in main\n    args.func(self.cs, args)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/shell.py\", line 444, in do_image_delete\n    image.delete()\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/images.py\", line 22, in delete\n    self.manager.delete(self)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/images.py\", line 60, in delete\n    self._delete(\"/images/%s\" % base.getid(image))\n  File \"/usr/lib/python2.7/dist-packages/novaclient/base.py\", line 166, in _delete\n    resp, body = self.api.client.delete(url)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 145, in delete\n    return self._cs_request(url, 'DELETE', **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 124, in _cs_request\n    **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 107, in request\n    raise exceptions.from_response(resp, body)\nHTTPNotImplemented: n/a (HTTP 501)\nERROR: n/a (HTTP 501)\n\nIf we use the internalURL endpoint the comand works as expected,. Our glance SSL endpoint currently uses an invalid certificate,  so the --insecure flag should be also used to ignore the invalid SSL certificate when connecting to glance URL and not only to keystone.\n\n$ nova --debug --insecure --endpoint_type internalURL  image-delete tty-linux-kernel\nconnect: (109.234.208.72, 5000)\nsend: 'POST /v2.0/tokens HTTP/1.1\\r\\nHost: 109.234.208.72:5000\\r\\nContent-Length: 120\\r\\ncontent-type: application/json\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n{\"auth\": {\"tenantName\": \"<email address hidden>\", \"passwordCredentials\": {\"username\": \"<email address hidden>\", \"password\": \"Klock09\"}}}'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Content-Type: application/json\nheader: Vary: X-Auth-Token\nheader: Content-Length: 2619\nheader: Date: Thu, 03 May 2012 14:08:45 GMT\nconnect: (10.130.0.16, 8774)\nsend: u'GET /v2/7bef76f5941341fcb133bfc04f156810/images/detail HTTP/1.1\\r\\nHost: 10.130.0.16:8774\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 038914aaa66e43259ec52ec391051b41\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: X-Compute-Request-Id: req-95a86170-6907-4f3a-a972-5803873e989e\nheader: Content-Type: application/json\nheader: Content-Length: 11758\nheader: Date: Thu, 03 May 2012 14:08:45 GMT\nsend: u'DELETE /v2/7bef76f5941341fcb133bfc04f156810/images/30130507-4c7a-43d6-8d47-0ac24133bf3b HTTP/1.1\\r\\nHost: 10.130.0.16:8774\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 038914aaa66e43259ec52ec391051b41\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 204 No Content\\r\\n'\nheader: Content-Type: text/html; charset=UTF-8\nheader: Content-Length: 0\nheader: Date: Thu, 03 May 2012 14:08:46 GMT", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/994005", 
    "owner": "None", 
    "id": 994005, 
    "index": 2897, 
    "openned": "2012-05-03 14:12:56.569493+00:00", 
    "created": "2012-05-03 14:12:56.569493+00:00", 
    "title": "nova --insecure image-delete fails", 
    "comments": [
        {
            "content": "When issuing:\n\n$ nova --debug --insecure image-delete tty-linux-kernel\nconnect: (109.234.208.72, 5000)\nsend: 'POST /v2.0/tokens HTTP/1.1\\r\\nHost: 109.234.208.72:5000\\r\\nContent-Length: 120\\r\\ncontent-type: application/json\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n{\"auth\": {\"tenantName\": \"<email address hidden>\", \"passwordCredentials\": {\"username\": \"<email address hidden>\", \"password\": \"*******\"}}}'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Content-Type: application/json\nheader: Vary: X-Auth-Token\nheader: Content-Length: 2619\nheader: Date: Thu, 03 May 2012 14:02:54 GMT\nconnect: (109.234.208.72, 444)\nsend: u'GET /v2/7bef76f5941341fcb133bfc04f156810/images/detail HTTP/1.1\\r\\nHost: 109.234.208.72:444\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 0e73e6f23b72443f8066ece54610ed1f\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: X-Compute-Request-Id: req-12ccf4e9-f657-4db5-9fba-92ce985f1e82\nheader: Content-Type: application/json\nheader: Content-Length: 11826\nheader: Date: Thu, 03 May 2012 14:02:55 GMT\nsend: u'DELETE /v2/7bef76f5941341fcb133bfc04f156810/images/30130507-4c7a-43d6-8d47-0ac24133bf3b HTTP/1.1\\r\\nHost: 109.234.208.72:444\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 0e73e6f23b72443f8066ece54610ed1f\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.0 501 Not Implemented\\r\\n'\nheader: Content-Type: text/html\nheader: Content-Length: 28\nheader: Expires: now\nheader: Pragma: no-cache\nheader: Cache-control: no-cache,no-store\nDEBUG (shell:416) n/a (HTTP 501)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 413, in main\n    OpenStackComputeShell().main(sys.argv[1:])\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 364, in main\n    args.func(self.cs, args)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/shell.py\", line 444, in do_image_delete\n    image.delete()\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/images.py\", line 22, in delete\n    self.manager.delete(self)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v1_1/images.py\", line 60, in delete\n    self._delete(\"/images/%s\" % base.getid(image))\n  File \"/usr/lib/python2.7/dist-packages/novaclient/base.py\", line 166, in _delete\n    resp, body = self.api.client.delete(url)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 145, in delete\n    return self._cs_request(url, 'DELETE', **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 124, in _cs_request\n    **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 107, in request\n    raise exceptions.from_response(resp, body)\nHTTPNotImplemented: n/a (HTTP 501)\nERROR: n/a (HTTP 501)\n\nIf we use the internalURL endpoint the comand works as expected,. Our glance SSL endpoint currently uses an invalid certificate,  so the --insecure flag should be also used to ignore the invalid SSL certificate when connecting to glance URL and not only to keystone.\n\n$ nova --debug --insecure --endpoint_type internalURL  image-delete tty-linux-kernel\nconnect: (109.234.208.72, 5000)\nsend: 'POST /v2.0/tokens HTTP/1.1\\r\\nHost: 109.234.208.72:5000\\r\\nContent-Length: 120\\r\\ncontent-type: application/json\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n{\"auth\": {\"tenantName\": \"<email address hidden>\", \"passwordCredentials\": {\"username\": \"<email address hidden>\", \"password\": \"Klock09\"}}}'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Content-Type: application/json\nheader: Vary: X-Auth-Token\nheader: Content-Length: 2619\nheader: Date: Thu, 03 May 2012 14:08:45 GMT\nconnect: (10.130.0.16, 8774)\nsend: u'GET /v2/7bef76f5941341fcb133bfc04f156810/images/detail HTTP/1.1\\r\\nHost: 10.130.0.16:8774\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 038914aaa66e43259ec52ec391051b41\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: X-Compute-Request-Id: req-95a86170-6907-4f3a-a972-5803873e989e\nheader: Content-Type: application/json\nheader: Content-Length: 11758\nheader: Date: Thu, 03 May 2012 14:08:45 GMT\nsend: u'DELETE /v2/7bef76f5941341fcb133bfc04f156810/images/30130507-4c7a-43d6-8d47-0ac24133bf3b HTTP/1.1\\r\\nHost: 10.130.0.16:8774\\r\\nx-auth-project-id: <email address hidden>\\r\\nx-auth-token: 038914aaa66e43259ec52ec391051b41\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nuser-agent: python-novaclient\\r\\n\\r\\n'\nreply: 'HTTP/1.1 204 No Content\\r\\n'\nheader: Content-Type: text/html; charset=UTF-8\nheader: Content-Length: 0\nheader: Date: Thu, 03 May 2012 14:08:46 GMT", 
            "date_created": "2012-05-03 14:12:56.569493+00:00", 
            "author": "https://api.launchpad.net/1.0/~pperezrubio"
        }, 
        {
            "content": "Hi,\r\n\r\nWe are unable to reproduce this bug. Can you please provide some additional info ? ( if it is specific to some image ?)\r\n\r\nWe have performed the below steps to reproduce it.\r\n\r\n1. wget http://download.cirros-cloud.net/0.3.1/cirros-0.3.1-x86_64-disk.img\r\n\r\n2. glance --os-username=admin --os-password=secret --os-tenant-name=demo --osauth-url=http://192.168.206.130:5000/v2.0 image-create --name=\"CirrOS 0.3.1\" --disk-format=qcow2 --container-format bare < cirros-0.3.1-x86_64-disk.img\r\n\r\n ( We have tried the same with different combinations of disk-format and container-format ) \r\n\r\n3. nova --debug --insecure image-delete <cirros-image> ( or)  nova --debug --insecure --endpoint_type internalURL image-delete <cirros-image> \r\n\r\nVersion used : (grizzly)\r\nglance --version                 = 0.9.0.48\r\nnova --version                    = 2.13.0.113\r\nglance-manage --version   = 2013.2\r\nnova-manage --version      = 2013.2\r\n\r\nPlease let us know, if our understanding is incorrect or if the bug is currently not reproduced.\r\n\r\n", 
            "date_created": "2013-10-24 10:29:00.740304+00:00", 
            "author": "https://api.launchpad.net/1.0/~shreeduth-awasthi"
        }, 
        {
            "content": "Also kindly, let us know the version in which the issue is observed.", 
            "date_created": "2013-10-25 11:34:32.838261+00:00", 
            "author": "https://api.launchpad.net/1.0/~anusha-rayani-7"
        }, 
        {
            "content": "The bug may be closed as it is not reproducable on latest grizzly version.", 
            "date_created": "2013-10-26 12:00:31.821533+00:00", 
            "author": "https://api.launchpad.net/1.0/~shreeduth-awasthi"
        }
    ], 
    "closed": "2014-08-13 13:30:52.732101+00:00"
}