{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:56:04.809023+00:00", 
    "description": "when port nova-v3-test: test_server_actions.ServerActionsV3TestXML.test_lock_unlock_server. We found the exception.InstanceIsLocked is not caught in start and stop server API.\n\n\nthe following is the nova log:\n\n2013-09-30 15:03:29.306 ^[[00;32mDEBUG nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m^[[00;32mAction: 'action', body: <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<stop xmlns=\"http://docs.openstack.org/compute/api/v1.1\"/>^[[00m ^[[00;33mfrom (pid=23798) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:935^[[00m\n2013-09-30 15:03:29.307 ^[[00;32mDEBUG nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m^[[00;32mCalling method <bound method ServersController._stop_server of <nova.api.openstack.compute.plugins.v3.servers.ServersController object at 0x577c250>>^[[00m ^[[00;33mfrom (pid=23798) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:936^[[00m\n2013-09-30 15:03:29.339 ^[[00;32mDEBUG nova.api.openstack.compute.plugins.v3.servers [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m[instance: cd4fec81-d2e8-43cd-ab5d-47da72dd90fa] ^[[00;32mstop instance^[[00m ^[[00;33mfrom (pid=23798) _stop_server /opt/stack/nova/nova/api/openstack/compute/plugins/v3/servers.py:1372^[[00m\n2013-09-30 15:03:29.340 ^[[01;31mERROR nova.api.openstack.extensions [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[01;31m] ^[[01;35m^[[01;31mUnexpected exception in API method^[[00m\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00mTraceback (most recent call last):\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 469, in wrapped\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    return f(*args, **kwargs)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/servers.py\", line 1374, in _stop_server\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    self.compute_api.stop(context, instance)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/compute/api.py\", line 198, in wrapped\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    return func(self, context, target, *args, **kwargs)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/compute/api.py\", line 187, in inner\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    raise exception.InstanceIsLocked(instance_uuid=instance['uuid'])\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00mInstanceIsLocked: Instance cd4fec81-d2e8-43cd-ab5d-47da72dd90fa is locked\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m\n2013-09-30 15:03:29.341 ^[[00;36mINFO nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;36m] ^[[01;35m^[[00;36mHTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'nova.exception.InstanceIsLocked'>^[[00m", 
    "tags": [
        "api"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1233026", 
    "owner": "https://api.launchpad.net/1.0/~ivan-zhu", 
    "id": 1233026, 
    "index": 1008, 
    "openned": "2013-09-30 08:01:21.705241+00:00", 
    "created": "2013-09-30 08:01:21.705241+00:00", 
    "title": "exception.InstanceIsLocked is not caught in start and stop server api", 
    "comments": [
        {
            "content": "when port nova-v3-test: test_server_actions.ServerActionsV3TestXML.test_lock_unlock_server. We found the exception.InstanceIsLocked is not caught in start and stop server API.\n\n\nthe following is the nova log:\n\n2013-09-30 15:03:29.306 ^[[00;32mDEBUG nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m^[[00;32mAction: 'action', body: <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<stop xmlns=\"http://docs.openstack.org/compute/api/v1.1\"/>^[[00m ^[[00;33mfrom (pid=23798) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:935^[[00m\n2013-09-30 15:03:29.307 ^[[00;32mDEBUG nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m^[[00;32mCalling method <bound method ServersController._stop_server of <nova.api.openstack.compute.plugins.v3.servers.ServersController object at 0x577c250>>^[[00m ^[[00;33mfrom (pid=23798) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:936^[[00m\n2013-09-30 15:03:29.339 ^[[00;32mDEBUG nova.api.openstack.compute.plugins.v3.servers [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;32m] ^[[01;35m[instance: cd4fec81-d2e8-43cd-ab5d-47da72dd90fa] ^[[00;32mstop instance^[[00m ^[[00;33mfrom (pid=23798) _stop_server /opt/stack/nova/nova/api/openstack/compute/plugins/v3/servers.py:1372^[[00m\n2013-09-30 15:03:29.340 ^[[01;31mERROR nova.api.openstack.extensions [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[01;31m] ^[[01;35m^[[01;31mUnexpected exception in API method^[[00m\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00mTraceback (most recent call last):\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 469, in wrapped\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    return f(*args, **kwargs)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/api/openstack/compute/plugins/v3/servers.py\", line 1374, in _stop_server\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    self.compute_api.stop(context, instance)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/compute/api.py\", line 198, in wrapped\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    return func(self, context, target, *args, **kwargs)\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m  File \"/opt/stack/nova/nova/compute/api.py\", line 187, in inner\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m    raise exception.InstanceIsLocked(instance_uuid=instance['uuid'])\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00mInstanceIsLocked: Instance cd4fec81-d2e8-43cd-ab5d-47da72dd90fa is locked\n^[[01;31m2013-09-30 15:03:29.340 TRACE nova.api.openstack.extensions ^[[01;35m^[[00m\n2013-09-30 15:03:29.341 ^[[00;36mINFO nova.api.openstack.wsgi [^[[01;36mreq-d791baac-2015-4e65-8d02-720b0944e824 ^[[00;36mdemo demo^[[00;36m] ^[[01;35m^[[00;36mHTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'nova.exception.InstanceIsLocked'>^[[00m", 
            "date_created": "2013-09-30 08:01:21.705241+00:00", 
            "author": "https://api.launchpad.net/1.0/~ivan-zhu"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/48904", 
            "date_created": "2013-09-30 08:11:28.097081+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/48904\nCommitted: http://github.com/openstack/nova/commit/aa8938d696e6e2ecf23709f748de825dc2d07fd0\nSubmitter: Jenkins\nBranch:    master\n\ncommit aa8938d696e6e2ecf23709f748de825dc2d07fd0\nAuthor: ivan-zhu <email address hidden>\nDate:   Mon Sep 30 16:06:41 2013 +0800\n\n    catch exception in start and stop server api\n    \n    this catches exception.InstanceIsLocked in start and stop\n    server api.\n    \n    Closes-Bug: #1233026\n    \n    Change-Id: Ibb882178ab0770837702d503ef88c6510072e33f\n", 
            "date_created": "2013-10-23 07:29:14.000872+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/54559", 
            "date_created": "2013-10-30 15:06:49.159498+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/54559\nCommitted: http://github.com/openstack/nova/commit/a6fc29ae2cea78b37138d5a3576dc4537c0ae7c7\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit a6fc29ae2cea78b37138d5a3576dc4537c0ae7c7\nAuthor: ivan-zhu <email address hidden>\nDate:   Mon Sep 30 16:06:41 2013 +0800\n\n    catch exception in start and stop server api\n    \n    this catches exception.InstanceIsLocked in start and stop\n    server api.\n    \n    Closes-Bug: #1233026\n    \n    Change-Id: Ibb882178ab0770837702d503ef88c6510072e33f\n    (cherry picked from commit aa8938d696e6e2ecf23709f748de825dc2d07fd0)\n", 
            "date_created": "2013-10-30 17:36:01.195999+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-12-04 10:33:50.757006+00:00"
}