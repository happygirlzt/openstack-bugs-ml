{
    "status": "Invalid", 
    "last_updated": "2015-11-13 06:45:20.962406+00:00", 
    "description": "./stack.sh\n\ntaget@liyong:/opt/stack/nova$ git log  --oneline | head -n3\n98af6b1 Merge \"Deprecate Extensible Resource Tracker\"\n7c5acd4 Merge \"Remove vcpu resource from extensible resource tracker\"\nb587881 Merge \"Split up test_is_volume_backed_instance() into five functions\"\n\n\ntaget@liyong:~/devstack$ /usr/local/bin/nova-manage api_db sync\nNo handlers could be found for logger \"oslo_config.cfg\"\n2015-11-13 11:49:34.620 DEBUG migrate.versioning.repository [-] Loading repository /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:76\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/001_cell_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/001_cell_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/002_instance_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/002_instance_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/003_host_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/003_host_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.623 DEBUG migrate.versioning.repository [-] Repository /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:82\n2015-11-13 11:49:34.623 DEBUG migrate.versioning.repository [-] Config: OrderedDict([('db_settings', OrderedDict([('__name__', 'db_settings'), ('repository_id', 'nova_api'), ('version_table', 'migrate_version'), ('required_dbs', '[]')]))]) from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:83\nCommand failed, please check log for more info\n2015-11-13 11:49:34.624 CRITICAL nova [-] CantStartEngineError: No sql_connection parameter is established\n\n2015-11-13 11:49:34.624 TRACE nova Traceback (most recent call last):\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/bin/nova-manage\", line 10, in <module>\n2015-11-13 11:49:34.624 TRACE nova     sys.exit(main())\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/cmd/manage.py\", line 1425, in main\n2015-11-13 11:49:34.624 TRACE nova     ret = fn(*fn_args, **fn_kwargs)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/cmd/manage.py\", line 976, in sync\n2015-11-13 11:49:34.624 TRACE nova     return migration.db_sync(version, database='api')\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/migration.py\", line 26, in db_sync\n2015-11-13 11:49:34.624 TRACE nova     return IMPL.db_sync(version=version, database=database)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 53, in db_sync\n2015-11-13 11:49:34.624 TRACE nova     current_version = db_version(database)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 66, in db_version\n2015-11-13 11:49:34.624 TRACE nova     return versioning_api.db_version(get_engine(database), repository)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 43, in get_engine\n2015-11-13 11:49:34.624 TRACE nova     return db_session.get_api_engine()\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 167, in get_api_engine\n2015-11-13 11:49:34.624 TRACE nova     return api_context_manager._factory.get_legacy_facade().get_engine()\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 256, in get_legacy_facade\n2015-11-13 11:49:34.624 TRACE nova     self._start()\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 338, in _start\n2015-11-13 11:49:34.624 TRACE nova     engine_args, maker_args)\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 360, in _setup_for_connection\n2015-11-13 11:49:34.624 TRACE nova     \"No sql_connection parameter is established\")\n2015-11-13 11:49:34.624 TRACE nova CantStartEngineError: No sql_connection parameter is established", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1515860", 
    "owner": "None", 
    "id": 1515860, 
    "index": 265, 
    "openned": "2015-11-13 03:51:45.702807+00:00", 
    "created": "2015-11-13 03:51:45.702807+00:00", 
    "title": "No sql_connection parameter is established when nova-manage api_db sync", 
    "comments": [
        {
            "content": "./stack.sh\n\ntaget@liyong:/opt/stack/nova$ git log  --oneline | head -n3\n98af6b1 Merge \"Deprecate Extensible Resource Tracker\"\n7c5acd4 Merge \"Remove vcpu resource from extensible resource tracker\"\nb587881 Merge \"Split up test_is_volume_backed_instance() into five functions\"\n\n\ntaget@liyong:~/devstack$ /usr/local/bin/nova-manage api_db sync\nNo handlers could be found for logger \"oslo_config.cfg\"\n2015-11-13 11:49:34.620 DEBUG migrate.versioning.repository [-] Loading repository /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:76\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/001_cell_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/001_cell_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.621 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/002_instance_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/002_instance_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Loading script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/003_host_mapping.py... from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:27\n2015-11-13 11:49:34.622 DEBUG migrate.versioning.script.base [-] Script /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo/versions/003_host_mapping.py loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/script/base.py:30\n2015-11-13 11:49:34.623 DEBUG migrate.versioning.repository [-] Repository /opt/stack/nova/nova/db/sqlalchemy/api_migrations/migrate_repo loaded successfully from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:82\n2015-11-13 11:49:34.623 DEBUG migrate.versioning.repository [-] Config: OrderedDict([('db_settings', OrderedDict([('__name__', 'db_settings'), ('repository_id', 'nova_api'), ('version_table', 'migrate_version'), ('required_dbs', '[]')]))]) from (pid=15818) __init__ /usr/local/lib/python2.7/dist-packages/migrate/versioning/repository.py:83\nCommand failed, please check log for more info\n2015-11-13 11:49:34.624 CRITICAL nova [-] CantStartEngineError: No sql_connection parameter is established\n\n2015-11-13 11:49:34.624 TRACE nova Traceback (most recent call last):\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/bin/nova-manage\", line 10, in <module>\n2015-11-13 11:49:34.624 TRACE nova     sys.exit(main())\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/cmd/manage.py\", line 1425, in main\n2015-11-13 11:49:34.624 TRACE nova     ret = fn(*fn_args, **fn_kwargs)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/cmd/manage.py\", line 976, in sync\n2015-11-13 11:49:34.624 TRACE nova     return migration.db_sync(version, database='api')\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/migration.py\", line 26, in db_sync\n2015-11-13 11:49:34.624 TRACE nova     return IMPL.db_sync(version=version, database=database)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 53, in db_sync\n2015-11-13 11:49:34.624 TRACE nova     current_version = db_version(database)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 66, in db_version\n2015-11-13 11:49:34.624 TRACE nova     return versioning_api.db_version(get_engine(database), repository)\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/migration.py\", line 43, in get_engine\n2015-11-13 11:49:34.624 TRACE nova     return db_session.get_api_engine()\n2015-11-13 11:49:34.624 TRACE nova   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 167, in get_api_engine\n2015-11-13 11:49:34.624 TRACE nova     return api_context_manager._factory.get_legacy_facade().get_engine()\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 256, in get_legacy_facade\n2015-11-13 11:49:34.624 TRACE nova     self._start()\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 338, in _start\n2015-11-13 11:49:34.624 TRACE nova     engine_args, maker_args)\n2015-11-13 11:49:34.624 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 360, in _setup_for_connection\n2015-11-13 11:49:34.624 TRACE nova     \"No sql_connection parameter is established\")\n2015-11-13 11:49:34.624 TRACE nova CantStartEngineError: No sql_connection parameter is established", 
            "date_created": "2015-11-13 03:51:45.702807+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }, 
        {
            "content": "taget@liyong:~/devstack$ pip list | grep oslo.db\noslo.db (3.1.0)\n", 
            "date_created": "2015-11-13 03:53:07.002564+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }, 
        {
            "content": "what a stupid,\n\nnova will search ~/nova.conf , and I happened have an old nova.conf in ~/ so, /etc/nova/nova.conf will be ignored.", 
            "date_created": "2015-11-13 06:45:10.370087+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }
    ], 
    "closed": "2015-11-13 06:45:19.300634+00:00"
}