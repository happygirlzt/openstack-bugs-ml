{
    "status": "Invalid", 
    "last_updated": "2013-12-31 02:43:53.349194+00:00", 
    "description": "This unit test is the only one I have in all of the 9393 unit tests of the Nova Debian package I'm building in Sid. It'd be nice to have it fixed.\n\nTraceback (most recent call last):\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 159, in test_walk_versions\n    self._walk_versions(engine, self.snake_walk)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 381, in _walk_versions\n    engine, version - 1, with_data=True)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 398, in _migrate_down\n    self.migration_api.downgrade(engine, self.REPOSITORY, version)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 202, in downgrade\n    return _migrate(url, repository, version, upgrade=False, err=err, **opts)\n  File \"<string>\", line 2, in _migrate\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/db/sqlalchemy/migration.py\", line 40, in patched_with_engine\n    return f(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n    schema.runchange(ver, change, changeset.step)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n    change.run(self.engine, step)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/py.py\", line 145, in run\n    script_func(engine)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/db/sqlalchemy/migrate_repo/versions/206_add_instance_cleaned.py\", line 47, in downgrade\n    instances.columns.cleaned.drop()\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/schema.py\", line 549, in drop\n    engine._run_visitor(visitorcallable, self, connection, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1479, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1122, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 53, in traverse_single\n    ret = super(AlterTableVisitor, self).traverse_single(elem)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 90, in visit_column\n    super(SQLiteColumnDropper,self).visit_column(column)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 53, in visit_column\n    self.recreate_table(table,column,delta)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 40, in recreate_table\n    table.create(bind=self.connection)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/schema.py\", line 614, in create\n    checkfirst=checkfirst)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1122, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/ddl.py\", line 93, in visit_table\n    self.traverse_single(index)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/ddl.py\", line 105, in visit_index\n    self.connection.execute(schema.CreateIndex(index))\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 662, in execute\n    params)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 720, in _execute_ddl \n    compiled\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 874, in _execute_context \n    context)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1024, in _handle_dbapi_exception\n    exc_info\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 195, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 867, in _execute_context\n    context)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 324, in do_execute\n    cursor.execute(statement, parameters)\nOperationalError: (OperationalError) table instances has no column named cleaned u'CREATE INDEX instances_host_deleted_cleaned_idx ON instances (host, deleted, cleaned)' ()", 
    "tags": [
        "db"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1236040", 
    "owner": "None", 
    "id": 1236040, 
    "index": 5423, 
    "openned": "2013-10-06 18:11:26.728544+00:00", 
    "created": "2013-10-06 18:11:26.728544+00:00", 
    "title": "Nova 2013.2 rc1 has a failed 'walk version' unit test", 
    "comments": [
        {
            "content": "This unit test is the only one I have in all of the 9393 unit tests of the Nova Debian package I'm building in Sid. It'd be nice to have it fixed.\n\nTraceback (most recent call last):\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 159, in test_walk_versions\n    self._walk_versions(engine, self.snake_walk)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 381, in _walk_versions\n    engine, version - 1, with_data=True)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/tests/db/test_migrations.py\", line 398, in _migrate_down\n    self.migration_api.downgrade(engine, self.REPOSITORY, version)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 202, in downgrade\n    return _migrate(url, repository, version, upgrade=False, err=err, **opts)\n  File \"<string>\", line 2, in _migrate\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/db/sqlalchemy/migration.py\", line 40, in patched_with_engine\n    return f(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n    schema.runchange(ver, change, changeset.step)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n    change.run(self.engine, step)\n  File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/py.py\", line 145, in run\n    script_func(engine)\n  File \"/home/zigo/sources/openstack/havana/nova/build-area/nova-2013.2~rc1/nova/db/sqlalchemy/migrate_repo/versions/206_add_instance_cleaned.py\", line 47, in downgrade\n    instances.columns.cleaned.drop()\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/schema.py\", line 549, in drop\n    engine._run_visitor(visitorcallable, self, connection, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1479, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1122, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 53, in traverse_single\n    ret = super(AlterTableVisitor, self).traverse_single(elem)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 90, in visit_column\n    super(SQLiteColumnDropper,self).visit_column(column)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 53, in visit_column\n    self.recreate_table(table,column,delta)\n  File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/sqlite.py\", line 40, in recreate_table\n    table.create(bind=self.connection)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/schema.py\", line 614, in create\n    checkfirst=checkfirst)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1122, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/ddl.py\", line 93, in visit_table\n    self.traverse_single(index)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/visitors.py\", line 111, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/ddl.py\", line 105, in visit_index\n    self.connection.execute(schema.CreateIndex(index))\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 662, in execute\n    params)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 720, in _execute_ddl \n    compiled\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 874, in _execute_context \n    context)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1024, in _handle_dbapi_exception\n    exc_info\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 195, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 867, in _execute_context\n    context)\n  File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 324, in do_execute\n    cursor.execute(statement, parameters)\nOperationalError: (OperationalError) table instances has no column named cleaned u'CREATE INDEX instances_host_deleted_cleaned_idx ON instances (host, deleted, cleaned)' ()", 
            "date_created": "2013-10-06 18:11:26.728544+00:00", 
            "author": "https://api.launchpad.net/1.0/~thomas-goirand"
        }, 
        {
            "content": "I'm going to say this is invalid since it's a Folsom release candidate build?  Did you mean service pack 1 instead of release candidate 1?  If that was the case, the version would be 2012.2.1.", 
            "date_created": "2013-10-13 20:00:22.719056+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Looks like the summary is wrong, this is supposed to be 2013.2 rc1 which would be havana.  What backing database are you using?", 
            "date_created": "2013-10-13 20:03:12.402581+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Hi,\n\nOf course, that's for 2013.2 rc1 (the folder where I was building shows Havana as a hint... :)). Sorry for the mistake.\n\nAs always, since this is the automated unit tests when building the Debian package (reminder: I'm the Debian Developer doing the packaging work of all of OpenStack), it is using SQLite, since that's the default when running these tests.", 
            "date_created": "2013-10-14 00:35:41.098252+00:00", 
            "author": "https://api.launchpad.net/1.0/~thomas-goirand"
        }, 
        {
            "content": "These tests pass for me with sqlite.", 
            "date_created": "2013-12-31 02:43:40.789949+00:00", 
            "author": "https://api.launchpad.net/1.0/~mikal"
        }
    ], 
    "closed": "2013-12-31 02:43:50.752568+00:00"
}