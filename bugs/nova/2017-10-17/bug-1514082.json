{
    "status": "Invalid", 
    "last_updated": "2017-07-10 08:13:07.917262+00:00", 
    "description": "Environment:\n\ncentos 7\nopenstack liberty\n\n# rpm -qa|grep nova\nopenstack-nova-api-12.0.0-1.el7.noarch\npython-novaclient-2.30.1-1.el7.noarch\nopenstack-nova-novncproxy-12.0.0-1.el7.noarch\nopenstack-nova-conductor-12.0.0-1.el7.noarch\npython-nova-12.0.0-1.el7.noarch\nopenstack-nova-console-12.0.0-1.el7.noarch\nopenstack-nova-common-12.0.0-1.el7.noarch\nopenstack-nova-compute-12.0.0-1.el7.noarch\nopenstack-nova-cert-12.0.0-1.el7.noarch\nopenstack-nova-scheduler-12.0.0-1.el7.noarch\n\nSteps to reproduce:\n1) Create network with ipv6 subnet.\n\n# neutron net-list\n+--------------------------------------+------+-------------------------------------------------------+\n| id                                   | name | subnets                                               |\n+--------------------------------------+------+-------------------------------------------------------+\n| 286b3e3c-9075-496f-8899-c9890397f087 | net2 | de602f61-8e05-4337-bc9d-c9f8265bb937 1000:2000::/24   |\n| a3931414-73c3-40c9-a39b-d93ae38844a2 | net3 | b6ce48ab-9387-4128-baa3-4a893dd27bb7 10.0.2.0/24      |\n| a5d1181f-bedd-40a5-8b4a-5574b74dba61 | net1 | 72be780a-6df9-47ea-991c-e6fa97396adc 192.168.122.0/24 |\n+--------------------------------------+------+-------------------------------------------------------+\n\n2) Create instance with 3 nic\n# nova boot \\\n\t--flavor 2 \\\n\t--image fedora23 \\\n\t--config-drive=True \\\n\t--nic net-id=a5d1181f-bedd-40a5-8b4a-5574b74dba61 \\\n\t--nic net-id=286b3e3c-9075-496f-8899-c9890397f087 \\\n\t--nic net-id=a3931414-73c3-40c9-a39b-d93ae38844a2 \\\n\t--user-data=/root/cloud-config \\\n\ttest\n\n# nova list\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                                         |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n| 4f159a96-8154-4946-b2a3-50c2638f545b | test | ACTIVE | -          | Running     | net3=10.0.2.116; net2=1000:2000:3000::1102; net1=192.168.122.117 |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n\nLogon to instance, mount configDrive:\n# mount /dev/disk/by-label/config-2 /mnt/\n\nActual result:\n# cat /mnt/openstack/latest/network_data.json | python3 -m json.tool\n{\n    \"links\": [\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:db:48:10\",\n            \"id\": \"tap54d10236-5d\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"54d10236-5d15-4e22-b584-2a185d74b553\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:db:c2:96\",\n            \"id\": \"tapae9677cb-32\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"ae9677cb-327b-4fc9-9b99-88ebd96595a3\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:10:37:07\",\n            \"id\": \"tap1baef501-47\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"1baef501-47b0-4c76-928f-34ed2827c7d4\"\n        }\n    ],\n    \"networks\": [\n        {\n            \"id\": \"network0\",\n            \"link\": \"tap54d10236-5d\",\n            \"network_id\": \"a5d1181f-bedd-40a5-8b4a-5574b74dba61\",\n            \"type\": \"ipv4_dhcp\"\n        },\n        {\n            \"id\": \"network1\",\n            \"ip_address\": \"10.0.2.116\",\n            \"link\": \"tap1baef501-47\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"a3931414-73c3-40c9-a39b-d93ae38844a2\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        }\n    ],\n    \"services\": []\n}\n\nnetwork_data.json provide information about ipv4 adresses only.\n\nExpected result:\n\nnetwork_data.json provide information about all ip adresses.", 
    "tags": [
        "metadata"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1514082", 
    "owner": "None", 
    "id": 1514082, 
    "index": 7100, 
    "openned": "2015-11-07 15:23:43.858605+00:00", 
    "created": "2015-11-07 15:23:43.858605+00:00", 
    "title": "network_data.json does not provide information about ipv6 addresses.", 
    "comments": [
        {
            "content": "Environment:\n\ncentos 7\nopenstack liberty\n\n# rpm -qa|grep nova\nopenstack-nova-api-12.0.0-1.el7.noarch\npython-novaclient-2.30.1-1.el7.noarch\nopenstack-nova-novncproxy-12.0.0-1.el7.noarch\nopenstack-nova-conductor-12.0.0-1.el7.noarch\npython-nova-12.0.0-1.el7.noarch\nopenstack-nova-console-12.0.0-1.el7.noarch\nopenstack-nova-common-12.0.0-1.el7.noarch\nopenstack-nova-compute-12.0.0-1.el7.noarch\nopenstack-nova-cert-12.0.0-1.el7.noarch\nopenstack-nova-scheduler-12.0.0-1.el7.noarch\n\nSteps to reproduce:\n1) Create network with ipv6 subnet.\n\n# neutron net-list\n+--------------------------------------+------+-------------------------------------------------------+\n| id                                   | name | subnets                                               |\n+--------------------------------------+------+-------------------------------------------------------+\n| 286b3e3c-9075-496f-8899-c9890397f087 | net2 | de602f61-8e05-4337-bc9d-c9f8265bb937 1000:2000::/24   |\n| a3931414-73c3-40c9-a39b-d93ae38844a2 | net3 | b6ce48ab-9387-4128-baa3-4a893dd27bb7 10.0.2.0/24      |\n| a5d1181f-bedd-40a5-8b4a-5574b74dba61 | net1 | 72be780a-6df9-47ea-991c-e6fa97396adc 192.168.122.0/24 |\n+--------------------------------------+------+-------------------------------------------------------+\n\n2) Create instance with 3 nic\n# nova boot \\\n\t--flavor 2 \\\n\t--image fedora23 \\\n\t--config-drive=True \\\n\t--nic net-id=a5d1181f-bedd-40a5-8b4a-5574b74dba61 \\\n\t--nic net-id=286b3e3c-9075-496f-8899-c9890397f087 \\\n\t--nic net-id=a3931414-73c3-40c9-a39b-d93ae38844a2 \\\n\t--user-data=/root/cloud-config \\\n\ttest\n\n# nova list\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                                         |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n| 4f159a96-8154-4946-b2a3-50c2638f545b | test | ACTIVE | -          | Running     | net3=10.0.2.116; net2=1000:2000:3000::1102; net1=192.168.122.117 |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------+\n\nLogon to instance, mount configDrive:\n# mount /dev/disk/by-label/config-2 /mnt/\n\nActual result:\n# cat /mnt/openstack/latest/network_data.json | python3 -m json.tool\n{\n    \"links\": [\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:db:48:10\",\n            \"id\": \"tap54d10236-5d\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"54d10236-5d15-4e22-b584-2a185d74b553\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:db:c2:96\",\n            \"id\": \"tapae9677cb-32\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"ae9677cb-327b-4fc9-9b99-88ebd96595a3\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:10:37:07\",\n            \"id\": \"tap1baef501-47\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"1baef501-47b0-4c76-928f-34ed2827c7d4\"\n        }\n    ],\n    \"networks\": [\n        {\n            \"id\": \"network0\",\n            \"link\": \"tap54d10236-5d\",\n            \"network_id\": \"a5d1181f-bedd-40a5-8b4a-5574b74dba61\",\n            \"type\": \"ipv4_dhcp\"\n        },\n        {\n            \"id\": \"network1\",\n            \"ip_address\": \"10.0.2.116\",\n            \"link\": \"tap1baef501-47\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"a3931414-73c3-40c9-a39b-d93ae38844a2\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        }\n    ],\n    \"services\": []\n}\n\nnetwork_data.json provide information about ipv4 adresses only.\n\nExpected result:\n\nnetwork_data.json provide information about all ip adresses.", 
            "date_created": "2015-11-07 15:23:43.858605+00:00", 
            "author": "https://api.launchpad.net/1.0/~oleg-f"
        }, 
        {
            "content": "Sorry, not a bug. \n\nFixed by configure nova.conf:\n\n[DEFAULT]\nuse_ipv6=true", 
            "date_created": "2015-11-07 16:03:43.016375+00:00", 
            "author": "https://api.launchpad.net/1.0/~oleg-f"
        }, 
        {
            "content": "In the Ocaka release this option became deprecated. See: https://docs.openstack.org/ocata/config-reference/compute/config-options.html\n\nThe proposed solution will not work once the feature is removed.", 
            "date_created": "2017-07-10 08:13:06.929824+00:00", 
            "author": "https://api.launchpad.net/1.0/~denes-nemeth"
        }
    ], 
    "closed": "2015-11-07 16:04:31.362634+00:00"
}