{
    "status": "Invalid", 
    "last_updated": "2012-10-29 23:11:00.909773+00:00", 
    "description": "\nDescribeVolumes fails for volume id which is no longer exist. \n \n#code\nself.conn.get_all_volumes([\"vol-0112121\"])\n# Note that conn is a boto connection\n\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nTraceback (most recent call last):\n  File \"test.py\", line 49, in <module>\n    adaptor.delete_volume(adaptor.data[\"volume\"])\n  File \"/home/nati/openstack/trunk/testgen/adaptor.py\", line 112, in delete_volume\n    self.conn.get_all_volumes([volume_id])\n  File \"/home/nati/openstack/trunk/testgen/boto/ec2/connection.py\", line 962, in get_all_volumes\n    return self.get_list('DescribeVolumes', params, [('item', Volume)])\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 605, in get_list\n    response = self.make_request(action, params, path, verb)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 592, in make_request\n    headers=headers)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 461, in make_request\n    return self._mexe(method, path, data, headers, host, sender)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 437, in _mexe\n    raise BotoServerError(response.status, response.reason, body)\nboto.exception.BotoServerError: BotoServerError: 500 Internal Server Error\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/eventlet/wsgi.py\", line 336, in handle_one_response\n    result = self.application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/paste/urlmap.py\", line 203, in __call__\n    return app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 57, in __call__\n    rv = req.get_response(self.application)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1053, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1022, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 328, in __call__\n    ec2_id = ec2utils.id_to_ec2_id(ex.volume_id, 'vol-%08x')\nAttributeError: 'VolumeNotFound' object has no attribute 'volume_id\n\nThis should be boto.exception.EC2ResponseError such as DescribeInstance responce", 
    "tags": [], 
    "importance": "Low", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/808675", 
    "owner": "None", 
    "id": 808675, 
    "index": 221, 
    "openned": "2011-07-11 08:51:56.302341+00:00", 
    "created": "2011-07-11 08:51:56.302341+00:00", 
    "title": "DescribeVolumes fails for volume id which is no longer exist. ", 
    "comments": [
        {
            "content": "\nDescribeVolumes fails for volume id which is no longer exist. \n \n#code\nself.conn.get_all_volumes([\"vol-0112121\"])\n# Note that conn is a boto connection\n\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nTraceback (most recent call last):\n  File \"test.py\", line 49, in <module>\n    adaptor.delete_volume(adaptor.data[\"volume\"])\n  File \"/home/nati/openstack/trunk/testgen/adaptor.py\", line 112, in delete_volume\n    self.conn.get_all_volumes([volume_id])\n  File \"/home/nati/openstack/trunk/testgen/boto/ec2/connection.py\", line 962, in get_all_volumes\n    return self.get_list('DescribeVolumes', params, [('item', Volume)])\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 605, in get_list\n    response = self.make_request(action, params, path, verb)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 592, in make_request\n    headers=headers)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 461, in make_request\n    return self._mexe(method, path, data, headers, host, sender)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 437, in _mexe\n    raise BotoServerError(response.status, response.reason, body)\nboto.exception.BotoServerError: BotoServerError: 500 Internal Server Error\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/eventlet/wsgi.py\", line 336, in handle_one_response\n    result = self.application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/paste/urlmap.py\", line 203, in __call__\n    return app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 57, in __call__\n    rv = req.get_response(self.application)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1053, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1022, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 328, in __call__\n    ec2_id = ec2utils.id_to_ec2_id(ex.volume_id, 'vol-%08x')\nAttributeError: 'VolumeNotFound' object has no attribute 'volume_id\n\nThis should be boto.exception.EC2ResponseError such as DescribeInstance responce", 
            "date_created": "2011-07-11 08:51:56.302341+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "What command did you run ?\nWhat do you mean by a volume which no longer exists ?\ndid you remove it with euca-delete-volume or with lvremove ?\n", 
            "date_created": "2011-07-11 09:03:29.034451+00:00", 
            "author": "https://api.launchpad.net/1.0/~razique"
        }, 
        {
            "content": "I removed the volume using delete_volume(volume_id) method on boto.\nBut this error occurs for volume_id which is not exist, but the format\nof the volume_id is correct.\n\nFor example\nconn.get_all_volumes([\"vol-0112121\"])  produces errors as follows\n\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nTraceback (most recent call last):\n  File \"test.py\", line 30, in <module>\n    adaptor.conn.get_all_volumes([\"vol-0112121\"])\n  File \"/home/nati/openstack/trunk/testgen/boto/ec2/connection.py\",\nline 962, in get_all_volumes\n    return self.get_list('DescribeVolumes', params, [('item', Volume)])\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line\n605, in get_list\n    response = self.make_request(action, params, path, verb)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line\n592, in make_request\n    headers=headers)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line\n461, in make_request\n    return self._mexe(method, path, data, headers, host, sender)\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line\n437, in _mexe\n    raise BotoServerError(response.status, response.reason, body)\nboto.exception.BotoServerError: BotoServerError: 500 Internal Server Error\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/eventlet/wsgi.py\", line 336,\nin handle_one_response\n    result = self.application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/paste/urlmap.py\", line 203, in __call__\n    return app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\",\nline 57, in __call__\n    rv = req.get_response(self.application)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1053, in\nget_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1022, in\ncall_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\",\nline 328, in __call__\n    ec2_id = ec2utils.id_to_ec2_id(ex.volume_id, 'vol-%08x')\nAttributeError: 'VolumeNotFound' object has no attribute 'volume_id'\n\nNote that\nconn.get_all_volumes([\"invalid_id\"]) produces an error as follows\n\nroot@poko:~/openstack/trunk/testgen# python test.py\nTraceback (most recent call last):\n  File \"test.py\", line 30, in <module>\n    adaptor.conn.get_all_volumes([\"invalidid\"])\n  File \"/home/nati/openstack/trunk/testgen/boto/ec2/connection.py\",\nline 962, in get_all_volumes\n    return self.get_list('DescribeVolumes', params, [('item', Volume)])\n  File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line\n616, in get_list\n    raise self.ResponseError(response.status, response.reason, body)\nboto.exception.EC2ResponseError: EC2ResponseError: 400 Bad Request\n<?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>UnknownError</Code><Message>An unknown\nerror has occurred. Please try your request\nagain.</Message></Error></Errors><RequestID>SBGA612FX-DS5DAN65SU</RequestID></Response>\n\nI think the reason of this bug is VolumeNotFould exception sometimes\nhave no volume_id.\n(See the following code)\n\nnova/api/ec2/__init__.py\nLine 325\n\n        except exception.VolumeNotFound as ex:\n            LOG.info(_('VolumeNotFound raised: %s'), unicode(ex),\n                     context=context)\n            ec2_id = ec2utils.id_to_ec2_id(ex.volume_id, 'vol-%08x')\n            message = _('Volume %s not found') % ec2_id\n            return self._error(req, context, type(ex).__name__, message)\n\n\n2011/7/11 Razique Mahroua <email address hidden>:\n> What command did you run ?\n> What do you mean by a volume which no longer exists ?\n> did you remove it with euca-delete-volume or with lvremove ?\n>\n> --\n> You received this bug notification because you are subscribed to the bug\n> report.\n> https://bugs.launchpad.net/bugs/808675\n>\n> Title:\n> \u00a0DescribeVolumes fails for volume id which is no longer exist.\n>\n> Status in OpenStack Compute (Nova):\n> \u00a0New\n>\n> Bug description:\n>\n> \u00a0DescribeVolumes fails for volume id which is no longer exist.\n>\n> \u00a0#code\n> \u00a0self.conn.get_all_volumes([\"vol-0112121\"])\n> \u00a0# Note that conn is a boto connection\n>\n> \u00a0Warning: failed to parse error message from AWS: <unknown>:1:0: syntax error\n> \u00a0Traceback (most recent call last):\n> \u00a0 \u00a0File \"test.py\", line 49, in <module>\n> \u00a0 \u00a0 \u00a0adaptor.delete_volume(adaptor.data[\"volume\"])\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/adaptor.py\", line 112, in delete_volume\n> \u00a0 \u00a0 \u00a0self.conn.get_all_volumes([volume_id])\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/boto/ec2/connection.py\", line 962, in get_all_volumes\n> \u00a0 \u00a0 \u00a0return self.get_list('DescribeVolumes', params, [('item', Volume)])\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 605, in get_list\n> \u00a0 \u00a0 \u00a0response = self.make_request(action, params, path, verb)\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 592, in make_request\n> \u00a0 \u00a0 \u00a0headers=headers)\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 461, in make_request\n> \u00a0 \u00a0 \u00a0return self._mexe(method, path, data, headers, host, sender)\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/testgen/boto/connection.py\", line 437, in _mexe\n> \u00a0 \u00a0 \u00a0raise BotoServerError(response.status, response.reason, body)\n> \u00a0boto.exception.BotoServerError: BotoServerError: 500 Internal Server Error\n> \u00a0Traceback (most recent call last):\n> \u00a0 \u00a0File \"/usr/lib/python2.7/dist-packages/eventlet/wsgi.py\", line 336, in handle_one_response\n> \u00a0 \u00a0 \u00a0result = self.application(self.environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/paste/urlmap.py\", line 203, in __call__\n> \u00a0 \u00a0 \u00a0return app(environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n> \u00a0 \u00a0 \u00a0resp = self.call_func(req, *args, **self.kwargs)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n> \u00a0 \u00a0 \u00a0return self.func(req, *args, **kwargs)\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 57, in __call__\n> \u00a0 \u00a0 \u00a0rv = req.get_response(self.application)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1053, in get_response\n> \u00a0 \u00a0 \u00a0application, catch_exc_info=False)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/request.py\", line 1022, in call_application\n> \u00a0 \u00a0 \u00a0app_iter = application(self.environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n> \u00a0 \u00a0 \u00a0return resp(environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n> \u00a0 \u00a0 \u00a0return resp(environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 159, in __call__\n> \u00a0 \u00a0 \u00a0return resp(environ, start_response)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 147, in __call__\n> \u00a0 \u00a0 \u00a0resp = self.call_func(req, *args, **self.kwargs)\n> \u00a0 \u00a0File \"/usr/lib/pymodules/python2.7/webob/dec.py\", line 208, in call_func\n> \u00a0 \u00a0 \u00a0return self.func(req, *args, **kwargs)\n> \u00a0 \u00a0File \"/home/nati/openstack/trunk/nova/nova/api/ec2/__init__.py\", line 328, in __call__\n> \u00a0 \u00a0 \u00a0ec2_id = ec2utils.id_to_ec2_id(ex.volume_id, 'vol-%08x')\n> \u00a0AttributeError: 'VolumeNotFound' object has no attribute 'volume_id\n>\n> \u00a0This should be boto.exception.EC2ResponseError such as\n> \u00a0DescribeInstance responce\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/808675/+subscriptions\n>\n\n\n\n-- \nNachi Ueno\nemail:<email address hidden>\ntwitter:http://twitter.com/nati\n", 
            "date_created": "2011-07-12 00:46:29+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "If my analysis is correct, it's a bit weird we didn't hit that one before.\r\n\r\nIf an EC2 call returns VolumeNotFound(volume_id=volid), it tries to id_to_ec2_vol_id(ex.volume_id) -- but the kwargs passed to the VolumeNotFound is only used in the exception message, and not stored as attributes.\r\n\r\nSee nova/api/ec2/__init__.py:331 and nova/exception.py:140\r\n\r\nThat would also affect SnapshotNotFound (with snapshot_id)", 
            "date_created": "2011-07-22 14:10:41.900769+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "There's been significant work on this code since the bug was reported. Is this bug still valid?", 
            "date_created": "2012-05-17 12:02:28.990880+00:00", 
            "author": "https://api.launchpad.net/1.0/~fifieldt"
        }, 
        {
            "content": "This appears to no longer be valid.\n\nIn [9]: conn.get_all_volumes()\nOut[9]: [Volume:vol-00000002]\n\nIn [10]: conn.get_all_volumes(['vol-00000002'])\nOut[10]: [Volume:vol-00000002]\n\nIn [11]: conn.delete_volume('vol-00000002')\nOut[11]: True\n\nIn [12]: conn.get_all_volumes(['vol-00000002'])\nOut[12]: [Volume:vol-00000002]\n\nIn [13]: conn.get_all_volumes(['vol-00000002'])\nOut[13]: [Volume:vol-00000002]\n\nIn [14]: conn.get_all_volumes(['vol-00000002'])\n---------------------------------------------------------------------------\nEC2ResponseError                          Traceback (most recent call last)\n...\nEC2ResponseError: EC2ResponseError: 400 Bad Request\n<?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>VolumeNotFound</Code><Message>Volume vol-00000002 could not be found.</Message></Error></Errors><RequestID>req-89bec925-f172-4991-ab04-71b6436838f9</RequestID></Response>\n", 
            "date_created": "2012-10-29 23:10:01.028565+00:00", 
            "author": "https://api.launchpad.net/1.0/~russell"
        }, 
        {
            "content": "This bug appears to no longer be valid (in Folsom, at least). See previous comment for a test against a Folsom setup.", 
            "date_created": "2012-10-29 23:10:57.295659+00:00", 
            "author": "https://api.launchpad.net/1.0/~russell"
        }
    ], 
    "closed": "2012-10-29 23:10:59.156817+00:00"
}