{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 10:00:52.872948+00:00", 
    "description": "According to EC2 documentation, EBS-instances that initiated shutdown result in stopped state.\nAnd then it can be started again.\n(On the other hand non-EBS instance result in terminted when instance initiated shutdown)\n\nHowever, the current nova case, the shutdowned instance always results in terminated status.\nAs related issues are\n- describe-instance-attribute instance_initiated_shutdown_behavior doesn't work correctly\n- instance attribute disable_api_termination isn't supported\n- stop instance was broken by the change set of  the following. It needs unbreak.\n\ncommit eb03d47fecd3bfc24243da29ee01679b334a08fe\nAuthor: Vishvananda Ishaya <email address hidden>\nDate:   Fri Sep 23 09:22:32 2011 -0700\n\n    Remove AoE, Clean up volume code\n    \n     * Removes Ata Over Ethernet\n     * Adds drivers to libvirt for volumes\n     * Adds initialize_connection and terminate_connection to volume api\n     * Passes connection info back through volume api\n    \n    Change-Id: I1b1626f40bebe8466ab410fb174683293c7c474f", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/905270", 
    "owner": "https://api.launchpad.net/1.0/~yamahata", 
    "id": 905270, 
    "index": 2692, 
    "openned": "2011-12-16 11:07:11.746423+00:00", 
    "created": "2011-12-16 11:07:11.746423+00:00", 
    "title": "can't start ebs-booted instance that initiated shutdown", 
    "comments": [
        {
            "content": "According to EC2 documentation, EBS-instances that initiated shutdown result in stopped state.\nAnd then it can be started again.\n(On the other hand non-EBS instance result in terminted when instance initiated shutdown)\n\nHowever, the current nova case, the shutdowned instance always results in terminated status.\nAs related issues are\n- describe-instance-attribute instance_initiated_shutdown_behavior doesn't work correctly\n- instance attribute disable_api_termination isn't supported\n- stop instance was broken by the change set of  the following. It needs unbreak.\n\ncommit eb03d47fecd3bfc24243da29ee01679b334a08fe\nAuthor: Vishvananda Ishaya <email address hidden>\nDate:   Fri Sep 23 09:22:32 2011 -0700\n\n    Remove AoE, Clean up volume code\n    \n     * Removes Ata Over Ethernet\n     * Adds drivers to libvirt for volumes\n     * Adds initialize_connection and terminate_connection to volume api\n     * Passes connection info back through volume api\n    \n    Change-Id: I1b1626f40bebe8466ab410fb174683293c7c474f", 
            "date_created": "2011-12-16 11:07:11.746423+00:00", 
            "author": "https://api.launchpad.net/1.0/~yamahata"
        }, 
        {
            "content": "The fix is available at https://review.openstack.org/#change,2417", 
            "date_created": "2011-12-16 11:24:57.390206+00:00", 
            "author": "https://api.launchpad.net/1.0/~yamahata"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/2417\nCommitted: http://github.com/openstack/nova/commit/932f3aafd1c735a8ec9e158a94ebb983d6baeb0e\nSubmitter: Jenkins\nBranch:    master\n\ncommit 932f3aafd1c735a8ec9e158a94ebb983d6baeb0e\nAuthor: Isaku Yamahata <email address hidden>\nDate:   Wed Dec 14 16:15:52 2011 +0900\n\n    Unbreak start instance and fixes bug 905270\n    \n    This patch fixes the bug 905270\n    https://bugs.launchpad.net/nova/+bug/905270\n    \n    According to EC2 documentation, EBS-instances that initiated shutdown\n     result in stopped state.  And then it can be started again.  (On the\n     other hand non-EBS instance result in terminted when instance\n     initiated shutdown)\n    \n    However, the current nova case, the shutdowned instance always results\n     in terminated status.  As related issues are\n     - describe-instance-attribute instance_initiated_shutdown_behavior doesn't\n       work correctly\n     - instance attribute disable_api_termination isn't supported\n     - stop instance was broken by the change set of the following.\n       It needs unbreak.\n    \n      > commit eb03d47fecd3bfc24243da29ee01679b334a08fe\n      >  Author: Vishvananda Ishaya <email address hidden>\n      >  Date: Fri Sep 23 09:22:32 2011 -0700\n      >\n      >    Remove AoE, Clean up volume code\n      >\n      >     * Removes Ata Over Ethernet\n      >     * Adds drivers to libvirt for volumes\n      >     * Adds initialize_connection and terminate_connection to volume api\n      >     * Passes connection info back through volume api\n      >\n      >  Change-Id: I1b1626f40bebe8466ab410fb174683293c7c474f\n    \n    This patch\n    - unbreak start instance\n    - implement instance_initiated_shutdown_behavior and make it EC2 compatible\n    - implement disable_api_termination\n    \n    ---\n    Changes 5 -> 6:\n    - fixes to catch up 26b7b9457a5899ecca93fd67d3879efcad4e4968\n    \n    Changes 4 -> 5:\n    - HACKING compilance\n    \n    Changes 3 -> 4:\n    - rebased to 4c5586a28fd7a085369c49f6039876ffdc86b526\n      sqlalchemy migrate version\n    \n    Changes 2 -> 3:\n    - rename long name to shorter one\n      s/instance_initiated_shutdown_behavior/shutdown_terminate/g\n      s/disable_api_termination/disable_terminate/g\n      as suggested Kevin L. Mitchell\n    - improved nova.api.ec2.cloud._state_description\n    - pep8\n    - broken out patches are available for easy review at\n      git://github.com/yamahata/nova.git lp905270-2\n    \n    Changes 1 -> 2:\n    - fixed an unit test failure pointed out by Mark.\n      (I think ebtabls failure strongly suggests installation problem)\n    - introduce vm_states.SHUTOFF and put instance state which is in\n      power_state.{NOSTATE, SHUTOFF} into vm_states.SHUTOFF.\n    - simplified logic a bit by vm_states.SHUTOFF as suggested by Vish.\n    - instance_initiated_shutdown_behavior:String(255)\n       =>\n      instance_initiated_shutdown_terminate:Boolean()\n      as suggested by Vish.\n    - Added Johannes Erdfelt to reviews as they written the vm_states state\n      machine checker.\n      I'd have liked to add David Subiros either, but he doesn't seem to be a\n      registered user of the gerrit.\n    \n    Change-Id: Ibeb94f65137feadad2c343913b39195e3f96a35e\n", 
            "date_created": "2012-01-12 18:10:03.511587+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-01-25 09:54:54.632757+00:00"
}