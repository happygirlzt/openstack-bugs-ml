{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 10:55:06.309087+00:00", 
    "description": "1. use admin user to boot a instance\n  hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+----------------------+\n| ID                                   | Name           | Status  | Networks             |\n+--------------------------------------+----------------+---------+----------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10 |\n\n\n2. add additional fixed-ip to the instance\n  hzgaott@114-113-199-x:~$ nova add-fixed-ip 6d74b0cc-5bb2-4233-b9a0-f80013412a3d f95c4d3b-44a1-436e-b6f5-d186569d9514\n  hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+------------------------------------+\n| ID                                   | Name           | Status  | Networks                           |\n+--------------------------------------+----------------+---------+------------------------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10, 10.120.34.18 |\n\n\n3. remove the additional fixed-ip\n    hzgaott@114-113-199-8:~$ nova remove-fixed-ip 6d74b0cc-5bb2-4233-b9a0-f80013412a3d 10.120.34.18\n    return 202\n    but the fixed-ip is still there.\n    hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+------------------------------------+\n| ID                                   | Name           | Status  | Networks                           |\n+--------------------------------------+----------------+---------+------------------------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10, 10.120.34.18 |\n    \n  \n\nin nova-network.log\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/network/manager.py\", line 257, in wrapped\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return func(self, context, *args, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/network/manager.py\", line 1217, in remove_fixed_ip_from_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     fixed_ips = self.db.fixed_ip_get_by_instance(context, instance_id)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/api.py\", line 482, in fixed_ip_get_by_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return IMPL.fixed_ip_get_by_instance(context, instance_uuid)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 129, in wrapper\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 1217, in fixed_ip_get_by_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     raise exception.InvalidUUID(uuid=instance_uuid)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp InvalidUUID: Expected a uuid but received 559.\n\n\nthe method \"fixed_ip_get_by_instance\" in sqlalchemy/api.py used instance uuid rather than id, so change id to uuid in network/api.py can fix the bug.", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1065899", 
    "owner": "https://api.launchpad.net/1.0/~gtt116", 
    "id": 1065899, 
    "index": 3101, 
    "openned": "2012-10-12 09:31:58.112762+00:00", 
    "created": "2012-10-12 09:31:58.112762+00:00", 
    "title": "remove-fixed-ip raise InvalidUUID Exception", 
    "comments": [
        {
            "content": "1. use admin user to boot a instance\n  hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+----------------------+\n| ID                                   | Name           | Status  | Networks             |\n+--------------------------------------+----------------+---------+----------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10 |\n\n\n2. add additional fixed-ip to the instance\n  hzgaott@114-113-199-x:~$ nova add-fixed-ip 6d74b0cc-5bb2-4233-b9a0-f80013412a3d f95c4d3b-44a1-436e-b6f5-d186569d9514\n  hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+------------------------------------+\n| ID                                   | Name           | Status  | Networks                           |\n+--------------------------------------+----------------+---------+------------------------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10, 10.120.34.18 |\n\n\n3. remove the additional fixed-ip\n    hzgaott@114-113-199-8:~$ nova remove-fixed-ip 6d74b0cc-5bb2-4233-b9a0-f80013412a3d 10.120.34.18\n    return 202\n    but the fixed-ip is still there.\n    hzgaott@114-113-199-x:~$ nova list\n+--------------------------------------+----------------+---------+------------------------------------+\n| ID                                   | Name           | Status  | Networks                           |\n+--------------------------------------+----------------+---------+------------------------------------+\n| 6d74b0cc-5bb2-4233-b9a0-f80013412a3d | test-fixed-ip  | ACTIVE  | private=10.120.34.10, 10.120.34.18 |\n    \n  \n\nin nova-network.log\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/network/manager.py\", line 257, in wrapped\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return func(self, context, *args, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/network/manager.py\", line 1217, in remove_fixed_ip_from_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     fixed_ips = self.db.fixed_ip_get_by_instance(context, instance_id)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/api.py\", line 482, in fixed_ip_get_by_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return IMPL.fixed_ip_get_by_instance(context, instance_uuid)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 129, in wrapper\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp   File \"/usr/local/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 1217, in fixed_ip_get_by_instance\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp     raise exception.InvalidUUID(uuid=instance_uuid)\n2012-10-12 16:50:20 TRACE nova.openstack.common.rpc.amqp InvalidUUID: Expected a uuid but received 559.\n\n\nthe method \"fixed_ip_get_by_instance\" in sqlalchemy/api.py used instance uuid rather than id, so change id to uuid in network/api.py can fix the bug.", 
            "date_created": "2012-10-12 09:31:58.112762+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "Only affect folsom", 
            "date_created": "2012-10-12 09:34:50.438131+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/14383", 
            "date_created": "2012-10-12 09:42:15.428762+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/14383\nCommitted: http://github.com/openstack/nova/commit/66521a1571f0922f791ae7f405129fb99b870f38\nSubmitter: Jenkins\nBranch:    master\n\ncommit 66521a1571f0922f791ae7f405129fb99b870f38\nAuthor: TianTian Gao <gtt116@126.com>\nDate:   Fri Oct 12 17:37:05 2012 +0800\n\n    Used instance uuid rather than id in remove-fixed-ip\n    \n    remove-fixed-ip called db method fixed_ip_get_by_instance. but\n    fixed_ip_get_by_instance use instance uuid not id, so change to\n    uuid in remove-fixed-ip.\n    \n    Fixed bug: #1065899\n    \n    Change-Id: Ic7526c7e91933424c04be9bb91d4a98cfedd9b01\n", 
            "date_created": "2012-10-12 21:08:35.415261+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/folsom\nReview: https://review.openstack.org/16710", 
            "date_created": "2012-11-22 00:12:55.521673+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/16710\nCommitted: http://github.com/openstack/nova/commit/85a8bc285131bdc179e884b7b8a5b1e43206a1be\nSubmitter: Jenkins\nBranch:    stable/folsom\n\ncommit 85a8bc285131bdc179e884b7b8a5b1e43206a1be\nAuthor: TianTian Gao <gtt116@126.com>\nDate:   Fri Oct 12 17:37:05 2012 +0800\n\n    Used instance uuid rather than id in remove-fixed-ip\n    \n    remove-fixed-ip called db method fixed_ip_get_by_instance. but\n    fixed_ip_get_by_instance use instance uuid not id, so change to\n    uuid in remove-fixed-ip.\n    \n    Fixed bug: #1065899\n    \n    Change-Id: Ic7526c7e91933424c04be9bb91d4a98cfedd9b01\n    (cherry picked from commit 66521a1571f0922f791ae7f405129fb99b870f38)\n", 
            "date_created": "2012-11-27 13:40:00.580824+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-11-21 09:45:50.248657+00:00"
}