{
    "status": "Fix Released", 
    "last_updated": "2013-04-11 19:54:09.099943+00:00", 
    "description": "\nI am trying the LibvirtHybridOVSBridgeDriver, with the uptodate devsatck and the vlan manager.\n\nI've created one network for the demo project : \nnova-manage network create net2 --fixed_range_v4=172.16.2.0/24 --num_networks=1 --network_size=256 --vlan=1001\n\n\nI boot an instance : \nnova boot --flavor 1 --image 000f2e5b-e1d1-4bc0-a9d1-3e07d527f7f1 vm_1\n\n\nthe instance can't be launched du to the following error : \n\n2012-09-13 15:14:06 ERROR nova.compute.manager [req-a10f2d0d-4992-4b50-a297-b7b188ab98a1 demo demo] [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Instance failed to spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Traceback (most recent call last):\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 735, in _spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     temp_level, payload)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.gen.next()\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     return f(*args, **kw)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1049, in spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1878, in _create_domain_and_network\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.firewall_driver.setup_basic_filtering(instance, network_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] AttributeError: 'LibvirtHybridOVSBridgeDriver' object has no attribute 'setup_basic_filtering'\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] \nInstance failed to spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Traceback (most recent call last):\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 735, in _spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     temp_level, payload)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.gen.next()\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     return f(*args, **kw)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1049, in spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1878, in _create_domain_and_network\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.firewall_driver.setup_basic_filtering(instance, network_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] AttributeError: 'LibvirtHybridOVSBridgeDriver' object has no attribute 'setup_basic_filtering'\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]", 
    "tags": [], 
    "importance": "High", 
    "heat": 28, 
    "link": "https://bugs.launchpad.net/nova/+bug/1050433", 
    "owner": "https://api.launchpad.net/1.0/~berrange", 
    "id": 1050433, 
    "index": 806, 
    "openned": "2012-09-13 13:48:29.676771+00:00", 
    "created": "2012-09-13 13:48:29.676771+00:00", 
    "title": "LibvirtBridgeDriver crashes when spawning an instance with NoopFirewallDriver", 
    "comments": [
        {
            "content": "\nI am trying the LibvirtHybridOVSBridgeDriver, with the uptodate devsatck and the vlan manager.\n\nI've created one network for the demo project : \nnova-manage network create net2 --fixed_range_v4=172.16.2.0/24 --num_networks=1 --network_size=256 --vlan=1001\n\n\nI boot an instance : \nnova boot --flavor 1 --image 000f2e5b-e1d1-4bc0-a9d1-3e07d527f7f1 vm_1\n\n\nthe instance can't be launched du to the following error : \n\n2012-09-13 15:14:06 ERROR nova.compute.manager [req-a10f2d0d-4992-4b50-a297-b7b188ab98a1 demo demo] [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Instance failed to spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Traceback (most recent call last):\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 735, in _spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     temp_level, payload)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.gen.next()\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     return f(*args, **kw)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1049, in spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1878, in _create_domain_and_network\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.firewall_driver.setup_basic_filtering(instance, network_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] AttributeError: 'LibvirtHybridOVSBridgeDriver' object has no attribute 'setup_basic_filtering'\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] \nInstance failed to spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] Traceback (most recent call last):\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 735, in _spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     temp_level, payload)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.gen.next()\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     return f(*args, **kw)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1049, in spawn\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     block_device_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1878, in _create_domain_and_network\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]     self.firewall_driver.setup_basic_filtering(instance, network_info)\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f] AttributeError: 'LibvirtHybridOVSBridgeDriver' object has no attribute 'setup_basic_filtering'\n2012-09-13 15:14:06 TRACE nova.compute.manager [instance: b6fab81d-d700-4a4a-bb3f-88422e3bc40f]", 
            "date_created": "2012-09-13 13:48:29.676771+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "I've changed My localrc with : \n\nLIBVIRT_FIREWALL_DRIVER=nova.virt.firewall.NoopFirewallDriver\nNOVA_VIF_DRIVER=nova.virt.libvirt.vif.LibvirtHybridOVSBridgeDriver\n\nBut I still have an error :\n\nlibvir: Network Filter error : Network filter not found: Could not find filter 'nova-instance-instance-00000001-fa163e40ec0f'\n2012-09-13 17:52:23 ERROR nova.compute.manager [req-a45ccf42-1341-4c8f-8d47-25f22a2d446e demo demo] [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699] Instance failed to spawn\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699] Traceback (most recent call last):\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/compute/manager.py\", line 740, in _spawn\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     block_device_info)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     temp_level, payload)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     self.gen.next()\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     return f(*args, **kw)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1049, in spawn\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     block_device_info)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1880, in _create_domain_and_network\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     domain = self._create_domain(xml)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1859, in _create_domain\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     domain.createWithFlags(launch_flags)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     rv = execute(f,*args,**kwargs)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     rv = meth(*args,**kwargs)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 581, in createWithFlags\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699] libvirtError: Network filter not found: Could not find filter 'nova-instance-instance-00000001-fa163e40ec0f'\n2012-09-13 17:52:23 TRACE nova.compute.manager [instance: 3fd27ec1-b6a8-4210-b78e-6ecdb7828699] \nInstance failed to spawn\n", 
            "date_created": "2012-09-13 15:56:51.681527+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "I have exactly the same issue wit FlatDHCPManager", 
            "date_created": "2012-09-14 09:20:14.286356+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "it seems to work better with :\n\nLIBVIRT_FIREWALL_DRIVER=nova.virt.libvirt.firewall.IptablesFirewallDriver", 
            "date_created": "2012-09-14 13:49:26.491365+00:00", 
            "author": "https://api.launchpad.net/1.0/~mathieu-rohon"
        }, 
        {
            "content": "interesting.  this actually seems to be an issue with the standard LibvirtBridgeDriver, which the LibvirtHybridOVSBridgeDriver inherits from.  Can you run your tests with: \n\nLIBVIRT_FIREWALL_DRIVER=nova.virt.firewall.NoopFirewallDriver\nNOVA_VIF_DRIVER=nova.virt.libvirt.vif.LibvirtBridgeDriver\n\nI suspect you would see the same thing.  \n\nNote: these vif-drivers are meant only to be used with Quantum, and in particular the Hybrid driver assumes that open vswitch is installed, and that an openvswitch bridge br-int exists.  ", 
            "date_created": "2012-09-16 20:00:40.532408+00:00", 
            "author": "https://api.launchpad.net/1.0/~danwent"
        }, 
        {
            "content": "I have been grinding up against this one for a couple days now also. Not sure if its the same or even not a storage issue but figured I would post details.\n\nHosts boot, things look great but Arps seemed to get snuffed out by the action, so went to noop.firewall. Then everything goes south. \n\nlocalrc: \nHOST_IP=127.0.0.1\nADMIN_PASSWORD=openstack\nMYSQL_PASSWORD=openstack\nRABBIT_PASSWORD=openstack\nSERVICE_PASSWORD=openstack\nMYSQL_PASSWORD=password\n#SCHEDULER=nova.scheduler.simple.SimpleScheduler\nENABLED_SERVICES+=,-n-vol,c-api,c-sch,c-vol,-n-net,q-svc,q-agt,q-dhcp,quantum,horizon,mysql\nFIXED_RANGE=172.24.17.0/24\nFLOATING_RANGE=172.31.246.128/25\nSYSLOG=True\nLIBVIRT_FIREWALL_DRIVER=nova.virt.libvirt.firewall.IptablesFirewallDriver\n\n\nTrying to get around Arps being dropped from controller to host. \nController = 172.24.17.220\nVM = 172.24.17.3\n\nFrom 2 differnet phy hosts w/same config:\nin_port(0),eth(src=66:70:9c:83:be:42,dst=ff:ff:ff:ff:ff:ff),eth_type(0x0806),arp(sip=172.24.17.220,tip=172.24.17.3,op=1,sha=66:70:9c:83:be:42,tha=00:00:00:00:00:00), packets:73, bytes:3066, used:0.840s, actions:drop\n\nin_port(0),eth(src=e8:39:35:c4:70:f4,dst=ff:ff:ff:ff:ff:ff),eth_type(0x0806),arp(sip=172.24.17.225,tip=172.24.17.130,op=1,sha=e8:39:35:c4:70:f4,tha=00:00:00:00:00:00), packets:1, bytes:42, used:0.825s, actions:2\nin_port(2),eth(src=00:1e:c9:dd:bd:15,dst=01:80:c2:00:00:00), packets:95, bytes:5700, used:0.225s, actions:drop\n\n======================================================================\n\nPaste is with\nHOST_IP=127.0.0.1\nADMIN_PASSWORD=openstack\nMYSQL_PASSWORD=openstack\nRABBIT_PASSWORD=openstack\nSERVICE_PASSWORD=openstack\nMYSQL_PASSWORD=password\n#SCHEDULER=nova.scheduler.simple.SimpleScheduler\nENABLED_SERVICES+=,-n-vol,c-api,c-sch,c-vol,-n-net,q-svc,q-agt,q-dhcp,quantum,horizon,mysql\nFIXED_RANGE=172.24.17.128/25\nFLOATING_RANGE=x.x.139.40/29\nSYSLOG=True\nLIBVIRT_FIREWALL_DRIVER=nova.virt.firewall.NoopFirewallDriver\n\nhttp://pastebin.com/4pGvuWma\n\n===============================================================================\nWith this config. I noticed block error which may be due to simple scheduler being depreciated w/Cinder.\n\nOct  2 02:44:28 openstack2 kernel: [20294.298311] block nbd15: NBD_DISCONNECT\nOct  2 02:44:28 openstack2 kernel: [20294.298430] block nbd15: Receive control failed (result -32)\nOct  2 02:44:28 openstack2 kernel: [20294.298448] block nbd15: queue cleared\n\nHOST_IP=127.0.0.1\nADMIN_PASSWORD=openstack\nMYSQL_PASSWORD=openstack\nRABBIT_PASSWORD=openstack\nSERVICE_PASSWORD=openstack\nMYSQL_PASSWORD=password\nSCHEDULER=nova.scheduler.simple.SimpleScheduler\nENABLED_SERVICES+=,-n-vol,c-api,c-sch,c-vol,-n-net,q-svc,q-agt,q-dhcp,quantum,horizon,mysql\nFIXED_RANGE=172.24.17.128/25\nFLOATING_RANGE=x.x.139.40/29\nSYSLOG=True\nLIBVIRT_FIREWALL_DRIVER=nova.virt.firewall.NoopFirewallDriver\nNOVA_VIF_DRIVER=nova.virt.libvirt.vif.LibvirtBridgeDriver\n\n\nlibvirt.log\n2012-10-02 06:39:11.719+0000: 31727: error : virNetDevGetIndex:656 : Unable to get index for interface vnet0: No such device\n2012-10-02 06:42:06.644+0000: 31724: error : virNetSocketReadWire:996 : End of file while reading data: Input/output error\n2012-10-02 06:42:06.644+0000: 31724: error : virNetSocketReadWire:996 : End of file while reading data: Input/output error\n2012-10-02 06:44:31.558+0000: 43773: info : libvirt version: 0.9.8\n2012-10-02 06:44:31.558+0000: 43773: error : virNetDevGetIndex:656 : Unable to get index for interface vnet0: No such device\n\n\nhttp://pastebin.com/bX4u4RhZ\n\n\n=====================================================\n\nSo I ran it again without SimpleScheduler, looked the same. May very well be a storage problem, going crosseyed.\n\nHOST_IP=127.0.0.1\nADMIN_PASSWORD=openstack\nMYSQL_PASSWORD=openstack\nRABBIT_PASSWORD=openstack\nSERVICE_PASSWORD=openstack\nMYSQL_PASSWORD=password\n#SCHEDULER=nova.scheduler.simple.SimpleScheduler\nENABLED_SERVICES+=,-n-vol,c-api,c-sch,c-vol,-n-net,q-svc,q-agt,q-dhcp,quantum,horizon,mysql\nFIXED_RANGE=172.24.17.128/25\nFLOATING_RANGE=x.x.139.40/29\nSYSLOG=True\n#LIBVIRT_FIREWALL_DRIVER=nova.virt.libvirt.firewall.IptablesFirewallDriver\nLIBVIRT_FIREWALL_DRIVER=nova.virt.firewall.NoopFirewallDriver\nNOVA_VIF_DRIVER=nova.virt.libvirt.vif.LibvirtBridgeDriver\n\nSame output in libvirt\n2012-10-02 06:53:06.610+0000: 43768: error : virNetSocketReadWire:996 : End of file while reading data: Input/output error\n2012-10-02 06:53:06.610+0000: 43768: error : virNetSocketReadWire:996 : End of file while reading data: Input/output error\n2012-10-02 06:56:12.151+0000: 9305: info : libvirt version: 0.9.8\n2012-10-02 06:56:12.151+0000: 9305: error : virNetDevGetIndex:656 : Unable to get index for interface vnet0: No such device\n\nhttp://pastebin.com/phAX0V2h\n\n\nDan, do you have a working devstack localrc or even a couple of scenarios  that you could share?\n\nThanks!\n-Brent", 
            "date_created": "2012-10-02 07:02:11.678568+00:00", 
            "author": "https://api.launchpad.net/1.0/~brent-salisbury"
        }, 
        {
            "content": "nachi says that this bug will be fixed by: https://review.openstack.org/#/c/19126/", 
            "date_created": "2013-01-28 21:24:57.278570+00:00", 
            "author": "https://api.launchpad.net/1.0/~danwent"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/19126\nCommitted: http://github.com/openstack/nova/commit/3f513aa1e408f762867d9cd7c64ffde68f960437\nSubmitter: Jenkins\nBranch:    master\n\ncommit 3f513aa1e408f762867d9cd7c64ffde68f960437\nAuthor: Daniel P. Berrange <email address hidden>\nDate:   Mon Dec 17 20:27:50 2012 +0000\n\n    Merge LibvirtHybridOVSBridgeDriver into LibvirtGenericVIFDriver\n    \n    The LibvirtHybridOVSBridgeDriver VIF driver and the\n    LibvirtOpenVswitchDriver VIF driver both support OpenVswitch\n    based guest configs. The difference is that the hybrid driver\n    does not connect the VM directly to the OVS bridge. Instead it\n    connects the guest to a private Linux bridge, connected to the\n    OVS bridge via a veth pair. This allows iptables firewall rules\n    to be applied to the guest VIF. The hybrid driver should always\n    be used unless the admin has disabled Nova firewalls using the\n    NoopFirewallDriver impl. Rather than require the admin to figure\n    this out themselves, pick the right impl automatically based\n    on the configured firewall driver.\n    \n    When Quantum gains support for firewalling, it will need to be\n    able to inform Nova whether it has got a filtering applied to\n    the VIFs, and thus let Nova intelligently skip its own attempt\n    at filtering.\n    \n    The LibvirtGenericVIFDriver class can use the 'vif_type' mapping\n    field to determine whether an OVS network configuration is\n    required. In combination with a check against the firewall\n    driver, a dedicated driver for OVS hybrid setup is no longer\n    required.\n    \n    The LibvirtHybridOVSBridgeDriver class functionality is\n    merged into LibvirtGenericVIFDriver. For backwards compatibility\n    with the Folsom release, the existing LibvirtHybridOVSBridgeDriver\n    class is made to inherit from LibvirtGenericVIFDriver and directly\n    call the bridge specific setup APIs. This eases migration to\n    the new VIF impl during the Grizzly deployment lifecycle, with\n    an expectation that the LibvirtHybridOVSBridgeDriver stub\n    will be deleted after the Havana release.\n    \n    Bug: 1050433\n    Blueprint: libvirt-vif-driver\n    Change-Id: I93294409a75aaa15d297471ab3e600c3c124bcde\n    Signed-off-by: Daniel P. Berrange <email address hidden>\n", 
            "date_created": "2013-02-10 00:34:29.299106+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/folsom\nReview: https://review.openstack.org/22136", 
            "date_created": "2013-02-17 14:42:06.271869+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/22136\nCommitted: http://github.com/openstack/nova/commit/ecd98d2555e2bf606e9078fcf4bd38f95abaaa69\nSubmitter: Jenkins\nBranch:    stable/folsom\n\ncommit ecd98d2555e2bf606e9078fcf4bd38f95abaaa69\nAuthor: Gary Kotton <email address hidden>\nDate:   Sun Feb 17 14:30:01 2013 +0000\n\n    Enable libvirt to work with NoopFirewallDriver\n    \n    Fixes bug 1050433\n    \n    Change-Id: I49613c7d1e6b14411dcdc342366e163a21673f78\n", 
            "date_created": "2013-02-21 11:53:20.541950+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-02-21 19:34:55.935653+00:00"
}