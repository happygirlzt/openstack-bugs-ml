{
    "status": "Invalid", 
    "last_updated": "2013-01-31 21:52:30.142018+00:00", 
    "description": "I'm running Folsom on Ubuntu 12.04. I have one controller running API and scheduler and a compute node running network and compute. Multi host is turned on.\n\nHere's a collection of some AUDIT outputs when launching VMs:\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 512 MB, free: 0 MB\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 0 GB, free: 133 GB\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 0\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 4608 MB, free: 64 MB\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 64 GB, free: 69 GB\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 2\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 11144 MB, free: 94 MB\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 94 GB, free: 39 GB\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 3\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 904 MB, free: -56 MB\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: -56 GB, free: 189 GB\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 0\n\t\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 7048 MB, free: 34 MB\n\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 34 GB, free: 99 GB\n\t\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 1\n\t\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 9096 MB, free: 64 MB\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 64 GB, free: 69 GB\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 2\n\nSomething is not right in the reporting of memory. A second issue in the resource tracker is that I get the following\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Disk limit not specified, defaulting to unlimited\n\ndespite having \nreserved_host_disk_mb=5000\n\nIn the nova.conf on all nodes (unless I'm mistaken and this is not the correct flag)\n\nIt seems like this is expected to be put into filter_properties by the scheduler, though I can't see anywhere in the scheduler that would do that.", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1092418", 
    "owner": "https://api.launchpad.net/1.0/~hanlind", 
    "id": 1092418, 
    "index": 751, 
    "openned": "2012-12-20 05:57:01.494770+00:00", 
    "created": "2012-12-20 05:57:01.494770+00:00", 
    "title": "resource tracker reporting strange values in AUDIT logs", 
    "comments": [
        {
            "content": "I'm running Folsom on Ubuntu 12.04. I have one controller running API and scheduler and a compute node running network and compute. Multi host is turned on.\n\nHere's a collection of some AUDIT outputs when launching VMs:\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 512 MB, free: 0 MB\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 0 GB, free: 133 GB\n\n2012-12-20 14:14:51 AUDIT nova.compute.resource_tracker [req-9abf98f8-c1b7-49b3-b4e8-fc48c1479bf2 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 0\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 4608 MB, free: 64 MB\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 64 GB, free: 69 GB\n\n2012-12-20 15:34:58 AUDIT nova.compute.resource_tracker [req-aaed2156-063b-47d6-82bf-7e9fcd87c930 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 2\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 11144 MB, free: 94 MB\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 94 GB, free: 39 GB\n\n2012-12-20 15:39:25 AUDIT nova.compute.resource_tracker [req-87344bc6-2b02-42d0-a42d-e6896f0bd44d 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 3\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 904 MB, free: -56 MB\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: -56 GB, free: 189 GB\n\t\n2012-12-20 15:43:03 AUDIT nova.compute.resource_tracker [req-acd77963-e253-489d-af69-c04606b35937 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 0\n\t\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 7048 MB, free: 34 MB\n\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 34 GB, free: 99 GB\n\t\n2012-12-20 16:44:37 AUDIT nova.compute.resource_tracker [req-1d92251e-c6ba-457b-8709-9d8939825c5c 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 1\n\t\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total memory: 145059 MB, used: 9096 MB, free: 64 MB\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total disk: 133 GB, used: 64 GB, free: 69 GB\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Total VCPUs: 12, used: 2\n\nSomething is not right in the reporting of memory. A second issue in the resource tracker is that I get the following\n\n2012-12-20 16:44:40 AUDIT nova.compute.resource_tracker [req-6608e127-c615-4647-926d-9f8e24f33cad 545de9518b724f069b410513614bda24 71f58bddf33b4a0f8bd877bf87c8a2ae] Disk limit not specified, defaulting to unlimited\n\ndespite having \nreserved_host_disk_mb=5000\n\nIn the nova.conf on all nodes (unless I'm mistaken and this is not the correct flag)\n\nIt seems like this is expected to be put into filter_properties by the scheduler, though I can't see anywhere in the scheduler that would do that.", 
            "date_created": "2012-12-20 05:57:01.494770+00:00", 
            "author": "https://api.launchpad.net/1.0/~michael-chapman-anu"
        }, 
        {
            "content": "Fix proposed to branch: stable/folsom\nReview: https://review.openstack.org/19459", 
            "date_created": "2013-01-11 12:48:27.192447+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "For the second reported problem, the correct flag to limit disk usage is disk_allocation_ratio.", 
            "date_created": "2013-01-11 13:45:54.971793+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanlind"
        }, 
        {
            "content": "Additionally, this flag is set on the scheduler node and is only used if the disk filter is enabled.", 
            "date_created": "2013-01-11 13:57:26.987952+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanlind"
        }, 
        {
            "content": "Doesn't apply to grizzly", 
            "date_created": "2013-01-17 23:02:40.895073+00:00", 
            "author": "https://api.launchpad.net/1.0/~markmc"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/19459\nCommitted: http://github.com/openstack/nova/commit/b3c2f61d8d54b0e8c0afe3da529b3ec7c12f461b\nSubmitter: Jenkins\nBranch:    stable/folsom\n\ncommit b3c2f61d8d54b0e8c0afe3da529b3ec7c12f461b\nAuthor: Hans Lindgren <email address hidden>\nDate:   Fri Jan 11 13:40:25 2013 +0100\n\n    Fix typo in resource tracker audit message\n    \n    Resolves bug 1092418.\n    \n    Change-Id: Ia51f1ee78bc612743095759fef6067c93fbcd222\n", 
            "date_created": "2013-01-17 23:25:47.084283+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-01-22 10:19:48.451356+00:00"
}