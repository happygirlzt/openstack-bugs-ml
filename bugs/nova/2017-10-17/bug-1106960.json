{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:08:47.954071+00:00", 
    "description": "libvir: error : this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 ERROR nova.manager [-] Error during ComputeManager._report_driver_status: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager Traceback (most recent call last):\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/manager.py\", line 230, in periodic_tasks\n2013-01-27 08:24:50.832 TRACE nova.manager task(self, context)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/compute/manager.py\", line 3275, in _report_driver_status\n2013-01-27 08:24:50.832 TRACE nova.manager capabilities = self.driver.get_host_stats(refresh=True)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2925, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager return self.host_state.get_host_stats(refresh=refresh)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3198, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager self.update_status()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3208, in update_status\n2013-01-27 08:24:50.832 TRACE nova.manager data[\"vcpus_used\"] = self.connection.get_vcpu_used()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2109, in get_vcpu_used\n2013-01-27 08:24:50.832 TRACE nova.manager vcpus = dom.vcpus()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-01-27 08:24:50.832 TRACE nova.manager result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-01-27 08:24:50.832 TRACE nova.manager rv = execute(f,*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-01-27 08:24:50.832 TRACE nova.manager rv = meth(*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2087, in vcpus\n2013-01-27 08:24:50.832 TRACE nova.manager if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2013-01-27 08:24:50.832 TRACE nova.manager libvirtError: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager\nERROR:nova.manager:Error during ComputeManager._report_driver_status: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager Traceback (most recent call last):\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/manager.py\", line 230, in periodic_tasks\n2013-01-27 08:24:50.832 TRACE nova.manager task(self, context)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/compute/manager.py\", line 3275, in _report_driver_status\n2013-01-27 08:24:50.832 TRACE nova.manager capabilities = self.driver.get_host_stats(refresh=True)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2925, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager return self.host_state.get_host_stats(refresh=refresh)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3198, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager self.update_status()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3208, in update_status\n2013-01-27 08:24:50.832 TRACE nova.manager data[\"vcpus_used\"] = self.connection.get_vcpu_used()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2109, in get_vcpu_used\n2013-01-27 08:24:50.832 TRACE nova.manager vcpus = dom.vcpus()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-01-27 08:24:50.832 TRACE nova.manager result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-01-27 08:24:50.832 TRACE nova.manager rv = execute(f,*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-01-27 08:24:50.832 TRACE nova.manager rv = meth(*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2087, in vcpus\n2013-01-27 08:24:50.832 TRACE nova.manager if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2013-01-27 08:24:50.832 TRACE nova.manager libvirtError: this function is not supported by the connection driver: virDomainGetVcpus", 
    "tags": [], 
    "importance": "High", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1106960", 
    "owner": "https://api.launchpad.net/1.0/~zulcss", 
    "id": 1106960, 
    "index": 943, 
    "openned": "2013-01-27 14:57:16.872966+00:00", 
    "created": "2013-01-27 14:57:16.872966+00:00", 
    "title": "lxc doesnt support virDomainGetVcpus", 
    "comments": [
        {
            "content": "libvir: error : this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 ERROR nova.manager [-] Error during ComputeManager._report_driver_status: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager Traceback (most recent call last):\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/manager.py\", line 230, in periodic_tasks\n2013-01-27 08:24:50.832 TRACE nova.manager task(self, context)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/compute/manager.py\", line 3275, in _report_driver_status\n2013-01-27 08:24:50.832 TRACE nova.manager capabilities = self.driver.get_host_stats(refresh=True)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2925, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager return self.host_state.get_host_stats(refresh=refresh)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3198, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager self.update_status()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3208, in update_status\n2013-01-27 08:24:50.832 TRACE nova.manager data[\"vcpus_used\"] = self.connection.get_vcpu_used()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2109, in get_vcpu_used\n2013-01-27 08:24:50.832 TRACE nova.manager vcpus = dom.vcpus()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-01-27 08:24:50.832 TRACE nova.manager result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-01-27 08:24:50.832 TRACE nova.manager rv = execute(f,*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-01-27 08:24:50.832 TRACE nova.manager rv = meth(*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2087, in vcpus\n2013-01-27 08:24:50.832 TRACE nova.manager if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2013-01-27 08:24:50.832 TRACE nova.manager libvirtError: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager\nERROR:nova.manager:Error during ComputeManager._report_driver_status: this function is not supported by the connection driver: virDomainGetVcpus\n2013-01-27 08:24:50.832 TRACE nova.manager Traceback (most recent call last):\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/manager.py\", line 230, in periodic_tasks\n2013-01-27 08:24:50.832 TRACE nova.manager task(self, context)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/compute/manager.py\", line 3275, in _report_driver_status\n2013-01-27 08:24:50.832 TRACE nova.manager capabilities = self.driver.get_host_stats(refresh=True)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2925, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager return self.host_state.get_host_stats(refresh=refresh)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3198, in get_host_stats\n2013-01-27 08:24:50.832 TRACE nova.manager self.update_status()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3208, in update_status\n2013-01-27 08:24:50.832 TRACE nova.manager data[\"vcpus_used\"] = self.connection.get_vcpu_used()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2109, in get_vcpu_used\n2013-01-27 08:24:50.832 TRACE nova.manager vcpus = dom.vcpus()\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-01-27 08:24:50.832 TRACE nova.manager result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-01-27 08:24:50.832 TRACE nova.manager rv = execute(f,*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-01-27 08:24:50.832 TRACE nova.manager rv = meth(*args,**kwargs)\n2013-01-27 08:24:50.832 TRACE nova.manager File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2087, in vcpus\n2013-01-27 08:24:50.832 TRACE nova.manager if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2013-01-27 08:24:50.832 TRACE nova.manager libvirtError: this function is not supported by the connection driver: virDomainGetVcpus", 
            "date_created": "2013-01-27 14:57:16.872966+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/20564", 
            "date_created": "2013-01-27 16:11:35.597876+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/21140", 
            "date_created": "2013-02-04 19:38:29.107375+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/21140\nCommitted: http://github.com/openstack/nova/commit/ccd252d383be74ce33eadb019ac1a7958ae2824d\nSubmitter: Jenkins\nBranch:    master\n\ncommit ccd252d383be74ce33eadb019ac1a7958ae2824d\nAuthor: Chuck Short <email address hidden>\nDate:   Mon Feb 4 13:36:50 2013 -0600\n\n    lxc: virDomainGetVcpus is not supported by driver\n    \n    virDomainGetVcpus is not supported by the libvirt lxc\n    driver, so it results in a nasty traceback. Trap the\n    error and return the number of vcpus.\n    \n    Fixes LP: #1106960\n    \n    Change-Id: I4e81dedad74ce3c58fcdf3ee064dfa0b9aa9a755\n    Signed-off-by: Chuck Short <email address hidden>\n", 
            "date_created": "2013-02-12 03:47:42.160670+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-02-21 08:50:40.342521+00:00"
}