{
    "status": "Invalid", 
    "last_updated": "2013-02-27 01:06:20.395014+00:00", 
    "description": "Devstack's gate-tempest-devstack-vm-full is failing occasionally with an exception.\n\nHere are a few reviews that are currently broken\nhttps://review.openstack.org/#/c/22282/\nhttps://jenkins.openstack.org/job/gate-tempest-devstack-vm-full/4196/consoleFull\n\nFor review : \nhttps://review.openstack.org/#/c/19992/\nhttp://logs.openstack.org/19992/16/gate/gate-tempest-devstack-vm-full/4151/console.html\n\n\n\"2013-02-19 20:49:52.775 | 2013-02-19 20:49:52 + [[ ,g-api,g-reg,key,n-api,n-crt,n-obj,n-cpu,n-sch,horizon,mysql,rabbit,tempest,swift,cinder,c-api,c-vol,c-sch,n-cond,n-net, =~ ,n-net, ]]\n2013-02-19 20:49:52.777 | 2013-02-19 20:49:52 + return 0\n2013-02-19 20:49:52.780 | 2013-02-19 20:49:52 + /opt/stack/new/nova/bin/nova-manage network create private 10.1.0.0/24 1 256\n2013-02-19 20:49:52.782 | 2013-02-19 20:49:52 2013-02-19 20:49:52.278 11949 INFO nova.network.driver [-] Loading network driver 'nova.network.linux_net'\n2013-02-19 20:49:52.785 | 2013-02-19 20:49:52 2013-02-19 20:49:52.278 11949 DEBUG nova.servicegroup.api [-] ServiceGroup driver defined as an instance of db __new__ /opt/stack/new/nova/nova/servicegroup/api.py:59\n2013-02-19 20:49:52.787 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 CRITICAL nova [req-fcabf37c-97e9-4f9d-b739-4f05f9ac7630 None None] (ProgrammingError) (1146, \"Table 'nova.networks' doesn't exist\") 'SELECT networks.created_at AS networks_created_at, networks.updated_at AS networks_updated_at, networks.deleted_at AS networks_deleted_at, networks.deleted AS networks_deleted, networks.id AS networks_id, networks.label AS networks_label, networks.injected AS networks_injected, networks.cidr AS networks_cidr, networks.cidr_v6 AS networks_cidr_v6, networks.multi_host AS networks_multi_host, networks.gateway_v6 AS networks_gateway_v6, networks.netmask_v6 AS networks_netmask_v6, networks.netmask AS networks_netmask, networks.bridge AS networks_bridge, networks.bridge_interface AS networks_bridge_interface, networks.gateway AS networks_gateway, networks.broadcast AS networks_broadcast, networks.dns1 AS networks_dns1, networks.dns2 AS networks_dns2, networks.vlan AS networks_vlan, networks.vpn_public_address AS networks_vpn_public_address, networks.vpn_public_port AS networks_vpn_public_port, networks.vpn_private_address AS networks_vpn_private_address, networks.dhcp_start AS networks_dhcp_start, networks.rxtx_base AS networks_rxtx_base, networks.project_id AS networks_project_id, networks.priority AS networks_priority, networks.host AS networks_host, networks.uuid AS networks_uuid \\nFROM networks \\nWHERE networks.deleted = %s' (0,)\n2013-02-19 20:49:52.789 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova Traceback (most recent call last):\n2013-02-19 20:49:52.791 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 1229, in <module>\n2013-02-19 20:49:52.794 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     main()\n2013-02-19 20:49:52.796 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 1221, in main\n2013-02-19 20:49:52.802 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-02-19 20:49:52.804 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 485, in create\n2013-02-19 20:49:52.807 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     net_manager.create_networks(context.get_admin_context(), **kwargs)\n2013-02-19 20:49:52.809 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/network/manager.py\", line 1024, in create_networks\n2013-02-19 20:49:52.811 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return self._do_create_networks(context, **kwargs)\n2013-02-19 20:49:52.813 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/network/manager.py\", line 1064, in _do_create_networks\n2013-02-19 20:49:52.815 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     nets = self.db.network_get_all(context)\n2013-02-19 20:49:52.817 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/api.py\", line 819, in network_get_all\n2013-02-19 20:49:52.819 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return IMPL.network_get_all(context)\n2013-02-19 20:49:52.821 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 145, in wrapper\n2013-02-19 20:49:52.824 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return f(*args, **kwargs)\n2013-02-19 20:49:52.826 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 2138, in network_get_all\n2013-02-19 20:49:52.828 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     result = model_query(context, models.Network, read_deleted=\"no\").all()\n2013-02-19 20:49:52.830 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2115, in all\n2013-02-19 20:49:52.832 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return list(self)\n2013-02-19 20:49:52.834 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2227, in __iter__\n2013-02-19 20:49:52.837 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return self._execute_and_instances(context)\n2013-02-19 20:49:52.839 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2242, in _execute_and_instances\n2013-02-19 20:49:52.842 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     result = conn.execute(querycontext.statement, self._params)\n2013-02-19 20:49:52.845 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1449, in execute\n2013-02-19 20:49:52.849 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     params)\n2013-02-19 20:50:04.985 | Process leaked file descriptors. See http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build for more information\n2013-02-19 20:50:05.249 | Build step 'Execute shell' marked build as failure\n2013-02-19 20:50:06.702 | [SCP] Connecting to static.openstack.org\"", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1130379", 
    "owner": "None", 
    "id": 1130379, 
    "index": 113, 
    "openned": "2013-02-19 21:24:51.101347+00:00", 
    "created": "2013-02-19 21:24:51.101347+00:00", 
    "title": "socket.error: [Errno 111] Connection refuse in /opt/stack/new/glance/bin/glance-manage db_sync", 
    "comments": [
        {
            "content": "Devstack's gate-tempest-devstack-vm-full is failing occasionally with an exception.\n\nHere are a few reviews that are currently broken\nhttps://review.openstack.org/#/c/22282/\nhttps://jenkins.openstack.org/job/gate-tempest-devstack-vm-full/4196/consoleFull\n\nFor review : \nhttps://review.openstack.org/#/c/19992/\nhttp://logs.openstack.org/19992/16/gate/gate-tempest-devstack-vm-full/4151/console.html\n\n\n\"2013-02-19 20:49:52.775 | 2013-02-19 20:49:52 + [[ ,g-api,g-reg,key,n-api,n-crt,n-obj,n-cpu,n-sch,horizon,mysql,rabbit,tempest,swift,cinder,c-api,c-vol,c-sch,n-cond,n-net, =~ ,n-net, ]]\n2013-02-19 20:49:52.777 | 2013-02-19 20:49:52 + return 0\n2013-02-19 20:49:52.780 | 2013-02-19 20:49:52 + /opt/stack/new/nova/bin/nova-manage network create private 10.1.0.0/24 1 256\n2013-02-19 20:49:52.782 | 2013-02-19 20:49:52 2013-02-19 20:49:52.278 11949 INFO nova.network.driver [-] Loading network driver 'nova.network.linux_net'\n2013-02-19 20:49:52.785 | 2013-02-19 20:49:52 2013-02-19 20:49:52.278 11949 DEBUG nova.servicegroup.api [-] ServiceGroup driver defined as an instance of db __new__ /opt/stack/new/nova/nova/servicegroup/api.py:59\n2013-02-19 20:49:52.787 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 CRITICAL nova [req-fcabf37c-97e9-4f9d-b739-4f05f9ac7630 None None] (ProgrammingError) (1146, \"Table 'nova.networks' doesn't exist\") 'SELECT networks.created_at AS networks_created_at, networks.updated_at AS networks_updated_at, networks.deleted_at AS networks_deleted_at, networks.deleted AS networks_deleted, networks.id AS networks_id, networks.label AS networks_label, networks.injected AS networks_injected, networks.cidr AS networks_cidr, networks.cidr_v6 AS networks_cidr_v6, networks.multi_host AS networks_multi_host, networks.gateway_v6 AS networks_gateway_v6, networks.netmask_v6 AS networks_netmask_v6, networks.netmask AS networks_netmask, networks.bridge AS networks_bridge, networks.bridge_interface AS networks_bridge_interface, networks.gateway AS networks_gateway, networks.broadcast AS networks_broadcast, networks.dns1 AS networks_dns1, networks.dns2 AS networks_dns2, networks.vlan AS networks_vlan, networks.vpn_public_address AS networks_vpn_public_address, networks.vpn_public_port AS networks_vpn_public_port, networks.vpn_private_address AS networks_vpn_private_address, networks.dhcp_start AS networks_dhcp_start, networks.rxtx_base AS networks_rxtx_base, networks.project_id AS networks_project_id, networks.priority AS networks_priority, networks.host AS networks_host, networks.uuid AS networks_uuid \\nFROM networks \\nWHERE networks.deleted = %s' (0,)\n2013-02-19 20:49:52.789 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova Traceback (most recent call last):\n2013-02-19 20:49:52.791 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 1229, in <module>\n2013-02-19 20:49:52.794 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     main()\n2013-02-19 20:49:52.796 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 1221, in main\n2013-02-19 20:49:52.802 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-02-19 20:49:52.804 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/bin/nova-manage\", line 485, in create\n2013-02-19 20:49:52.807 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     net_manager.create_networks(context.get_admin_context(), **kwargs)\n2013-02-19 20:49:52.809 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/network/manager.py\", line 1024, in create_networks\n2013-02-19 20:49:52.811 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return self._do_create_networks(context, **kwargs)\n2013-02-19 20:49:52.813 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/network/manager.py\", line 1064, in _do_create_networks\n2013-02-19 20:49:52.815 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     nets = self.db.network_get_all(context)\n2013-02-19 20:49:52.817 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/api.py\", line 819, in network_get_all\n2013-02-19 20:49:52.819 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return IMPL.network_get_all(context)\n2013-02-19 20:49:52.821 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 145, in wrapper\n2013-02-19 20:49:52.824 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return f(*args, **kwargs)\n2013-02-19 20:49:52.826 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 2138, in network_get_all\n2013-02-19 20:49:52.828 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     result = model_query(context, models.Network, read_deleted=\"no\").all()\n2013-02-19 20:49:52.830 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2115, in all\n2013-02-19 20:49:52.832 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return list(self)\n2013-02-19 20:49:52.834 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2227, in __iter__\n2013-02-19 20:49:52.837 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     return self._execute_and_instances(context)\n2013-02-19 20:49:52.839 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 2242, in _execute_and_instances\n2013-02-19 20:49:52.842 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     result = conn.execute(querycontext.statement, self._params)\n2013-02-19 20:49:52.845 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1449, in execute\n2013-02-19 20:49:52.849 | 2013-02-19 20:49:52 2013-02-19 20:49:52.587 11949 TRACE nova     params)\n2013-02-19 20:50:04.985 | Process leaked file descriptors. See http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build for more information\n2013-02-19 20:50:05.249 | Build step 'Execute shell' marked build as failure\n2013-02-19 20:50:06.702 | [SCP] Connecting to static.openstack.org\"", 
            "date_created": "2013-02-19 21:24:51.101347+00:00", 
            "author": "https://api.launchpad.net/1.0/~walter-boring"
        }, 
        {
            "content": "It looks mysql connection is refused\n\n013-02-19 20:49:39.124 | 2013-02-19 20:49:39 + local db=glance\n2013-02-19 20:49:39.126 | 2013-02-19 20:49:39 + local charset=utf8\n2013-02-19 20:49:39.129 | 2013-02-19 20:49:39 + mysql -uroot -psecret -e 'DROP DATABASE IF EXISTS glance;'\n2013-02-19 20:49:39.131 | 2013-02-19 20:49:39 + mysql -uroot -psecret -e 'CREATE DATABASE glance CHARACTER SET utf8;'\n2013-02-19 20:49:39.133 | 2013-02-19 20:49:39 + /opt/stack/new/glance/bin/glance-manage db_sync\n2013-02-19 20:49:39.137 | 2013-02-19 20:49:39 Traceback (most recent call last):\n2013-02-19 20:49:39.140 | 2013-02-19 20:49:39   File \"/opt/stack/new/glance/bin/glance-manage\", line 132, in <module>\n2013-02-19 20:49:39.142 | 2013-02-19 20:49:39     main()\n2013-02-19 20:49:39.145 | 2013-02-19 20:49:39   File \"/opt/stack/new/glance/bin/glance-manage\", line 121, in main\n2013-02-19 20:49:39.146 | 2013-02-19 20:49:39     config.setup_logging()\n2013-02-19 20:49:39.151 | 2013-02-19 20:49:39   File \"/opt/stack/new/glance/glance/common/config.py\", line 129, in setup_logging\n2013-02-19 20:49:39.156 | 2013-02-19 20:49:39     facility=facility)\n2013-02-19 20:49:39.158 | 2013-02-19 20:49:39   File \"/usr/lib/python2.7/logging/handlers.py\", line 729, in __init__\n2013-02-19 20:49:39.158 | 2013-02-19 20:49:39     self._connect_unixsocket(address)\n2013-02-19 20:49:39.161 | 2013-02-19 20:49:39   File \"/usr/lib/python2.7/logging/handlers.py\", line 745, in _connect_unixsocket\n2013-02-19 20:49:39.161 | 2013-02-19 20:49:39     self.socket.connect(address)\n2013-02-19 20:49:39.166 | 2013-02-19 20:49:39   File \"/usr/lib/python2.7/socket.py\", line 224, in meth\n2013-02-19 20:49:39.166 | 2013-02-19 20:49:39     return getattr(self._sock,name)(*args)\n2013-02-19 20:49:39.171 | 2013-02-19 20:49:39 socket.error: [Errno 111] Connection refuse", 
            "date_created": "2013-02-20 01:48:41.654534+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "it looks not mysql connection error but logging.\n", 
            "date_created": "2013-02-20 01:58:06.728982+00:00", 
            "author": "https://api.launchpad.net/1.0/~nati-ueno"
        }, 
        {
            "content": "This appears to be an error connecting to rsyslog when setting up logging so the db sync commands fail.", 
            "date_created": "2013-02-20 02:32:12.605451+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "vishy, is this related to https://review.openstack.org/#/c/22388/ ? ", 
            "date_created": "2013-02-20 04:08:06.681882+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "I think this has stopped since we stopped using syslog.", 
            "date_created": "2013-02-27 01:04:37.817133+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "the above fix allows us to get proper error messages when we fail to connect to syslog, but it won't fix this particular problem.", 
            "date_created": "2013-02-27 01:05:18.783085+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ], 
    "closed": "2013-02-27 01:05:24.237644+00:00"
}