{
    "status": "Won't Fix", 
    "last_updated": "2013-12-31 02:38:37.924563+00:00", 
    "description": "2013-09-27 21:27:57.295 5501 CRITICAL nova [-] [Errno 9] Bad file descriptor\n2013-09-27 21:27:57.295 5501 TRACE nova Traceback (most recent call last):\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 3053, in _dispatchDomainEventLifecycleCallback\n2013-09-27 21:27:57.295 5501 TRACE nova     cb(self, virDomain(self, _obj=dom), event, detail, opaque)\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 473, in _event_lifecycle_callback\n2013-09-27 21:27:57.295 5501 TRACE nova     self._queue_event(virtevent.LifecycleEvent(uuid, transition))\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 493, in _queue_event\n2013-09-27 21:27:57.295 5501 TRACE nova     self._event_notify_send.write(c)\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 324, in write\n2013-09-27 21:27:57.295 5501 TRACE nova     self.flush()\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 303, in flush\n2013-09-27 21:27:57.295 5501 TRACE nova     self._sock.sendall(view[write_offset:write_offset+buffer_size])\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenio.py\", line 385, in sendall\n2013-09-27 21:27:57.295 5501 TRACE nova     raise IOError(*e.args)\n2013-09-27 21:27:57.295 5501 TRACE nova IOError: [Errno 9] Bad file descriptor\n2013-09-27 21:27:57.295 5501 TRACE nova \n2013-09-27 21:27:57.327 5501 CRITICAL nova [-] [Errno 22] Invalid argument\n2013-09-27 21:27:57.327 5501 TRACE nova Traceback (most recent call last):\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 3053, in _dispatchDomainEventLifecycleCallback\n2013-09-27 21:27:57.327 5501 TRACE nova     cb(self, virDomain(self, _obj=dom), event, detail, opaque)\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 473, in _event_lifecycle_callback\n2013-09-27 21:27:57.327 5501 TRACE nova     self._queue_event(virtevent.LifecycleEvent(uuid, transition))\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 493, in _queue_event\n2013-09-27 21:27:57.327 5501 TRACE nova     self._event_notify_send.write(c)\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 324, in write\n2013-09-27 21:27:57.327 5501 TRACE nova     self.flush()\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 303, in flush\n2013-09-27 21:27:57.327 5501 TRACE nova     self._sock.sendall(view[write_offset:write_offset+buffer_size])\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenio.py\", line 385, in sendall\n2013-09-27 21:27:57.327 5501 TRACE nova     raise IOError(*e.args)\n2013-09-27 21:27:57.327 5501 TRACE nova IOError: [Errno 22] Invalid argument\n2013-09-27 21:27:57.327 5501 TRACE nova \n\nhttp://logs.openstack.org/76/48076/3/check/check-tempest-devstack-vm-neutron/51fbef0/logs/screen-n-cpu.txt.gz?#_2013-09-27_21_27_57_295\n\nlogstash query: @message: \"IOError: [Errno 22] Invalid argument\" AND @fields.filename:\"logs/screen-n-cpu.txt\"\n\nLifecycleEvent", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Medium", 
    "heat": 18, 
    "link": "https://bugs.launchpad.net/nova/+bug/1232286", 
    "owner": "None", 
    "id": 1232286, 
    "index": 3626, 
    "openned": "2013-09-27 22:06:11.063667+00:00", 
    "created": "2013-09-27 22:06:11.063667+00:00", 
    "title": "Libvirt  lifecycle event call back stacktrace", 
    "comments": [
        {
            "content": "2013-09-27 21:27:57.295 5501 CRITICAL nova [-] [Errno 9] Bad file descriptor\n2013-09-27 21:27:57.295 5501 TRACE nova Traceback (most recent call last):\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 3053, in _dispatchDomainEventLifecycleCallback\n2013-09-27 21:27:57.295 5501 TRACE nova     cb(self, virDomain(self, _obj=dom), event, detail, opaque)\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 473, in _event_lifecycle_callback\n2013-09-27 21:27:57.295 5501 TRACE nova     self._queue_event(virtevent.LifecycleEvent(uuid, transition))\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 493, in _queue_event\n2013-09-27 21:27:57.295 5501 TRACE nova     self._event_notify_send.write(c)\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 324, in write\n2013-09-27 21:27:57.295 5501 TRACE nova     self.flush()\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 303, in flush\n2013-09-27 21:27:57.295 5501 TRACE nova     self._sock.sendall(view[write_offset:write_offset+buffer_size])\n2013-09-27 21:27:57.295 5501 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenio.py\", line 385, in sendall\n2013-09-27 21:27:57.295 5501 TRACE nova     raise IOError(*e.args)\n2013-09-27 21:27:57.295 5501 TRACE nova IOError: [Errno 9] Bad file descriptor\n2013-09-27 21:27:57.295 5501 TRACE nova \n2013-09-27 21:27:57.327 5501 CRITICAL nova [-] [Errno 22] Invalid argument\n2013-09-27 21:27:57.327 5501 TRACE nova Traceback (most recent call last):\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 3053, in _dispatchDomainEventLifecycleCallback\n2013-09-27 21:27:57.327 5501 TRACE nova     cb(self, virDomain(self, _obj=dom), event, detail, opaque)\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 473, in _event_lifecycle_callback\n2013-09-27 21:27:57.327 5501 TRACE nova     self._queue_event(virtevent.LifecycleEvent(uuid, transition))\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 493, in _queue_event\n2013-09-27 21:27:57.327 5501 TRACE nova     self._event_notify_send.write(c)\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 324, in write\n2013-09-27 21:27:57.327 5501 TRACE nova     self.flush()\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/lib/python2.7/socket.py\", line 303, in flush\n2013-09-27 21:27:57.327 5501 TRACE nova     self._sock.sendall(view[write_offset:write_offset+buffer_size])\n2013-09-27 21:27:57.327 5501 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenio.py\", line 385, in sendall\n2013-09-27 21:27:57.327 5501 TRACE nova     raise IOError(*e.args)\n2013-09-27 21:27:57.327 5501 TRACE nova IOError: [Errno 22] Invalid argument\n2013-09-27 21:27:57.327 5501 TRACE nova \n\nhttp://logs.openstack.org/76/48076/3/check/check-tempest-devstack-vm-neutron/51fbef0/logs/screen-n-cpu.txt.gz?#_2013-09-27_21_27_57_295\n\nlogstash query: @message: \"IOError: [Errno 22] Invalid argument\" AND @fields.filename:\"logs/screen-n-cpu.txt\"\n\nLifecycleEvent", 
            "date_created": "2013-09-27 22:06:11.063667+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "I haven't seen any changes to the code around this since danpb added it in here:\n\nhttps://github.com/openstack/nova/commit/d63f7c1b47509f31c1e5aa8d27392d7f83e6dad2\n\nI'm also seeing this on Fedora 19 ppc64 with eventlet 0.13 and greenlet 0.4 on the compute node.  Running tempest with openvswitch (not that neutron probably matters, I just note it since the gate failure link above was with neutron).", 
            "date_created": "2013-11-13 18:09:33.366910+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Wondering if bug 1251920 is related to this...", 
            "date_created": "2013-11-20 21:29:57.618857+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This hasn't been seen in two weeks, looks like it got fixed somehow", 
            "date_created": "2013-11-26 00:44:41.236686+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "I agree, I haven't see it happen since the following commit landed: \n\nhttps://review.openstack.org/#/c/57509/2\n\n", 
            "date_created": "2013-11-26 03:43:24.621090+00:00", 
            "author": "https://api.launchpad.net/1.0/~lbragstad"
        }
    ], 
    "closed": "2013-12-31 02:38:35.928296+00:00"
}