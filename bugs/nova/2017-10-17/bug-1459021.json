{
    "status": "Fix Released", 
    "last_updated": "2015-10-15 08:48:35.270055+00:00", 
    "description": "http://logs.openstack.org/68/184968/2/check/gate-nova-python27/e3dadf7/console.html#_2015-05-26_20_45_35_734\n\n2015-05-26 20:45:35.734 | {4} nova.tests.unit.virt.vmwareapi.test_vm_util.VMwareVMUtilTestCase.test_create_vm_invalid_guestid [0.058940s] ... FAILED\n2015-05-26 20:45:35.735 | \n2015-05-26 20:45:35.735 | Captured traceback:\n2015-05-26 20:45:35.735 | ~~~~~~~~~~~~~~~~~~~\n2015-05-26 20:45:35.736 |     Traceback (most recent call last):\n2015-05-26 20:45:35.736 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/mock.py\", line 1201, in patched\n2015-05-26 20:45:35.736 |         return func(*args, **keywargs)\n2015-05-26 20:45:35.737 |       File \"nova/tests/unit/virt/vmwareapi/test_vm_util.py\", line 796, in test_create_vm_invalid_guestid\n2015-05-26 20:45:35.737 |         'folder', config_spec, 'res-pool')\n2015-05-26 20:45:35.737 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 422, in assertRaises\n2015-05-26 20:45:35.738 |         self.assertThat(our_callable, matcher)\n2015-05-26 20:45:35.738 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 433, in assertThat\n2015-05-26 20:45:35.738 |         mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n2015-05-26 20:45:35.738 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 483, in _matchHelper\n2015-05-26 20:45:35.739 |         mismatch = matcher.match(matchee)\n2015-05-26 20:45:35.739 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n2015-05-26 20:45:35.739 |         mismatch = self.exception_matcher.match(exc_info)\n2015-05-26 20:45:35.740 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n2015-05-26 20:45:35.740 |         mismatch = matcher.match(matchee)\n2015-05-26 20:45:35.740 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 414, in match\n2015-05-26 20:45:35.741 |         reraise(*matchee)\n2015-05-26 20:45:35.741 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n2015-05-26 20:45:35.741 |         result = matchee()\n2015-05-26 20:45:35.742 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 969, in __call__\n2015-05-26 20:45:35.742 |         return self._callable_object(*self._args, **self._kwargs)\n2015-05-26 20:45:35.742 |       File \"nova/virt/vmwareapi/vm_util.py\", line 1280, in create_vm\n2015-05-26 20:45:35.742 |         task_info = session._wait_for_task(vm_create_task)\n2015-05-26 20:45:35.743 |       File \"nova/virt/vmwareapi/driver.py\", line 714, in _wait_for_task\n2015-05-26 20:45:35.743 |         return self.wait_for_task(task_ref)\n2015-05-26 20:45:35.743 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 381, in wait_for_task\n2015-05-26 20:45:35.744 |         return evt.wait()\n2015-05-26 20:45:35.744 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/eventlet/event.py\", line 121, in wait\n2015-05-26 20:45:35.744 |         return hubs.get_hub().switch()\n2015-05-26 20:45:35.745 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 294, in switch\n2015-05-26 20:45:35.745 |         return self.greenlet.switch()\n2015-05-26 20:45:35.745 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 76, in _inner\n2015-05-26 20:45:35.745 |         self.f(*self.args, **self.kw)\n2015-05-26 20:45:35.746 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 423, in _poll_task\n2015-05-26 20:45:35.746 |         raise task_ex\n2015-05-26 20:45:35.746 |     oslo_vmware.exceptions.VimFaultException: Error message\n2015-05-26 20:45:35.747 |     Faults: ['VMwareDriverException']\n2015-05-26 20:45:35.747 |     \n2015-05-26 20:45:35.747 | \n2015-05-26 20:45:35.748 | Captured pythonlogging:\n2015-05-26 20:45:35.748 | ~~~~~~~~~~~~~~~~~~~~~~~\n2015-05-26 20:45:35.748 |     2015-05-26 20:45:35,632 INFO [oslo_vmware.api] Successfully established new session; session ID is ae214.\n2015-05-26 20:45:35.748 |     2015-05-26 20:45:35,633 ERROR [oslo_vmware.common.loopingcall] in fixed duration looping call\n2015-05-26 20:45:35.749 |     Traceback (most recent call last):\n2015-05-26 20:45:35.749 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 76, in _inner\n2015-05-26 20:45:35.749 |         self.f(*self.args, **self.kw)\n2015-05-26 20:45:35.750 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 423, in _poll_task\n2015-05-26 20:45:35.750 |         raise task_ex\n2015-05-26 20:45:35.750 |     VimFaultException: Error message\n2015-05-26 20:45:35.751 |     Faults: ['VMwareDriverException']\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiRmF1bHRzOiBbJ1ZNd2FyZURyaXZlckV4Y2VwdGlvbiddXCIiLCJmaWVsZHMiOltdLCJvZmZzZXQiOjAsInRpbWVmcmFtZSI6IjYwNDgwMCIsImdyYXBobW9kZSI6ImNvdW50IiwidGltZSI6eyJ1c2VyX2ludGVydmFsIjowfSwic3RhbXAiOjE0MzI2NzQ1MzczODN9\n\nhttps://pypi.python.org/pypi/oslo.vmware/0.13.0\n\nlogstash shows this failing starting today, the same day oslo.vmware 0.13.0 was released.", 
    "tags": [
        "vmware"
    ], 
    "importance": "Critical", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1459021", 
    "owner": "https://api.launchpad.net/1.0/~dims-v", 
    "id": 1459021, 
    "index": 249, 
    "openned": "2015-05-26 21:14:50.373716+00:00", 
    "created": "2015-05-26 21:14:50.373716+00:00", 
    "title": "nova vmware unit tests failing with oslo.vmware 0.13.0", 
    "comments": [
        {
            "content": "http://logs.openstack.org/68/184968/2/check/gate-nova-python27/e3dadf7/console.html#_2015-05-26_20_45_35_734\n\n2015-05-26 20:45:35.734 | {4} nova.tests.unit.virt.vmwareapi.test_vm_util.VMwareVMUtilTestCase.test_create_vm_invalid_guestid [0.058940s] ... FAILED\n2015-05-26 20:45:35.735 | \n2015-05-26 20:45:35.735 | Captured traceback:\n2015-05-26 20:45:35.735 | ~~~~~~~~~~~~~~~~~~~\n2015-05-26 20:45:35.736 |     Traceback (most recent call last):\n2015-05-26 20:45:35.736 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/mock.py\", line 1201, in patched\n2015-05-26 20:45:35.736 |         return func(*args, **keywargs)\n2015-05-26 20:45:35.737 |       File \"nova/tests/unit/virt/vmwareapi/test_vm_util.py\", line 796, in test_create_vm_invalid_guestid\n2015-05-26 20:45:35.737 |         'folder', config_spec, 'res-pool')\n2015-05-26 20:45:35.737 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 422, in assertRaises\n2015-05-26 20:45:35.738 |         self.assertThat(our_callable, matcher)\n2015-05-26 20:45:35.738 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 433, in assertThat\n2015-05-26 20:45:35.738 |         mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n2015-05-26 20:45:35.738 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 483, in _matchHelper\n2015-05-26 20:45:35.739 |         mismatch = matcher.match(matchee)\n2015-05-26 20:45:35.739 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n2015-05-26 20:45:35.739 |         mismatch = self.exception_matcher.match(exc_info)\n2015-05-26 20:45:35.740 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n2015-05-26 20:45:35.740 |         mismatch = matcher.match(matchee)\n2015-05-26 20:45:35.740 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 414, in match\n2015-05-26 20:45:35.741 |         reraise(*matchee)\n2015-05-26 20:45:35.741 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n2015-05-26 20:45:35.741 |         result = matchee()\n2015-05-26 20:45:35.742 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/testtools/testcase.py\", line 969, in __call__\n2015-05-26 20:45:35.742 |         return self._callable_object(*self._args, **self._kwargs)\n2015-05-26 20:45:35.742 |       File \"nova/virt/vmwareapi/vm_util.py\", line 1280, in create_vm\n2015-05-26 20:45:35.742 |         task_info = session._wait_for_task(vm_create_task)\n2015-05-26 20:45:35.743 |       File \"nova/virt/vmwareapi/driver.py\", line 714, in _wait_for_task\n2015-05-26 20:45:35.743 |         return self.wait_for_task(task_ref)\n2015-05-26 20:45:35.743 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 381, in wait_for_task\n2015-05-26 20:45:35.744 |         return evt.wait()\n2015-05-26 20:45:35.744 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/eventlet/event.py\", line 121, in wait\n2015-05-26 20:45:35.744 |         return hubs.get_hub().switch()\n2015-05-26 20:45:35.745 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 294, in switch\n2015-05-26 20:45:35.745 |         return self.greenlet.switch()\n2015-05-26 20:45:35.745 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 76, in _inner\n2015-05-26 20:45:35.745 |         self.f(*self.args, **self.kw)\n2015-05-26 20:45:35.746 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 423, in _poll_task\n2015-05-26 20:45:35.746 |         raise task_ex\n2015-05-26 20:45:35.746 |     oslo_vmware.exceptions.VimFaultException: Error message\n2015-05-26 20:45:35.747 |     Faults: ['VMwareDriverException']\n2015-05-26 20:45:35.747 |     \n2015-05-26 20:45:35.747 | \n2015-05-26 20:45:35.748 | Captured pythonlogging:\n2015-05-26 20:45:35.748 | ~~~~~~~~~~~~~~~~~~~~~~~\n2015-05-26 20:45:35.748 |     2015-05-26 20:45:35,632 INFO [oslo_vmware.api] Successfully established new session; session ID is ae214.\n2015-05-26 20:45:35.748 |     2015-05-26 20:45:35,633 ERROR [oslo_vmware.common.loopingcall] in fixed duration looping call\n2015-05-26 20:45:35.749 |     Traceback (most recent call last):\n2015-05-26 20:45:35.749 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 76, in _inner\n2015-05-26 20:45:35.749 |         self.f(*self.args, **self.kw)\n2015-05-26 20:45:35.750 |       File \"/home/jenkins/workspace/gate-nova-python27/.tox/py27/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 423, in _poll_task\n2015-05-26 20:45:35.750 |         raise task_ex\n2015-05-26 20:45:35.750 |     VimFaultException: Error message\n2015-05-26 20:45:35.751 |     Faults: ['VMwareDriverException']\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiRmF1bHRzOiBbJ1ZNd2FyZURyaXZlckV4Y2VwdGlvbiddXCIiLCJmaWVsZHMiOltdLCJvZmZzZXQiOjAsInRpbWVmcmFtZSI6IjYwNDgwMCIsImdyYXBobW9kZSI6ImNvdW50IiwidGltZSI6eyJ1c2VyX2ludGVydmFsIjowfSwic3RhbXAiOjE0MzI2NzQ1MzczODN9\n\nhttps://pypi.python.org/pypi/oslo.vmware/0.13.0\n\nlogstash shows this failing starting today, the same day oslo.vmware 0.13.0 was released.", 
            "date_created": "2015-05-26 21:14:50.373716+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "I'm guessing this is the change that's breaking the tests:\n\nhttps://review.openstack.org/#/c/176694/", 
            "date_created": "2015-05-26 21:29:18.051290+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "There is a revert here for oslo.vmware: https://review.openstack.org/#/c/185744/", 
            "date_created": "2015-05-26 21:33:24.915938+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This is a change proposed to global-requirements to blacklist the 0.13.0 version from nova:\n\nhttps://review.openstack.org/#/c/185748/", 
            "date_created": "2015-05-26 21:40:33.104511+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Change abandoned by Sabari (<email address hidden>) on branch: master\nReview: https://review.openstack.org/185830\nReason: I posted the patch to try and fix nova unit tests for the incompat changes in oslo.vmware. But since we blocked the 0.13.0 in nova and still working on a strategy to address this issue https://etherpad.openstack.org/p/oslo-vmware-13, I am abandoning the change for the time being.", 
            "date_created": "2015-05-27 18:47:57.177939+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "More notes and discussion happening here: https://etherpad.openstack.org/p/oslo-vmware-13", 
            "date_created": "2015-05-27 19:01:15.685028+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "https://review.openstack.org/#/c/186087/ will unblock nova.", 
            "date_created": "2015-05-27 19:01:43.281608+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/186087\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=f40619b2b4531bf4f06a22124edae35438bf2cc3\nSubmitter: Jenkins\nBranch:    master\n\ncommit f40619b2b4531bf4f06a22124edae35438bf2cc3\nAuthor: Davanum Srinivas <email address hidden>\nDate:   Wed May 27 13:13:39 2015 -0400\n\n    Block oslo.vmware 0.13.0 due to a backwards incompatible change\n    \n    Lots of details on the global requirements patch that\n    this Depends-On.\n    \n    Essentially, nova tests are broken with the oslo.vmware\n    release and we need to block this version.\n    \n    Partial-Bug: #1459021\n    \n    Depends-On: Icf1ce8dbb4b2c0b6b627d5d8be0b85a42e99c784\n    Change-Id: I4b9a471c9783dff769cbdec2e534bb0157f141f6\n", 
            "date_created": "2015-05-27 19:27:16.849698+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "0.13.1 is now released with a revert", 
            "date_created": "2015-05-29 12:43:59.944191+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/191569", 
            "date_created": "2015-06-14 12:28:34.175456+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by garyk (<email address hidden>) on branch: master\nReview: https://review.openstack.org/191569\nReason: The changes in vmware oslo will ensure that we do not need this", 
            "date_created": "2015-06-19 14:02:20.251568+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-06-24 12:14:09.303267+00:00"
}