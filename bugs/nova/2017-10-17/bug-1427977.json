{
    "status": "Invalid", 
    "last_updated": "2015-03-07 21:26:17.876836+00:00", 
    "description": "Version: stable/icehouse\n\nDescription:\nChange the Nova config file \"nova.conf\" for specifying the target cpu_model of Penryn as follows:\n\ncpu_mode = custom\ncpu_model = Penryn\nvirt_type = kvm|qemu\n\nAfter that, restart Nova services.\n\nEventually, try launching new VM, but it is failed with the following Traceback:\n\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f] Traceback (most recent call last):\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/compute/manager.py\", line 2231, in _build_resources\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     yield resources\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/compute/manager.py\", line 2101, in _build_and_run_instance\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     block_device_info=block_device_info)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 2619, in spawn\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     write_to_disk=True)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 4150, in _get_guest_xml\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     context)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 3936, in _get_guest_config\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     flavor, CONF.libvirt.virt_type)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/vif.py\", line 352, in get_config\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     _(\"Unexpected vif_type=%s\") % vif_type)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f] NovaException: Unexpected vif_type=binding_failed\n\n\nFurthermore, the created folder \"OPEN_STACK_INSTALL_DIR/data/drives/sdb1\" is left orphaned", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1427977", 
    "owner": "https://api.launchpad.net/1.0/~trung-t-trinh", 
    "id": 1427977, 
    "index": 1576, 
    "openned": "2015-03-04 04:07:40.310703+00:00", 
    "created": "2015-03-04 04:07:40.310703+00:00", 
    "title": "Failed to launch new VM after changing 'nova.conf' for specifying target cpu_model", 
    "comments": [
        {
            "content": "Version: stable/icehouse\n\nDescription:\nChange the Nova config file \"nova.conf\" for specifying the target cpu_model of Penryn as follows:\n\ncpu_mode = custom\ncpu_model = Penryn\nvirt_type = kvm|qemu\n\nAfter that, restart Nova services.\n\nEventually, try launching new VM, but it is failed with the following Traceback:\n\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f] Traceback (most recent call last):\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/compute/manager.py\", line 2231, in _build_resources\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     yield resources\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/compute/manager.py\", line 2101, in _build_and_run_instance\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     block_device_info=block_device_info)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 2619, in spawn\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     write_to_disk=True)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 4150, in _get_guest_xml\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     context)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/driver.py\", line 3936, in _get_guest_config\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     flavor, CONF.libvirt.virt_type)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]   File \"/opt/stack_stable_juno/nova/nova/virt/libvirt/vif.py\", line 352, in get_config\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f]     _(\"Unexpected vif_type=%s\") % vif_type)\n2015-03-04 17:24:39.175 31397 TRACE nova.compute.manager [instance: 3987b178-2049-4421-9951-86d90c7d9b3f] NovaException: Unexpected vif_type=binding_failed", 
            "date_created": "2015-03-04 04:07:40.310703+00:00", 
            "author": "https://api.launchpad.net/1.0/~trung-t-trinh"
        }, 
        {
            "content": "I've tried again re-producing this problem with OpenStack version of stable Juno.\nThis problem still occurs with a different error content:\n\n2015-03-06 20:42:49.562 14543 ERROR nova.compute.manager [-] [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c] Instance failed to spawn\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c] Traceback (most recent call last):\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2246, in _build_resources\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     yield resources\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2116, in _build_and_run_instance\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     block_device_info=block_device_info)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2622, in spawn\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     block_device_info, disk_info=disk_info)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4425, in _create_domain_and_network\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     power_on=power_on)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4349, in _create_domain\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     LOG.error(err)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     six.reraise(self.type_, self.value, self.tb)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4339, in _create_domain\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     domain.createWithFlags(launch_flags)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     rv = execute(f, *args, **kwargs)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     six.reraise(c, e, tb)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     rv = meth(*args, **kwargs)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 896, in createWithFlags\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2015-03-06 20:42:49.562 14543 TRACE nova.compute.manager [instance: 2cd851c9-5c10-43a3-8aa3-8cc9cda27e7c] libvirtError: unsupported configuration: guest and host CPU are not compatible: Host CPU does not provide required features: sse4.1, cx16\n\n\nThe generated XML of VM configuration can be seen at: http://paste.openstack.org/show/190193/\n\n\nCPU INFO on my host is as follows:\n\nprocessor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 42\nmodel name\t: Intel(R) Core(TM) i3-2370M CPU @ 2.40GHz\nstepping\t: 7\ncpu MHz\t\t: 2370.134\ncache size\t: 6144 KB\nphysical id\t: 0\nsiblings\t: 2\ncore id\t\t: 0\ncpu cores\t: 2\napicid\t\t: 0\ninitial apicid\t: 0\nfpu\t\t: yes\nfpu_exception\t: yes\ncpuid level\t: 5\nwp\t\t: yes\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl pni ssse3 lahf_lm\nbogomips\t: 4740.26\nclflush size\t: 64\ncache_alignment\t: 64\naddress sizes\t: 36 bits physical, 48 bits virtual\npower management:\n\nThe question is why cpu_model of \"Penryn\" is not supported?", 
            "date_created": "2015-03-06 07:08:52.218800+00:00", 
            "author": "https://api.launchpad.net/1.0/~trung-t-trinh"
        }, 
        {
            "content": "However, it will work fine when specifying the cpu_model of \"Conroe\"", 
            "date_created": "2015-03-06 08:37:17.946959+00:00", 
            "author": "https://api.launchpad.net/1.0/~trung-t-trinh"
        }, 
        {
            "content": "So, seems to be that it is not a bug!?", 
            "date_created": "2015-03-06 09:05:26.244721+00:00", 
            "author": "https://api.launchpad.net/1.0/~trung-t-trinh"
        }, 
        {
            "content": "Haha, closing the bug then :)", 
            "date_created": "2015-03-07 21:26:06.571822+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ], 
    "closed": "2015-03-07 21:26:16.683448+00:00"
}