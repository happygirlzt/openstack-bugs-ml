{
    "status": "Opinion", 
    "last_updated": "2017-06-28 10:55:06.228433+00:00", 
    "description": "Description\n===========\n in Ocata-stable release version, after creating a vm in error state due to some reason, the quota_usages table will increase corresponding. \n While after delete the error vm, the quota_usages table would not change. If large numbers of error vm have been created, it's exhaust all resources.\n\nSteps to reproduce\n==================\nA chronological list of steps which will bring off the\nissue you noticed:\n\ncreate vm in error state due to limits of ram for example.\ncheck the quota_usages table\ndelete the error vm\nchecek the quota_usages table\n\n\n\nExpected result\n===============\n\nthe resources should be released after deleting the error vm.\n\n\nActual result\n=============\n\nresources does not release after deleting the error vm.\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n\nroot@controller:/var/log/nova# dpkg -l | grep nova\nii  nova-api                             2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - API frontend\nii  nova-common                          2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - common files\nii  nova-conductor                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - conductor service\nii  nova-consoleauth                     2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                      2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - NoVNC proxy\nii  nova-placement-api                   2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - placement API frontend\nii  nova-scheduler                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute Python libraries\nii  python-novaclient                    2:7.1.0-0ubuntu1~cloud0                    all          client library for OpenStack Compute API - Python 2.7\n\n\nroot@compute1:/home/user# dpkg -l | grep nova\nii  nova-common                        2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - common files\nii  nova-compute                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node base\nii  nova-compute-kvm                   2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node (KVM)\nii  nova-compute-libvirt               2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node libvirt support\nii  python-nova                        2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute Python libraries\nii  python-novaclient                  2:7.1.0-0ubuntu1~cloud0                    all          client library for OpenStack Compute API - Python 2.7\n\n\n2. Which hypervisor did you use?\n   (For example: Libvirt + KVM, Libvirt + XEN, Hyper-V, PowerKVM, ...)\n   What's the version of that?\n\n2. Which storage type did you use?\n   (For example: Ceph, LVM, GPFS, ...)\n   What's the version of that?\n\n3. Which networking type did you use?\n  Neutron with OpenVSwitch\n\nLogs & Configs\n==============\nThe tool *sosreport* has support for some OpenStack projects.\nIt's worth having a look at it. For example, if you want to collect\nthe logs of a compute node you would execute:\n\n   $ sudo sosreport -o openstack_nova --batch\n\non that compute node. Attach the logs to this bug report. Please\nconsider that these logs need to be collected in \"DEBUG\" mode.", 
    "tags": [
        "quotas"
    ], 
    "importance": "Wishlist", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1698259", 
    "owner": "None", 
    "id": 1698259, 
    "index": 3146, 
    "openned": "2017-06-16 02:50:51.949194+00:00", 
    "created": "2017-06-16 02:50:51.949194+00:00", 
    "title": "delete vm in error state cannot release the resource", 
    "comments": [
        {
            "content": "Description\n===========\n in Ocata-stable release version, after creating a vm in error state due to some reason, the quota_usages table will increase corresponding. \n While after delete the error vm, the quota_usages table would not change. If large numbers of error vm have been created, it's exhaust all resources.\n\nSteps to reproduce\n==================\nA chronological list of steps which will bring off the\nissue you noticed:\n\ncreate vm in error state due to limits of ram for example.\ncheck the quota_usages table\ndelete the error vm\nchecek the quota_usages table\n\n\n\nExpected result\n===============\n\nthe resources should be released after deleting the error vm.\n\n\nActual result\n=============\n\nresources does not release after deleting the error vm.\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n\nroot@controller:/var/log/nova# dpkg -l | grep nova\nii  nova-api                             2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - API frontend\nii  nova-common                          2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - common files\nii  nova-conductor                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - conductor service\nii  nova-consoleauth                     2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                      2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - NoVNC proxy\nii  nova-placement-api                   2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - placement API frontend\nii  nova-scheduler                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute Python libraries\nii  python-novaclient                    2:7.1.0-0ubuntu1~cloud0                    all          client library for OpenStack Compute API - Python 2.7\n\n\nroot@compute1:/home/user# dpkg -l | grep nova\nii  nova-common                        2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - common files\nii  nova-compute                       2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node base\nii  nova-compute-kvm                   2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node (KVM)\nii  nova-compute-libvirt               2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute - compute node libvirt support\nii  python-nova                        2:15.0.0-0ubuntu1~cloud0                   all          OpenStack Compute Python libraries\nii  python-novaclient                  2:7.1.0-0ubuntu1~cloud0                    all          client library for OpenStack Compute API - Python 2.7\n\n\n2. Which hypervisor did you use?\n   (For example: Libvirt + KVM, Libvirt + XEN, Hyper-V, PowerKVM, ...)\n   What's the version of that?\n\n2. Which storage type did you use?\n   (For example: Ceph, LVM, GPFS, ...)\n   What's the version of that?\n\n3. Which networking type did you use?\n  Neutron with OpenVSwitch\n\nLogs & Configs\n==============\nThe tool *sosreport* has support for some OpenStack projects.\nIt's worth having a look at it. For example, if you want to collect\nthe logs of a compute node you would execute:\n\n   $ sudo sosreport -o openstack_nova --batch\n\non that compute node. Attach the logs to this bug report. Please\nconsider that these logs need to be collected in \"DEBUG\" mode.", 
            "date_created": "2017-06-16 02:50:51.949194+00:00", 
            "author": "https://api.launchpad.net/1.0/~wangchenglong"
        }, 
        {
            "content": "This is a known issue, and is being addressed with the countable quotas work upstream. Hopefully fixed in Pike.", 
            "date_created": "2017-06-28 10:55:00.922576+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ], 
    "closed": "2017-06-28 10:54:33.119751+00:00"
}