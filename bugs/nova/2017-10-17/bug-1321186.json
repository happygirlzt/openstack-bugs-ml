{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:31:55.135395+00:00", 
    "description": "steps to reproduce:\n1. run \"glance image-create\" to create a queued image\n2. run \"nova image-delete <image-id>\"\n\nit returns:\nDelete for image b31aa5dd-f07a-4748-8f15-398346887584 failed: The server has either erred or is incapable of performing the requested operation. (HTTP 500)\n\nthe traceback in log file is:\n\nTraceback (most recent call last):\n  File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n    return req.get_response(self.application)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n    application, catch_exc_info=False)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 632, in __call__\n    return self.app(env, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 917, in __call__\n    content_type, body, accept)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n    action_result = self.dispatch(meth, request, action_args)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1067, in dispatch\n    return method(req=request, **action_args)\n  File \"/opt/stack/nova/nova/api/openstack/compute/images.py\", line 139, in show\n    image = self._image_service.show(context, id)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 277, in show\n    base_image_meta = _translate_from_glance(image)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 462, in _translate_from_glance\n    image_meta = _extract_attributes(image)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 530, in _extract_attributes\n    output[attr] = getattr(image, attr)\n  File \"/opt/stack/python-glanceclient/glanceclient/openstack/common/apiclient/base.py\", line 462, in __getattr__\n    return self.__getattr__(k)\n  File \"/opt/stack/python-glanceclient/glanceclient/openstack/common/apiclient/base.py\", line 464, in __getattr__\n    raise AttributeError(k)\nAttributeError: disk_format", 
    "tags": [
        "icehouse-backport-potential", 
        "in-stable-icehouse"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1321186", 
    "owner": "https://api.launchpad.net/1.0/~liusheng", 
    "id": 1321186, 
    "index": 6123, 
    "openned": "2014-05-20 08:30:38.512586+00:00", 
    "created": "2014-05-20 08:30:38.512586+00:00", 
    "title": "nova can't show or delete queued image for AttributeError", 
    "comments": [
        {
            "content": "steps to reproduce:\n1. run \"glance image-create\" to create a queued image\n2. run \"nova image-delete <image-id>\"\n\nit returns:\nDelete for image b31aa5dd-f07a-4748-8f15-398346887584 failed: The server has either erred or is incapable of performing the requested operation. (HTTP 500)\n\nthe traceback in log file is:\n\nTraceback (most recent call last):\n  File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n    return req.get_response(self.application)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n    application, catch_exc_info=False)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 632, in __call__\n    return self.app(env, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 917, in __call__\n    content_type, body, accept)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n    action_result = self.dispatch(meth, request, action_args)\n  File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1067, in dispatch\n    return method(req=request, **action_args)\n  File \"/opt/stack/nova/nova/api/openstack/compute/images.py\", line 139, in show\n    image = self._image_service.show(context, id)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 277, in show\n    base_image_meta = _translate_from_glance(image)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 462, in _translate_from_glance\n    image_meta = _extract_attributes(image)\n  File \"/opt/stack/nova/nova/image/glance.py\", line 530, in _extract_attributes\n    output[attr] = getattr(image, attr)\n  File \"/opt/stack/python-glanceclient/glanceclient/openstack/common/apiclient/base.py\", line 462, in __getattr__\n    return self.__getattr__(k)\n  File \"/opt/stack/python-glanceclient/glanceclient/openstack/common/apiclient/base.py\", line 464, in __getattr__\n    raise AttributeError(k)\nAttributeError: disk_format", 
            "date_created": "2014-05-20 08:30:38.512586+00:00", 
            "author": "https://api.launchpad.net/1.0/~liusheng"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/94338", 
            "date_created": "2014-05-20 10:41:14.464393+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/94338\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=4c5dea6a5103a141b0ca13dcd57b32b3261180d1\nSubmitter: Jenkins\nBranch:    master\n\ncommit 4c5dea6a5103a141b0ca13dcd57b32b3261180d1\nAuthor: liu-sheng <email address hidden>\nDate:   Tue May 20 18:33:25 2014 +0800\n\n    Fix nova image-show with queued image\n    \n    Currently, the nova image-show command cannot be used with queued images,\n    because they don't have certain attributes set yet. Nova will raise\n    AttributeError, which causes a 500 to be returned from the API.\n    \n    Change-Id: I7d73b891545492e3e247eebdf02507cb630eb250\n    Closes-bug: #1321186\n", 
            "date_created": "2014-05-27 04:24:08.313408+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/95960", 
            "date_created": "2014-05-27 22:58:36.914782+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/95960\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=cce6d22c6430048d6789dec04b43c1483f4a0b8d\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit cce6d22c6430048d6789dec04b43c1483f4a0b8d\nAuthor: liu-sheng <email address hidden>\nDate:   Tue May 20 18:33:25 2014 +0800\n\n    Fix nova image-show with queued image\n    \n    Currently, the nova image-show command cannot be used with queued images,\n    because they don't have certain attributes set yet. Nova will raise\n    AttributeError, which causes a 500 to be returned from the API.\n    \n    Change-Id: I7d73b891545492e3e247eebdf02507cb630eb250\n    Closes-bug: #1321186\n    (cherry picked from commit 4c5dea6a5103a141b0ca13dcd57b32b3261180d1)\n", 
            "date_created": "2014-09-27 05:17:05.807143+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-06-11 13:50:19.507637+00:00"
}