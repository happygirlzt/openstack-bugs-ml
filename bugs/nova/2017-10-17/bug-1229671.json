{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:47:00.097781+00:00", 
    "description": "I am deploying instances on my Hyper-V host but I met the below error. I remember in the past, vmops.py calls vhdutils.py but now it calls vhdutilsv2.py. Not sure if that is the correct place that caused this issue.  Please help to check.\n\n\n2013-09-24 18:46:47.079 2304 WARNING nova.network.neutronv2.api [-] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] No network configured!\n2013-09-24 18:46:47.734 2304 INFO nova.virt.hyperv.vmops [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Spawning new instance\n2013-09-24 18:46:49.996 2304 ERROR nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Instance failed to spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Traceback (most recent call last):\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     block_device_info)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     admin_password, network_info, block_device_info)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     return function(self, *args, **kwds)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     parser.feed(text)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._parser.Parse(data, 0)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] \n2013-09-24 18:46:50.168 2304 AUDIT nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Terminating instance\n2013-09-24 18:46:51.244 2304 INFO nova.virt.hyperv.vmops [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] Got request to destroy instance: instance-00000001\n2013-09-24 18:46:51.463 2304 ERROR nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Error: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Traceback (most recent call last):\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1046, in _build_instance\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     set_access_ip=set_access_ip)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1445, in _spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     block_device_info)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     admin_password, network_info, block_device_info)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     return function(self, *args, **kwds)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     parser.feed(text)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._parser.Parse(data, 0)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] \n2013-09-24 18:47:19.918 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134644\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 277\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 24\n2013-09-24 18:47:22.321 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:48:22.444 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134644\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 277\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 24\n2013-09-24 18:48:24.815 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:49:15.016 2304 AUDIT nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Starting instance...\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Attempting claim: memory 512 MB, disk 1 GB, VCPUs 1\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total Memory: 135156 MB, used: 512.00 MB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Memory limit: 202734.00 MB, free: 202222.00 MB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total Disk: 277 GB, used: 0.00 GB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Disk limit not specified, defaulting to unlimited\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total CPU: 24 VCPUs, used: 0.00 VCPUs\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] CPU limit not specified, defaulting to unlimited\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Claim successful\n2013-09-24 18:49:16.015 2304 WARNING nova.network.neutronv2.api [-] [instance: d5009261-d55a-47ea-bd59-971460905cb3] No network configured!\n2013-09-24 18:49:16.483 2304 INFO nova.virt.hyperv.vmops [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Spawning new instance\n2013-09-24 18:49:16.608 2304 ERROR nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Instance failed to spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] Traceback (most recent call last):\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     block_device_info)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     admin_password, network_info, block_device_info)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     return function(self, *args, **kwds)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     parser.feed(text)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._parser.Parse(data, 0)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] \n2013-09-24 18:49:17.122 2304 AUDIT nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Terminating instance\n2013-09-24 18:49:18.042 2304 INFO nova.virt.hyperv.vmops [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] Got request to destroy instance: instance-00000002\n2013-09-24 18:49:18.276 2304 ERROR nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Error: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] Traceback (most recent call last):\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1046, in _build_instance\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     set_access_ip=set_access_ip)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1445, in _spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     block_device_info)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     admin_password, network_info, block_device_info)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     return function(self, *args, **kwds)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     parser.feed(text)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._parser.Parse(data, 0)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] \n2013-09-24 18:49:24.923 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134132\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 276\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 23\n2013-09-24 18:49:27.355 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:49:52.815 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134132\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 276\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 23\n2013-09-24 18:49:55.217 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2", 
    "tags": [
        "hyper-v"
    ], 
    "importance": "High", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1229671", 
    "owner": "https://api.launchpad.net/1.0/~alexpilotti", 
    "id": 1229671, 
    "index": 1251, 
    "openned": "2013-09-24 11:08:21.477985+00:00", 
    "created": "2013-09-24 11:08:21.477985+00:00", 
    "title": "Deploy instances failed on Hyper-V with Chinese locale", 
    "comments": [
        {
            "content": "I am deploying instances on my Hyper-V host but I met the below error. I remember in the past, vmops.py calls vhdutils.py but now it calls vhdutilsv2.py. Not sure if that is the correct place that caused this issue.  Please help to check.\n\n\n2013-09-24 18:46:47.079 2304 WARNING nova.network.neutronv2.api [-] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] No network configured!\n2013-09-24 18:46:47.734 2304 INFO nova.virt.hyperv.vmops [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Spawning new instance\n2013-09-24 18:46:49.996 2304 ERROR nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Instance failed to spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Traceback (most recent call last):\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     block_device_info)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     admin_password, network_info, block_device_info)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     return function(self, *args, **kwds)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     parser.feed(text)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._parser.Parse(data, 0)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:49.996 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] \n2013-09-24 18:46:50.168 2304 AUDIT nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Terminating instance\n2013-09-24 18:46:51.244 2304 INFO nova.virt.hyperv.vmops [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] Got request to destroy instance: instance-00000001\n2013-09-24 18:46:51.463 2304 ERROR nova.compute.manager [req-474eb715-9048-475f-9734-7b5fdc005a64 b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Error: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] Traceback (most recent call last):\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1046, in _build_instance\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     set_access_ip=set_access_ip)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1445, in _spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     block_device_info)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     admin_password, network_info, block_device_info)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     return function(self, *args, **kwds)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     parser.feed(text)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f]     self._parser.Parse(data, 0)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:46:51.463 2304 TRACE nova.compute.manager [instance: 973ff9d0-fb57-4ca6-a3ba-7b08783bcb9f] \n2013-09-24 18:47:19.918 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134644\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 277\n2013-09-24 18:47:22.243 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 24\n2013-09-24 18:47:22.321 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:48:22.444 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134644\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 277\n2013-09-24 18:48:24.736 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 24\n2013-09-24 18:48:24.815 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:49:15.016 2304 AUDIT nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Starting instance...\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Attempting claim: memory 512 MB, disk 1 GB, VCPUs 1\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total Memory: 135156 MB, used: 512.00 MB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Memory limit: 202734.00 MB, free: 202222.00 MB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total Disk: 277 GB, used: 0.00 GB\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Disk limit not specified, defaulting to unlimited\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Total CPU: 24 VCPUs, used: 0.00 VCPUs\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] CPU limit not specified, defaulting to unlimited\n2013-09-24 18:49:15.516 2304 AUDIT nova.compute.claims [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Claim successful\n2013-09-24 18:49:16.015 2304 WARNING nova.network.neutronv2.api [-] [instance: d5009261-d55a-47ea-bd59-971460905cb3] No network configured!\n2013-09-24 18:49:16.483 2304 INFO nova.virt.hyperv.vmops [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Spawning new instance\n2013-09-24 18:49:16.608 2304 ERROR nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Instance failed to spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] Traceback (most recent call last):\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     block_device_info)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     admin_password, network_info, block_device_info)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     return function(self, *args, **kwds)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     parser.feed(text)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._parser.Parse(data, 0)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:16.608 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] \n2013-09-24 18:49:17.122 2304 AUDIT nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Terminating instance\n2013-09-24 18:49:18.042 2304 INFO nova.virt.hyperv.vmops [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] Got request to destroy instance: instance-00000002\n2013-09-24 18:49:18.276 2304 ERROR nova.compute.manager [req-ef98f776-c545-4b80-9397-84ba9e2166cb b13861ca49f641d7a818e6b8335f2351 29db386367fa4c4e9ffb3c369a46ee90] [instance: d5009261-d55a-47ea-bd59-971460905cb3] Error: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] Traceback (most recent call last):\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1046, in _build_instance\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     set_access_ip=set_access_ip)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1445, in _spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 1431, in _spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     block_device_info)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 55, in spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     admin_password, network_info, block_device_info)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 90, in wrapper\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     return function(self, *args, **kwds)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 208, in spawn\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     root_vhd_path = self._create_root_vhd(context, instance)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 177, in _create_root_vhd\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._pathutils.remove(root_vhd_path)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vmops.py\", line 161, in _create_root_vhd\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     base_vhd_info = self._vhdutils.get_vhd_info(base_vhd_path)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\vhdutilsv2.py\", line 124, in get_vhd_info\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     et = ElementTree.fromstring(vhd_info_xml)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1301, in XML\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     parser.feed(text)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]   File \"C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\Python27\\lib\\xml\\etree\\ElementTree.py\", line 1641, in feed\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3]     self._parser.Parse(data, 0)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] UnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n2013-09-24 18:49:18.276 2304 TRACE nova.compute.manager [instance: d5009261-d55a-47ea-bd59-971460905cb3] \n2013-09-24 18:49:24.923 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134132\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 276\n2013-09-24 18:49:27.246 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 23\n2013-09-24 18:49:27.355 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2\n2013-09-24 18:49:52.815 2304 AUDIT nova.compute.resource_tracker [-] Auditing locally available compute resources\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free ram (MB): 134132\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free disk (GB): 276\n2013-09-24 18:49:55.140 2304 AUDIT nova.compute.resource_tracker [-] Free VCPUS: 23\n2013-09-24 18:49:55.217 2304 INFO nova.compute.resource_tracker [-] Compute_service record updated for radonHyperHost2:radonHyperHost2", 
            "date_created": "2013-09-24 11:08:21.477985+00:00", 
            "author": "https://api.launchpad.net/1.0/~isisliu"
        }, 
        {
            "content": "Interesting, we had no issues so far but we're definitely going to investigate it. \n\nAre you deploying a VHD or VHDX image? Dynamic or Fixed?\nCan you provide the output of Get-VHD for the image?\n\nWhat happens if you use the force_hyperv_utils_v1?\nhttps://github.com/openstack/nova/blob/master/nova/virt/hyperv/utilsfactory.py#L34 \n\nAs a correlated note: we are going to deploy a fix for VHDX similar to the VHD one you committed. It's a bit more complicated due to the VHDX format, so we preferred not to block your commit which was needed for backporting as well. \n", 
            "date_created": "2013-09-24 19:25:30.455286+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexpilotti"
        }, 
        {
            "content": "hi, this is Xiao Pei.  I tried using fixed or dynamic VHD format images, both have this issue. \nIf I changed force_hyperv_utils_v1=true in nova.conf and restart nova-compute service, then it can deploy instances successfully. ", 
            "date_created": "2013-09-25 05:17:34.262797+00:00", 
            "author": "https://api.launchpad.net/1.0/~isisliu"
        }, 
        {
            "content": "more added: GET-VHD info\nPS C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V Agent\\instances\\_base> get-vhd .\\f50bc876-355b-4584-9ef8-0a61d98d\nc143.vhd\n\n\nComputerName            : RADONHYPERHOST2\nPath                    : C:\\Program Files (x86)\\IBM\\SmartCloud Entry\\Hyper-V\n                          Agent\\instances\\_base\\f50bc876-355b-4584-9ef8-0a61d98dc143.vhd\nVhdFormat               : VHD\nVhdType                 : Dynamic\nFileSize                : 24576\nSize                    : 8589934592\nMinimumSize             :\nLogicalSectorSize       : 512\nPhysicalSectorSize      : 512\nBlockSize               : 2097152\nParentPath              :\nFragmentationPercentage : 0\nAlignment               : 1\nAttached                : False\nDiskNumber              :\nIsDeleted               : False\nNumber                  :", 
            "date_created": "2013-09-25 11:54:49.113571+00:00", 
            "author": "https://api.launchpad.net/1.0/~isisliu"
        }, 
        {
            "content": "Ok, let's narrow this down.\n\nCan you please start a Python interpreter on the compute node, run the following code and paste the output here (or in a paste bin if it's too big)?\n\nNote: please change the vhd_path variable as appropriate.\n\nvhd_path=\"C:\\\\Program Files (x86)\\\\IBM\\\\SmartCloud Entry\\\\Hyper-V Agent\\\\instances\\\\_base\\\\f50bc876-355b-4584-9ef8-0a61d98dc143.vhd\"\n\nfrom nova.virt.hyperv import vhdutilsv2\nu = vhdutilsv2.VHDUtilsV2()\nu.get_vhd_info(vhd_path)\n\n\n\nThanks\n\n\n\n", 
            "date_created": "2013-09-25 13:33:59.758487+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexpilotti"
        }, 
        {
            "content": "As an addendum, here's what I get by running it on a test dynamic disk:\n\n{'PhysicalSectorSize': 512L, 'LogicalSectorSize': 512L, 'Format': 2, 'BlockSize': 2097152L, 'ParentPath': None, 'Path':'c:\\\\temp\\\\test.vhd', 'Type': 3, 'MaxInternalSize': 10485760L}", 
            "date_created": "2013-09-25 13:36:25.229326+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexpilotti"
        }, 
        {
            "content": "The issue has been narrowed down to a localization issue. ElementTree is not able to parse the Unicode XML produced by WMI.\n\n", 
            "date_created": "2013-09-25 14:05:37.355677+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexpilotti"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/48267", 
            "date_created": "2013-09-25 14:34:47.722855+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Apply the patch in my environment and it works! Thank you very much for your quick response Alessandro.", 
            "date_created": "2013-09-25 15:18:20.494219+00:00", 
            "author": "https://api.launchpad.net/1.0/~isisliu"
        }, 
        {
            "content": "Helen Liu / GuoHui Liu - would it be possible to test the patch but with this line:\n\nreturn vhd_info_xml.encode('utf8', 'replace')\n\nReplaced with this?\n\nreturn vhd_info_xml.encode('utf8', 'xmlcharrefreplace')\n\nDoes it still fix the bug?", 
            "date_created": "2013-10-15 19:49:26.417090+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Matt,\n\nI set up a Hyper-V VM with Chinese locale (zh-CN) and reproduced the issue.\n\nHere's the python code I used for the testing. Any VHD will do.\n\nhttp://paste.openstack.org/show/47498/\n\nThe interesting thing is that:\n\nwith open(\"c:\\\\dump.xml\", \"wb\") as f:\n    f.write(x)\n\nFails with:\n\nTraceback (most recent call last):\n  File \"<stdin>\", line 2, in <module>\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 174-181: ordinal not in range(128)\n\ntype(x) is \"unicode\", so it really looks like a CPython bug to me, but this requires IMO investigations which go way beyond this bug fix.\n\nI checked also the output of both\n\nx.encode('utf8', 'repalce')\n\nAnd\n\nx.encode('utf8', 'xmlcharrefreplace')\n\nboth work and produce the same string.\n\n", 
            "date_created": "2013-10-16 13:32:22.403967+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexpilotti"
        }, 
        {
            "content": "yes, also verified on my machine with chinese local, \n\n return vhd_info_xml.encode('utf8', 'replace') or return vhd_info_xml.encode('utf8', 'xmlcharrefreplace')  both can resolve the issue.", 
            "date_created": "2013-10-21 09:14:47.198539+00:00", 
            "author": "https://api.launchpad.net/1.0/~liuxpei"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/48267\nCommitted: http://github.com/openstack/nova/commit/c8c7c01d68b34b76ebe6c4b39f93915480c1ccea\nSubmitter: Jenkins\nBranch:    master\n\ncommit c8c7c01d68b34b76ebe6c4b39f93915480c1ccea\nAuthor: Alessandro Pilotti <email address hidden>\nDate:   Wed Sep 25 17:28:53 2013 +0300\n\n    Fixes unicode issue in the Hyper-V driver\n    \n    The XML string returned by the WMI API calls requires unicode\n    conversion before further processing, e.g. with ElementTree.\n    \n    This affects the vhdutilsv2._get_vhd_info_xml method due to\n    the textual description. The issue came to light using the\n    host with Chinese locale, while not present on a en_US host.\n    \n    Fixes bug: #1229671\n    \n    Change-Id: I09435a205abfc8ae9470c53c5446cbb28dee0115\n", 
            "date_created": "2013-10-23 22:41:02.484646+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/53603", 
            "date_created": "2013-10-24 12:43:05.047107+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/53603\nCommitted: http://github.com/openstack/nova/commit/88cfe5a0ae682794f8ce25b787084115925023f2\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 88cfe5a0ae682794f8ce25b787084115925023f2\nAuthor: Alessandro Pilotti <email address hidden>\nDate:   Wed Sep 25 17:28:53 2013 +0300\n\n    Fixes unicode issue in the Hyper-V driver\n    \n    The XML string returned by the WMI API calls requires unicode\n    conversion before further processing, e.g. with ElementTree.\n    \n    This affects the vhdutilsv2._get_vhd_info_xml method due to\n    the textual description. The issue came to light using the\n    host with Chinese locale, while not present on a en_US host.\n    \n    Fixes bug: #1229671\n    \n    Change-Id: I09435a205abfc8ae9470c53c5446cbb28dee0115\n    (cherry picked from commit c8c7c01d68b34b76ebe6c4b39f93915480c1ccea)\n", 
            "date_created": "2013-10-27 08:10:57.701156+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-12-04 10:02:21.625701+00:00"
}