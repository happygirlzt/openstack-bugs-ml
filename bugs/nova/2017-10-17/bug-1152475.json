{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:37:03.838543+00:00", 
    "description": "When creating a combined coverage report, nova services' coverage data are combined into nova-api's.\nSo if combining a coverage report once, the next nova-api coverage report doesn't indicate that of just nova-api.\n\nExample:\n\n [not combine data]\n  $ nova coverage-start\n  $ nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 --poll server01\n  $ nova coverage-report report\n  $ nova coverage-start\n  $ nova coverage-report report01\n\n  coverage data of report01.api is:\n\n  Name                                                                                        Stmts   Miss Branch BrPart  Cover   Missing\n  ---------------------------------------------------------------------------------------------------------------------------------------\n  nova/compute/manager                                                                         1762   1762    483    483     0%   20-3853\n  nova/conductor/manager                                                                        233    233     42     42     0%   15-424\n  nova/scheduler/manager                                                                        116    116     32     32     0%   20-296\n\n [combine data]\n  $ nova coverage-start --combine\n  $ nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 --poll server01\n  $ nova coverage-report report\n  $ nova coverage-start\n  $ nova coverage-report report02\n\n  coverage data of report02.api is:\n\n  Name                                                                                        Stmts   Miss Branch BrPart  Cover   Missing\n  ---------------------------------------------------------------------------------------------------------------------------------------\n  nova/compute/manager                                                                         1762   1621    483    453     8%   20-45, 50-51, 57-191, 195-220, 224-238, 248, 261-264, 270-275, 280-301, 305, 311, 315-318, 323-351, 354-362, 365, 374-375, 379-383, 392-393, 396-523, 530-548, 552-588, 593-658, 664, 670-722, 733, 742, 748, 751-752, 758, 790-809, 822-906, 913-923, 936-949, 952-954, 972, 976-982, 993-1010, 1020, 1036-1038, 1046, 1050-1055, 1067-1079, 1091-1145, 1151, 1153, 1165-3163, 3177, 3180, 3188-3193, 3198-3216, 3219-3224, 3227-3244, 3247-3300, 3303-3348, 3355-3456, 3460-3487, 3491-3538, 3548-3660, 3668-3683, 3694-3853\n  nova/conductor/manager                                                                        233    192     42     35    17%   15-54, 63-85, 89-91, 100-105, 110-113, 121, 125-134, 140-207, 212, 217, 221-235, 240-286, 290, 294-330, 334, 338-350, 355-359, 364-389, 392, 395-424\n  nova/scheduler/manager                                                                        116    104     32     27    11%   20-76, 80, 83, 87-103, 114, 128-284, 288-296\n\nReport01.api indicates the data of just nova-api but report02.api doesn't.\n\nAppendix:\nTo measure nova services' coverage data, add \"backdoor_port=0\" in nova.conf.", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1152475", 
    "owner": "https://api.launchpad.net/1.0/~ymzk37", 
    "id": 1152475, 
    "index": 3268, 
    "openned": "2013-03-08 06:49:01.857256+00:00", 
    "created": "2013-03-08 06:49:01.857256+00:00", 
    "title": "nova-api coverage data contains other services' data after a combined report", 
    "comments": [
        {
            "content": "When creating a combined coverage report, nova services' coverage data are combined into nova-api's.\nSo if combining a coverage report once, the next nova-api coverage report doesn't indicate that of just nova-api.\n\nExample:\n\n [not combine data]\n  $ nova coverage-start\n  $ nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 --poll server01\n  $ nova coverage-report report\n  $ nova coverage-start\n  $ nova coverage-report report01\n\n  coverage data of report01.api is:\n\n  Name                                                                                        Stmts   Miss Branch BrPart  Cover   Missing\n  ---------------------------------------------------------------------------------------------------------------------------------------\n  nova/compute/manager                                                                         1762   1762    483    483     0%   20-3853\n  nova/conductor/manager                                                                        233    233     42     42     0%   15-424\n  nova/scheduler/manager                                                                        116    116     32     32     0%   20-296\n\n [combine data]\n  $ nova coverage-start --combine\n  $ nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 --poll server01\n  $ nova coverage-report report\n  $ nova coverage-start\n  $ nova coverage-report report02\n\n  coverage data of report02.api is:\n\n  Name                                                                                        Stmts   Miss Branch BrPart  Cover   Missing\n  ---------------------------------------------------------------------------------------------------------------------------------------\n  nova/compute/manager                                                                         1762   1621    483    453     8%   20-45, 50-51, 57-191, 195-220, 224-238, 248, 261-264, 270-275, 280-301, 305, 311, 315-318, 323-351, 354-362, 365, 374-375, 379-383, 392-393, 396-523, 530-548, 552-588, 593-658, 664, 670-722, 733, 742, 748, 751-752, 758, 790-809, 822-906, 913-923, 936-949, 952-954, 972, 976-982, 993-1010, 1020, 1036-1038, 1046, 1050-1055, 1067-1079, 1091-1145, 1151, 1153, 1165-3163, 3177, 3180, 3188-3193, 3198-3216, 3219-3224, 3227-3244, 3247-3300, 3303-3348, 3355-3456, 3460-3487, 3491-3538, 3548-3660, 3668-3683, 3694-3853\n  nova/conductor/manager                                                                        233    192     42     35    17%   15-54, 63-85, 89-91, 100-105, 110-113, 121, 125-134, 140-207, 212, 217, 221-235, 240-286, 290, 294-330, 334, 338-350, 355-359, 364-389, 392, 395-424\n  nova/scheduler/manager                                                                        116    104     32     27    11%   20-76, 80, 83, 87-103, 114, 128-284, 288-296\n\nReport01.api indicates the data of just nova-api but report02.api doesn't.\n\nAppendix:\nTo measure nova services' coverage data, add \"backdoor_port=0\" in nova.conf.", 
            "date_created": "2013-03-08 06:49:01.857256+00:00", 
            "author": "https://api.launchpad.net/1.0/~ymzk37"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/24028", 
            "date_created": "2013-03-11 00:03:10.680796+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/24028\nCommitted: http://github.com/openstack/nova/commit/ef4f75b088b09d4ed86ff02bb69cd4046cccb3f6\nSubmitter: Jenkins\nBranch:    master\n\ncommit ef4f75b088b09d4ed86ff02bb69cd4046cccb3f6\nAuthor: Mitsuhiko Yamazaki <email address hidden>\nDate:   Fri Mar 8 17:01:09 2013 +0900\n\n    Prevent nova services' coverage data from combining into nova-api's\n    \n    Now if combining a coverage report once, nova services' coverage\n    data are combined into nova-api's.\n    This renames nova-api coverage datafile to .nova-coverage.api and\n    creates a new coverage instance to combine when reporting.\n    \n    Fixes bug: 1152475\n    \n    Change-Id: I90b6535d490cf0123a127f8752986edd782ef37e\n", 
            "date_created": "2013-04-02 16:27:04.046772+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-05-29 10:18:59.567787+00:00"
}