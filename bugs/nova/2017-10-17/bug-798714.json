{
    "status": "Fix Released", 
    "last_updated": "2011-09-22 13:28:12.229838+00:00", 
    "description": "If two files in the nova/db/sqlalchemy/migrate_repo/versions directory have the same number, then run_tests.sh will not produce any output, and the run_tests.log file will have a misleading error message.\n\nTo reproduce:\n\n$ touch nova/db/sqlalchemy/migrate_repo/versions/23_foo.py\n$ ./run_tests.sh\n\nNo output will appear on standard out, and run_tests.log will contain the following:\n\n2011-06-17 09:56:04,385 CRITICAL nova [-] 'NovaTestResult' object has no attribute 'start_time'\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"run_tests.py\", line 358, in <module>\n(nova): TRACE:     sys.exit(not core.run(config=c, testRunner=runner, argv=argv))\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 283, in run\n(nova): TRACE:     return TestProgram(*arg, **kw).success\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 118, in __init__\n(nova): TRACE:     **extra_args)\n(nova): TRACE:   File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/unittest.py\", line 817, in __init__\n(nova): TRACE:     self.runTests()\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 197, in runTests\n(nova): TRACE:     result = self.testRunner.run(self.test)\n(nova): TRACE:   File \"run_tests.py\", line 327, in run\n(nova): TRACE:     result_ = core.TextTestRunner.run(self, test)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 61, in run\n(nova): TRACE:     test(result)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/suite.py\", line 176, in __call__\n(nova): TRACE:     return self.run(*arg, **kw)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/suite.py\", line 213, in run\n(nova): TRACE:     result.addError(self, self._exc_info())\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/proxy.py\", line 125, in addError\n(nova): TRACE:     self.result.addError(self.test, err)\n(nova): TRACE:   File \"run_tests.py\", line 258, in addError\n(nova): TRACE:     self._handleElapsedTime(test)\n(nova): TRACE:   File \"run_tests.py\", line 218, in _handleElapsedTime\n(nova): TRACE:     self.elapsed_time = time.time() - self.start_time\n(nova): TRACE: AttributeError: 'NovaTestResult' object has no attribute 'start_time'\n\n\n(This is revision 1188).", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/798714", 
    "owner": "https://api.launchpad.net/1.0/~lorinh", 
    "id": 798714, 
    "index": 208, 
    "openned": "2011-06-17 14:01:51.613316+00:00", 
    "created": "2011-06-17 14:01:51.613316+00:00", 
    "title": "Misleading error message on migrate number conflict when running unit tests", 
    "comments": [
        {
            "content": "If two files in the nova/db/sqlalchemy/migrate_repo/versions directory have the same number, then run_tests.sh will not produce any output, and the run_tests.log file will have a misleading error message.\n\nTo reproduce:\n\n$ touch nova/db/sqlalchemy/migrate_repo/versions/23_foo.py\n$ ./run_tests.sh\n\nNo output will appear on standard out, and run_tests.log will contain the following:\n\n2011-06-17 09:56:04,385 CRITICAL nova [-] 'NovaTestResult' object has no attribute 'start_time'\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"run_tests.py\", line 358, in <module>\n(nova): TRACE:     sys.exit(not core.run(config=c, testRunner=runner, argv=argv))\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 283, in run\n(nova): TRACE:     return TestProgram(*arg, **kw).success\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 118, in __init__\n(nova): TRACE:     **extra_args)\n(nova): TRACE:   File \"/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/unittest.py\", line 817, in __init__\n(nova): TRACE:     self.runTests()\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 197, in runTests\n(nova): TRACE:     result = self.testRunner.run(self.test)\n(nova): TRACE:   File \"run_tests.py\", line 327, in run\n(nova): TRACE:     result_ = core.TextTestRunner.run(self, test)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/core.py\", line 61, in run\n(nova): TRACE:     test(result)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/suite.py\", line 176, in __call__\n(nova): TRACE:     return self.run(*arg, **kw)\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/suite.py\", line 213, in run\n(nova): TRACE:     result.addError(self, self._exc_info())\n(nova): TRACE:   File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/nose/proxy.py\", line 125, in addError\n(nova): TRACE:     self.result.addError(self.test, err)\n(nova): TRACE:   File \"run_tests.py\", line 258, in addError\n(nova): TRACE:     self._handleElapsedTime(test)\n(nova): TRACE:   File \"run_tests.py\", line 218, in _handleElapsedTime\n(nova): TRACE:     self.elapsed_time = time.time() - self.start_time\n(nova): TRACE: AttributeError: 'NovaTestResult' object has no attribute 'start_time'\n\n\n(This is revision 1188).", 
            "date_created": "2011-06-17 14:01:51.613316+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }
    ], 
    "closed": "2011-09-22 13:28:10.860740+00:00"
}