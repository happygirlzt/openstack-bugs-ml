{
    "status": "Invalid", 
    "last_updated": "2010-12-17 08:05:08.124837+00:00", 
    "description": "EC2 API requests with empty arguments fail, because the signature check on the request fails.\n\nEach EC2 request must include a Signature parameter.  This is generated by the client using, amongst other things, a canonicalized list of the other parameters in the request.  The specification states that parameters should be included \"even if the parameter value is empty\".\n\nhttp://docs.amazonwebservices.com/AWSEC2/latest/DeveloperGuide/index.html?using-query-api.html\n\nRequests signed in this way with empty parameter values fail the signature check by Nova.  This is because Tornado is throwing away empty arguments.  In this thread, Bret Taylor states that this is a deliberate decision by Tornado.\n\nhttp://groups.google.com/group/python-tornado/browse_thread/thread/d4ec8d798f93c286/99049857d0a85f29?lnk=gst&q=How+does+Tornado+handle+blank+POST#99049857d0a85f29", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/617788", 
    "owner": "None", 
    "id": 617788, 
    "index": 3184, 
    "openned": "2010-08-14 11:21:07.505933+00:00", 
    "created": "2010-08-14 11:21:07.505933+00:00", 
    "title": "Cannot make EC2 API requests with empty arguments", 
    "comments": [
        {
            "content": "EC2 API requests with empty arguments fail, because the signature check on the request fails.\n\nEach EC2 request must include a Signature header.  This is generated by the client using, amongst other things, a canonicalized list of the other headers in the request.  The specification states that parameters should be included \"even if the parameter value is empty\".\n\nhttp://docs.amazonwebservices.com/AWSEC2/latest/DeveloperGuide/index.html?using-query-api.html\n\nRequests signed in this way with empty parameter values fail the signature check by Nova.  This is because Tornado is throwing away empty arguments.  In this thread, Bret Taylor states that this is a deliberate decision by Tornado.\n\nhttp://groups.google.com/group/python-tornado/browse_thread/thread/d4ec8d798f93c286/99049857d0a85f29?lnk=gst&q=How+does+Tornado+handle+blank+POST#99049857d0a85f29", 
            "date_created": "2010-08-14 11:21:07.505933+00:00", 
            "author": "https://api.launchpad.net/1.0/~ewanmellor"
        }, 
        {
            "content": "He also states one may use get_argument(\"name\", \"\") to get around this issue.  Is it possible to do that in Nova's code?", 
            "date_created": "2010-08-16 17:02:47.480614+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "No, because that would cause missing arguments to look like present, empty\narguments.  This will cause the signature check to fail when arguments are\nomitted by the client, because the server will include them in the plaintext.\n\nEwan.\n\nOn Mon, Aug 16, 2010 at 06:02:47PM +0100, Jay Pipes wrote:\n\n> He also states one may use get_argument(\"name\", \"\") to get around this\n> issue.  Is it possible to do that in Nova's code?\n> \n> -- \n> Cannot make EC2 API requests with empty arguments\n> https://bugs.launchpad.net/bugs/617788\n> You received this bug notification because you are a direct subscriber\n> of the bug.\n> \n> Status in OpenStack Compute (Nova): New\n> \n> Bug description:\n> EC2 API requests with empty arguments fail, because the signature check on the request fails.\n> \n> Each EC2 request must include a Signature parameter.  This is generated by the client using, amongst other things, a canonicalized list of the other parameters in the request.  The specification states that parameters should be included \"even if the parameter value is empty\".\n> \n> http://docs.amazonwebservices.com/AWSEC2/latest/DeveloperGuide/index.html?using-query-api.html\n> \n> Requests signed in this way with empty parameter values fail the signature check by Nova.  This is because Tornado is throwing away empty arguments.  In this thread, Bret Taylor states that this is a deliberate decision by Tornado.\n> \n> http://groups.google.com/group/python-tornado/browse_thread/thread/d4ec8d798f93c286/99049857d0a85f29?lnk=gst&q=How+does+Tornado+handle+blank+POST#99049857d0a85f29\n> \n> To unsubscribe from this bug, go to:\n> https://bugs.launchpad.net/nova/+bug/617788/+subscribe", 
            "date_created": "2010-08-16 17:38:05+00:00", 
            "author": "https://api.launchpad.net/1.0/~ewanmellor"
        }, 
        {
            "content": "Hmm, I see... :(\n\nNo workarounds then?", 
            "date_created": "2010-08-16 17:58:15.821131+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "One workaround is to reparse the arguments inside our code: basically just\nthrow away the query argument parsing that Tornado does, and do it again,\nthis time with parse_qs(qs, keep_blank_values=True).\n\nWe can either do this, or patch Tornado to do it right the first time.\n\nOn Mon, Aug 16, 2010 at 06:58:15PM +0100, Jay Pipes wrote:\n\n> Hmm, I see... :(\n> \n> No workarounds then?\n> \n> -- \n> Cannot make EC2 API requests with empty arguments\n> https://bugs.launchpad.net/bugs/617788\n> You received this bug notification because you are a direct subscriber\n> of the bug.\n> \n> Status in OpenStack Compute (Nova): New\n> \n> Bug description:\n> EC2 API requests with empty arguments fail, because the signature check on the request fails.\n> \n> Each EC2 request must include a Signature parameter.  This is generated by the client using, amongst other things, a canonicalized list of the other parameters in the request.  The specification states that parameters should be included \"even if the parameter value is empty\".\n> \n> http://docs.amazonwebservices.com/AWSEC2/latest/DeveloperGuide/index.html?using-query-api.html\n> \n> Requests signed in this way with empty parameter values fail the signature check by Nova.  This is because Tornado is throwing away empty arguments.  In this thread, Bret Taylor states that this is a deliberate decision by Tornado.\n> \n> http://groups.google.com/group/python-tornado/browse_thread/thread/d4ec8d798f93c286/99049857d0a85f29?lnk=gst&q=How+does+Tornado+handle+blank+POST#99049857d0a85f29\n> \n> To unsubscribe from this bug, go to:\n> https://bugs.launchpad.net/nova/+bug/617788/+subscribe", 
            "date_created": "2010-08-16 23:03:34+00:00", 
            "author": "https://api.launchpad.net/1.0/~ewanmellor"
        }, 
        {
            "content": "Hmm, well, I don't believe there will be much Tornado code left after the next month...so perhaps we leave this to a later time.  May become a non-issue once Tornado has been replaced with WSGI/eventlet/Webob", 
            "date_created": "2010-08-23 23:53:54.401749+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "Ping on this bug.  Is this still an issue?  All Tornado code that dealt with the API layer has been replaced with eventlet.wsgi.\n\nI am going to mark this bug Incomplete.  Please ping the bug if the symptoms are still present (I don't believe they are)", 
            "date_created": "2010-10-06 01:40:03.672808+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "@Ewan: is this still an issue with current code ?", 
            "date_created": "2010-12-16 16:41:51.595923+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "My need for this has gone away, at least for the moment, so I can't retest.  Given Jay's comments about all this code having been rewritten anyway, let's just close this bug on the assumption that it's fixed.\r\n", 
            "date_created": "2010-12-17 02:18:02.538249+00:00", 
            "author": "https://api.launchpad.net/1.0/~ewanmellor"
        }, 
        {
            "content": "Agreed: Affected code no longer exists -- an issue might still be present, but that's the story for another bug.", 
            "date_created": "2010-12-17 08:05:05.994607+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2010-12-17 08:05:07.500232+00:00"
}