{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:59:07.503494+00:00", 
    "description": "[root@rhel8249 ~]# nova boot --image cirros-0.3.0-x86_64 --flavor 6 vm11\n+--------------------------------------+--------------------------------------+\n| Property                             | Value                                |\n+--------------------------------------+--------------------------------------+\n| OS-EXT-STS:task_state                | scheduling                           |\n| image                                | cirros-0.3.0-x86_64                  |\n| OS-EXT-STS:vm_state                  | building                             |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000081                    |\n| OS-SRV-USG:launched_at               | None                                 |\n| flavor                               | tmp                                  |\n| id                                   | 00778517-7f18-4964-83f9-c503c58c8be1 |\n| security_groups                      | [{u'name': u'default'}]              |\n| user_id                              | 736f934fc3ee4c52a3c288d0cfaf0a8f     |\n| OS-DCF:diskConfig                    | MANUAL                               |\n| accessIPv4                           |                                      |\n| accessIPv6                           |                                      |\n| progress                             | 0                                    |\n| OS-EXT-STS:power_state               | 0                                    |\n| OS-EXT-AZ:availability_zone          | nova                                 |\n| config_drive                         |                                      |\n| status                               | BUILD                                |\n| updated                              | 2013-07-25T13:17:43Z                 |\n| hostId                               |                                      |\n| OS-EXT-SRV-ATTR:host                 | None                                 |\n| OS-SRV-USG:terminated_at             | None                                 |\n| key_name                             | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | None                                 |\n| name                                 | vm11                                 |\n| adminPass                            | GpwTDX2oZBqA                         |\n| tenant_id                            | 441742daab4e458eb917f928405c76ba     |\n| created                              | 2013-07-25T13:17:43Z                 |\n| os-extended-volumes:volumes_attached | []                                   |\n| metadata                             | {}                                   |\n+--------------------------------------+--------------------------------------+\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+--------+----------+\n| ID                                   | Name | Status | Networks |\n+--------------------------------------+------+--------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | ACTIVE |          |\n+--------------------------------------+------+--------+----------+\n[root@rhel8249 ~]# nova stop vm11\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+---------+----------+\n| ID                                   | Name | Status  | Networks |\n+--------------------------------------+------+---------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | SHUTOFF |          |\n+--------------------------------------+------+---------+----------+\n[root@rhel8249 ~]# nova migrate vm11\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+--------+----------+\n| ID                                   | Name | Status | Networks |\n+--------------------------------------+------+--------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | ACTIVE |          |  <<<<<<< ACTIVE again.\n+--------------------------------------+------+--------+----------+\n[root@rhel8249 ~]# nova show vm11\n+--------------------------------------+------------------------------------------------------------+\n| Property                             | Value                                                      |\n+--------------------------------------+------------------------------------------------------------+\n| status                               | ACTIVE                                                     |\n| updated                              | 2013-07-25T13:18:07Z                                       |\n| OS-EXT-STS:task_state                | None                                                       |\n| OS-EXT-SRV-ATTR:host                 | rhel8252                                                   |\n| key_name                             | None                                                       |\n| image                                | cirros-0.3.0-x86_64 (770267f5-0776-4aea-9626-fbf09b2e9610) |\n| hostId                               | 6cff741229d94bdca096cbb0226f033d0e8dc9b0b2149a8c768784da   |\n| OS-EXT-STS:vm_state                  | active                                                     |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000081                                          |\n| OS-SRV-USG:launched_at               | 2013-07-25T13:17:48.000000                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | rhel8252                                                   |\n| flavor                               | tmp (6)                                                    |\n| id                                   | 00778517-7f18-4964-83f9-c503c58c8be1                       |\n| security_groups                      | [{u'name': u'default'}]                                    |\n| OS-SRV-USG:terminated_at             | None                                                       |\n| user_id                              | 736f934fc3ee4c52a3c288d0cfaf0a8f                           |\n| name                                 | vm11                                                       |\n| created                              | 2013-07-25T13:17:43Z                                       |\n| tenant_id                            | 441742daab4e458eb917f928405c76ba                           |\n| OS-DCF:diskConfig                    | MANUAL                                                     |\n| metadata                             | {}                                                         |\n| os-extended-volumes:volumes_attached | []                                                         |\n| accessIPv4                           |                                                            |\n| accessIPv6                           |                                                            |\n| progress                             | 0                                                          |\n| OS-EXT-STS:power_state               | 4                                                          |\n| OS-EXT-AZ:availability_zone          | nova                                                       |\n| config_drive                         |                                                            |\n+--------------------------------------+------------------------------------------------------------+\n\nCheck the VM status on hypervisor:\n[root@rhel8252 ~]# virsh list --all\n Id    Name                           State\n----------------------------------------------------\n -     instance-00000081              shut off <<<<<<< Its off now", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1204905", 
    "owner": "https://api.launchpad.net/1.0/~jay-lau-513", 
    "id": 1204905, 
    "index": 5148, 
    "openned": "2013-07-25 13:22:13.501405+00:00", 
    "created": "2013-07-25 13:22:13.501405+00:00", 
    "title": "cold migrate fail will set a VM from SHUTOFF to ACTIVE", 
    "comments": [
        {
            "content": "[root@rhel8249 ~]# nova boot --image cirros-0.3.0-x86_64 --flavor 6 vm11\n+--------------------------------------+--------------------------------------+\n| Property                             | Value                                |\n+--------------------------------------+--------------------------------------+\n| OS-EXT-STS:task_state                | scheduling                           |\n| image                                | cirros-0.3.0-x86_64                  |\n| OS-EXT-STS:vm_state                  | building                             |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000081                    |\n| OS-SRV-USG:launched_at               | None                                 |\n| flavor                               | tmp                                  |\n| id                                   | 00778517-7f18-4964-83f9-c503c58c8be1 |\n| security_groups                      | [{u'name': u'default'}]              |\n| user_id                              | 736f934fc3ee4c52a3c288d0cfaf0a8f     |\n| OS-DCF:diskConfig                    | MANUAL                               |\n| accessIPv4                           |                                      |\n| accessIPv6                           |                                      |\n| progress                             | 0                                    |\n| OS-EXT-STS:power_state               | 0                                    |\n| OS-EXT-AZ:availability_zone          | nova                                 |\n| config_drive                         |                                      |\n| status                               | BUILD                                |\n| updated                              | 2013-07-25T13:17:43Z                 |\n| hostId                               |                                      |\n| OS-EXT-SRV-ATTR:host                 | None                                 |\n| OS-SRV-USG:terminated_at             | None                                 |\n| key_name                             | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | None                                 |\n| name                                 | vm11                                 |\n| adminPass                            | GpwTDX2oZBqA                         |\n| tenant_id                            | 441742daab4e458eb917f928405c76ba     |\n| created                              | 2013-07-25T13:17:43Z                 |\n| os-extended-volumes:volumes_attached | []                                   |\n| metadata                             | {}                                   |\n+--------------------------------------+--------------------------------------+\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+--------+----------+\n| ID                                   | Name | Status | Networks |\n+--------------------------------------+------+--------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | ACTIVE |          |\n+--------------------------------------+------+--------+----------+\n[root@rhel8249 ~]# nova stop vm11\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+---------+----------+\n| ID                                   | Name | Status  | Networks |\n+--------------------------------------+------+---------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | SHUTOFF |          |\n+--------------------------------------+------+---------+----------+\n[root@rhel8249 ~]# nova migrate vm11\n[root@rhel8249 ~]# nova list\n+--------------------------------------+------+--------+----------+\n| ID                                   | Name | Status | Networks |\n+--------------------------------------+------+--------+----------+\n| 00778517-7f18-4964-83f9-c503c58c8be1 | vm11 | ACTIVE |          |  <<<<<<< ACTIVE again.\n+--------------------------------------+------+--------+----------+\n[root@rhel8249 ~]# nova show vm11\n+--------------------------------------+------------------------------------------------------------+\n| Property                             | Value                                                      |\n+--------------------------------------+------------------------------------------------------------+\n| status                               | ACTIVE                                                     |\n| updated                              | 2013-07-25T13:18:07Z                                       |\n| OS-EXT-STS:task_state                | None                                                       |\n| OS-EXT-SRV-ATTR:host                 | rhel8252                                                   |\n| key_name                             | None                                                       |\n| image                                | cirros-0.3.0-x86_64 (770267f5-0776-4aea-9626-fbf09b2e9610) |\n| hostId                               | 6cff741229d94bdca096cbb0226f033d0e8dc9b0b2149a8c768784da   |\n| OS-EXT-STS:vm_state                  | active                                                     |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000081                                          |\n| OS-SRV-USG:launched_at               | 2013-07-25T13:17:48.000000                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | rhel8252                                                   |\n| flavor                               | tmp (6)                                                    |\n| id                                   | 00778517-7f18-4964-83f9-c503c58c8be1                       |\n| security_groups                      | [{u'name': u'default'}]                                    |\n| OS-SRV-USG:terminated_at             | None                                                       |\n| user_id                              | 736f934fc3ee4c52a3c288d0cfaf0a8f                           |\n| name                                 | vm11                                                       |\n| created                              | 2013-07-25T13:17:43Z                                       |\n| tenant_id                            | 441742daab4e458eb917f928405c76ba                           |\n| OS-DCF:diskConfig                    | MANUAL                                                     |\n| metadata                             | {}                                                         |\n| os-extended-volumes:volumes_attached | []                                                         |\n| accessIPv4                           |                                                            |\n| accessIPv6                           |                                                            |\n| progress                             | 0                                                          |\n| OS-EXT-STS:power_state               | 4                                                          |\n| OS-EXT-AZ:availability_zone          | nova                                                       |\n| config_drive                         |                                                            |\n+--------------------------------------+------------------------------------------------------------+\n\nCheck the VM status on hypervisor:\n[root@rhel8252 ~]# virsh list --all\n Id    Name                           State\n----------------------------------------------------\n -     instance-00000081              shut off <<<<<<< Its off now", 
            "date_created": "2013-07-25 13:22:13.501405+00:00", 
            "author": "https://api.launchpad.net/1.0/~jay-lau-513"
        }, 
        {
            "content": "2013-07-25 21:18:07.306 20386 WARNING nova.scheduler.utils [req-04198e3c-34b9-4a42-a617-4ba3c622729d 736f934fc3ee4c52a3c288d0cfaf0a8f 441742daab4e458eb917f928405c76ba] Failed to scheduler_prep_resize: No valid host was found. \n2013-07-25 21:18:07.307 20386 WARNING nova.scheduler.utils [req-04198e3c-34b9-4a42-a617-4ba3c622729d 736f934fc3ee4c52a3c288d0cfaf0a8f 441742daab4e458eb917f928405c76ba] [instance: 00778517-7f18-4964-83f9-c503c58c8be1] Setting instance to ACTIVE state.", 
            "date_created": "2013-07-25 13:23:11.223390+00:00", 
            "author": "https://api.launchpad.net/1.0/~jay-lau-513"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/38635", 
            "date_created": "2013-07-25 13:53:03.928600+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/38635\nCommitted: http://github.com/openstack/nova/commit/d63cfd1af0a8057911933092f5486a24ec7aa8bb\nSubmitter: Jenkins\nBranch:    master\n\ncommit d63cfd1af0a8057911933092f5486a24ec7aa8bb\nAuthor: Jay Lau <email address hidden>\nDate:   Thu Jul 25 21:43:41 2013 +0800\n\n    Set VM back to its original state if cold migration failed\n    \n    If migration of a VM in the SHUTOFF state failed due to\n    NoValidHost, the VM was erroneously set to ACTIVE.\n    \n    The fix sets the VM back to its original state instead.\n    \n    Fix bug 1204905\n    \n    Change-Id: I06f6a2e8a05e715c505a24d3013f482eaea3df8b\n", 
            "date_created": "2013-07-30 16:00:57.799722+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "The bug was broken by recent scheduler&conductor refactor", 
            "date_created": "2013-08-20 05:56:12.145779+00:00", 
            "author": "https://api.launchpad.net/1.0/~jay-lau-513"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/42814", 
            "date_created": "2013-08-20 06:06:42.814291+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/42814\nCommitted: http://github.com/openstack/nova/commit/6d63f6c37debffd836fcae2f76181a6dacb185c8\nSubmitter: Jenkins\nBranch:    master\n\ncommit 6d63f6c37debffd836fcae2f76181a6dacb185c8\nAuthor: Jay Lau <email address hidden>\nDate:   Tue Aug 20 13:59:02 2013 +0800\n\n    Set VM back to its original state if cold migration failed\n    \n    If migration of a VM in the STOPPED state failed due to\n    NoValidHost, the VM was erroneously set to ACTIVE.\n    \n    The fix sets the VM back to its original state instead.\n    \n    Fix bug 1204905\n    \n    Change-Id: I67ccac9ff4104fbd63c545b9f9399206a7febae7\n", 
            "date_created": "2013-08-23 06:34:01.063709+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-09-05 15:43:00.002967+00:00"
}