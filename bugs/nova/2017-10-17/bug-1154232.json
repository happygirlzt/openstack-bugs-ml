{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:22:23.226430+00:00", 
    "description": "Every single startup of nova-compute in any tempest run starts with the following stack trace in the logs:\n\n2013-03-08 17:01:57.139 ERROR nova.openstack.common.rpc.common [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Timed out waiting for RPC response: timed out\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common Traceback (most recent call last):\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/opt/stack/new/nova/nova/openstack/common/rpc/impl_kombu.py\", line 563, in ensure\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return method(*args, **kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/opt/stack/new/nova/nova/openstack/common/rpc/impl_kombu.py\", line 643, in _consume\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.connection.drain_events(timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/connection.py\", line 175, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.transport.drain_events(self.connection, **kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 238, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return connection.drain_events(**kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 57, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.wait_multi(self.channels.values(), timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 63, in wait_multi\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     chanmap.keys(), allowed_methods, timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 120, in _wait_multiple\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     channel, method_sig, args, content = read_timeout(timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 94, in read_timeout\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.method_reader.read_method()\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/method_framing.py\", line 221, in read_method\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     raise m\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common timeout: timed out\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common \n2013-03-08 17:01:57.148 WARNING nova.conductor.api [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Timed out waiting for nova-conductor. Is it running? Or did this service start before nova-conductor?\n2013-03-08 17:01:57.148 DEBUG nova.openstack.common.rpc.amqp [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Making synchronous call on conductor ... multicall /opt/stack/new/nova/nova/openstack/common/rpc/amqp.py:541\n2013-03-08 17:01:57.149 DEBUG nova.openstack.common.rpc.amqp [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] MSG_ID is 334393ad8374485ab0350037a2f09ecb multicall /opt/stack/new/nova/nova/openstack/common/rpc/amqp.py:544\n\n\nIf this is normal behavior we should suppress this stack trace, because it's a big ugly red herring in the code.", 
    "tags": [
        "stacktrace"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1154232", 
    "owner": "https://api.launchpad.net/1.0/~russellb", 
    "id": 1154232, 
    "index": 3281, 
    "openned": "2013-03-12 18:08:00.912187+00:00", 
    "created": "2013-03-12 18:08:00.912187+00:00", 
    "title": "Nova Compute generates stack traces on startup trying to talk to conductor", 
    "comments": [
        {
            "content": "Every single startup of nova-compute in any tempest run starts with the following stack trace in the logs:\n\n2013-03-08 17:01:57.139 ERROR nova.openstack.common.rpc.common [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Timed out waiting for RPC response: timed out\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common Traceback (most recent call last):\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/opt/stack/new/nova/nova/openstack/common/rpc/impl_kombu.py\", line 563, in ensure\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return method(*args, **kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/opt/stack/new/nova/nova/openstack/common/rpc/impl_kombu.py\", line 643, in _consume\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.connection.drain_events(timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/connection.py\", line 175, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.transport.drain_events(self.connection, **kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 238, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return connection.drain_events(**kwargs)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 57, in drain_events\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.wait_multi(self.channels.values(), timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 63, in wait_multi\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     chanmap.keys(), allowed_methods, timeout=timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 120, in _wait_multiple\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     channel, method_sig, args, content = read_timeout(timeout)\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/kombu/transport/pyamqplib.py\", line 94, in read_timeout\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     return self.method_reader.read_method()\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/method_framing.py\", line 221, in read_method\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common     raise m\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common timeout: timed out\n2013-03-08 17:01:57.139 11470 TRACE nova.openstack.common.rpc.common \n2013-03-08 17:01:57.148 WARNING nova.conductor.api [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Timed out waiting for nova-conductor. Is it running? Or did this service start before nova-conductor?\n2013-03-08 17:01:57.148 DEBUG nova.openstack.common.rpc.amqp [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] Making synchronous call on conductor ... multicall /opt/stack/new/nova/nova/openstack/common/rpc/amqp.py:541\n2013-03-08 17:01:57.149 DEBUG nova.openstack.common.rpc.amqp [req-76037107-4c47-47f7-b9cd-7b3e9e7e1650 None None] MSG_ID is 334393ad8374485ab0350037a2f09ecb multicall /opt/stack/new/nova/nova/openstack/common/rpc/amqp.py:544\n\n\nIf this is normal behavior we should suppress this stack trace, because it's a big ugly red herring in the code.", 
            "date_created": "2013-03-12 18:08:00.912187+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Looks like this was fixed prior to March 11th but after March 8th", 
            "date_created": "2013-03-12 18:22:14.111983+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/24226", 
            "date_created": "2013-03-12 18:27:19.550067+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/24226\nCommitted: http://github.com/openstack/nova/commit/d984b0b0bcbd17567f127395c8b890cddd9edd30\nSubmitter: Jenkins\nBranch:    master\n\ncommit d984b0b0bcbd17567f127395c8b890cddd9edd30\nAuthor: Russell Bryant <email address hidden>\nDate:   Tue Mar 12 14:24:49 2013 -0400\n\n    Sync rpc from oslo-incubator.\n    \n    Changes include:\n    \n     * Fix Copyright Headers - Rename LLC to Foundation\n     * Preserve exceptions in impl_zmq.\n     * Don't log a traceback on rpc call timeout.\n     * Redis-based matchmaker\n     * AMQP: skip duplicate messages\n     * some other minor fixes / cleanups\n    \n    Fix bug 1154232.\n    \n    Change-Id: I8afb6b9a919fca34b4a93f7fad1551a023eba6b2\n", 
            "date_created": "2013-03-13 16:03:19.820460+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-03-20 16:14:06.668330+00:00"
}