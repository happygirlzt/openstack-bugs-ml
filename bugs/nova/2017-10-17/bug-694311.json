{
    "status": "Fix Released", 
    "last_updated": "2015-03-10 11:06:51.198793+00:00", 
    "description": "After installing nova on an Ubuntu 10.04 machine, I tried to\nstart up the components and most of them - api, network,\nobjectstore,scheduler,.. - are running fine but I could not start nova-\ncompute.\n\nI receive a python exception:   \"nova.exception.NotFound: Class\nget_connection cannot be found\"\n\nistvan@istvan:~/openstack/src/nova$ bin/nova-compute\n WARNING:root:Starting compute node\n DEBUG:root:Full set of FLAGS:\n DEBUG:root:rabbit_retry_interval : 10\n DEBUG:root:volume_topic : volume\n DEBUG:root:region_list : []\n DEBUG:root:help : None\n DEBUG:root:compute_topic : compute\n DEBUG:root:default_instance_type : m1.small\n DEBUG:root:rabbit_password : guest\n DEBUG:root:network_manager : nova.network.manager.VlanManager\n DEBUG:root:ec2_prefix : http\n DEBUG:root:s3_dmz : 84.0.254.85\n DEBUG:root:vpn_key_suffix : -vpn\n DEBUG:root:cc_host : 84.0.254.85\n DEBUG:root:scheduler_topic : scheduler\n DEBUG:root:pidfile : None\n DEBUG:root:aws_access_key_id : admin\n DEBUG:root:null_kernel : nokernel\n DEBUG:root:verbose : True\n DEBUG:root:connection_type : libvirt\n DEBUG:root:fake_rabbit : False\n DEBUG:root:s3_port : 3333\n DEBUG:root:rabbit_host : localhost\n DEBUG:root:ec2_suffix : /services/Cloud\n DEBUG:root:cc_dmz : 84.0.254.85\n DEBUG:root:node_availability_zone : nova\n DEBUG:root:? : None\n DEBUG:root:helpxml : None\n DEBUG:root:rabbit_userid : guest\n DEBUG:root:cc_port : 8773\n DEBUG:root:report_interval : 10\n DEBUG:root:scheduler_manager : nova.scheduler.manager.SchedulerManager\n DEBUG:root:helpshort : None\n DEBUG:root:sql_connection : mysql://root:nova@localhost/nova\n DEBUG:root:auth_token_ttl : 3600\n DEBUG:root:rabbit_port : 5672\n DEBUG:root:host : istvan\n DEBUG:root:volume_manager : nova.volume.manager.VolumeManager\n DEBUG:root:rabbit_max_retries : 12\n DEBUG:root:vpn_image_id : ami-cloudpipe\n DEBUG:root:db_backend : sqlalchemy\n DEBUG:root:compute_manager : nova.compute.manager.ComputeManager\n DEBUG:root:rabbit_virtual_host : /\n DEBUG:root:state_path : /home/istvan/openstack/src/nova/nova/../\n DEBUG:root:image_service : nova.image.s3.S3ImageService\n DEBUG:root:default_image : ami-11111\n DEBUG:root:control_exchange : nova\n DEBUG:root:aws_secret_access_key : admin\n DEBUG:root:s3_host : 84.0.254.85\n DEBUG:root:periodic_interval : 60\n DEBUG:root:fake_network : False\n DEBUG:root:network_topic : network\n nova.virt.connection.get_connection\n Traceback (most recent call last):\n  File \"bin/nova-compute\", line 44, in <module>\n    service.serve()\n  File \"/home/istvan/openstack/src/nova/nova/service.py\", line 229, in\n serve\n    x.start()\n  File \"/home/istvan/openstack/src/nova/nova/service.py\", line 76, in\n start\n    **self.saved_kwargs)\n  File \"/home/istvan/openstack/src/nova/nova/compute/manager.py\", line\n 64, in __init__\n    self.driver = utils.import_object(compute_driver)\n  File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 60, in\n import_object\n    cls = import_class(import_str)\n  File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 51, in\n import_class\n    raise exception.NotFound(_('Class %s cannot be found') % class_str)\n nova.exception.NotFound: Class get_connection cannot be found\n\n\n This is my nova.conf:\n istvan@istvan:~/openstack/src/nova$ cat bin/nova.conf\n --verbose\n --nodaemon\n --dhcpbridge_flagfile=/home/istvan/openstack/src/nova/bin/nova.conf\n --network_manager=nova.network.manager.VlanManager\n --cc_host=84.0.254.85\n --routing_source_ip=84.0.254.85\n --sql_connection=mysql://root:nova@localhost/nova\n --auth_driver=nova.auth.dbdriver.DbDriver\n --libvirt_type=qemu\n\n\nInstallig python-cheetah package fixed the issue, but python-cheetah is not mentioned in the documentation and the exception is misleading.\n\nNova version: 2011.1", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/694311", 
    "owner": "https://api.launchpad.net/1.0/~armando-migliaccio", 
    "id": 694311, 
    "index": 59, 
    "openned": "2010-12-25 16:56:34.291705+00:00", 
    "created": "2010-12-25 16:56:34.291705+00:00", 
    "title": "nova-compute cannot start - class not found exception", 
    "comments": [
        {
            "content": "After installing nova on an Ubuntu 10.04 machine, I tried to\nstart up the components and most of them - api, network,\nobjectstore,scheduler,.. - are running fine but I could not start nova-\ncompute.\n\nI receive a python exception:   \"nova.exception.NotFound: Class\nget_connection cannot be found\"\n\nistvan@istvan:~/openstack/src/nova$ bin/nova-compute\n WARNING:root:Starting compute node\n DEBUG:root:Full set of FLAGS:\n DEBUG:root:rabbit_retry_interval : 10\n DEBUG:root:volume_topic : volume\n DEBUG:root:region_list : []\n DEBUG:root:help : None\n DEBUG:root:compute_topic : compute\n DEBUG:root:default_instance_type : m1.small\n DEBUG:root:rabbit_password : guest\n DEBUG:root:network_manager : nova.network.manager.VlanManager\n DEBUG:root:ec2_prefix : http\n DEBUG:root:s3_dmz : 84.0.254.85\n DEBUG:root:vpn_key_suffix : -vpn\n DEBUG:root:cc_host : 84.0.254.85\n DEBUG:root:scheduler_topic : scheduler\n DEBUG:root:pidfile : None\n DEBUG:root:aws_access_key_id : admin\n DEBUG:root:null_kernel : nokernel\n DEBUG:root:verbose : True\n DEBUG:root:connection_type : libvirt\n DEBUG:root:fake_rabbit : False\n DEBUG:root:s3_port : 3333\n DEBUG:root:rabbit_host : localhost\n DEBUG:root:ec2_suffix : /services/Cloud\n DEBUG:root:cc_dmz : 84.0.254.85\n DEBUG:root:node_availability_zone : nova\n DEBUG:root:? : None\n DEBUG:root:helpxml : None\n DEBUG:root:rabbit_userid : guest\n DEBUG:root:cc_port : 8773\n DEBUG:root:report_interval : 10\n DEBUG:root:scheduler_manager : nova.scheduler.manager.SchedulerManager\n DEBUG:root:helpshort : None\n DEBUG:root:sql_connection : mysql://root:nova@localhost/nova\n DEBUG:root:auth_token_ttl : 3600\n DEBUG:root:rabbit_port : 5672\n DEBUG:root:host : istvan\n DEBUG:root:volume_manager : nova.volume.manager.VolumeManager\n DEBUG:root:rabbit_max_retries : 12\n DEBUG:root:vpn_image_id : ami-cloudpipe\n DEBUG:root:db_backend : sqlalchemy\n DEBUG:root:compute_manager : nova.compute.manager.ComputeManager\n DEBUG:root:rabbit_virtual_host : /\n DEBUG:root:state_path : /home/istvan/openstack/src/nova/nova/../\n DEBUG:root:image_service : nova.image.s3.S3ImageService\n DEBUG:root:default_image : ami-11111\n DEBUG:root:control_exchange : nova\n DEBUG:root:aws_secret_access_key : admin\n DEBUG:root:s3_host : 84.0.254.85\n DEBUG:root:periodic_interval : 60\n DEBUG:root:fake_network : False\n DEBUG:root:network_topic : network\n nova.virt.connection.get_connection\n Traceback (most recent call last):\n  File \"bin/nova-compute\", line 44, in <module>\n    service.serve()\n  File \"/home/istvan/openstack/src/nova/nova/service.py\", line 229, in\n serve\n    x.start()\n  File \"/home/istvan/openstack/src/nova/nova/service.py\", line 76, in\n start\n    **self.saved_kwargs)\n  File \"/home/istvan/openstack/src/nova/nova/compute/manager.py\", line\n 64, in __init__\n    self.driver = utils.import_object(compute_driver)\n  File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 60, in\n import_object\n    cls = import_class(import_str)\n  File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 51, in\n import_class\n    raise exception.NotFound(_('Class %s cannot be found') % class_str)\n nova.exception.NotFound: Class get_connection cannot be found\n\n\n This is my nova.conf:\n istvan@istvan:~/openstack/src/nova$ cat bin/nova.conf\n --verbose\n --nodaemon\n --dhcpbridge_flagfile=/home/istvan/openstack/src/nova/bin/nova.conf\n --network_manager=nova.network.manager.VlanManager\n --cc_host=84.0.254.85\n --routing_source_ip=84.0.254.85\n --sql_connection=mysql://root:nova@localhost/nova\n --auth_driver=nova.auth.dbdriver.DbDriver\n --libvirt_type=qemu\n\n\nInstallig python-cheetah package fixed the issue, but python-cheetah is not mentioned in the documentation and the exception is misleading.\n\nNova version: 2011.1", 
            "date_created": "2010-12-25 16:56:34.291705+00:00", 
            "author": "https://api.launchpad.net/1.0/~istvan-szegedi2"
        }, 
        {
            "content": "I experienced this myself. Usually I try to diagnose this kind of problems by loading the module individually using the interpreter (to get the full traceback):\n\n>>> \n[...]\n>>> from nova.virt import connection\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"nova/virt/connection.py\", line 27, in <module>\n    from nova.virt import libvirt_conn\n  File \"nova/virt/libvirt_conn.py\", line 61, in <module>\n    from Cheetah.Template import Template\nImportError: No module named Cheetah.Template\n\nThat's how if figured out the missing package. \n\nI think this bug has much more to do with the fact that 'import_class does not log the specific reason of the import error' rather than 'nova-compute fail to start...'. \n\nFor a seasoned Nova developer how to deal with this situation might be obvious, but definitely not for a new starter. If logging can be added to utils.py I think that would fix the problem.", 
            "date_created": "2010-12-26 12:47:16.287174+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "@Istvan: the current trunk should have better logging. Please try to add python-cheetah... If it doesn't solve this, please run with latest trunk, reopen this bug and post the corresponding error here.", 
            "date_created": "2010-12-28 16:25:40.696884+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Also have similar bug, but for cactus, scripted install, manuall reinstall.\n\nThank to this, i write simple test.\n \n\n\"import nova.virt.connection\nimport sys\n\nprint getattr(sys.modules['nova.virt.connection'],get_connection)\"\n\n\nFile \"pytest.py\", line 4, in <module>\n    import nova.virt.connection\n  File \"/usr/lib/pymodules/python2.7/nova/virt/connection.py\", line 31, in <module>\n    from nova.virt import vmwareapi_conn\n  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi_conn.py\", line 49, in <module>\n    from nova.virt.vmwareapi.vmops import VMWareVMOps\n  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi/vmops.py\", line 37, in <module>\n    from nova.virt.vmwareapi import vmware_images\n  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi/vmware_images.py\", line 21, in <module>\n    from glance import client\n  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/client.py\", line 26, in <module>\n    from glance.api.v1 import images as v1_images\n  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/api/v1/__init__.py\", line 22, in <module>\n    from glance.api.v1 import images\n  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/api/v1/images.py\", line 36, in <module>\n    from glance.common import notifier\n  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/common/notifier.py\", line 23, in <module>\n    import kombu.connection\n\nin which nova(nova-compute) wants kombu which is for 2011.3+ releases", 
            "date_created": "2011-12-13 16:12:21.295205+00:00", 
            "author": "https://api.launchpad.net/1.0/~novikov"
        }, 
        {
            "content": "The stack trace below is actually glance trying to load kombu.  Glance depends on kombu as well for notifications.\n\nOn Dec 13, 2011, at 8:12 AM, Alexander Novikov wrote:\n\n> Also have similar bug, but for cactus, scripted install, manuall\n> reinstall.\n> \n> Thank to this, i write simple test.\n> \n> \n> \"import nova.virt.connection\n> import sys\n> \n> print getattr(sys.modules['nova.virt.connection'],get_connection)\"\n> \n> \n> File \"pytest.py\", line 4, in <module>\n>    import nova.virt.connection\n>  File \"/usr/lib/pymodules/python2.7/nova/virt/connection.py\", line 31, in <module>\n>    from nova.virt import vmwareapi_conn\n>  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi_conn.py\", line 49, in <module>\n>    from nova.virt.vmwareapi.vmops import VMWareVMOps\n>  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi/vmops.py\", line 37, in <module>\n>    from nova.virt.vmwareapi import vmware_images\n>  File \"/usr/lib/pymodules/python2.7/nova/virt/vmwareapi/vmware_images.py\", line 21, in <module>\n>    from glance import client\n>  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/client.py\", line 26, in <module>\n>    from glance.api.v1 import images as v1_images\n>  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/api/v1/__init__.py\", line 22, in <module>\n>    from glance.api.v1 import images\n>  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/api/v1/images.py\", line 36, in <module>\n>    from glance.common import notifier\n>  File \"/usr/local/lib/python2.7/dist-packages/glance-2012.1-py2.7.egg/glance/common/notifier.py\", line 23, in <module>\n>    import kombu.connection\n> \n> in which nova(nova-compute) wants kombu which is for 2011.3+ releases\n> \n> -- \n> You received this bug notification because you are subscribed to\n> OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/694311\n> \n> Title:\n>  nova-compute cannot start - class not found exception\n> \n> Status in OpenStack Compute (Nova):\n>  Fix Released\n> \n> Bug description:\n>  After installing nova on an Ubuntu 10.04 machine, I tried to\n>  start up the components and most of them - api, network,\n>  objectstore,scheduler,.. - are running fine but I could not start nova-\n>  compute.\n> \n>  I receive a python exception:   \"nova.exception.NotFound: Class\n>  get_connection cannot be found\"\n> \n>  istvan@istvan:~/openstack/src/nova$ bin/nova-compute\n>   WARNING:root:Starting compute node\n>   DEBUG:root:Full set of FLAGS:\n>   DEBUG:root:rabbit_retry_interval : 10\n>   DEBUG:root:volume_topic : volume\n>   DEBUG:root:region_list : []\n>   DEBUG:root:help : None\n>   DEBUG:root:compute_topic : compute\n>   DEBUG:root:default_instance_type : m1.small\n>   DEBUG:root:rabbit_password : guest\n>   DEBUG:root:network_manager : nova.network.manager.VlanManager\n>   DEBUG:root:ec2_prefix : http\n>   DEBUG:root:s3_dmz : 84.0.254.85\n>   DEBUG:root:vpn_key_suffix : -vpn\n>   DEBUG:root:cc_host : 84.0.254.85\n>   DEBUG:root:scheduler_topic : scheduler\n>   DEBUG:root:pidfile : None\n>   DEBUG:root:aws_access_key_id : admin\n>   DEBUG:root:null_kernel : nokernel\n>   DEBUG:root:verbose : True\n>   DEBUG:root:connection_type : libvirt\n>   DEBUG:root:fake_rabbit : False\n>   DEBUG:root:s3_port : 3333\n>   DEBUG:root:rabbit_host : localhost\n>   DEBUG:root:ec2_suffix : /services/Cloud\n>   DEBUG:root:cc_dmz : 84.0.254.85\n>   DEBUG:root:node_availability_zone : nova\n>   DEBUG:root:? : None\n>   DEBUG:root:helpxml : None\n>   DEBUG:root:rabbit_userid : guest\n>   DEBUG:root:cc_port : 8773\n>   DEBUG:root:report_interval : 10\n>   DEBUG:root:scheduler_manager : nova.scheduler.manager.SchedulerManager\n>   DEBUG:root:helpshort : None\n>   DEBUG:root:sql_connection : mysql://root:nova@localhost/nova\n>   DEBUG:root:auth_token_ttl : 3600\n>   DEBUG:root:rabbit_port : 5672\n>   DEBUG:root:host : istvan\n>   DEBUG:root:volume_manager : nova.volume.manager.VolumeManager\n>   DEBUG:root:rabbit_max_retries : 12\n>   DEBUG:root:vpn_image_id : ami-cloudpipe\n>   DEBUG:root:db_backend : sqlalchemy\n>   DEBUG:root:compute_manager : nova.compute.manager.ComputeManager\n>   DEBUG:root:rabbit_virtual_host : /\n>   DEBUG:root:state_path : /home/istvan/openstack/src/nova/nova/../\n>   DEBUG:root:image_service : nova.image.s3.S3ImageService\n>   DEBUG:root:default_image : ami-11111\n>   DEBUG:root:control_exchange : nova\n>   DEBUG:root:aws_secret_access_key : admin\n>   DEBUG:root:s3_host : 84.0.254.85\n>   DEBUG:root:periodic_interval : 60\n>   DEBUG:root:fake_network : False\n>   DEBUG:root:network_topic : network\n>   nova.virt.connection.get_connection\n>   Traceback (most recent call last):\n>    File \"bin/nova-compute\", line 44, in <module>\n>      service.serve()\n>    File \"/home/istvan/openstack/src/nova/nova/service.py\", line 229, in\n>   serve\n>      x.start()\n>    File \"/home/istvan/openstack/src/nova/nova/service.py\", line 76, in\n>   start\n>      **self.saved_kwargs)\n>    File \"/home/istvan/openstack/src/nova/nova/compute/manager.py\", line\n>   64, in __init__\n>      self.driver = utils.import_object(compute_driver)\n>    File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 60, in\n>   import_object\n>      cls = import_class(import_str)\n>    File \"/home/istvan/openstack/src/nova/nova/utils.py\", line 51, in\n>   import_class\n>      raise exception.NotFound(_('Class %s cannot be found') % class_str)\n>   nova.exception.NotFound: Class get_connection cannot be found\n> \n> \n>   This is my nova.conf:\n>   istvan@istvan:~/openstack/src/nova$ cat bin/nova.conf\n>   --verbose\n>   --nodaemon\n>   --dhcpbridge_flagfile=/home/istvan/openstack/src/nova/bin/nova.conf\n>   --network_manager=nova.network.manager.VlanManager\n>   --cc_host=84.0.254.85\n>   --routing_source_ip=84.0.254.85\n>   --sql_connection=mysql://root:nova@localhost/nova\n>   --auth_driver=nova.auth.dbdriver.DbDriver\n>   --libvirt_type=qemu\n> \n> \n>  Installig python-cheetah package fixed the issue, but python-cheetah is n\n\n", 
            "date_created": "2011-12-13 17:10:15+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "hi\ni am a new user of openstack service with trove .\nfor me there are no compute note when i do nova-manage service list  and got this\n\nBinary           Host                                 Zone             Status     State Updated_At\nnova-conductor   ubuntu-VirtualBox                    internal         enabled    :-)   2015-03-10 11:05:51\nnova-cert        ubuntu-VirtualBox                    internal         enabled    :-)   2015-03-10 11:05:51\nnova-network     ubuntu-VirtualBox                    internal         enabled    :-)   2015-03-10 11:05:51\nnova-scheduler   ubuntu-VirtualBox                    internal         enabled    :-)   2015-03-10 11:05:51\nnova-consoleauth ubuntu-VirtualBox                    internal         enabled    :-)   2015-03-10 11:05:51\n\nhow can i fix it please ?\n", 
            "date_created": "2015-03-10 11:06:50.647973+00:00", 
            "author": "https://api.launchpad.net/1.0/~bintou-16"
        }
    ], 
    "closed": "2011-02-07 14:01:15.598603+00:00"
}