{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 10:59:36.207697+00:00", 
    "description": "Pass a string, other than 'True' or 'False' for the <delete_on_terminate> flag placeholder while booting from volume.\n\n$ nova boot --flavor 1 --image a2bfa0c3-fb77-4da3-9a45-c0ed0debb1d5 --block_device_mapping vda=fbd8ae99-2aaf-4c88-83bb-9341c28f1174:volume::just_a_string SERVER_BOOTED_FROM_VOLUME\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-731d5d89-4b51-4c64-bf0d-a1de3e2f21e8)\n\nStack trace (n-api):\n\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 859, in create\n2012-10-03 06:31:19 TRACE nova.api.openstack     scheduler_hints=scheduler_hints)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 784, in create\n2012-10-03 06:31:19 TRACE nova.api.openstack     scheduler_hints=scheduler_hints)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 516, in _create_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     QUOTAS.rollback(context, quota_reservations)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-03 06:31:19 TRACE nova.api.openstack     self.gen.next()\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 505, in _create_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     security_group, block_device_mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 729, in create_db_entry_for_new_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     instance_type, image, block_device_mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 640, in _populate_instance_for_bdm\n2012-10-03 06:31:19 TRACE nova.api.openstack     instance_type, instance_uuid, mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 621, in _update_block_device_mapping\n2012-10-03 06:31:19 TRACE nova.api.openstack     values)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/api.py\", line 1219, in block_device_mapping_update_or_create\n2012-10-03 06:31:19 TRACE nova.api.openstack     return IMPL.block_device_mapping_update_or_create(context, values)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 129, in wrapper\n2012-10-03 06:31:19 TRACE nova.api.openstack     return f(*args, **kwargs)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 3334, in block_device_mapping_update_or_create\n2012-10-03 06:31:19 TRACE nova.api.openstack     bdm_ref.save(session=session)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/models.py\", line 56, in save\n2012-10-03 06:31:19 TRACE nova.api.openstack     session.flush()\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/exception.py\", line 73, in _wrap\n2012-10-03 06:31:19 TRACE nova.api.openstack     raise DBError(e)\n2012-10-03 06:31:19 TRACE nova.api.openstack DBError: invalid literal for int() with base 10: 'test_boot' (original cause: ValueError: invalid literal for int() with base 10: 'test_boot') 'INSERT INTO block_device_mapping (created_at, updated_at, deleted_at, deleted, instance_uuid, device_name, delete_on_termination, virtual_name, snapshot_id, volume_id, volume_size, no_device, connection_info) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)' [{'instance_uuid': 'a7586028-a701-4a8a-a9ff-86fb5ef5ceb4', 'virtual_name': None, 'no_device': None, 'connection_info': None, 'volume_id': u'fbd8ae99-2aaf-4c88-83bb-9341c28f1174', 'updated_at': None, 'device_name': u'vda', 'volume_size': u'', 'snapshot_id': None, 'deleted_at': None, 'delete_on_termination': u'just_a_string'}]\n2012-10-03 06:31:19 TRACE nova.api.openstack\n2012-10-03 06:31:19 INFO nova.api.openstack [req-731d5d89-4b51-4c64-bf0d-a1de3e2f21e8 admin admin] http://10.2.3.102:8774/v2/b1519b1ea6b8439fb7d88b1ec79ceec2/os-volumes_boot returned with HTTP 500\n\nThe parameter should accept only Boolean (True/1 or False/0)", 
    "tags": [
        "ntt"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1060955", 
    "owner": "https://api.launchpad.net/1.0/~unmesh-gurjar", 
    "id": 1060955, 
    "index": 663, 
    "openned": "2012-10-03 13:37:59.651371+00:00", 
    "created": "2012-10-03 13:37:59.651371+00:00", 
    "title": "HTTP 500 returned if a string is specified for delete_on_termination during boot from volume", 
    "comments": [
        {
            "content": "Pass a string for the <delete_on_terminate> flag placeholder while booting from volume.\n\n$ nova boot --flavor 1 --image a2bfa0c3-fb77-4da3-9a45-c0ed0debb1d5 --block_device_mapping vda=fbd8ae99-2aaf-4c88-83bb-9341c28f1174:volume::just_a_string SERVER_BOOTED_FROM_VOLUME\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-731d5d89-4b51-4c64-bf0d-a1de3e2f21e8)\n\nStack trace (n-api):\n\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 859, in create\n2012-10-03 06:31:19 TRACE nova.api.openstack     scheduler_hints=scheduler_hints)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 784, in create\n2012-10-03 06:31:19 TRACE nova.api.openstack     scheduler_hints=scheduler_hints)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 516, in _create_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     QUOTAS.rollback(context, quota_reservations)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-03 06:31:19 TRACE nova.api.openstack     self.gen.next()\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 505, in _create_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     security_group, block_device_mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 729, in create_db_entry_for_new_instance\n2012-10-03 06:31:19 TRACE nova.api.openstack     instance_type, image, block_device_mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 640, in _populate_instance_for_bdm\n2012-10-03 06:31:19 TRACE nova.api.openstack     instance_type, instance_uuid, mapping)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 621, in _update_block_device_mapping\n2012-10-03 06:31:19 TRACE nova.api.openstack     values)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/api.py\", line 1219, in block_device_mapping_update_or_create\n2012-10-03 06:31:19 TRACE nova.api.openstack     return IMPL.block_device_mapping_update_or_create(context, values)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 129, in wrapper\n2012-10-03 06:31:19 TRACE nova.api.openstack     return f(*args, **kwargs)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 3334, in block_device_mapping_update_or_create\n2012-10-03 06:31:19 TRACE nova.api.openstack     bdm_ref.save(session=session)\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/models.py\", line 56, in save\n2012-10-03 06:31:19 TRACE nova.api.openstack     session.flush()\n2012-10-03 06:31:19 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/exception.py\", line 73, in _wrap\n2012-10-03 06:31:19 TRACE nova.api.openstack     raise DBError(e)\n2012-10-03 06:31:19 TRACE nova.api.openstack DBError: invalid literal for int() with base 10: 'test_boot' (original cause: ValueError: invalid literal for int() with base 10: 'test_boot') 'INSERT INTO block_device_mapping (created_at, updated_at, deleted_at, deleted, instance_uuid, device_name, delete_on_termination, virtual_name, snapshot_id, volume_id, volume_size, no_device, connection_info) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)' [{'instance_uuid': 'a7586028-a701-4a8a-a9ff-86fb5ef5ceb4', 'virtual_name': None, 'no_device': None, 'connection_info': None, 'volume_id': u'fbd8ae99-2aaf-4c88-83bb-9341c28f1174', 'updated_at': None, 'device_name': u'vda', 'volume_size': u'', 'snapshot_id': None, 'deleted_at': None, 'delete_on_termination': u'just_a_string'}]\n2012-10-03 06:31:19 TRACE nova.api.openstack \n2012-10-03 06:31:19 INFO nova.api.openstack [req-731d5d89-4b51-4c64-bf0d-a1de3e2f21e8 admin admin] http://10.2.3.102:8774/v2/b1519b1ea6b8439fb7d88b1ec79ceec2/os-volumes_boot returned with HTTP 500", 
            "date_created": "2012-10-03 13:37:59.651371+00:00", 
            "author": "https://api.launchpad.net/1.0/~rohitk"
        }, 
        {
            "content": "The above request should return an HTTP Bad Request instead.", 
            "date_created": "2012-10-03 14:40:50.076098+00:00", 
            "author": "https://api.launchpad.net/1.0/~rohitk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/14377", 
            "date_created": "2012-10-12 06:39:03.507075+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/14377\nCommitted: http://github.com/openstack/nova/commit/7c9761b3bb52788021b5bf0eb9726af833db4074\nSubmitter: Jenkins\nBranch:    master\n\ncommit 7c9761b3bb52788021b5bf0eb9726af833db4074\nAuthor: Unmesh Gurjar <email address hidden>\nDate:   Thu Oct 11 23:48:08 2012 -0700\n\n    Fix error on invalid delete_on_termination value\n    \n    1. Fixed 500 error when an invalid value is passed to 'delete_on_termination'\n    parameter in 'block_device_mapping' of create server API (json request).\n    Converted the value to 'bool' (similar to XML request workflow) to fix issue.\n    2. Also added unit test coverage.\n    \n    Fixes LP: #1060955\n    \n    Change-Id: Ib35040f17a3712dac45ec1e3c2f32fee17db7c03\n", 
            "date_created": "2012-10-24 19:10:13.135241+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/folsom\nReview: https://review.openstack.org/16664", 
            "date_created": "2012-11-21 18:44:53.236717+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/16664\nCommitted: http://github.com/openstack/nova/commit/42a85c08d6a3e005a800b6c3f61d42dc8a26b1bb\nSubmitter: Jenkins\nBranch:    stable/folsom\n\ncommit 42a85c08d6a3e005a800b6c3f61d42dc8a26b1bb\nAuthor: Unmesh Gurjar <email address hidden>\nDate:   Thu Oct 11 23:48:08 2012 -0700\n\n    Fix error on invalid delete_on_termination value\n    \n    1. Fixed 500 error when an invalid value is passed to 'delete_on_termination'\n    parameter in 'block_device_mapping' of create server API (json request).\n    Converted the value to 'bool' (similar to XML request workflow) to fix issue.\n    2. Also added unit test coverage.\n    \n    Fixes LP: #1060955\n    \n    Change-Id: Ib35040f17a3712dac45ec1e3c2f32fee17db7c03\n    (cherry picked from commit 7c9761b3bb52788021b5bf0eb9726af833db4074)\n", 
            "date_created": "2012-11-27 13:39:01.504058+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-11-21 10:00:17.434703+00:00"
}