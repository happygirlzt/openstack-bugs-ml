{
    "status": "Fix Released", 
    "last_updated": "2012-02-27 10:03:23.450488+00:00", 
    "description": "Steps to reproduce:\n\n* as a regular user, launch an instance\n* nova add-floating-ip [guid] [ip]\n\nExpected:\n\nSuccessful association\n\nActual:\n\"The server has either erred or is incapable of performing the requested operation. (HTTP 500)\"\n\nOn nova-api:\n\n(nova.api.openstack.v2): TRACE: RemoteError: Remote error: NetworkNotFound Network 1 could not be found.\n\nOn nova-network:\n\nimpl_kombu.py:6462011-12-15 21:11:36,280 ERROR nova.rpc [-] Exception during message handling(nova.rpc): TRACE: Traceback (most recent call last):(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 620, in _process_data(nova.rpc): TRACE:     rval = node_func(context=ctxt, **node_args)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/network/manager.py\", line 685, in get_instance_nw_info(nova.rpc): TRACE:     network = self.db.network_get(context, vif['network_id'])(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/api.py\", line 783, in network_get(nova.rpc): TRACE:     return IMPL.network_get(context, network_id)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 113, in wrapper(nova.rpc): TRACE:     return f(*args, **kwargs)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 1799, in network_get(nova.rpc): TRACE:     raise exception.NetworkNotFound(network_id=network_id)(nova.rpc): TRACE: NetworkNotFound: Network 1 could not be found.(nova.rpc): TRACE:2011-12-15 21:11:36,282 ERROR nova.rpc [-] Returning exception Network 1 could not be found. to caller\n2011-12-15 21:11:36,282 ERROR nova.rpc [-] ['Traceback (most recent call last):\\n', '  File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 620, in _process_data\\n    rval = node_func(context=ctxt, **node_args)\\n', '  File \"/opt/stack/nova/nova/network/manager.py\", line 685, in get_instance_nw_info\\n    network = self.db.network_get(context, vif[\\'network_id\\'])\\n', '  File \"/opt/stack/nova/nova/db/api.py\", line 783, in network_get\\n    return IMPL.network_get(context, network_id)\\n', '  File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 113, in wrapper\\n    return f(*args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 1799, in network_get\\n    raise exception.NetworkNotFound(network_id=network_id)\\n', 'NetworkNotFound: Network 1 could not be found.\\n']", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/904976", 
    "owner": "https://api.launchpad.net/1.0/~sleepsonthefloor", 
    "id": 904976, 
    "index": 3708, 
    "openned": "2011-12-15 21:26:09.849424+00:00", 
    "created": "2011-12-15 21:26:09.849424+00:00", 
    "title": "Floating ip association fails for non-admin users", 
    "comments": [
        {
            "content": "Steps to reproduce:\n\n* as a regular user, launch an instance\n* nova add-floating-ip [guid] [ip]\n\nExpected:\n\nSuccessful association\n\nActual:\n\"The server has either erred or is incapable of performing the requested operation. (HTTP 500)\"\n\nOn nova-api:\n\n(nova.api.openstack.v2): TRACE: RemoteError: Remote error: NetworkNotFound Network 1 could not be found.\n\nOn nova-network:\n\nimpl_kombu.py:6462011-12-15 21:11:36,280 ERROR nova.rpc [-] Exception during message handling(nova.rpc): TRACE: Traceback (most recent call last):(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 620, in _process_data(nova.rpc): TRACE:     rval = node_func(context=ctxt, **node_args)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/network/manager.py\", line 685, in get_instance_nw_info(nova.rpc): TRACE:     network = self.db.network_get(context, vif['network_id'])(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/api.py\", line 783, in network_get(nova.rpc): TRACE:     return IMPL.network_get(context, network_id)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 113, in wrapper(nova.rpc): TRACE:     return f(*args, **kwargs)(nova.rpc): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 1799, in network_get(nova.rpc): TRACE:     raise exception.NetworkNotFound(network_id=network_id)(nova.rpc): TRACE: NetworkNotFound: Network 1 could not be found.(nova.rpc): TRACE:2011-12-15 21:11:36,282 ERROR nova.rpc [-] Returning exception Network 1 could not be found. to caller\n2011-12-15 21:11:36,282 ERROR nova.rpc [-] ['Traceback (most recent call last):\\n', '  File \"/opt/stack/nova/nova/rpc/impl_kombu.py\", line 620, in _process_data\\n    rval = node_func(context=ctxt, **node_args)\\n', '  File \"/opt/stack/nova/nova/network/manager.py\", line 685, in get_instance_nw_info\\n    network = self.db.network_get(context, vif[\\'network_id\\'])\\n', '  File \"/opt/stack/nova/nova/db/api.py\", line 783, in network_get\\n    return IMPL.network_get(context, network_id)\\n', '  File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 113, in wrapper\\n    return f(*args, **kwargs)\\n', '  File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 1799, in network_get\\n    raise exception.NetworkNotFound(network_id=network_id)\\n', 'NetworkNotFound: Network 1 could not be found.\\n']", 
            "date_created": "2011-12-15 21:26:09.849424+00:00", 
            "author": "https://api.launchpad.net/1.0/~sleepsonthefloor"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/2422\nCommitted: http://github.com/openstack/nova/commit/59193f110875026453b69ba0fc51f10692268875\nSubmitter: Jenkins\nBranch:    master\n\n status fixcommitted\n done\n\ncommit 59193f110875026453b69ba0fc51f10692268875\nAuthor: Anthony Young <email address hidden>\nDate:   Fri Dec 16 19:07:30 2011 +0000\n\n    Call get_instance_nw_info with elevated context, as documented in nova/network/manager.py\n    \n    * Fixes Bug 904976\n    * Add coverage for this in associate_floating_ip unit test\n    \n    Change-Id: I5bc35632ca382d011eb42e738140ba54d9cdc93f\n", 
            "date_created": "2011-12-16 22:46:50+00:00", 
            "author": "https://api.launchpad.net/1.0/~openstack-gerrit"
        }
    ], 
    "closed": "2012-02-27 10:03:22.206116+00:00"
}