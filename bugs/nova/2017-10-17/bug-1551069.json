{
    "status": "Invalid", 
    "last_updated": "2016-03-15 01:30:09.821884+00:00", 
    "description": "1. devstack install master version enviroment.\n\n[root@localhost nova(keystone_admin)]# git log -1\ncommit 01f5c73bf51e9aec69c23a730d4021b91d06fd8c\nMerge: a7d30ff dbe8c93\nAuthor: Jenkins <email address hidden>\nDate:   Thu Feb 25 00:11:59 2016 +0000\n\n    Merge \"make microversion a client level construct for tests\"\n\n2. log\n\n[root@localhost nova(keystone_admin)]# nova show 21170da3-f45f-4c47-9625-5e916b84c5b9 \n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property                             | Value                                                                                                                                                                                             |\n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                                                                                                                                                            |\n| OS-EXT-AZ:availability_zone          | nova                                                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:host                 | localhost.localdomain                                                                                                                                                                             |\n| OS-EXT-SRV-ATTR:hostname             | hanrong                                                                                                                                                                                           |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | localhost.localdomain                                                                                                                                                                             |\n| OS-EXT-SRV-ATTR:instance_name        | instance-0000000e                                                                                                                                                                                 |\n| OS-EXT-SRV-ATTR:kernel_id            | 96707814-65c1-4f2d-b236-4ba5160ea859                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                                                                                                                                                                 |\n| OS-EXT-SRV-ATTR:ramdisk_id           | 6e9addd7-00c9-4b65-9766-04cf3fc8d38b                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:reservation_id       | r-30xh6eek                                                                                                                                                                                        |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                                                                                                                                                          |\n| OS-EXT-SRV-ATTR:user_data            | -                                                                                                                                                                                                 |\n| OS-EXT-STS:power_state               | 4                                                                                                                                                                                                 |\n| OS-EXT-STS:task_state                | -                                                                                                                                                                                                 |\n| OS-EXT-STS:vm_state                  | error                                                                                                                                                                                             |\n| OS-SRV-USG:launched_at               | 2016-02-26T09:09:34.000000                                                                                                                                                                        |\n| OS-SRV-USG:terminated_at             | -                                                                                                                                                                                                 |\n| accessIPv4                           |                                                                                                                                                                                                   |\n| accessIPv6                           |                                                                                                                                                                                                   |\n| config_drive                         | True                                                                                                                                                                                              |\n| created                              | 2016-02-26T09:09:26Z                                                                                                                                                                              |\n| fault                                | {\"message\": \"Unexpected error while running command.                                                                                                                                              |\n|                                      | Command: qemu-img resize /opt/stack/data/nova/instances/21170da3-f45f-4c47-9625-5e916b84c5b9/disk 2147483648                                                                                      |\n|                                      | Exit code: 1                                                                                                                                                                                      |\n|                                      | Stdout: u''                                                                                                                                                                                       |\n|                                      | Stderr: u\\\"qemu-img: Could not open '/opt/stack/data/nova/instances/21170da3-f45f-\", \"code\": 500, \"details\": \"  File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 377, in decorated_function |\n|                                      |     return function(self, context, *args, **kwargs)                                                                                                                                               |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 4021, in finish_resize                                                                                                                   |\n|                                      |     self._set_instance_obj_error_state(context, instance)                                                                                                                                         |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 220, in __exit__                                                                                                         |\n|                                      |     self.force_reraise()                                                                                                                                                                          |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 196, in force_reraise                                                                                                    |\n|                                      |     six.reraise(self.type_, self.value, self.tb)                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 4009, in finish_resize                                                                                                                   |\n|                                      |     disk_info, image_meta)                                                                                                                                                                        |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 3974, in _finish_resize                                                                                                                  |\n|                                      |     old_instance_type)                                                                                                                                                                            |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 220, in __exit__                                                                                                         |\n|                                      |     self.force_reraise()                                                                                                                                                                          |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 196, in force_reraise                                                                                                    |\n|                                      |     six.reraise(self.type_, self.value, self.tb)                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 3969, in _finish_resize                                                                                                                  |\n|                                      |     block_device_info, power_on)                                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/libvirt/driver.py\\\", line 7276, in finish_migration                                                                                                            |\n|                                      |     self._disk_resize(image, size)                                                                                                                                                                |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/libvirt/driver.py\\\", line 7257, in _disk_resize                                                                                                                |\n|                                      |     disk.extend(image, size)                                                                                                                                                                      |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/disk/api.py\\\", line 164, in extend                                                                                                                             |\n|                                      |     utils.execute('qemu-img', 'resize', image.path, size)                                                                                                                                         |\n|                                      |   File \\\"/opt/stack/nova/nova/utils.py\\\", line 390, in execute                                                                                                                                    |\n|                                      |     return processutils.execute(*cmd, **kwargs)                                                                                                                                                   |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py\\\", line 371, in execute                                                                                                |\n|                                      |     cmd=sanitized_cmd)                                                                                                                                                                            |\n|                                      | \", \"created\": \"2016-02-26T09:13:10Z\"}                                                                                                                                                             |\n| flavor                               | m1.tiny (1)                                                                                                                                                                                       |\n| hostId                               | 2ab310e3cace7ca941aebce9d65872ac43608e14c1554f6a6c8524e2                                                                                                                                          |\n| id                                   | 21170da3-f45f-4c47-9625-5e916b84c5b9                                                                                                                                                              |\n| image                                | cirros-0.3.4-x86_64-uec (5e59aed6-4535-4f7d-9fec-4682a2466308)                                                                                                                                    |\n| key_name                             | -                                                                                                                                                                                                 |\n| locked                               | False                                                                                                                                                                                             |\n| metadata                             | {}                                                                                                                                                                                                |\n| name                                 | hanrong                                                                                                                                                                                           |\n| os-extended-volumes:volumes_attached | []                                                                                                                                                                                                |\n| private network                      | 10.0.0.4, fdbc:aa05:7e9e:0:f816:3eff:fe7a:d584                                                                                                                                                    |\n| security_groups                      | default                                                                                                                                                                                           |\n| status                               | ERROR                                                                                                                                                                                             |\n| tenant_id                            | 66abfcd2c32149c0bb3bf6137d49568b                                                                                                                                                                  |\n| updated                              | 2016-02-26T09:17:39Z                                                                                                                                                                              |\n| user_id                              | 7a77e73e0ccd4ced96b4c335fa920788                                                                                                                                                                  |\n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n[root@localhost nova(keystone_admin)]# \n\n\n3. steps\n* I did modify nova.conf file and config allow_resize_to_same_host is true.\n[root@localhost nova(keystone_admin)]# cat /etc/nova/nova.conf | grep same\nallow_resize_to_same_host = True\n\n* then I created a new flavor named \"harnong\" with Disk is 2 which is different with \"m1.tiny\" flavor 's disk.\n\n[root@localhost nova(keystone_admin)]# nova flavor-list\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n| ID  | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public |\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n| 1   | m1.tiny   | 512       | 1    | 0         |      | 1     | 1.0         | True      |\n| 111 | hanrong   | 512       | 2    | 0         |      | 1     | 1.0         | True      |\n\n* then I created a server named \"test_resize\" using flavor \"m1.tiny\"  and waited for this server is running.\n\n[root@localhost nova(keystone_admin)]# nova boot --image 5e59aed6-4535-4f7d-9fec-4682a2466308 --flavor m1.tiny --nic net-id=9b0f9b63-47d8-417c-98d9-95404ca19ccb hanrong\n\n\n*  then I did resize operation and server was error.\n[root@localhost nova(keystone_admin)]# nova resize  21170da3-f45f-4c47-9625-5e916b84c5b9 111\n\n[root@localhost nova(keystone_admin)]# nova list\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name      | Status | Task State | Power State | Networks                                               |\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n| 21170da3-f45f-4c47-9625-5e916b84c5b9 | hanrong   | ERROR  | -          | Shutdown    | private=10.0.0.4, fdbc:aa05:7e9e:0:f816:3eff:fe7a:d584 |\n| ef5b591f-a076-4c00-a503-14152fdcc142 | instance3 | ACTIVE | -          | Running     | private=10.0.0.3, fdbc:aa05:7e9e:0:f816:3eff:fe14:79a4 |\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n\n\nExpected result:\nI expect resize with different disk at the same host is successful.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1551069", 
    "owner": "https://api.launchpad.net/1.0/~gstepanov", 
    "id": 1551069, 
    "index": 7334, 
    "openned": "2016-02-29 04:00:13.583062+00:00", 
    "created": "2016-02-29 04:00:13.583062+00:00", 
    "title": "resize instance at the same host failed.", 
    "comments": [
        {
            "content": "1. devstack install master version enviroment.\n\n[root@localhost nova(keystone_admin)]# git log -1\ncommit 01f5c73bf51e9aec69c23a730d4021b91d06fd8c\nMerge: a7d30ff dbe8c93\nAuthor: Jenkins <email address hidden>\nDate:   Thu Feb 25 00:11:59 2016 +0000\n\n    Merge \"make microversion a client level construct for tests\"\n\n2. log\n\n[root@localhost nova(keystone_admin)]# nova show 21170da3-f45f-4c47-9625-5e916b84c5b9 \n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property                             | Value                                                                                                                                                                                             |\n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                                                                                                                                                            |\n| OS-EXT-AZ:availability_zone          | nova                                                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:host                 | localhost.localdomain                                                                                                                                                                             |\n| OS-EXT-SRV-ATTR:hostname             | hanrong                                                                                                                                                                                           |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | localhost.localdomain                                                                                                                                                                             |\n| OS-EXT-SRV-ATTR:instance_name        | instance-0000000e                                                                                                                                                                                 |\n| OS-EXT-SRV-ATTR:kernel_id            | 96707814-65c1-4f2d-b236-4ba5160ea859                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                                                                                                                                                                 |\n| OS-EXT-SRV-ATTR:ramdisk_id           | 6e9addd7-00c9-4b65-9766-04cf3fc8d38b                                                                                                                                                              |\n| OS-EXT-SRV-ATTR:reservation_id       | r-30xh6eek                                                                                                                                                                                        |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                                                                                                                                                          |\n| OS-EXT-SRV-ATTR:user_data            | -                                                                                                                                                                                                 |\n| OS-EXT-STS:power_state               | 4                                                                                                                                                                                                 |\n| OS-EXT-STS:task_state                | -                                                                                                                                                                                                 |\n| OS-EXT-STS:vm_state                  | error                                                                                                                                                                                             |\n| OS-SRV-USG:launched_at               | 2016-02-26T09:09:34.000000                                                                                                                                                                        |\n| OS-SRV-USG:terminated_at             | -                                                                                                                                                                                                 |\n| accessIPv4                           |                                                                                                                                                                                                   |\n| accessIPv6                           |                                                                                                                                                                                                   |\n| config_drive                         | True                                                                                                                                                                                              |\n| created                              | 2016-02-26T09:09:26Z                                                                                                                                                                              |\n| fault                                | {\"message\": \"Unexpected error while running command.                                                                                                                                              |\n|                                      | Command: qemu-img resize /opt/stack/data/nova/instances/21170da3-f45f-4c47-9625-5e916b84c5b9/disk 2147483648                                                                                      |\n|                                      | Exit code: 1                                                                                                                                                                                      |\n|                                      | Stdout: u''                                                                                                                                                                                       |\n|                                      | Stderr: u\\\"qemu-img: Could not open '/opt/stack/data/nova/instances/21170da3-f45f-\", \"code\": 500, \"details\": \"  File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 377, in decorated_function |\n|                                      |     return function(self, context, *args, **kwargs)                                                                                                                                               |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 4021, in finish_resize                                                                                                                   |\n|                                      |     self._set_instance_obj_error_state(context, instance)                                                                                                                                         |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 220, in __exit__                                                                                                         |\n|                                      |     self.force_reraise()                                                                                                                                                                          |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 196, in force_reraise                                                                                                    |\n|                                      |     six.reraise(self.type_, self.value, self.tb)                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 4009, in finish_resize                                                                                                                   |\n|                                      |     disk_info, image_meta)                                                                                                                                                                        |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 3974, in _finish_resize                                                                                                                  |\n|                                      |     old_instance_type)                                                                                                                                                                            |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 220, in __exit__                                                                                                         |\n|                                      |     self.force_reraise()                                                                                                                                                                          |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\\\", line 196, in force_reraise                                                                                                    |\n|                                      |     six.reraise(self.type_, self.value, self.tb)                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 3969, in _finish_resize                                                                                                                  |\n|                                      |     block_device_info, power_on)                                                                                                                                                                  |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/libvirt/driver.py\\\", line 7276, in finish_migration                                                                                                            |\n|                                      |     self._disk_resize(image, size)                                                                                                                                                                |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/libvirt/driver.py\\\", line 7257, in _disk_resize                                                                                                                |\n|                                      |     disk.extend(image, size)                                                                                                                                                                      |\n|                                      |   File \\\"/opt/stack/nova/nova/virt/disk/api.py\\\", line 164, in extend                                                                                                                             |\n|                                      |     utils.execute('qemu-img', 'resize', image.path, size)                                                                                                                                         |\n|                                      |   File \\\"/opt/stack/nova/nova/utils.py\\\", line 390, in execute                                                                                                                                    |\n|                                      |     return processutils.execute(*cmd, **kwargs)                                                                                                                                                   |\n|                                      |   File \\\"/usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py\\\", line 371, in execute                                                                                                |\n|                                      |     cmd=sanitized_cmd)                                                                                                                                                                            |\n|                                      | \", \"created\": \"2016-02-26T09:13:10Z\"}                                                                                                                                                             |\n| flavor                               | m1.tiny (1)                                                                                                                                                                                       |\n| hostId                               | 2ab310e3cace7ca941aebce9d65872ac43608e14c1554f6a6c8524e2                                                                                                                                          |\n| id                                   | 21170da3-f45f-4c47-9625-5e916b84c5b9                                                                                                                                                              |\n| image                                | cirros-0.3.4-x86_64-uec (5e59aed6-4535-4f7d-9fec-4682a2466308)                                                                                                                                    |\n| key_name                             | -                                                                                                                                                                                                 |\n| locked                               | False                                                                                                                                                                                             |\n| metadata                             | {}                                                                                                                                                                                                |\n| name                                 | hanrong                                                                                                                                                                                           |\n| os-extended-volumes:volumes_attached | []                                                                                                                                                                                                |\n| private network                      | 10.0.0.4, fdbc:aa05:7e9e:0:f816:3eff:fe7a:d584                                                                                                                                                    |\n| security_groups                      | default                                                                                                                                                                                           |\n| status                               | ERROR                                                                                                                                                                                             |\n| tenant_id                            | 66abfcd2c32149c0bb3bf6137d49568b                                                                                                                                                                  |\n| updated                              | 2016-02-26T09:17:39Z                                                                                                                                                                              |\n| user_id                              | 7a77e73e0ccd4ced96b4c335fa920788                                                                                                                                                                  |\n+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n[root@localhost nova(keystone_admin)]# \n\n\n3. steps\n* I did modify nova.conf file and config allow_resize_to_same_host is true.\n[root@localhost nova(keystone_admin)]# cat /etc/nova/nova.conf | grep same\nallow_resize_to_same_host = True\n\n* then I created a new flavor named \"harnong\" with Disk is 2 which is different with \"m1.tiny\" flavor 's disk.\n\n[root@localhost nova(keystone_admin)]# nova flavor-list\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n| ID  | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public |\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n| 1   | m1.tiny   | 512       | 1    | 0         |      | 1     | 1.0         | True      |\n| 111 | hanrong   | 512       | 2    | 0         |      | 1     | 1.0         | True      |\n\n* then I created a server named \"test_resize\" using flavor \"m1.tiny\"  and waited for this server is running.\n\n[root@localhost nova(keystone_admin)]# nova boot --image 5e59aed6-4535-4f7d-9fec-4682a2466308 --flavor m1.tiny --nic net-id=9b0f9b63-47d8-417c-98d9-95404ca19ccb hanrong\n\n\n*  then I did resize operation and server was error.\n[root@localhost nova(keystone_admin)]# nova resize  21170da3-f45f-4c47-9625-5e916b84c5b9 111\n\n[root@localhost nova(keystone_admin)]# nova list\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name      | Status | Task State | Power State | Networks                                               |\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n| 21170da3-f45f-4c47-9625-5e916b84c5b9 | hanrong   | ERROR  | -          | Shutdown    | private=10.0.0.4, fdbc:aa05:7e9e:0:f816:3eff:fe7a:d584 |\n| ef5b591f-a076-4c00-a503-14152fdcc142 | instance3 | ACTIVE | -          | Running     | private=10.0.0.3, fdbc:aa05:7e9e:0:f816:3eff:fe14:79a4 |\n+--------------------------------------+-----------+--------+------------+-------------+--------------------------------------------------------+\n\n\nExpected result:\nI expect resize with different disk at the same host is successful.", 
            "date_created": "2016-02-29 04:00:13.583062+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "I guess the file's Permission is not corrent.\n\nthe new file in new folder is :\n[root@localhost 21170da3-f45f-4c47-9625-5e916b84c5b9]# ll\ntotal 11052\n-rw-r--r--. 1 root libvirtd 10878976 Feb 26 04:12 disk\n-rw-r--r--. 1 root libvirtd   438272 Feb 26 04:12 disk.config", 
            "date_created": "2016-02-29 04:03:46.620800+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "detail log:\n016-02-26 04:13:10.428 ERROR nova.compute.manager [req-2dc29fec-e8eb-448c-977c-c468dad5d19a admin admin] [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Setting instance vm_state to ERROR\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Traceback (most recent call last):\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 4009, in finish_resize\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     disk_info, image_meta)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3974, in _finish_resize\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     old_instance_type)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     self.force_reraise()\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     six.reraise(self.type_, self.value, self.tb)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/compute/manager.py\", line 3969, in _finish_resize\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     block_device_info, power_on)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 7276, in finish_migration\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     self._disk_resize(image, size)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 7257, in _disk_resize\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     disk.extend(image, size)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/virt/disk/api.py\", line 164, in extend\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     utils.execute('qemu-img', 'resize', image.path, size)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/opt/stack/nova/nova/utils.py\", line 390, in execute\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     return processutils.execute(*cmd, **kwargs)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]   File \"/usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py\", line 371, in execute\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9]     cmd=sanitized_cmd)\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] ProcessExecutionError: Unexpected error while running command.\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Command: qemu-img resize /opt/stack/data/nova/instances/21170da3-f45f-4c47-9625-5e916b84c5b9/disk 2147483648\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Exit code: 1\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Stdout: u''\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] Stderr: u\"qemu-img: Could not open '/opt/stack/data/nova/instances/21170da3-f45f-4c47-9625-5e916b84c5b9/disk': Could not open '/opt/stack/data/nova/instances/21170da3-f45f-4c47-9625-5e916b84c5b9/disk': Permission denied\\n\"\n2016-02-26 04:13:10.428 TRACE nova.compute.manager [instance: 21170da3-f45f-4c47-9625-5e916b84c5b9] ", 
            "date_created": "2016-02-29 04:04:15.605014+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "Could you please provide command that have created flavor?", 
            "date_created": "2016-03-07 16:40:58.679173+00:00", 
            "author": "https://api.launchpad.net/1.0/~gstepanov"
        }, 
        {
            "content": "I've did the same thing\n\n1. boot vm in tiny flavor\n2. create flavor like a tiny, but with 2GB size.\n3. resize it( allow_resoze_on_the_same_host = True)\n4. nova resize-confirm <instance>\n\nIt was successfully resized.\n\nOwnership is following\n\n-rw-r--r-- 1 libvirt-qemu kvm      10682880 Mar 10 16:10 disk\n-rw-r--r-- 1 stack        libvirtd      257 Mar 10 16:09 disk.info\n-rw-r--r-- 1 libvirt-qemu kvm       4979632 Mar 10 16:09 kernel\n-rw-r--r-- 1 stack        libvirtd     2869 Mar 10 16:09 libvirt.xml\n-rw-r--r-- 1 libvirt-qemu kvm       3740163 Mar 10 16:09 ramdisk\n\nSo, maybe you've done anything with disks manually? \n\n", 
            "date_created": "2016-03-10 16:31:44.085345+00:00", 
            "author": "https://api.launchpad.net/1.0/~gstepanov"
        }, 
        {
            "content": "Sorry, my environment destroyed, now don't reproduce.", 
            "date_created": "2016-03-15 01:29:54.872851+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }
    ], 
    "closed": "2016-03-15 01:30:07.445746+00:00"
}