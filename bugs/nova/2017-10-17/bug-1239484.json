{
    "status": "Won't Fix", 
    "last_updated": "2015-03-24 16:17:54.636154+00:00", 
    "description": "I recently upgraded a Nova cluster from grizzly to havana. We're using the Ubuntu Cloud Archive and so in terms of package versions the upgrade was from 1:2013.1.3-0ubuntu1~cloud0 to 1:2013.2~rc2-0ubuntu1~cloud0.  We're using mysql-server-5.5 5.5.32-0ubuntu0.12.04.1 from Ubuntu 12.04 LTS.\n\nAfter the upgrade, \"nova-manage db sync\" failed as follows:\n\n# nova-manage db sync\n2013-10-13 21:08:54.132 26592 INFO migrate.versioning.api [-] 161 -> 162...\n2013-10-13 21:08:54.138 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.140 26592 INFO migrate.versioning.api [-] 162 -> 163...\n2013-10-13 21:08:54.145 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.146 26592 INFO migrate.versioning.api [-] 163 -> 164...\n2013-10-13 21:08:54.154 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.154 26592 INFO migrate.versioning.api [-] 164 -> 165...\n2013-10-13 21:08:54.162 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.162 26592 INFO migrate.versioning.api [-] 165 -> 166...\n2013-10-13 21:08:54.167 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.170 26592 INFO migrate.versioning.api [-] 166 -> 167...\n2013-10-13 21:08:54.175 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.176 26592 INFO migrate.versioning.api [-] 167 -> 168...\n2013-10-13 21:08:54.184 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.184 26592 INFO migrate.versioning.api [-] 168 -> 169...\n2013-10-13 21:08:54.189 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.189 26592 INFO migrate.versioning.api [-] 169 -> 170...\n2013-10-13 21:08:54.199 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.199 26592 INFO migrate.versioning.api [-] 170 -> 171...\n2013-10-13 21:08:54.204 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.205 26592 INFO migrate.versioning.api [-] 171 -> 172...\n2013-10-13 21:08:54.841 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.842 26592 INFO migrate.versioning.api [-] 172 -> 173...\n2013-10-13 21:08:54.883 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 409 from table: key_pairs\n2013-10-13 21:08:54.888 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 257 from table: key_pairs\n2013-10-13 21:08:54.889 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 383 from table: key_pairs\n2013-10-13 21:08:54.897 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 22 from table: key_pairs\n2013-10-13 21:08:54.905 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 65 from table: key_pairs\n2013-10-13 21:08:54.911 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 106 from table: key_pairs\n2013-10-13 21:08:54.911 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 389 from table: key_pairs\n2013-10-13 21:08:54.923 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 205 from table: key_pairs\n2013-10-13 21:08:54.928 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 259 from table: key_pairs\n2013-10-13 21:08:54.934 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 127 from table: key_pairs\n2013-10-13 21:08:54.946 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 337 from table: key_pairs\n2013-10-13 21:08:54.951 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 251 from table: key_pairs\n2013-10-13 21:08:54.991 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.991 26592 INFO migrate.versioning.api [-] 173 -> 174...\n2013-10-13 21:08:55.052 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.053 26592 INFO migrate.versioning.api [-] 174 -> 175...\n2013-10-13 21:08:55.146 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.147 26592 INFO migrate.versioning.api [-] 175 -> 176...\n2013-10-13 21:08:55.171 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.172 26592 INFO migrate.versioning.api [-] 176 -> 177...\n2013-10-13 21:08:55.236 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.237 26592 INFO migrate.versioning.api [-] 177 -> 178...\n2013-10-13 21:08:55.635 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.636 26592 INFO migrate.versioning.api [-] 178 -> 179...\n2013-10-13 21:08:55.692 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.692 26592 INFO migrate.versioning.api [-] 179 -> 180...\n2013-10-13 21:08:55.734 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.734 26592 INFO migrate.versioning.api [-] 180 -> 181...\n2013-10-13 21:08:55.786 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.786 26592 INFO migrate.versioning.api [-] 181 -> 182...\n2013-10-13 21:08:55.829 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.830 26592 INFO migrate.versioning.api [-] 182 -> 183...\n2013-10-13 21:08:55.872 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.874 26592 INFO migrate.versioning.api [-] 183 -> 184...\n2013-10-13 21:08:56.092 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:56.093 26592 INFO migrate.versioning.api [-] 184 -> 185...\nCommand failed, please check log for more info\n2013-10-13 21:09:00.315 26592 CRITICAL nova [-] (OperationalError) (1553, \"Cannot drop index 'uniq_instance_type_id_x_project_id_x_deleted': needed in a foreign key constraint\") 'ALTER TABLE instance_type_projects DROP INDEX uniq_instance_type_id_x_project_id_x_deleted' ()\n2013-10-13 21:09:00.315 26592 TRACE nova Traceback (most recent call last):\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/bin/nova-manage\", line 10, in <module>\n2013-10-13 21:09:00.315 26592 TRACE nova     sys.exit(main())\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/cmd/manage.py\", line 1377, in main\n2013-10-13 21:09:00.315 26592 TRACE nova     ret = fn(*fn_args, **fn_kwargs)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/cmd/manage.py\", line 885, in sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return migration.db_sync(version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 33, in db_sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return IMPL.db_sync(version=version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 75, in db_sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-10-13 21:09:00.315 26592 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 40, in patched_with_engine\n2013-10-13 21:09:00.315 26592 TRACE nova     return f(*a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-10-13 21:09:00.315 26592 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-10-13 21:09:00.315 26592 TRACE nova     change.run(self.engine, step)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/py.py\", line 145, in run\n2013-10-13 21:09:00.315 26592 TRACE nova     script_func(engine)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migrate_repo/versions/185_rename_unique_constraints.py\", line 129, in upgrade\n2013-10-13 21:09:00.315 26592 TRACE nova     return _uc_rename(migrate_engine, upgrade=True)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migrate_repo/versions/185_rename_unique_constraints.py\", line 112, in _uc_rename\n2013-10-13 21:09:00.315 26592 TRACE nova     old_name, *(columns))\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/utils.py\", line 197, in drop_unique_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     uc.drop()\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/constraint.py\", line 59, in drop\n2013-10-13 21:09:00.315 26592 TRACE nova     self.__do_imports('constraintdropper', *a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/constraint.py\", line 32, in __do_imports\n2013-10-13 21:09:00.315 26592 TRACE nova     run_single_visitor(engine, visitorcallable, self, *a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/visitor.py\", line 75, in run_single_visitor\n2013-10-13 21:09:00.315 26592 TRACE nova     fn(element, **kwargs)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 272, in visit_migrate_unique_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     self._visit_constraint(*p, **k)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 284, in _visit_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     self.execute()\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 42, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     return self.connection.execute(self.buffer.getvalue())\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 662, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     params)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 805, in _execute_text\n2013-10-13 21:09:00.315 26592 TRACE nova     statement, parameters\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 874, in _execute_context\n2013-10-13 21:09:00.315 26592 TRACE nova     context)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1024, in _handle_dbapi_exception\n2013-10-13 21:09:00.315 26592 TRACE nova     exc_info\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 195, in raise_from_cause\n2013-10-13 21:09:00.315 26592 TRACE nova     reraise(type(exception), exception, tb=exc_tb)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 867, in _execute_context\n2013-10-13 21:09:00.315 26592 TRACE nova     context)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 324, in do_execute\n2013-10-13 21:09:00.315 26592 TRACE nova     cursor.execute(statement, parameters)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py\", line 174, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     self.errorhandler(self, exc, value)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n2013-10-13 21:09:00.315 26592 TRACE nova     raise errorclass, errorvalue\n2013-10-13 21:09:00.315 26592 TRACE nova OperationalError: (OperationalError) (1553, \"Cannot drop index 'uniq_instance_type_id_x_project_id_x_deleted': needed in a foreign key constraint\") 'ALTER TABLE instance_type_projects DROP INDEX uniq_instance_type_id_x_project_id_x_deleted' ()\n2013-10-13 21:09:00.315 26592 TRACE nova\n\nAfter some investigation I decided to fix it as follows:\n\nmysql> show create table instance_type_projects;\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table                  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| instance_type_projects | CREATE TABLE `instance_type_projects` (\n\u00a0\u00a0`created_at` datetime DEFAULT NULL,\n\u00a0\u00a0`updated_at` datetime DEFAULT NULL,\n\u00a0\u00a0`deleted_at` datetime DEFAULT NULL,\n\u00a0\u00a0`id` int(11) NOT NULL AUTO_INCREMENT,\n\u00a0\u00a0`instance_type_id` int(11) NOT NULL,\n\u00a0\u00a0`project_id` varchar(255) DEFAULT NULL,\n\u00a0\u00a0`deleted` int(11) DEFAULT NULL,\n\u00a0\u00a0PRIMARY KEY (`id`),\n\u00a0\u00a0UNIQUE KEY `uniq_instance_type_id_x_project_id_x_deleted` (`instance_type_id`,`project_id`,`deleted`),\n\u00a0\u00a0CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nmysql> alter table instance_type_projects drop foreign key instance_type_projects_ibfk_1;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects drop index uniq_instance_type_id_x_project_id_x_deleted;\nQuery OK, 0 rows affected (0.00 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects add UNIQUE KEY `uniq_instance_type_projects0instance_type_id0project_id0deleted` (`instance_type_id`,`project_id`,`deleted`);\nQuery OK, 0 rows affected (0.02 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects add constraint `instance_type_projects_ibfk_1` foreign key (`instance_type_id`) references `instance_types` (`id`);\nQuery OK, 0 rows affected (0.00 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> show create table instance_type_projects;\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table                  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| instance_type_projects | CREATE TABLE `instance_type_projects` (\n\u00a0\u00a0`created_at` datetime DEFAULT NULL,\n\u00a0\u00a0`updated_at` datetime DEFAULT NULL,\n\u00a0\u00a0`deleted_at` datetime DEFAULT NULL,\n\u00a0\u00a0`id` int(11) NOT NULL AUTO_INCREMENT,\n\u00a0\u00a0`instance_type_id` int(11) NOT NULL,\n\u00a0\u00a0`project_id` varchar(255) DEFAULT NULL,\n\u00a0\u00a0`deleted` int(11) DEFAULT NULL,\n\u00a0\u00a0PRIMARY KEY (`id`),\n\u00a0\u00a0UNIQUE KEY `uniq_instance_type_projects0instance_type_id0project_id0deleted` (`instance_type_id`,`project_id`,`deleted`),\n\u00a0\u00a0CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nI checked that the rest of 185 was applied, bumped the version in the DB to 185, and a second run of \"nova-manage db sync\" completed without incident.", 
    "tags": [
        "canonistack", 
        "db", 
        "havana-backport-potential"
    ], 
    "importance": "Wishlist", 
    "heat": 26, 
    "link": "https://bugs.launchpad.net/nova/+bug/1239484", 
    "owner": "https://api.launchpad.net/1.0/~gtt116", 
    "id": 1239484, 
    "index": 2699, 
    "openned": "2013-10-14 01:41:12.390963+00:00", 
    "created": "2013-10-14 01:41:12.390963+00:00", 
    "title": "failed nova db migration upgrading from grizzly to havana", 
    "comments": [
        {
            "content": "I recently upgraded a Nova cluster from grizzly to havana. We're using the Ubuntu Cloud Archive and so in terms of package versions the upgrade was from 1:2013.1.3-0ubuntu1~cloud0 to 1:2013.2~rc2-0ubuntu1~cloud0.  After the upgrade, \"nova-manage db sync\" failed as follows:\n\n# nova-manage db sync\n2013-10-13 21:08:54.132 26592 INFO migrate.versioning.api [-] 161 -> 162...\n2013-10-13 21:08:54.138 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.140 26592 INFO migrate.versioning.api [-] 162 -> 163...\n2013-10-13 21:08:54.145 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.146 26592 INFO migrate.versioning.api [-] 163 -> 164...\n2013-10-13 21:08:54.154 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.154 26592 INFO migrate.versioning.api [-] 164 -> 165...\n2013-10-13 21:08:54.162 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.162 26592 INFO migrate.versioning.api [-] 165 -> 166...\n2013-10-13 21:08:54.167 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.170 26592 INFO migrate.versioning.api [-] 166 -> 167...\n2013-10-13 21:08:54.175 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.176 26592 INFO migrate.versioning.api [-] 167 -> 168...\n2013-10-13 21:08:54.184 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.184 26592 INFO migrate.versioning.api [-] 168 -> 169...\n2013-10-13 21:08:54.189 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.189 26592 INFO migrate.versioning.api [-] 169 -> 170...\n2013-10-13 21:08:54.199 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.199 26592 INFO migrate.versioning.api [-] 170 -> 171...\n2013-10-13 21:08:54.204 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.205 26592 INFO migrate.versioning.api [-] 171 -> 172...\n2013-10-13 21:08:54.841 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.842 26592 INFO migrate.versioning.api [-] 172 -> 173...\n2013-10-13 21:08:54.883 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 409 from table: key_pairs\n2013-10-13 21:08:54.888 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 257 from table: key_pairs\n2013-10-13 21:08:54.889 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 383 from table: key_pairs\n2013-10-13 21:08:54.897 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 22 from table: key_pairs\n2013-10-13 21:08:54.905 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 65 from table: key_pairs\n2013-10-13 21:08:54.911 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 106 from table: key_pairs\n2013-10-13 21:08:54.911 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 389 from table: key_pairs\n2013-10-13 21:08:54.923 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 205 from table: key_pairs\n2013-10-13 21:08:54.928 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 259 from table: key_pairs\n2013-10-13 21:08:54.934 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 127 from table: key_pairs\n2013-10-13 21:08:54.946 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 337 from table: key_pairs\n2013-10-13 21:08:54.951 26592 INFO nova.db.sqlalchemy.utils [-] Deleted duplicated row with id: 251 from table: key_pairs\n2013-10-13 21:08:54.991 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:54.991 26592 INFO migrate.versioning.api [-] 173 -> 174...\n2013-10-13 21:08:55.052 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.053 26592 INFO migrate.versioning.api [-] 174 -> 175...\n2013-10-13 21:08:55.146 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.147 26592 INFO migrate.versioning.api [-] 175 -> 176...\n2013-10-13 21:08:55.171 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.172 26592 INFO migrate.versioning.api [-] 176 -> 177...\n2013-10-13 21:08:55.236 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.237 26592 INFO migrate.versioning.api [-] 177 -> 178...\n2013-10-13 21:08:55.635 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.636 26592 INFO migrate.versioning.api [-] 178 -> 179...\n2013-10-13 21:08:55.692 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.692 26592 INFO migrate.versioning.api [-] 179 -> 180...\n2013-10-13 21:08:55.734 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.734 26592 INFO migrate.versioning.api [-] 180 -> 181...\n2013-10-13 21:08:55.786 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.786 26592 INFO migrate.versioning.api [-] 181 -> 182...\n2013-10-13 21:08:55.829 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.830 26592 INFO migrate.versioning.api [-] 182 -> 183...\n2013-10-13 21:08:55.872 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:55.874 26592 INFO migrate.versioning.api [-] 183 -> 184...\n2013-10-13 21:08:56.092 26592 INFO migrate.versioning.api [-] done\n2013-10-13 21:08:56.093 26592 INFO migrate.versioning.api [-] 184 -> 185...\nCommand failed, please check log for more info\n2013-10-13 21:09:00.315 26592 CRITICAL nova [-] (OperationalError) (1553, \"Cannot drop index 'uniq_instance_type_id_x_project_id_x_deleted': needed in a foreign key constraint\") 'ALTER TABLE instance_type_projects DROP INDEX uniq_instance_type_id_x_project_id_x_deleted' ()\n2013-10-13 21:09:00.315 26592 TRACE nova Traceback (most recent call last):\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/bin/nova-manage\", line 10, in <module>\n2013-10-13 21:09:00.315 26592 TRACE nova     sys.exit(main())\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/cmd/manage.py\", line 1377, in main\n2013-10-13 21:09:00.315 26592 TRACE nova     ret = fn(*fn_args, **fn_kwargs)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/cmd/manage.py\", line 885, in sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return migration.db_sync(version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/migration.py\", line 33, in db_sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return IMPL.db_sync(version=version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 75, in db_sync\n2013-10-13 21:09:00.315 26592 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 186, in upgrade\n2013-10-13 21:09:00.315 26592 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migration.py\", line 40, in patched_with_engine\n2013-10-13 21:09:00.315 26592 TRACE nova     return f(*a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/api.py\", line 366, in _migrate\n2013-10-13 21:09:00.315 26592 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/schema.py\", line 91, in runchange\n2013-10-13 21:09:00.315 26592 TRACE nova     change.run(self.engine, step)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/versioning/script/py.py\", line 145, in run\n2013-10-13 21:09:00.315 26592 TRACE nova     script_func(engine)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migrate_repo/versions/185_rename_unique_constraints.py\", line 129, in upgrade\n2013-10-13 21:09:00.315 26592 TRACE nova     return _uc_rename(migrate_engine, upgrade=True)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/migrate_repo/versions/185_rename_unique_constraints.py\", line 112, in _uc_rename\n2013-10-13 21:09:00.315 26592 TRACE nova     old_name, *(columns))\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/utils.py\", line 197, in drop_unique_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     uc.drop()\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/constraint.py\", line 59, in drop\n2013-10-13 21:09:00.315 26592 TRACE nova     self.__do_imports('constraintdropper', *a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/constraint.py\", line 32, in __do_imports\n2013-10-13 21:09:00.315 26592 TRACE nova     run_single_visitor(engine, visitorcallable, self, *a, **kw)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/databases/visitor.py\", line 75, in run_single_visitor\n2013-10-13 21:09:00.315 26592 TRACE nova     fn(element, **kwargs)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 272, in visit_migrate_unique_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     self._visit_constraint(*p, **k)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 284, in _visit_constraint\n2013-10-13 21:09:00.315 26592 TRACE nova     self.execute()\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/migrate/changeset/ansisql.py\", line 42, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     return self.connection.execute(self.buffer.getvalue())\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 662, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     params)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 805, in _execute_text\n2013-10-13 21:09:00.315 26592 TRACE nova     statement, parameters\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 874, in _execute_context\n2013-10-13 21:09:00.315 26592 TRACE nova     context)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1024, in _handle_dbapi_exception\n2013-10-13 21:09:00.315 26592 TRACE nova     exc_info\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 195, in raise_from_cause\n2013-10-13 21:09:00.315 26592 TRACE nova     reraise(type(exception), exception, tb=exc_tb)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 867, in _execute_context\n2013-10-13 21:09:00.315 26592 TRACE nova     context)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 324, in do_execute\n2013-10-13 21:09:00.315 26592 TRACE nova     cursor.execute(statement, parameters)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py\", line 174, in execute\n2013-10-13 21:09:00.315 26592 TRACE nova     self.errorhandler(self, exc, value)\n2013-10-13 21:09:00.315 26592 TRACE nova   File \"/usr/lib/python2.7/dist-packages/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n2013-10-13 21:09:00.315 26592 TRACE nova     raise errorclass, errorvalue\n2013-10-13 21:09:00.315 26592 TRACE nova OperationalError: (OperationalError) (1553, \"Cannot drop index 'uniq_instance_type_id_x_project_id_x_deleted': needed in a foreign key constraint\") 'ALTER TABLE instance_type_projects DROP INDEX uniq_instance_type_id_x_project_id_x_deleted' ()\n2013-10-13 21:09:00.315 26592 TRACE nova\n\nAfter some investigation I decided to fix it as follows:\n\nmysql> show create table instance_type_projects;\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table                  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| instance_type_projects | CREATE TABLE `instance_type_projects` (\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  `deleted_at` datetime DEFAULT NULL,\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `instance_type_id` int(11) NOT NULL,\n  `project_id` varchar(255) DEFAULT NULL,\n  `deleted` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uniq_instance_type_id_x_project_id_x_deleted` (`instance_type_id`,`project_id`,`deleted`),\n  CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nmysql> alter table instance_type_projects drop foreign key instance_type_projects_ibfk_1;                                                                                            \nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects drop index uniq_instance_type_id_x_project_id_x_deleted;\nQuery OK, 0 rows affected (0.00 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects add UNIQUE KEY `uniq_instance_type_projects0instance_type_id0project_id0deleted` (`instance_type_id`,`project_id`,`deleted`);\nQuery OK, 0 rows affected (0.02 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> alter table instance_type_projects add constraint `instance_type_projects_ibfk_1` foreign key (`instance_type_id`) references `instance_types` (`id`);\nQuery OK, 0 rows affected (0.00 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> show create table instance_type_projects;\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table                  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| instance_type_projects | CREATE TABLE `instance_type_projects` (\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  `deleted_at` datetime DEFAULT NULL,\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `instance_type_id` int(11) NOT NULL,\n  `project_id` varchar(255) DEFAULT NULL,\n  `deleted` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uniq_instance_type_projects0instance_type_id0project_id0deleted` (`instance_type_id`,`project_id`,`deleted`),\n  CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nI checked that the rest of 185 was applied, bumped the version in the DB to 185, and a second run of \"nova-manage db sync\" completed without incident.", 
            "date_created": "2013-10-14 01:41:12.390963+00:00", 
            "author": "https://api.launchpad.net/1.0/~pjdc"
        }, 
        {
            "content": "Ok, so this is odd, but known behavior of MySQL.\n\nLet's consider the following example:\n\nmysql> create table testtbl (a integer primary key);\nQuery OK, 0 rows affected (0.09 sec)\n\nmysql> create table testtbl2 (a integer primary key, b varchar(36), c integer, foreign key test_fk (c) references testtbl (a));\nQuery OK, 0 rows affected (0.09 sec)\n\nmysql> alter table testtbl2 add constraint unique test_unique (c, b);\nQuery OK, 0 rows affected (0.15 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> show create table testtbl2;\n| testtbl2 | CREATE TABLE `testtbl2` (\n  `a` int(11) NOT NULL,\n  `b` varchar(36) DEFAULT NULL,\n  `c` int(11) DEFAULT NULL,\n  PRIMARY KEY (`a`),\n  KEY `test_idx` (`c`),\n  CONSTRAINT `testtbl2_ibfk_1` FOREIGN KEY (`c`) REFERENCES `testtbl` (`a`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n1 row in set (0.00 sec)\n\nmysql> alter table testtbl2 drop index test_unique;\nERROR 1553 (HY000): Cannot drop index 'test_unique': needed in a foreign key constraint\n\nso if we want to drop the UC, we have to drop the FK first, then drop the UC, and finally recreate the FK.\n\nBut:\n\nmysql> create index test_idx on testtbl2 (c);\nQuery OK, 0 rows affected (0.13 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql>  alter table testtbl2 drop index test_unique;\nQuery OK, 0 rows affected (0.07 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nReturning to our problem. The reporter shown his definition of 'instance_type_projects' table with migration 184 applied:\n\nCREATE TABLE `instance_type_projects` (\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  `deleted_at` datetime DEFAULT NULL,\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `instance_type_id` int(11) NOT NULL,\n  `project_id` varchar(255) DEFAULT NULL,\n  `deleted` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uniq_instance_type_id_x_project_id_x_deleted` (`instance_type_id`,`project_id`,`deleted`),\n  CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n\nAt the same time applying of all migrations from 133 (initial one) to 184 gives me the following definition:\n\nCREATE TABLE `instance_type_projects` (\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  `deleted_at` datetime DEFAULT NULL,\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `instance_type_id` int(11) NOT NULL,\n  `project_id` varchar(255) DEFAULT NULL,\n  `deleted` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uniq_instance_type_id_x_project_id_x_deleted` (`instance_type_id`,`project_id`,`deleted`),\n  KEY `instance_type_id` (`instance_type_id`),\n  CONSTRAINT `instance_type_projects_ibfk_1` FOREIGN KEY (`instance_type_id`) REFERENCES `instance_types` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n\nSo, for some reason the reporter doesn't have index on column 'instance_type_id' ( KEY `instance_type_id` (`instance_type_id`)). This explains the fact, that our migrations tests pass. That index is created in the initial migration (133_folsom.py) and doesn't see m to be modified anywhere.\n\nCould you please give us more information on your setup? Have you modified you DB schema manually (created/deleted indexes/constraints)?", 
            "date_created": "2013-10-15 14:45:24.268255+00:00", 
            "author": "https://api.launchpad.net/1.0/~rpodolyaka"
        }, 
        {
            "content": "I can reproduct  it.\n\nWhen I upgrade from folsom to grizzly, then to havana, I meet the issue. But, in a clean environment, install a grizzly, then upgrade to havana, every thing is fine.\n", 
            "date_created": "2013-11-19 06:33:57.509130+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "Before running nova-manage db sync, execute below sql command will quick fix it:\n\ncreate index `instance_type_id` on instance_type_projects (`instance_type_id`);", 
            "date_created": "2013-11-19 06:39:10.834595+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "@Tiantian\n\nIs there any chance you can provide us with a dump of the DB schema just before you run folsom -> grizzly update? (only DB schema, not data rows, of course)", 
            "date_created": "2013-11-19 06:39:34.502579+00:00", 
            "author": "https://api.launchpad.net/1.0/~rpodolyaka"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/57108", 
            "date_created": "2013-11-19 07:22:22.154058+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "@Roman, Sure,   the schema is in attachment.\n\nBut what confuse me is when I setup database with sqldump file, upgrading is successful. \nWhile using folsom version code, running nova-manage db sync to setup database, this bug will happen.", 
            "date_created": "2013-11-19 07:31:54.878621+00:00", 
            "author": "https://api.launchpad.net/1.0/~gtt116"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/66255", 
            "date_created": "2014-01-13 02:59:16.720770+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "I just hit the exact same issue here, upgrading from folsom to havana. The \u2018instance_type_id\u2019 index somehow lost in 173->174 migration.\n\nAnd the same with Tiantian, it happens with clean sync of folsom db model, then upgrade. However, with mysql dump and restore of Folsom database schema, then the issue is gone.", 
            "date_created": "2014-04-01 14:35:57.982994+00:00", 
            "author": "https://api.launchpad.net/1.0/~unicell"
        }, 
        {
            "content": "Is this still in progress?  There are no updates in 3 months.", 
            "date_created": "2014-07-03 16:55:30.228621+00:00", 
            "author": "https://api.launchpad.net/1.0/~tjones-i"
        }, 
        {
            "content": "Honestly, upgrade up from Folsom is pretty out of scope now, as the folsom and grizzly branches have been eoled, and havana is eol in a couple of weeks.", 
            "date_created": "2014-09-03 14:39:24.535325+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Change abandoned by Alan Pevec (<email address hidden>) on branch: stable/havana\nReview: https://review.openstack.org/66255\nReason: Edge case, workaround available in https://bugs.launchpad.net/nova/+bug/1239484/comments/3", 
            "date_created": "2014-09-19 10:25:39.311547+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Grizzly and Havana are now both EOL in the cloud archive - marking won't fix.", 
            "date_created": "2015-03-24 16:17:54.062948+00:00", 
            "author": "https://api.launchpad.net/1.0/~james-page"
        }
    ], 
    "closed": "2014-09-03 14:38:32.691794+00:00"
}