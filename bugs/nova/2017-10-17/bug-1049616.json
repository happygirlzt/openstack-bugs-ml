{
    "status": "Won't Fix", 
    "last_updated": "2012-12-13 15:26:20.246196+00:00", 
    "description": "When nova is set to use QuantumManager as its network manager both nova-compute and nova-network fail to start:\n\n\n/etc/nova/nova.conf\nnetwork_manager=quantum.manager.QuantumManager\n\n\n/etc/quantum/quantum.conf\ncore_plugin = quantum.plugins.openvswitch.ovs_quantum_plugin.OVSQuantumPluginV2\n\n\n/var/log/upstart/nova-network.log\nSession terminated, terminating shell... ...terminated.\n2012-09-12 12:05:05 CRITICAL nova [-] __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-network\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova TypeError: __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova\n__init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-network\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova TypeError: __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova\n\n\n/var/log/upstart/nova-compute.log\n2012-09-12 12:05:05 CRITICAL nova [-] no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-compute\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-compute')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 236, in __init__\n2012-09-12 12:05:05 TRACE nova     self.network_manager = importutils.import_object(FLAGS.network_manager)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 40, in import_object\n2012-09-12 12:05:05 TRACE nova     return import_class(import_str)(*args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/manager.py\", line 49, in __init__\n2012-09-12 12:05:05 TRACE nova     plugin_provider = cfg.CONF.core_plugin\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1039, in __getattr__\n2012-09-12 12:05:05 TRACE nova     return self._get(name)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1361, in _get\n2012-09-12 12:05:05 TRACE nova     value = self._substitute(self._do_get(name, group))\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1377, in _do_get\n2012-09-12 12:05:05 TRACE nova     info = self._get_opt_info(name, group)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1470, in _get_opt_info\n2012-09-12 12:05:05 TRACE nova     raise NoSuchOptError(opt_name, group)\n2012-09-12 12:05:05 TRACE nova NoSuchOptError: no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova\nno such option: core_plugin\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-compute\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-compute')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 236, in __init__\n2012-09-12 12:05:05 TRACE nova     self.network_manager = importutils.import_object(FLAGS.network_manager)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 40, in import_object\n2012-09-12 12:05:05 TRACE nova     return import_class(import_str)(*args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/manager.py\", line 49, in __init__\n2012-09-12 12:05:05 TRACE nova     plugin_provider = cfg.CONF.core_plugin\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1039, in __getattr__\n2012-09-12 12:05:05 TRACE nova     return self._get(name)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1361, in _get\n2012-09-12 12:05:05 TRACE nova     value = self._substitute(self._do_get(name, group))\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1377, in _do_get\n2012-09-12 12:05:05 TRACE nova     info = self._get_opt_info(name, group)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1470, in _get_opt_info\n2012-09-12 12:05:05 TRACE nova     raise NoSuchOptError(opt_name, group)\n2012-09-12 12:05:05 TRACE nova NoSuchOptError: no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova\n\n\n\n\nUbuntu-12.04 - 3.2.0-29-generic\nii  nova-api                                     2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - API frontend\nii  nova-cert                                    2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - certificate management\nii  nova-common                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - common files\nii  nova-compute                                 2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - compute node\nii  nova-compute-kvm                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - compute node (KVM)\nii  nova-consoleauth                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - Console Authenticator\nii  nova-doc                                     2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - documentation\nii  nova-network                                 2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - Network manager\nii  nova-objectstore                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - object store\nii  nova-scheduler                               2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - virtual machine scheduler\nii  nova-volume                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - storage\nii  python-nova                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute Python libraries\nii  python-novaclient                            1:2.8.0.7+git201209101430~precise-0ubuntu1          client library for OpenStack Compute API\nii  python-quantum                               2012.2+git201209102130~precise-0ubuntu1             Quantum is a virutal network service for Openstack. (python library)\nii  python-quantumclient                         1:2.0.5+git201208141232~precise-0ubuntu1            client - Quantum is a virtual network service for Openstack\nii  quantum-common                               2012.2+git201209102130~precise-0ubuntu1             common - Quantum is a virtual network service for Openstack.\nii  quantum-plugin-nec                           2012.2+git201209102130~precise-0ubuntu1             Quantum is a virtual network service for Openstack. (NEC plugin)\nii  quantum-plugin-openvswitch                   2012.2+git201209102130~precise-0ubuntu1             Quantum is a virtual network service for Openstack. (openvswitch plugin)\nii  quantum-server                               2012.2+git201209102130~precise-0ubuntu1             server - Quantum is a virtual network service for Openstack", 
    "tags": [
        "quantum"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1049616", 
    "owner": "None", 
    "id": 1049616, 
    "index": 4355, 
    "openned": "2012-09-12 11:12:44.132958+00:00", 
    "created": "2012-09-12 11:12:44.132958+00:00", 
    "title": "nova-compute & nova-network crash when QuantumManager is set as network_manager", 
    "comments": [
        {
            "content": "When nova is set to use QuantumManager as its network manager both nova-compute and nova-network fail to start:\n\n\n/etc/nova/nova.conf\nnetwork_manager=quantum.manager.QuantumManager\n\n\n/etc/quantum/quantum.conf\ncore_plugin = quantum.plugins.openvswitch.ovs_quantum_plugin.OVSQuantumPluginV2\n\n\n/var/log/upstart/nova-network.log\nSession terminated, terminating shell... ...terminated.\n2012-09-12 12:05:05 CRITICAL nova [-] __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-network\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova TypeError: __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova\n__init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-network\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-network')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova TypeError: __init__() got an unexpected keyword argument 'host'\n2012-09-12 12:05:05 TRACE nova\n\n\n/var/log/upstart/nova-compute.log\n2012-09-12 12:05:05 CRITICAL nova [-] no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-compute\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-compute')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 236, in __init__\n2012-09-12 12:05:05 TRACE nova     self.network_manager = importutils.import_object(FLAGS.network_manager)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 40, in import_object\n2012-09-12 12:05:05 TRACE nova     return import_class(import_str)(*args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/manager.py\", line 49, in __init__\n2012-09-12 12:05:05 TRACE nova     plugin_provider = cfg.CONF.core_plugin\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1039, in __getattr__\n2012-09-12 12:05:05 TRACE nova     return self._get(name)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1361, in _get\n2012-09-12 12:05:05 TRACE nova     value = self._substitute(self._do_get(name, group))\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1377, in _do_get\n2012-09-12 12:05:05 TRACE nova     info = self._get_opt_info(name, group)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1470, in _get_opt_info\n2012-09-12 12:05:05 TRACE nova     raise NoSuchOptError(opt_name, group)\n2012-09-12 12:05:05 TRACE nova NoSuchOptError: no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova\nno such option: core_plugin\n2012-09-12 12:05:05 TRACE nova Traceback (most recent call last):\n2012-09-12 12:05:05 TRACE nova   File \"/usr/bin/nova-compute\", line 46, in <module>\n2012-09-12 12:05:05 TRACE nova     server = service.Service.create(binary='nova-compute')\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 492, in create\n2012-09-12 12:05:05 TRACE nova     periodic_fuzzy_delay=periodic_fuzzy_delay)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 387, in __init__\n2012-09-12 12:05:05 TRACE nova     self.manager = manager_class(host=self.host, *args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 236, in __init__\n2012-09-12 12:05:05 TRACE nova     self.network_manager = importutils.import_object(FLAGS.network_manager)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 40, in import_object\n2012-09-12 12:05:05 TRACE nova     return import_class(import_str)(*args, **kwargs)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/manager.py\", line 49, in __init__\n2012-09-12 12:05:05 TRACE nova     plugin_provider = cfg.CONF.core_plugin\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1039, in __getattr__\n2012-09-12 12:05:05 TRACE nova     return self._get(name)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1361, in _get\n2012-09-12 12:05:05 TRACE nova     value = self._substitute(self._do_get(name, group))\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1377, in _do_get\n2012-09-12 12:05:05 TRACE nova     info = self._get_opt_info(name, group)\n2012-09-12 12:05:05 TRACE nova   File \"/usr/lib/python2.7/dist-packages/quantum/openstack/common/cfg.py\", line 1470, in _get_opt_info\n2012-09-12 12:05:05 TRACE nova     raise NoSuchOptError(opt_name, group)\n2012-09-12 12:05:05 TRACE nova NoSuchOptError: no such option: core_plugin\n2012-09-12 12:05:05 TRACE nova\n\n\n\n\nUbuntu-12.04 - 3.2.0-29-generic\nii  nova-api                                     2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - API frontend\nii  nova-cert                                    2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - certificate management\nii  nova-common                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - common files\nii  nova-compute                                 2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - compute node\nii  nova-compute-kvm                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - compute node (KVM)\nii  nova-consoleauth                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - Console Authenticator\nii  nova-doc                                     2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - documentation\nii  nova-network                                 2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - Network manager\nii  nova-objectstore                             2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - object store\nii  nova-scheduler                               2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - virtual machine scheduler\nii  nova-volume                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute - storage\nii  python-nova                                  2012.2+git201209072153~precise-0ubuntu1             OpenStack Compute Python libraries\nii  python-novaclient                            1:2.8.0.7+git201209101430~precise-0ubuntu1          client library for OpenStack Compute API\nii  python-quantum                               2012.2+git201209102130~precise-0ubuntu1             Quantum is a virutal network service for Openstack. (python library)\nii  python-quantumclient                         1:2.0.5+git201208141232~precise-0ubuntu1            client - Quantum is a virtual network service for Openstack\nii  quantum-common                               2012.2+git201209102130~precise-0ubuntu1             common - Quantum is a virtual network service for Openstack.\nii  quantum-plugin-nec                           2012.2+git201209102130~precise-0ubuntu1             Quantum is a virtual network service for Openstack. (NEC plugin)\nii  quantum-plugin-openvswitch                   2012.2+git201209102130~precise-0ubuntu1             Quantum is a virtual network service for Openstack. (openvswitch plugin)\nii  quantum-server                               2012.2+git201209102130~precise-0ubuntu1             server - Quantum is a virtual network service for Openstack", 
            "date_created": "2012-09-12 11:12:44.132958+00:00", 
            "author": "https://api.launchpad.net/1.0/~msymonds"
        }, 
        {
            "content": "This bug is due to misconfiguration for network_manager in nova.conf.\nWe need to set a subclass of NetworkManager for network_manager.\n\nWhen quantum is enabled, we do not need to set network_manager explicitly since nova-network is not launched.\n(The default value is nova.network.manager.VlanManager, but we need not to change it)\n\n", 
            "date_created": "2012-09-13 13:20:49.417174+00:00", 
            "author": "https://api.launchpad.net/1.0/~amotoki"
        }, 
        {
            "content": "Matt,\n\nFrom Folsom-2 nova-network and the Quantum Manager are not used anymore to communicate with Quantum, as nova call directly the Quantum API.  Hence nova-network should not run at all. An admin guide which will guide you through the process of installing and configuring Quantum v2 is in preparation and should be available as a draft by the end of this week. In the meanwhile, you can look at devstack to get a grasp of how quantum and the various agents have been configured.\n\nCan you please tell me which version of the packages are you using? This might help us understand if there's a packaging issue to be addressed.", 
            "date_created": "2012-09-13 13:27:14.460842+00:00", 
            "author": "https://api.launchpad.net/1.0/~salvatore-orlando"
        }, 
        {
            "content": "Thanks for the update. I will wait for the updated documentation.\n\nI was running the latest packages from:\n\nppa:openstack-ubuntu-testing/folsom-trunk-testing\nppa:openstack-ubuntu-testing/folsom-deps-staging\n", 
            "date_created": "2012-09-13 14:08:54.260035+00:00", 
            "author": "https://api.launchpad.net/1.0/~msymonds"
        }, 
        {
            "content": "I think that's actually wontfix, based on comment 2. Feel free to reopen (set status back to New) if you disagree.", 
            "date_created": "2012-12-13 15:26:17.245741+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2012-12-13 15:26:18.866750+00:00"
}