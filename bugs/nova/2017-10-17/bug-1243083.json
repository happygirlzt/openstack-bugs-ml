{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 09:01:49.623912+00:00", 
    "description": "Operation details are as following:\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\nubuntu@lxc-gq:~$ nova reboot lxc1 --hard\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\n| ID                                   | Name | Status      | Task State     | Power State | Networks         |\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | HARD_REBOOT | rebooting_hard | Running     | private=10.0.0.2 |\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n\n\nubuntu@lxc-gq:~$ nova resize lxc1 m1.lxc\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n| ID                                   | Name | Status        | Task State | Power State | Networks         |\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | VERIFY_RESIZE | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:136419 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9_resize/disk)\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n\nubuntu@lxc-gq:~$ nova resize-confirm lxc1\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ vir list\nId    Name                           State\n----------------------------------------------------\n9312  instance-00000052              running\n\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:136419 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9_resize/disk (deleted))\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)", 
    "tags": [
        "lxc"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1243083", 
    "owner": "https://api.launchpad.net/1.0/~hzguanqiang", 
    "id": 1243083, 
    "index": 5485, 
    "openned": "2013-10-22 08:12:54.727081+00:00", 
    "created": "2013-10-22 08:12:54.727081+00:00", 
    "title": "lxc container rootfs is attached to more than one device when rebooted or resized ", 
    "comments": [
        {
            "content": "Operation details are as following:\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\nubuntu@lxc-gq:~$ nova reboot lxc1 --hard\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\n| ID                                   | Name | Status      | Task State     | Power State | Networks         |\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | HARD_REBOOT | rebooting_hard | Running     | private=10.0.0.2 |\n+--------------------------------------+------+-------------+----------------+-------------+------------------+\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n\n\nubuntu@lxc-gq:~$ nova resize lxc1 m1.lxc\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n| ID                                   | Name | Status        | Task State | Power State | Networks         |\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | VERIFY_RESIZE | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------------+------------+-------------+------------------+\n\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:136419 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9_resize/disk)\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)\n\nubuntu@lxc-gq:~$ nova resize-confirm lxc1\nubuntu@lxc-gq:~$ nova list\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------+---------+------------+-------------+------------------+\n| b91adccc-408a-4bac-8835-9843afb904b9 | lxc1 | ACTIVE  | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+---------+------------+-------------+------------------+\nubuntu@lxc-gq:~$ vir list\nId    Name                           State\n----------------------------------------------------\n9312  instance-00000052              running\n\nubuntu@lxc-gq:~$ sudo losetup -a\n/dev/loop0: [fd01]:136419 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9_resize/disk (deleted))\n/dev/loop1: [fd01]:134374 (/opt/stack/data/nova/instances/b91adccc-408a-4bac-8835-9843afb904b9/disk)", 
            "date_created": "2013-10-22 08:12:54.727081+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzguanqiang"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/53069", 
            "date_created": "2013-10-22 08:40:55.246425+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/53069\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=0fcbb7b286888d642d329db1299eb9f3708d1f50\nSubmitter: Jenkins\nBranch:    master\n\ncommit 0fcbb7b286888d642d329db1299eb9f3708d1f50\nAuthor: Guan Qiang <email address hidden>\nDate:   Tue Oct 22 16:32:25 2013 +0800\n\n    Fix lxc rootfs attached two devices in some action\n    \n    During resizing/rebooting a lxc container, create_domain action\n    will be called and lxc rootfs will be attached to device again.\n    So before this action, We need to teardown the container to\n    make sure lxc_root_device is detached when container is destroyed.\n    \n    Closes-bug: #1243083\n    Related-bug: #1208387\n    \n    Change-Id: Idd1862c7f212dc253b6273b07b020c86a94e658e\n", 
            "date_created": "2014-01-11 15:10:54.689332+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-01-22 16:19:18.542394+00:00"
}