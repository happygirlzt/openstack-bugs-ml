{
    "status": "Fix Released", 
    "last_updated": "2016-01-21 13:43:31.570958+00:00", 
    "description": "I cat following contents into a.pwd , note the '1' at /bin/sh1 of ssh line it's on purpose\nafter following opreations, I didn't see fllowing mechanism talked in doc\nFor example, if the /etc/passwd file exists, it is backed up as /etc/passwd.bak.1246036261.5785.\n\n\nhttps://github.com/openstack/nova/blob/master/api-guide/source/server_concepts.rst\nhttp://developer.openstack.org/api-ref-compute-v2.1.html\n\n\n$ sudo cat passwd\nroot:x:0:0:root:/root:/bin/sh\ndaemon:x:1:1:daemon:/usr/sbin:/bin/sh\nbin:x:2:2:bin:/bin:/bin/sh\nsys:x:3:3:sys:/dev:/bin/sh\nsync:x:4:100:sync:/bin:/bin/sync\nmail:x:8:8:mail:/var/spool/mail:/bin/sh\nproxy:x:13:13:proxy:/bin:/bin/sh\nwww-data:x:33:33:www-data:/var/www:/bin/sh\nbackup:x:34:34:backup:/var/backups:/bin/sh\noperator:x:37:37:Operator:/var:/bin/sh\nhaldaemon:x:68:68:hald:/:/bin/sh\ndbus:x:81:81:dbus:/var/run/dbus:/bin/sh\nftp:x:83:83:ftp:/home/ftp:/bin/sh\nnobody:x:99:99:nobody:/home:/bin/sh\nsshd:x:103:99:Operator:/var:/bin/sh1\ncirros:x:1000:1000:non-root user:/home/cirros:/bin/sh\n\n\ndo the following \n\njichen@devstack1:/opt/stack/nova$ nova boot --file /etc/passwd=/home/jichen/a.pwd --image 9eee793a-25e5-4f42-bd9e-b869e60d3dbd --flavor m1.micro t6\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          |                                                                |\n| OS-EXT-STS:power_state               | 0                                                              |\n| OS-EXT-STS:task_state                | scheduling                                                     |\n| OS-EXT-STS:vm_state                  | building                                                       |\n| OS-SRV-USG:launched_at               | -                                                              |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| adminPass                            | 9VUVZY53nbFb                                                   |\n| config_drive                         |                                                                |\n| created                              | 2015-12-11T09:19:28Z                                           |\n| flavor                               | m1.micro (84)                                                  |\n| hostId                               |                                                                |\n| id                                   | 80f24559-2bd9-4709-b1a2-36709cfb3b50                           |\n| image                                | cirros-0.3.4-x86_64-uec (9eee793a-25e5-4f42-bd9e-b869e60d3dbd) |\n\n\njichen@devstack1:/opt/stack/nova$ ssh cirros@10.0.0.17\nThe authenticity of host '10.0.0.17 (10.0.0.17)' can't be established.\nRSA key fingerprint is c2:44:7a:4f:61:cb:1b:95:b4:3a:49:fe:ce:dc:1e:20.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '10.0.0.17' (RSA) to the list of known hosts.\ncirros@10.0.0.17's password:\n\n\n$ cd /etc\n$ ls\nTZ             cirros         fstab          init.d         ld.so.conf     mtab           profile        resolv.conf    shadow\nacpi           cirros-init    group          inittab        ld.so.conf.d   network        protocols      screenrc       ssl\nblkid.tab      default        hostname       inputrc        mke2fs.conf    os-release     random-seed    securetty      sudoers\nblkid.tab.old  dropbear       hosts          issue          modules        passwd         rc3.d          services       sudoers.d\n$ suco cat passwd\n-sh: suco: not found\n$ sudo cat passwd\nroot:x:0:0:root:/root:/bin/sh\ndaemon:x:1:1:daemon:/usr/sbin:/bin/sh\nbin:x:2:2:bin:/bin:/bin/sh\nsys:x:3:3:sys:/dev:/bin/sh\nsync:x:4:100:sync:/bin:/bin/sync\nmail:x:8:8:mail:/var/spool/mail:/bin/sh\nproxy:x:13:13:proxy:/bin:/bin/sh\nwww-data:x:33:33:www-data:/var/www:/bin/sh\nbackup:x:34:34:backup:/var/backups:/bin/sh\noperator:x:37:37:Operator:/var:/bin/sh\nhaldaemon:x:68:68:hald:/:/bin/sh\ndbus:x:81:81:dbus:/var/run/dbus:/bin/sh\nftp:x:83:83:ftp:/home/ftp:/bin/sh\nnobody:x:99:99:nobody:/home:/bin/sh\nsshd:x:103:99:Operator:/var:/bin/sh1\ncirros:x:1000:1000:non-root user:/home/cirros:/bin/sh", 
    "tags": [
        "nova"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1525137", 
    "owner": "https://api.launchpad.net/1.0/~jichenjc", 
    "id": 1525137, 
    "index": 7169, 
    "openned": "2015-12-11 09:24:39.428253+00:00", 
    "created": "2015-12-11 09:23:40.083015+00:00", 
    "title": "doc wrong about BAK extensions of injection", 
    "comments": [
        {
            "content": "I cat following contents into a.pwd , note the '1' at /bin/sh1 of ssh line it's on purpose\nafter following opreations, I didn't see fllowing mechanism talked in doc\nFor example, if the /etc/passwd file exists, it is backed up as /etc/passwd.bak.1246036261.5785.\n\n\nhttps://github.com/openstack/nova/blob/master/api-guide/source/server_concepts.rst\nhttp://developer.openstack.org/api-ref-compute-v2.1.html\n\n\n$ sudo cat passwd\nroot:x:0:0:root:/root:/bin/sh\ndaemon:x:1:1:daemon:/usr/sbin:/bin/sh\nbin:x:2:2:bin:/bin:/bin/sh\nsys:x:3:3:sys:/dev:/bin/sh\nsync:x:4:100:sync:/bin:/bin/sync\nmail:x:8:8:mail:/var/spool/mail:/bin/sh\nproxy:x:13:13:proxy:/bin:/bin/sh\nwww-data:x:33:33:www-data:/var/www:/bin/sh\nbackup:x:34:34:backup:/var/backups:/bin/sh\noperator:x:37:37:Operator:/var:/bin/sh\nhaldaemon:x:68:68:hald:/:/bin/sh\ndbus:x:81:81:dbus:/var/run/dbus:/bin/sh\nftp:x:83:83:ftp:/home/ftp:/bin/sh\nnobody:x:99:99:nobody:/home:/bin/sh\nsshd:x:103:99:Operator:/var:/bin/sh1\ncirros:x:1000:1000:non-root user:/home/cirros:/bin/sh\n\n\ndo the following \n\njichen@devstack1:/opt/stack/nova$ nova boot --file /etc/passwd=/home/jichen/a.pwd --image 9eee793a-25e5-4f42-bd9e-b869e60d3dbd --flavor m1.micro t6\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          |                                                                |\n| OS-EXT-STS:power_state               | 0                                                              |\n| OS-EXT-STS:task_state                | scheduling                                                     |\n| OS-EXT-STS:vm_state                  | building                                                       |\n| OS-SRV-USG:launched_at               | -                                                              |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| adminPass                            | 9VUVZY53nbFb                                                   |\n| config_drive                         |                                                                |\n| created                              | 2015-12-11T09:19:28Z                                           |\n| flavor                               | m1.micro (84)                                                  |\n| hostId                               |                                                                |\n| id                                   | 80f24559-2bd9-4709-b1a2-36709cfb3b50                           |\n| image                                | cirros-0.3.4-x86_64-uec (9eee793a-25e5-4f42-bd9e-b869e60d3dbd) |\n\n\njichen@devstack1:/opt/stack/nova$ ssh cirros@10.0.0.17\nThe authenticity of host '10.0.0.17 (10.0.0.17)' can't be established.\nRSA key fingerprint is c2:44:7a:4f:61:cb:1b:95:b4:3a:49:fe:ce:dc:1e:20.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '10.0.0.17' (RSA) to the list of known hosts.\ncirros@10.0.0.17's password:\n\n\n$ cd /etc\n$ ls\nTZ             cirros         fstab          init.d         ld.so.conf     mtab           profile        resolv.conf    shadow\nacpi           cirros-init    group          inittab        ld.so.conf.d   network        protocols      screenrc       ssl\nblkid.tab      default        hostname       inputrc        mke2fs.conf    os-release     random-seed    securetty      sudoers\nblkid.tab.old  dropbear       hosts          issue          modules        passwd         rc3.d          services       sudoers.d\n$ suco cat passwd\n-sh: suco: not found\n$ sudo cat passwd\nroot:x:0:0:root:/root:/bin/sh\ndaemon:x:1:1:daemon:/usr/sbin:/bin/sh\nbin:x:2:2:bin:/bin:/bin/sh\nsys:x:3:3:sys:/dev:/bin/sh\nsync:x:4:100:sync:/bin:/bin/sync\nmail:x:8:8:mail:/var/spool/mail:/bin/sh\nproxy:x:13:13:proxy:/bin:/bin/sh\nwww-data:x:33:33:www-data:/var/www:/bin/sh\nbackup:x:34:34:backup:/var/backups:/bin/sh\noperator:x:37:37:Operator:/var:/bin/sh\nhaldaemon:x:68:68:hald:/:/bin/sh\ndbus:x:81:81:dbus:/var/run/dbus:/bin/sh\nftp:x:83:83:ftp:/home/ftp:/bin/sh\nnobody:x:99:99:nobody:/home:/bin/sh\nsshd:x:103:99:Operator:/var:/bin/sh1\ncirros:x:1000:1000:non-root user:/home/cirros:/bin/sh", 
            "date_created": "2015-12-11 09:23:40.083015+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "commit 4474dce9e6b847a7691fc3f01d0c594061570d73 of nova\nmaster is same", 
            "date_created": "2015-12-11 09:24:26.181666+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/256351", 
            "date_created": "2015-12-11 11:10:08.333115+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Would you describe the effects to api-site?", 
            "date_created": "2015-12-13 13:56:06.591344+00:00", 
            "author": "https://api.launchpad.net/1.0/~sakaia"
        }, 
        {
            "content": "http://developer.openstack.org/api-ref-compute-v2.1.html\n\n'During file injection, any existing files that match files in the request are renamed to include the BAK extension appended with a time stamp. For example, if the /etc/passwd file exists, it is backed up as /etc/passwd.bak.1246036261.5785. '\n\n should be removed in the api-site doc\nI didn't submit the patch because I hope nova doc patch can be approved first, thanks\n", 
            "date_created": "2015-12-14 08:34:05.785137+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/259567", 
            "date_created": "2015-12-18 17:48:57.570474+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/259567\nCommitted: https://git.openstack.org/cgit/openstack/api-site/commit/?id=426a4533335d3d5a517f123162631de038d763a0\nSubmitter: Jenkins\nBranch:    master\n\ncommit 426a4533335d3d5a517f123162631de038d763a0\nAuthor: jichenjc <email address hidden>\nDate:   Fri Dec 18 11:27:07 2015 +0800\n\n    Remove incorrect comments on injection BAK method\n    \n    The BAK method is not correct based on existing mechanism\n    \n    Change-Id: I1615379763acdf81ffa356fb53049e8ba790685b\n    Partial-Bug: #1515222\n    Closes-Bug: #1525137\n", 
            "date_created": "2015-12-21 00:53:05.826074+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/256351\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=326de7607a4a2d9b99fc1f7cf6005bba5b6a06f6\nSubmitter: Jenkins\nBranch:    master\n\ncommit 326de7607a4a2d9b99fc1f7cf6005bba5b6a06f6\nAuthor: jichenjc <email address hidden>\nDate:   Fri Dec 11 04:11:27 2015 +0800\n\n    Remove incorrect comments about file injection\n    \n    there is no method on 'BAK extension appended with a time stamp'\n    if this comes from some Active engine, we should let active\n    engine to document it instead of generialize it in nova\n    \n    blueprint complete-todo-in-api-concept-doc\n    \n    Closes-Bug: 1525137\n    \n    Change-Id: Ibb05dc57f9be81de335ca4935c4c7fa59971de13\n", 
            "date_created": "2015-12-21 10:23:51.371513+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 13.0.0.0b2 development milestone.", 
            "date_created": "2016-01-21 13:43:29.696346+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2015-12-21 10:23:48.828731+00:00"
}