{
    "status": "Invalid", 
    "last_updated": "2012-07-12 13:50:59.998509+00:00", 
    "description": "Problem:  Trying to connect ISCSI volumes to a compute node, crashes libvirtd.\n\nI have also opened a bug report @ ubuntu/libvirtd -> https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/996840\n\nCan someone help/orientate me in how I could further test this scenario, in order to give more feedback to the Ubuntu team? Is it possible to extract the commands that nova-compute is passing to libvirtd?\n\nInformation/reproducing error:\n\nnova01 \u2013  cloud controller  (compute disabled)\n\n\u00a0- Ubuntu 12.04 (latest packages) 64bit\n\u00b7      -  All-in-one OpenStack installation\n\n\u00b7      - tgt ISCSI\n\n\u00b7      - nova-volume \u2013 3.6TB free\n\n\u00b7      - nova.conf can be found: http://paste.openstack.org/show/16022/\n\nnova03  - compute node\n\u00b7      - Ubuntu 12.04 (latest packages) 64bit\n\n\u00b7      - nova-api, nova-network, nova-compute\n\n\u00b7      - tgt ISCSI\n\n\u00b7      nova.conf can be found here http://paste.openstack.org/show/16021/\n\nSteps:\n\nnova volume-list\n+----+--------+--------------+------+-------------+-------------+\n| ID | Status | Display Name | Size | Volume Type | Attached to |\n+----+--------+--------------+------+-------------+-------------+\n+----+--------+--------------+------+-------------+-------------+\n\nnova volume-create --display_name \"ext_vol01\" 1\n\nnova volume-list\n+----+-----------+--------------+------+-------------+-------------+\n| ID |   Status  | Display Name | Size | Volume Type | Attached to |\n+----+-----------+--------------+------+-------------+-------------+\n| 37 | available | ext_vol01    | 1    | None        |             |\n+----+-----------+--------------+------+-------------+-------------+\n\nnova volume-attach 5d91ed13-f88f-4ff0-aca4-f1cd3910256f 37 /dev/vdf\n\nnova volume-list\n+----+-----------+--------------+------+-------------+-------------+\n| ID |   Status  | Display Name | Size | Volume Type | Attached to |\n+----+-----------+--------------+------+-------------+-------------+\n| 37 | attaching | ext_vol01    | 1    | None        |             |\n+----+-----------+--------------+------+-------------+-------------+\n\nAt this point the volume status remains \u201cattaching\u201d and the nova03 compute node has crashed.\n\nnova-compute     nova03                               nova             enabled    XXX   2012-05-07 19:53:30\n\nnova01 nova-volume.log http://paste.openstack.org/show/16016/\nnova03 nova-compute.log attached here http://paste.openstack.org/show/16023/\n\niscsi log:\n\nMay  7 16:53:32 nova03 kernel: [174620.293534] scsi14 : iSCSI Initiator over TCP/IP\nMay  7 16:53:32 nova03 kernel: [174620.550104] scsi 14:0:0:0: RAID              IET      Controller       0001 PQ: 0 ANSI: 5\nMay  7 16:53:32 nova03 kernel: [174620.550404] scsi 14:0:0:0: Attached scsi generic sg3 type 12\nMay  7 16:53:32 nova03 kernel: [174620.551557] scsi 14:0:0:1: Direct-Access     IET      VIRTUAL-DISK     0001 PQ: 0 ANSI: 5\nMay  7 16:53:32 nova03 kernel: [174620.551838] sd 14:0:0:1: Attached scsi generic sg4 type 0\nMay  7 16:53:32 nova03 kernel: [174620.552938] sd 14:0:0:1: [sdc] 2097152 512-byte logical blocks: (1.07 GB/1.00 GiB)\nMay  7 16:53:32 nova03 kernel: [174620.553670] sd 14:0:0:1: [sdc] Write Protect is off\nMay  7 16:53:32 nova03 kernel: [174620.553674] sd 14:0:0:1: [sdc] Mode Sense: 49 00 00 08\nMay  7 16:53:32 nova03 kernel: [174620.554226] sd 14:0:0:1: [sdc] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA\nMay  7 16:53:32 nova03 kernel: [174620.573890]  sdc: unknown partition table\nMay  7 16:53:32 nova03 kernel: [174620.576741] sd 14:0:0:1: [sdc] Attached SCSI disk\nMay  7 16:53:33 nova03 iscsid: connection6:0 is operational now\n\niscsiadm -m session -P 1\nTarget: iqn.2010-10.org.openstack:volume-00000025\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Current Portal: XXX.XXX.XXX.XXX:3260,1\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Persistent Portal: XXX.XXX.XXX.XX:3260,1\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0**********\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Interface:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0**********\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface Name: default\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface Transport: tcp\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface Initiatorname: iqn.1993-08.org.debian:01:60b3be5e19c\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface IPaddress: XXX.XXX.XXX.XXX\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface HWaddress: (null)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Iface Netdev: (null)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0SID: 6\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iSCSI Connection State: LOGGED IN\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0iSCSI Session State: LOGGED_IN\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Internal iscsid Session State: NO CHANGE", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/997258", 
    "owner": "None", 
    "id": 997258, 
    "index": 4070, 
    "openned": "2012-05-09 18:16:03.143416+00:00", 
    "created": "2012-05-09 18:16:03.143416+00:00", 
    "title": "Connecting ISCSI volumes to a compute nodes, crashes libvirtd.", 
    "comments": [
        {
            "content": "Problem:  Trying to connect ISCSI volumes to a compute node, crashes libvirtd.   \n\n\nI have also opened a bug report @ ubuntu/libvirtd -> https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/996840 \n\nCan someone help/orientate me in how I could further test this scenario, in order to give more feedback to the Ubuntu team? Is it possible to extract the commands that nova-compute is passing to libvirtd? \n\n\nInformation/reproducing error:\n\n\nnova01 \u2013  cloud controller  (compute disabled) \n\n - Ubuntu 12.04 (latest packages) 64bit\n\u00b7      -  All-in-one OpenStack installation\n\n\u00b7      - tgt ISCSI\n\n\u00b7      - nova-volume \u2013 3.6TB free\n\n\u00b7      - nova.conf can be found: http://paste.openstack.org/show/16022/\n\n \nnova03  - compute node\n\u00b7      - Ubuntu 12.04 (latest packages) 64bit\n\n\u00b7      - nova-api, nova-network, nova-compute\n\n\u00b7      - tgt ISCSI\n\n\u00b7      nova.conf can be found here http://paste.openstack.org/show/16021/\n\n\nSteps:  \n \nnova volume-list\n+----+--------+--------------+------+-------------+-------------+\n| ID | Status | Display Name | Size | Volume Type | Attached to |\n+----+--------+--------------+------+-------------+-------------+\n+----+--------+--------------+------+-------------+-------------+\n \nnova volume-create --display_name \"ext_vol01\" 1\n \nnova volume-list\n+----+-----------+--------------+------+-------------+-------------+\n| ID |   Status  | Display Name | Size | Volume Type | Attached to |\n+----+-----------+--------------+------+-------------+-------------+\n| 37 | available | ext_vol01    | 1    | None        |             |\n+----+-----------+--------------+------+-------------+-------------+\n \nnova volume-attach 5d91ed13-f88f-4ff0-aca4-f1cd3910256f 37 /dev/vdf\n \nnova volume-list\n+----+-----------+--------------+------+-------------+-------------+\n| ID |   Status  | Display Name | Size | Volume Type | Attached to |\n+----+-----------+--------------+------+-------------+-------------+\n| 37 | attaching | ext_vol01    | 1    | None        |             |\n+----+-----------+--------------+------+-------------+-------------+\n \n \nAt this point the volume status remains \u201cattaching\u201d and the nova03 compute node has crashed. \n \nnova-compute     nova03                               nova             enabled    XXX   2012-05-07 19:53:30\n \n \nnova01 nova-volume.log http://paste.openstack.org/show/16016/\nnova03 nova-compute.log attached here http://paste.openstack.org/show/16023/\n \n \niscsi log:\n \nMay  7 16:53:32 nova03 kernel: [174620.293534] scsi14 : iSCSI Initiator over TCP/IP\nMay  7 16:53:32 nova03 kernel: [174620.550104] scsi 14:0:0:0: RAID              IET      Controller       0001 PQ: 0 ANSI: 5\nMay  7 16:53:32 nova03 kernel: [174620.550404] scsi 14:0:0:0: Attached scsi generic sg3 type 12\nMay  7 16:53:32 nova03 kernel: [174620.551557] scsi 14:0:0:1: Direct-Access     IET      VIRTUAL-DISK     0001 PQ: 0 ANSI: 5\nMay  7 16:53:32 nova03 kernel: [174620.551838] sd 14:0:0:1: Attached scsi generic sg4 type 0\nMay  7 16:53:32 nova03 kernel: [174620.552938] sd 14:0:0:1: [sdc] 2097152 512-byte logical blocks: (1.07 GB/1.00 GiB)\nMay  7 16:53:32 nova03 kernel: [174620.553670] sd 14:0:0:1: [sdc] Write Protect is off\nMay  7 16:53:32 nova03 kernel: [174620.553674] sd 14:0:0:1: [sdc] Mode Sense: 49 00 00 08\nMay  7 16:53:32 nova03 kernel: [174620.554226] sd 14:0:0:1: [sdc] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA\nMay  7 16:53:32 nova03 kernel: [174620.573890]  sdc: unknown partition table\nMay  7 16:53:32 nova03 kernel: [174620.576741] sd 14:0:0:1: [sdc] Attached SCSI disk\nMay  7 16:53:33 nova03 iscsid: connection6:0 is operational now\n \niscsiadm -m session -P 1\nTarget: iqn.2010-10.org.openstack:volume-00000025\n            Current Portal: XXX.XXX.XXX.XXX:3260,1\n            Persistent Portal: XXX.XXX.XXX.XX:3260,1\n                        **********\n                        Interface:\n                        **********\n                        Iface Name: default\n                        Iface Transport: tcp\n                        Iface Initiatorname: iqn.1993-08.org.debian:01:60b3be5e19c\n                        Iface IPaddress: 200.143.189.12\n                        Iface HWaddress: (null)\n                        Iface Netdev: (null)\n                        SID: 6\n                        iSCSI Connection State: LOGGED IN\n                        iSCSI Session State: LOGGED_IN\n                        Internal iscsid Session State: NO CHANGE", 
            "date_created": "2012-05-09 18:16:03.143416+00:00", 
            "author": "https://api.launchpad.net/1.0/~rfz"
        }, 
        {
            "content": "Can you attach your libvirtd.log when this happens?\n\nchuck", 
            "date_created": "2012-05-16 00:27:07.298166+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "We cannot solve the issue you reported without more information. Could you please provide the requested information ?", 
            "date_created": "2012-06-07 12:48:23.528264+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "This bug lacks the necessary information to effectively reproduce and fix it, therefore it has been closed. Feel free to reopen the bug by providing the requested information and set the bug status back to ''New''.", 
            "date_created": "2012-07-12 13:50:57.062374+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2012-07-12 13:50:58.764792+00:00"
}