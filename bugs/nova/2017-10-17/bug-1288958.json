{
    "status": "Expired", 
    "last_updated": "2016-04-20 04:17:50.052418+00:00", 
    "description": "To recreate  :\nRun :  nova boot --image <image> --flavor m1.small --num-instances 40 test\nThen: for id in `nova list | grep \"test\" | awk '{print $2}'`; do nova delete $id & done\n\nGuest is removed from the hypervisor node:\n[root@pcloud16 ~]# virsh list --all\n Id    Name                           State\n----------------------------------------------------\n\n[root@pcloud16 ~]#\n\nHowever, nova list, shows a guest being deleted:\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | BUILD  | deleting   | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n\nSo I try to reset the state:\n[root@pcloud18 ~(keystone_admin)]# nova reset-state --active 2917e808-2de0-4266-9de5-3fd5d171eb46\n[root@pcloud18 ~(keystone_admin)]# nova list\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| ID                                   | Name                                      | Status | Task State | Power State | Networks         |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | ACTIVE | None       | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n[root@pcloud18 ~(keystone_admin)]# nova list\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| ID                                   | Name                                      | Status | Task State | Power State | Networks         |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | ACTIVE | deleting   | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n\nreap doesn't seem to clean things up either: \nBefore resetting the state: \n2014-03-06 06:33:00.481 11409 WARNING nova.compute.manager [req-20be6b2d-7d78-40ee-bab4-8fcd61f67290 None None] Found 1 in the database and 0 on the hypervisor.\n2014-03-06 06:33:00.482 11409 INFO nova.compute.manager [req-20be6b2d-7d78-40ee-bab4-8fcd61f67290 None None] [instance: 2917e808-2de0-4266-9de5-3fd5d171eb46] During sync_power_state the instance has a pending task. Skip.\n\nWhen I reset the state: \n2014-03-06 06:43:02.985 11409 WARNING nova.compute.manager [-] Found 1 in the database and 0 on the hypervisor.\n2014-03-06 06:43:03.090 11409 WARNING nova.compute.manager [-] [instance: 2917e808-2de0-4266-9de5-3fd5d171eb46] Instance is unexpectedly not found. Ignore.", 
    "tags": [
        "compute"
    ], 
    "importance": "Medium", 
    "heat": 32, 
    "link": "https://bugs.launchpad.net/nova/+bug/1288958", 
    "owner": "None", 
    "id": 1288958, 
    "index": 3825, 
    "openned": "2014-03-06 20:06:00.759852+00:00", 
    "created": "2014-03-06 20:06:00.759852+00:00", 
    "title": "nova out of sync with the hypervisor ", 
    "comments": [
        {
            "content": "To recreate  :\nRun :  nova boot --image <image> --flavor m1.small --num-instances 40 test\nThen: for id in `nova list | grep \"test\" | awk '{print $2}'`; do nova delete $id & done\n\nGuest is removed from the hypervisor node:\n[root@pcloud16 ~]# virsh list --all\n Id    Name                           State\n----------------------------------------------------\n\n[root@pcloud16 ~]#\n\nHowever, nova list, shows a guest being deleted:\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | BUILD  | deleting   | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n\nSo I try to reset the state:\n[root@pcloud18 ~(keystone_admin)]# nova reset-state --active 2917e808-2de0-4266-9de5-3fd5d171eb46\n[root@pcloud18 ~(keystone_admin)]# nova list\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| ID                                   | Name                                      | Status | Task State | Power State | Networks         |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | ACTIVE | None       | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n[root@pcloud18 ~(keystone_admin)]# nova list\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| ID                                   | Name                                      | Status | Task State | Power State | Networks         |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n| 2917e808-2de0-4266-9de5-3fd5d171eb46 | test-2917e808-2de0-4266-9de5-3fd5d171eb46 | ACTIVE | deleting   | NOSTATE     | 10Net-3=10.0.3.2 |\n+--------------------------------------+-------------------------------------------+--------+------------+-------------+------------------+\n\nreap doesn't seem to clean things up either: \nBefore resetting the state: \n2014-03-06 06:33:00.481 11409 WARNING nova.compute.manager [req-20be6b2d-7d78-40ee-bab4-8fcd61f67290 None None] Found 1 in the database and 0 on the hypervisor.\n2014-03-06 06:33:00.482 11409 INFO nova.compute.manager [req-20be6b2d-7d78-40ee-bab4-8fcd61f67290 None None] [instance: 2917e808-2de0-4266-9de5-3fd5d171eb46] During sync_power_state the instance has a pending task. Skip.\n\nWhen I reset the state: \n2014-03-06 06:43:02.985 11409 WARNING nova.compute.manager [-] Found 1 in the database and 0 on the hypervisor.\n2014-03-06 06:43:03.090 11409 WARNING nova.compute.manager [-] [instance: 2917e808-2de0-4266-9de5-3fd5d171eb46] Instance is unexpectedly not found. Ignore.", 
            "date_created": "2014-03-06 20:06:00.759852+00:00", 
            "author": "https://api.launchpad.net/1.0/~jtaleric"
        }, 
        {
            "content": "I'm unable to reproduce this.. Are you still seeing this issue?\n\nI have restricted resources in devstack, so I'm doing the following in a script:\n\n----------\nnova boot --image 975f7ec4-694e-492a-a875-2c0d8accbd0a --flavor m1.tiny --num-instances 20 testccc\n\nfor id in `nova list | grep \"testccc\" | awk '{print $2}'`; do nova delete $id & done\n----------\n\n\nThe deletes take a bit of time, but the vms are listed in virsh until they are deleted.  When they are finally removed, the nova list also produces an empty list.\n\nI've attempted this multiple times with different --num-instances, and still can't repro.  Also, note: I'm using the latest upstream code.", 
            "date_created": "2015-08-04 16:12:58.106871+00:00", 
            "author": "https://api.launchpad.net/1.0/~ctrath"
        }, 
        {
            "content": "This was not reproducable on upstream code 6 months ago. We should let the bug age out if no reproduce is brought forward. ", 
            "date_created": "2016-02-20 01:16:54.295865+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2016-04-20 04:17:46.746846+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2016-04-20 04:17:47.319113+00:00"
}