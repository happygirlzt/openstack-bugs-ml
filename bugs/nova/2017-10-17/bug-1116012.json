{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:11:41.935055+00:00", 
    "description": "If instance host was not set, actions such as request console output or start, stop the instance cause HTTP 500 response.\n\n2013-02-05 14:05:42 ERROR nova.api.openstack [req-36bc6ade-bf56-4a5b-a913-1195b75040e8 0732bcc6b79b44058498feedbb957763 12ed8c7f70fb48018cdbf3aa60503541] Caught error: Unable to find host for Instance 5116bdf5-4cbe-4bd1-96d4-1534b22a010f2013-02-05 14:05:42 TRACE nova.api.openstack Traceback (most recent call last):\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/__init__.py\", line 78, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-02-05 14:05:42 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-02-05 14:05:42 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystone/middleware/auth_token.py\", line 278, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-02-05 14:05:42 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 885, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     content_type, body, accept)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 933, in _process_stack\n2013-02-05 14:05:42 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 1021, in dispatch\n2013-02-05 14:05:42 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/compute/contrib/server_start_stop.py\", line 56, in _stop_server\n2013-02-05 14:05:42 TRACE nova.api.openstack     self.compute_api.stop(context, instance)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 116, in wrapped\n2013-02-05 14:05:42 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 106, in inner\n2013-02-05 14:05:42 TRACE nova.api.openstack     return function(self, context, instance, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 96, in inner\n2013-02-05 14:05:42 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 1176, in stop\n2013-02-05 14:05:42 TRACE nova.api.openstack     self.compute_rpcapi.stop_instance(context, instance, cast=do_cast)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/rpcapi.py\", line 487, in stop_instance\n2013-02-05 14:05:42 TRACE nova.api.openstack     topic=_compute_topic(self.topic, ctxt, None, instance))\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/rpcapi.py\", line 48, in _compute_topic\n2013-02-05 14:05:42 TRACE nova.api.openstack     'Instance %s') % instance['uuid'])\n2013-02-05 14:05:42 TRACE nova.api.openstack NovaException: Unable to find host for Instance 5116bdf5-4cbe-4bd1-96d4-1534b22a010f\n2013-02-05 14:05:42 TRACE nova.api.openstack-\n2013-02-05 14:05:42 INFO nova.api.openstack [req-36bc6ade-bf56-4a5b-a913-1195b75040e8 0732bcc6b79b44058498feedbb957763 12ed8c7f70fb48018cdbf3aa60503541] http://localhost:8774/v2/12ed8c7f70fb48018cdbf3aa60503541/servers/5116bdf5-4cbe-4bd1-96d4-1534b22a010f/action returned with HTTP 500", 
    "tags": [
        "folsom-backport-potential"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1116012", 
    "owner": "https://api.launchpad.net/1.0/~hzzhoushaoyu", 
    "id": 1116012, 
    "index": 4647, 
    "openned": "2013-02-05 07:47:28.076358+00:00", 
    "created": "2013-02-05 07:47:28.076358+00:00", 
    "title": "HTTP 500 response when get_console_output or start,stop action called before host set", 
    "comments": [
        {
            "content": "If instance host was not set, actions such as request console output or start, stop the instance cause HTTP 500 response.\n\n2013-02-05 14:05:42 ERROR nova.api.openstack [req-36bc6ade-bf56-4a5b-a913-1195b75040e8 0732bcc6b79b44058498feedbb957763 12ed8c7f70fb48018cdbf3aa60503541] Caught error: Unable to find host for Instance 5116bdf5-4cbe-4bd1-96d4-1534b22a010f2013-02-05 14:05:42 TRACE nova.api.openstack Traceback (most recent call last):\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/__init__.py\", line 78, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-02-05 14:05:42 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-02-05 14:05:42 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystone/middleware/auth_token.py\", line 278, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-02-05 14:05:42 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 885, in __call__\n2013-02-05 14:05:42 TRACE nova.api.openstack     content_type, body, accept)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 933, in _process_stack\n2013-02-05 14:05:42 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/wsgi.py\", line 1021, in dispatch\n2013-02-05 14:05:42 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/api/openstack/compute/contrib/server_start_stop.py\", line 56, in _stop_server\n2013-02-05 14:05:42 TRACE nova.api.openstack     self.compute_api.stop(context, instance)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 116, in wrapped\n2013-02-05 14:05:42 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 106, in inner\n2013-02-05 14:05:42 TRACE nova.api.openstack     return function(self, context, instance, *args, **kwargs)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 96, in inner\n2013-02-05 14:05:42 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/api.py\", line 1176, in stop\n2013-02-05 14:05:42 TRACE nova.api.openstack     self.compute_rpcapi.stop_instance(context, instance, cast=do_cast)\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/rpcapi.py\", line 487, in stop_instance\n2013-02-05 14:05:42 TRACE nova.api.openstack     topic=_compute_topic(self.topic, ctxt, None, instance))\n2013-02-05 14:05:42 TRACE nova.api.openstack   File \"path/nova/compute/rpcapi.py\", line 48, in _compute_topic\n2013-02-05 14:05:42 TRACE nova.api.openstack     'Instance %s') % instance['uuid'])\n2013-02-05 14:05:42 TRACE nova.api.openstack NovaException: Unable to find host for Instance 5116bdf5-4cbe-4bd1-96d4-1534b22a010f\n2013-02-05 14:05:42 TRACE nova.api.openstack-\n2013-02-05 14:05:42 INFO nova.api.openstack [req-36bc6ade-bf56-4a5b-a913-1195b75040e8 0732bcc6b79b44058498feedbb957763 12ed8c7f70fb48018cdbf3aa60503541] http://localhost:8774/v2/12ed8c7f70fb48018cdbf3aa60503541/servers/5116bdf5-4cbe-4bd1-96d4-1534b22a010f/action returned with HTTP 500", 
            "date_created": "2013-02-05 07:47:28.076358+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzzhoushaoyu"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/21193", 
            "date_created": "2013-02-05 07:51:51.775854+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/21193\nCommitted: http://github.com/openstack/nova/commit/702fdf2fc1acc32b5ccd9e0830e574c42770ab5d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 702fdf2fc1acc32b5ccd9e0830e574c42770ab5d\nAuthor: Zhou ShaoYu <email address hidden>\nDate:   Tue Feb 5 14:42:53 2013 +0800\n\n    Fix check instance host for instance action\n    \n    When instance has no host, actions such as get_console_output,\n    start_stop_instance cause HTTP 500 response. Here change to\n    HTTPConflict when action called before host set.\n    \n    Fix LP# 1116012\n    \n    Change-Id: I6153a03f449d9fad8d0d8fb7295bdea4d2b2c2b1\n", 
            "date_created": "2013-02-12 04:51:43.468774+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-02-21 08:54:50.352199+00:00"
}