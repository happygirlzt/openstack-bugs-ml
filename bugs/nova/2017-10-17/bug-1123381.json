{
    "status": "Invalid", 
    "last_updated": "2013-08-06 14:49:04.809310+00:00", 
    "description": "Creating an AZ via the nova-client aggregate commands seems to work fine, but it doesn't show up in the list.   \n\n\n$ nova aggregate-create az1_agg az1\n+----+---------+-------------------+-------+----------+\n| Id | Name    | Availability Zone | Hosts | Metadata |\n+----+---------+-------------------+-------+----------+\n| 2  | az1_agg | az1               |       |          |\n+----+---------+-------------------+-------+----------+\n\n\n$ nova aggregate-details 2 availability_zone=az1\n+----+---------+-------------------+-------+--------------------------------+\n| Id | Name    | Availability Zone | Hosts | Metadata                       |\n+----+---------+-------------------+-------+--------------------------------+\n| 2  | az1_agg | az1               | []    | {u'availability_zone': u'az1'} |\n+----+---------+-------------------+-------+--------------------------------+\n\n\nSo far so good, but the new API to list availability zones doesn\u2019t seem to pick this up:\n\nAs a non-admin user: \n$ nova availability-zone-list\n+------+-----------+\n| Name | Status    |\n+------+-----------+\n| nova | available |\n+------+-----------+\n\nAs an admin user: \n$ nova availability-zone-list \nERROR: 'unicode' object has no attribute 'strftime'\n\nAlthough with the debug switch I can see the return value as: \nRESP: [200] {'date': 'Tue, 12 Feb 2013 13:59:01 GMT', 'x-compute-request-id': 'req-c7af3992-6ac4-45ec-8480-d6ec8b78981a', 'content-type': 'application/json', 'content-length': '857'}\nRESP BODY: {\"availabilityZoneInfo\": [{\"zoneState\": {\"available\": true}, \"hosts\": {\"server-1358868788-az-3-region-a-geo-1.novalocal\": {\"nova-conductor\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:59.000000\"}, \"nova-scheduler\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:59:00.000000\"}, \"nova-consoleauth\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:57.000000\"}, \"nova-cert\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:59.000000\"}, \"nova-network\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:51.000000\"}}}, \"zoneName\": \"internal\"}, {\"zoneState\": {\"available\": true}, \"hosts\": {\"server-1358868788-az-3-region-a-geo-1.novalocal\": {\"nova-compute\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:53.000000\"}}}, \"zoneName\": \"nova\"}]}\n\n\nLooking at the code for this new API \u2013 it seems to be calling nova/availability_zones \u2013 which I *think* is the pre-aggregate class.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1123381", 
    "owner": "https://api.launchpad.net/1.0/~jogo", 
    "id": 1123381, 
    "index": 4672, 
    "openned": "2013-02-12 19:30:53.496498+00:00", 
    "created": "2013-02-12 19:30:53.496498+00:00", 
    "title": "list availability zones doesn't seem to work with the new aggregate model ", 
    "comments": [
        {
            "content": "Creating an AZ via the nova-client aggregate commands seems to work fine, but it doesn't show up in the list.   \n\n\n$ nova aggregate-create az1_agg az1\n+----+---------+-------------------+-------+----------+\n| Id | Name    | Availability Zone | Hosts | Metadata |\n+----+---------+-------------------+-------+----------+\n| 2  | az1_agg | az1               |       |          |\n+----+---------+-------------------+-------+----------+\n\n\n$ nova aggregate-details 2 availability_zone=az1\n+----+---------+-------------------+-------+--------------------------------+\n| Id | Name    | Availability Zone | Hosts | Metadata                       |\n+----+---------+-------------------+-------+--------------------------------+\n| 2  | az1_agg | az1               | []    | {u'availability_zone': u'az1'} |\n+----+---------+-------------------+-------+--------------------------------+\n\n\nSo far so good, but the new API to list availability zones doesn\u2019t seem to pick this up:\n\nAs a non-admin user: \n$ nova availability-zone-list\n+------+-----------+\n| Name | Status    |\n+------+-----------+\n| nova | available |\n+------+-----------+\n\nAs an admin user: \n$ nova availability-zone-list \nERROR: 'unicode' object has no attribute 'strftime'\n\nAlthough with the debug switch I can see the return value as: \nRESP: [200] {'date': 'Tue, 12 Feb 2013 13:59:01 GMT', 'x-compute-request-id': 'req-c7af3992-6ac4-45ec-8480-d6ec8b78981a', 'content-type': 'application/json', 'content-length': '857'}\nRESP BODY: {\"availabilityZoneInfo\": [{\"zoneState\": {\"available\": true}, \"hosts\": {\"server-1358868788-az-3-region-a-geo-1.novalocal\": {\"nova-conductor\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:59.000000\"}, \"nova-scheduler\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:59:00.000000\"}, \"nova-consoleauth\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:57.000000\"}, \"nova-cert\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:59.000000\"}, \"nova-network\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:51.000000\"}}}, \"zoneName\": \"internal\"}, {\"zoneState\": {\"available\": true}, \"hosts\": {\"server-1358868788-az-3-region-a-geo-1.novalocal\": {\"nova-compute\": {\"available\": true, \"active\": true, \"updated_at\": \"2013-02-12T13:58:53.000000\"}}}, \"zoneName\": \"nova\"}]}\n\n\nLooking at the code for this new API \u2013 it seems to be calling nova/availability_zones \u2013 which I *think* is the pre-aggregate class.", 
            "date_created": "2013-02-12 19:30:53.496498+00:00", 
            "author": "https://api.launchpad.net/1.0/~philip-day"
        }, 
        {
            "content": "fix in python-novaclient: https://review.openstack.org/#/c/21832/", 
            "date_created": "2013-02-12 23:26:17.374092+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/21832\nCommitted: http://github.com/openstack/python-novaclient/commit/c97879a3f24ac51a8b7673590445014eeb046381\nSubmitter: Jenkins\nBranch:    master\n\ncommit c97879a3f24ac51a8b7673590445014eeb046381\nAuthor: Joe Gordon <email address hidden>\nDate:   Tue Feb 12 23:22:34 2013 +0000\n\n    Fix nova availability-zone-list for admin users\n    \n    Don't need to convert returned timestamp\n    \n    Fix bug 1123381\n    \n    Change-Id: I1dbc82475b44b8d321fffb512083fc7a3b13153d\n", 
            "date_created": "2013-02-15 23:40:37.927716+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-02-12 23:26:01.478027+00:00"
}