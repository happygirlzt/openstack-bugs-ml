{
    "status": "Invalid", 
    "last_updated": "2014-11-20 13:50:07.038983+00:00", 
    "description": "The nova rbd libvirt driver fails with the following trace: \n\n2014-11-20 11:43:57.327 24448 ERROR nova.openstack.common.threadgroup [-] global name 'self' is not defined\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     x.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 168, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/event.py\", line 116, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 187, in switch\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 194, in main\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/service.py\", line 486, in run_service\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     service.start()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/service.py\", line 180, in start\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.manager.pre_start_hook()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1063, in pre_start_hook\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.update_available_resource(nova.context.get_admin_context())\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5524, in update_available_resource\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     nodenames = set(self.driver.get_available_nodes())\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/driver.py\", line 1169, in get_available_nodes\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     stats = self.get_host_stats(refresh=refresh)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4961, in get_host_stats\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.host_state.get_host_stats(refresh=refresh)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 441, in host_state\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self._host_state = HostState(self)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5355, in __init__\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.update_status()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5386, in update_status\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     disk_info_dict = self.driver.get_local_gb_info()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3892, in get_local_gb_info\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     info = self._get_rbd_driver().get_pool_info()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup NameError: global name 'self' is not defined\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup \n\n\nThe nova configuration file is set with: \nrbd_user = cinder\nrbd_secret_uuid = <generated uuid>\n\nAnd in the libvirt section: \nimages_type=rbd\nimages_rbd_pool=vms\nimages_rbd_ceph_conf=/etc/ceph/ceph.conf\n\n\nThe Nova version is:\n\npython-nova-2014.1.3-8.el7ost.noarch\nopenstack-nova-novncproxy-2014.1.3-8.el7ost.noarch\nopenstack-nova-console-2014.1.3-8.el7ost.noarch\nopenstack-nova-api-2014.1.3-8.el7ost.noarch\nopenstack-nova-conductor-2014.1.3-8.el7ost.noarch\nopenstack-nova-cert-2014.1.3-8.el7ost.noarch\npython-novaclient-2.17.0-2.el7ost.noarch\nopenstack-nova-compute-2014.1.3-8.el7ost.noarch\nopenstack-nova-common-2014.1.3-8.el7ost.noarch\nopenstack-nova-scheduler-2014.1.3-8.el7ost.noarch\n\nthe libvirt version is: \nlibvirt-daemon-driver-qemu-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-config-nwfilter-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-nwfilter-1.1.1-29.el7_0.3.x86_64\nlibvirt-client-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-nodedev-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-kvm-1.1.1-29.el7_0.3.x86_64\nlibvirt-1.1.1-29.el7_0.3.x86_64\nlibvirt-python-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-network-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-interface-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-lxc-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-storage-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-secret-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-config-network-1.1.1-29.el7_0.3.x86_64", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1394526", 
    "owner": "None", 
    "id": 1394526, 
    "index": 6552, 
    "openned": "2014-11-20 10:03:17.680967+00:00", 
    "created": "2014-11-20 10:03:17.680967+00:00", 
    "title": "rbd libvirt driver fails", 
    "comments": [
        {
            "content": "The nova rbd libvirt driver fails with the following trace: \n\n2014-11-20 11:43:57.327 24448 ERROR nova.openstack.common.threadgroup [-] global name 'self' is not defined\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     x.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 168, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/event.py\", line 116, in wait\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 187, in switch\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 194, in main\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/service.py\", line 486, in run_service\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     service.start()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/service.py\", line 180, in start\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.manager.pre_start_hook()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1063, in pre_start_hook\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.update_available_resource(nova.context.get_admin_context())\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5524, in update_available_resource\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     nodenames = set(self.driver.get_available_nodes())\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/driver.py\", line 1169, in get_available_nodes\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     stats = self.get_host_stats(refresh=refresh)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4961, in get_host_stats\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     return self.host_state.get_host_stats(refresh=refresh)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 441, in host_state\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self._host_state = HostState(self)\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5355, in __init__\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     self.update_status()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5386, in update_status\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     disk_info_dict = self.driver.get_local_gb_info()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3892, in get_local_gb_info\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup     info = self._get_rbd_driver().get_pool_info()\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup NameError: global name 'self' is not defined\n2014-11-20 11:43:57.327 24448 TRACE nova.openstack.common.threadgroup \n\n\nThe nova configuration file is set with: \nrbd_user = cinder\nrbd_secret_uuid = <generated uuid>\n\nAnd in the libvirt section: \nimages_type=rbd\nimages_rbd_pool=vms\nimages_rbd_ceph_conf=/etc/ceph/ceph.conf\n\n\nThe Nova version is:\n\npython-nova-2014.1.3-8.el7ost.noarch\nopenstack-nova-novncproxy-2014.1.3-8.el7ost.noarch\nopenstack-nova-console-2014.1.3-8.el7ost.noarch\nopenstack-nova-api-2014.1.3-8.el7ost.noarch\nopenstack-nova-conductor-2014.1.3-8.el7ost.noarch\nopenstack-nova-cert-2014.1.3-8.el7ost.noarch\npython-novaclient-2.17.0-2.el7ost.noarch\nopenstack-nova-compute-2014.1.3-8.el7ost.noarch\nopenstack-nova-common-2014.1.3-8.el7ost.noarch\nopenstack-nova-scheduler-2014.1.3-8.el7ost.noarch\n\nthe libvirt version is: \nlibvirt-daemon-driver-qemu-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-config-nwfilter-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-nwfilter-1.1.1-29.el7_0.3.x86_64\nlibvirt-client-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-nodedev-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-kvm-1.1.1-29.el7_0.3.x86_64\nlibvirt-1.1.1-29.el7_0.3.x86_64\nlibvirt-python-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-network-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-interface-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-lxc-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-storage-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-driver-secret-1.1.1-29.el7_0.3.x86_64\nlibvirt-daemon-config-network-1.1.1-29.el7_0.3.x86_64", 
            "date_created": "2014-11-20 10:03:17.680967+00:00", 
            "author": "https://api.launchpad.net/1.0/~yrabl"
        }, 
        {
            "content": "Bug not present in upstream code", 
            "date_created": "2014-11-20 13:50:05.524707+00:00", 
            "author": "https://api.launchpad.net/1.0/~p-draigbrady"
        }
    ], 
    "closed": "2014-11-20 13:49:38.534845+00:00"
}