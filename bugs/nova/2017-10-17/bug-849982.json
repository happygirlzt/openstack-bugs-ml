{
    "status": "Invalid", 
    "last_updated": "2011-10-21 12:29:31.845262+00:00", 
    "description": "Using nova revision 1558 ( even early )\n\nIf I use \nnova-manage project zipfile 1234 joeuser\nI obtain a zipfile with novarc formed like this:\n\nNOVARC=$(readlink -f \"${BASH_SOURCE:-${0}}\" 2>/dev/null) ||\n    NOVARC=$(python -c 'import os,sys; print os.path.abspath(os.path.realpath(sys.argv[1]))' \"${BASH_SOURCE:-${0}}\")\nNOVA_KEY_DIR=${NOVARC%/*}\nexport EC2_ACCESS_KEY=\"joeuser:1234\"\nexport EC2_SECRET_KEY=\"6c374b36-ad41-426d-8ddd-7c450b842fb6\"\nexport EC2_URL=\"http://192.168.0.100:8773/services/Cloud\"\nexport S3_URL=\"http://192.168.0.100:3333\"\nexport EC2_USER_ID=42 # nova does not use user id, but bundling requires it\nexport EC2_PRIVATE_KEY=${NOVA_KEY_DIR}/pk.pem\nexport EC2_CERT=${NOVA_KEY_DIR}/cert.pem\nexport NOVA_CERT=${NOVA_KEY_DIR}/cacert.pem\nexport EUCALYPTUS_CERT=${NOVA_CERT} # euca-bundle-image seems to require this set\nalias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\nalias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\nexport NOVA_API_KEY=\"joeuser\"\nexport NOVA_USERNAME=\"joeuser\"\nexport NOVA_PROJECT_ID=\"1234\"\nexport NOVA_URL=\"http://192.168.0.100:8774/v1.1/\"\n\nI use keystone so I've substituted last row like this:\nexport NOVA_URL=\"http://192.168.0.100:5000/v2.0/\"\n\nand then \nsource novarc\n\nwell...\n\n[root@hostname joeuser_bis]# euca-describe-images\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nEC2ResponseError: 403 Forbidden\n403 Forbidden\n\nAccess was denied to this resource.\n\n\nbut...\n[root@hostname joeuser_bis]# export EC2_ACCESS_KEY=fdf50e55-8f02-4aac-ac02-0adcb088325d:1234\n[root@hostname joeuser_bis]# euca-describe-images\nIMAGE   ami-00000009    None (prova_di_snapshot)                creating        private                 machine                 instance-store\nIMAGE   ami-00000008    None (centos-5.2)               available       public                  machine                 instance-store\n\nit seems that nova-manage or authentication considers the wrong field in db", 
    "tags": [
        "nova", 
        "nova-manage", 
        "zip"
    ], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/849982", 
    "owner": "None", 
    "id": 849982, 
    "index": 3540, 
    "openned": "2011-09-14 13:43:31.128045+00:00", 
    "created": "2011-09-14 13:43:31.128045+00:00", 
    "title": "EC2_ACCESS_KEY improperly formed", 
    "comments": [
        {
            "content": "Using nova revision 1558 ( even early )\n\nIf I use \nnova-manage project zipfile 1234 joeuser\nI obtain a zipfile with novarc formed like this:\n\nNOVARC=$(readlink -f \"${BASH_SOURCE:-${0}}\" 2>/dev/null) ||\n    NOVARC=$(python -c 'import os,sys; print os.path.abspath(os.path.realpath(sys.argv[1]))' \"${BASH_SOURCE:-${0}}\")\nNOVA_KEY_DIR=${NOVARC%/*}\nexport EC2_ACCESS_KEY=\"joeuser:1234\"\nexport EC2_SECRET_KEY=\"6c374b36-ad41-426d-8ddd-7c450b842fb6\"\nexport EC2_URL=\"http://192.168.0.100:8773/services/Cloud\"\nexport S3_URL=\"http://192.168.0.100:3333\"\nexport EC2_USER_ID=42 # nova does not use user id, but bundling requires it\nexport EC2_PRIVATE_KEY=${NOVA_KEY_DIR}/pk.pem\nexport EC2_CERT=${NOVA_KEY_DIR}/cert.pem\nexport NOVA_CERT=${NOVA_KEY_DIR}/cacert.pem\nexport EUCALYPTUS_CERT=${NOVA_CERT} # euca-bundle-image seems to require this set\nalias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\nalias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\nexport NOVA_API_KEY=\"joeuser\"\nexport NOVA_USERNAME=\"joeuser\"\nexport NOVA_PROJECT_ID=\"1234\"\nexport NOVA_URL=\"http://192.168.0.100:8774/v1.1/\"\n\nI use keystone so I've substituted last row like this:\nexport NOVA_URL=\"http://192.168.0.100:5000/v2.0/\"\n\nand then \nsource novarc\n\nwell...\n\n[root@hostname joeuser_bis]# euca-describe-images\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nEC2ResponseError: 403 Forbidden\n403 Forbidden\n\nAccess was denied to this resource.\n\n\nbut...\n[root@hostname joeuser_bis]# export EC2_ACCESS_KEY=fdf50e55-8f02-4aac-ac02-0adcb088325d:1234\n[root@hostname joeuser_bis]# euca-describe-images\nIMAGE   ami-00000009    None (prova_di_snapshot)                creating        private                 machine                 instance-store\nIMAGE   ami-00000008    None (centos-5.2)               available       public                  machine                 instance-store\n\nit seems that nova-manage or authentication considers the wrong field in db", 
            "date_created": "2011-09-14 13:43:31.128045+00:00", 
            "author": "https://api.launchpad.net/1.0/~truijllo"
        }, 
        {
            "content": "If you use --use_deprecated_auth you will get the old style access key when you use nova-manage project zipfile.  We should also add some sort of flag to add the nova url properly.  Unfortunately when using keystone properly, nova doesn't know the access key for a user, so we probably will need to generate the rc file somewhere else.\n\nIt looks like you are using the keystone shim, so --use_deprecated_auth should solve your particular issue.\n\nVish\nOn Sep 14, 2011, at 6:43 AM, truijllo wrote:\n\n> Public bug reported:\n> \n> Using nova revision 1558 ( even early )\n> \n> If I use \n> nova-manage project zipfile 1234 joeuser\n> I obtain a zipfile with novarc formed like this:\n> \n> NOVARC=$(readlink -f \"${BASH_SOURCE:-${0}}\" 2>/dev/null) ||\n>    NOVARC=$(python -c 'import os,sys; print os.path.abspath(os.path.realpath(sys.argv[1]))' \"${BASH_SOURCE:-${0}}\")\n> NOVA_KEY_DIR=${NOVARC%/*}\n> export EC2_ACCESS_KEY=\"joeuser:1234\"\n> export EC2_SECRET_KEY=\"6c374b36-ad41-426d-8ddd-7c450b842fb6\"\n> export EC2_URL=\"http://192.168.0.100:8773/services/Cloud\"\n> export S3_URL=\"http://192.168.0.100:3333\"\n> export EC2_USER_ID=42 # nova does not use user id, but bundling requires it\n> export EC2_PRIVATE_KEY=${NOVA_KEY_DIR}/pk.pem\n> export EC2_CERT=${NOVA_KEY_DIR}/cert.pem\n> export NOVA_CERT=${NOVA_KEY_DIR}/cacert.pem\n> export EUCALYPTUS_CERT=${NOVA_CERT} # euca-bundle-image seems to require this set\n> alias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\n> alias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\n> export NOVA_API_KEY=\"joeuser\"\n> export NOVA_USERNAME=\"joeuser\"\n> export NOVA_PROJECT_ID=\"1234\"\n> export NOVA_URL=\"http://192.168.0.100:8774/v1.1/\"\n> \n> I use keystone so I've substituted last row like this:\n> export NOVA_URL=\"http://192.168.0.100:5000/v2.0/\"\n> \n> and then \n> source novarc\n> \n> well...\n> \n> [root@hostname joeuser_bis]# euca-describe-images\n> Warning: failed to parse error message from AWS: <unknown>:1:0: syntax error\n> EC2ResponseError: 403 Forbidden\n> 403 Forbidden\n> \n> Access was denied to this resource.\n> \n> \n> but...\n> [root@hostname joeuser_bis]# export EC2_ACCESS_KEY=fdf50e55-8f02-4aac-ac02-0adcb088325d:1234\n> [root@hostname joeuser_bis]# euca-describe-images\n> IMAGE   ami-00000009    None (prova_di_snapshot)                creating        private                 machine                 instance-store\n> IMAGE   ami-00000008    None (centos-5.2)               available       public                  machine                 instance-store\n> \n> it seems that nova-manage or authentication considers the wrong field in\n> db\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> \n> ** Tags: nova nova-manage zip\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/849982\n> \n> Title:\n>  nova-manage zipfile problem\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Using nova revision 1558 ( even early )\n> \n>  If I use \n>  nova-manage project zipfile 1234 joeuser\n>  I obtain a zipfile with novarc formed like this:\n> \n>  NOVARC=$(readlink -f \"${BASH_SOURCE:-${0}}\" 2>/dev/null) ||\n>      NOVARC=$(python -c 'import os,sys; print os.path.abspath(os.path.realpath(sys.argv[1]))' \"${BASH_SOURCE:-${0}}\")\n>  NOVA_KEY_DIR=${NOVARC%/*}\n>  export EC2_ACCESS_KEY=\"joeuser:1234\"\n>  export EC2_SECRET_KEY=\"6c374b36-ad41-426d-8ddd-7c450b842fb6\"\n>  export EC2_URL=\"http://192.168.0.100:8773/services/Cloud\"\n>  export S3_URL=\"http://192.168.0.100:3333\"\n>  export EC2_USER_ID=42 # nova does not use user id, but bundling requires it\n>  export EC2_PRIVATE_KEY=${NOVA_KEY_DIR}/pk.pem\n>  export EC2_CERT=${NOVA_KEY_DIR}/cert.pem\n>  export NOVA_CERT=${NOVA_KEY_DIR}/cacert.pem\n>  export EUCALYPTUS_CERT=${NOVA_CERT} # euca-bundle-image seems to require this set\n>  alias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\n>  alias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\n>  export NOVA_API_KEY=\"joeuser\"\n>  export NOVA_USERNAME=\"joeuser\"\n>  export NOVA_PROJECT_ID=\"1234\"\n>  export NOVA_URL=\"http://192.168.0.100:8774/v1.1/\"\n> \n>  I use keystone so I've substituted last row like this:\n>  export NOVA_URL=\"http://192.168.0.100:5000/v2.0/\"\n> \n>  and then \n>  source novarc\n> \n>  well...\n> \n>  [root@hostname joeuser_bis]# euca-describe-images\n>  Warning: failed to parse error message from AWS: <unknown>:1:0: syntax error\n>  EC2ResponseError: 403 Forbidden\n>  403 Forbidden\n> \n>  Access was denied to this resource.\n> \n> \n>  but...\n>  [root@hostname joeuser_bis]# export EC2_ACCESS_KEY=fdf50e55-8f02-4aac-ac02-0adcb088325d:1234\n>  [root@hostname joeuser_bis]# euca-describe-images\n>  IMAGE   ami-00000009    None (prova_di_snapshot)                creating        private                 machine                 instance-store\n>  IMAGE   ami-00000008    None (centos-5.2)               available       public                  machine                 instance-store\n> \n>  it seems that nova-manage or authentication considers the wrong field\n>  in db\n> \n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/849982/+subscriptions\n\n", 
            "date_created": "2011-09-14 14:35:54+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "In this case a person on the Forum is reporting that the novarc is being created improperly though. \n\nFrom http://forums.openstack.org/viewtopic.php?f=9&t=338&p=1074.\n\nIt had something like this:\n\nEC2_ACCESS_KEY=\"user:project\"\n\nChanged to\n\nEC2_ACCESS_KEY=\"userAccesKey:project\"\n\nand it worked. \n\nDoes this mean that the novarc file is generated incorrectly? ", 
            "date_created": "2011-09-28 17:39:34.349849+00:00", 
            "author": "https://api.launchpad.net/1.0/~annegentle"
        }, 
        {
            "content": "--use_deprecated_auth needs to be set.  Then it will generate the old style access key.\n\nVish\n\nOn Sep 28, 2011, at 10:39 AM, Anne Gentle wrote:\n\n> In this case a person on the Forum is reporting that the novarc is being\n> created improperly though.\n> \n>> From http://forums.openstack.org/viewtopic.php?f=9&t=338&p=1074.\n> \n> It had something like this:\n> \n> EC2_ACCESS_KEY=\"user:project\"\n> \n> Changed to\n> \n> EC2_ACCESS_KEY=\"userAccesKey:project\"\n> \n> and it worked.\n> \n> Does this mean that the novarc file is generated incorrectly?\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/849982\n> \n> Title:\n>  nova-manage zipfile problem\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Using nova revision 1558 ( even early )\n> \n>  If I use \n>  nova-manage project zipfile 1234 joeuser\n>  I obtain a zipfile with novarc formed like this:\n> \n>  NOVARC=$(readlink -f \"${BASH_SOURCE:-${0}}\" 2>/dev/null) ||\n>      NOVARC=$(python -c 'import os,sys; print os.path.abspath(os.path.realpath(sys.argv[1]))' \"${BASH_SOURCE:-${0}}\")\n>  NOVA_KEY_DIR=${NOVARC%/*}\n>  export EC2_ACCESS_KEY=\"joeuser:1234\"\n>  export EC2_SECRET_KEY=\"6c374b36-ad41-426d-8ddd-7c450b842fb6\"\n>  export EC2_URL=\"http://192.168.0.100:8773/services/Cloud\"\n>  export S3_URL=\"http://192.168.0.100:3333\"\n>  export EC2_USER_ID=42 # nova does not use user id, but bundling requires it\n>  export EC2_PRIVATE_KEY=${NOVA_KEY_DIR}/pk.pem\n>  export EC2_CERT=${NOVA_KEY_DIR}/cert.pem\n>  export NOVA_CERT=${NOVA_KEY_DIR}/cacert.pem\n>  export EUCALYPTUS_CERT=${NOVA_CERT} # euca-bundle-image seems to require this set\n>  alias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\n>  alias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\n>  export NOVA_API_KEY=\"joeuser\"\n>  export NOVA_USERNAME=\"joeuser\"\n>  export NOVA_PROJECT_ID=\"1234\"\n>  export NOVA_URL=\"http://192.168.0.100:8774/v1.1/\"\n> \n>  I use keystone so I've substituted last row like this:\n>  export NOVA_URL=\"http://192.168.0.100:5000/v2.0/\"\n> \n>  and then \n>  source novarc\n> \n>  well...\n> \n>  [root@hostname joeuser_bis]# euca-describe-images\n>  Warning: failed to parse error message from AWS: <unknown>:1:0: syntax error\n>  EC2ResponseError: 403 Forbidden\n>  403 Forbidden\n> \n>  Access was denied to this resource.\n> \n> \n>  but...\n>  [root@hostname joeuser_bis]# export EC2_ACCESS_KEY=fdf50e55-8f02-4aac-ac02-0adcb088325d:1234\n>  [root@hostname joeuser_bis]# euca-describe-images\n>  IMAGE   ami-00000009    None (prova_di_snapshot)                creating        private                 machine                 instance-store\n>  IMAGE   ami-00000008    None (centos-5.2)               available       public                  machine                 instance-store\n> \n>  it seems that nova-manage or authentication considers the wrong field\n>  in db\n> \n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/849982/+subscriptions\n\n", 
            "date_created": "2011-09-28 20:31:46+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ], 
    "closed": "2011-10-21 12:29:30.338306+00:00"
}