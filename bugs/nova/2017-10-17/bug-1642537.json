{
    "status": "Confirmed", 
    "last_updated": "2017-03-02 15:22:05.451956+00:00", 
    "description": "http://logs.openstack.org/00/352200/14/check/gate-tempest-dsvm-neutron-linuxbridge-ubuntu-xenial/6ba61d3/console.html\n\n\n2016-11-17 05:06:33.890498 | Captured traceback:\n2016-11-17 05:06:33.890507 | ~~~~~~~~~~~~~~~~~~~\n2016-11-17 05:06:33.890534 |     Traceback (most recent call last):\n2016-11-17 05:06:33.890566 |       File \"tempest/api/compute/servers/test_server_actions.py\", line 289, in test_resize_server_confirm\n2016-11-17 05:06:33.890586 |         self._test_resize_server_confirm(stop=False)\n2016-11-17 05:06:33.890613 |       File \"tempest/api/compute/servers/test_server_actions.py\", line 271, in _test_resize_server_confirm\n2016-11-17 05:06:33.890624 |         'VERIFY_RESIZE')\n2016-11-17 05:06:33.890644 |       File \"tempest/common/waiters.py\", line 75, in wait_for_server_status\n2016-11-17 05:06:33.890655 |         server_id=server_id)\n2016-11-17 05:06:33.890686 |     tempest.exceptions.BuildErrorException: Server 00876f9f-2f30-4507-93c0-f0f5a1699565 failed to build and is in ERROR status\n2016-11-17 05:06:33.890761 |     Details: {u'code': 500, u'message': u\"Remote error: DBDeadlock (pymysql.err.InternalError) (1213, u'Deadlock found when trying to get lock; try restarting transaction') [SQL: u'UPDATE migrations SET updated_at=%(updated_at)s, status=%(status)s WHERE migrations.id = %(migrations_id)s'] [parame\", u'created': u'2016-11-17T04:43:56Z'}\n2016-11-17 05:06:33.890767 |", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1642537", 
    "owner": "None", 
    "id": 1642537, 
    "index": 7806, 
    "openned": "2016-11-17 10:19:33.892744+00:00", 
    "created": "2016-11-17 10:19:33.892744+00:00", 
    "title": "finish_resize fails with DBDeadlock on migrations table", 
    "comments": [
        {
            "content": "http://logs.openstack.org/00/352200/14/check/gate-tempest-dsvm-neutron-linuxbridge-ubuntu-xenial/6ba61d3/console.html\n\n\n2016-11-17 05:06:33.890498 | Captured traceback:\n2016-11-17 05:06:33.890507 | ~~~~~~~~~~~~~~~~~~~\n2016-11-17 05:06:33.890534 |     Traceback (most recent call last):\n2016-11-17 05:06:33.890566 |       File \"tempest/api/compute/servers/test_server_actions.py\", line 289, in test_resize_server_confirm\n2016-11-17 05:06:33.890586 |         self._test_resize_server_confirm(stop=False)\n2016-11-17 05:06:33.890613 |       File \"tempest/api/compute/servers/test_server_actions.py\", line 271, in _test_resize_server_confirm\n2016-11-17 05:06:33.890624 |         'VERIFY_RESIZE')\n2016-11-17 05:06:33.890644 |       File \"tempest/common/waiters.py\", line 75, in wait_for_server_status\n2016-11-17 05:06:33.890655 |         server_id=server_id)\n2016-11-17 05:06:33.890686 |     tempest.exceptions.BuildErrorException: Server 00876f9f-2f30-4507-93c0-f0f5a1699565 failed to build and is in ERROR status\n2016-11-17 05:06:33.890761 |     Details: {u'code': 500, u'message': u\"Remote error: DBDeadlock (pymysql.err.InternalError) (1213, u'Deadlock found when trying to get lock; try restarting transaction') [SQL: u'UPDATE migrations SET updated_at=%(updated_at)s, status=%(status)s WHERE migrations.id = %(migrations_id)s'] [parame\", u'created': u'2016-11-17T04:43:56Z'}\n2016-11-17 05:06:33.890767 |", 
            "date_created": "2016-11-17 10:19:33.892744+00:00", 
            "author": "https://api.launchpad.net/1.0/~mangelajo"
        }, 
        {
            "content": "2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [req-027e93fd-83f6-4c9a-8e42-bc3544a52402 tempest-ServerActionsTestJSON-1155389376 tempest-ServerActionsTestJSON-1155389376] [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565] Setting instance vm_state to ERROR\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565] Traceback (most recent call last):\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 3963, in finish_resize\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     disk_info, image_meta)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 3932, in _finish_resize\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     migration.save()\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 210, in wrapper\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     ctxt, self, fn.__name__, args, kwargs)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/opt/stack/new/nova/nova/conductor/rpcapi.py\", line 241, in object_action\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     objmethod=objmethod, args=args, kwargs=kwargs)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py\", line 169, in call\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     retry=self.retry)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/transport.py\", line 97, in _send\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     timeout=timeout, retry=retry)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 467, in send\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     retry=retry)\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 458, in _send\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565]     raise result\n2016-11-17 04:43:55.673 3598 ERROR nova.compute.manager [instance: 00876f9f-2f30-4507-93c0-f0f5a1699565] RemoteError: Remote error: DBDeadlock (pymysql.err.InternalError) (1213, u'Deadlock found when trying to get lock; try restarting transaction') [SQL: u'UPDATE migrations SET updated_at=%(updated_at)s, status=%(status)s WHERE migrations.id = %(migrations_id)s'] [parameters: {'status': u'finished', 'migrations_id': 6, 'updated_at': datetime.datetime(2016, 11, 17, 4, 43, 55, 648839)}]", 
            "date_created": "2016-12-07 20:26:23.345178+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Still happens, in Ocata: http://logs.openstack.org/14/439814/2/gate/gate-tempest-dsvm-neutron-linuxbridge-ubuntu-xenial/df3cd93/logs/testr_results.html.gz", 
            "date_created": "2017-03-02 15:22:04.436850+00:00", 
            "author": "https://api.launchpad.net/1.0/~ihar-hrachyshka"
        }
    ]
}