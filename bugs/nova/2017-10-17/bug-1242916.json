{
    "status": "Invalid", 
    "last_updated": "2015-03-23 11:59:33.499245+00:00", 
    "description": "This recently started showing up in n-api. Seems like mishandling of invalid client args from a negative test in tempest.\nExample: http://logs.openstack.org/03/52803/3/check/check-tempest-devstack-vm-postgres-full/354d7a3/logs/screen-n-api.txt.gz\n\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Matched PUT /6fa344aaf3034c4992bc30b3c06ad531/servers/a329912b-7874-4636-a08b-e40362e04ab2/metadata __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/{server_id}/metadata', defaults: {'action': u'update_all', 'controller': <nova.api.openstack.wsgi.Resource object at 0x48d2bd0>} __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Match dict: {'action': u'update_all', 'server_id': u'a329912b-7874-4636-a08b-e40362e04ab2', 'project_id': u'6fa344aaf3034c4992bc30b3c06ad531', 'controller': <nova.api.openstack.wsgi.Resource object at 0x48d2bd0>} __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-10-21 20:04:51.724 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Empty body provided in request get_body /opt/stack/new/nova/nova/api/openstack/wsgi.py:839\n2013-10-21 20:04:51.724 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Calling method <bound method Controller.update_all of <nova.api.openstack.compute.server_metadata.Controller object at 0x48d2450>> _process_stack /opt/stack/new/nova/nova/api/openstack/wsgi.py:962\n2013-10-21 20:04:51.725 ERROR nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Exception handling resource: update_all() takes exactly 4 arguments (3 given)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi TypeError: update_all() takes exactly 4 arguments (3 given)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi \n2013-10-21 20:04:51.726 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Returning 400 to user: The server could not comply with the request since it is either malformed or otherwise incorrect. __call__ /opt/stack/new/nova/nova/api/openstack/wsgi.py:1224", 
    "tags": [], 
    "importance": "High", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1242916", 
    "owner": "None", 
    "id": 1242916, 
    "index": 1283, 
    "openned": "2013-10-21 21:26:10.490636+00:00", 
    "created": "2013-10-21 21:26:10.490636+00:00", 
    "title": "metadata server update_all expects body but doesn't get it passed to it", 
    "comments": [
        {
            "content": "This recently started showing up in n-api. Seems like mishandling of invalid client args from a negative test in tempest.\nExample: http://logs.openstack.org/03/52803/3/check/check-tempest-devstack-vm-postgres-full/354d7a3/logs/screen-n-api.txt.gz\n\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Matched PUT /6fa344aaf3034c4992bc30b3c06ad531/servers/a329912b-7874-4636-a08b-e40362e04ab2/metadata __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Route path: '/{project_id}/servers/{server_id}/metadata', defaults: {'action': u'update_all', 'controller': <nova.api.openstack.wsgi.Resource object at 0x48d2bd0>} __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102\n2013-10-21 20:04:51.724 20923 DEBUG routes.middleware [-] Match dict: {'action': u'update_all', 'server_id': u'a329912b-7874-4636-a08b-e40362e04ab2', 'project_id': u'6fa344aaf3034c4992bc30b3c06ad531', 'controller': <nova.api.openstack.wsgi.Resource object at 0x48d2bd0>} __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103\n2013-10-21 20:04:51.724 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Empty body provided in request get_body /opt/stack/new/nova/nova/api/openstack/wsgi.py:839\n2013-10-21 20:04:51.724 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Calling method <bound method Controller.update_all of <nova.api.openstack.compute.server_metadata.Controller object at 0x48d2450>> _process_stack /opt/stack/new/nova/nova/api/openstack/wsgi.py:962\n2013-10-21 20:04:51.725 ERROR nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Exception handling resource: update_all() takes exactly 4 arguments (3 given)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi TypeError: update_all() takes exactly 4 arguments (3 given)\n2013-10-21 20:04:51.725 20923 TRACE nova.api.openstack.wsgi \n2013-10-21 20:04:51.726 DEBUG nova.api.openstack.wsgi [req-23bdfb52-dae5-42f7-a5b7-17c319ed67ff ServerMetadataTestJSON-tempest-1354548727-user ServerMetadataTestJSON-tempest-1354548727-tenant] Returning 400 to user: The server could not comply with the request since it is either malformed or otherwise incorrect. __call__ /opt/stack/new/nova/nova/api/openstack/wsgi.py:1224", 
            "date_created": "2013-10-21 21:26:10.490636+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-kranz"
        }, 
        {
            "content": "Dug into this further, this is definitely not low hanging fruit. \n\nDirect link to this fail: http://logs.openstack.org/66/57066/1/check/check-tempest-dsvm-full/c41f3bd/logs/screen-n-api.txt.gz#_2013-12-04_13_06_16_520", 
            "date_created": "2013-12-09 18:00:08.247823+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "And this is happening a lot - http://logstash.openstack.org/#eyJzZWFyY2giOiJcInRha2VzIGV4YWN0bHkgNCBhcmd1bWVudHNcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTM4NjYxMTk2MTc3Mn0=", 
            "date_created": "2013-12-09 18:00:26.744352+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "The stack trace is being triggered by tempest.api.compute.servers.test_server_metadata.ServerMetadataTestJSON.test_server_metadata_negative\n\nSee https://review.openstack.org/#/c/60922/ comments for the gory details.", 
            "date_created": "2013-12-10 07:45:18.507278+00:00", 
            "author": "https://api.launchpad.net/1.0/~cyeoh-0"
        }, 
        {
            "content": "All hits are from a single review which was attempting to change the api (https://review.openstack.org/#/c/166692/)\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJcInRha2VzIGV4YWN0bHkgNCBhcmd1bWVudHNcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTM4NjYxMTk2MTc3Mn0=\n\nSo, this bug is no longer valid.", 
            "date_created": "2015-03-23 11:59:24.780284+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ], 
    "closed": "2015-03-23 11:59:32.300786+00:00"
}