{
    "status": "Fix Released", 
    "last_updated": "2017-01-27 00:52:09.904937+00:00", 
    "description": "Description\n===========\nI have created the network (NET-2) for assigning floating IP to an instances. There were some problem in bringing interface attached to the router and I am trying to delete and create again.\n\n\n\nNET-1\nNetwork Type: flat\nPhysical Network: physnet1\nSegmentation ID: -\n\nNET-2\nNetwork Type: vlan\nPhysical Network: physnet1\nSegmentation ID: 128\n\n\nSteps to reproduce\n==================\n1. Create network (Enable External Network)\n2. Create subnetwork (Disable DHCP)\n3. Add interface to an existing network\n\n4 Delete network\n\nI also tried to remove interface from route , but got an error \"Unable to delete interface: dce21efa-765e-4036-a638-254fa6f3c23a\"\n\nAnd then I did \"nova net-list\"\n\n\nroot@node-1:/var/log/neutron# nova net-list\n+--------------------------------------+--------------------+------+\n| ID                                   | Label              | CIDR |\n+--------------------------------------+--------------------+------+\n| 462ec7ee-eb70-4a47-a35e-edc8fa8f760d | admin_floating_net | None |\n| bce1b871-0ab1-4cee-b96c-3fb3530245a0 | BHLC               | None |\n| c837a299-7224-468c-ae8a-1884163293b8 | admin_internal_net | None |\n+--------------------------------------+--------------------+------+\nroot@node-1:/var/log/neutron# nova net-delete bce1b871-0ab1-4cee-b96c-3fb3530245a0\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.NotImplementedError'> (HTTP 500) (Request-ID: req-f362e655-f48e-43b5-b8d3-f4f529f866b1)\n\nExpected result\n===============\n\nNetwork should be deleted\n\nActual result\n=============\n\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.NotImplementedError'> (HTTP 500) (Request-ID: req-f362e655-f48e-43b5-b8d3-f4f529f866b1)\n\n\nEnvironment\n===========\n  \n1. Exact version of OpenStack you are running.\n\nMitaka\n   \nroot@node-1:~# dpkg -l | grep nova\nii  nova-api                             2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - compute API frontend\nii  nova-cert                            2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - certificate manager\nii  nova-common                          2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - common files\nii  nova-conductor                       2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - conductor service\nii  nova-consoleauth                     2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - Console Authenticator\nii  nova-consoleproxy                    2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                       2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - libraries\nii  python-novaclient                    2:3.3.1-4~u14.04+mos3                  all          client library for OpenStack Compute API - Python 2.7\nroot@node-1:~#\n\n\n2. Which hypervisor did you use?\n\nLibvirt + KVM\n\n3. Which storage type did you use?\n\nLVM\n\n4. Which networking type did you use?\n\nNeutron with OpenVSwitch\n\n\nLogs & Configs\n==============\n\nI have deployed OpenStack using Fuel 9.0 with following config\n\n1 Controller Node\n2 Compute Node\n\nAttached the Nova-API log", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1652252", 
    "owner": "https://api.launchpad.net/1.0/~mriedem", 
    "id": 1652252, 
    "index": 2138, 
    "openned": "2016-12-23 08:56:36.114042+00:00", 
    "created": "2016-12-23 08:56:36.114042+00:00", 
    "title": "Not able to delete the network - exceptions.NotImplementedError (docs needed)", 
    "comments": [
        {
            "content": "Description\n===========\nI have created the network (NET-2) for assigning floating IP to an instances. There were some problem in bringing interface attached to the router and I am trying to delete and create again.\n\n\n\nNET-1\nNetwork Type: flat\nPhysical Network: physnet1\nSegmentation ID: -\n\nNET-2\nNetwork Type: vlan\nPhysical Network: physnet1\nSegmentation ID: 128\n\n\nSteps to reproduce\n==================\n1. Create network (Enable External Network)\n2. Create subnetwork (Disable DHCP)\n3. Add interface to an existing network\n\n4 Delete network\n\nI also tried to remove interface from route , but got an error \"Unable to delete interface: dce21efa-765e-4036-a638-254fa6f3c23a\"\n\nAnd then I did \"nova net-list\"\n\n\nroot@node-1:/var/log/neutron# nova net-list\n+--------------------------------------+--------------------+------+\n| ID                                   | Label              | CIDR |\n+--------------------------------------+--------------------+------+\n| 462ec7ee-eb70-4a47-a35e-edc8fa8f760d | admin_floating_net | None |\n| bce1b871-0ab1-4cee-b96c-3fb3530245a0 | BHLC               | None |\n| c837a299-7224-468c-ae8a-1884163293b8 | admin_internal_net | None |\n+--------------------------------------+--------------------+------+\nroot@node-1:/var/log/neutron# nova net-delete bce1b871-0ab1-4cee-b96c-3fb3530245a0\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.NotImplementedError'> (HTTP 500) (Request-ID: req-f362e655-f48e-43b5-b8d3-f4f529f866b1)\n\nExpected result\n===============\n\nNetwork should be deleted\n\nActual result\n=============\n\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.NotImplementedError'> (HTTP 500) (Request-ID: req-f362e655-f48e-43b5-b8d3-f4f529f866b1)\n\n\nEnvironment\n===========\n  \n1. Exact version of OpenStack you are running.\n\nMitaka\n   \nroot@node-1:~# dpkg -l | grep nova\nii  nova-api                             2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - compute API frontend\nii  nova-cert                            2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - certificate manager\nii  nova-common                          2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - common files\nii  nova-conductor                       2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - conductor service\nii  nova-consoleauth                     2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - Console Authenticator\nii  nova-consoleproxy                    2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                       2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          2:13.1.1-7~u14.04+mos20                all          OpenStack Compute - libraries\nii  python-novaclient                    2:3.3.1-4~u14.04+mos3                  all          client library for OpenStack Compute API - Python 2.7\nroot@node-1:~#\n\n\n2. Which hypervisor did you use?\n\nLibvirt + KVM\n\n3. Which storage type did you use?\n\nLVM\n\n4. Which networking type did you use?\n\nNeutron with OpenVSwitch\n\n\nLogs & Configs\n==============\n\nI have deployed OpenStack using Fuel 9.0 with following config\n\n1 Controller Node\n2 Compute Node\n\nAttached the Nova-API log", 
            "date_created": "2016-12-23 08:56:36.114042+00:00", 
            "author": "https://api.launchpad.net/1.0/~ganesan-jd"
        }, 
        {
            "content": "", 
            "date_created": "2016-12-23 08:56:36.114042+00:00", 
            "author": "https://api.launchpad.net/1.0/~ganesan-jd"
        }, 
        {
            "content": "The os-tenant-networks REST API in Nova has never supported proxying the network delete call to Neutron, so it fails with a 500 as that proxy isn't implemented internally to Nova. You need to use Neutron to delete the network, i.e. neutron net-delete command.\n\nThe only thing that nova proxies for networks is listing and showing details about them, but that's also deprecated in the 2.36 microversion in the Newton release.\n\nSo basically if you're doing anything with networks and you're using Neutron, you need to use the neutron client (or openstack client).\n\nAlso noted in the compute API reference:\n\nhttp://developer.openstack.org/api-ref/compute/#project-networks-os-tenant-networks-deprecated\n\nBut that reference does need to be updated a bit to explain that create/delete aren't implemented when using neutron and will result in an error.", 
            "date_created": "2016-12-29 20:27:56.756868+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "I will use this bug to update the API reference documentation for os-tenant-networks, but otherwise it's not something we're going to fix in the compute REST API.", 
            "date_created": "2016-12-29 20:28:29.991388+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/415760", 
            "date_created": "2016-12-29 21:47:41.285848+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/415760\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=f9bfb72a1c0c0aff48ce20fc60ec37a92361db4b\nSubmitter: Jenkins\nBranch:    master\n\ncommit f9bfb72a1c0c0aff48ce20fc60ec37a92361db4b\nAuthor: Matt Riedemann <email address hidden>\nDate:   Thu Dec 29 16:44:22 2016 -0500\n\n    api-ref: add notes about POST/DELETE errors for os-tenant-networks\n    \n    After microversion 2.35 all of the os-tenant-networks methods will\n    return a 404 response. However, before that, if using neutron:\n    \n    - POST will return a 503 error because the NotImplementedError is\n      caught and translated to the 503.\n    - DELETE will return a 500 error because the NotImplementedError\n      is NOT caught so results in a 500.\n    \n    The API reference only noted that the API is deprecated since the\n    2.36 microversion but doesn't note that POST and DELETE are not\n    implemented, so this adds those details for unsuspecting victims.\n    \n    Change-Id: I7f256a4c1a6e4247698fcb5ee7c56128c517e29b\n    Closes-Bug: #1652252\n", 
            "date_created": "2017-01-05 20:17:37.336979+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b3 development milestone.", 
            "date_created": "2017-01-27 00:52:09.329046+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2017-01-05 20:17:35.293969+00:00"
}