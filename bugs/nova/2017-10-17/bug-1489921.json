{
    "status": "Invalid", 
    "last_updated": "2015-11-23 20:50:46.483202+00:00", 
    "description": "From rabbitmq log:\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\naccepting AMQP connection <0.15664.0> (10.0.2.26:55772 -> 10.0.2.8:5672)\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-security_group-update_fanout_c8d714e02b944c7f91dad2530a34ff01' in vhost '/': Adding mirror on node 'rabbit@os-controller-1003': <7448.19519.0>\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-dvr-update_fanout_87fb0fc8e8224ffb88ea91ee20ad8e29' in vhost '/': Adding mirror on node 'rabbit@os-controller-1002': <7447.3416.0>\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-dvr-update_fanout_87fb0fc8e8224ffb88ea91ee20ad8e29' in vhost '/': Adding mirror on node 'rabbit@os-controller-1003': <7448.19521.0>\n\n=ERROR REPORT==== 28-Aug-2015::10:54:20 ===\nclosing AMQP connection <0.15305.0> (10.0.2.26:55758 -> 10.0.2.8:5672):\n{handshake_error,starting,0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{amqp_error,access_refused,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"AMQPLAIN login refused: user 'openstack' - invalid credentials\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0'connection.start_ok'}}\n\n=INFO REPORT==== 28-Aug-2015::10:54:21 ===\naccepting AMQP connection <0.15747.0> (10.0.2.26:55773 -> 10.0.2.8:5672)\n\nFrom Nova Log:\n\n2015-08-28 10:54:19.524 14743 DEBUG oslo_concurrency.lockutils [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Lock \"compute_resources\" acquired by \"_update_available_resource\" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:444\n2015-08-28 10:54:19.827 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Total usable vcpus: 48, total allocated vcpus: 1\n2015-08-28 10:54:19.827 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Final resource view: name=osc-1001.prd.cin1.corp.hosting.net phys_ram=257524MB used_ram=2560MB phys_disk=5GB used_disk=20GB total_vcpus=48 used_vcpus=1 pci_stats=<nova.pci.stats.PciDeviceStats object at 0x3f80250>\n2015-08-28 10:54:19.886 14743 INFO nova.scheduler.client.report [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Compute_service record updated for ('osc-1001.prd.cin1.corp.hosting.net', 'osc-1001.prd.cin1.corp.hosting.net')\n2015-08-28 10:54:19.886 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Compute_service record updated for osc-1001.prd.cin1.corp.hosting.net:osc-1001.prd.cin1.corp.hosting.net\n2015-08-28 10:54:19.887 14743 DEBUG oslo_concurrency.lockutils [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Lock \"compute_resources\" released by \"_update_available_resource\" :: held 0.363s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:456\n2015-08-28 10:54:19.922 14743 DEBUG nova.service [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Creating RPC server for service compute start /usr/lib/python2.7/site-packages/nova/service.py:188\n2015-08-28 10:54:19.925 14743 INFO oslo_messaging._drivers.impl_rabbit [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Connecting to AMQP server on 10.0.2.8:5672\n2015-08-28 10:54:19.943 14743 INFO oslo_messaging._drivers.impl_rabbit [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Connected to AMQP server on 10.0.2.8:5672\n2015-08-28 10:54:19.969 14743 DEBUG nova.service [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Join ServiceGroup membership for this service compute start /usr/lib/python2.7/site-packages/nova/service.py:206\n2015-08-28 10:54:19.969 14743 DEBUG nova.servicegroup.drivers.db [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] DB_Driver: join new ServiceGroup member osc-1001.prd.cin1.corp.hosting.net to the compute group, service = <nova.service.Service object at 0x364f9d0> join /usr/lib/python2.7/site-packages/nova/servicegroup/drivers/db.py:59\n\nRabbit configuration in nova.conf\n[oslo_messaging_rabbit]\nrabbit_hosts=10.0.2.8:5672,10.0.2.7:5672,10.0.2.6:5672\nrabbit_userid=openstack\nrabbit_password=placeholderpassword\n\nFunctionality seems fine and nothing shows up in the nova log but rabbitmq references this hypervisor and with only the nova openstack service running i get the message.", 
    "tags": [
        "messaging", 
        "oslo"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1489921", 
    "owner": "None", 
    "id": 1489921, 
    "index": 6999, 
    "openned": "2015-08-28 14:56:46.859180+00:00", 
    "created": "2015-08-28 14:56:46.859180+00:00", 
    "title": "Nova connects to rabbitmq successfully but has invalid credentials", 
    "comments": [
        {
            "content": "From rabbitmq log:\n\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\naccepting AMQP connection <0.15664.0> (10.0.2.26:55772 -> 10.0.2.8:5672)\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-security_group-update_fanout_c8d714e02b944c7f91dad2530a34ff01' in vhost '/': Adding mirror on node 'rabbit@os-controller-1003': <7448.19519.0>\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-dvr-update_fanout_87fb0fc8e8224ffb88ea91ee20ad8e29' in vhost '/': Adding mirror on node 'rabbit@os-controller-1002': <7447.3416.0>\n\n=INFO REPORT==== 28-Aug-2015::10:54:20 ===\nMirrored queue 'q-agent-notifier-dvr-update_fanout_87fb0fc8e8224ffb88ea91ee20ad8e29' in vhost '/': Adding mirror on node 'rabbit@os-controller-1003': <7448.19521.0>\n\n=ERROR REPORT==== 28-Aug-2015::10:54:20 ===\nclosing AMQP connection <0.15305.0> (10.0.2.26:55758 -> 10.0.2.8:5672):\n{handshake_error,starting,0,\n                 {amqp_error,access_refused,\n                             \"AMQPLAIN login refused: user 'openstack' - invalid credentials\",\n                             'connection.start_ok'}}\n\n=INFO REPORT==== 28-Aug-2015::10:54:21 ===\naccepting AMQP connection <0.15747.0> (10.0.2.26:55773 -> 10.0.2.8:5672)\n\nFrom Nova Log:\n\n2015-08-28 10:54:19.524 14743 DEBUG oslo_concurrency.lockutils [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Lock \"compute_resources\" acquired by \"_update_available_resource\" :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:444\n2015-08-28 10:54:19.827 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Total usable vcpus: 48, total allocated vcpus: 1\n2015-08-28 10:54:19.827 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Final resource view: name=osc-1001.prd.cin1.corp.beyondhosting.net phys_ram=257524MB used_ram=2560MB phys_disk=5GB used_disk=20GB total_vcpus=48 used_vcpus=1 pci_stats=<nova.pci.stats.PciDeviceStats object at 0x3f80250>\n2015-08-28 10:54:19.886 14743 INFO nova.scheduler.client.report [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Compute_service record updated for ('osc-1001.prd.cin1.corp.beyondhosting.net', 'osc-1001.prd.cin1.corp.beyondhosting.net')\n2015-08-28 10:54:19.886 14743 INFO nova.compute.resource_tracker [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Compute_service record updated for osc-1001.prd.cin1.corp.beyondhosting.net:osc-1001.prd.cin1.corp.beyondhosting.net\n2015-08-28 10:54:19.887 14743 DEBUG oslo_concurrency.lockutils [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Lock \"compute_resources\" released by \"_update_available_resource\" :: held 0.363s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:456\n2015-08-28 10:54:19.922 14743 DEBUG nova.service [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Creating RPC server for service compute start /usr/lib/python2.7/site-packages/nova/service.py:188\n2015-08-28 10:54:19.925 14743 INFO oslo_messaging._drivers.impl_rabbit [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Connecting to AMQP server on 10.0.2.8:5672\n2015-08-28 10:54:19.943 14743 INFO oslo_messaging._drivers.impl_rabbit [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Connected to AMQP server on 10.0.2.8:5672\n2015-08-28 10:54:19.969 14743 DEBUG nova.service [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] Join ServiceGroup membership for this service compute start /usr/lib/python2.7/site-packages/nova/service.py:206\n2015-08-28 10:54:19.969 14743 DEBUG nova.servicegroup.drivers.db [req-91919deb-c6be-42a8-91f6-557f078f7d19 - - - - -] DB_Driver: join new ServiceGroup member osc-1001.prd.cin1.corp.beyondhosting.net to the compute group, service = <nova.service.Service object at 0x364f9d0> join /usr/lib/python2.7/site-packages/nova/servicegroup/drivers/db.py:59\n\n\nRabbit configuration in nova.conf\n[oslo_messaging_rabbit]\nrabbit_hosts=10.0.2.8:5672,10.0.2.7:5672,10.0.2.6:5672\nrabbit_userid=openstack\nrabbit_password=placeholderpassword\n\nFunctionality seems fine and nothing shows up in the nova log but rabbitmq references this hypervisor and with only the nova openstack service running i get the message.", 
            "date_created": "2015-08-28 14:56:46.859180+00:00", 
            "author": "https://api.launchpad.net/1.0/~tyler-bishop"
        }, 
        {
            "content": "This really isn't a nova bug, this section of the conf routes directly to oslo.messaging and nova never even knows it's a thing", 
            "date_created": "2015-09-23 14:05:35.580222+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I tried to reproduce this with later master.\nEverything works as expected\n\nhttp://paste.openstack.org/show/479110/", 
            "date_created": "2015-11-17 13:37:29.934904+00:00", 
            "author": "https://api.launchpad.net/1.0/~yportnova"
        }
    ], 
    "closed": "2015-09-23 14:05:07.357986+00:00"
}