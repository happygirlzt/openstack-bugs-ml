{
    "status": "Invalid", 
    "last_updated": "2011-06-27 13:09:56.153101+00:00", 
    "description": "i try to provide my images with /usr/bin/nova-objectstore. i can add new images, for example with uec-publish-tarball. now i try to spawn a new instance and end in a failed curl with exit status 22. any hints?\n\n# euca-describe-images \nIMAGE   ami-k9cu4h75    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-initrd.manifest.xml testing available       private         x86_64  ramdisk true\nIMAGE   ami-mwzbr0f1    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-vmlinuz.manifest.xml        testing available       private         x86_64  kernel          true\nIMAGE   ami-fbkjxwh2    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1.img.manifest.xml    testing available       private         x86_64  machine ami-k9cu4h75    ami-mwzbr0f1\n\n# euca-describe-instances \nRESERVATION     r-jp8e0b19      testing default\nINSTANCE        i-00000001      ami-fbkjxwh2    192.168.0.3     192.168.0.3     pending         testing (testing, mandarin)     0       m1.tiny         2011-02-06 21:05:21     nova\n\n\n\n2011-02-06 22:05:23,955 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-02-06 22:05:24,137 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 409, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 586, in _create_image\n(nova.exception): TRACE:     project=project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 534, in _cache_image\n(nova.exception): TRACE:     fn(target=base, *args, **kwargs)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 544, in _fetch_image\n(nova.exception): TRACE:     images.fetch(image_id, target, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 51, in fetch\n(nova.exception): TRACE:     return f(image, path, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 98, in _fetch_s3_image\n(nova.exception): TRACE:     return utils.execute(cmd_out)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/utils.py\", line 147, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: /usr/bin/curl --fail --silent http://xxxx:3333/_images/ami-mwzbr0f1/image -H 'Date: Sun, 06 Feb 2011 21:05:24 GMT' -H 'Authorization: AWS e819876e-ba07-4f87-816b-3a44a597d739:testing:96Z6b9ICjdud4rra2vZz6gHhkvo=' -o /var/lib/nova/instances/_base/ami-mwzbr0f1\n(nova.exception): TRACE: Exit code: 22\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: ''\n(nova.exception): TRACE:\n2011-02-06 22:05:24,161 ERROR nova.compute.manager [RNEUPJ7W-8FUAVL173HU admin testing] instance 1: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 211, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 122, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: /usr/bin/curl --fail --silent http://mandarin.colo.b1-systems.de:3333/_images/ami-mwzbr0f1/image -H 'Date: Sun, 06 Feb 2011 21:05:24 GMT' -H 'Authorization: AWS e819876e-ba07-4f87-816b-3a44a597d739:testing:96Z6b9ICjdud4rra2vZz6gHhkvo=' -o /var/lib/nova/instances/_base/ami-mwzbr0f1\n(nova.compute.manager): TRACE: Exit code: 22\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: ''\n(nova.compute.manager): TRACE:", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/714260", 
    "owner": "None", 
    "id": 714260, 
    "index": 3290, 
    "openned": "2011-02-06 21:12:28.848197+00:00", 
    "created": "2011-02-06 21:12:28.848197+00:00", 
    "title": "creating of new instance fails while using objectstore for images (curl exit code 22)", 
    "comments": [
        {
            "content": "i try to provide my images with /usr/bin/nova-objectstore. i can add new images, for example with uec-publish-tarball. now i try to spawn a new instance and end in a failed curl with exit status 22. any hints?\n\n# euca-describe-images \nIMAGE   ami-k9cu4h75    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-initrd.manifest.xml testing available       private         x86_64  ramdisk true\nIMAGE   ami-mwzbr0f1    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-vmlinuz.manifest.xml        testing available       private         x86_64  kernel          true\nIMAGE   ami-fbkjxwh2    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1.img.manifest.xml    testing available       private         x86_64  machine ami-k9cu4h75    ami-mwzbr0f1\n\n# euca-describe-instances \nRESERVATION     r-jp8e0b19      testing default\nINSTANCE        i-00000001      ami-fbkjxwh2    192.168.0.3     192.168.0.3     pending         testing (testing, mandarin)     0       m1.tiny         2011-02-06 21:05:21     nova\n\n\n\n2011-02-06 22:05:23,955 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-02-06 22:05:24,137 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 409, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 586, in _create_image\n(nova.exception): TRACE:     project=project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 534, in _cache_image\n(nova.exception): TRACE:     fn(target=base, *args, **kwargs)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 544, in _fetch_image\n(nova.exception): TRACE:     images.fetch(image_id, target, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 51, in fetch\n(nova.exception): TRACE:     return f(image, path, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 98, in _fetch_s3_image\n(nova.exception): TRACE:     return utils.execute(cmd_out)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/utils.py\", line 147, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: /usr/bin/curl --fail --silent http://xxxx:3333/_images/ami-mwzbr0f1/image -H 'Date: Sun, 06 Feb 2011 21:05:24 GMT' -H 'Authorization: AWS e819876e-ba07-4f87-816b-3a44a597d739:testing:96Z6b9ICjdud4rra2vZz6gHhkvo=' -o /var/lib/nova/instances/_base/ami-mwzbr0f1\n(nova.exception): TRACE: Exit code: 22\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: ''\n(nova.exception): TRACE:\n2011-02-06 22:05:24,161 ERROR nova.compute.manager [RNEUPJ7W-8FUAVL173HU admin testing] instance 1: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 211, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 122, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: /usr/bin/curl --fail --silent http://mandarin.colo.b1-systems.de:3333/_images/ami-mwzbr0f1/image -H 'Date: Sun, 06 Feb 2011 21:05:24 GMT' -H 'Authorization: AWS e819876e-ba07-4f87-816b-3a44a597d739:testing:96Z6b9ICjdud4rra2vZz6gHhkvo=' -o /var/lib/nova/instances/_base/ami-mwzbr0f1\n(nova.compute.manager): TRACE: Exit code: 22\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: ''\n(nova.compute.manager): TRACE:", 
            "date_created": "2011-02-06 21:12:28.848197+00:00", 
            "author": "https://api.launchpad.net/1.0/~berendt"
        }, 
        {
            "content": "Any chance that could be a duplicate of bug 708371 ? Try checking that the image is \"available\" before running euca-run-instances, see if you reproduce this error.", 
            "date_created": "2011-02-07 10:21:28.138558+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Status is available but image is not public (see stdout of euca-describe-images above). I set manually to public by editing the info.json files in /var/lib/nova/images/. But I still receive the error above.\n\nIMAGE   ami-fus1zwpz    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1.img.manifest.xml    testing available       public          x86_64  machine ami-s800hj3f    ami-912r3qh8\nIMAGE   ami-s800hj3f    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-initrd.manifest.xml testing available       public          x86_64  ramdisk true\nIMAGE   ami-912r3qh8    testing/ttylinux-uec-amd64-12.1_2.6.35-22_1-vmlinuz.manifest.xml        testing available       public          x86_64  kernel          true\n\nI think it's not the same like in #708371, because \"Precondition: Image status is \"decrpyting\" and is not available.\" My images are availabe and they are not decrypting...", 
            "date_created": "2011-02-07 11:58:37.062719+00:00", 
            "author": "https://api.launchpad.net/1.0/~berendt"
        }, 
        {
            "content": "cURL error 22 means HTTP server returns an error code that is >= 400.\n\nI certainly can't reproduce that... Any chance you could reproduce the error on current Cactus ?", 
            "date_created": "2011-03-16 10:41:25.198841+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I have the exact same error. The thing is it was working just fine earlier. ", 
            "date_created": "2011-03-18 17:22:00.094208+00:00", 
            "author": "https://api.launchpad.net/1.0/~sonali2197"
        }, 
        {
            "content": "I fixed my error! The image registered using uec-publish-tarball doesn't get bundled right. i.e. it is supposed to create like 20 parts but only 2 are created, If you use the manual registering process described here: http://wiki.openstack.org/RunningNova/ManualImageRegistration , it works just fine\n\nNote: You do not have to register the ramdisk\n\nHTH!", 
            "date_created": "2011-03-21 20:15:36.082517+00:00", 
            "author": "https://api.launchpad.net/1.0/~sonali2197"
        }, 
        {
            "content": "@Christian: did you reproduce that with the released version ?", 
            "date_created": "2011-05-02 14:26:38.889220+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Closing in absence of response from reporter. Please reopen if you can still reproduce with current version.", 
            "date_created": "2011-06-27 13:09:54.544884+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2011-06-27 13:09:55.257336+00:00"
}