{
    "status": "Fix Released", 
    "last_updated": "2011-04-21 07:13:57.038190+00:00", 
    "description": "We are trying to run new instances through AWS JAVA SDK. the instance starts normally, but the response from the server breaks the API . Here is the exact exception:\n\n578 [main] ERROR com.amazonaws.http.HttpClient  - Unable to unmarshall response (For input string: \"\"): \njava.lang.NumberFormatException: For input string: \"\"\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n\tat java.lang.Integer.parseInt(Integer.java:470)\n\tat java.lang.Integer.parseInt(Integer.java:499)\n\tat com.amazonaws.transform.SimpleTypeStaxUnmarshallers$IntegerStaxUnmarshaller.unmarshall(SimpleTypeStaxUnmarshallers.java:77)\n\tat com.amazonaws.services.ec2.model.transform.InstanceStateStaxUnmarshaller.unmarshall(InstanceStateStaxUnmarshaller.java:51)\n\tat com.amazonaws.services.ec2.model.transform.InstanceStaxUnmarshaller.unmarshall(InstanceStaxUnmarshaller.java:59)\n\tat com.amazonaws.services.ec2.model.transform.ReservationStaxUnmarshaller.unmarshall(ReservationStaxUnmarshaller.java:67)\n\tat com.amazonaws.services.ec2.model.transform.DescribeInstancesResultStaxUnmarshaller.unmarshall(DescribeInstancesResultStaxUnmarshaller.java:51)\n\tat com.amazonaws.services.ec2.model.transform.DescribeInstancesResultStaxUnmarshaller.unmarshall(DescribeInstancesResultStaxUnmarshaller.java:33)\n\tat com.amazonaws.http.StaxResponseHandler.handle(StaxResponseHandler.java:126)\n\tat com.amazonaws.http.StaxResponseHandler.handle(StaxResponseHandler.java:36)\n\tat com.amazonaws.http.HttpClient.handleResponse(HttpClient.java:383)\n\tat com.amazonaws.http.HttpClient.execute(HttpClient.java:157)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.invoke(AmazonEC2Client.java:3639)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.describeInstances(AmazonEC2Client.java:456)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.describeInstances(AmazonEC2Client.java:3061)\n\tat com.sap.qa.Connect.main(Connect.java:112)\n\n\n\nxmlns=\"http://ec2.amazonaws.com/doc/2010-06-15/\"><requestId>AZ8DPR5PW3NEDR52MI7W</requestId><ownerId>Main</ownerId><groupSet><item><groupId>default</groupId></item></groupSet><reservationId>r-dw1p8hys</reservationId><instancesSet><item><displayDescription/><displayName>Server 6</displayName><keyName>None (Main, None)</keyName><instanceId>i-00000006</instanceId><instanceState><code/><name>scheduling</name></instanceState><publicDnsName/><imageId>ami-crgu85uu</imageId><productCodesSet/><privateDnsName/><dnsName/><launchTime>2011-02-14 19:31:41.194843</launchTime><placement><availabilityZone>unknown zone</availabilityZone></placement><amiLaunchIndex>0</amiLaunchIndex><instanceType>m1.small</instanceType></item></instancesSet></RunInstancesResponse>\n\n\nThe exact problem in the response that breaks the API is that the return status code does not contain any number it is just <code/> and this doesn't pass the integer parser in the AWS SDK.\n\ncould you please change the behavior so that a status code is returned for every status. Thanks", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/721254", 
    "owner": "https://api.launchpad.net/1.0/~ken-pepple", 
    "id": 721254, 
    "index": 2285, 
    "openned": "2011-02-18 13:12:13.347536+00:00", 
    "created": "2011-02-18 13:12:13.347536+00:00", 
    "title": "nova returns no status code for state scheduling", 
    "comments": [
        {
            "content": "We are trying to run new instances through AWS JAVA SDK. the instance starts normally, but the response from the server breaks the API . Here is the exact exception:\n\n578 [main] ERROR com.amazonaws.http.HttpClient  - Unable to unmarshall response (For input string: \"\"): \njava.lang.NumberFormatException: For input string: \"\"\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n\tat java.lang.Integer.parseInt(Integer.java:470)\n\tat java.lang.Integer.parseInt(Integer.java:499)\n\tat com.amazonaws.transform.SimpleTypeStaxUnmarshallers$IntegerStaxUnmarshaller.unmarshall(SimpleTypeStaxUnmarshallers.java:77)\n\tat com.amazonaws.services.ec2.model.transform.InstanceStateStaxUnmarshaller.unmarshall(InstanceStateStaxUnmarshaller.java:51)\n\tat com.amazonaws.services.ec2.model.transform.InstanceStaxUnmarshaller.unmarshall(InstanceStaxUnmarshaller.java:59)\n\tat com.amazonaws.services.ec2.model.transform.ReservationStaxUnmarshaller.unmarshall(ReservationStaxUnmarshaller.java:67)\n\tat com.amazonaws.services.ec2.model.transform.DescribeInstancesResultStaxUnmarshaller.unmarshall(DescribeInstancesResultStaxUnmarshaller.java:51)\n\tat com.amazonaws.services.ec2.model.transform.DescribeInstancesResultStaxUnmarshaller.unmarshall(DescribeInstancesResultStaxUnmarshaller.java:33)\n\tat com.amazonaws.http.StaxResponseHandler.handle(StaxResponseHandler.java:126)\n\tat com.amazonaws.http.StaxResponseHandler.handle(StaxResponseHandler.java:36)\n\tat com.amazonaws.http.HttpClient.handleResponse(HttpClient.java:383)\n\tat com.amazonaws.http.HttpClient.execute(HttpClient.java:157)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.invoke(AmazonEC2Client.java:3639)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.describeInstances(AmazonEC2Client.java:456)\n\tat com.amazonaws.services.ec2.AmazonEC2Client.describeInstances(AmazonEC2Client.java:3061)\n\tat com.sap.qa.Connect.main(Connect.java:112)\n\n\n\nxmlns=\"http://ec2.amazonaws.com/doc/2010-06-15/\"><requestId>AZ8DPR5PW3NEDR52MI7W</requestId><ownerId>Main</ownerId><groupSet><item><groupId>default</groupId></item></groupSet><reservationId>r-dw1p8hys</reservationId><instancesSet><item><displayDescription/><displayName>Server 6</displayName><keyName>None (Main, None)</keyName><instanceId>i-00000006</instanceId><instanceState><code/><name>scheduling</name></instanceState><publicDnsName/><imageId>ami-crgu85uu</imageId><productCodesSet/><privateDnsName/><dnsName/><launchTime>2011-02-14 19:31:41.194843</launchTime><placement><availabilityZone>unknown zone</availabilityZone></placement><amiLaunchIndex>0</amiLaunchIndex><instanceType>m1.small</instanceType></item></instancesSet></RunInstancesResponse>\n\n\nThe exact problem in the response that breaks the API is that the return status code does not contain any number it is just <code/> and this doesn't pass the integer parser in the AWS SDK.\n\ncould you please change the behavior so that a status code is returned for every status. Thanks", 
            "date_created": "2011-02-18 13:12:13.347536+00:00", 
            "author": "https://api.launchpad.net/1.0/~bobya"
        }, 
        {
            "content": "Hi Ken,\nI see you've taken this bug also :)\nAs it took some time we did some investigation and found out that the problem comes from the default options set at the beginning. They are located in \"nova/compute/api.py\"\n\nWe added a line like this:\n\n.................\nbase_options = {\n            'reservation_id': utils.generate_uid('r'),\n            'image_id': image_id,\n            'kernel_id': kernel_id or '',\n            'ramdisk_id': ramdisk_id or '',\n+++     'state': '0',\n            'state_description': 'scheduling',\n.................\n\nafter that every new instance that we started had the code \"0\" for the scheduling state.\n\nAs I am not sure this is the correct way to fix it I am only suggesting here the method we found.", 
            "date_created": "2011-02-23 11:42:06.547494+00:00", 
            "author": "https://api.launchpad.net/1.0/~bobya"
        }, 
        {
            "content": "bobya -- sorry for the delay. yes, i believe that is the correct short term fix. pushing for merge into trunk.\n", 
            "date_created": "2011-03-09 22:23:28.729059+00:00", 
            "author": "https://api.launchpad.net/1.0/~ken-pepple"
        }
    ], 
    "closed": "2011-04-21 07:13:55.369864+00:00"
}