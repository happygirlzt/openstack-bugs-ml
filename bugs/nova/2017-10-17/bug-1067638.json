{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:02:52.679685+00:00", 
    "description": "2012-10-17 15:24:01 DEBUG nova.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_request_id': u'req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0', u'_context_quota_class': None, u'_context_project_name': u'openstackDemo', u'_context_service_catalog': [{u'endpoints': [{u'adminURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'id': u'12db07ec1e1a4549a76c9bc66507646f', u'publicURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'compute', u'name': u'nova'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:9292/v1', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:9292/v1', u'id': u'66abd7a7fbf943818d57394dbfc3b504', u'publicURL': u'http://127.0.0.1:9292/v1'}], u'endpoints_links': [], u'type': u'image', u'name': u'glance'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'id': u'3e35d6ec64e9402ea15185330cb58697', u'publicURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'volume', u'name': u'volume'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8773/services/Admin', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8773/services/Cloud', u'id': u'c0174be797814fd0a4b91639671ca608', u'publicURL': u'http://127.0.0.1:8773/services/Cloud'}], u'endpoints_links': [], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8888/v1', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'id': u'3406f89996a6480382d9222e623f41fd', u'publicURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'object-store', u'name': u'swift'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:35357/v2.0', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:5000/v2.0', u'id': u'ffac368c723849cbb22e031fdba30e71', u'publicURL': u'http://127.0.0.1:5000/v2.0'}], u'endpoints_links': [], u'type': u'identity', u'name': u'keystone'}], u'_context_user_name': u'admin', u'_context_auth_token': '<SANITIZED>', u'args': {u'instance': {u'vm_state': u'active', u'availability_zone': None, u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 2, u'user_data': None, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-onry39cm', u'id': 5, u'security_groups': [{u'deleted_at': None, u'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'name': u'default', u'deleted': False, u'created_at': u'2012-10-16T15:44:30.000000', u'updated_at': None, u'rules': [], u'project_id': u'3da486c9a3334828963305112e24a635', u'id': 1, u'description': u'default'}], u'disable_terminate': False, u'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'uuid': u'9a95e394-715e-4db5-8a50-5becae2676c9', u'server_name': None, u'default_swap_device': None, u'info_cache': {u'instance_uuid': u'9a95e394-715e-4db5-8a50-5becae2676c9', u'deleted': False, u'created_at': u'2012-10-17T07:19:44.000000', u'updated_at': u'2012-10-17T07:19:47.000000', u'network_info': u'[{\"network\": {\"bridge\": \"virbr0\", \"subnets\": [{\"ips\": [{\"meta\": {}, \"version\": 4, \"type\": \"fixed\", \"floating_ips\": [], \"address\": \"10.0.1.34\"}], \"version\": 4, \"meta\": {\"dhcp_server\": \"10.0.1.33\"}, \"dns\": [{\"meta\": {}, \"version\": 4, \"type\": \"dns\", \"address\": \"8.8.4.4\"}], \"routes\": [], \"cidr\": \"10.0.1.32/27\", \"gateway\": {\"meta\": {}, \"version\": 4, \"type\": \"gateway\", \"address\": \"10.0.1.33\"}}, {\"ips\": [], \"version\": null, \"meta\": {\"dhcp_server\": null}, \"dns\": [], \"routes\": [], \"cidr\": null, \"gateway\": {\"meta\": {}, \"version\": null, \"type\": \"gateway\", \"address\": null}}], \"meta\": {\"tenant_id\": null, \"should_create_bridge\": true, \"bridge_interface\": \"eth1\"}, \"id\": \"a80ac3af-14ff-472f-89cc-e63aa7b1d1e7\", \"label\": \"private\"}, \"meta\": {}, \"id\": \"868ee5d8-3f06-46cb-bf9c-1f8f822d4927\", \"address\": \"fa:16:3e:68:05:d9\"}]', u'deleted_at': None, u'id': 5}, u'hostname': u'test', u'launched_on': u'ubuntu', u'display_description': u'Test', u'key_data': None, u'kernel_id': u'', u'power_state': 1, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'3da486c9a3334828963305112e24a635', u'launched_at': u'2012-10-17T07:19:53.000000', u'scheduled_at': u'2012-10-17T07:19:44.000000', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2012-10-17T07:19:53.000000', u'host': u'ubuntu', u'display_name': u'Test', u'task_state': None, u'shutdown_terminate': False, u'architecture': None, u'root_gb': 0, u'locked': False, u'name': u'instance-00000005', u'created_at': u'2012-10-17T07:19:44.000000', u'launch_index': 0, u'metadata': [], u'memory_mb': 512, u'instance_type': {u'disabled': False, u'root_gb': 0, u'deleted_at': None, u'name': u'm1.tiny', u'deleted': False, u'created_at': None, u'ephemeral_gb': 0, u'updated_at': None, u'memory_mb': 512, u'vcpus': 1, u'swap': 0, u'rxtx_factor': 1.0, u'is_public': True, u'flavorid': u'1', u'vcpu_weight': None, u'id': 2}, u'vcpus': 1, u'image_ref': u'fd0a762a-305f-4f5d-9e4a-f635beb26225', u'root_device_name': u'/dev/a', u'auto_disk_config': None, u'os_type': None, u'config_drive': u''}, u'volume_id': u'289baefa-45bd-4ce8-a046-d91949bf6437'}, u'_context_instance_lock_checked': False, u'_context_is_admin': True, u'version': u'2.0', u'_context_project_id': u'3da486c9a3334828963305112e24a635', u'_context_timestamp': u'2012-10-17T07:24:01.103316', u'_context_read_deleted': u'no', u'_context_user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'method': u'detach_volume', u'_context_remote_address': u'127.0.0.1'} from (pid=1290) _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2012-10-17 15:24:01 DEBUG nova.openstack.common.rpc.amqp [-] unpacked context: {'project_name': u'openstackDemo', 'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', 'roles': [u'admin'], 'timestamp': u'2012-10-17T07:24:01.103316', 'auth_token': '<SANITIZED>', 'remote_address': u'127.0.0.1', 'quota_class': None, 'is_admin': True, 'service_catalog': [{u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'id': u'12db07ec1e1a4549a76c9bc66507646f'}], u'type': u'compute', u'name': u'nova'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:9292/v1', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:9292/v1', u'internalURL': u'http://127.0.0.1:9292/v1', u'id': u'66abd7a7fbf943818d57394dbfc3b504'}], u'type': u'image', u'name': u'glance'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'id': u'3e35d6ec64e9402ea15185330cb58697'}], u'type': u'volume', u'name': u'volume'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8773/services/Admin', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8773/services/Cloud', u'internalURL': u'http://127.0.0.1:8773/services/Cloud', u'id': u'c0174be797814fd0a4b91639671ca608'}], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8888/v1', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'id': u'3406f89996a6480382d9222e623f41fd'}], u'type': u'object-store', u'name': u'swift'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:35357/v2.0', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:5000/v2.0', u'internalURL': u'http://127.0.0.1:5000/v2.0', u'id': u'ffac368c723849cbb22e031fdba30e71'}], u'type': u'identity', u'name': u'keystone'}], 'request_id': u'req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0', 'instance_lock_checked': False, 'project_id': u'3da486c9a3334828963305112e24a635', 'user_name': u'admin', 'read_deleted': u'no'} from (pid=1290) _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2012-10-17 15:24:01 AUDIT nova.compute.manager [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Detach volume 289baefa-45bd-4ce8-a046-d91949bf6437 from mountpoint /dev/b\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=1290) inner /usr/lib/python2.7/dist-packages/nova/utils.py:713\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --op update -n node.startup -v manual from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:01 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--op', 'update', '-n', 'node.startup', '-v', 'manual'): stdout= stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --logout from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:02 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--logout',): stdout=Logging out of session [sid: 1, target: iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437, portal: 10.0.2.15,3260]\nLogout of [sid: 1, target: iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437, portal: 10.0.2.15,3260]: successful\n stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --op delete from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:02 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--op', 'delete'): stdout= stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:02 ERROR nova.compute.manager [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Faild to detach volume 289baefa-45bd-4ce8-a046-d91949bf6437 from /dev/b\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Traceback (most recent call last):\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2017, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     mp)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 698, in detach_volume\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     raise exception.DiskNotFound(location=mount_device)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] DiskNotFound: No disk at b\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] \n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Got semaphore \"compute_resources\" for method \"update_usage\"... from (pid=1290) inner /usr/lib/python2.7/dist-packages/nova/utils.py:713\n2012-10-17 15:24:02 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     pass\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 196, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2033, in detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self._detach_volume(context, instance, bdm)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2024, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.volume_api.roll_detaching(context, volume)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2017, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     mp)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 698, in detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     raise exception.DiskNotFound(location=mount_device)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp DiskNotFound: No disk at b\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1067638", 
    "owner": "https://api.launchpad.net/1.0/~zulcss", 
    "id": 1067638, 
    "index": 3107, 
    "openned": "2012-10-17 07:34:39.352448+00:00", 
    "created": "2012-10-17 07:34:39.352448+00:00", 
    "title": "Cannot detach volume from LXC instance", 
    "comments": [
        {
            "content": "2012-10-17 15:24:01 DEBUG nova.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_request_id': u'req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0', u'_context_quota_class': None, u'_context_project_name': u'openstackDemo', u'_context_service_catalog': [{u'endpoints': [{u'adminURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'id': u'12db07ec1e1a4549a76c9bc66507646f', u'publicURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'compute', u'name': u'nova'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:9292/v1', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:9292/v1', u'id': u'66abd7a7fbf943818d57394dbfc3b504', u'publicURL': u'http://127.0.0.1:9292/v1'}], u'endpoints_links': [], u'type': u'image', u'name': u'glance'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'id': u'3e35d6ec64e9402ea15185330cb58697', u'publicURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'volume', u'name': u'volume'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8773/services/Admin', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8773/services/Cloud', u'id': u'c0174be797814fd0a4b91639671ca608', u'publicURL': u'http://127.0.0.1:8773/services/Cloud'}], u'endpoints_links': [], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:8888/v1', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'id': u'3406f89996a6480382d9222e623f41fd', u'publicURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635'}], u'endpoints_links': [], u'type': u'object-store', u'name': u'swift'}, {u'endpoints': [{u'adminURL': u'http://127.0.0.1:35357/v2.0', u'region': u'RegionOne', u'internalURL': u'http://127.0.0.1:5000/v2.0', u'id': u'ffac368c723849cbb22e031fdba30e71', u'publicURL': u'http://127.0.0.1:5000/v2.0'}], u'endpoints_links': [], u'type': u'identity', u'name': u'keystone'}], u'_context_user_name': u'admin', u'_context_auth_token': '<SANITIZED>', u'args': {u'instance': {u'vm_state': u'active', u'availability_zone': None, u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 2, u'user_data': None, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-onry39cm', u'id': 5, u'security_groups': [{u'deleted_at': None, u'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'name': u'default', u'deleted': False, u'created_at': u'2012-10-16T15:44:30.000000', u'updated_at': None, u'rules': [], u'project_id': u'3da486c9a3334828963305112e24a635', u'id': 1, u'description': u'default'}], u'disable_terminate': False, u'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'uuid': u'9a95e394-715e-4db5-8a50-5becae2676c9', u'server_name': None, u'default_swap_device': None, u'info_cache': {u'instance_uuid': u'9a95e394-715e-4db5-8a50-5becae2676c9', u'deleted': False, u'created_at': u'2012-10-17T07:19:44.000000', u'updated_at': u'2012-10-17T07:19:47.000000', u'network_info': u'[{\"network\": {\"bridge\": \"virbr0\", \"subnets\": [{\"ips\": [{\"meta\": {}, \"version\": 4, \"type\": \"fixed\", \"floating_ips\": [], \"address\": \"10.0.1.34\"}], \"version\": 4, \"meta\": {\"dhcp_server\": \"10.0.1.33\"}, \"dns\": [{\"meta\": {}, \"version\": 4, \"type\": \"dns\", \"address\": \"8.8.4.4\"}], \"routes\": [], \"cidr\": \"10.0.1.32/27\", \"gateway\": {\"meta\": {}, \"version\": 4, \"type\": \"gateway\", \"address\": \"10.0.1.33\"}}, {\"ips\": [], \"version\": null, \"meta\": {\"dhcp_server\": null}, \"dns\": [], \"routes\": [], \"cidr\": null, \"gateway\": {\"meta\": {}, \"version\": null, \"type\": \"gateway\", \"address\": null}}], \"meta\": {\"tenant_id\": null, \"should_create_bridge\": true, \"bridge_interface\": \"eth1\"}, \"id\": \"a80ac3af-14ff-472f-89cc-e63aa7b1d1e7\", \"label\": \"private\"}, \"meta\": {}, \"id\": \"868ee5d8-3f06-46cb-bf9c-1f8f822d4927\", \"address\": \"fa:16:3e:68:05:d9\"}]', u'deleted_at': None, u'id': 5}, u'hostname': u'test', u'launched_on': u'ubuntu', u'display_description': u'Test', u'key_data': None, u'kernel_id': u'', u'power_state': 1, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'3da486c9a3334828963305112e24a635', u'launched_at': u'2012-10-17T07:19:53.000000', u'scheduled_at': u'2012-10-17T07:19:44.000000', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2012-10-17T07:19:53.000000', u'host': u'ubuntu', u'display_name': u'Test', u'task_state': None, u'shutdown_terminate': False, u'architecture': None, u'root_gb': 0, u'locked': False, u'name': u'instance-00000005', u'created_at': u'2012-10-17T07:19:44.000000', u'launch_index': 0, u'metadata': [], u'memory_mb': 512, u'instance_type': {u'disabled': False, u'root_gb': 0, u'deleted_at': None, u'name': u'm1.tiny', u'deleted': False, u'created_at': None, u'ephemeral_gb': 0, u'updated_at': None, u'memory_mb': 512, u'vcpus': 1, u'swap': 0, u'rxtx_factor': 1.0, u'is_public': True, u'flavorid': u'1', u'vcpu_weight': None, u'id': 2}, u'vcpus': 1, u'image_ref': u'fd0a762a-305f-4f5d-9e4a-f635beb26225', u'root_device_name': u'/dev/a', u'auto_disk_config': None, u'os_type': None, u'config_drive': u''}, u'volume_id': u'289baefa-45bd-4ce8-a046-d91949bf6437'}, u'_context_instance_lock_checked': False, u'_context_is_admin': True, u'version': u'2.0', u'_context_project_id': u'3da486c9a3334828963305112e24a635', u'_context_timestamp': u'2012-10-17T07:24:01.103316', u'_context_read_deleted': u'no', u'_context_user_id': u'013bd930da8d4b7ea90dcd9017f13f51', u'method': u'detach_volume', u'_context_remote_address': u'127.0.0.1'} from (pid=1290) _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2012-10-17 15:24:01 DEBUG nova.openstack.common.rpc.amqp [-] unpacked context: {'project_name': u'openstackDemo', 'user_id': u'013bd930da8d4b7ea90dcd9017f13f51', 'roles': [u'admin'], 'timestamp': u'2012-10-17T07:24:01.103316', 'auth_token': '<SANITIZED>', 'remote_address': u'127.0.0.1', 'quota_class': None, 'is_admin': True, 'service_catalog': [{u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8774/v2/3da486c9a3334828963305112e24a635', u'id': u'12db07ec1e1a4549a76c9bc66507646f'}], u'type': u'compute', u'name': u'nova'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:9292/v1', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:9292/v1', u'internalURL': u'http://127.0.0.1:9292/v1', u'id': u'66abd7a7fbf943818d57394dbfc3b504'}], u'type': u'image', u'name': u'glance'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8776/v1/3da486c9a3334828963305112e24a635', u'id': u'3e35d6ec64e9402ea15185330cb58697'}], u'type': u'volume', u'name': u'volume'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8773/services/Admin', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8773/services/Cloud', u'internalURL': u'http://127.0.0.1:8773/services/Cloud', u'id': u'c0174be797814fd0a4b91639671ca608'}], u'type': u'ec2', u'name': u'ec2'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:8888/v1', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'internalURL': u'http://127.0.0.1:8888/v1/AUTH_3da486c9a3334828963305112e24a635', u'id': u'3406f89996a6480382d9222e623f41fd'}], u'type': u'object-store', u'name': u'swift'}, {u'endpoints_links': [], u'endpoints': [{u'adminURL': u'http://127.0.0.1:35357/v2.0', u'region': u'RegionOne', u'publicURL': u'http://127.0.0.1:5000/v2.0', u'internalURL': u'http://127.0.0.1:5000/v2.0', u'id': u'ffac368c723849cbb22e031fdba30e71'}], u'type': u'identity', u'name': u'keystone'}], 'request_id': u'req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0', 'instance_lock_checked': False, 'project_id': u'3da486c9a3334828963305112e24a635', 'user_name': u'admin', 'read_deleted': u'no'} from (pid=1290) _safe_log /usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/common.py:195\n2012-10-17 15:24:01 AUDIT nova.compute.manager [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Detach volume 289baefa-45bd-4ce8-a046-d91949bf6437 from mountpoint /dev/b\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Got semaphore \"connect_volume\" for method \"disconnect_volume\"... from (pid=1290) inner /usr/lib/python2.7/dist-packages/nova/utils.py:713\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --op update -n node.startup -v manual from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:01 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--op', 'update', '-n', 'node.startup', '-v', 'manual'): stdout= stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:01 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --logout from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:02 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--logout',): stdout=Logging out of session [sid: 1, target: iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437, portal: 10.0.2.15,3260]\nLogout of [sid: 1, target: iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437, portal: 10.0.2.15,3260]: successful\n stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf iscsiadm -m node -T iqn.2010-10.org.openstack:volume-289baefa-45bd-4ce8-a046-d91949bf6437 -p 10.0.2.15:3260 --op delete from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:176\n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Result was 0 from (pid=1290) execute /usr/lib/python2.7/dist-packages/nova/utils.py:191\n2012-10-17 15:24:02 DEBUG nova.virt.libvirt.volume [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] iscsiadm ('--op', 'delete'): stdout= stderr= from (pid=1290) _run_iscsiadm /usr/lib/python2.7/dist-packages/nova/virt/libvirt/volume.py:108\n2012-10-17 15:24:02 ERROR nova.compute.manager [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Faild to detach volume 289baefa-45bd-4ce8-a046-d91949bf6437 from /dev/b\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] Traceback (most recent call last):\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2017, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     mp)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 698, in detach_volume\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9]     raise exception.DiskNotFound(location=mount_device)\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] DiskNotFound: No disk at b\n2012-10-17 15:24:02 TRACE nova.compute.manager [instance: 9a95e394-715e-4db5-8a50-5becae2676c9] \n2012-10-17 15:24:02 DEBUG nova.utils [req-ece24d0a-1f2e-4b3d-80be-1e72923bbcb0 013bd930da8d4b7ea90dcd9017f13f51 3da486c9a3334828963305112e24a635] Got semaphore \"compute_resources\" for method \"update_usage\"... from (pid=1290) inner /usr/lib/python2.7/dist-packages/nova/utils.py:713\n2012-10-17 15:24:02 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     pass\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 196, in decorated_function\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2033, in detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self._detach_volume(context, instance, bdm)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2024, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.volume_api.roll_detaching(context, volume)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2017, in _detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     mp)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 698, in detach_volume\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp     raise exception.DiskNotFound(location=mount_device)\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp DiskNotFound: No disk at b\n2012-10-17 15:24:02 TRACE nova.openstack.common.rpc.amqp", 
            "date_created": "2012-10-17 07:34:39.352448+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "An ugly solution. ;)", 
            "date_created": "2012-10-17 15:08:42.409205+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "we need a better solution for sure. This will fail if the compute daemon is restarted because it will lose the cgroup info.", 
            "date_created": "2012-10-22 21:42:06.640942+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Add device operations support for libvirt (lxc):\n1. lxcDomainAttachDevice\n2. lxcDomainAttachDeviceFlags\n3. lxcDomainDetachDevice\n4. lxcDomainDetachDeviceFlags\n5. lxcDomainUpdateDeviceFlags\n\nIn live mode, set devices.allow/deny to instance's cgroup and insert disk config into current domain.\nIn config mode, just insert disk config into current domain.", 
            "date_created": "2012-10-23 11:59:35.283161+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "Rewrite volume support for lxc hypervisor:\n1. Add a prefix '/dev/vd' for connection_type = 'libvirt'.\n2. Move cgroup operations into libvirt. (See previous patch)\n3. Remove device node bind because the '/dev/' is tmpfs in guest os.\n4. Attach/detach volume are  same as qemu: call virt_dom.attachDevice(), virt_dom.detachDevice().", 
            "date_created": "2012-10-23 12:09:08.325501+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "The libvirt lxc patch is awesome why hasnt it been pushed upstream yet? I could do the leg work for you if you wish.", 
            "date_created": "2012-10-23 12:49:24.703962+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "Pushed, but not reply. Thank you very much!  ;)", 
            "date_created": "2012-10-23 14:29:54.646641+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "[libvirt] Add device operations for lxc version 1:\n1. Fix up memory leaks.\n2. Fix up disk type check.\n3. Fix up cgroup info restore after stop/start.", 
            "date_created": "2012-10-24 03:40:28.195770+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "Attach/detach volume by libvirt, same as qemu.", 
            "date_created": "2012-10-24 07:43:38.585882+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "Fix up create volume device node file.\n\nTrigger the add uevent for new volume device after device attached by libvirt (cgroup info writed) in host os.\n\nIn guest os, udev daemon will create the node files for new volume device.", 
            "date_created": "2012-10-24 07:44:17.677796+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "Fix up attach volume mountpoint for lxc.", 
            "date_created": "2012-10-25 08:00:09.433992+00:00", 
            "author": "https://api.launchpad.net/1.0/~493pocbrcycmdw7yksonho9o2qzzq06652mtv6nw767dautd9im529ah6jlqded37-admin-d18ecat4t1b76tkfi3vttrkfngli4hci2jxl2sxy9j3h0x9j9k8q3kmsgvp7txaqo"
        }, 
        {
            "content": "Heiher, I see you've not had any response yet to the libvirt patch:\nhttp://www.redhat.com/archives/libvir-list/2012-October/msg01389.html\n\nIn any case we can't rely on that for a long time,\nso we'll need to come up with something else in the meantime?\n\nChuck, you proposed the patch at comment 9 in\nhttps://review.openstack.org/#/c/14698\nDoesn't that depend on the libvirt patch??\nAlso I'd much prefer for Heiher to apply his patches directly.\nHeiher have you considered going through the new dev signup process?\n", 
            "date_created": "2012-11-01 11:06:45.222053+00:00", 
            "author": "https://api.launchpad.net/1.0/~p-draigbrady"
        }, 
        {
            "content": "I've no cycles for this now.\r\nI'd like to get a response from Chuck too as I'm a bit confused about the patches proposed here so far.\r\n", 
            "date_created": "2012-11-05 15:15:39.328956+00:00", 
            "author": "https://api.launchpad.net/1.0/~p-draigbrady"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/17861\nCommitted: http://github.com/openstack/nova/commit/b8831091a8d097bb55a0e65c3af254a8bfa88811\nSubmitter: Jenkins\nBranch:    master\n\ncommit b8831091a8d097bb55a0e65c3af254a8bfa88811\nAuthor: Chuck Short <email address hidden>\nDate:   Tue Dec 11 10:02:28 2012 -0600\n\n    Remove lxc attaching/detaching of volumes\n    \n    Remove lxc attach and detach of volumes since this\n    will be handled by libvirt in upcoming versions of\n    libvirt.\n    \n    This is expected to be in libvirt 1.0.1 or 1.0.2.\n    This resolves (LP: #1067638) and (LP: #1009701)\n    \n    This removes a non-functional feature of the\n    lxc driver with functionalilty that is coming\n    with newer versions of libvirt.\n    \n    Change-Id: Iaf4bc2769632ba2e7dcfc67892dded7b4dfbb3ae\n    Signed-off-by: Chuck Short <email address hidden>\n", 
            "date_created": "2012-12-28 11:25:20.078953+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-01-09 10:21:13.003599+00:00"
}