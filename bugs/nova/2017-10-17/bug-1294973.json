{
    "status": "Opinion", 
    "last_updated": "2014-08-28 15:22:37.423264+00:00", 
    "description": "1. Bring down the glance\nStopping openstack-glance-api:                             [  OK  ]\nStopping openstack-glance-registry:                        [  OK  ]\n[root@nimbuswrkl665 images]#\n2. Invoke createImage operation for the server.\n\nmanjunath@manjunath-ThinkPad-T420:\u02dc/Desktop$ curl -k -i -X POST -H \"X-Auth-Token: 6928aacccede46d7921c57fb827cd9be\" -H \"Content-Type: application/json\"  -d '{\"createImage\": {\"name\": \"vm1_failed\", \"metadata\": {}}}' https://nimbuswrkl665.rtp.stglabs.ibm.com/powervc/openstack/compute/v2/dd73d8ab4ea7498e8d103206e37c65b5/servers/93476dc9-c70e-4b73-af3e-1309fecdaf95/action\n\nResponse :\n\nHTTP/1.1 500 Internal Server Error\nDate: Mon, 10 Mar 2014 14:34:27 GMT\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-75d8138c-1d32-4bb7-888f-7aa48bdd2011\nCache-control: no-cache\nPragma: no-cache\nContent-Length: 128\nConnection: close\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}manjunath@manjunath-Thimanjunath@manjunath-ThinkPad-T420:\u02dc/Desktop$\n\n\nMessage needs to be Improved, I could see clear message in api.log but it is not passing to the REST call.!\n\n2014-03-10 10:34:27.130 4713 ERROR nova.image.glance [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] Error contacting glance server '9.37.74.232:9292' for 'get', retrying.\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance Traceback (most recent call last):\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 211, in call\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     return getattr(client.images, method)(*args, **kwargs)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/v1/images.py\", line 114, in get\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     % urllib.quote(str(image_id)))\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 289, in raw_request\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     return self._http_request(url, method, **kwargs)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 235, in _http_request\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     raise exc.CommunicationError(message=message)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance CommunicationError: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance\n2014-03-10 10:34:27.240 4713 WARNING nova.compute.utils [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] [instance: 93476dc9-c70e-4b73-af3e-1309fecdaf95] NV-6BF9597 Can't access image 36f6d470-3a3f-4113-8724-b018280c8f27: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.244 4713 ERROR nova.image.glance [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] Error contacting glance server '9.37.74.232:9292' for 'create', retrying.\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance Traceback (most recent call last):\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 211, in call\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     return getattr(client.images, method)(*args, **kwargs)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/v1/images.py\", line 253, in create\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     'POST', '/v1/images', headers=hdrs, body=image_data)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 289, in raw_request\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     return self._http_request(url, method, **kwargs)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 235, in _http_request\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     raise exc.CommunicationError(message=message)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance CommunicationError: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance\n2014-03-10 10:34:27.255 4713 ERROR nova.api.openstack [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] NV-A68A08C Caught error: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack Traceback (most recent call last):\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1296, in send\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1260, in call_application\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/keystoneclient/middleware/auth_token.py\", line 600, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 130, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 195, in call_func\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 929, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     content_type, body, accept)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 991, in _process_stack\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/common.py\", line 471, in inner\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return f(*args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/servers.py\", line 1487, in _action_create_image\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     extra_properties=props)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 206, in wrapped\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 223, in _wrapped\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return fn(self, context, instance, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 177, in inner\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 1936, in snapshot\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     extra_properties=extra_properties)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 1981, in _create_image\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.image_service.create(context, sent_meta)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 374, in create\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     context, 1, 'create', **sent_service_image_meta)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 225, in call\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     host=host, port=port, reason=str(e))\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack GlanceConnectionFailed: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack\n\nI'm not  convenienced about the error message. I'm interested in generic sort of error message where it says glance is down instead of server is down(which does not make any sense in this case).\n\nVersion - Icehouse version\n\n# rpm --info -q openstack-nova-compute-2014.1-201402161955.ibm.fc19.75.noarch\nName        : openstack-nova-compute\nVersion     : 2014.1\nRelease     : 201402161955.ibm.fc19.75\nArchitecture: noarch\nInstall Date: Wednesday 19 March 2014 07:46:45 AM EDT\nGroup       : Applications/System\nSize        : 12247\nLicense     : ASL 2.0\nSignature   : (none)\nSource RPM  : openstack-nova-2014.1-201402161955.ibm.fc19.75.src.rpm\nBuild Date  : Sunday 16 February 2014 09:07:02 PM EST\nRelocations : (not relocatable)\nURL         : http://openstack.org/projects/compute/\nSummary     : OpenStack Nova Virtual Machine control service\nDescription :\nOpenStack Compute (codename Nova) is open source software designed to\nprovision and manage large networks of virtual machines, creating a\nredundant and scalable cloud computing platform. It gives you the\nsoftware, control panels, and APIs required to orchestrate a cloud,\nincluding running instances, managing networks, and controlling access\nthrough users and projects. OpenStack Compute strives to be both\nhardware and hypervisor agnostic, currently supporting a variety of\nstandard hardware configurations and seven major hypervisors.\n\nThis package contains the Nova service for controlling Virtual Machines.", 
    "tags": [
        "api"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1294973", 
    "owner": "None", 
    "id": 1294973, 
    "index": 5935, 
    "openned": "2014-03-20 06:00:00.041840+00:00", 
    "created": "2014-03-20 06:00:00.041840+00:00", 
    "title": "Better error message is required when glance is dead while capturing", 
    "comments": [
        {
            "content": "1. Bring down the glance\nStopping openstack-glance-api:                             [  OK  ]\nStopping openstack-glance-registry:                        [  OK  ]\n[root@nimbuswrkl665 images]#\n2. Invoke createImage operation for the server.\n\nmanjunath@manjunath-ThinkPad-T420:\u02dc/Desktop$ curl -k -i -X POST -H \"X-Auth-Token: 6928aacccede46d7921c57fb827cd9be\" -H \"Content-Type: application/json\"  -d '{\"createImage\": {\"name\": \"vm1_failed\", \"metadata\": {}}}' https://nimbuswrkl665.rtp.stglabs.ibm.com/powervc/openstack/compute/v2/dd73d8ab4ea7498e8d103206e37c65b5/servers/93476dc9-c70e-4b73-af3e-1309fecdaf95/action\n\nResponse :\n\nHTTP/1.1 500 Internal Server Error\nDate: Mon, 10 Mar 2014 14:34:27 GMT\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-75d8138c-1d32-4bb7-888f-7aa48bdd2011\nCache-control: no-cache\nPragma: no-cache\nContent-Length: 128\nConnection: close\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}manjunath@manjunath-Thimanjunath@manjunath-ThinkPad-T420:\u02dc/Desktop$\n\n\nMessage needs to be Improved, I could see clear message in api.log but it is not passing to the REST call.!\n\n2014-03-10 10:34:27.130 4713 ERROR nova.image.glance [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] Error contacting glance server '9.37.74.232:9292' for 'get', retrying.\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance Traceback (most recent call last):\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 211, in call\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     return getattr(client.images, method)(*args, **kwargs)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/v1/images.py\", line 114, in get\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     % urllib.quote(str(image_id)))\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 289, in raw_request\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     return self._http_request(url, method, **kwargs)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 235, in _http_request\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance     raise exc.CommunicationError(message=message)\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance CommunicationError: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.130 4713 TRACE nova.image.glance\n2014-03-10 10:34:27.240 4713 WARNING nova.compute.utils [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] [instance: 93476dc9-c70e-4b73-af3e-1309fecdaf95] NV-6BF9597 Can't access image 36f6d470-3a3f-4113-8724-b018280c8f27: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.244 4713 ERROR nova.image.glance [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] Error contacting glance server '9.37.74.232:9292' for 'create', retrying.\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance Traceback (most recent call last):\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 211, in call\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     return getattr(client.images, method)(*args, **kwargs)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/v1/images.py\", line 253, in create\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     'POST', '/v1/images', headers=hdrs, body=image_data)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 289, in raw_request\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     return self._http_request(url, method, **kwargs)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance   File \"/usr/lib/python2.6/site-packages/glanceclient/common/http.py\", line 235, in _http_request\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance     raise exc.CommunicationError(message=message)\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance CommunicationError: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.244 4713 TRACE nova.image.glance\n2014-03-10 10:34:27.255 4713 ERROR nova.api.openstack [req-75d8138c-1d32-4bb7-888f-7aa48bdd2011 0 dd73d8ab4ea7498e8d103206e37c65b5] NV-A68A08C Caught error: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack Traceback (most recent call last):\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1296, in send\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1260, in call_application\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/keystoneclient/middleware/auth_token.py\", line 600, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 130, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 195, in call_func\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 929, in __call__\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     content_type, body, accept)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 991, in _process_stack\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 1078, in dispatch\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/common.py\", line 471, in inner\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return f(*args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/servers.py\", line 1487, in _action_create_image\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     extra_properties=props)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 206, in wrapped\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 223, in _wrapped\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return fn(self, context, instance, *args, **kwargs)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 177, in inner\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 1936, in snapshot\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     extra_properties=extra_properties)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/compute/api.py\", line 1981, in _create_image\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     return self.image_service.create(context, sent_meta)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 374, in create\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     context, 1, 'create', **sent_service_image_meta)\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/image/glance.py\", line 225, in call\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack     host=host, port=port, reason=str(e))\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack GlanceConnectionFailed: NV-BAD1189 Connection to glance host 9.37.74.232:9292 failed: Error communicating with http://9.37.74.232:9292 [Errno 111] ECONNREFUSED\n2014-03-10 10:34:27.255 4713 TRACE nova.api.openstack\n\nI'm not  convenienced about the error message. I'm interested in generic sort of error message where it says glance is down instead of server is down(which does not make any sense in this case).\n\nVersion - Icehouse version\n\n# rpm --info -q openstack-nova-compute-2014.1-201402161955.ibm.fc19.75.noarch\nName        : openstack-nova-compute\nVersion     : 2014.1\nRelease     : 201402161955.ibm.fc19.75\nArchitecture: noarch\nInstall Date: Wednesday 19 March 2014 07:46:45 AM EDT\nGroup       : Applications/System\nSize        : 12247\nLicense     : ASL 2.0\nSignature   : (none)\nSource RPM  : openstack-nova-2014.1-201402161955.ibm.fc19.75.src.rpm\nBuild Date  : Sunday 16 February 2014 09:07:02 PM EST\nRelocations : (not relocatable)\nURL         : http://openstack.org/projects/compute/\nSummary     : OpenStack Nova Virtual Machine control service\nDescription :\nOpenStack Compute (codename Nova) is open source software designed to\nprovision and manage large networks of virtual machines, creating a\nredundant and scalable cloud computing platform. It gives you the\nsoftware, control panels, and APIs required to orchestrate a cloud,\nincluding running instances, managing networks, and controlling access\nthrough users and projects. OpenStack Compute strives to be both\nhardware and hypervisor agnostic, currently supporting a variety of\nstandard hardware configurations and seven major hypervisors.\n\nThis package contains the Nova service for controlling Virtual Machines.", 
            "date_created": "2014-03-20 06:00:00.041840+00:00", 
            "author": "https://api.launchpad.net/1.0/~mkumatag"
        }, 
        {
            "content": "I don't think reporting the internal errors of exactly were the failure occurred is helpful to the user of the apis as they would not be able to do anything to fix this. A 500 error like this would also be raised today if you were using nova with neutron and neutron was down. ", 
            "date_created": "2014-03-20 08:02:16.889693+00:00", 
            "author": "https://api.launchpad.net/1.0/~arosen"
        }, 
        {
            "content": "Reporting error not required but the present error which says \"The server has either erred or is incapable of performing the requested operation\" is misleading because server is perfectly alright and the issue somewhere else. Error message for this particular situations should be more relevant like \"The glance service had either erred or is incapable of performing the requested operation\".", 
            "date_created": "2014-03-20 08:29:07.791775+00:00", 
            "author": "https://api.launchpad.net/1.0/~mkumatag"
        }, 
        {
            "content": "It must either be merged or abandoned now, but there was a patch in nova a week or two ago where they were handling cinder service failures better, that's probably something related to this and how this could be handled for glance.", 
            "date_created": "2014-03-25 21:48:31.421696+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "In other words, catch a more specific exception defined in glanceclient and translate that in nova for a more specific response.", 
            "date_created": "2014-03-25 21:48:53.098347+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "The cinder related patch I was thinking of in comment 3 was https://review.openstack.org/#/c/58472/.", 
            "date_created": "2014-03-27 20:25:11.713798+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "The cinder connection failure patch moved here: https://review.openstack.org/#/c/86213/", 
            "date_created": "2014-04-15 21:24:05.023500+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Hi Manjunath,\n\nFor example, we can make a change to add glance connection failure message to http response and get such a result:\n\n[root@hyperv-controller2 \u02dc]# nova image-create b5cdb8f7-2350-4e28-bf75-7a696dfba73a abc\nERROR (InternalServerError): Connection to glance host 10.90.10.24:9292 failed: Error finding address for http://10.90.10.24:9292//v1/images/791a9e99-8fc0-45c3-8809-258dd1fdf725: HTTPConnectionPool(host='10.90.10.24', port=9292): Max retries exceeded with url: //v1/images/791a9e99-8fc0-45c3-8809-258dd1fdf725 (Caused by <class 'socket.error'>: [Errno 111] ECONNREFUSED) (HTTP 500) (Request-ID: req-e3ce4985-d9e5-4e74-a125-972a635063c2)\n\nIs that what you hope?  The http error message seems to be a little better, but I feel it may have security issue. The glance access info will be expose to the end user. I do not feel that is a right case especially for a public cloud. Do you agree?", 
            "date_created": "2014-08-28 15:22:36.474281+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhaoqin"
        }
    ], 
    "closed": "2014-03-20 08:03:20.793610+00:00"
}