{
    "status": "Fix Released", 
    "last_updated": "2016-09-02 01:13:45.807453+00:00", 
    "description": "The change https://review.openstack.org/#/c/348442/ introduced a backwards incompatible change, specifically at: https://review.openstack.org/#/c/348442/3/nova/conf/vnc.py@68 where vncserver_proxyclient_address was changed from a StrOpt to an IpOpt.\n\nThis broke backwards compatibility without a proper deprecation notice being introduced and there are especially no release notes that mention this.\n\nWhen running with this new commit, users that configured that parameter as a hostname are now greeted with a stack trace from nova-compute:\n2016-08-10 19:26:35.458 10624 CRITICAL nova [req-c235cb33-49c4-4f97-a4a1-0523f134afdc - - - - -] ConfigFileValueError: Value for option vncserver_proxyclient_address is not valid: n59.ci.centos.org is not IPv4 or IPv6 address\n2016-08-10 19:26:35.458 10624 ERROR nova Traceback (most recent call last):\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/bin/nova-compute\", line 10, in <module>\n2016-08-10 19:26:35.458 10624 ERROR nova     sys.exit(main())\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/compute.py\", line 78, in main\n2016-08-10 19:26:35.458 10624 ERROR nova     service.wait()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/nova/service.py\", line 415, in wait\n2016-08-10 19:26:35.458 10624 ERROR nova     _launcher.wait()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_service/service.py\", line 328, in wait\n2016-08-10 19:26:35.458 10624 ERROR nova     status, signo = self._wait_for_exit_or_signal()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_service/service.py\", line 303, in _wait_for_exit_or_signal\n2016-08-10 19:26:35.458 10624 ERROR nova     self.conf.log_opt_values(LOG, logging.DEBUG)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2591, in log_opt_values\n2016-08-10 19:26:35.458 10624 ERROR nova     _sanitize(opt, getattr(group_attr, opt_name)))\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 3022, in __getattr__\n2016-08-10 19:26:35.458 10624 ERROR nova     return self._conf._get(name, self._group)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2633, in _get\n2016-08-10 19:26:35.458 10624 ERROR nova     value = self._do_get(name, group, namespace)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2676, in _do_get\n2016-08-10 19:26:35.458 10624 ERROR nova     % (opt.name, str(ve)))\n2016-08-10 19:26:35.458 10624 ERROR nova ConfigFileValueError: Value for option vncserver_proxyclient_address is not valid: n59.ci.centos.org is not IPv4 or IPv6 address\n2016-08-10 19:26:35.458 10624 ERROR nova", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1611940", 
    "owner": "https://api.launchpad.net/1.0/~sdague", 
    "id": 1611940, 
    "index": 1969, 
    "openned": "2016-08-10 19:55:12.412363+00:00", 
    "created": "2016-08-10 19:55:12.412363+00:00", 
    "title": "vncserver_proxyclient_address changed from stropt to ipopt, breaking backwards compat without deprecation", 
    "comments": [
        {
            "content": "The change https://review.openstack.org/#/c/348442/ introduced a backwards incompatible change, specifically at: https://review.openstack.org/#/c/348442/3/nova/conf/vnc.py@68 where vncserver_proxyclient_address was changed from a StrOpt to an IpOpt.\n\nThis broke backwards compatibility without a proper deprecation notice being introduced and there are especially no release notes that mention this.\n\nWhen running with this new commit, users that configured that parameter as a hostname are now greeted with a stack trace from nova-compute:\n2016-08-10 19:26:35.458 10624 CRITICAL nova [req-c235cb33-49c4-4f97-a4a1-0523f134afdc - - - - -] ConfigFileValueError: Value for option vncserver_proxyclient_address is not valid: n59.ci.centos.org is not IPv4 or IPv6 address\n2016-08-10 19:26:35.458 10624 ERROR nova Traceback (most recent call last):\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/bin/nova-compute\", line 10, in <module>\n2016-08-10 19:26:35.458 10624 ERROR nova     sys.exit(main())\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/nova/cmd/compute.py\", line 78, in main\n2016-08-10 19:26:35.458 10624 ERROR nova     service.wait()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/nova/service.py\", line 415, in wait\n2016-08-10 19:26:35.458 10624 ERROR nova     _launcher.wait()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_service/service.py\", line 328, in wait\n2016-08-10 19:26:35.458 10624 ERROR nova     status, signo = self._wait_for_exit_or_signal()\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_service/service.py\", line 303, in _wait_for_exit_or_signal\n2016-08-10 19:26:35.458 10624 ERROR nova     self.conf.log_opt_values(LOG, logging.DEBUG)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2591, in log_opt_values\n2016-08-10 19:26:35.458 10624 ERROR nova     _sanitize(opt, getattr(group_attr, opt_name)))\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 3022, in __getattr__\n2016-08-10 19:26:35.458 10624 ERROR nova     return self._conf._get(name, self._group)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2633, in _get\n2016-08-10 19:26:35.458 10624 ERROR nova     value = self._do_get(name, group, namespace)\n2016-08-10 19:26:35.458 10624 ERROR nova   File \"/usr/lib/python2.7/site-packages/oslo_config/cfg.py\", line 2676, in _do_get\n2016-08-10 19:26:35.458 10624 ERROR nova     % (opt.name, str(ve)))\n2016-08-10 19:26:35.458 10624 ERROR nova ConfigFileValueError: Value for option vncserver_proxyclient_address is not valid: n59.ci.centos.org is not IPv4 or IPv6 address\n2016-08-10 19:26:35.458 10624 ERROR nova", 
            "date_created": "2016-08-10 19:55:12.412363+00:00", 
            "author": "https://api.launchpad.net/1.0/~dmsimard"
        }, 
        {
            "content": "Partial revert in https://review.openstack.org/#/c/353710/", 
            "date_created": "2016-08-10 21:56:00.427062+00:00", 
            "author": "https://api.launchpad.net/1.0/~dmsimard"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/353710\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=9289e6212cf54a4ce74c7615cf74892c6a70c50d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9289e6212cf54a4ce74c7615cf74892c6a70c50d\nAuthor: Sean Dague <email address hidden>\nDate:   Wed Aug 10 16:00:53 2016 -0400\n\n    vnc host options need to support hostnames\n    \n    When updating the config options the VNC options were switched from\n    StrOpt to IPOpt. However these are hostnames, they even say so in the\n    option name, so IPOpt is too restrictive, and could break folks in\n    upgrade if they set these to hostnames.\n    \n    Change-Id: Ib2062407dcf9cba8676b0f38aa0c63df25cc7b38\n    Closes-Bug: #1611940\n", 
            "date_created": "2016-08-11 06:31:14.874374+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/353917\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=46a6be4944ebc88a1a880ba014afe241cd64a370\nSubmitter: Jenkins\nBranch:    master\n\ncommit 46a6be4944ebc88a1a880ba014afe241cd64a370\nAuthor: John Garbutt <email address hidden>\nDate:   Thu Aug 11 10:03:38 2016 +0100\n\n    Maintain backwards compat for listen opts\n    \n    Technically you can use a hostname, that then gets resolved by DNS to\n    find the IP address to bind to. Although this is not actually a very\n    good idea, because it just picks the first IP it gets and tried to bind\n    to that one, which is not always the best idea.\n    \n    Related-Bug: #1611940\n    \n    blueprint centralize-config-options-newton\n    \n    Change-Id: Icd271b62935969036b6622b8582edec8bd496dd2\n", 
            "date_created": "2016-08-13 04:46:52.971159+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b3 development milestone.", 
            "date_created": "2016-09-02 01:13:44.879402+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2016-08-11 06:31:12.777777+00:00"
}