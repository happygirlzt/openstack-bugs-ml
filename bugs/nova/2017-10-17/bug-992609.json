{
    "status": "Invalid", 
    "last_updated": "2012-05-03 07:58:20.514863+00:00", 
    "description": "I install all  OpenStack(Essex)  compents on my CentOS 6.2 computer with source code and it works well, but when I add a compute node to it I can not launch a instance on the compute node via horizon. The error message is here:\n\n\n\n2012-05-01 20:51:44 DEBUG nova.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_request_id': u'req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491', u'_context_read_deleted': u'no', u'args': {u'instance_uuid': u'21b89ed6-3246-4642-a71f-871b23ed6b79', u'requested_networks': None, u'is_first_time': True, u'admin_password': '<SANITIZED>', u'injected_files': []}, u'_context_auth_token': '<SANITIZED>', u'_context_is_admin': True, u'_context_project_id': u'49d1ed911a224bf2b480c7b6742d7b22', u'_context_timestamp': u'2012-05-01T12:51:44.154114', u'_context_user_id': u'47761c18057d4be9b741aa31076cb127', u'method': u'run_instance', u'_context_remote_address': u'127.0.0.1'} from (pid=8874) _safe_log /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/common.py:160\n2012-05-01 20:51:44 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] unpacked context: {'user_id': u'47761c18057d4be9b741aa31076cb127', 'roles': [u'admin'], 'timestamp': '2012-05-01T12:51:44.154114', 'auth_token': '<SANITIZED>', 'remote_address': u'127.0.0.1', 'is_admin': True, 'request_id': u'req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491', 'project_id': u'49d1ed911a224bf2b480c7b6742d7b22', 'read_deleted': u'no'} from (pid=8874) _safe_log /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/common.py:160\n2012-05-01 20:51:44 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"21b89ed6-3246-4642-a71f-871b23ed6b79\" for method \"do_run_instance\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:44 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"21b89ed6-3246-4642-a71f-871b23ed6b79\" for method \"do_run_instance\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-0000000c'\n2012-05-01 20:51:45 AUDIT nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Starting instance...\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Making asynchronous call on network ... from (pid=8874) multicall /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:321\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] MSG_ID is ac41919969e44e2fbed5f109837bba8a from (pid=8874) multicall /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:324\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Pool creating new connection from (pid=8874) create /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:59\n2012-05-01 20:51:45 INFO nova.rpc.impl_qpid [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Connected to AMQP server on 10.61.2.88:5672\n2012-05-01 20:51:46 DEBUG nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Instance network_info: |[VIF({'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.4'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [IP({'meta': {}, 'version': 4, 'type': u'dns', 'address': u'8.8.4.4'})], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth0'}, 'id': u'b213551e-bb16-4c9e-afe9-ed7f491113e9', 'label': u'private'}), 'meta': {}, 'id': u'cc22c77f-66bc-4d82-a37a-a528a3587f5b', 'address': u'fa:16:3e:0f:0a:38'})]| from (pid=8874) _allocate_network /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:566\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Starting toXML method from (pid=8874) to_xml /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1505\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.vif [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Ensuring bridge br100 from (pid=8874) plug /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/vif.py:94\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): ip link show dev br100 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo brctl addif br100 eth0 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo route -n from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo ip addr show dev eth0 scope global from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Path '/home/instances' supports direct I/O from (pid=8874) _supports_direct_io /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1024\n2012-05-01 20:51:47 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Finished toXML method from (pid=8874) to_xml /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1509\n2012-05-01 20:51:47 INFO nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Called setup_basic_filtering in nwfilter\n2012-05-01 20:51:47 INFO nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Ensuring static filters\n2012-05-01 20:51:48 DEBUG nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] iptables firewall: Setup Basic Filtering from (pid=8874) setup_basic_filtering /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/firewall.py:234\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.virt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Filters added to instance 21b89ed6-3246-4642-a71f-871b23ed6b79 from (pid=8874) prepare_instance_filter /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/firewall.py:137\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.virt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Provider Firewall Rules refreshed from (pid=8874) prepare_instance_filter /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/firewall.py:139\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): mkdir -p /home/instances/instance-0000000c/ from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 INFO nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Creating image\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): cp /home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267 /home/instances/instance-0000000c/kernel from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): cp /home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d /home/instances/instance-0000000c/ramdisk from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca /home/instances/instance-0000000c/disk from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 INFO nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Injecting key into image ca11ee70-7ddc-4c8c-83bb-c9e41a4a027d\n2012-05-01 20:51:48 DEBUG nova.virt.disk.api [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] nbd unavailable: module not loaded from (pid=8874) mount /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/disk/api.py:205\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n' from (pid=8874) trycmd /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:277\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo fusermount -u /tmp/tmpNXytke from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Unexpected error while running command.\nCommand: sudo fusermount -u /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'fusermount: failed to unmount /tmp/tmpNXytke: Invalid argument\\n' from (pid=8874) trycmd /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:277\n2012-05-01 20:51:48 DEBUG nova.virt.disk.api [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Failed to mount filesystem: Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n' from (pid=8874) mount /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/disk/api.py:205\n2012-05-01 20:51:48 WARNING nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Ignoring error injecting data into image ca11ee70-7ddc-4c8c-83bb-c9e41a4a027d (\n--\nnbd unavailable: module not loaded\n--\nFailed to mount filesystem: Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n')\nlibvir: QEMU error : Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 ERROR nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Instance failed to spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Traceback (most recent call last):\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 592, in _spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     self._legacy_nw_info(network_info), block_device_info)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 904, in spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     self._create_new_domain(xml)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 1557, in _create_new_domain\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     domain.createWithFlags(launch_flags)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 541, in createWithFlags\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] libvirtError: Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] \n2012-05-01 20:51:50 DEBUG nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Deallocating network for instance from (pid=8874) _deallocate_network /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:616\n2012-05-01 20:51:50 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Making asynchronous cast on network... from (pid=8874) cast /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:346\n2012-05-01 20:51:50 ERROR nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Exception during message handling\n2012-05-01 20:51:50 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py\", line 252, in _process_data\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     sys.exc_info())\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 171, in decorated_function\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 651, in run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     do_run_instance()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py\", line 945, in inner\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 650, in do_run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._run_instance(context, instance_uuid, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 451, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._set_instance_error_state(context, instance_uuid)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 432, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._deallocate_network(context, instance)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 429, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     injected_files, admin_password)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 592, in _spawn\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._legacy_nw_info(network_info), block_device_info)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 904, in spawn\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._create_new_domain(xml)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 1557, in _create_new_domain\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     domain.createWithFlags(launch_flags)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 541, in createWithFlags\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp libvirtError: Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 TRACE nova.rpc.amqp \n\n\ninformation about libvirt is:\nCompiled against library: libvir 0.9.4\nUsing library: libvir 0.9.4\nUsing API: QEMU 0.9.4\nRunning hypervisor: QEMU 0.12.1\n\nnova.conf on my controller is:\n[DEFAULT]\n# LOGS/STATE\nverbose=True\n\n# AUTHENTICATION\nauth_strategy=keystone\n\n# SCHEDULER\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\n\n# VOLUMES\nvolume_group=nova-volumes\nvolume_name_template=volume-%08x\niscsi_helper=tgtadm\n\n# DATABASE\nsql_connection=mysql://nova:nova@10.61.2.88/nova\n\n# COMPUTE\nlibvirt_type=kvm\nconnection_type=libvirt\ninstances_path=/home/instances\ninstance_name_template=instance-%08x\napi_paste_config=/etc/nova/api-paste.ini\nallow_resize_to_same_host=True\n\n# APIS\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nec2_dmz_host=10.61.2.88\ns3_host=10.61.2.88\n\n# RABBITMQ\n# rabbit_host=10.61.2.88\n# rabbit_userid=guest\n# rabbit_password=service123\n\n# QPID\nrpc_backend=nova.rpc.impl_qpid\nqpid_hostname=10.61.2.88\n\n\n# GLANCE\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=10.61.2.88:9292\n\n# NETWORK\nnetwork_manager=nova.network.manager.FlatDHCPManager\nforce_dhcp_release=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfirewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver\nmy_ip=10.61.2.88\npublic_interface=br100\nvlan_interface=eth0\nflat_network_bridge=br100\nflat_interface=eth0\nfixed_range=10.0.0.0/24\n\n# NOVNC CONSOLE\nnovncproxy_base_url=http://10.61.2.88:6080/vnc_auto.html\nxvpvncproxy_base_url=http://10.61.2.88:6081/console\nvncserver_proxyclient_address=10.61.2.88\nvncserver_listen=10.61.2.88\n\nbindir=/usr/bin\n\n\n\nI copy this file to compute node and only change my_ip option to the node ip, and I only run nova-compute on my compute node.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/992609", 
    "owner": "None", 
    "id": 992609, 
    "index": 4054, 
    "openned": "2012-05-01 13:43:25.111069+00:00", 
    "created": "2012-05-01 13:43:25.111069+00:00", 
    "title": "libvirtError: Unable to read from monitor: Connection reset by peer", 
    "comments": [
        {
            "content": "I install all  OpenStack(Essex)  compents on my CentOS 6.2 computer with source code and it works well, but when I add a compute node to it I can not launch a instance on the compute node via horizon. The error message is here:\n\n\n\n2012-05-01 20:51:44 DEBUG nova.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_request_id': u'req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491', u'_context_read_deleted': u'no', u'args': {u'instance_uuid': u'21b89ed6-3246-4642-a71f-871b23ed6b79', u'requested_networks': None, u'is_first_time': True, u'admin_password': '<SANITIZED>', u'injected_files': []}, u'_context_auth_token': '<SANITIZED>', u'_context_is_admin': True, u'_context_project_id': u'49d1ed911a224bf2b480c7b6742d7b22', u'_context_timestamp': u'2012-05-01T12:51:44.154114', u'_context_user_id': u'47761c18057d4be9b741aa31076cb127', u'method': u'run_instance', u'_context_remote_address': u'127.0.0.1'} from (pid=8874) _safe_log /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/common.py:160\n2012-05-01 20:51:44 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] unpacked context: {'user_id': u'47761c18057d4be9b741aa31076cb127', 'roles': [u'admin'], 'timestamp': '2012-05-01T12:51:44.154114', 'auth_token': '<SANITIZED>', 'remote_address': u'127.0.0.1', 'is_admin': True, 'request_id': u'req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491', 'project_id': u'49d1ed911a224bf2b480c7b6742d7b22', 'read_deleted': u'no'} from (pid=8874) _safe_log /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/common.py:160\n2012-05-01 20:51:44 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"21b89ed6-3246-4642-a71f-871b23ed6b79\" for method \"do_run_instance\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:44 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"21b89ed6-3246-4642-a71f-871b23ed6b79\" for method \"do_run_instance\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-0000000c'\n2012-05-01 20:51:45 AUDIT nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Starting instance...\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Making asynchronous call on network ... from (pid=8874) multicall /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:321\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] MSG_ID is ac41919969e44e2fbed5f109837bba8a from (pid=8874) multicall /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:324\n2012-05-01 20:51:45 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Pool creating new connection from (pid=8874) create /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:59\n2012-05-01 20:51:45 INFO nova.rpc.impl_qpid [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Connected to AMQP server on 10.61.2.88:5672\n2012-05-01 20:51:46 DEBUG nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Instance network_info: |[VIF({'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.4'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [IP({'meta': {}, 'version': 4, 'type': u'dns', 'address': u'8.8.4.4'})], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth0'}, 'id': u'b213551e-bb16-4c9e-afe9-ed7f491113e9', 'label': u'private'}), 'meta': {}, 'id': u'cc22c77f-66bc-4d82-a37a-a528a3587f5b', 'address': u'fa:16:3e:0f:0a:38'})]| from (pid=8874) _allocate_network /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:566\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Starting toXML method from (pid=8874) to_xml /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1505\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.vif [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Ensuring bridge br100 from (pid=8874) plug /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/vif.py:94\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"ensure_bridge\" for method \"ensure_bridge\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): ip link show dev br100 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo brctl addif br100 eth0 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo route -n from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo ip addr show dev eth0 scope global from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:46 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Path '/home/instances' supports direct I/O from (pid=8874) _supports_direct_io /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1024\n2012-05-01 20:51:47 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Finished toXML method from (pid=8874) to_xml /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1509\n2012-05-01 20:51:47 INFO nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Called setup_basic_filtering in nwfilter\n2012-05-01 20:51:47 INFO nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Ensuring static filters\n2012-05-01 20:51:48 DEBUG nova.virt.libvirt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] iptables firewall: Setup Basic Filtering from (pid=8874) setup_basic_filtering /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/firewall.py:234\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.virt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Filters added to instance 21b89ed6-3246-4642-a71f-871b23ed6b79 from (pid=8874) prepare_instance_filter /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/firewall.py:137\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"_do_refresh_provider_fw_rules\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.virt.firewall [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Provider Firewall Rules refreshed from (pid=8874) prepare_instance_filter /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/firewall.py:139\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:935\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got file lock \"iptables\" for method \"apply\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:942\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t filter from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-save -t nat from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo iptables-restore from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.network.linux_net [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] IPTablesManager.apply completed with success from (pid=8874) apply /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/network/linux_net.py:335\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): mkdir -p /home/instances/instance-0000000c/ from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 INFO nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Creating image\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): cp /home/instances/_base/023b41be-8cbc-4095-a4c9-99fcd6292267 /home/instances/instance-0000000c/kernel from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): cp /home/instances/_base/fcb01a05-569c-4852-8519-8cb11f3fc48d /home/instances/instance-0000000c/ramdisk from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] block_device_list [] from (pid=8874) _volume_in_mapping /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py:1380\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"call_if_not_exists\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Attempting to grab semaphore \"/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:927\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Got semaphore \"/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca\" for method \"copy_and_extend\"... from (pid=8874) inner /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:931\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/home/instances/_base/dd0ae26b65a29b54e36efc48d323dcea86b6f5ca /home/instances/instance-0000000c/disk from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 INFO nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Injecting key into image ca11ee70-7ddc-4c8c-83bb-c9e41a4a027d\n2012-05-01 20:51:48 DEBUG nova.virt.disk.api [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] nbd unavailable: module not loaded from (pid=8874) mount /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/disk/api.py:205\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n' from (pid=8874) trycmd /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:277\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Running cmd (subprocess): sudo fusermount -u /tmp/tmpNXytke from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:219\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Result was 1 from (pid=8874) execute /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:235\n2012-05-01 20:51:48 DEBUG nova.utils [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Unexpected error while running command.\nCommand: sudo fusermount -u /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'fusermount: failed to unmount /tmp/tmpNXytke: Invalid argument\\n' from (pid=8874) trycmd /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py:277\n2012-05-01 20:51:48 DEBUG nova.virt.disk.api [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Failed to mount filesystem: Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n' from (pid=8874) mount /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/disk/api.py:205\n2012-05-01 20:51:48 WARNING nova.virt.libvirt.connection [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Ignoring error injecting data into image ca11ee70-7ddc-4c8c-83bb-c9e41a4a027d (\n--\nnbd unavailable: module not loaded\n--\nFailed to mount filesystem: Unexpected error while running command.\nCommand: sudo guestmount --rw -a /home/instances/instance-0000000c/disk -m /dev/sda /tmp/tmpNXytke\nExit code: 1\nStdout: ''\nStderr: 'sudo: guestmount: command not found\\n')\nlibvir: QEMU error : Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 ERROR nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Instance failed to spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Traceback (most recent call last):\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 592, in _spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     self._legacy_nw_info(network_info), block_device_info)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 904, in spawn\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     self._create_new_domain(xml)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 1557, in _create_new_domain\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     domain.createWithFlags(launch_flags)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 541, in createWithFlags\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] libvirtError: Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 TRACE nova.compute.manager [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] \n2012-05-01 20:51:50 DEBUG nova.compute.manager [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] [instance: 21b89ed6-3246-4642-a71f-871b23ed6b79] Deallocating network for instance from (pid=8874) _deallocate_network /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:616\n2012-05-01 20:51:50 DEBUG nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Making asynchronous cast on network... from (pid=8874) cast /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py:346\n2012-05-01 20:51:50 ERROR nova.rpc.amqp [req-e4869c33-e6ad-4de5-9de7-a17a2ee6c491 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Exception during message handling\n2012-05-01 20:51:50 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py\", line 252, in _process_data\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     sys.exc_info())\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 171, in decorated_function\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 651, in run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     do_run_instance()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/utils.py\", line 945, in inner\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     retval = f(*args, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 650, in do_run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._run_instance(context, instance_uuid, **kwargs)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 451, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._set_instance_error_state(context, instance_uuid)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 432, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._deallocate_network(context, instance)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 429, in _run_instance\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     injected_files, admin_password)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 592, in _spawn\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._legacy_nw_info(network_info), block_device_info)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 904, in spawn\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     self._create_new_domain(xml)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 1557, in _create_new_domain\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     domain.createWithFlags(launch_flags)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 541, in createWithFlags\n2012-05-01 20:51:50 TRACE nova.rpc.amqp     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2012-05-01 20:51:50 TRACE nova.rpc.amqp libvirtError: Unable to read from monitor: Connection reset by peer\n2012-05-01 20:51:50 TRACE nova.rpc.amqp \n\n\ninformation about libvirt is:\nCompiled against library: libvir 0.9.4\nUsing library: libvir 0.9.4\nUsing API: QEMU 0.9.4\nRunning hypervisor: QEMU 0.12.1\n\nnova.conf on my controller is:\n[DEFAULT]\n# LOGS/STATE\nverbose=True\n\n# AUTHENTICATION\nauth_strategy=keystone\n\n# SCHEDULER\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\n\n# VOLUMES\nvolume_group=nova-volumes\nvolume_name_template=volume-%08x\niscsi_helper=tgtadm\n\n# DATABASE\nsql_connection=mysql://nova:nova@10.61.2.88/nova\n\n# COMPUTE\nlibvirt_type=kvm\nconnection_type=libvirt\ninstances_path=/home/instances\ninstance_name_template=instance-%08x\napi_paste_config=/etc/nova/api-paste.ini\nallow_resize_to_same_host=True\n\n# APIS\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nec2_dmz_host=10.61.2.88\ns3_host=10.61.2.88\n\n# RABBITMQ\n# rabbit_host=10.61.2.88\n# rabbit_userid=guest\n# rabbit_password=service123\n\n# QPID\nrpc_backend=nova.rpc.impl_qpid\nqpid_hostname=10.61.2.88\n\n\n# GLANCE\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=10.61.2.88:9292\n\n# NETWORK\nnetwork_manager=nova.network.manager.FlatDHCPManager\nforce_dhcp_release=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfirewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver\nmy_ip=10.61.2.88\npublic_interface=br100\nvlan_interface=eth0\nflat_network_bridge=br100\nflat_interface=eth0\nfixed_range=10.0.0.0/24\n\n# NOVNC CONSOLE\nnovncproxy_base_url=http://10.61.2.88:6080/vnc_auto.html\nxvpvncproxy_base_url=http://10.61.2.88:6081/console\nvncserver_proxyclient_address=10.61.2.88\nvncserver_listen=10.61.2.88\n\nbindir=/usr/bin\n\n\n\nI copy this file to compute node and only change my_ip option to the node ip, and I only run nova-compute on my compute node.", 
            "date_created": "2012-05-01 13:43:25.111069+00:00", 
            "author": "https://api.launchpad.net/1.0/~jiangy"
        }, 
        {
            "content": "Make sure nbd is loaded.", 
            "date_created": "2012-05-01 16:20:45.973594+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "Hi, Chuck Short, Thanks for your advice. After I loaded nbd ,  installed qemu-common and changed the option value vncserver_listen to the node ip I can launch a instance on compute node via horizon now. In addtion, before I changed the optionvalue vncserver_listen I got a error massage \"libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\".", 
            "date_created": "2012-05-03 07:52:47.723723+00:00", 
            "author": "https://api.launchpad.net/1.0/~jiangy"
        }
    ], 
    "closed": "2012-05-03 07:58:18.791285+00:00"
}