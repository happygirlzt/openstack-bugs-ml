{
    "status": "Invalid", 
    "last_updated": "2016-04-18 15:31:49.000030+00:00", 
    "description": "When use the following command to launch an instance from an iso image, we get keyerror log form /var/log/nova/nova-compute.log on the compute node. Version of openstack is kilo.\n\n[root@2C5_10_DELL05 ~]#nova boot --image 37c089ac-8a49-410d-a8df-96b736130e3c --flavor m1.small --nic net-id=1610f3b6-553c-45ad-9f1f-2f8e06086576 --block-device id=1812f5b6-0d69-4337-bce5-a06e9f0370f3,source=volume,dest=volume --availability-zone nova:slot5-SBCJ Boot_from_image_with_volume\n\n\nlog:\n2016-02-25 18:24:25.879 915 ERROR nova.compute.manager [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] [instance: 38e3ebf2-4a22-4beb-b2f6-9d94ef2d1879] Cannot reboot instance: u'/dev/vdb'\n2016-02-25 18:24:26.286 915 INFO nova.scheduler.client.report [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] Compute_service record updated for ('slot5-SBCJ', 'slot5-SBCJ')\n2016-02-25 18:24:26.297 915 ERROR oslo_messaging.rpc.dispatcher [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] Exception during message handling: u'/dev/vdb'\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 8509, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     reboot_type)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     payload)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 379, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 350, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 429, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 407, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 395, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3640, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     self._set_instance_obj_error_state(context, instance)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3621, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     bad_volumes_callback=bad_volumes_callback)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2621, in reboot\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     block_device_info)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2721, in _hard_reboot\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     write_to_disk=True)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5094, in _get_guest_xml\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     memory_backup_file=memory_backup_file)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4917, in _get_guest_config\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     flavor, guest.os_type)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4032, in _get_guest_storage_config\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     info = disk_mapping[vol_dev]\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher KeyError: u'/dev/vdb'\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher", 
    "tags": [
        "volumes"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1551565", 
    "owner": "None", 
    "id": 1551565, 
    "index": 7338, 
    "openned": "2016-03-01 06:23:19.603390+00:00", 
    "created": "2016-03-01 06:23:19.603390+00:00", 
    "title": "KeyError:launch an instance form an iso image", 
    "comments": [
        {
            "content": "When use the following command to launch an instance from an iso image, we get keyerror log form /var/log/nova/nova-compute.log on the compute node. Version of openstack is kilo.\n\n[root@2C5_10_DELL05 ~]#nova boot --image 37c089ac-8a49-410d-a8df-96b736130e3c --flavor m1.small --nic net-id=1610f3b6-553c-45ad-9f1f-2f8e06086576 --block-device id=1812f5b6-0d69-4337-bce5-a06e9f0370f3,source=volume,dest=volume --availability-zone nova:slot5-SBCJ Boot_from_image_with_volume\n\n\nlog:\n2016-02-25 18:24:25.879 915 ERROR nova.compute.manager [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] [instance: 38e3ebf2-4a22-4beb-b2f6-9d94ef2d1879] Cannot reboot instance: u'/dev/vdb'\n2016-02-25 18:24:26.286 915 INFO nova.scheduler.client.report [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] Compute_service record updated for ('slot5-SBCJ', 'slot5-SBCJ')\n2016-02-25 18:24:26.297 915 ERROR oslo_messaging.rpc.dispatcher [req-8dc0fcdb-608f-4938-96e6-fc0e4aadfe69 c8c4ba6337684fcfa98a26259e7e7ba0 203c8802ac2343ab9e2a7ab11aa710de - - -] Exception during message handling: u'/dev/vdb'\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 8509, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     reboot_type)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     payload)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 379, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 350, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 429, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 407, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 395, in decorated_function\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3640, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     self._set_instance_obj_error_state(context, instance)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3621, in reboot_instance\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     bad_volumes_callback=bad_volumes_callback)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2621, in reboot\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     block_device_info)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2721, in _hard_reboot\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     write_to_disk=True)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5094, in _get_guest_xml\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     memory_backup_file=memory_backup_file)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4917, in _get_guest_config\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     flavor, guest.os_type)\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4032, in _get_guest_storage_config\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher     info = disk_mapping[vol_dev]\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher KeyError: u'/dev/vdb'\n2016-02-25 18:24:26.297 915 TRACE oslo_messaging.rpc.dispatcher", 
            "date_created": "2016-03-01 06:23:19.603390+00:00", 
            "author": "https://api.launchpad.net/1.0/~gu-weiwei"
        }, 
        {
            "content": "This is in the reboot code path? There must be more to what was going on than just the boot command above to describe why this is in the reboot code. ", 
            "date_created": "2016-03-01 17:31:13.101872+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I have tried to re-create the bug according to the mentioned steps, im succesfully able to launch the instance when booted with an iso(ubuntu mini) image and volume(1GB ). Could you please give me further information of about why you are facing error ( as of which iso image has been used, the attached cinder volume details, environment and config file details). Then the bug can be looked into.", 
            "date_created": "2016-03-31 10:18:24.178016+00:00", 
            "author": "https://api.launchpad.net/1.0/~seelam-prathyusha"
        }, 
        {
            "content": "An ask for reproduce happened 1.5 months ago, no response", 
            "date_created": "2016-04-18 15:31:48.499690+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ], 
    "closed": "2016-04-18 15:31:33.511803+00:00"
}