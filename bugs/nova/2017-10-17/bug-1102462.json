{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:10:33.780168+00:00", 
    "description": "Discovered running Tempest:\n\n07:17:00 ======================================================================\n07:17:00 ERROR: test_list_servers_by_non_existing_flavor (tempest.tests.compute.servers.test_list_servers_negative.ListServersNegativeTest)\n07:17:00 ----------------------------------------------------------------------\n07:17:00 Traceback (most recent call last):\n07:17:00   File \"/opt/stack/new/tempest/tempest/tests/compute/servers/test_list_servers_negative.py\", line 121, in test_list_servers_by_non_existing_flavor\n07:17:00     resp, body = self.client.list_servers(dict(flavor=non_existing_flavor))\n07:17:00   File \"/opt/stack/new/tempest/tempest/services/compute/json/servers_client.py\", line 129, in list_servers\n07:17:00     resp, body = self.get(url)\n07:17:00   File \"/opt/stack/new/tempest/tempest/common/rest_client.py\", line 179, in get\n07:17:00     return self.request('GET', url, headers, wait=wait)\n07:17:00   File \"/opt/stack/new/tempest/tempest/common/rest_client.py\", line 308, in request\n07:17:00     raise exceptions.TempestException(str(resp.status))\n07:17:00 TempestException: An unknown exception occurred\n07:17:00 Details: An unknown exception occurred\n07:17:00 Details: 422\n07:17:00 -------------------- >> begin captured logging << --------------------\n07:17:00 tempest.common.rest_client: ERROR: Request URL: http://127.0.0.1:8774/v2/6ddb2f83e4ad4a0da7bf9e7a7f1df6da/servers?flavor=1234\n07:17:00 tempest.common.rest_client: ERROR: Request Body: None\n07:17:00 tempest.common.rest_client: ERROR: Response Headers: {'date': 'Mon, 21 Jan 2013 07:07:54 GMT', 'status': '422', 'content-length': '71', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-69a003d4-8e42-48eb-be45-c0280952912b'}\n07:17:00 tempest.common.rest_client: ERROR: Response Body: {u'computeFault': {u'message': u'Flavor could not be found', u'code': 422}}\n07:17:00 --------------------- >> end captured logging << ---------------------\n\nThe source of the issue is plain:\n\nhttps://github.com/openstack/nova/blob/master/nova/api/openstack/compute/servers.py#L542\n\ncompute_api.get_all() is raising FlavorNotFound if search_opts includes a non-existing flavor ID.\n\nSince this is list operation, shouldn't the result of GET /servers that finds no matches be an empty list?", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1102462", 
    "owner": "https://api.launchpad.net/1.0/~dims-v", 
    "id": 1102462, 
    "index": 4601, 
    "openned": "2013-01-21 16:15:25.742958+00:00", 
    "created": "2013-01-21 16:15:25.742958+00:00", 
    "title": "List servers having non-existent flavor returns 422 Unprocessable Entity instead of empty list", 
    "comments": [
        {
            "content": "Discovered running Tempest:\n\n07:17:00 ======================================================================\n07:17:00 ERROR: test_list_servers_by_non_existing_flavor (tempest.tests.compute.servers.test_list_servers_negative.ListServersNegativeTest)\n07:17:00 ----------------------------------------------------------------------\n07:17:00 Traceback (most recent call last):\n07:17:00   File \"/opt/stack/new/tempest/tempest/tests/compute/servers/test_list_servers_negative.py\", line 121, in test_list_servers_by_non_existing_flavor\n07:17:00     resp, body = self.client.list_servers(dict(flavor=non_existing_flavor))\n07:17:00   File \"/opt/stack/new/tempest/tempest/services/compute/json/servers_client.py\", line 129, in list_servers\n07:17:00     resp, body = self.get(url)\n07:17:00   File \"/opt/stack/new/tempest/tempest/common/rest_client.py\", line 179, in get\n07:17:00     return self.request('GET', url, headers, wait=wait)\n07:17:00   File \"/opt/stack/new/tempest/tempest/common/rest_client.py\", line 308, in request\n07:17:00     raise exceptions.TempestException(str(resp.status))\n07:17:00 TempestException: An unknown exception occurred\n07:17:00 Details: An unknown exception occurred\n07:17:00 Details: 422\n07:17:00 -------------------- >> begin captured logging << --------------------\n07:17:00 tempest.common.rest_client: ERROR: Request URL: http://127.0.0.1:8774/v2/6ddb2f83e4ad4a0da7bf9e7a7f1df6da/servers?flavor=1234\n07:17:00 tempest.common.rest_client: ERROR: Request Body: None\n07:17:00 tempest.common.rest_client: ERROR: Response Headers: {'date': 'Mon, 21 Jan 2013 07:07:54 GMT', 'status': '422', 'content-length': '71', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-69a003d4-8e42-48eb-be45-c0280952912b'}\n07:17:00 tempest.common.rest_client: ERROR: Response Body: {u'computeFault': {u'message': u'Flavor could not be found', u'code': 422}}\n07:17:00 --------------------- >> end captured logging << ---------------------\n\nThe source of the issue is plain:\n\nhttps://github.com/openstack/nova/blob/master/nova/api/openstack/compute/servers.py#L542\n\ncompute_api.get_all() is raising FlavorNotFound if search_opts includes a non-existing flavor ID.\n\nSince this is list operation, shouldn't the result of GET /servers that finds no matches be an empty list?", 
            "date_created": "2013-01-21 16:15:25.742958+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/20198", 
            "date_created": "2013-01-22 00:38:41.033040+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/20198\nCommitted: http://github.com/openstack/nova/commit/656052036374086f785f02bf288d23af14ab2ab5\nSubmitter: Jenkins\nBranch:    master\n\ncommit 656052036374086f785f02bf288d23af14ab2ab5\nAuthor: Davanum Srinivas <email address hidden>\nDate:   Mon Jan 21 19:36:20 2013 -0500\n\n    List servers having non-existent flavor should return empty list\n    \n    When we catch the exception just return an empty list.\n    \n    Fixes LP# 1102462\n    \n    Change-Id: I730bd505c40fa76cb0ba687575e3c3882fee6254\n", 
            "date_created": "2013-01-23 01:04:17.060882+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-02-21 08:53:16.584596+00:00"
}