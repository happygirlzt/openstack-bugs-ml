{
    "status": "Fix Released", 
    "last_updated": "2013-10-28 12:43:37.914266+00:00", 
    "description": "If create a boot from volume like so without passing in the image argument\n\nnova boot --flavor 1 --key-name kerrin --block-device-mapping vda=5eb71b67-bfd2-4935-9b55-9ad92e14eae4::: bfv-vm2\n\nAnd then I try and create an image from this instance like so, I get the following exception.\n\nmichael@controller:~/devstack$ nova --debug image-create b21282c1-02b3-4fc0-a9d1-73a19261b353 test1\n....\nDEBUG (shell:768) The resource could not be found. (HTTP 404) (Request-ID: req-254dae37-b8c2-4e75-ac8e-3e44981bf1cc)\nTraceback (most recent call last):\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 765, in main\n    OpenStackComputeShell().main(map(strutils.safe_decode, sys.argv[1:]))\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 701, in main\n    args.func(self.cs, args)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/shell.py\", line 1225, in do_image_create\n    image_uuid = cs.servers.create_image(server, args.name)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 704, in create_image\n    resp = self._action('createImage', server, body)[0]\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 872, in _action\n    return self.api.client.post(url, body=body)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 233, in post\n    return self._cs_request(url, 'POST', **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 217, in _cs_request\n    **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 199, in _time_request\n    resp, body = self.request(url, method, **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 193, in request\n    raise exceptions.from_response(resp, body, url, method)\nNotFound: The resource could not be found. (HTTP 404) (Request-ID: req-254dae37-b8c2-4e75-ac8e-3e44981bf1cc)\n\nIn the nova-api logs I get the following exception:\n\n013-06-14 18:04:28.667 ERROR nova.api.openstack [req-9caaa082-9e1a-43a2-9c95-2a7179cf751e admin demo] Caught error: Image  could not be found.\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack Traceback (most recent call last):\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 109, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 461, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 899, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     content_type, body, accept)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 958, in _process_stack\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1039, in dispatch\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/common.py\", line 450, in inner\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return f(*args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 1350, in _action_create_image\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     src_image = self.compute_api.image_service.show(context, img)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 239, in show\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     _reraise_translated_image_exception(image_id)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 237, in show\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     image = self._client.call(context, 1, 'get', image_id)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 182, in call\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return getattr(client.images, method)(*args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/v1/images.py\", line 116, in get\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     % urllib.quote(image_id))\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 261, in raw_request\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self._http_request(url, method, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 222, in _http_request\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     raise exc.from_response(resp, body_str)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack ImageNotFound: Image  could not be found.\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack\n2013-06-14 18:04:28.669 INFO nova.api.openstack [req-9caaa082-9e1a-43a2-9c95-2a7179cf751e admin demo] http://192.168.122.55:8774/v2/0bc1ce21a6d741d7a5603c66c33249cc/servers/b21282c1-02b3-4fc0-a9d1-73a19261b353/action returned with HTTP 404", 
    "tags": [
        "api"
    ], 
    "importance": "High", 
    "heat": 32, 
    "link": "https://bugs.launchpad.net/nova/+bug/1191069", 
    "owner": "https://api.launchpad.net/1.0/~houshengbo", 
    "id": 1191069, 
    "index": 1125, 
    "openned": "2013-06-14 17:06:02.830176+00:00", 
    "created": "2013-06-14 17:06:02.830176+00:00", 
    "title": "image-create fails on a boot from volume when no image ref is specified", 
    "comments": [
        {
            "content": "If create a boot from volume like so without passing in the image argument\n\nnova boot --flavor 1 --key-name kerrin --block-device-mapping vda=5eb71b67-bfd2-4935-9b55-9ad92e14eae4::: bfv-vm2\n\nAnd then I try and create an image from this instance like so, I get the following exception.\n\nmichael@controller:~/devstack$ nova --debug image-create b21282c1-02b3-4fc0-a9d1-73a19261b353 test1\n....\nDEBUG (shell:768) The resource could not be found. (HTTP 404) (Request-ID: req-254dae37-b8c2-4e75-ac8e-3e44981bf1cc)\nTraceback (most recent call last):\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 765, in main\n    OpenStackComputeShell().main(map(strutils.safe_decode, sys.argv[1:]))\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 701, in main\n    args.func(self.cs, args)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/shell.py\", line 1225, in do_image_create\n    image_uuid = cs.servers.create_image(server, args.name)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 704, in create_image\n    resp = self._action('createImage', server, body)[0]\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 872, in _action\n    return self.api.client.post(url, body=body)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 233, in post\n    return self._cs_request(url, 'POST', **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 217, in _cs_request\n    **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 199, in _time_request\n    resp, body = self.request(url, method, **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 193, in request\n    raise exceptions.from_response(resp, body, url, method)\nNotFound: The resource could not be found. (HTTP 404) (Request-ID: req-254dae37-b8c2-4e75-ac8e-3e44981bf1cc)\n\nIn the nova-api logs I get the following exception:\n\n013-06-14 18:04:28.667 ERROR nova.api.openstack [req-9caaa082-9e1a-43a2-9c95-2a7179cf751e admin demo] Caught error: Image  could not be found.\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack Traceback (most recent call last):\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 109, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 461, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 899, in __call__\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     content_type, body, accept)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 958, in _process_stack\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1039, in dispatch\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/common.py\", line 450, in inner\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return f(*args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 1350, in _action_create_image\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     src_image = self.compute_api.image_service.show(context, img)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 239, in show\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     _reraise_translated_image_exception(image_id)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 237, in show\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     image = self._client.call(context, 1, 'get', image_id)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/image/glance.py\", line 182, in call\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return getattr(client.images, method)(*args, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/v1/images.py\", line 116, in get\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     % urllib.quote(image_id))\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 261, in raw_request\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     return self._http_request(url, method, **kwargs)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 222, in _http_request\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack     raise exc.from_response(resp, body_str)\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack ImageNotFound: Image  could not be found.\n2013-06-14 18:04:28.667 15808 TRACE nova.api.openstack\n2013-06-14 18:04:28.669 INFO nova.api.openstack [req-9caaa082-9e1a-43a2-9c95-2a7179cf751e admin demo] http://192.168.122.55:8774/v2/0bc1ce21a6d741d7a5603c66c33249cc/servers/b21282c1-02b3-4fc0-a9d1-73a19261b353/action returned with HTTP 404", 
            "date_created": "2013-06-14 17:06:02.830176+00:00", 
            "author": "https://api.launchpad.net/1.0/~michael-kerrin-w"
        }, 
        {
            "content": "What's the expected behaviour here? I don't think just creating an image out of a boot volume is safe.\n\nImage based root disks have a flavor-defined upper limit. Boot volumes don't. Creating an image out of a large volume requires dumping all this data to the compute host filesystem before transferring to glance.", 
            "date_created": "2013-07-01 09:08:44.227492+00:00", 
            "author": "https://api.launchpad.net/1.0/~parthipan"
        }, 
        {
            "content": "This issue can be tentatively resolved by setting the image_ref field when booting a VM from a volume. The volume normally references an image, if it is created from an image. However, the potential situation can be after the volume creation, the original image is deleted. If this happens, the image can not be found for sure.\n\nAnother approach can be copying the content of the volume, from which the VM boots. Instead of checking the image, we need to check the volume, if the VM has a volume backend.", 
            "date_created": "2013-07-19 10:19:39.987764+00:00", 
            "author": "https://api.launchpad.net/1.0/~houshengbo"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/37872", 
            "date_created": "2013-07-19 11:03:42.317107+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/38412", 
            "date_created": "2013-07-24 04:29:08.535159+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "stable/grizzly patch: https://review.openstack.org/#/c/48381/", 
            "date_created": "2013-10-02 12:27:09.983955+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ], 
    "closed": "2013-10-28 12:43:35.937827+00:00"
}