{
    "status": "Expired", 
    "last_updated": "2016-01-26 04:17:24.180441+00:00", 
    "description": "$ rpm -qa | grep nova\nopenstack-nova-novncproxy-2015.1.0-3.el7.noarch\npython-nova-2015.1.0-3.el7.noarch\nopenstack-nova-common-2015.1.0-3.el7.noarch\nopenstack-nova-api-2015.1.0-3.el7.noarch\nopenstack-nova-console-2015.1.0-3.el7.noarch\nopenstack-nova-scheduler-2015.1.0-3.el7.noarch\nopenstack-nova-conductor-2015.1.0-3.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-cert-2015.1.0-3.el7.noarch\n\nI was trying to list servers using both Nova V2 and V2.1 API.\n\nIt works fine, when using v2 endpoint:\n$ curl -H 'content-type: application/json' -H \"X-auth-token: 4cd9bd90bdb34c58870bfebbb3510cd9\" http://127.0.0.1:8774/v2/c7d0b84341d74f10a10aa3b999727e26/servers\n{\"servers\": []}\n\nBut the same request fails on v2.1 endpoint:\n$ curl -H 'content-type: application/json' -H \"X-auth-token: 4cd9bd90bdb34c58870bfebbb3510cd9\" http://127.0.0.1:8774/v2.1/c7d0b84341d74f10a10aa3b999727e26/servers\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n\n2015-10-14 12:01:23.279 3087 ERROR nova.api.openstack [req-8d9e5fa2-721b-4da9-b36d-a5daf5ec29b9 b228318c4b434e20a93d5e2c40e0425d c7d0b84341d74f10a10aa3b999727e26 - - -] Caught error: 'APIRouterV21' object has no attribute '_router'\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack Traceback (most recent call last):\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1296, in send\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1260, in call_application\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 634, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 554, in _call_app\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 130, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 195, in call_func\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 482, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._router\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack AttributeError: 'APIRouterV21' object has no attribute '_router'", 
    "tags": [
        "v2.1"
    ], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1505967", 
    "owner": "None", 
    "id": 1505967, 
    "index": 7075, 
    "openned": "2015-10-14 09:16:31.415299+00:00", 
    "created": "2015-10-14 09:16:31.415299+00:00", 
    "title": "AttributeError: 'APIRouterV21' object has no attribute '_router'", 
    "comments": [
        {
            "content": "$ rpm -qa | grep nova\nopenstack-nova-novncproxy-2015.1.0-3.el7.noarch\npython-nova-2015.1.0-3.el7.noarch\nopenstack-nova-common-2015.1.0-3.el7.noarch\nopenstack-nova-api-2015.1.0-3.el7.noarch\nopenstack-nova-console-2015.1.0-3.el7.noarch\nopenstack-nova-scheduler-2015.1.0-3.el7.noarch\nopenstack-nova-conductor-2015.1.0-3.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-cert-2015.1.0-3.el7.noarch\n\nI was trying to list servers using both Nova V2 and V2.1 API.\n\nIt works fine, when using v2 endpoint:\n$ curl -H 'content-type: application/json' -H \"X-auth-token: 4cd9bd90bdb34c58870bfebbb3510cd9\" http://127.0.0.1:8774/v2/c7d0b84341d74f10a10aa3b999727e26/servers\n{\"servers\": []}\n\nBut the same request fails on v2.1 endpoint:\n$ curl -H 'content-type: application/json' -H \"X-auth-token: 4cd9bd90bdb34c58870bfebbb3510cd9\" http://127.0.0.1:8774/v2.1/c7d0b84341d74f10a10aa3b999727e26/servers\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n\n2015-10-14 12:01:23.279 3087 ERROR nova.api.openstack [req-8d9e5fa2-721b-4da9-b36d-a5daf5ec29b9 b228318c4b434e20a93d5e2c40e0425d c7d0b84341d74f10a10aa3b999727e26 - - -] Caught error: 'APIRouterV21' object has no attribute '_router'\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack Traceback (most recent call last):\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1296, in send\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1260, in call_application\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 634, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 554, in _call_app\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 130, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 195, in call_func\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 482, in __call__\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack     return self._router\n2015-10-14 12:01:23.279 3087 TRACE nova.api.openstack AttributeError: 'APIRouterV21' object has no attribute '_router'", 
            "date_created": "2015-10-14 09:16:31.415299+00:00", 
            "author": "https://api.launchpad.net/1.0/~scsnow"
        }, 
        {
            "content": "Pavel, don't see this issue in latest devstack + master, can you please cross check your api-paste.ini?\n\nhttp://git.openstack.org/cgit/openstack/nova/tree/etc/nova/api-paste.ini?h=stable/liberty", 
            "date_created": "2015-10-15 18:07:28.666782+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "I'm on Kilo release and my api-paste.ini is identical with:\n\nhttp://git.openstack.org/cgit/openstack/nova/plain/etc/nova/api-paste.ini?h=stable/kilo", 
            "date_created": "2015-10-15 19:27:44.221369+00:00", 
            "author": "https://api.launchpad.net/1.0/~scsnow"
        }, 
        {
            "content": "I am hitting this issue, too. \n\n[root@grunt15 ~]# rpm -qa | grep nova\nopenstack-nova-api-2015.1.1-1.fc23.noarch\nopenstack-nova-scheduler-2015.1.1-1.fc23.noarch\npython-novaclient-2.23.0-1.fc23.noarch\nopenstack-nova-conductor-2015.1.1-1.fc23.noarch\npython-nova-2015.1.1-1.fc23.noarch\nopenstack-nova-compute-2015.1.1-1.fc23.noarch\nopenstack-nova-novncproxy-2015.1.1-1.fc23.noarch\nopenstack-nova-cert-2015.1.1-1.fc23.noarch\nopenstack-nova-common-2015.1.1-1.fc23.noarch\nopenstack-nova-console-2015.1.1-1.fc23.noarch\n\n2015-10-29 12:09:03.684 8405 ERROR nova.api.openstack [req-e9091fff-85d4-4c92-9a64-afa21991cb61 ffb7a3f618f640a0b7929dd5cb4da421 f443202c29284b2bad66884c5c2169b2 - - -] Caught error: 'APIRouterV21' object has no attribute '_router'\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack Traceback (most recent call last):\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack return req.get_response(self.application)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1317, in send\n2015-10-29\n 12:09:03.684 8405 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1281, in call_application\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 634, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 554, in _call_app\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 130, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 195, in call_func\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 482, in __call__\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack     return self._router\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack AttributeError: 'APIRouterV21' object has no attribute '_router'\n2015-10-29 12:09:03.684 8405 TRACE nova.api.openstack \n2015-10-29 12:09:03.685 8405 INFO nova.api.openstack [req-e9091fff-85d4-4c92-9a64-afa21991cb61 ffb7a3f618f640a0b7929dd5cb4da421 f443202c29284b2bad66884c5c2169b2 - - -] http://10.66.4.18:8774/v2.1/f443202c29284b2bad66884c5c2169b2/flavors/detail returned with HTTP 500\n2015-10-29 12:09:03.686 8405 INFO nova.osapi_compute.wsgi.server [req-e9091fff-85d4-4c92-9a64-afa21991cb61 ffb7a3f618f640a0b7929dd5cb4da421 f443202c29284b2bad66884c5c2169b2 - - -] 10.64.10.51 \"GET /v2.1/f443202c29284b2bad66884c5c2169b2/flavors/detail HTTP/1.1\" status: 500 len: 359 time: 0.0366120\nHide full text\n", 
            "date_created": "2015-10-29 16:28:18.722495+00:00", 
            "author": "https://api.launchpad.net/1.0/~wei-w-wang"
        }, 
        {
            "content": "Problem went away after restart nova-api service", 
            "date_created": "2015-10-29 16:36:28.484793+00:00", 
            "author": "https://api.launchpad.net/1.0/~wei-w-wang"
        }, 
        {
            "content": "Restarting nova-api doesn't help in my case (same error in nova-api.log as above):\n\n[root@node ~]# systemctl restart openstack-nova-api\n[root@node ~]# curl -H 'content-type: application/json' -H \"X-auth-token: a41cfb93242c459dbe8d052dc4d44f45\" http://controller:8774/v2.1/01e76893be8b41e4a42768ff5c5b24fc/servers\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n\nBy the way, I don't have v2.1 endpoint defined in keystone service/endpoint catalog. Is it the cause?\n\n", 
            "date_created": "2015-11-02 13:46:43.581374+00:00", 
            "author": "https://api.launchpad.net/1.0/~scsnow"
        }, 
        {
            "content": "I have the same problem\n\nopenstack-nova-common-2015.1.1-1.el7.noarch\nopenstack-nova-conductor-2015.1.1-1.el7.noarch\nopenstack-nova-console-2015.1.1-1.el7.noarch\nopenstack-nova-novncproxy-2015.1.1-1.el7.noarch\npython-nova-2015.1.1-1.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-scheduler-2015.1.1-1.el7.noarch\nopenstack-nova-compute-2015.1.1-1.el7.noarch\nopenstack-nova-cert-2015.1.1-1.el7.noarch\nopenstack-nova-api-2015.1.1-1.el7.noarch\n\n--------------------------\n\n\nopenstack service create --name novav21 --description \"OpenStack Compute v2.1\" computev21\n\nopenstack endpoint create --publicurl http://controller:8774/v2.1/%\\(tenant_id\\)s --internalurl http://controller:8774/v2.1/%\\(tenant_id\\)s --adminurl http://controller:8774/v2.1/%\\(tenant_id\\)s --region RegionOne <computev21 service ID>\n\nopenstack-service restart nova\n\nCommands like these\n   curl -s X GET -H \"X-Auth-Token:be655feedbb34293ab5bb1f9634decae\" http://sdncc01cn:8774/v2.1\n   nova --service-type computev21 list\n return error:\n\n2015-11-26 05:51:04.944 4916 ERROR nova.api.openstack [req-66a73558-ba54-42c1-acf2-68f88d84567f 59c47e6b00b34aa4adde64ca6a3f4dfd 18133554bf784aafb4af7a2f714e0f75 - - -] Caught error: 'APIRouterV21' object has no attribute '_router'\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack Traceback (most recent call last):\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1296, in send\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/request.py\", line 1260, in call_application\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 634, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/keystonemiddleware/auth_token/__init__.py\", line 554, in _call_app\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 144, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 130, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/webob/dec.py\", line 195, in call_func\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack   File \"/usr/lib/python2.7/site-packages/nova/wsgi.py\", line 482, in __call__\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack     return self._router\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack AttributeError: 'APIRouterV21' object has no attribute '_router'\n2015-11-26 05:51:04.944 4916 TRACE nova.api.openstack\n2015-11-26 05:51:04.945 4916 INFO nova.api.openstack [req-66a73558-ba54-42c1-acf2-68f88d84567f 59c47e6b00b34aa4adde64ca6a3f4dfd 18133554bf784aafb4af7a2f714e0f75 - - -] http://controller:8774/v2.1/18133554bf784aafb4af7a2f714e0f75/servers/detail returned with HTTP 500\n\n\n\n\n\n", 
            "date_created": "2015-11-26 10:59:00.738036+00:00", 
            "author": "https://api.launchpad.net/1.0/~oleksandr-mykhalskyi"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2016-01-26 04:17:20.992806+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2016-01-26 04:17:21.887790+00:00"
}