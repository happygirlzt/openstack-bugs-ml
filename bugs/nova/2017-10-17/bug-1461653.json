{
    "status": "Invalid", 
    "last_updated": "2015-11-17 13:43:55.688069+00:00", 
    "description": "I recently deployed my 2nd OpenStack Juno region and as soon as the cinder node came up in the 2nd region attaching of volumes stopped working in both regions.\n\nI have tested through horizon & directly on the command line using nova & cinder.  I have OS_REGION_NAME specified as an environment variable & have the region name properly selected when using horizon.\n\nOS_AUTH_URL=https://cloudapi-Region1.mydomain.net:5000/v2.0\nOS_PASSWORD=mypassword\nOS_REGION_NAME=Region1\nOS_TENANT_NAME='Test Tenant'\nOS_USERNAME=myuser\n\nWhen I try to attach I get the following error:\nnova volume-attach c38ed460-4547-4a7d-b917-7d6c7aafa38e c57544a1-443c-4ee0-a009-19b5e1c3598a\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-caa01caa-cbae-4164-88ce-fa1c2c9834a9)\n\nAnd when I check the nova api log I see the following error:\n2015-06-03 18:20:56.634 11151 ERROR nova.api.openstack [req-caa01caa-cbae-4164-88ce-fa1c2c9834a9 None] Caught error: AmbiguousEndpoints: [{u'adminURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region2', u'id': u'5447a4d47f1e439899b99d01ada74426', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}, {u'adminURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region1', u'id': u'5544fc1b1b7449af83161c56d4d3dfe9', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}]\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack Traceback (most recent call last):\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 124, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 661, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return self._app(env, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 910, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     content_type, body, accept)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 975, in _process_stack\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1059, in dispatch\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return method(req=request, **action_args)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/contrib/volumes.py\", line 418, in create\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume_id, device)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 221, in wrapped\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 211, in inner\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return function(self, context, instance, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 192, in inner\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2947, in attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     disk_bus, device_type)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2928, in _attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume_bdm.destroy(context)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     six.reraise(self.type_, self.value, self.tb)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2921, in _attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume = self.volume_api.get(context, volume_id)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 185, in wrapper\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     res = method(self, ctx, volume_id, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 283, in get\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     item = cinderclient(context).volumes.get(volume_id)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 92, in cinderclient\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     version = get_cinder_client_version(context)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 254, in get_cinder_client_version\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     endpoint_type=endpoint_type)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/cinderclient/service_catalog.py\", line 86, in url_for\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     raise cinderclient.exceptions.AmbiguousEndpoints(endpoints=eplist)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack AmbiguousEndpoints: AmbiguousEndpoints: [{u'adminURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region2', u'id': u'5447a4d47f1e439899b99d01ada74426', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}, {u'adminURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region1', u'id': u'5544fc1b1b7449af83161c56d4d3dfe9', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}]\n\nI don't know why the REGION_NAME environment or command line (--os-region-name) aren't getting passed through to nova or cinder.\n\nI am running on ubuntu 14.04.2 LTS with that latest updates for OS Juno.\n\nThis is similar to bug 1087735 from 2013 but is occurring on Juno.\n\nii  nova-api                             1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - API frontend\nii  nova-cert                            1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - certificate management\nii  nova-common                          1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - common files\nii  nova-conductor                       1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - conductor service\nii  nova-consoleauth                     1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                      1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                       1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute Python libraries\nii  python-novaclient                    1:2.19.0-0ubuntu1~cloud0              all          client library for OpenStack Compute API\nii  cinder-api                           1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - API server\nii  cinder-common                        1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - common files\nii  cinder-scheduler                     1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - Scheduler server\nii  python-cinder                        1:2014.2.3-0ubuntu1~cloud0            all          Cinder Python libraries\nii  python-cinderclient                  1:1.1.0-0ubuntu1~cloud0               all          python bindings to the OpenStack Volume API", 
    "tags": [
        "api", 
        "volumes"
    ], 
    "importance": "Medium", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1461653", 
    "owner": "None", 
    "id": 1461653, 
    "index": 4266, 
    "openned": "2015-06-03 18:29:32.140649+00:00", 
    "created": "2015-06-03 18:29:32.140649+00:00", 
    "title": "Attaching volume fails if keystone has multiple endpoints of Cinder (juno)", 
    "comments": [
        {
            "content": "I recently deployed my 2nd OpenStack Juno region and as soon as the cinder node came up in the 2nd region attaching of volumes stopped working in both regions.\n\nI have tested through horizon & directly on the command line using nova & cinder.  I have OS_REGION_NAME specified as an environment variable & have the region name properly selected when using horizon.\n\nOS_AUTH_URL=https://cloudapi-wdc001.zzservers.net:5000/v2.0\nOS_PASSWORD=mypassword\nOS_REGION_NAME=Region1\nOS_TENANT_NAME='Test Tenant'\nOS_USERNAME=myuser\n\n\nWhen I try to attach I get the following error:\nnova volume-attach c38ed460-4547-4a7d-b917-7d6c7aafa38e c57544a1-443c-4ee0-a009-19b5e1c3598a\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-caa01caa-cbae-4164-88ce-fa1c2c9834a9)\n\nAnd when I check the nova api log I see the following error:\n2015-06-03 18:20:56.634 11151 ERROR nova.api.openstack [req-caa01caa-cbae-4164-88ce-fa1c2c9834a9 None] Caught error: AmbiguousEndpoints: [{u'adminURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region2', u'id': u'5447a4d47f1e439899b99d01ada74426', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}, {u'adminURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region1', u'id': u'5544fc1b1b7449af83161c56d4d3dfe9', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}]\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack Traceback (most recent call last):\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 124, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 661, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return self._app(env, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 910, in __call__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     content_type, body, accept)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 975, in _process_stack\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1059, in dispatch\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return method(req=request, **action_args)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/contrib/volumes.py\", line 418, in create\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume_id, device)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 221, in wrapped\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return func(self, context, target, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 211, in inner\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return function(self, context, instance, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 192, in inner\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     return f(self, context, instance, *args, **kw)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2947, in attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     disk_bus, device_type)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2928, in _attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume_bdm.destroy(context)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     six.reraise(self.type_, self.value, self.tb)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2921, in _attach_volume\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     volume = self.volume_api.get(context, volume_id)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 185, in wrapper\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     res = method(self, ctx, volume_id, *args, **kwargs)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 283, in get\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     item = cinderclient(context).volumes.get(volume_id)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 92, in cinderclient\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     version = get_cinder_client_version(context)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 254, in get_cinder_client_version\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     endpoint_type=endpoint_type)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/cinderclient/service_catalog.py\", line 86, in url_for\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack     raise cinderclient.exceptions.AmbiguousEndpoints(endpoints=eplist)\n2015-06-03 18:20:56.634 11151 TRACE nova.api.openstack AmbiguousEndpoints: AmbiguousEndpoints: [{u'adminURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region2', u'id': u'5447a4d47f1e439899b99d01ada74426', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region2.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}, {u'adminURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'region': u'Region1', u'id': u'5544fc1b1b7449af83161c56d4d3dfe9', 'serviceName': u'cinder', u'internalURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63', u'publicURL': u'https://cloudapi-Region1.mydomain.net:8776/v1/f6121817631f4c35bf40c9db1d973e63'}]\n\n\nI don't know why the REGION_NAME environment or command line (--os-region-name) aren't getting passed through to nova or cinder.  \n\nI am running on ubuntu 14.04.2 LTS with that latest updates for OS Juno.\n\nThis is similar to bug 1087735 from 2013 but is occurring on Juno.\n\nii  nova-api                             1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - API frontend\nii  nova-cert                            1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - certificate management\nii  nova-common                          1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - common files\nii  nova-conductor                       1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - conductor service\nii  nova-consoleauth                     1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                      1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                       1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute - virtual machine scheduler\nii  python-nova                          1:2014.2.3-0ubuntu1~cloud0            all          OpenStack Compute Python libraries\nii  python-novaclient                    1:2.19.0-0ubuntu1~cloud0              all          client library for OpenStack Compute API\nii  cinder-api                           1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - API server\nii  cinder-common                        1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - common files\nii  cinder-scheduler                     1:2014.2.3-0ubuntu1~cloud0            all          Cinder storage service - Scheduler server\nii  python-cinder                        1:2014.2.3-0ubuntu1~cloud0            all          Cinder Python libraries\nii  python-cinderclient                  1:1.1.0-0ubuntu1~cloud0               all          python bindings to the OpenStack Volume API", 
            "date_created": "2015-06-03 18:29:32.140649+00:00", 
            "author": "https://api.launchpad.net/1.0/~dmz-r"
        }, 
        {
            "content": "This is a configuration issue. In a multiregion environment you need to specify which region the cinder is that you want to attach to - https://github.com/openstack/nova/blob/044154de11ddd0d250e3486718843642ddaf579a/nova/volume/cinder.py#L50-L53 ", 
            "date_created": "2015-11-17 13:43:22.699888+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Which is a server side configuration, not something that comes from the client.", 
            "date_created": "2015-11-17 13:43:38.098509+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ], 
    "closed": "2015-11-17 13:43:51.376332+00:00"
}