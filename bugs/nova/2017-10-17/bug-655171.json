{
    "status": "Fix Released", 
    "last_updated": "2015-06-26 15:30:51.981972+00:00", 
    "description": "\nI have just done a fresh install using the package from latest nova-core ppa :\n\nchmouel@chmoutest:~$ dpkg-query --showformat='${Package}-${Version}\\n' -W '*nova*'\nnova-api-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-common-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-compute-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-objectstore-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-volume-0.9.1~r325-0ubuntu0ppa1~lucid1\npython-nova-0.9.1~r325-0ubuntu0ppa1~lucid1\n\nI am running those command on a fresh install :\n\nnova-manage user admin ant\nnova-manage project create antproj ant\nnova-manage project zip antproj ant\nunzip nova.zip\n\nand this is what I am getting in the logs (there is two of them!), things seems to work still afterward :\n\nnova-compute.log:\n\n2010-10-05 15:32:53+0100 [-] (root): ERROR model server went away\n2010-10-05 15:32:53+0100 [-] Traceback (most recent call last):\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n2010-10-05 15:32:53+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n2010-10-05 15:32:53+0100 [-]     return IMPL.service_update(context, service_id, values)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n2010-10-05 15:32:53+0100 [-]     return f(*args, **kwargs)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n2010-10-05 15:32:53+0100 [-]     service_ref.save(session=session)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n2010-10-05 15:32:53+0100 [-]     session.flush()\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n2010-10-05 15:32:53+0100 [-]     self._flush(objects)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n2010-10-05 15:32:53+0100 [-]     flush_context.execute()\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n2010-10-05 15:32:53+0100 [-]     rec.execute(self)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n2010-10-05 15:32:53+0100 [-]     uow\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n2010-10-05 15:32:53+0100 [-]     execute(statement, params)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:32:53+0100 [-]     params)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:32:53+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:32:53+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:32:53+0100 [-]     context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:32:53+0100 [-]     context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:32:53+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:32:53+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:48.272188', 5, 1)\n2010-10-05 15:33:03+0100 [-] (root): ERROR Recovered model server connection!\n2010-10-05 15:33:13+0100 [-] (root): ERROR model server went away\n2010-10-05 15:33:13+0100 [-] Traceback (most recent call last):\n2010-10-05 15:33:13+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n\nnova-volume.log:\n\n2010-10-05 15:31:56+0100 [-] Traceback (most recent call last):\n2010-10-05 15:31:56+0100 [-]   File \"/usr/bin/nova-volume\", line 40, in <module>\n2010-10-05 15:31:56+0100 [-]     twistd.serve(__file__)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/twistd.py\", line 273, in serve\n2010-10-05 15:31:56+0100 [-]     twistd.runApp(options)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n2010-10-05 15:31:56+0100 [-]     _SomeApplicationRunner(config).run()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 423, in run\n2010-10-05 15:31:56+0100 [-]     self.postApplication()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 205, in postApplication\n2010-10-05 15:31:56+0100 [-]     self.startApplication(self.application)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 317, in startApplication\n2010-10-05 15:31:56+0100 [-]     app.startApplication(application, not self.config['no_save'])\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 713, in startApplication\n2010-10-05 15:31:56+0100 [-]     service.IService(application).startService()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 278, in startService\n2010-10-05 15:31:56+0100 [-]     service.startService()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 69, in startService\n2010-10-05 15:31:56+0100 [-]     self.binary)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 95, in service_get_by_args\n2010-10-05 15:31:56+0100 [-]     return IMPL.service_get_by_args(context, host, binary)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 195, in __getattr__\n2010-10-05 15:31:56+0100 [-]     backend = self.__get_backend()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 190, in __get_backend\n2010-10-05 15:31:56+0100 [-]     self.__backend = __import__(name, None, None, fromlist)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/__init__.py\", line 24, in <module>\n2010-10-05 15:31:56+0100 [-]     models.register_models()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 469, in register_models\n2010-10-05 15:31:56+0100 [-]     model.metadata.create_all(engine)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/schema.py\", line 2119, in create_all\n2010-10-05 15:31:56+0100 [-]     bind.create(self, checkfirst=checkfirst, tables=tables)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1701, in create\n2010-10-05 15:31:56+0100 [-]     connection=connection, **kwargs)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1743, in _run_visitor\n2010-10-05 15:31:56+0100 [-]     **kwargs).traverse_single(element)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 42, in visit_metadata\n2010-10-05 15:31:56+0100 [-]     self.traverse_single(table, create_ok=True)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n2010-10-05 15:31:56+0100 [-]     self.connection.execute(schema.CreateTable(table))\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:31:56+0100 [-]     params)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1247, in _execute_ddl\n2010-10-05 15:31:56+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n...skipping...\n2010-10-05 15:32:54+0100 [-]     execute(statement, params)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:32:54+0100 [-]     params)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:32:54+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:32:54+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:32:54+0100 [-]     context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:32:54+0100 [-]     context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:32:54+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:32:54+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:49.582295', 5, 2)\n2010-10-05 15:33:01+0100 [-] (root): ERROR Recovered model server connection!\n2010-10-05 15:33:34+0100 [-] (root): ERROR model server went away\n2010-10-05 15:33:34+0100 [-] Traceback (most recent call last):\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n2010-10-05 15:33:34+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n2010-10-05 15:33:34+0100 [-]     return IMPL.service_update(context, service_id, values)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n2010-10-05 15:33:34+0100 [-]     return f(*args, **kwargs)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n2010-10-05 15:33:34+0100 [-]     service_ref.save(session=session)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n2010-10-05 15:33:34+0100 [-]     session.flush()\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n2010-10-05 15:33:34+0100 [-]     self._flush(objects)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n2010-10-05 15:33:34+0100 [-]     flush_context.execute()\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n2010-10-05 15:33:34+0100 [-]     rec.execute(self)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n2010-10-05 15:33:34+0100 [-]     uow\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n2010-10-05 15:33:34+0100 [-]     execute(statement, params)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:33:34+0100 [-]     params)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:33:34+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:33:34+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:33:34+0100 [-]     context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:33:34+0100 [-]     context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:33:34+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:33:34+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:33:29.616427', 8, 2)", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/655171", 
    "owner": "https://api.launchpad.net/1.0/~jk0", 
    "id": 655171, 
    "index": 2201, 
    "openned": "2010-10-05 14:36:13.210280+00:00", 
    "created": "2010-10-05 14:36:13.210280+00:00", 
    "title": "SQL Errors on a fresh install", 
    "comments": [
        {
            "content": "\nI have just done a fresh install using the package from latest nova-core ppa :\n\nchmouel@chmoutest:~$ dpkg-query --showformat='${Package}-${Version}\\n' -W '*nova*'\nnova-api-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-common-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-compute-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-objectstore-0.9.1~r325-0ubuntu0ppa1~lucid1\nnova-volume-0.9.1~r325-0ubuntu0ppa1~lucid1\npython-nova-0.9.1~r325-0ubuntu0ppa1~lucid1\n\nI am running those command on a fresh install :\n\nnova-manage user admin ant\nnova-manage project create antproj ant\nnova-manage project zip antproj ant\nunzip nova.zip\n\nand this is what I am getting in the logs (there is two of them!), things seems to work still afterward :\n\nnova-compute.log:\n\n2010-10-05 15:32:53+0100 [-] (root): ERROR model server went away\n2010-10-05 15:32:53+0100 [-] Traceback (most recent call last):\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n2010-10-05 15:32:53+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n2010-10-05 15:32:53+0100 [-]     return IMPL.service_update(context, service_id, values)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n2010-10-05 15:32:53+0100 [-]     return f(*args, **kwargs)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n2010-10-05 15:32:53+0100 [-]     service_ref.save(session=session)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n2010-10-05 15:32:53+0100 [-]     session.flush()\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n2010-10-05 15:32:53+0100 [-]     self._flush(objects)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n2010-10-05 15:32:53+0100 [-]     flush_context.execute()\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n2010-10-05 15:32:53+0100 [-]     rec.execute(self)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n2010-10-05 15:32:53+0100 [-]     uow\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n2010-10-05 15:32:53+0100 [-]     execute(statement, params)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:32:53+0100 [-]     params)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:32:53+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:32:53+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:32:53+0100 [-]     context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:32:53+0100 [-]     context)\n2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:32:53+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:32:53+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:48.272188', 5, 1)\n2010-10-05 15:33:03+0100 [-] (root): ERROR Recovered model server connection!\n2010-10-05 15:33:13+0100 [-] (root): ERROR model server went away\n2010-10-05 15:33:13+0100 [-] Traceback (most recent call last):\n2010-10-05 15:33:13+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n\nnova-volume.log:\n\n2010-10-05 15:31:56+0100 [-] Traceback (most recent call last):\n2010-10-05 15:31:56+0100 [-]   File \"/usr/bin/nova-volume\", line 40, in <module>\n2010-10-05 15:31:56+0100 [-]     twistd.serve(__file__)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/twistd.py\", line 273, in serve\n2010-10-05 15:31:56+0100 [-]     twistd.runApp(options)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n2010-10-05 15:31:56+0100 [-]     _SomeApplicationRunner(config).run()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 423, in run\n2010-10-05 15:31:56+0100 [-]     self.postApplication()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 205, in postApplication\n2010-10-05 15:31:56+0100 [-]     self.startApplication(self.application)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 317, in startApplication\n2010-10-05 15:31:56+0100 [-]     app.startApplication(application, not self.config['no_save'])\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 713, in startApplication\n2010-10-05 15:31:56+0100 [-]     service.IService(application).startService()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 278, in startService\n2010-10-05 15:31:56+0100 [-]     service.startService()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 69, in startService\n2010-10-05 15:31:56+0100 [-]     self.binary)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 95, in service_get_by_args\n2010-10-05 15:31:56+0100 [-]     return IMPL.service_get_by_args(context, host, binary)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 195, in __getattr__\n2010-10-05 15:31:56+0100 [-]     backend = self.__get_backend()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 190, in __get_backend\n2010-10-05 15:31:56+0100 [-]     self.__backend = __import__(name, None, None, fromlist)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/__init__.py\", line 24, in <module>\n2010-10-05 15:31:56+0100 [-]     models.register_models()\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 469, in register_models\n2010-10-05 15:31:56+0100 [-]     model.metadata.create_all(engine)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/schema.py\", line 2119, in create_all\n2010-10-05 15:31:56+0100 [-]     bind.create(self, checkfirst=checkfirst, tables=tables)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1701, in create\n2010-10-05 15:31:56+0100 [-]     connection=connection, **kwargs)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1743, in _run_visitor\n2010-10-05 15:31:56+0100 [-]     **kwargs).traverse_single(element)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 42, in visit_metadata\n2010-10-05 15:31:56+0100 [-]     self.traverse_single(table, create_ok=True)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n2010-10-05 15:31:56+0100 [-]     self.connection.execute(schema.CreateTable(table))\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:31:56+0100 [-]     params)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1247, in _execute_ddl\n2010-10-05 15:31:56+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n...skipping...\n2010-10-05 15:32:54+0100 [-]     execute(statement, params)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:32:54+0100 [-]     params)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:32:54+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:32:54+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:32:54+0100 [-]     context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:32:54+0100 [-]     context)\n2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:32:54+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:32:54+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:49.582295', 5, 2)\n2010-10-05 15:33:01+0100 [-] (root): ERROR Recovered model server connection!\n2010-10-05 15:33:34+0100 [-] (root): ERROR model server went away\n2010-10-05 15:33:34+0100 [-] Traceback (most recent call last):\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n2010-10-05 15:33:34+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n2010-10-05 15:33:34+0100 [-]     return IMPL.service_update(context, service_id, values)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n2010-10-05 15:33:34+0100 [-]     return f(*args, **kwargs)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n2010-10-05 15:33:34+0100 [-]     service_ref.save(session=session)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n2010-10-05 15:33:34+0100 [-]     session.flush()\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n2010-10-05 15:33:34+0100 [-]     self._flush(objects)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n2010-10-05 15:33:34+0100 [-]     flush_context.execute()\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n2010-10-05 15:33:34+0100 [-]     rec.execute(self)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n2010-10-05 15:33:34+0100 [-]     uow\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n2010-10-05 15:33:34+0100 [-]     execute(statement, params)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n2010-10-05 15:33:34+0100 [-]     params)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n2010-10-05 15:33:34+0100 [-]     return self.__execute_context(context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n2010-10-05 15:33:34+0100 [-]     context.parameters[0], context=context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n2010-10-05 15:33:34+0100 [-]     context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n2010-10-05 15:33:34+0100 [-]     context)\n2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n2010-10-05 15:33:34+0100 [-]     cursor.execute(statement, parameters)\n2010-10-05 15:33:34+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:33:29.616427', 8, 2)", 
            "date_created": "2010-10-05 14:36:13.210280+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "let me know if you want me to copy those logs in somewhere more readable!\n", 
            "date_created": "2010-10-05 14:36:51.963772+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "This is very likely a duplicate of bug 654452.", 
            "date_created": "2010-10-05 14:49:44.787231+00:00", 
            "author": "https://api.launchpad.net/1.0/~soren"
        }, 
        {
            "content": "Hi Chmouel!\n\nCould you pull a fresh trunk copy of Nova and verify that the fix for bug 654452 indeed fixed this issue for you?  Thanks!\n\n-jay", 
            "date_created": "2010-10-06 02:16:18.638694+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "Hey Jay,\n\nI have just installed the latest packages :\n\n\nchmouel@chmoutest:/var/log/nova$ dpkg-query --showformat='${Package}-${Version}\\n' -W '*nova*'\nnova-api-0.9.1~r331-0ubuntu0ppa1~lucid1\nnova-common-0.9.1~r331-0ubuntu0ppa1~lucid1\nnova-compute-0.9.1~r331-0ubuntu0ppa1~lucid1\nnova-objectstore-0.9.1~r331-0ubuntu0ppa1~lucid1\nnova-volume-0.9.1~r331-0ubuntu0ppa1~lucid1\npython-nova-0.9.1~r331-0ubuntu0ppa1~lucid1\n\n(I believe #654452 was fixed in r322 so should be applied)\n\nAnd I am getting the same error :\n\nnova-volume.log :\n\nhttp://is.gd/fNMcg\n\nnova-compute.log\n\nhttp://is.gd/fNMee\n\nChmouel.\n", 
            "date_created": "2010-10-06 11:45:37.544464+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "Just to clarify everything was reinstalled from scratch.", 
            "date_created": "2010-10-06 11:46:47.636188+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "Thanks for the follow-up Chmouel!  Setting to Confirmed.  We'll get someone looking into this. :)", 
            "date_created": "2010-10-06 14:31:04.925680+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "Sqlite locks the database and doesn't support dealing with threads that well.  That said, if you can put up with an occasional error with the services failing to update, it seems to run fine.  Perhaps we could specifically check for locked database in the services update call and just print a warning instead of an error.\n\nOn Oct 6, 2010, at 7:31 AM, Jay Pipes wrote:\n\n> Thanks for the follow-up Chmouel!  Setting to Confirmed.  We'll get\n> someone looking into this. :)\n> \n> ** Changed in: nova\n>       Status: Incomplete => Confirmed\n> \n> -- \n> SQL Errors on a fresh install\n> https://bugs.launchpad.net/bugs/655171\n> You received this bug notification because you are a member of Nova\n> Bugs, which is subscribed to OpenStack Compute (nova).\n> \n> Status in OpenStack Compute (Nova): Confirmed\n> \n> Bug description:\n> \n> I have just done a fresh install using the package from latest nova-core ppa :\n> \n> chmouel@chmoutest:~$ dpkg-query --showformat='${Package}-${Version}\\n' -W '*nova*'\n> nova-api-0.9.1~r325-0ubuntu0ppa1~lucid1\n> nova-common-0.9.1~r325-0ubuntu0ppa1~lucid1\n> nova-compute-0.9.1~r325-0ubuntu0ppa1~lucid1\n> nova-objectstore-0.9.1~r325-0ubuntu0ppa1~lucid1\n> nova-volume-0.9.1~r325-0ubuntu0ppa1~lucid1\n> python-nova-0.9.1~r325-0ubuntu0ppa1~lucid1\n> \n> I am running those command on a fresh install :\n> \n> nova-manage user admin ant\n> nova-manage project create antproj ant\n> nova-manage project zip antproj ant\n> unzip nova.zip\n> \n> and this is what I am getting in the logs (there is two of them!), things seems to work still afterward :\n> \n> nova-compute.log:\n> \n> 2010-10-05 15:32:53+0100 [-] (root): ERROR model server went away\n> 2010-10-05 15:32:53+0100 [-] Traceback (most recent call last):\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n> 2010-10-05 15:32:53+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n> 2010-10-05 15:32:53+0100 [-]     return IMPL.service_update(context, service_id, values)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n> 2010-10-05 15:32:53+0100 [-]     return f(*args, **kwargs)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n> 2010-10-05 15:32:53+0100 [-]     service_ref.save(session=session)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n> 2010-10-05 15:32:53+0100 [-]     session.flush()\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n> 2010-10-05 15:32:53+0100 [-]     self._flush(objects)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n> 2010-10-05 15:32:53+0100 [-]     flush_context.execute()\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n> 2010-10-05 15:32:53+0100 [-]     rec.execute(self)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n> 2010-10-05 15:32:53+0100 [-]     uow\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n> 2010-10-05 15:32:53+0100 [-]     execute(statement, params)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n> 2010-10-05 15:32:53+0100 [-]     params)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n> 2010-10-05 15:32:53+0100 [-]     return self.__execute_context(context)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n> 2010-10-05 15:32:53+0100 [-]     context.parameters[0], context=context)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n> 2010-10-05 15:32:53+0100 [-]     context)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n> 2010-10-05 15:32:53+0100 [-]     context)\n> 2010-10-05 15:32:53+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n> 2010-10-05 15:32:53+0100 [-]     cursor.execute(statement, parameters)\n> 2010-10-05 15:32:53+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:48.272188', 5, 1)\n> 2010-10-05 15:33:03+0100 [-] (root): ERROR Recovered model server connection!\n> 2010-10-05 15:33:13+0100 [-] (root): ERROR model server went away\n> 2010-10-05 15:33:13+0100 [-] Traceback (most recent call last):\n> 2010-10-05 15:33:13+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n> \n> nova-volume.log:\n> \n> 2010-10-05 15:31:56+0100 [-] Traceback (most recent call last):\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/bin/nova-volume\", line 40, in <module>\n> 2010-10-05 15:31:56+0100 [-]     twistd.serve(__file__)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/twistd.py\", line 273, in serve\n> 2010-10-05 15:31:56+0100 [-]     twistd.runApp(options)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n> 2010-10-05 15:31:56+0100 [-]     _SomeApplicationRunner(config).run()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 423, in run\n> 2010-10-05 15:31:56+0100 [-]     self.postApplication()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 205, in postApplication\n> 2010-10-05 15:31:56+0100 [-]     self.startApplication(self.application)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/scripts/_twistd_unix.py\", line 317, in startApplication\n> 2010-10-05 15:31:56+0100 [-]     app.startApplication(application, not self.config['no_save'])\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 713, in startApplication\n> 2010-10-05 15:31:56+0100 [-]     service.IService(application).startService()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 278, in startService\n> 2010-10-05 15:31:56+0100 [-]     service.startService()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 69, in startService\n> 2010-10-05 15:31:56+0100 [-]     self.binary)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 95, in service_get_by_args\n> 2010-10-05 15:31:56+0100 [-]     return IMPL.service_get_by_args(context, host, binary)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 195, in __getattr__\n> 2010-10-05 15:31:56+0100 [-]     backend = self.__get_backend()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 190, in __get_backend\n> 2010-10-05 15:31:56+0100 [-]     self.__backend = __import__(name, None, None, fromlist)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/__init__.py\", line 24, in <module>\n> 2010-10-05 15:31:56+0100 [-]     models.register_models()\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 469, in register_models\n> 2010-10-05 15:31:56+0100 [-]     model.metadata.create_all(engine)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/schema.py\", line 2119, in create_all\n> 2010-10-05 15:31:56+0100 [-]     bind.create(self, checkfirst=checkfirst, tables=tables)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1701, in create\n> 2010-10-05 15:31:56+0100 [-]     connection=connection, **kwargs)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1743, in _run_visitor\n> 2010-10-05 15:31:56+0100 [-]     **kwargs).traverse_single(element)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n> 2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 42, in visit_metadata\n> 2010-10-05 15:31:56+0100 [-]     self.traverse_single(table, create_ok=True)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n> 2010-10-05 15:31:56+0100 [-]     return meth(obj, **kw)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n> 2010-10-05 15:31:56+0100 [-]     self.connection.execute(schema.CreateTable(table))\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n> 2010-10-05 15:31:56+0100 [-]     params)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1247, in _execute_ddl\n> 2010-10-05 15:31:56+0100 [-]     return self.__execute_context(context)\n> 2010-10-05 15:31:56+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n> ...skipping...\n> 2010-10-05 15:32:54+0100 [-]     execute(statement, params)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n> 2010-10-05 15:32:54+0100 [-]     params)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n> 2010-10-05 15:32:54+0100 [-]     return self.__execute_context(context)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n> 2010-10-05 15:32:54+0100 [-]     context.parameters[0], context=context)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n> 2010-10-05 15:32:54+0100 [-]     context)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n> 2010-10-05 15:32:54+0100 [-]     context)\n> 2010-10-05 15:32:54+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n> 2010-10-05 15:32:54+0100 [-]     cursor.execute(statement, parameters)\n> 2010-10-05 15:32:54+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:32:49.582295', 5, 2)\n> 2010-10-05 15:33:01+0100 [-] (root): ERROR Recovered model server connection!\n> 2010-10-05 15:33:34+0100 [-] (root): ERROR model server went away\n> 2010-10-05 15:33:34+0100 [-] Traceback (most recent call last):\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/service.py\", line 171, in report_state\n> 2010-10-05 15:33:34+0100 [-]     {'report_count': service_ref['report_count'] + 1})\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/api.py\", line 109, in service_update\n> 2010-10-05 15:33:34+0100 [-]     return IMPL.service_update(context, service_id, values)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 92, in wrapper\n> 2010-10-05 15:33:34+0100 [-]     return f(*args, **kwargs)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.py\", line 246, in service_update\n> 2010-10-05 15:33:34+0100 [-]     service_ref.save(session=session)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/models.py\", line 66, in save\n> 2010-10-05 15:33:34+0100 [-]     session.flush()\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1359, in flush\n> 2010-10-05 15:33:34+0100 [-]     self._flush(objects)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 1440, in _flush\n> 2010-10-05 15:33:34+0100 [-]     flush_context.execute()\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 299, in execute\n> 2010-10-05 15:33:34+0100 [-]     rec.execute(self)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/unitofwork.py\", line 443, in execute\n> 2010-10-05 15:33:34+0100 [-]     uow\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/mapper.py\", line 1830, in _save_obj\n> 2010-10-05 15:33:34+0100 [-]     execute(statement, params)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1194, in execute\n> 2010-10-05 15:33:34+0100 [-]     params)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1274, in _execute_clauseelement\n> 2010-10-05 15:33:34+0100 [-]     return self.__execute_context(context)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1305, in __execute_context\n> 2010-10-05 15:33:34+0100 [-]     context.parameters[0], context=context)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1404, in _cursor_execute\n> 2010-10-05 15:33:34+0100 [-]     context)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1397, in _cursor_execute\n> 2010-10-05 15:33:34+0100 [-]     context)\n> 2010-10-05 15:33:34+0100 [-]   File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 299, in do_execute\n> 2010-10-05 15:33:34+0100 [-]     cursor.execute(statement, parameters)\n> 2010-10-05 15:33:34+0100 [-] OperationalError: (OperationalError) database is locked u'UPDATE services SET updated_at=?, report_count=? WHERE services.id = ?' ('2010-10-05 14:33:29.616427', 8, 2)\n> \n> \n", 
            "date_created": "2010-10-07 08:12:45+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "On 7 October 2010 09:12, vishvananda <email address hidden> wrote:\n\n> Sqlite locks the database and doesn't support dealing with threads that\n> well.  That said, if you can put up with an occasional error with the\n> services failing to update, it seems to run fine.  Perhaps we could\n> specifically check for locked database in the services update call and\n> just print a warning instead of an error.\n\n\nWhy don't we add check_same_thread=False to sqlite.connect ? swift team took\na lot of time to tackle the sqlite locking problem (and others) maybe we can\nlearn from them ?\n\nChmouel.\n", 
            "date_created": "2010-10-07 09:19:17+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "I have encountered the same problem while running 'su -s /bin/sh -c \"nova-manage db sync\" nova' during the first install of Nova in Kilo. Deleting the '/var/lib/nova/nova.sqlite' file helped the problem.\nIt seems like the word \"can\" in phrase \"you can delete the /var/lib/nova/nova.sqlite file\" in installation guide should be replaced with \"must\".", 
            "date_created": "2015-06-26 15:30:50.470138+00:00", 
            "author": "https://api.launchpad.net/1.0/~asmaral71"
        }
    ], 
    "closed": "2011-02-07 13:55:51.834770+00:00"
}