{
    "status": "Invalid", 
    "last_updated": "2017-01-31 21:24:37.459656+00:00", 
    "description": "[root@controller1 nova]# openstack usage list\nUsage from 2016-12-10 to 2017-01-08: \n+----------------------------------+---------+--------------+-----------+---------------+\n| Project                          | Servers | RAM MB-Hours | CPU Hours | Disk GB-Hours |\n+----------------------------------+---------+--------------+-----------+---------------+\n| e98032abd959422bb6b38029fa1b2b36 |       9 |    223970.37 |    218.72 |       1093.61 |\n+----------------------------------+---------+--------------+-----------+---------------+\n\n[root@controller1 nova]# nova list\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\n| ID                                   | Name      | Status  | Task State | Power State | Networks               |\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\n| 582eda06-d3b6-409d-84fc-5315751ecc9e | VM-User-1 | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.110 |\n| 9fdb65d4-2eed-4251-9f63-822b19497bf7 | VM-User-2 | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.103 |\n| d9b0c52b-bbd6-4f63-814f-cd244d090ad4 | test-1    | ACTIVE  | -          | Running     | VM-Net=192.168.201.108 |\n| a2ccbc21-363b-4b8a-93d1-923d58d067ed | test-2    | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.109 |\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\nthe two command has the different number VM created.\n\n\"openstack usage list\" give 9 VM created.\n\"nova list\" give 4 VM created.\n\nthe \"nova list\" command show the correct result.\nI suspect the \"openstack usage list\" dump the database data directly.\n\nMariaDB [nova]> select id, display_name ,node from instances;\n+----+--------------+--------------------+\n| id | display_name | node               |\n+----+--------------+--------------------+\n|  1 | Linux        | NULL               |\n|  2 | Linux        | NULL               |\n|  3 | linux        | NULL               |\n|  4 | linux        | NULL               |\n|  5 | linux        | NULL               |\n|  6 | Linux1       | NULL               |\n|  7 | linux        | NULL               |\n|  8 | linux        | NULL               |\n|  9 | linux        | NULL               |\n| 10 | 123          | NULL               |\n| 11 | 123          | NULL               |\n| 12 | vm111        | NULL               |\n| 13 | test         | compute1           |\n| 14 | VM-Min1-1    | compute1           |\n| 15 | VM-Min1-2    | compute1           |\n| 16 | Min-1        | compute1           |\n| 17 | Min-2        | compute1           |\n| 18 | VM-User-1    | compute1           |\n| 19 | VM-User-2    | compute1           |\n| 20 | test-1       | Compute2.puppy.com |\n| 21 | test-2       | Compute2.puppy.com |\n+----+--------------+--------------------+\nIn the instance table, there are 9 VM.\n\nI am not sure the issue caused by what.\n\nJichen", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1654736", 
    "owner": "https://api.launchpad.net/1.0/~pratik-bandarkar", 
    "id": 1654736, 
    "index": 7880, 
    "openned": "2017-01-07 12:15:31.176995+00:00", 
    "created": "2017-01-07 12:15:31.176995+00:00", 
    "title": "VM number summarize not match.", 
    "comments": [
        {
            "content": "[root@controller1 nova]# openstack usage list\nUsage from 2016-12-10 to 2017-01-08: \n+----------------------------------+---------+--------------+-----------+---------------+\n| Project                          | Servers | RAM MB-Hours | CPU Hours | Disk GB-Hours |\n+----------------------------------+---------+--------------+-----------+---------------+\n| e98032abd959422bb6b38029fa1b2b36 |       9 |    223970.37 |    218.72 |       1093.61 |\n+----------------------------------+---------+--------------+-----------+---------------+\n\n[root@controller1 nova]# nova list\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\n| ID                                   | Name      | Status  | Task State | Power State | Networks               |\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\n| 582eda06-d3b6-409d-84fc-5315751ecc9e | VM-User-1 | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.110 |\n| 9fdb65d4-2eed-4251-9f63-822b19497bf7 | VM-User-2 | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.103 |\n| d9b0c52b-bbd6-4f63-814f-cd244d090ad4 | test-1    | ACTIVE  | -          | Running     | VM-Net=192.168.201.108 |\n| a2ccbc21-363b-4b8a-93d1-923d58d067ed | test-2    | SHUTOFF | -          | Shutdown    | VM-Net=192.168.201.109 |\n+--------------------------------------+-----------+---------+------------+-------------+------------------------+\nthe two command has the different number VM created.\n\n\"openstack usage list\" give 9 VM created.\n\"nova list\" give 4 VM created.\n\nthe \"nova list\" command show the correct result.\nI suspect the \"openstack usage list\" dump the database data directly.\n\nMariaDB [nova]> select id, display_name ,node from instances;\n+----+--------------+--------------------+\n| id | display_name | node               |\n+----+--------------+--------------------+\n|  1 | Linux        | NULL               |\n|  2 | Linux        | NULL               |\n|  3 | linux        | NULL               |\n|  4 | linux        | NULL               |\n|  5 | linux        | NULL               |\n|  6 | Linux1       | NULL               |\n|  7 | linux        | NULL               |\n|  8 | linux        | NULL               |\n|  9 | linux        | NULL               |\n| 10 | 123          | NULL               |\n| 11 | 123          | NULL               |\n| 12 | vm111        | NULL               |\n| 13 | test         | compute1           |\n| 14 | VM-Min1-1    | compute1           |\n| 15 | VM-Min1-2    | compute1           |\n| 16 | Min-1        | compute1           |\n| 17 | Min-2        | compute1           |\n| 18 | VM-User-1    | compute1           |\n| 19 | VM-User-2    | compute1           |\n| 20 | test-1       | Compute2.puppy.com |\n| 21 | test-2       | Compute2.puppy.com |\n+----+--------------+--------------------+\nIn the instance table, there are 9 VM.\n\nI am not sure the issue caused by what.\n\nJichen", 
            "date_created": "2017-01-07 12:15:31.176995+00:00", 
            "author": "https://api.launchpad.net/1.0/~aerolite"
        }, 
        {
            "content": "Hi Jichen,\n\nThe behavior which you observed is expected. `openstack usage list` display all instances which were successfully created by user in the project. Where as `nova list` only shows current instances.\n\nFor ex:\n\nMariaDB [nova]> select vm_state,display_name,id,deleted,uuid from instances where deleted!='0';\n+----------+-----------------------+----+---------+--------------------------------------+\n| vm_state | display_name          | id | deleted | uuid                                 |\n+----------+-----------------------+----+---------+--------------------------------------+\n| error    | pbandark              |  1 |       1 | fe74c71a-0307-4f17-bb0e-917a0d3fabe3 |\n| deleted  | pbandark              |  2 |       2 | 7d3b9471-5259-46ff-a7fd-76fbd044f0cf |\n| error    | pbandark              |  3 |       3 | c7b4fda0-b0f9-45fc-ac97-1b8e172eab20 |\n| error    | pbandark              |  4 |       4 | b09d21f3-7c64-40b5-9f56-deb767330ff5 |\n| building | pbandark              |  5 |       5 | 6d332fb4-e12d-4dee-90ba-9c6f5ee5753a |\n| deleted  | pbandark              |  6 |       6 | e42f6f27-6dea-4dc8-a55d-11cea13d9407 |\n| deleted  | pbandark              |  7 |       7 | e393cd96-d1e2-4e42-8772-663004fc9429 |\n| deleted  | pbandark              |  8 |       8 | 8a2dd22e-2b1d-4232-809b-49f1d946a32a |\n| deleted  | pbandark              |  9 |       9 | 08f1a6bb-fa53-4e10-b2cd-ef00154a9ead |\n| deleted  | pbandark1             | 11 |      11 | 949335d5-263b-4628-bf83-1b2625cb736d |\n| deleted  | pbandark_temp_deleted | 16 |      16 | 7601015f-47ac-409f-849c-bb17d81c8d18 |\n+----------+-----------------------+----+---------+--------------------------------------+\n\n# openstack usage list\nUsage from 2016-12-15 to 2017-01-13: \n+---------+---------+--------------+-----------+---------------+\n| Project | Servers | RAM MB-Hours | CPU Hours | Disk GB-Hours |\n+---------+---------+--------------+-----------+---------------+\n| admin   |      12 |    220529.62 |    316.82 |       3425.54 |\n+---------+---------+--------------+-----------+---------------+\n\n- There are 5 instances running in my environment. \n\nFrom above output we can see that, `openstack usage list` is displaying the instance count which are in deleted state(7) + running(5).\n\nRegards,\nPratik.\n", 
            "date_created": "2017-01-12 17:44:54.861241+00:00", 
            "author": "https://api.launchpad.net/1.0/~pratik-bandarkar"
        }, 
        {
            "content": "@pratik-bandarkar,\n\nI agree with you. Also openstack usage list shows resource usage per project based on start and end date range. Both the commands have different usages. The behavior observed is expected. Marking this as invalid. ", 
            "date_created": "2017-01-31 21:24:15.552419+00:00", 
            "author": "https://api.launchpad.net/1.0/~sujitha-neti"
        }
    ], 
    "closed": "2017-01-31 21:24:34.917739+00:00"
}