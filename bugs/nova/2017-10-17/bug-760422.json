{
    "status": "Won't Fix", 
    "last_updated": "2011-08-25 08:26:15.007319+00:00", 
    "description": "I tried to install nova-objectstore on a different  machine from nova-compute.  But I got the following error.\n\n2011-04-14 15:07:31,360 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=24064) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-14 15:07:31,390 DEBUG nova.utils [-] Running cmd (subprocess): mkdir -p /var/lib/nova/instances/instance-00000001/ from (pid=24064) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-14 15:07:31,396 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-04-14 15:07:31,469 DEBUG nova.utils [-] Attempting to grab semaphore \"5d5fa351\" for method \"call_if_not_exists\"... from (pid=24064) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-14 15:07:31,478 ERROR nova.compute.manager [JI-KOPJNBE64MT5FCXWJ anne IRT] Instance '1' failed to spawn. Is virtualization enabled in the BIOS?\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 234, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 120, in _wrap\n(nova.compute.manager): TRACE:     return f(*args, **kw)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 616, in spawn\n(nova.compute.manager): TRACE:     self._create_image(instance, xml, network_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 841, in _create_image\n(nova.compute.manager): TRACE:     project=project)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 776, in _cache_image\n(nova.compute.manager): TRACE:     call_if_not_exists(base, fn, *args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 607, in inner\n(nova.compute.manager): TRACE:     retval = f(*args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 774, in call_if_not_exists\n(nova.compute.manager): TRACE:     fn(target=base, *args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 787, in _fetch_image\n(nova.compute.manager): TRACE:     images.fetch(image_id, target, user, project)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/images.py\", line 51, in fetch\n(nova.compute.manager): TRACE:     metadata = image_service.get(elevated, image_id, image_file)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/image/local.py\", line 116, in get\n(nova.compute.manager): TRACE:     raise exception.NotFound\n(nova.compute.manager): TRACE: NotFound: None\n(nova.compute.manager): TRACE:\n2011-04-14 15:07:48,960 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=8, so setting state to shutoff.\n2011-04-14 15:07:48,960 INFO nova.compute.manager [-] DB/VM state mismatch. Changing state from '8' to '5'\n2011-04-14 15:08:49,053 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n2011-04-14 15:09:49,087 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n\n\nThe version I used is 2011.2~gamma2~bzr987-0ubuntu0ppa1~maverick1. And the content of nova.conf is as followings.\n\n--sql_connection=mysql://root:nova@ubuntu2/nova\n--s3_host=ubuntu2\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu1\n--fixed_range=10.0.0.0/8\n--network_size=5000\n--lock_path=/var/lib/nova/tmp\n--flat_interface=eth0\n\nBTW, I succeeded in the same case when using Bexar before.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/760422", 
    "owner": "None", 
    "id": 760422, 
    "index": 3382, 
    "openned": "2011-04-14 06:22:46.755592+00:00", 
    "created": "2011-04-14 06:22:46.755592+00:00", 
    "title": "exception.NotFound occurred when installing nova-objectstore in a different marchine from nova-compute", 
    "comments": [
        {
            "content": "I tried to install nova-objectstore on a different  machine from nova-compute.  But I got the following error.\n\n2011-04-14 15:07:31,360 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=24064) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-14 15:07:31,390 DEBUG nova.utils [-] Running cmd (subprocess): mkdir -p /var/lib/nova/instances/instance-00000001/ from (pid=24064) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-14 15:07:31,396 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-04-14 15:07:31,469 DEBUG nova.utils [-] Attempting to grab semaphore \"5d5fa351\" for method \"call_if_not_exists\"... from (pid=24064) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-14 15:07:31,478 ERROR nova.compute.manager [JI-KOPJNBE64MT5FCXWJ anne IRT] Instance '1' failed to spawn. Is virtualization enabled in the BIOS?\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 234, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 120, in _wrap\n(nova.compute.manager): TRACE:     return f(*args, **kw)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 616, in spawn\n(nova.compute.manager): TRACE:     self._create_image(instance, xml, network_info)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 841, in _create_image\n(nova.compute.manager): TRACE:     project=project)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 776, in _cache_image\n(nova.compute.manager): TRACE:     call_if_not_exists(base, fn, *args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 607, in inner\n(nova.compute.manager): TRACE:     retval = f(*args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 774, in call_if_not_exists\n(nova.compute.manager): TRACE:     fn(target=base, *args, **kwargs)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 787, in _fetch_image\n(nova.compute.manager): TRACE:     images.fetch(image_id, target, user, project)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/images.py\", line 51, in fetch\n(nova.compute.manager): TRACE:     metadata = image_service.get(elevated, image_id, image_file)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/image/local.py\", line 116, in get\n(nova.compute.manager): TRACE:     raise exception.NotFound\n(nova.compute.manager): TRACE: NotFound: None\n(nova.compute.manager): TRACE:\n2011-04-14 15:07:48,960 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=8, so setting state to shutoff.\n2011-04-14 15:07:48,960 INFO nova.compute.manager [-] DB/VM state mismatch. Changing state from '8' to '5'\n2011-04-14 15:08:49,053 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n2011-04-14 15:09:49,087 INFO nova.compute.manager [-] Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n\n\nThe version I used is 2011.2~gamma2~bzr987-0ubuntu0ppa1~maverick1. And the content of nova.conf is as followings.\n\n--sql_connection=mysql://root:nova@ubuntu2/nova\n--s3_host=ubuntu2\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu1\n--fixed_range=10.0.0.0/8\n--network_size=5000\n--lock_path=/var/lib/nova/tmp\n--flat_interface=eth0\n\nBTW, I succeeded in the same case when using Bexar before.", 
            "date_created": "2011-04-14 06:22:46.755592+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Same for me on RHEL: http://paste.openstack.org/show/1182/", 
            "date_created": "2011-04-14 06:53:04.366134+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "My local storage in on same host", 
            "date_created": "2011-04-14 06:55:04.948698+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "I'll let others confirm, but I think that's a consequence of the refactoring of nova-objectstore. For serious deployments you are supposed to be using Glance anyway.", 
            "date_created": "2011-04-14 11:11:57.022889+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I guess this is for the Cactus release, because the local image service does not exist in the current code.  In cactus you can use the local image service by sharing the directory with all of the images to all of the compute hosts.  The recommended solution, however is to use glance instead.", 
            "date_created": "2011-08-24 16:50:43.817709+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ], 
    "closed": "2011-08-25 08:26:14.022341+00:00"
}