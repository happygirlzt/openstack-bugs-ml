{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:53:40.784794+00:00", 
    "description": "Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n), Added qemu-nbd to sudoers list per bug #702723\n\nThis occurs when trying to launch a new instance.\n\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\nlibvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n(nova.exception): TRACE:     self._conn.createXML(xml, 0)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n(nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n(nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.exception): TRACE:\n(nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.compute.manager): TRACE:\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/702741", 
    "owner": "https://api.launchpad.net/1.0/~vishvananda", 
    "id": 702741, 
    "index": 8, 
    "openned": "2011-01-14 05:25:31.323974+00:00", 
    "created": "2011-01-14 05:25:31.323974+00:00", 
    "title": "failed to retrieve chardev info with 'info chardev'", 
    "comments": [
        {
            "content": "Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n), Added qemu-nbd to sudoers list per bug #702723\n\nThis occurs when trying to launch a new instance.\n\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\nlibvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n(nova.exception): TRACE:     self._conn.createXML(xml, 0)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n(nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n(nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.exception): TRACE:\n(nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n(nova.compute.manager): TRACE:\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'", 
            "date_created": "2011-01-14 05:25:31.323974+00:00", 
            "author": "https://api.launchpad.net/1.0/~jordanrinke"
        }, 
        {
            "content": "The nbd issue seems unrelated to the info chardev error. Did you modprobe nbd?\n\nVish\n\nOn Jan 13, 2011, at 9:25 PM, Jordan Rinke wrote:\n\n> Public bug reported:\n> \n> Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n> ), Added qemu-nbd to sudoers list per bug #702723\n> \n> This occurs when trying to launch a new instance.\n> \n> (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n> (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n> (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\n> libvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n> (nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n> (nova.exception): TRACE: Traceback (most recent call last):\n> (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n> (nova.exception): TRACE:     return f(*args, **kw)\n> (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n> (nova.exception): TRACE:     self._conn.createXML(xml, 0)\n> (nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n> (nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n> (nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n> (nova.exception): TRACE:\n> (nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n> (nova.compute.manager): TRACE: Traceback (most recent call last):\n> (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n> (nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n> (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n> (nova.compute.manager): TRACE:     raise Error(str(e))\n> (nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n> (nova.compute.manager): TRACE:\n> libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/702741\n> \n> Title:\n>  nbd device did not show up\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n>  ), Added qemu-nbd to sudoers list per bug #702723\n> \n>  This occurs when trying to launch a new instance.\n> \n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\n>  libvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n>  (nova.exception): TRACE: Traceback (most recent call last):\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n>  (nova.exception): TRACE:     return f(*args, **kw)\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n>  (nova.exception): TRACE:     self._conn.createXML(xml, 0)\n>  (nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n>  (nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n>  (nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception): TRACE:\n>  (nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n>  (nova.compute.manager): TRACE: Traceback (most recent call last):\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n>  (nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n>  (nova.compute.manager): TRACE:     raise Error(str(e))\n>  (nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.compute.manager): TRACE:\n>  libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'\n> \n> \n\n", 
            "date_created": "2011-01-14 05:51:12+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "lsmod shows nbd is installed:\r\n\r\nroot@00000r100020001:/etc# lsmod|grep -i \"nbd\"\r\nnbd                     9927  0\r\n", 
            "date_created": "2011-01-14 06:23:36.857098+00:00", 
            "author": "https://api.launchpad.net/1.0/~jordanrinke"
        }, 
        {
            "content": "I must have done it while troubleshooting, the nbd error no longer seems to occur so I do believe this is two dif issues as you said.", 
            "date_created": "2011-01-14 06:49:02.792894+00:00", 
            "author": "https://api.launchpad.net/1.0/~jordanrinke"
        }, 
        {
            "content": "Seems like a permissions issue.  I would suspect:\na) console.log isn't readable due to being a subdirectory that nova doesn't have permissions for (i.e. /root/...)\nor\nb) there is a permissions issue with the new configuration of nova web console trying to connect to a device\n(you could test this by removing the offending line from the libvirt.xml in the instance directory) \nor\nc) there is some other strange issue with regards to kvm permissions\n\nYou may get more info by going to the instance directory and trying to run virsh create libvirt.xml.  (if it runs properly as root then also try it as the nova user)\n\nVish\n\nOn Jan 13, 2011, at 10:49 PM, Jordan Rinke wrote:\n\n> I must have done it while troubleshooting, the nbd error no longer seems\n> to occur so I do believe this is two dif issues as you said.\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/702741\n> \n> Title:\n>  nbd device did not show up\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n>  ), Added qemu-nbd to sudoers list per bug #702723\n> \n>  This occurs when trying to launch a new instance.\n> \n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\n>  libvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n>  (nova.exception): TRACE: Traceback (most recent call last):\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n>  (nova.exception): TRACE:     return f(*args, **kw)\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n>  (nova.exception): TRACE:     self._conn.createXML(xml, 0)\n>  (nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n>  (nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n>  (nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception): TRACE:\n>  (nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n>  (nova.compute.manager): TRACE: Traceback (most recent call last):\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n>  (nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n>  (nova.compute.manager): TRACE:     raise Error(str(e))\n>  (nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.compute.manager): TRACE:\n>  libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'\n> \n> \n\n", 
            "date_created": "2011-01-14 07:11:18+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "root@00000r100020001:/var/lib/nova/instances/instance-00000017# virsh -d 5 create libvirt.xml\r\ncommand: \"create libvirt.xml \"\r\ncreate: file(DATA): libvirt.xml\r\nerror: Failed to create domain from libvirt.xml\r\nerror: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\r\n\r\nsnip\r\n<disk type='file'>\r\n            <driver type='qcow2'/>\r\n            <source file='/var/lib/nova/instances/instance-00000017/disk'/>\r\n            <target dev='vda' bus='virtio'/>\r\n        </disk>\r\n        <disk type='file'>\r\n            <driver type='qcow2'/>\r\n            <source file='/var/lib/nova/instances/instance-00000017/local'/>\r\n            <target dev='vdb' bus='virtio'/>\r\n        </disk>\r\n/snip\r\n\r\nThe problem was the libvirt.xml had the driver type qcow2, but the disk images were raw. Changing the driver type to raw allowed the specific instance to start manually. Not sure what this implies, if all previous images need to be converted or if there needs to be detection etc.\r\n\r\nSuggestion?", 
            "date_created": "2011-01-14 07:59:16.160017+00:00", 
            "author": "https://api.launchpad.net/1.0/~jordanrinke"
        }, 
        {
            "content": "So this is actually an app-armor issue.  Apparently it blocks access to backing files if the filename of the front file doesn't match its crazy list in /etc/apparmor.d/usr.lib.libvirt.virt-aa-helper. 'disk' is in the list so it works, but 'local' is not.", 
            "date_created": "2011-01-14 10:10:28.338851+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "I did not reproduce the issue, running bzr569 with use_ipv6=False I could start instances alright (with use_ipv6=True I hit bug 703037)", 
            "date_created": "2011-01-18 15:52:28.741908+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "If you run as root from your home dir it works. Running as nova from\nthe packages blows it up\n\nOn Tuesday, January 18, 2011, Thierry Carrez <email address hidden> wrote:\n> I did not reproduce the issue, running bzr569 with use_ipv6=False I\n> could start instances alright (with use_ipv6=True I hit bug 703037)\n>\n> --\n> You received this bug notification because you are a bug assignee.\n> https://bugs.launchpad.net/bugs/702741\n>\n> Title:\n>  \u00a0failed to retrieve chardev info with 'info chardev'\n>\n> Status in OpenStack Compute (Nova):\n>  \u00a0In Progress\n>\n> Bug description:\n>  \u00a0Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n>  \u00a0), Added qemu-nbd to sudoers list per bug #702723\n>\n>  \u00a0This occurs when trying to launch a new instance.\n>\n>  \u00a0(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n>  \u00a0(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n>  \u00a0(nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\n>  \u00a0libvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  \u00a0(nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n>  \u00a0(nova.exception): TRACE: Traceback (most recent call last):\n>  \u00a0(nova.exception): TRACE: \u00a0 File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n>  \u00a0(nova.exception): TRACE: \u00a0 \u00a0 return f(*args, **kw)\n>  \u00a0(nova.exception): TRACE: \u00a0 File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n>  \u00a0(nova.exception): TRACE: \u00a0 \u00a0 self._conn.createXML(xml, 0)\n>  \u00a0(nova.exception): TRACE: \u00a0 File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n>  \u00a0(nova.exception): TRACE: \u00a0 \u00a0 if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n>  \u00a0(nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  \u00a0(nova.exception): TRACE:\n>  \u00a0(nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n>  \u00a0(nova.compute.manager): TRACE: Traceback (most recent call last):\n>  \u00a0(nova.compute.manager): TRACE: \u00a0 File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n>  \u00a0(nova.compute.manager): TRACE: \u00a0 \u00a0 self.driver.spawn(instance_ref)\n>  \u00a0(nova.compute.manager): TRACE: \u00a0 File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n>  \u00a0(nova.compute.manager): TRACE: \u00a0 \u00a0 raise Error(str(e))\n>  \u00a0(nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  \u00a0(nova.compute.manager): TRACE:\n>  \u00a0libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'\n>\n>\n>\n", 
            "date_created": "2011-01-18 18:14:08+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Hrm. But I run as nova from the packages :) Ubuntu 10.10, apparmor-loaded libvirt.", 
            "date_created": "2011-01-18 20:17:35.737487+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Very odd,  This was specifically happening on an AMD box, but i can't imagine that made a difference.  Maybe it was due to installing libvirt from ubuntu and then upgrading to the ppa version?\n\nVish\n\nOn Jan 18, 2011, at 12:17 PM, Thierry Carrez wrote:\n\n> Hrm. But I run as nova from the packages :) Ubuntu 10.10, apparmor-\n> loaded libvirt.\n> \n> -- \n> You received this bug notification because you are a bug assignee.\n> https://bugs.launchpad.net/bugs/702741\n> \n> Title:\n>  failed to retrieve chardev info with 'info chardev'\n> \n> Status in OpenStack Compute (Nova):\n>  In Progress\n> \n> Bug description:\n>  Fresh server (Ubuntu 10.10), installed from trunk (nova-compute: 2011.1~bzr562-0ubuntu0ppa1~maverick1\n>  ), Added qemu-nbd to sudoers list per bug #702723\n> \n>  This occurs when trying to launch a new instance.\n> \n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: Creating image\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): INFO [N/A] instance instance-00000014: injecting key into image ami-tty\n>  (nova.virt.libvirt_conn 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): WARNING [N/A] instance instance-00000014: ignoring error injecting data into image ami-tty (nbd device /dev/nbd2 did not show up)\n>  libvir: QEMU error : operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [N/A] Uncaught exception\n>  (nova.exception): TRACE: Traceback (most recent call last):\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n>  (nova.exception): TRACE:     return f(*args, **kw)\n>  (nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 382, in spawn\n>  (nova.exception): TRACE:     self._conn.createXML(xml, 0)\n>  (nova.exception): TRACE:   File \"/usr/lib/python2.6/dist-packages/libvirt.py\", line 1289, in createXML\n>  (nova.exception): TRACE:     if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)\n>  (nova.exception): TRACE: libvirtError: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.exception): TRACE:\n>  (nova.compute.manager 2011.1-workspace:tarmac-20110114001914-5vbfe8sm72xr2py4): ERROR [ZL6YAREVPQG6RLHDA1QX admin admin] instance 20: Failed to spawn\n>  (nova.compute.manager): TRACE: Traceback (most recent call last):\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n>  (nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n>  (nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n>  (nova.compute.manager): TRACE:     raise Error(str(e))\n>  (nova.compute.manager): TRACE: Error: operation failed: failed to retrieve chardev info in qemu with 'info chardev'\n>  (nova.compute.manager): TRACE:\n>  libvir: QEMU error : Domain not found: no domain with matching name 'instance-00000014'\n> \n> \n\n", 
            "date_created": "2011-01-18 20:32:23+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Maybe. Don't waste time on understanding why it works for me, if you know why it fails for everyone else :)", 
            "date_created": "2011-01-18 20:47:36.465660+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2011-02-07 13:53:39.762244+00:00"
}