{
    "status": "Invalid", 
    "last_updated": "2017-01-12 08:22:31.317016+00:00", 
    "description": "Description\n===========\n\nWhen instance was booted from volume, but the driver will consider it booted from image in resize\nscenario. This bug is introduced by the bug path:  bug #1587802. \n\nSteps to reproduce\n==================\n\n1. Booting an instance from volume with flavor m1.small\u3002\n2. Resize the instance to m1.tiny\u3002\n\n\nExpected result\n===============\nResize the instance succefully.\n\nActual result\n=============\nException was raised as follows.\n\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3964, in _finish_resize\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     block_device_info, power_on)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7417, in finish_migration\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     fallback_from_host=migration.source_compute)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3180, in _create_image\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     backend.create_snap(libvirt_utils.RESIZE_SNAPSHOT_NAME)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/imagebackend.py\", line 944, in create_snap\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     return self.driver.create_snap(self.rbd_name, name)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 381, in create_snap\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     with RBDVolumeProxy(self, str(volume), pool=pool) as vol:\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 65, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     driver._disconnect_from_rados(client, ioctx)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     self.force_reraise()\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     six.reraise(self.type_, self.value, self.tb)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 61, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     read_only=read_only)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/rbd.py\", line 374, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     raise make_ex(ret, 'error opening image %s at snapshot %s' % (name, snapshot))\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc] ImageNotFound: error opening image 496d2d53-5a57-44bf-93c4-26baec9a9bbc_disk at snapshot None", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1654504", 
    "owner": "https://api.launchpad.net/1.0/~eric-litao", 
    "id": 1654504, 
    "index": 7879, 
    "openned": "2017-01-06 08:06:38.651210+00:00", 
    "created": "2017-01-06 08:06:38.651210+00:00", 
    "title": "Resize instance which is booted from volume failed", 
    "comments": [
        {
            "content": "Description\n===========\n\nWhen instance was booted from volume, but the driver will consider it booted from image in resize\nscenario. This bug is introduced by the bug path:  bug #1587802. \n\nSteps to reproduce\n==================\n\n1. Booting an instance from volume with flavor m1.small\u3002\n2. Resize the instance to m1.tiny\u3002\n\n\nExpected result\n===============\nResize the instance succefully.\n\nActual result\n=============\nException was raised as follows.\n\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3964, in _finish_resize\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     block_device_info, power_on)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7417, in finish_migration\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     fallback_from_host=migration.source_compute)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3180, in _create_image\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     backend.create_snap(libvirt_utils.RESIZE_SNAPSHOT_NAME)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/imagebackend.py\", line 944, in create_snap\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     return self.driver.create_snap(self.rbd_name, name)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 381, in create_snap\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     with RBDVolumeProxy(self, str(volume), pool=pool) as vol:\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 65, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     driver._disconnect_from_rados(client, ioctx)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     self.force_reraise()\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     six.reraise(self.type_, self.value, self.tb)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/storage/rbd_utils.py\", line 61, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     read_only=read_only)\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]   File \"/usr/lib/python2.7/site-packages/rbd.py\", line 374, in __init__\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc]     raise make_ex(ret, 'error opening image %s at snapshot %s' % (name, snapshot))\n2017-01-06 15:30:44.200 7947 ERROR nova.compute.manager [instance: 496d2d53-5a57-44bf-93c4-26baec9a9bbc] ImageNotFound: error opening image 496d2d53-5a57-44bf-93c4-26baec9a9bbc_disk at snapshot None", 
            "date_created": "2017-01-06 08:06:38.651210+00:00", 
            "author": "https://api.launchpad.net/1.0/~eric-litao"
        }, 
        {
            "content": "In master this is working well. no need to update", 
            "date_created": "2017-01-12 08:22:17.394168+00:00", 
            "author": "https://api.launchpad.net/1.0/~eric-litao"
        }
    ], 
    "closed": "2017-01-12 08:22:29.723236+00:00"
}