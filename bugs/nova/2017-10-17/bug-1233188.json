{
    "status": "Fix Released", 
    "last_updated": "2014-08-15 09:27:19.394250+00:00", 
    "description": "nova-compute.log:\n\n2013-09-30 15:52:18.897 12884 ERROR nova.compute.manager [req-d112a8fd-89c4-4b5b-b6c2-1896dcd0e4ab f70773b792354571a10d44260397fde1 b9e4ccd38a794fee82dfb06a52ec3cfd] [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] Error: libvirt_info() takes exactly 6 arguments (7 given)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] Traceback (most recent call last):\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1037, in _build_instance\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     set_access_ip=set_access_ip)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1410, in _spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1407, in _spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     block_device_info)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2069, in spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     write_to_disk=True)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3042, in to_xml\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     disk_info, rescue, block_device_info)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2922, in get_guest_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     inst_type):\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2699, in get_guest_storage_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     inst_type)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2662, in get_guest_disk_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     self.get_hypervisor_version())\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] TypeError: libvirt_info() takes exactly 6 arguments (7 given)", 
    "tags": [
        "libvirt", 
        "rbd"
    ], 
    "importance": "Medium", 
    "heat": 86, 
    "link": "https://bugs.launchpad.net/nova/+bug/1233188", 
    "owner": "https://api.launchpad.net/1.0/~pavel-kirpichyov", 
    "id": 1233188, 
    "index": 3628, 
    "openned": "2013-09-30 14:08:35.182073+00:00", 
    "created": "2013-09-30 14:08:35.182073+00:00", 
    "title": "Cant create VM with rbd backend enabled", 
    "comments": [
        {
            "content": "nova-compute.log:\n\n2013-09-30 15:52:18.897 12884 ERROR nova.compute.manager [req-d112a8fd-89c4-4b5b-b6c2-1896dcd0e4ab f70773b792354571a10d44260397fde1 b9e4ccd38a794fee82dfb06a52ec3cfd] [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] Error: libvirt_info() takes exactly 6 arguments (7 given)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] Traceback (most recent call last):\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1037, in _build_instance\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     set_access_ip=set_access_ip)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1410, in _spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     LOG.exception(_('Instance failed to spawn'), instance=instance)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1407, in _spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     block_device_info)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2069, in spawn\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     write_to_disk=True)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3042, in to_xml\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     disk_info, rescue, block_device_info)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2922, in get_guest_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     inst_type):\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2699, in get_guest_storage_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     inst_type)\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2662, in get_guest_disk_config\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86]     self.get_hypervisor_version())\n2013-09-30 15:52:18.897 12884 TRACE nova.compute.manager [instance: f133ebdb-2f6f-49ba-baf3-296163a98c86] TypeError: libvirt_info() takes exactly 6 arguments (7 given)", 
            "date_created": "2013-09-30 14:08:35.182073+00:00", 
            "author": "https://api.launchpad.net/1.0/~pavel-kirpichyov"
        }, 
        {
            "content": "Fix proposed here: https://review.openstack.org/#/c/48952/, idk why it's not linked", 
            "date_created": "2013-09-30 14:32:29.714207+00:00", 
            "author": "https://api.launchpad.net/1.0/~pavel-kirpichyov"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/48952\nCommitted: http://github.com/openstack/nova/commit/7a34be0ec0cd0cb9555fe64ff6c486faae1ae91d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 7a34be0ec0cd0cb9555fe64ff6c486faae1ae91d\nAuthor: Pavel Kirpichyov <email address hidden>\nDate:   Mon Sep 30 16:15:06 2013 +0200\n\n    Make rbd.libvirt_info parent class compatible\n    \n    Rbd.libvirt_info function definition misses hypervisor_version argument added in change:\n    https://review.openstack.org/32379\n    \n    Closes-Bug: #1233188\n    Change-Id: Ib68d743e783af0f6d82d2ba180869ee642e86050\n", 
            "date_created": "2013-10-04 18:05:51.386052+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Without having this patch I ran into a similar issue, but only when starting a previous-stopped instance. Somehow, starting a new instance worked fine (but apparently my nova.conf was wrong, despite it working).\n\nApplying this patch didn't completely fix my issue but it helped. Here's the stacktrace incase anyone ever runs into the same problem:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n    **args)\n  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n    result = getattr(proxyobj, method)(ctxt, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 353, in decorated_function\n    return function(self, context, *args, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 90, in wrapped\n    payload)\n  File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 73, in wrapped\n    return f(self, context, *args, **kw)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 243, in decorated_function\n    pass\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 229, in decorated_function\n    return function(self, context, *args, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 294, in decorated_function\n    function(self, context, *args, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 271, in decorated_function\n    e, sys.exc_info())\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 258, in decorated_function\n    return function(self, context, *args, **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1832, in start_instance\n    self._power_on(context, instance)\n  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1819, in _power_on\n    block_device_info)\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1948, in power_on\n    self._hard_reboot(context, instance, network_info, block_device_info)\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1899, in _hard_reboot\n    write_to_disk=True)\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3040, in to_xml\n    disk_info, rescue, block_device_info)\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2920, in get_guest_config\n    inst_type):\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2697, in get_guest_storage_config\n    inst_type)\n  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2660, in get_guest_disk_conf\n\n    self.get_hypervisor_version())\nTypeError: libvirt_info() takes exactly 6 arguments (7 given)\n\n", 
            "date_created": "2014-01-17 20:15:51.457228+00:00", 
            "author": "https://api.launchpad.net/1.0/~sergio97"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/72575", 
            "date_created": "2014-02-11 07:42:24.724198+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/72575\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=e095daba34b9b4692225c4b34984385b50ec464d\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit e095daba34b9b4692225c4b34984385b50ec464d\nAuthor: Pavel Kirpichyov <email address hidden>\nDate:   Mon Sep 30 16:15:06 2013 +0200\n\n    Make rbd.libvirt_info parent class compatible\n    \n    Rbd.libvirt_info function definition misses hypervisor_version argument added in change:\n    https://review.openstack.org/32379\n    \n    Closes-Bug: #1233188\n    Change-Id: Ib68d743e783af0f6d82d2ba180869ee642e86050\n    (cherry picked from commit 7a34be0ec0cd0cb9555fe64ff6c486faae1ae91d)\n", 
            "date_created": "2014-03-18 11:56:08.982373+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2013-12-04 10:08:20.315094+00:00"
}