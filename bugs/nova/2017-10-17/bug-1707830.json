{
    "status": "In Progress", 
    "last_updated": "2017-08-01 09:44:04.101813+00:00", 
    "description": "When use resize instance, resize fails for smaller disk in new flavor, but dashboard has no error message.\n\nSteps to reproduce:\n1.) Create instance(using cirros is OK) with a flavor A-1-1-10(1 vcpu, 1024M memory, 10G disk)\n2.) Try resize instance to flavor which has smaller root disk B-1-1-1(1 vcpu, 1024M memory, 1G disk)\n\nExpected result:\nshow error message on dashboard.Something like unable to resize disk down.\n\nActual result:\nNo error message showed on dashboard.\n\nLogs:\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server [req-6f03b653-9c79-48fe-b40b-99c99c92687e ff8d89b8eda64c8f9a46548744db65d2 5a7d5cf5df734994bac9ff1d4f475bca - - -] Exception during message handling\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 222, in dispatch\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 192, in _do_dispatch\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/utils.py\", line 686, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 3923, in resize_instance\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.instance_events.clear_events_for_instance(instance)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/usr/lib64/python2.7/contextlib.py\", line 35, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.gen.throw(type, value, traceback)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 6754, in _error_out_instance_on_exception\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     raise error.inner_exception\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server ResizeError: Resize error: Unable to resize disk down.\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server", 
    "tags": [
        "libvirt", 
        "resize"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1707830", 
    "owner": "https://api.launchpad.net/1.0/~fuzhaokun", 
    "id": 1707830, 
    "index": 4881, 
    "openned": "2017-08-01 03:31:23.318893+00:00", 
    "created": "2017-08-01 03:31:23.318893+00:00", 
    "title": "resize to smaller flavor failed, but has not error message on dashboard", 
    "comments": [
        {
            "content": "When use resize instance, resize fails for smaller disk in new flavor, but dashboard has no error message.\n\nSteps to reproduce:\n1.) Create instance(using cirros is OK) with a flavor A-1-1-10(1 vcpu, 1024M memory, 10G disk)\n2.) Try resize instance to flavor which has smaller root disk B-1-1-1(1 vcpu, 1024M memory, 1G disk)\n\nExpected result:\nshow error message on dashboard.Something like unable to resize disk down.\n\nActual result:\nNo error message showed on dashboard.\n\nLogs:\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server [req-6f03b653-9c79-48fe-b40b-99c99c92687e ff8d89b8eda64c8f9a46548744db65d2 5a7d5cf5df734994bac9ff1d4f475bca - - -] Exception during message handling\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 222, in dispatch\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 192, in _do_dispatch\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/utils.py\", line 686, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 3923, in resize_instance\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.instance_events.clear_events_for_instance(instance)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/usr/lib64/python2.7/contextlib.py\", line 35, in __exit__\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     self.gen.throw(type, value, traceback)\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server   File \"/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py\", line 6754, in _error_out_instance_on_exception\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server     raise error.inner_exception\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server ResizeError: Resize error: Unable to resize disk down.\n2017-08-01 23:06:41.707 7 ERROR oslo_messaging.rpc.server", 
            "date_created": "2017-08-01 03:31:23.318893+00:00", 
            "author": "https://api.launchpad.net/1.0/~fuzhaokun"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/489484", 
            "date_created": "2017-08-01 06:05:01.841528+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Please don't change the bug status to Fix Committed, it will automatically be changed to that once the change lands in Gerrit.", 
            "date_created": "2017-08-01 09:43:45.080819+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }
    ]
}