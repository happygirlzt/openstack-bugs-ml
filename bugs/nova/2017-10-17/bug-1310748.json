{
    "status": "Invalid", 
    "last_updated": "2017-04-01 10:20:57.079387+00:00", 
    "description": "The VMware Minesweeper CI is seeing the following error when attempting to execute the \"rebuild\" operation on instances. \n\nTask [ReconfigVM_Task] (returnval){\n   value = \"task-948\"\n   _type = \"Task\"\n } status: error Invalid configuration for device '0'.\nFault InvalidDeviceSpec not matched.\nSetting instance vm_state to ERROR\nTraceback (most recent call last):\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 5575, in _error_out_instance_on_exception\n    yield\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 2550, in rebuild_instance\n    self._rebuild_default_impl(**kwargs)\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 2405, in _rebuild_default_impl\n    block_device_info=new_block_device_info)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 619, in spawn\n    admin_password, network_info, block_device_info)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 595, in spawn\n    root_gb_in_kb, linked_clone)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/volumeops.py\", line 75, in attach_disk_to_vm\n    self._session._wait_for_task(reconfig_task)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 948, in _wait_for_task\n    ret_val = done.wait()\n  File \"/usr/local/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n    return hubs.get_hub().switch()\n  File \"/usr/local/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n    return self.greenlet.switch()\nVMwareDriverException: Invalid configuration for device '0'.\n\nThis is affecting the following Tempest [gate] tests:\n\ntempest.api.compute.servers.test_disk_config.ServerDiskConfigTestJSON.test_rebuild_server_with_manual_disk_config\ntempest.api.compute.servers.test_server_actions.ServerActionsTestXML.test_rebuild_server\ntempest.api.compute.servers.test_server_actions.ServerActionsTestXML.test_rebuild_server_in_stop_state\n\nFull log for an affected run here:\nhttp://10.148.255.241/logs/87896/5/", 
    "tags": [
        "vmware"
    ], 
    "importance": "Medium", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1310748", 
    "owner": "None", 
    "id": 1310748, 
    "index": 3887, 
    "openned": "2014-04-21 19:05:10.400867+00:00", 
    "created": "2014-04-21 19:05:10.400867+00:00", 
    "title": "VMware: Invalid configuration for device '0' on instance rebuild", 
    "comments": [
        {
            "content": "The VMware Minesweeper CI is seeing the following error when attempting to execute the \"rebuild\" operation on instances. \n\nTask [ReconfigVM_Task] (returnval){\n   value = \"task-948\"\n   _type = \"Task\"\n } status: error Invalid configuration for device '0'.\nFault InvalidDeviceSpec not matched.\nSetting instance vm_state to ERROR\nTraceback (most recent call last):\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 5575, in _error_out_instance_on_exception\n    yield\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 2550, in rebuild_instance\n    self._rebuild_default_impl(**kwargs)\n  File \"/opt/stack/nova/nova/compute/manager.py\", line 2405, in _rebuild_default_impl\n    block_device_info=new_block_device_info)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 619, in spawn\n    admin_password, network_info, block_device_info)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 595, in spawn\n    root_gb_in_kb, linked_clone)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/volumeops.py\", line 75, in attach_disk_to_vm\n    self._session._wait_for_task(reconfig_task)\n  File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 948, in _wait_for_task\n    ret_val = done.wait()\n  File \"/usr/local/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n    return hubs.get_hub().switch()\n  File \"/usr/local/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n    return self.greenlet.switch()\nVMwareDriverException: Invalid configuration for device '0'.\n\nThis is affecting the following Tempest [gate] tests:\n\ntempest.api.compute.servers.test_disk_config.ServerDiskConfigTestJSON.test_rebuild_server_with_manual_disk_config\ntempest.api.compute.servers.test_server_actions.ServerActionsTestXML.test_rebuild_server\ntempest.api.compute.servers.test_server_actions.ServerActionsTestXML.test_rebuild_server_in_stop_state\n\nFull log for an affected run here:\nhttp://10.148.255.241/logs/87896/5/", 
            "date_created": "2014-04-21 19:05:10.400867+00:00", 
            "author": "https://api.launchpad.net/1.0/~rhsu"
        }, 
        {
            "content": "The log file is no longer available. Ryan, do you have any recent log for this problem?", 
            "date_created": "2015-10-06 07:11:10.511580+00:00", 
            "author": "https://api.launchpad.net/1.0/~rgerganov"
        }, 
        {
            "content": "I've changed the bug to Invalid since I haven't seen the problem manifest in the past few months. ", 
            "date_created": "2015-10-06 17:56:55.611270+00:00", 
            "author": "https://api.launchpad.net/1.0/~rhsu"
        }, 
        {
            "content": "Hi, I foud the same issue. \n  my deployment: Ocata release (depolyed by kolla-ansbile) + vmware vcenter 6.0 \n  I have configured nova.conf to use vmware VCDirver.  and the session is set up correctly. \n  I use \"openstack image create ...\"  to import official ubuntu-16.04 image. (qemu-img convet it form qcow2 to spare vmdk format. \n  Everything is ok for now. \n  But when I luanch instance,  error happend,  the log is below: \n\n2017-04-01 04:15:45.496 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Attempting claim: memory 2048 MB, disk 20 GB, vcpus 1 CPU\n2017-04-01 04:15:45.497 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Total memory: 28640 MB, used: 512.00 MB\n2017-04-01 04:15:45.498 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] memory limit: 42960.00 MB, free: 42448.00 MB\n2017-04-01 04:15:45.499 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Total disk: 1921 GB, used: 0.00 GB\n2017-04-01 04:15:45.499 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] disk limit: 1921.00 GB, free: 1921.00 GB\n2017-04-01 04:15:45.500 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Total vcpu: 12 VCPU, used: 0.00 VCPU\n2017-04-01 04:15:45.501 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] vcpu limit not specified, defaulting to unlimited\n2017-04-01 04:15:45.501 7 INFO nova.compute.claims [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Claim successful\n2017-04-01 04:15:45.707 7 INFO nova.scheduler.client.report [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Submitted allocation for instance\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall [-] in fixed duration looping call\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall Traceback (most recent call last):\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 76, in _inner\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall     self.f(*self.args, **self.kw)\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall   File \"/var/lib/kolla/venv/local/lib/python2.7/site-packages/oslo_vmware/api.py\", line 440, in _poll_task\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall     raise task_ex\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall VimFaultException: Invalid configuration for device '0'.\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall Faults: ['InvalidDeviceSpec']\n2017-04-01 04:15:49.719 7 ERROR oslo_vmware.common.loopingcall\n2017-04-01 04:15:49.721 7 ERROR nova.compute.manager [req-0d04189c-f822-4ac3-be8b-44b88f255acd bef1f8c56ef547339595ce46bbe0ec0e cf73ccda5d894a60b8bcc93c2cc4f20a - - -] [instance: d4d11aa3-9eb7-496b-9ad6-17703d58dd88] Instance failed to spawn\n", 
            "date_created": "2017-04-01 10:20:55.796622+00:00", 
            "author": "https://api.launchpad.net/1.0/~weener"
        }
    ], 
    "closed": "2015-10-06 17:55:53.604907+00:00"
}