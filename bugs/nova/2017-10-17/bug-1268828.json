{
    "status": "Won't Fix", 
    "last_updated": "2014-09-17 12:40:41.765565+00:00", 
    "description": "when configure neutron_url to None or neutron_url param is None, Nova network will throw error:\n\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 992, in _process_stack\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 1073, in dispatch\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/os_tenant_networks.py\", line 99, in index\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     networks = self.network_api.get_all(context)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/network/neutronv2/api.py\", line 673, in get_all\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     networks = client.list_networks().get('networks')\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 108, in with_params\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     ret = self.function(instance, *args, **kwargs)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 325, in list_networks\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     **_params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1197, in list\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     for r in self._pagination(collection, path, **params):\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1210, in _pagination\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     res = self.get(path, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1183, in get\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     headers=headers, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1168, in retry_request\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     headers=headers, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1097, in do_request\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     self.httpclient.authenticate_and_fetch_endpoint_url()\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/client.py\", line 179, in authenticate_and_fetch_endpoint_url\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     self.endpoint_url = self._get_endpoint_url()\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/client.py\", line 253, in _get_endpoint_url\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     url = self.auth_url + '/tokens/%s/endpoints' % self.auth_token\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi TypeError: unsupported operand type(s) for +: 'NoneType' and 'str'", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1268828", 
    "owner": "None", 
    "id": 1268828, 
    "index": 5733, 
    "openned": "2014-01-14 03:36:58.180128+00:00", 
    "created": "2014-01-14 03:36:58.180128+00:00", 
    "title": "Nova network doesn't work with neutron_url being None", 
    "comments": [
        {
            "content": "when configure neutron_url to None or neutron_url param is None, Nova network will throw error:\n\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 992, in _process_stack\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 1073, in dispatch\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/os_tenant_networks.py\", line 99, in index\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     networks = self.network_api.get_all(context)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/nova/network/neutronv2/api.py\", line 673, in get_all\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     networks = client.list_networks().get('networks')\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 108, in with_params\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     ret = self.function(instance, *args, **kwargs)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 325, in list_networks\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     **_params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1197, in list\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     for r in self._pagination(collection, path, **params):\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1210, in _pagination\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     res = self.get(path, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1183, in get\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     headers=headers, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1168, in retry_request\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     headers=headers, params=params)\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1097, in do_request\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     self.httpclient.authenticate_and_fetch_endpoint_url()\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/client.py\", line 179, in authenticate_and_fetch_endpoint_url\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     self.endpoint_url = self._get_endpoint_url()\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi   File \"/usr/lib/python2.6/site-packages/neutronclient/client.py\", line 253, in _get_endpoint_url\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi     url = self.auth_url + '/tokens/%s/endpoints' % self.auth_token\n2014-01-13 03:37:23.121 18582 TRACE nova.api.openstack.wsgi TypeError: unsupported operand type(s) for +: 'NoneType' and 'str'", 
            "date_created": "2014-01-14 03:36:58.180128+00:00", 
            "author": "https://api.launchpad.net/1.0/~mars914"
        }, 
        {
            "content": "When is it valid to set neutron_url to None? Are you using nova-network or neutron here?", 
            "date_created": "2014-01-24 01:01:10.402563+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }
    ], 
    "closed": "2014-09-17 12:40:38.011080+00:00"
}