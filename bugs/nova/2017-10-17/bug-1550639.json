{
    "status": "Confirmed", 
    "last_updated": "2017-06-23 12:36:19.750862+00:00", 
    "description": "Reproducing method as following:\n1.create a volume from image \n[root@2C5_10_DELL05 ~(keystone_admin)]# cinder  create --image-id fd8330b3-a307-4140-8fe0-01341b583e26 --name test_image_volume  --volume-type  KSIP 1 \n+---------------------------------------+--------------------------------------+\n|                Property               |                Value                 |\n+---------------------------------------+--------------------------------------+\n|              attachments              |                  []                  |\n|           availability_zone           |                 nova                 |\n|                bootable               |                false                 |\n|          consistencygroup_id          |                 None                 |\n|               created_at              |      2016-02-27T04:20:37.000000      |\n|              description              |                 None                 |\n|               encrypted               |                False                 |\n|                   id                  | a0dae16a-2669-49c7-a118-250c31adc655 |\n|                metadata               |                  {}                  |\n|              multiattach              |                False                 |\n|                  name                 |          test_image_volume           |\n|         os-vol-host-attr:host         |                 None                 |\n|     os-vol-mig-status-attr:migstat    |                 None                 |\n|     os-vol-mig-status-attr:name_id    |                 None                 |\n|      os-vol-tenant-attr:tenant_id     |   181a578bc97642f2b9e153bec622f130   |\n|   os-volume-replication:driver_data   |                 None                 |\n| os-volume-replication:extended_status |                 None                 |\n|           replication_status          |               disabled               |\n|                  size                 |                  1                   |\n|              snapshot_id              |                 None                 |\n|              source_volid             |                 None                 |\n|                 status                |               creating               |\n|                user_id                |   8b34e1ab75024fcba0ea69a6fd0937c3   |\n|              volume_type              |                 KSIP                 |\n+---------------------------------------+--------------------------------------+\n2\u3001boot a instance from the step 1 volume.\n[root@2C5_10_DELL05 ~(keystone_admin)]# nova boot --flavor 1  --block-device id=a0dae16a-2669-49c7-a118-250c31adc655,source=volume,dest=volume,bootindex=0 --nic net-id=5c8f7e7a-5a75-48eb-9c68-096278585c18 test_vm\n+--------------------------------------+--------------------------------------------------+\n| Property                             | Value                                            |\n+--------------------------------------+--------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                           |\n| OS-EXT-AZ:availability_zone          | nova                                             |\n| OS-EXT-SRV-ATTR:host                 | -                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | -                                                |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000647                                |\n| OS-EXT-STS:power_state               | 0                                                |\n| OS-EXT-STS:task_state                | scheduling                                       |\n| OS-EXT-STS:vm_state                  | building                                         |\n| OS-SRV-USG:launched_at               | -                                                |\n| OS-SRV-USG:terminated_at             | -                                                |\n| accessIPv4                           |                                                  |\n| accessIPv6                           |                                                  |\n| adminPass                            | JEeW4BR4WL3a                                     |\n| autostart                            | TRUE                                             |\n| boot_index_type                      |                                                  |\n| config_drive                         |                                                  |\n| created                              | 2016-02-27T04:22:42Z                             |\n| flavor                               | m1.tiny (1)                                      |\n| hostId                               |                                                  |\n| id                                   | a740b3da-42e7-4cba-9408-8df3b4846dcc             |\n| image                                | Attempt to boot from volume - no image supplied  |\n| key_name                             | -                                                |\n| metadata                             | {}                                               |\n| move                                 | TRUE                                             |\n| name                                 | test_vm                                          |\n| novnc                                | TRUE                                             |\n| os-extended-volumes:volumes_attached | [{\"id\": \"a0dae16a-2669-49c7-a118-250c31adc655\"}] |\n| priority                             | 50                                               |\n| progress                             | 0                                                |\n| qos                                  |                                                  |\n| security_groups                      | default                                          |\n| status                               | BUILD                                            |\n| tenant_id                            | 181a578bc97642f2b9e153bec622f130                 |\n| updated                              | 2016-02-27T04:22:43Z                             |\n| user_id                              | 8b34e1ab75024fcba0ea69a6fd0937c3                 |\n+--------------------------------------+--------------------------------------------------+\n3. migrate the in-use status volume\n[root@2C5_10_DELL05 ~(keystone_admin)]# cinder migrate a0dae16a-2669-49c7-a118-250c31adc655 2C5_10_DELL05@KS3200ISCSIDriver-2#KS3200_IPSAN\n4. migrate volume fail, nova-compute.log as following:\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 8699, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     payload)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 379, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 350, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 407, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 395, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5965, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5932, in _swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     self.volume_api.unreserve_volume(context, new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5913, in _swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     resize_to)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1241, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     self._disconnect_volume(old_connection_info, disk_dev)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1092, in _disconnect_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     raise\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher TypeError: exceptions must be old-style classes or derived from BaseException, not NoneType\n5. Then, the instance is still running ,active. but  login to the virtual machine system, find the guest OS  changed read-only file system.", 
    "tags": [
        "migration", 
        "volumes"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1550639", 
    "owner": "None", 
    "id": 1550639, 
    "index": 4460, 
    "openned": "2016-02-27 04:47:21.409312+00:00", 
    "created": "2016-02-27 04:47:21.409312+00:00", 
    "title": "Instance can't run normally after volume migration (with swap volume) fails.", 
    "comments": [
        {
            "content": "Reproducing method as following:\n1.create a volume from image \n[root@2C5_10_DELL05 ~(keystone_admin)]# cinder  create --image-id fd8330b3-a307-4140-8fe0-01341b583e26 --name test_image_volume  --volume-type  KSIP 1 \n+---------------------------------------+--------------------------------------+\n|                Property               |                Value                 |\n+---------------------------------------+--------------------------------------+\n|              attachments              |                  []                  |\n|           availability_zone           |                 nova                 |\n|                bootable               |                false                 |\n|          consistencygroup_id          |                 None                 |\n|               created_at              |      2016-02-27T04:20:37.000000      |\n|              description              |                 None                 |\n|               encrypted               |                False                 |\n|                   id                  | a0dae16a-2669-49c7-a118-250c31adc655 |\n|                metadata               |                  {}                  |\n|              multiattach              |                False                 |\n|                  name                 |          test_image_volume           |\n|         os-vol-host-attr:host         |                 None                 |\n|     os-vol-mig-status-attr:migstat    |                 None                 |\n|     os-vol-mig-status-attr:name_id    |                 None                 |\n|      os-vol-tenant-attr:tenant_id     |   181a578bc97642f2b9e153bec622f130   |\n|   os-volume-replication:driver_data   |                 None                 |\n| os-volume-replication:extended_status |                 None                 |\n|           replication_status          |               disabled               |\n|                  size                 |                  1                   |\n|              snapshot_id              |                 None                 |\n|              source_volid             |                 None                 |\n|                 status                |               creating               |\n|                user_id                |   8b34e1ab75024fcba0ea69a6fd0937c3   |\n|              volume_type              |                 KSIP                 |\n+---------------------------------------+--------------------------------------+\n2\u3001boot a instance from the step 1 volume.\n[root@2C5_10_DELL05 ~(keystone_admin)]# nova boot --flavor 1  --block-device id=a0dae16a-2669-49c7-a118-250c31adc655,source=volume,dest=volume,bootindex=0 --nic net-id=5c8f7e7a-5a75-48eb-9c68-096278585c18 test_vm\n+--------------------------------------+--------------------------------------------------+\n| Property                             | Value                                            |\n+--------------------------------------+--------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                           |\n| OS-EXT-AZ:availability_zone          | nova                                             |\n| OS-EXT-SRV-ATTR:host                 | -                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | -                                                |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000647                                |\n| OS-EXT-STS:power_state               | 0                                                |\n| OS-EXT-STS:task_state                | scheduling                                       |\n| OS-EXT-STS:vm_state                  | building                                         |\n| OS-SRV-USG:launched_at               | -                                                |\n| OS-SRV-USG:terminated_at             | -                                                |\n| accessIPv4                           |                                                  |\n| accessIPv6                           |                                                  |\n| adminPass                            | JEeW4BR4WL3a                                     |\n| autostart                            | TRUE                                             |\n| boot_index_type                      |                                                  |\n| config_drive                         |                                                  |\n| created                              | 2016-02-27T04:22:42Z                             |\n| flavor                               | m1.tiny (1)                                      |\n| hostId                               |                                                  |\n| id                                   | a740b3da-42e7-4cba-9408-8df3b4846dcc             |\n| image                                | Attempt to boot from volume - no image supplied  |\n| key_name                             | -                                                |\n| metadata                             | {}                                               |\n| move                                 | TRUE                                             |\n| name                                 | test_vm                                          |\n| novnc                                | TRUE                                             |\n| os-extended-volumes:volumes_attached | [{\"id\": \"a0dae16a-2669-49c7-a118-250c31adc655\"}] |\n| priority                             | 50                                               |\n| progress                             | 0                                                |\n| qos                                  |                                                  |\n| security_groups                      | default                                          |\n| status                               | BUILD                                            |\n| tenant_id                            | 181a578bc97642f2b9e153bec622f130                 |\n| updated                              | 2016-02-27T04:22:43Z                             |\n| user_id                              | 8b34e1ab75024fcba0ea69a6fd0937c3                 |\n+--------------------------------------+--------------------------------------------------+\n3. migrate the in-use status volume\n[root@2C5_10_DELL05 ~(keystone_admin)]# cinder migrate a0dae16a-2669-49c7-a118-250c31adc655 2C5_10_DELL05@KS3200ISCSIDriver-2#KS3200_IPSAN\n4. migrate volume fail, nova-compute.log as following:\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 8699, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     payload)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 379, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 350, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 407, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 395, in decorated_function\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5965, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5932, in _swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     self.volume_api.unreserve_volume(context, new_volume_id)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 5913, in _swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     resize_to)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1241, in swap_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     self._disconnect_volume(old_connection_info, disk_dev)\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1092, in _disconnect_volume\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher     raise\n2016-02-27 11:32:47.986 29370 TRACE oslo_messaging.rpc.dispatcher TypeError: exceptions must be old-style classes or derived from BaseException, not NoneType\n5. Then, the instance is still running ,active. but  login to the virtual machine system, find the guest OS  changed read-only file system.", 
            "date_created": "2016-02-27 04:47:21.409312+00:00", 
            "author": "https://api.launchpad.net/1.0/~zheng-yao1"
        }, 
        {
            "content": "The fourth step does not need to care about is abnormal, environmental problems of my own. But i want to express is that even if migrate volume is abnormal, we should be able to roll back to normal, the maximum guarantee the normal use of the virtual machine storage.  so, to solve this problem, we should capture the exception handling in disconnect_volume.", 
            "date_created": "2016-02-27 04:55:57.924756+00:00", 
            "author": "https://api.launchpad.net/1.0/~zheng-yao1"
        }, 
        {
            "content": "What version of nova and cinder are you using?\n\nI'm not familiar with the volume migration API in Cinder, but it looks like it calls out to Nova to perform a swap volume operation.\n\nPer your comment 1, you're expecting that Cinder will handle the failure from the Nova swap volume operation and rollback the failure?  That's reasonable but would need the Cinder team to weigh in here.\n\nDo you have the Cinder logs from the failure to see why those don't rollback?", 
            "date_created": "2016-03-06 20:09:15.327642+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "It seems like at the very least the instance in nova should go to ERROR state if the swap volume operation fails.", 
            "date_created": "2016-04-18 17:08:14.143041+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Another issue that worries me is nova doesn't change the task_state on the instance during a swap_volume operation, so the owner of the server instance could delete it while volumes are being swapped, which could leave the volumes in a garbage state on the cinder side. This is especially bad because swap_volume is by default an admin-only API, and it's initiated from cinder when doing a volume migration. So the user might not even know their volume backends are being migrated, and they decide they no longer need the instance and go to delete it, and that fails, or it passes but the volumes are stuck or orphaned in cinder.", 
            "date_created": "2016-04-18 17:38:37.737590+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "It also doesn't look like we set any instance action events or emit notifications when performing a swap_volume operation either.", 
            "date_created": "2016-04-18 17:44:10.074253+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "\nThere are no currently open reviews on this bug, changing\nthe status back to the previous state and unassigning. If\nthere are active reviews related to this bug, please include\nlinks in comments.\n", 
            "date_created": "2017-06-23 12:36:16.385879+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}