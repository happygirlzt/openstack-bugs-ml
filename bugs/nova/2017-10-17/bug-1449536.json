{
    "status": "Expired", 
    "last_updated": "2015-06-29 04:17:19.268528+00:00", 
    "description": "1.version\uff1aicehouse\n\n2.Reproduce steps:\n2.1\nI create a tenant called tenant_test \nthen I cretaed three users called test1\uff0ctest2 and test3 which belong tenant tenant_test\n\n[root@njq002 ~(keystone_admin)]# keystone tenant-list\n+----------------------------------+-------------+---------+\n|                id                |     name    | enabled |\n+----------------------------------+-------------+---------+\n| 6485ffa6b1f448919f00acab23207018 |    admin    |   True  |\n| dc09e51878b54448b6ed39522295bb5a |   services  |   True  |\n| 46662e5f16ca4721a80608d7f9212b52 | tenant_test |   True  |\n+----------------------------------+-------------+---------+\n[root@njq002 ~(keystone_admin)]# keystone user-list --tenant tenant_test\n+----------------------------------+-------+---------+-------+\n|                id                |  name | enabled | email |\n+----------------------------------+-------+---------+-------+\n| c0f29a1994bb4235be20b41f90429867 | test1 |   True  |       |\n| e7630f66f4be4f5eafc78eddf0699d0c | test2 |   True  |       |\n| 3f5160c6b0a04a81992b9319a89ffa79 | test3 |   True  |       |\n+----------------------------------+-------+---------+-------+\n\nAt this time\uff0cThere is no any information of three users in table \"nova . project_user_quotas\"\n\n2.2\nthen, With the command \"nova quota-update\" to change the quota of each user\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user c0f29a1994bb4235be20b41f90429867  --instances 6\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c  --instances 7\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user 3f5160c6b0a04a81992b9319a89ffa79  --instances 6\n\nAt this time\uff0cThere is   relevant information of three users in table \"nova . project_user_quotas\"\n\n2.3\nwe check the tenant quota and user quota ,we will found that the rule \"user quota summation should not exceed the tenant quota\" has been broken. \nbecause 6+7+6 > 10\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 10    |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user c0f29a1994bb4235be20b41f90429867\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 6     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 7     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user 3f5160c6b0a04a81992b9319a89ffa79\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 6     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n\n2.4\nat last,  With the command \"nova quota-update\" to change the quota of any user,the result is:\n\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c  --instances 6\nERROR: Quota limit must be less than -2. (HTTP 400) (Request-ID: req-77dd07f0-0491-4520-a48d-489b3b64238f)\n\nso, For the first time\uff0cModify the user quota can destroy the rule \"user quota summation should not exceed the tenant quota\"\n\nthis bug and the bug\"https://bugs.launchpad.net/nova/+bug/1449498\" lead to users and tenants quota management is very chaotic", 
    "tags": [
        "nova", 
        "quotas"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1449536", 
    "owner": "None", 
    "id": 1449536, 
    "index": 6787, 
    "openned": "2015-04-28 12:22:24.773318+00:00", 
    "created": "2015-04-28 12:22:24.773318+00:00", 
    "title": "For the first time\uff0cModify the user quota can destroy the rule 'user quota summation should not exceed the tenant quota'", 
    "comments": [
        {
            "content": "1.version\uff1aicehouse\n\n2.Reproduce steps:\n2.1\nI create a tenant called tenant_test \nthen I cretaed three users called test1\uff0ctest2 and test3 which belong tenant tenant_test\n\n[root@njq002 ~(keystone_admin)]# keystone tenant-list\n+----------------------------------+-------------+---------+\n|                id                |     name    | enabled |\n+----------------------------------+-------------+---------+\n| 6485ffa6b1f448919f00acab23207018 |    admin    |   True  |\n| dc09e51878b54448b6ed39522295bb5a |   services  |   True  |\n| 46662e5f16ca4721a80608d7f9212b52 | tenant_test |   True  |\n+----------------------------------+-------------+---------+\n[root@njq002 ~(keystone_admin)]# keystone user-list --tenant tenant_test\n+----------------------------------+-------+---------+-------+\n|                id                |  name | enabled | email |\n+----------------------------------+-------+---------+-------+\n| c0f29a1994bb4235be20b41f90429867 | test1 |   True  |       |\n| e7630f66f4be4f5eafc78eddf0699d0c | test2 |   True  |       |\n| 3f5160c6b0a04a81992b9319a89ffa79 | test3 |   True  |       |\n+----------------------------------+-------+---------+-------+\n\nAt this time\uff0cThere is no any information of three users in table \"nova . project_user_quotas\"\n\n2.2\nthen, With the command \"nova quota-update\" to change the quota of each user\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user c0f29a1994bb4235be20b41f90429867  --instances 6\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c  --instances 7\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user 3f5160c6b0a04a81992b9319a89ffa79  --instances 6\n\nAt this time\uff0cThere is   relevant information of three users in table \"nova . project_user_quotas\"\n\n2.3\nwe check the tenant quota and user quota ,we will found that the rule \"user quota summation should not exceed the tenant quota\" has been broken. \nbecause 6+7+6 > 10\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 10    |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user c0f29a1994bb4235be20b41f90429867\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 6     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 7     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n[root@njq002 ~(keystone_admin)]# nova quota-show  --tenant  46662e5f16ca4721a80608d7f9212b52  --user 3f5160c6b0a04a81992b9319a89ffa79\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 6     |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n+-----------------------------+-------+\n\n2.4\nat last,  With the command \"nova quota-update\" to change the quota of any user,the result is:\n\n[root@njq002 ~(keystone_admin)]# nova quota-update 46662e5f16ca4721a80608d7f9212b52  --user e7630f66f4be4f5eafc78eddf0699d0c  --instances 6\nERROR: Quota limit must be less than -2. (HTTP 400) (Request-ID: req-77dd07f0-0491-4520-a48d-489b3b64238f)\n\nso, For the first time\uff0cModify the user quota can destroy the rule \"user quota summation should not exceed the tenant quota\"\n\nthis bug and the bug\"https://bugs.launchpad.net/nova/+bug/1449498\" lead to users and tenants quota management is very chaotic", 
            "date_created": "2015-04-28 12:22:24.773318+00:00", 
            "author": "https://api.launchpad.net/1.0/~ni-jinquan"
        }, 
        {
            "content": "This problem is not seen in Juno:\n\nkeystone user-list --tenant demo\n+----------------------------------+------+---------+-------+\n|                id                | name | enabled | email |\n+----------------------------------+------+---------+-------+\n| 4d07494ba1c3477593bb00b92957a378 | abc  |   True  |       |\n| 21bf4c1d4d2f46ba9a6363a9615a130b | demo |   True  |       |\n+----------------------------------+------+---------+-------+\n\nnova quota-update 989444dfdb5544008fa34261bd6023e4 --user 21bf4c1d4d2f46ba9a6363a9615a130b --instances 7\nnova quota-update 989444dfdb5544008fa34261bd6023e4 --user 4d07494ba1c3477593bb00b92957a378 --instances 7\nERROR (BadRequest): Quota limit 7 for instances must be less than or equal to 3. (HTTP 400) (Request-ID: req-762969ca-707d-432b-be3d-64c4688bc179)\n\n", 
            "date_created": "2015-04-29 04:38:58.757532+00:00", 
            "author": "https://api.launchpad.net/1.0/~sbiswas7"
        }, 
        {
            "content": "dear Sudipta Biswas \uff1a\n\n  Thank you for your reply\uff01\n\n  I installed the Juno  version.  According to Reproduce steps, I reappeared this bug in Juno.And I found the situation even worse\n  because 15 >13 , 16 >13.\n\nThe following is the result of my operation\uff1a\n[root@controller ~(keystone_admin)]# keystone tenant-list\n+----------------------------------+---------+---------+\n|                id                |   name  | enabled |\n+----------------------------------+---------+---------+\n| 31c148c6fe454792bc6e5a3ff2c6813c |  admin  |   True  |\n| dd2dfc2228e7484399d7727c0fcfa5ea |   demo  |   True  |\n| 7c4e0bbb1b8443949c68042673ba41f8 | service |   True  |\n| 4856c1cf64054a53bd3433b1a6970f14 |   tecs  |   True  |\n+----------------------------------+---------+---------+\n[root@controller ~(keystone_admin)]# nova quota-show --tenant 4856c1cf64054a53bd3433b1a6970f14 \n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 13    |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n| server_groups               | 10    |\n| server_group_members        | 10    |\n+-----------------------------+-------+\n[root@controller ~(keystone_admin)]# keystone user-list --tenant 4856c1cf64054a53bd3433b1a6970f14\n+----------------------------------+------+---------+-------+\n|                id                | name | enabled | email |\n+----------------------------------+------+---------+-------+\n| 938cecf4952c4ee89c2806695b28e7c2 |  t1  |   True  |       |\n| badc195fdc0a471489926cdcd5a09431 |  t2  |   True  |       |\n| 3e0f6b6624154057ba00f034d235a713 |  t3  |   True  |       |\n+----------------------------------+------+---------+-------+\n[root@controller ~(keystone_admin)]# nova quota-update 4856c1cf64054a53bd3433b1a6970f14 --user  badc195fdc0a471489926cdcd5a09431 --instances 16\n[root@controller ~(keystone_admin)]# nova quota-show --tenant 4856c1cf64054a53bd3433b1a6970f14 --user  badc195fdc0a471489926cdcd5a09431\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 16    |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n| server_groups               | 10    |\n| server_group_members        | 10    |\n+-----------------------------+-------+\n[root@controller ~(keystone_admin)]# nova quota-update 4856c1cf64054a53bd3433b1a6970f14 --user 938cecf4952c4ee89c2806695b28e7c2  --instances 15\n[root@controller ~(keystone_admin)]# nova quota-show --tenant 4856c1cf64054a53bd3433b1a6970f14 --user 938cecf4952c4ee89c2806695b28e7c2\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | 15    |\n| cores                       | 20    |\n| ram                         | 51200 |\n| floating_ips                | 10    |\n| fixed_ips                   | -1    |\n| metadata_items              | 128   |\n| injected_files              | 5     |\n| injected_file_content_bytes | 10240 |\n| injected_file_path_bytes    | 255   |\n| key_pairs                   | 100   |\n| security_groups             | 10    |\n| security_group_rules        | 20    |\n| server_groups               | 10    |\n| server_group_members        | 10    |\n+-----------------------------+-------+\n\nCould you tell me what you use the specific version?\n\nthis is my version info\uff1a\n \n\n[root@controller ~(keystone_admin)]# rpm -qi openstack-nova-compute-2014.2.1-1.el7.centos.noarch\nName        : openstack-nova-compute\nVersion     : 2014.2.1\nRelease     : 1.el7.centos\nArchitecture: noarch\nInstall Date: Thu 05 Mar 2015 03:41:11 PM CST\nGroup       : Applications/System\nSize        : 9696\nLicense     : ASL 2.0\nSignature   : RSA/SHA1, Thu 11 Dec 2014 01:49:09 PM CST, Key ID eecac5d5df6674e3\nSource RPM  : openstack-nova-2014.2.1-1.el7.centos.src.rpm\nBuild Date  : Wed 10 Dec 2014 05:41:11 AM CST\nBuild Host  : i-0001f4cc\nRelocations : (not relocatable)\nVendor      : Fedora Project COPR (jruzicka/rdo-juno-epel-7)\nURL         : http://openstack.org/projects/compute/\nSummary     : OpenStack Nova Virtual Machine control service\nDescription :\nOpenStack Compute (codename Nova) is open source software designed to\nprovision and manage large networks of virtual machines, creating a\nredundant and scalable cloud computing platform. It gives you the\nsoftware, control panels, and APIs required to orchestrate a cloud,\nincluding running instances, managing networks, and controlling access\nthrough users and projects. OpenStack Compute strives to be both\nhardware and hypervisor agnostic, currently supporting a variety of\nstandard hardware configurations and seven major hypervisors.", 
            "date_created": "2015-04-29 07:36:20.947444+00:00", 
            "author": "https://api.launchpad.net/1.0/~ni-jinquan"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2015-06-29 04:17:14.675358+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2015-06-29 04:17:16.308810+00:00"
}