{
    "status": "Expired", 
    "last_updated": "2017-04-24 04:17:45.904729+00:00", 
    "description": "I am the M version of the openstack, I control the node with nova set-password instancesname reset the password, there is an error, my mirror is windows2008, mirror for the manual production, which installed qemu-guest-agent, the service started normal.\nThe following is my detailed error message:\n[Root @ controller01~] #source keystonerc_admin\n[Root @ controller01 ~ (keystone_admin)] # nova set-password cwd-37\nnew password:\nonce again:\nError (Conflict): Can not set the administrator password at 11727880-c1f2-4450-9205-a136fe8a0a87 because the error is set to the administrator password (HTTP 409) (Request ID: req-a5f4f62b-d488-4fd2-a522-2d29b2621592)\n\ncompute the log of the node:\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher [req-a5f4f62b-d488-4fd2-a522-2d29b2621592 e95eac4dd3f1499bbced20dfe6b27f81 515e8d8470cc4373a21e304c2ba98eb6 - - -] Exception during message processing: Can not set administrator password 11727880-c1f2- 4450-9205-a136fe8a0a87 The administrator password is set incorrectly\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher Trace (most recently called):\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, located at _dispatch_and_reply\n2017-02-20 16: 46: 11.602 2662 ERROR oslo_messaging.rpc.dispatcher incoming.message))\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 185, in _dispatch\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher return self._do_dispatch (endpoint, method, ctxt, args)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher result = func (ctxt, ** new_args)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 110\n2017-02-20 16: 46: 11.602 2662 ERROR oslo_messaging.rpc.dispatcher payload)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 89, wrapper\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher return f (self, context, * args, ** kw)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 359,\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher LOG.warning (msg, e, instance = instance)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 328,\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher returns the function (self, context, * args, ** kwargs)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 409,\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher returns the function (self, context, * args, ** kwargs)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 387,\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher kwargs ['instance'], e, sys.exc_info ())\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 375,\nGoogle \u7ffb\u8bd1\uff08\u4f01\u4e1a\u7248\uff09\uff1a\u8bd1\u8005\u5de5\u5177\u5305\u7f51\u7ad9\u7ffb\u8bd1\u5668\u5168\u7403\u5546", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1666148", 
    "owner": "None", 
    "id": 1666148, 
    "index": 7960, 
    "openned": "2017-02-20 08:49:28.504338+00:00", 
    "created": "2017-02-20 08:49:28.504338+00:00", 
    "title": "nova set-password instancesname return 409 error", 
    "comments": [
        {
            "content": "I am the M version of the openstack, I control the node with nova set-password instancesname reset the password, there is an error, my mirror is windows2008, mirror for the manual production, which installed qemu-guest-agent, the service started normal.\nThe following is my detailed error message:\n[Root @ controller01~] #source keystonerc_admin\n[Root @ controller01 ~ (keystone_admin)] # nova set-password cwd-37\nnew password:\nonce again:\nError (Conflict): Can not set the administrator password at 11727880-c1f2-4450-9205-a136fe8a0a87 because the error is set to the administrator password (HTTP 409) (Request ID: req-a5f4f62b-d488-4fd2-a522-2d29b2621592)\n\ncompute the log of the node:\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher [req-a5f4f62b-d488-4fd2-a522-2d29b2621592 e95eac4dd3f1499bbced20dfe6b27f81 515e8d8470cc4373a21e304c2ba98eb6 - - -] Exception during message processing: Can not set administrator password 11727880-c1f2- 4450-9205-a136fe8a0a87 The administrator password is set incorrectly\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher Trace (most recently called):\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 138, located at _dispatch_and_reply\n2017-02-20 16: 46: 11.602 2662 ERROR oslo_messaging.rpc.dispatcher incoming.message))\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 185, in _dispatch\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher return self._do_dispatch (endpoint, method, ctxt, args)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher result = func (ctxt, ** new_args)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 110\n2017-02-20 16: 46: 11.602 2662 ERROR oslo_messaging.rpc.dispatcher payload)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 89, wrapper\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher return f (self, context, * args, ** kw)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 359,\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher LOG.warning (msg, e, instance = instance)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 328,\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher returns the function (self, context, * args, ** kwargs)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 409,\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher returns the function (self, context, * args, ** kwargs)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 387,\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher kwargs ['instance'], e, sys.exc_info ())\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher The file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher self.force_reraise ()\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher six.reraise (self.type_, self.value, self.tb)\n207-02-20 16: 46: 11.602 2662 Error oslo_messaging.rpc.dispatcher file \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 375,\nGoogle \u7ffb\u8bd1\uff08\u4f01\u4e1a\u7248\uff09\uff1a\u8bd1\u8005\u5de5\u5177\u5305\u7f51\u7ad9\u7ffb\u8bd1\u5668\u5168\u7403\u5546", 
            "date_created": "2017-02-20 08:49:28.504338+00:00", 
            "author": "https://api.launchpad.net/1.0/~chenwd"
        }, 
        {
            "content": "Is there more to the exception? That doesn't seem to tell much. Which version of libvirt is on the compute node because libvirt >= 1.2.16 is required to set the password in the guest.\n\nIs the guest windows or linux?\n\nDo you see this error in the logs?\n\nhttps://github.com/openstack/nova/blob/stable/mitaka/nova/virt/libvirt/driver.py#L1801", 
            "date_created": "2017-02-21 16:36:51.661391+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "My libvirt version:\n[Root @ compute03 ~] # rpm -qa | grep libvirt\nLibvirt-daemon-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-nwfilter-2.0.0-10.el7_3.2.x86_64\nLibvirt-client-2.0.0-10.el7_3.2.x86_64\nLibvirt-python-2.0.0-2.el7.x86_64\nLibvirt-daemon-driver-interface-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-nodedev-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-network-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-storage-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-secret-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-driver-qemu-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-kvm-2.0.0-10.el7_3.2.x86_64\nLibvirt-daemon-config-nwfilter-2.0.0-10.el7_3.2.x86_64\n\nMy mirror is windows system, qemu-guest-agent is windows version", 
            "date_created": "2017-02-22 10:43:25.742480+00:00", 
            "author": "https://api.launchpad.net/1.0/~chenwd"
        }, 
        {
            "content": "We need to see this trace exception message for the original failure to debug this:\n\nhttps://github.com/openstack/nova/blob/stable/mitaka/nova/compute/manager.py#L3322", 
            "date_created": "2017-02-22 14:54:14.425679+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "The real problem here is that I don't see a firm stacktrace telling us why we get this exception.\n\nWe don't expose the original exception for security purposes but we still log it in the n-cpu log if something goes wrong when setting the password.\n\nCould you please give us the trace given https://github.com/openstack/nova/blob/9f7af83d1ba1795b19a8fec58cd492f842bad98a/nova/compute/manager.py#L3289 ?\n\nYou could grab your logs and find for the (maybe translated) pattern \"set_admin_password failed\"\n\nPlease don't paste us translated traces using Google, it's rather better to try giving us the internationalized trace.", 
            "date_created": "2017-02-22 14:55:58.725247+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "The problem has been resolved, thank you.", 
            "date_created": "2017-02-23 01:09:02.669260+00:00", 
            "author": "https://api.launchpad.net/1.0/~chenwd"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-04-24 04:17:42.958655+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2017-04-24 04:17:43.629323+00:00"
}