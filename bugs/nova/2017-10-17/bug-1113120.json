{
    "status": "Invalid", 
    "last_updated": "2014-03-25 13:26:41.832768+00:00", 
    "description": "Running a single rabbit node on the same host as nova-conductor, it initially processes calls from nova compute, however aftera a few minutes we see the following error in nova-compute. There is no corresponding error in nova-conductor, just unread messages in the conductor queue.\n\nAm running latest nova master branch, Although also saw same issue with code from 19 December.\n\n\n2013-02-01 22:36:29 nova.conductor.api: ERROR [req-456fa80a-770b-49b2-b0b7-5add79efd808 None None] Timed out waiting for nova-conductor. Is it running? Or did this service start before nova-conductor?\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api Traceback (most recent call last):\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/api.py\", line 344, in wait_until_ready\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.ping(context, '1.21 GigaWatts', timeout=timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/api.py\", line 352, in ping\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return self.conductor_rpcapi.ping(context, arg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/rpcapi.py\", line 85, in ping\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return self.call(context, msg, version='1.22', timeout=timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/proxy.py\", line 80, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return rpc.call(context, self._get_topic(topic), msg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/__init__.py\", line 109, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return _get_impl().call(cfg.CONF, context, topic, msg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 765, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     rpc_amqp.get_connection_pool(conf, Connection))\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 379, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     rv = list(rv)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 340, in __iter__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.done()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.gen.next()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 337, in __iter__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self._iterator.next()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 639, in iterconsume\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     yield self.ensure(_error_callback, _consume)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 557, in ensure\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     error_callback(e)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 620, in _error_callback\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     raise rpc_common.Timeout()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api Timeout: Timeout while waiting on RPC response.\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1113120", 
    "owner": "None", 
    "id": 1113120, 
    "index": 4642, 
    "openned": "2013-02-02 03:46:54.467312+00:00", 
    "created": "2013-02-02 03:46:54.467312+00:00", 
    "title": "Nova-Conductor stops processing conductor queue", 
    "comments": [
        {
            "content": "Running a single rabbit node on the same host as nova-conductor, it initially processes calls from nova compute, however aftera a few minutes we see the following error in nova-compute. There is no corresponding error in nova-conductor, just unread messages in the conductor queue.\n\nAm running latest nova master branch, Although also saw same issue with code from 19 December.\n\n\n2013-02-01 22:36:29 nova.conductor.api: ERROR [req-456fa80a-770b-49b2-b0b7-5add79efd808 None None] Timed out waiting for nova-conductor. Is it running? Or did this service start before nova-conductor?\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api Traceback (most recent call last):\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/api.py\", line 344, in wait_until_ready\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.ping(context, '1.21 GigaWatts', timeout=timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/api.py\", line 352, in ping\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return self.conductor_rpcapi.ping(context, arg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/conductor/rpcapi.py\", line 85, in ping\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return self.call(context, msg, version='1.22', timeout=timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/proxy.py\", line 80, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return rpc.call(context, self._get_topic(topic), msg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/__init__.py\", line 109, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     return _get_impl().call(cfg.CONF, context, topic, msg, timeout)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 765, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     rpc_amqp.get_connection_pool(conf, Connection))\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 379, in call\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     rv = list(rv)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 340, in __iter__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.done()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self.gen.next()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/amqp.py\", line 337, in __iter__\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     self._iterator.next()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 639, in iterconsume\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     yield self.ensure(_error_callback, _consume)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 557, in ensure\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     error_callback(e)\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api   File \"/usr/lib/python2.6/site-packages/nova-2013.1-py2.6.egg/nova/openstack/common/rpc/impl_kombu.py\", line 620, in _error_callback\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api     raise rpc_common.Timeout()\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api Timeout: Timeout while waiting on RPC response.\n2013-02-01 22:36:29.575 14827 TRACE nova.conductor.api", 
            "date_created": "2013-02-02 03:46:54.467312+00:00", 
            "author": "https://api.launchpad.net/1.0/~stuart-stent"
        }, 
        {
            "content": "It appears that this was caused by an incompatibility with the lastest eventlet package.\n\nI reverted the servers to the current python-eventlet package from EPEL instead of using PYPI and all went back to normal. \n\nfix:\n\nremove eventlet from site-packges\ninstall python-eventlet from EPEL\nreinstall nova and it's openstack dependencies.\n\n", 
            "date_created": "2013-02-04 14:28:08.614692+00:00", 
            "author": "https://api.launchpad.net/1.0/~stuart-stent"
        }, 
        {
            "content": "Apparently that didn't fix the problem\n\n\nalso seeing this in the rabbtimq  logs\n\n\n\n=ERROR REPORT==== 4-Feb-2013::11:03:49 ===\nexception on TCP connection <0.1094.0> from 10.6.193.32:60351\n{handshake_timeout,frame_header}\n", 
            "date_created": "2013-02-04 16:04:55.326233+00:00", 
            "author": "https://api.launchpad.net/1.0/~stuart-stent"
        }, 
        {
            "content": "That particular traceback is normal if nova-conductor is not fully initialized before nova-compute starts.  nova-compute will loop around during startup waiting for nova-conductor to respond.  All should be fine after that.\n\nIf you're still seeing this, can you try to figure out what nova-conductor is hanging on?  Can you get a backtrace?\n\nWhen it seems to be stuck, is the database still responding fine?  Is something like 'nova list' still working as expected?", 
            "date_created": "2013-02-26 02:32:14.810644+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "We cannot solve the issue you reported without more information. Could you please provide the requested information ?", 
            "date_created": "2013-03-18 12:18:09.223343+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "This bug lacks the necessary information to effectively reproduce and fix it, therefore it has been closed. Feel free to reopen the bug by providing the requested information and set the bug status back to ''New''.", 
            "date_created": "2013-05-08 10:34:32.239570+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2013-05-08 10:34:34.581665+00:00"
}