{
    "status": "Expired", 
    "last_updated": "2017-02-20 04:17:46.941665+00:00", 
    "description": "I am running OpenStack Kilo on CentOS7.1 with VMware vSphere 5.5 Enterprise Plus. \nI have created snapshot for the instance. OS of the instance is Windows Server 2008 R2 and VMware tools have been installed. The size of snapshot is 3.2G. When I launch intance using this snapshot, instance failed to spawn.\n\nThe following error info displayed in vCenter Client: Operation timed out in \"Deploy OVF template\" task.", 
    "tags": [
        "vmware"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1586328", 
    "owner": "None", 
    "id": 1586328, 
    "index": 7509, 
    "openned": "2016-05-27 09:35:34.193594+00:00", 
    "created": "2016-05-27 09:35:34.193594+00:00", 
    "title": "use instance snapshot launch instance failed", 
    "comments": [
        {
            "content": "I am running OpenStack Kilo on CentOS7.1 with VMware vSphere 5.5 Enterprise Plus. \nI have created snapshot for the instance. OS of the instance is Windows Server 2008 R2 and VMware tools have been installed. The size of snapshot is 3.2G. When I launch intance using this snapshot, instance failed to spawn.\n\nThe following error info displayed in vCenter Client: Operation timed out in \"Deploy OVF template\" task.", 
            "date_created": "2016-05-27 09:35:34.193594+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhoujm-cri"
        }, 
        {
            "content": "Please attach logs.", 
            "date_created": "2016-05-27 16:19:30.928852+00:00", 
            "author": "https://api.launchpad.net/1.0/~sarafraj-singh"
        }, 
        {
            "content": "2016-05-27 15:37:11.199 24454 DEBUG nova.virt.vmwareapi.io_util [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] self.transferred::: 3407872000 read /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/io_util.py:60\n2016-05-27 15:37:11.200 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] bytes_written::: 3407872000 write /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:387\n2016-05-27 15:37:11.743 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Completed reading data from the image iterator. read /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:649\n2016-05-27 15:37:11.840 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Getting lease state for https://10.153.193.150/nfc/520b5ae3-433d-cb94-685c-5f6e58073ee8/disk-0.vmdk. close /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:434\n2016-05-27 15:37:11.841 24454 DEBUG oslo_vmware.api [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Waiting for function _invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:121\n2016-05-27 15:37:11.891 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Lease for https://10.153.193.150/nfc/520b5ae3-433d-cb94-685c-5f6e58073ee8/disk-0.vmdk is in state: error. close /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:443\n2016-05-27 15:37:11.893 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Lease for https://10.153.193.150/nfc/520b5ae3-433d-cb94-685c-5f6e58073ee8/disk-0.vmdk is in state: error; no need to release. close /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:453\n2016-05-27 15:37:11.894 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Closed VMDK write handle for https://10.153.193.150/nfc/520b5ae3-433d-cb94-685c-5f6e58073ee8/disk-0.vmdk. close /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:459\n2016-05-27 15:37:11.895 24454 INFO nova.virt.vmwareapi.images [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Downloaded image file data 2ed21b3f-8dac-4a04-a9d3-d542aa62ead2\n2016-05-27 15:37:11.897 24454 DEBUG oslo_vmware.api [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Waiting for function _invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:121\n2016-05-27 15:37:11.976 24454 DEBUG oslo_vmware.api [-] Fault list: [ManagedObjectNotFound] _invoke_api /usr/lib/python2.7/site-packages/oslo_vmware/api.py:321\n2016-05-27 15:37:11.977 24454 DEBUG oslo_vmware.exceptions [-] Fault ManagedObjectNotFound not matched. get_fault_class /usr/lib/python2.7/site-packages/oslo_vmware/exceptions.py:250\n2016-05-27 15:37:11.977 24454 DEBUG oslo_concurrency.lockutils [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Releasing semaphore \"[datastore150] 10.153.194.37_base/2ed21b3f-8dac-4a04-a9d3-d542aa62ead2/2ed21b3f-8dac-4a04-a9d3-d542aa62ead2.vmdk\" lock /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:404\n2016-05-27 15:37:11.978 24454 ERROR nova.compute.manager [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Instance failed to spawn\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] Traceback (most recent call last):\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2497, in _build_resources\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     yield resources\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2369, in _build_and_run_instance\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     block_device_info=block_device_info)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/driver.py\", line 487, in spawn\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     admin_password, network_info, block_device_info)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py\", line 858, in spawn\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     self._fetch_image_if_missing(context, vi)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py\", line 598, in _fetch_image_if_missing\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     image_fetch(context, vi, tmp_image_ds_loc)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py\", line 413, in _fetch_image_as_vapp\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     self._root_resource_pool)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/images.py\", line 364, in fetch_image_stream_optimized\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     session._call_method(session.vim, \"UnregisterVM\", imported_vm_ref)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/driver.py\", line 700, in _call_method\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     return self.invoke_api(module, method, *args, **kwargs)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/oslo_vmware/api.py\", line 341, in invoke_api\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     return _invoke_api(module, method, *args, **kwargs)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/oslo_vmware/api.py\", line 122, in func\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     return evt.wait()\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/eventlet/event.py\", line 121, in wait\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     return hubs.get_hub().switch()\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 294, in switch\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     return self.greenlet.switch()\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/oslo_vmware/common/loopingcall.py\", line 123, in _inner\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     idle = self.f(*self.args, **self.kw)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/oslo_vmware/api.py\", line 95, in _func\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     result = f(*args, **kwargs)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]   File \"/usr/lib/python2.7/site-packages/oslo_vmware/api.py\", line 324, in _invoke_api\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341]     raise clazz(six.text_type(excep), excep.details)\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] VMwareDriverException: \n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] Cause: Server raised fault: ''\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] Faults: [ManagedObjectNotFound]\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] Details: {'obj': 'vm-3050'}\n2016-05-27 15:37:11.978 24454 TRACE nova.compute.manager [instance: 4e368259-9601-4878-bc67-50c8a232f341] \n2016-05-27 15:37:11.984 24454 INFO nova.compute.manager [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Terminating instance\n2016-05-27 15:37:12.010 24454 DEBUG nova.virt.vmwareapi.vmops [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Destroying instance destroy /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py:1266\n2016-05-27 15:37:12.011 24454 DEBUG oslo_vmware.api [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Waiting for function _invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:121\n2016-05-27 15:37:12.077 24454 DEBUG nova.virt.vmwareapi.vmops [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Unregistering the VM _destroy_instance /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py:1214\n2016-05-27 15:37:12.078 24454 DEBUG oslo_vmware.api [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Waiting for function _invoke_api to return. func /usr/lib/python2.7/site-packages/oslo_vmware/api.py:121\n2016-05-27 15:37:15.201 24454 DEBUG nova.virt.vmwareapi.vmops [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Unregistered the VM _destroy_instance /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py:1217\n2016-05-27 15:37:15.202 24454 DEBUG nova.virt.vmwareapi.vmops [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] [instance: 4e368259-9601-4878-bc67-50c8a232f341] Deleting contents of the VM from datastore datastore150 _destroy_instance /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py:1230\n2016-05-27 15:37:15.202 24454 DEBUG nova.virt.vmwareapi.ds_util [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] Deleting the datastore file [datastore150] hf_ss_zjm_win_2-341 file_delete /usr/lib/python2.7/site-packages/nova/virt/vmwareapi/ds_util.py:225\n\n", 
            "date_created": "2016-06-01 08:11:08.768750+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhoujm-cri"
        }, 
        {
            "content": "", 
            "date_created": "2016-06-01 08:13:45.545635+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhoujm-cri"
        }, 
        {
            "content": "@Zhou: If you set yourself as assignee, people will expect a code change from you. Was that your intention?\nAlso, after you provide the asked information, please switch the status back to \"new\".", 
            "date_created": "2016-07-13 13:08:15.860416+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "Need a vmware specialist to take a look", 
            "date_created": "2016-12-09 12:28:13.832582+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "hi @Zhou ,dou you fix it ?", 
            "date_created": "2016-12-22 03:48:24.938209+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuyangwang1985"
        }, 
        {
            "content": "i also get this problem,some times is ok ,then some times is Fail.i don't know whether or not by nfc session!", 
            "date_created": "2016-12-22 03:50:31.441978+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuyangwang1985"
        }, 
        {
            "content": "2016-05-27 15:30:44.137 24454 DEBUG oslo_vmware.rw_handles [req-94cc51f5-88be-432d-9872-53fa56180338 141ef022b44a416daf81d080286498d4 c78b398007cb4e128212648789b16bf0 - - -] bytes_written::: 1192755200 write /usr/lib/python2.7/site-packages/oslo_vmware/rw_handles.py:387\n\nthis log is you add in the code?", 
            "date_created": "2016-12-22 03:54:16.937818+00:00", 
            "author": "https://api.launchpad.net/1.0/~yuyangwang1985"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-02-20 04:17:42.654694+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ], 
    "closed": "2017-02-20 04:17:43.801846+00:00"
}