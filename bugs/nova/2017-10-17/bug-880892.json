{
    "status": "Invalid", 
    "last_updated": "2012-05-08 21:04:46.241953+00:00", 
    "description": "After i run 'euca-terminate-instances' on failed instances they are not cleaned out as shown here:\n\n[root@nova-01 nova]# euca-describe-instances\nRESERVATION     r-zbtudbah              default\nINSTANCE        i-00000006      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:26:30Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-synpb0eq              default\nINSTANCE        i-00000004      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T22:49:07Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-bjg1in07              default\nINSTANCE        i-0000000a      ami-00000001                    pending test (None, None)       0               m1.tiny 2011-10-23T22:46:23Z    unknown zone    ami-00000000    ami-00000000\nRESERVATION     r-4iboxan0              default\nINSTANCE        i-00000001      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T03:09:09Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-jkffevkc              default\nINSTANCE        i-00000008      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T22:35:53Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-rqndc2ha              default\nINSTANCE        i-00000003      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T16:30:23Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-f3y57c5z              default\nINSTANCE        i-00000002      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T03:10:10Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-dgkjbg0v              default\nINSTANCE        i-00000007      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:26:57Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-pp755t7o              default\nINSTANCE        i-00000009      ami-00000001                    pending test (None, None)       0               m1.tiny 2011-10-23T22:38:08Z    unknown zone    ami-00000000    ami-00000000\nRESERVATION     r-bkj48yzl              default\nINSTANCE        i-00000005      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:25:52Z    nova    ami-00000000    ami-00000000\n\n### Trace from logs when running a terminate on id *001\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,092 DEBUG nova [-] HTTP PERF: 0.02894 seconds to GET keystone.stack.lan:35357 /v2.0/tokens/1deae7aa-36e3-4e76-8475-a3d2639150cd)\n2011-10-24 14:21:29,111 DEBUG nova [-] HTTP PERF: 0.01860 seconds to GET keystone.stack.lan:35357 /v2.0/tokens/1deae7aa-36e3-4e76-8475-a3d2639150cd)\n2011-10-24 14:21:29,113 DEBUG nova.api [-] action: TerminateInstances\n2011-10-24 14:21:29,113 DEBUG nova.api [-] arg: InstanceId.1            val: i-00000001\n2011-10-24 14:21:29,114 DEBUG nova.api.cloud [-] Going to start terminating instances\n2011-10-24 14:21:29,115 DEBUG nova.compute.api [-] Going to try to terminate 1\n2011-10-24 14:21:29,242 DEBUG nova.rpc [-] Making asynchronous cast on compute.nova-01...\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,284 DEBUG nova.rpc [-] received {u'_context_roles': [u'Admin'], u'_context_request_id': u'da7030a8-23af-4de2-a418-8f494ab05ffb', u'_context_read_deleted': False, u'args': {u'instance_id': 1}, u'_context_auth_token': u'1deae7aa-36e3-4e76-8475-a3d2639150cd', u'_context_strategy': u'keystone', u'_context_is_admin': True, u'_context_project_id': None, u'_context_timestamp': u'2011-10-24T18:21:29.112787', u'_context_user_id': u'admin', u'method': u'terminate_instance', u'_context_remote_address': u'127.0.0.1'}\n\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,284 DEBUG nova.api.request [-] <?xml version=\"1.0\" ?>\n<TerminateInstancesResponse xmlns=\"http://ec2.amazonaws.com/doc/2011-01-01/\"><requestId>da7030a8-23af-4de2-a418-8f494ab05ffb</requestId><return>true</return></TerminateInstancesResponse>\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,284 DEBUG nova.rpc [-] unpacked context: {'user_id': u'admin', 'roles': [u'Admin'], 'timestamp': u'2011-10-24T18:21:29.112787', 'auth_token': u'1deae7aa-36e3-4e76-8475-a3d2639150cd', 'msg_id': None, 'remote_address': u'127.0.0.1', 'strategy': u'keystone', 'is_admin': True, 'request_id': u'da7030a8-23af-4de2-a418-8f494ab05ffb', 'project_id': None, 'read_deleted': False}\n\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,285 INFO nova.api [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] 0.248346s 127.0.0.1 POST /services/Cloud/ CloudController:TerminateInstances 200 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/xml\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,285 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: decorating: |<function terminate_instance at 0x1f49de8>|\n2011-10-24 14:21:29,286 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x179f4d0>| |<nova.rpc.impl_kombu.RpcContext object at 0x3697f50>| |1|\n2011-10-24 14:21:29,286 DEBUG nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] instance 1: getting locked state\n2011-10-24 14:21:29,347 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: locked: |False|\n2011-10-24 14:21:29,348 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: admin: |True|\n2011-10-24 14:21:29,348 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: executing: |<function terminate_instance at 0x1f49de8>|\n2011-10-24 14:21:29,408 AUDIT nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] Terminating instance 1\n2011-10-24 14:21:29,409 DEBUG nova.rpc [-] Making asynchronous call on network ...\n2011-10-24 14:21:29,409 DEBUG nova.rpc [-] MSG_ID is f6abd77116a540cd947be2b2fd47a933\n2011-10-24 14:21:29,410 DEBUG nova.rpc [-] Pool creating new connection\n2011-10-24 14:21:29,452 INFO nova.rpc [-] Connected to AMQP server on 127.0.0.1:5672", 
    "tags": [
        "diablo"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/880892", 
    "owner": "None", 
    "id": 880892, 
    "index": 3592, 
    "openned": "2011-10-24 14:34:21.107186+00:00", 
    "created": "2011-10-24 14:34:21.107186+00:00", 
    "title": "Instances not cleaned up when doing euca-terminate-instances", 
    "comments": [
        {
            "content": "After i run 'euca-terminate-instances' on failed instances they are not cleaned out as shown here:\n\n[root@nova-01 nova]# euca-describe-instances\nRESERVATION     r-zbtudbah              default\nINSTANCE        i-00000006      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:26:30Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-synpb0eq              default\nINSTANCE        i-00000004      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T22:49:07Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-bjg1in07              default\nINSTANCE        i-0000000a      ami-00000001                    pending test (None, None)       0               m1.tiny 2011-10-23T22:46:23Z    unknown zone    ami-00000000    ami-00000000\nRESERVATION     r-4iboxan0              default\nINSTANCE        i-00000001      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T03:09:09Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-jkffevkc              default\nINSTANCE        i-00000008      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T22:35:53Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-rqndc2ha              default\nINSTANCE        i-00000003      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T16:30:23Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-f3y57c5z              default\nINSTANCE        i-00000002      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-22T03:10:10Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-dgkjbg0v              default\nINSTANCE        i-00000007      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:26:57Z    nova    ami-00000000    ami-00000000\nRESERVATION     r-pp755t7o              default\nINSTANCE        i-00000009      ami-00000001                    pending test (None, None)       0               m1.tiny 2011-10-23T22:38:08Z    unknown zone    ami-00000000    ami-00000000\nRESERVATION     r-bkj48yzl              default\nINSTANCE        i-00000005      ami-00000001                    pending test (None, nova-01)    0               m1.tiny 2011-10-23T20:25:52Z    nova    ami-00000000    ami-00000000\n\n### Trace from logs when running a terminate on id *001\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,092 DEBUG nova [-] HTTP PERF: 0.02894 seconds to GET keystone.stack.lan:35357 /v2.0/tokens/1deae7aa-36e3-4e76-8475-a3d2639150cd)\n2011-10-24 14:21:29,111 DEBUG nova [-] HTTP PERF: 0.01860 seconds to GET keystone.stack.lan:35357 /v2.0/tokens/1deae7aa-36e3-4e76-8475-a3d2639150cd)\n2011-10-24 14:21:29,113 DEBUG nova.api [-] action: TerminateInstances\n2011-10-24 14:21:29,113 DEBUG nova.api [-] arg: InstanceId.1            val: i-00000001\n2011-10-24 14:21:29,114 DEBUG nova.api.cloud [-] Going to start terminating instances\n2011-10-24 14:21:29,115 DEBUG nova.compute.api [-] Going to try to terminate 1\n2011-10-24 14:21:29,242 DEBUG nova.rpc [-] Making asynchronous cast on compute.nova-01...\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,284 DEBUG nova.rpc [-] received {u'_context_roles': [u'Admin'], u'_context_request_id': u'da7030a8-23af-4de2-a418-8f494ab05ffb', u'_context_read_deleted': False, u'args': {u'instance_id': 1}, u'_context_auth_token': u'1deae7aa-36e3-4e76-8475-a3d2639150cd', u'_context_strategy': u'keystone', u'_context_is_admin': True, u'_context_project_id': None, u'_context_timestamp': u'2011-10-24T18:21:29.112787', u'_context_user_id': u'admin', u'method': u'terminate_instance', u'_context_remote_address': u'127.0.0.1'}\n\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,284 DEBUG nova.api.request [-] <?xml version=\"1.0\" ?>\n<TerminateInstancesResponse xmlns=\"http://ec2.amazonaws.com/doc/2011-01-01/\"><requestId>da7030a8-23af-4de2-a418-8f494ab05ffb</requestId><return>true</return></TerminateInstancesResponse>\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,284 DEBUG nova.rpc [-] unpacked context: {'user_id': u'admin', 'roles': [u'Admin'], 'timestamp': u'2011-10-24T18:21:29.112787', 'auth_token': u'1deae7aa-36e3-4e76-8475-a3d2639150cd', 'msg_id': None, 'remote_address': u'127.0.0.1', 'strategy': u'keystone', 'is_admin': True, 'request_id': u'da7030a8-23af-4de2-a418-8f494ab05ffb', 'project_id': None, 'read_deleted': False}\n\n==> /var/log/nova/nova-api.log <==\n2011-10-24 14:21:29,285 INFO nova.api [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] 0.248346s 127.0.0.1 POST /services/Cloud/ CloudController:TerminateInstances 200 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/xml\n\n==> /var/log/nova/nova-compute.log <==\n2011-10-24 14:21:29,285 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: decorating: |<function terminate_instance at 0x1f49de8>|\n2011-10-24 14:21:29,286 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x179f4d0>| |<nova.rpc.impl_kombu.RpcContext object at 0x3697f50>| |1|\n2011-10-24 14:21:29,286 DEBUG nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] instance 1: getting locked state\n2011-10-24 14:21:29,347 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: locked: |False|\n2011-10-24 14:21:29,348 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: admin: |True|\n2011-10-24 14:21:29,348 INFO nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] check_instance_lock: executing: |<function terminate_instance at 0x1f49de8>|\n2011-10-24 14:21:29,408 AUDIT nova.compute.manager [da7030a8-23af-4de2-a418-8f494ab05ffb admin None] Terminating instance 1\n2011-10-24 14:21:29,409 DEBUG nova.rpc [-] Making asynchronous call on network ...\n2011-10-24 14:21:29,409 DEBUG nova.rpc [-] MSG_ID is f6abd77116a540cd947be2b2fd47a933\n2011-10-24 14:21:29,410 DEBUG nova.rpc [-] Pool creating new connection\n2011-10-24 14:21:29,452 INFO nova.rpc [-] Connected to AMQP server on 127.0.0.1:5672", 
            "date_created": "2011-10-24 14:34:21.107186+00:00", 
            "author": "https://api.launchpad.net/1.0/~endre-karlson"
        }, 
        {
            "content": "Endre:\n\nIs this still reproducible? Can you verify that the system is functional elsewhere (i.e. the network node is up and responds to api requests)?", 
            "date_created": "2012-01-26 22:26:19.843863+00:00", 
            "author": "https://api.launchpad.net/1.0/~bcwaldon"
        }
    ], 
    "closed": "2012-05-08 21:04:43.696839+00:00"
}