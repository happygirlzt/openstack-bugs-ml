{
    "status": "Invalid", 
    "last_updated": "2017-01-18 23:02:39.039004+00:00", 
    "description": "I'm running Mitaka on Ubuntu 16.04 and when I try to access Instances list in Dashboard, the following is error is spawned: Error: Unable to retrieve instance list. Same error is spawned for all users.\n\nSame thing happens in CLI:\nnova list --all-tenants\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-30134c69-6c89-4437-9fd7-a2ca7b169ed7)\n\nDebug output of the same command from above:\nnova --debug list --all-tenants\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:35357/v3 -H \"Accept: application/json\" -H \"User-Agent: keystoneauth1/2.4.1 python-requests/2.9.1 CPython/2.7.12\"\nINFO (connectionpool:208) Starting new HTTP connection (1): 10.0.0.1\nDEBUG (connectionpool:388) \"GET /v3 HTTP/1.1\" 200 248\nDEBUG (session:277) RESP: [200] Content-Length: 248 Vary: X-Auth-Token Server: Apache/2.4.18 (Ubuntu) Date: Wed, 18 Jan 2017 11:25:28 GMT x-openstack-request-id: req-43f828d7-4919-4d24-acbf-513c1b7fa496 Content-Type: application/json X-Distribution: Ubuntu \nRESP BODY: {\"version\": {\"status\": \"stable\", \"updated\": \"2016-04-04T00:00:00Z\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.identity-v3+json\"}], \"id\": \"v3.6\", \"links\": [{\"href\": \"http://10.0.0.1:35357/v3/\", \"rel\": \"self\"}]}}\n\nDEBUG (base:165) Making authentication request to http://10.0.0.1:35357/v3/auth/tokens\nDEBUG (connectionpool:388) \"POST /v3/auth/tokens HTTP/1.1\" 201 7476\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/b77576d7ea0c45a3a24a8da20dbe983e -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nINFO (connectionpool:208) Starting new HTTP connection (1): 10.0.0.1\nDEBUG (connectionpool:388) \"GET /v2.1/b77576d7ea0c45a3a24a8da20dbe983e HTTP/1.1\" 404 52\nDEBUG (session:277) RESP: [404] Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Length: 52 Content-Type: text/plain; charset=UTF-8 X-Compute-Request-Id: req-06891843-9fe6-432f-b038-2191efd401b0 \nRESP BODY: 404 Not Found\n\nThe resource could not be found.\n\n   \n\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/ -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nDEBUG (connectionpool:388) \"GET /v2.1/ HTTP/1.1\" 200 382\nDEBUG (session:277) RESP: [200] Content-Length: 382 X-Compute-Request-Id: req-732fd6ce-57b0-4858-9740-4bbd9899de6a Vary: X-OpenStack-Nova-API-Version X-Openstack-Nova-Api-Version: 2.1 Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Type: application/json \nRESP BODY: {\"version\": {\"status\": \"CURRENT\", \"updated\": \"2013-07-23T11:33:21Z\", \"links\": [{\"href\": \"http://10.0.0.1:8774/v2.1/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}], \"min_version\": \"2.1\", \"version\": \"2.25\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2.1\"}], \"id\": \"v2.1\"}}\n\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/b77576d7ea0c45a3a24a8da20dbe983e/servers/detail?all_tenants=1 -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-OpenStack-Nova-API-Version: 2.25\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nDEBUG (connectionpool:388) \"GET /v2.1/b77576d7ea0c45a3a24a8da20dbe983e/servers/detail?all_tenants=1 HTTP/1.1\" 500 193\nDEBUG (session:277) RESP: [500] Content-Length: 193 X-Compute-Request-Id: req-071a25d2-3d7d-4d53-b2a5-d33643a39570 Vary: X-OpenStack-Nova-API-Version X-Openstack-Nova-Api-Version: 2.25 Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Type: application/json; charset=UTF-8 \nRESP BODY: {\"computeFault\": {\"message\": \"Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<type 'exceptions.TypeError'>\", \"code\": 500}}\n\nDEBUG (shell:1082) Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 1080, in main\n    OpenStackComputeShell().main(argv)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 1007, in main\n    args.func(self.cs, args)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 1513, in do_list\n    limit=args.limit)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/servers.py\", line 749, in list\n    \"servers\")\n  File \"/usr/lib/python2.7/dist-packages/novaclient/base.py\", line 242, in _list\n    resp, body = self.api.client.get(url)\n  File \"/usr/lib/python2.7/dist-packages/keystoneauth1/adapter.py\", line 173, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 94, in request\n    raise exceptions.from_response(resp, body, url, method)\nClientException: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\n\nFollowing is the nova-api log with relevant info:\n\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions [req-e4be7ec8-1e0f-43ed-a576-099ce0bc32bc e3604e771bfd496b946690bba0474b1b d232f2e610e34d14be8031a0bb4d8b15 - - -] Unexpected exception in API method\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 294, in detail\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 409, in _get_servers\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2129, in get_all\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2179, in _get_instances_by_filters\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     expected_attrs=fields, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 181, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/instance.py\", line 1065, in get_by_filters\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     use_slave=use_slave, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 285, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/instance.py\", line 1049, in _get_by_filters_impl\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/api.py\", line 734, in instance_get_all_by_filters_sort\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 229, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 330, in wrapped\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 2311, in instance_get_all_by_filters_sort\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return _instances_fill_metadata(context, query_prefix.all(), manual_joins)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 2056, in _instances_fill_metadata\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     inst = dict(inst)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 117, in keys\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return [key for key, value in self.iteritems()]\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 109, in iteritems\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return six.iteritems(self._as_dict())\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 101, in _as_dict\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     local = dict((key, value) for key, value in self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 101, in <genexpr>\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     local = dict((key, value) for key, value in self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/six.py\", line 558, in next\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return type(self).__next__(self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 132, in __next__\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return n, getattr(self.model, n)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/models.py\", line 240, in name\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     base_name = CONF.instance_name_template %% info\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions TypeError: %x format: a number is required, not dict\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions \n2017-01-18 06:17:58.691 1248 INFO nova.api.openstack.wsgi [req-e4be7ec8-1e0f-43ed-a576-099ce0bc32bc e3604e771bfd496b946690bba0474b1b d232f2e610e34d14be8031a0bb4d8b15 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1657423", 
    "owner": "None", 
    "id": 1657423, 
    "index": 7894, 
    "openned": "2017-01-18 11:27:26.963544+00:00", 
    "created": "2017-01-18 11:27:26.963544+00:00", 
    "title": "Instances view in Dashboard spawns 'Error: Unable to retrieve instance list.' ", 
    "comments": [
        {
            "content": "I'm running Mitaka on Ubuntu 16.04 and when I try to access Instances list in Dashboard, the following is error is spawned: Error: Unable to retrieve instance list. Same error is spawned for all users.\n\nSame thing happens in CLI:\nnova list --all-tenants\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-30134c69-6c89-4437-9fd7-a2ca7b169ed7)\n\nDebug output of the same command from above:\nnova --debug list --all-tenants\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:35357/v3 -H \"Accept: application/json\" -H \"User-Agent: keystoneauth1/2.4.1 python-requests/2.9.1 CPython/2.7.12\"\nINFO (connectionpool:208) Starting new HTTP connection (1): 10.0.0.1\nDEBUG (connectionpool:388) \"GET /v3 HTTP/1.1\" 200 248\nDEBUG (session:277) RESP: [200] Content-Length: 248 Vary: X-Auth-Token Server: Apache/2.4.18 (Ubuntu) Date: Wed, 18 Jan 2017 11:25:28 GMT x-openstack-request-id: req-43f828d7-4919-4d24-acbf-513c1b7fa496 Content-Type: application/json X-Distribution: Ubuntu \nRESP BODY: {\"version\": {\"status\": \"stable\", \"updated\": \"2016-04-04T00:00:00Z\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.identity-v3+json\"}], \"id\": \"v3.6\", \"links\": [{\"href\": \"http://10.0.0.1:35357/v3/\", \"rel\": \"self\"}]}}\n\nDEBUG (base:165) Making authentication request to http://10.0.0.1:35357/v3/auth/tokens\nDEBUG (connectionpool:388) \"POST /v3/auth/tokens HTTP/1.1\" 201 7476\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/b77576d7ea0c45a3a24a8da20dbe983e -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nINFO (connectionpool:208) Starting new HTTP connection (1): 10.0.0.1\nDEBUG (connectionpool:388) \"GET /v2.1/b77576d7ea0c45a3a24a8da20dbe983e HTTP/1.1\" 404 52\nDEBUG (session:277) RESP: [404] Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Length: 52 Content-Type: text/plain; charset=UTF-8 X-Compute-Request-Id: req-06891843-9fe6-432f-b038-2191efd401b0 \nRESP BODY: 404 Not Found\n\nThe resource could not be found.\n\n   \n\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/ -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nDEBUG (connectionpool:388) \"GET /v2.1/ HTTP/1.1\" 200 382\nDEBUG (session:277) RESP: [200] Content-Length: 382 X-Compute-Request-Id: req-732fd6ce-57b0-4858-9740-4bbd9899de6a Vary: X-OpenStack-Nova-API-Version X-Openstack-Nova-Api-Version: 2.1 Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Type: application/json \nRESP BODY: {\"version\": {\"status\": \"CURRENT\", \"updated\": \"2013-07-23T11:33:21Z\", \"links\": [{\"href\": \"http://10.0.0.1:8774/v2.1/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}], \"min_version\": \"2.1\", \"version\": \"2.25\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2.1\"}], \"id\": \"v2.1\"}}\n\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://10.0.0.1:8774/v2.1/b77576d7ea0c45a3a24a8da20dbe983e/servers/detail?all_tenants=1 -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-OpenStack-Nova-API-Version: 2.25\" -H \"X-Auth-Token: {SHA1}c3bd40d9088aa0e9755d065fa91cea9d5736b361\"\nDEBUG (connectionpool:388) \"GET /v2.1/b77576d7ea0c45a3a24a8da20dbe983e/servers/detail?all_tenants=1 HTTP/1.1\" 500 193\nDEBUG (session:277) RESP: [500] Content-Length: 193 X-Compute-Request-Id: req-071a25d2-3d7d-4d53-b2a5-d33643a39570 Vary: X-OpenStack-Nova-API-Version X-Openstack-Nova-Api-Version: 2.25 Date: Wed, 18 Jan 2017 11:25:33 GMT Content-Type: application/json; charset=UTF-8 \nRESP BODY: {\"computeFault\": {\"message\": \"Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<type 'exceptions.TypeError'>\", \"code\": 500}}\n\nDEBUG (shell:1082) Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 1080, in main\n    OpenStackComputeShell().main(argv)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 1007, in main\n    args.func(self.cs, args)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 1513, in do_list\n    limit=args.limit)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/servers.py\", line 749, in list\n    \"servers\")\n  File \"/usr/lib/python2.7/dist-packages/novaclient/base.py\", line 242, in _list\n    resp, body = self.api.client.get(url)\n  File \"/usr/lib/python2.7/dist-packages/keystoneauth1/adapter.py\", line 173, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 94, in request\n    raise exceptions.from_response(resp, body, url, method)\nClientException: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-071a25d2-3d7d-4d53-b2a5-d33643a39570)\n\nFollowing is the nova-api log with relevant info:\n\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions [req-e4be7ec8-1e0f-43ed-a576-099ce0bc32bc e3604e771bfd496b946690bba0474b1b d232f2e610e34d14be8031a0bb4d8b15 - - -] Unexpected exception in API method\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 294, in detail\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 409, in _get_servers\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2129, in get_all\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 2179, in _get_instances_by_filters\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     expected_attrs=fields, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 181, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/instance.py\", line 1065, in get_by_filters\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     use_slave=use_slave, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 285, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/instance.py\", line 1049, in _get_by_filters_impl\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/api.py\", line 734, in instance_get_all_by_filters_sort\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 229, in wrapper\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 330, in wrapped\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return f(context, *args, **kwargs)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 2311, in instance_get_all_by_filters_sort\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return _instances_fill_metadata(context, query_prefix.all(), manual_joins)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py\", line 2056, in _instances_fill_metadata\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     inst = dict(inst)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 117, in keys\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return [key for key, value in self.iteritems()]\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 109, in iteritems\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return six.iteritems(self._as_dict())\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 101, in _as_dict\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     local = dict((key, value) for key, value in self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 101, in <genexpr>\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     local = dict((key, value) for key, value in self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/six.py\", line 558, in next\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return type(self).__next__(self)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 132, in __next__\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     return n, getattr(self.model, n)\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/models.py\", line 240, in name\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions     base_name = CONF.instance_name_template %% info\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions TypeError: %x format: a number is required, not dict\n2017-01-18 06:17:58.686 1248 ERROR nova.api.openstack.extensions \n2017-01-18 06:17:58.691 1248 INFO nova.api.openstack.wsgi [req-e4be7ec8-1e0f-43ed-a576-099ce0bc32bc e3604e771bfd496b946690bba0474b1b d232f2e610e34d14be8031a0bb4d8b15 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'>", 
            "date_created": "2017-01-18 11:27:26.963544+00:00", 
            "author": "https://api.launchpad.net/1.0/~zeljko-jagust"
        }, 
        {
            "content": "It seems adding the following option to nova.conf (which is of course missing in official guide, like so many other things!!) solves the issue:\n\nlinuxnet_interface_driver = nova.network.linux_net.NeutronLinuxBridgeInterfaceDriver", 
            "date_created": "2017-01-18 14:42:58.196744+00:00", 
            "author": "https://api.launchpad.net/1.0/~zeljko-jagust"
        }, 
        {
            "content": "The TypeError is coming from here:\n\nhttps://github.com/openstack/nova/blob/stable/mitaka/nova/db/sqlalchemy/models.py#L240\n\nSo I don't know what \"linuxnet_interface_driver\" has to do with this.\n\nWhat is the value of your \"instance_name_template\" config option in nova.conf?  The default is \"instance-%08x\" so you must have modified that?\n\nAs for the configuration guide for Mitaka, it's here:\n\nhttp://docs.openstack.org/developer/nova/mitaka/sample_config.html\n\nOr here:\n\nhttp://docs.openstack.org/mitaka/config-reference/compute.html\n\nSo I'm not sure what's missing from the configuration guide.", 
            "date_created": "2017-01-18 23:02:31.968207+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ], 
    "closed": "2017-01-18 23:02:37.463233+00:00"
}