{
    "status": "Invalid", 
    "last_updated": "2012-12-10 15:26:28.788117+00:00", 
    "description": "Using Diablo on Ubuntu 11.10\n\nii  glance                          2011.3-0ubuntu4.1                       OpenStack Image Registry and Delivery Service - Daemons\nii  nova-api                        2011.3-0ubuntu6.2                       OpenStack Compute - API frontend\nii  nova-common                     2011.3-0ubuntu6.2                       OpenStack Compute - common files\nii  nova-compute                    2011.3-0ubuntu6.2                       OpenStack Compute - compute node\nii  nova-compute-kvm                2011.3-0ubuntu6.2                       OpenStack Compute - compute node (KVM)\nii  nova-network                    2011.3-0ubuntu6.2                       OpenStack Compute - Network manager\nii  nova-objectstore                2011.3-0ubuntu6.2                       OpenStack Compute - object store\nii  nova-scheduler                  2011.3-0ubuntu6.2                       OpenStack Compute - virtual machine scheduler\nii  python-glance                   2011.3-0ubuntu4.1                       OpenStack Image Registry and Delivery Service - Python library\nii  python-nova                     2011.3-0ubuntu6.2                       OpenStack Compute Python libraries\nii  python-novaclient               2.6.4~bzr112-0ubuntu1                   client library for OpenStack Compute API\n\neuca2ools      2.0.0~bzr464-0\n\nUsing deprecated_auth in nova.conf\n\nSteps to recreate:\n\n1. Spin up an instance using an account that has appropriate permissions in that project\n2. Createa  new user and add that user to the project as a netadmin\n3. Try to terminate the instance\n\nExpected result:\nNot being able to terminate.  This is correct but...\n\nWhat happens:\nopenstack@ubuntu:~/openstack/user1$ euca-terminate-instances i-0000000c\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nNone: None\n\n\n==> /var/log/nova/nova-api.log <==\n2011-12-08 14:51:50,816 DEBUG nova.auth.manager [-] Looking up user: u'fc227204-a0b1-4491-9c9c-1c45cbf5fa05' from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:277\n2011-12-08 14:51:50,821 DEBUG nova.auth.manager [-] user: User('user1', 'user1') from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:279\n2011-12-08 14:51:50,837 DEBUG nova.signer [-] using _calc_signature_2 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:126\n2011-12-08 14:51:50,838 DEBUG nova.signer [-] query string: AWSAccessKeyId=fc227204-a0b1-4491-9c9c-1c45cbf5fa05%3Aexample&Action=TerminateInstances&InstanceId.1=i-0000000c&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-12-08T14%3A51%3A50Z&Version=2009-11-30 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:142\n2011-12-08 14:51:50,838 DEBUG nova.signer [-] string_to_sign: POST\n172.16.0.1:8773\n/services/Cloud/\nAWSAccessKeyId=fc227204-a0b1-4491-9c9c-1c45cbf5fa05%3Aexample&Action=TerminateInstances&InstanceId.1=i-0000000c&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-12-08T14%3A51%3A50Z&Version=2009-11-30 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:144\n2011-12-08 14:51:50,839 DEBUG nova.signer [-] len(b64)=44 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:147\n2011-12-08 14:51:50,839 DEBUG nova.signer [-] base64 encoded digest: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:148\n2011-12-08 14:51:50,839 DEBUG nova.auth.manager [-] user.secret: 07e4a7f6-0a93-4a7c-98bf-617bc5cd8247 from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:322\n2011-12-08 14:51:50,840 DEBUG nova.auth.manager [-] expected_signature: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:323\n2011-12-08 14:51:50,840 DEBUG nova.auth.manager [-] signature: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:324\n2011-12-08 14:51:50,841 AUDIT nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] Authenticated Request For user1:example)\n2011-12-08 14:51:50,842 DEBUG nova.api [-] action: TerminateInstances from (pid=511) __call__ /usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py:240\n2011-12-08 14:51:50,842 DEBUG nova.api [-] arg: InstanceId.1\t\tval: i-0000000c from (pid=511) __call__ /usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py:242\n2011-12-08 14:51:50,843 AUDIT nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] Unauthorized request for controller=CloudController and action=TerminateInstances\n2011-12-08 14:51:50,843 INFO nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] 0.27693s 172.16.0.253 POST /services/Cloud/ CloudController:TerminateInstances 401 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/plain", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/901707", 
    "owner": "None", 
    "id": 901707, 
    "index": 379, 
    "openned": "2011-12-08 15:13:38.601114+00:00", 
    "created": "2011-12-08 15:13:38.601114+00:00", 
    "title": "Syntax error reported using euca-terminate-instances from unauthorized account", 
    "comments": [
        {
            "content": "Using Diablo on Ubuntu 11.10\n\nii  glance                          2011.3-0ubuntu4.1                       OpenStack Image Registry and Delivery Service - Daemons\nii  nova-api                        2011.3-0ubuntu6.2                       OpenStack Compute - API frontend\nii  nova-common                     2011.3-0ubuntu6.2                       OpenStack Compute - common files\nii  nova-compute                    2011.3-0ubuntu6.2                       OpenStack Compute - compute node\nii  nova-compute-kvm                2011.3-0ubuntu6.2                       OpenStack Compute - compute node (KVM)\nii  nova-network                    2011.3-0ubuntu6.2                       OpenStack Compute - Network manager\nii  nova-objectstore                2011.3-0ubuntu6.2                       OpenStack Compute - object store\nii  nova-scheduler                  2011.3-0ubuntu6.2                       OpenStack Compute - virtual machine scheduler\nii  python-glance                   2011.3-0ubuntu4.1                       OpenStack Image Registry and Delivery Service - Python library\nii  python-nova                     2011.3-0ubuntu6.2                       OpenStack Compute Python libraries\nii  python-novaclient               2.6.4~bzr112-0ubuntu1                   client library for OpenStack Compute API\n\neuca2ools      2.0.0~bzr464-0\n\nUsing deprecated_auth in nova.conf\n\nSteps to recreate:\n\n1. Spin up an instance using an account that has appropriate permissions in that project\n2. Createa  new user and add that user to the project as a netadmin\n3. Try to terminate the instance\n\nExpected result:\nNot being able to terminate.  This is correct but...\n\nWhat happens:\nopenstack@ubuntu:~/openstack/user1$ euca-terminate-instances i-0000000c\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nNone: None\n\n\n==> /var/log/nova/nova-api.log <==\n2011-12-08 14:51:50,816 DEBUG nova.auth.manager [-] Looking up user: u'fc227204-a0b1-4491-9c9c-1c45cbf5fa05' from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:277\n2011-12-08 14:51:50,821 DEBUG nova.auth.manager [-] user: User('user1', 'user1') from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:279\n2011-12-08 14:51:50,837 DEBUG nova.signer [-] using _calc_signature_2 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:126\n2011-12-08 14:51:50,838 DEBUG nova.signer [-] query string: AWSAccessKeyId=fc227204-a0b1-4491-9c9c-1c45cbf5fa05%3Aexample&Action=TerminateInstances&InstanceId.1=i-0000000c&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-12-08T14%3A51%3A50Z&Version=2009-11-30 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:142\n2011-12-08 14:51:50,838 DEBUG nova.signer [-] string_to_sign: POST\n172.16.0.1:8773\n/services/Cloud/\nAWSAccessKeyId=fc227204-a0b1-4491-9c9c-1c45cbf5fa05%3Aexample&Action=TerminateInstances&InstanceId.1=i-0000000c&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2011-12-08T14%3A51%3A50Z&Version=2009-11-30 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:144\n2011-12-08 14:51:50,839 DEBUG nova.signer [-] len(b64)=44 from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:147\n2011-12-08 14:51:50,839 DEBUG nova.signer [-] base64 encoded digest: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) _calc_signature_2 /usr/lib/python2.7/dist-packages/nova/auth/signer.py:148\n2011-12-08 14:51:50,839 DEBUG nova.auth.manager [-] user.secret: 07e4a7f6-0a93-4a7c-98bf-617bc5cd8247 from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:322\n2011-12-08 14:51:50,840 DEBUG nova.auth.manager [-] expected_signature: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:323\n2011-12-08 14:51:50,840 DEBUG nova.auth.manager [-] signature: VLWF8LFUv/FjWN5/0KF9ujP4d16oTzBQpT45rnn6jCE= from (pid=511) authenticate /usr/lib/python2.7/dist-packages/nova/auth/manager.py:324\n2011-12-08 14:51:50,841 AUDIT nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] Authenticated Request For user1:example)\n2011-12-08 14:51:50,842 DEBUG nova.api [-] action: TerminateInstances from (pid=511) __call__ /usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py:240\n2011-12-08 14:51:50,842 DEBUG nova.api [-] arg: InstanceId.1\t\tval: i-0000000c from (pid=511) __call__ /usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py:242\n2011-12-08 14:51:50,843 AUDIT nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] Unauthorized request for controller=CloudController and action=TerminateInstances\n2011-12-08 14:51:50,843 INFO nova.api [e5bb915b-af7f-4493-aaea-e4b0a3a8a2fe user1 example] 0.27693s 172.16.0.253 POST /services/Cloud/ CloudController:TerminateInstances 401 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/plain", 
            "date_created": "2011-12-08 15:13:38.601114+00:00", 
            "author": "https://api.launchpad.net/1.0/~kevin-linuxservices"
        }, 
        {
            "content": "You sure that's a Nova issue, rather than a euca2ools one ? What does the same command return when run against EC2 ?", 
            "date_created": "2011-12-13 19:59:36.539552+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Hi Thierry - good point.\nI've just checked this out with Amazon and I get a graceful failure.\n\nopenstack@ubuntu:~/openstack$ euca-terminate-instances i-1cee6e55\nAuthFailure: AWS was not able to validate the provided access credentials\n\nJust looks like euca-terminate-instances knows how to handle the specific message returned from AWS, but Nova's output causes it to fail ungracefully.\n\nHappy for direction on whether this is a euca2ools bug or Nova - depends on whether you would expect Nova to behave exactly like AWS?", 
            "date_created": "2011-12-13 20:31:19.267936+00:00", 
            "author": "https://api.launchpad.net/1.0/~kevin-linuxservices"
        }, 
        {
            "content": "This bug is probably no longer pertinent.  Using TRUNK (with keystone), here are the steps I used:\n\n1. Spin up an instance using an account that has appropriate permissions ('Member' role) in that project\n2. Createa new user and add that user to the project (tenant) as a 'Member'.\n3. Terminated the instance successfully using euca-terminate-instance, and verified successful without error", 
            "date_created": "2012-06-29 04:37:53.962857+00:00", 
            "author": "https://api.launchpad.net/1.0/~jtran"
        }, 
        {
            "content": "Marking as invalid per last comment from @jtran", 
            "date_created": "2012-12-10 15:26:28.057633+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ], 
    "closed": "2012-12-10 15:26:08.791153+00:00"
}