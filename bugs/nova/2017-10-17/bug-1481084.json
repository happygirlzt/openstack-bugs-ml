{
    "status": "Fix Released", 
    "last_updated": "2015-10-15 09:05:43.421020+00:00", 
    "description": "In the Sahara project, we have been generating public keys to use with nova keypair creation for some time.  These keys have a key comment of the form \"Generated by Sahara\"\n\nThis has worked until recently.  However, it fails currently as follows:\n\n$ more ~/public_key \nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYwUk/fuNiNoseN5tgKt2NsfxeZIE7cC4bcGeJ3WacY8Ss2s/vw1WrBwoicd4cjwkpmrxQkR1d1vBzLyrE/ovHStyu1Gv/Os+wVB0j64AKlG6MZFMeJVuP9M+O0uSqBuEYhzaTvKofiVcrLJat7bJ9S8\nMpTWj7ZXRbKKD/+pT1jxll4vCHKLo9caazl7vFI/hRcqMWAr+oYNZYh1BZeNxMWGtEgf11zHiStR1tvs/4CEstajPWWlkHcVeUuGgs8/+kNToUZ22i8kORp8ZFwp11pvFtieAYtBFBWWrze2U1irct34JAHTmemk8SZ/RmN9tLpIP8BspFdWnFylzVyuPZ\n Generated by Sahara\n\n(openstack) keypair create --public-key ~/public_key bob\nERROR: openstack Keypair data is invalid: failed to generate fingerprint (HTTP 400) (Request-ID: req-370e6a3a-d01d-44a4-8a10-160282ec9488)\n\nRemoving or replacing the spaces in the key comment fixes the problem (or hides it)\n\nThis seems to be happening because usr/lib/python2.7/site-packages/cryptography/hazmat/primitives/serialization.py(36)load_ssh_public_key() is seeing the whole key and splitting on spaces.  So the key comment is throwing off the key component count.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1481084", 
    "owner": "https://api.launchpad.net/1.0/~dims-v", 
    "id": 1481084, 
    "index": 6949, 
    "openned": "2015-08-03 20:58:57.705314+00:00", 
    "created": "2015-08-03 20:58:57.705314+00:00", 
    "title": "Keypair creation fails when ssh public key comment contains spaces", 
    "comments": [
        {
            "content": "In the Sahara project, we have been generating public keys to use with nova keypair creation for some time.  These keys have a key comment of the form \"Generated by Sahara\"\n\nThis has worked until recently.  However, it fails currently as follows:\n\n$ more ~/public_key \nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYwUk/fuNiNoseN5tgKt2NsfxeZIE7cC4bcGeJ3WacY8Ss2s/vw1WrBwoicd4cjwkpmrxQkR1d1vBzLyrE/ovHStyu1Gv/Os+wVB0j64AKlG6MZFMeJVuP9M+O0uSqBuEYhzaTvKofiVcrLJat7bJ9S8\nMpTWj7ZXRbKKD/+pT1jxll4vCHKLo9caazl7vFI/hRcqMWAr+oYNZYh1BZeNxMWGtEgf11zHiStR1tvs/4CEstajPWWlkHcVeUuGgs8/+kNToUZ22i8kORp8ZFwp11pvFtieAYtBFBWWrze2U1irct34JAHTmemk8SZ/RmN9tLpIP8BspFdWnFylzVyuPZ\n Generated by Sahara\n\n(openstack) keypair create --public-key ~/public_key bob\nERROR: openstack Keypair data is invalid: failed to generate fingerprint (HTTP 400) (Request-ID: req-370e6a3a-d01d-44a4-8a10-160282ec9488)\n\nRemoving or replacing the spaces in the key comment fixes the problem (or hides it)\n\nThis seems to be happening because usr/lib/python2.7/site-packages/cryptography/hazmat/primitives/serialization.py(36)load_ssh_public_key() is seeing the whole key and splitting on spaces.  So the key comment is throwing off the key component count.", 
            "date_created": "2015-08-03 20:58:57.705314+00:00", 
            "author": "https://api.launchpad.net/1.0/~tmckay"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/208661", 
            "date_created": "2015-08-03 21:28:26.621116+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/208661\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=42debc4cfdf22f72259e858d1e3e3a2ec5cf2bdd\nSubmitter: Jenkins\nBranch:    master\n\ncommit 42debc4cfdf22f72259e858d1e3e3a2ec5cf2bdd\nAuthor: Davanum Srinivas <email address hidden>\nDate:   Mon Aug 3 17:26:29 2015 -0400\n\n    Test cases for better handling of SSH key comments\n    \n    sshd man page says:\n    \"The optional comment field continues to the end\n    of the line, and is not used.\"\n    http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8?query=sshd&sec=8\n    \n    This bug has been fixed in upstream\n    https://github.com/pyca/cryptography/issues/2199\n    \n    Closes-Bug: #1481084\n    Depends-On: I28b7ab2e49ef4063a33c6122ea8355a16c3105a5\n    Change-Id: Ic157961a4282f0d54d4682d9374c170a66ddde5c\n", 
            "date_created": "2015-09-14 22:02:19.282776+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-09-24 07:04:46.595652+00:00"
}