{
    "status": "Invalid", 
    "last_updated": "2011-10-21 12:25:04.368283+00:00", 
    "description": "Using the instructions in https://github.com/vishvananda/novascript, things work fine when using lucid, but creating an instance does not work on oneiric. The error is \n\nlibvir: QEMU error : internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n\nlucid seems to be using libvirt-bin version 0.8.8-1ubuntu3~ppalucid1 while oneiric uses 0.9.2-4ubuntu13\n\nHere is the transcript:\n\n2011-09-14 16:11:16,305 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -c /dev/nbd15 /root/nova/instances/instance-00000001/disk from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:17,321 DEBUG nova.utils [-] Running cmd (subprocess): sudo tune2fs -c 0 -i 0 /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:17,932 DEBUG nova.utils [-] Running cmd (subprocess): sudo mount /dev/nbd15 /tmp/tmpnvONQd from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,006 DEBUG nova.utils [-] Running cmd (subprocess): sudo mkdir -p /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,016 DEBUG nova.utils [-] Running cmd (subprocess): sudo chown root /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,027 DEBUG nova.utils [-] Running cmd (subprocess): sudo chmod 700 /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,037 DEBUG nova.utils [-] Running cmd (subprocess): sudo tee -a /tmp/tmpnvONQd/root/.ssh/authorized_keys from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,047 DEBUG nova.utils [-] Running cmd (subprocess): sudo umount /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,774 DEBUG nova.utils [-] Running cmd (subprocess): rmdir /tmp/tmpnvONQd from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,780 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\nlibvir: QEMU error : internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n2011-09-14 16:11:24,290 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/root/nova/nova/exception.py\", line 98, in wrapped\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/root/nova/nova/virt/libvirt/connection.py\", line 599, in spawn\n(nova.exception): TRACE:     domain = self._create_new_domain(xml)\n(nova.exception): TRACE:   File \"/root/nova/nova/virt/libvirt/connection.py\", line 1203, in _create_new_domain\n(nova.exception): TRACE:     domain.createWithFlags(launch_flags)\n(nova.exception): TRACE:   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 372, in createWithFlags\n(nova.exception): TRACE:     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n(nova.exception): TRACE: libvirtError: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.exception): TRACE: \n(nova.exception): TRACE: \n2011-09-14 16:11:24,292 ERROR nova.compute.manager [-] Instance '1' failed to spawn. Is virtualization enabled in the BIOS? Details: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/root/nova/nova/compute/manager.py\", line 424, in _run_instance\n(nova.compute.manager): TRACE:     network_info, block_device_info)\n(nova.compute.manager): TRACE:   File \"/root/nova/nova/exception.py\", line 129, in wrapped\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.compute.manager): TRACE: \n(nova.compute.manager): TRACE:", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/850364", 
    "owner": "None", 
    "id": 850364, 
    "index": 3542, 
    "openned": "2011-09-14 20:21:32.866242+00:00", 
    "created": "2011-09-14 20:21:32.866242+00:00", 
    "title": "Creating instance fails on oneiric", 
    "comments": [
        {
            "content": "Using the instructions in https://github.com/vishvananda/novascript, things work fine when using lucid, but creating an instance does not work on oneiric. The error is \n\nlibvir: QEMU error : internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n\nlucid seems to be using libvirt-bin version 0.8.8-1ubuntu3~ppalucid1 while oneiric uses 0.9.2-4ubuntu13\n\nHere is the transcript:\n\n2011-09-14 16:11:16,305 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -c /dev/nbd15 /root/nova/instances/instance-00000001/disk from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:17,321 DEBUG nova.utils [-] Running cmd (subprocess): sudo tune2fs -c 0 -i 0 /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:17,932 DEBUG nova.utils [-] Running cmd (subprocess): sudo mount /dev/nbd15 /tmp/tmpnvONQd from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,006 DEBUG nova.utils [-] Running cmd (subprocess): sudo mkdir -p /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,016 DEBUG nova.utils [-] Running cmd (subprocess): sudo chown root /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,027 DEBUG nova.utils [-] Running cmd (subprocess): sudo chmod 700 /tmp/tmpnvONQd/root/.ssh from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,037 DEBUG nova.utils [-] Running cmd (subprocess): sudo tee -a /tmp/tmpnvONQd/root/.ssh/authorized_keys from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,047 DEBUG nova.utils [-] Running cmd (subprocess): sudo umount /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,774 DEBUG nova.utils [-] Running cmd (subprocess): rmdir /tmp/tmpnvONQd from (pid=11656) execute /root/nova/nova/utils.py:165\n2011-09-14 16:11:18,780 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=11656) execute /root/nova/nova/utils.py:165\nlibvir: QEMU error : internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n2011-09-14 16:11:24,290 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/root/nova/nova/exception.py\", line 98, in wrapped\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/root/nova/nova/virt/libvirt/connection.py\", line 599, in spawn\n(nova.exception): TRACE:     domain = self._create_new_domain(xml)\n(nova.exception): TRACE:   File \"/root/nova/nova/virt/libvirt/connection.py\", line 1203, in _create_new_domain\n(nova.exception): TRACE:     domain.createWithFlags(launch_flags)\n(nova.exception): TRACE:   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 372, in createWithFlags\n(nova.exception): TRACE:     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n(nova.exception): TRACE: libvirtError: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.exception): TRACE: \n(nova.exception): TRACE: \n2011-09-14 16:11:24,292 ERROR nova.compute.manager [-] Instance '1' failed to spawn. Is virtualization enabled in the BIOS? Details: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/root/nova/nova/compute/manager.py\", line 424, in _run_instance\n(nova.compute.manager): TRACE:     network_info, block_device_info)\n(nova.compute.manager): TRACE:   File \"/root/nova/nova/exception.py\", line 129, in wrapped\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: internal error Process exited while reading console log output: chardev: opening backend \"file\" failed\n(nova.compute.manager): TRACE: \n(nova.compute.manager): TRACE:", 
            "date_created": "2011-09-14 20:21:32.866242+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-kranz"
        }, 
        {
            "content": "This error does not occur when loading from packages instead of source.", 
            "date_created": "2011-09-20 20:14:35.765701+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-kranz"
        }, 
        {
            "content": "If it works from packages, that would be a bug in novascript -- which was not kept up to date with the changes in nova.", 
            "date_created": "2011-10-21 12:25:02.719448+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2011-10-21 12:25:03.476877+00:00"
}