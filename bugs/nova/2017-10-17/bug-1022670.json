{
    "status": "Fix Released", 
    "last_updated": "2012-09-27 15:42:44.738024+00:00", 
    "description": "Snapshots libvirt tests (5 tests in total) fails due to bogus path with no permissions to copy the snapshot.\n\nSample:\n\nERROR: test_snapshot_no_original_image (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ghe/github/openstack/nova/nova/test.py\", line 85, in _skipper\n    func(*args, **kw)\n  File \"/home/ghe/github/openstack/nova/nova/tests/test_libvirt.py\", line 1120, in test_snapshot_no_original_image\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/ghe/github/openstack/nova/nova/exception.py\", line 117, in wrapped\n    temp_level, payload)\n  File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n    self.gen.next()\n  File \"/home/ghe/github/openstack/nova/nova/exception.py\", line 92, in wrapped\n    return f(*args, **kw)\n  File \"/home/ghe/github/openstack/nova/nova/virt/libvirt/driver.py\", line 803, in snapshot\n    with utils.tempdir(dir=snapshot_directory) as tmpdir:\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n    return self.gen.next()\n  File \"/home/ghe/github/openstack/nova/nova/utils.py\", line 1197, in tempdir\n    tmpdir = tempfile.mkdtemp(**kwargs)\n  File \"/usr/lib/python2.7/tempfile.py\", line 325, in mkdtemp\n    _os.mkdir(file, 0700)\nOSError: [Errno 2] No such file or directory: '/snapshots/tmpsoUEEi'\n-------------------- >> begin captured logging << --------------------\nnova.tests.image.fake: WARNING: Unable to find image id 661122aa-1234-dede-fefe-babababababa.  Have images: {'70a599e0-31e7-49b7-b260-868f441e862b': {'status': 'active', 'name': 'fakeimage7', 'deleted': False, 'container_format': 'ova', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'vhd', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '70a599e0-31e7-49b7-b260-868f441e862b', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'auto_disk_config': 'True', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, '155d900f-4e14-4e4c-a73d-069cbf4541e6': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'raw', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'raw', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '155d900f-4e14-4e4c-a73d-069cbf4541e6', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, 'a2459075-d96c-40d5-893e-577ff92e721c': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'a2459075-d96c-40d5-893e-577ff92e721c', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}, 'a440c04b-79fa-479c-bed1-0b816eaec379': {'status': 'active', 'name': 'fakeimage6', 'deleted': False, 'container_format': 'ova', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'vhd', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'a440c04b-79fa-479c-bed1-0b816eaec379', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'auto_disk_config': 'False', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, 'c905cedb-7281-47e4-8a62-f26bc5fc4c77': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'c905cedb-7281-47e4-8a62-f26bc5fc4c77', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': '155d900f-4e14-4e4c-a73d-069cbf4541e6', 'ramdisk_id': None}}, '3acdfcbb-536e-488c-adf8-fa9361680974': {'status': 'creating', 'is_public': False, 'properties': {'instance_id': 1, 'user_id': 'None'}, 'id': '3acdfcbb-536e-488c-adf8-fa9361680974', 'name': 'test-snap'}, 'cedef40a-ed67-4d10-800e-17455edce175': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'cedef40a-ed67-4d10-800e-17455edce175', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}, '76fa36fc-c930-4bf3-8c8a-ea2a2420deb6': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': None, 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': None, 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '76fa36fc-c930-4bf3-8c8a-ea2a2420deb6', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}}\n--------------------- >> end captured logging << ---------------------", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1022670", 
    "owner": "https://api.launchpad.net/1.0/~ghe.rivero", 
    "id": 1022670, 
    "index": 4199, 
    "openned": "2012-07-09 17:59:30.261507+00:00", 
    "created": "2012-07-09 17:59:30.261507+00:00", 
    "title": "snapshots tests failing", 
    "comments": [
        {
            "content": "Snapshots libvirt tests (5 tests in total) fails due to bogus path with no permissions to copy the snapshot.\n\nSample:\n\nERROR: test_snapshot_no_original_image (nova.tests.test_libvirt.LibvirtConnTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ghe/github/openstack/nova/nova/test.py\", line 85, in _skipper\n    func(*args, **kw)\n  File \"/home/ghe/github/openstack/nova/nova/tests/test_libvirt.py\", line 1120, in test_snapshot_no_original_image\n    conn.snapshot(self.context, instance_ref, recv_meta['id'])\n  File \"/home/ghe/github/openstack/nova/nova/exception.py\", line 117, in wrapped\n    temp_level, payload)\n  File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n    self.gen.next()\n  File \"/home/ghe/github/openstack/nova/nova/exception.py\", line 92, in wrapped\n    return f(*args, **kw)\n  File \"/home/ghe/github/openstack/nova/nova/virt/libvirt/driver.py\", line 803, in snapshot\n    with utils.tempdir(dir=snapshot_directory) as tmpdir:\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n    return self.gen.next()\n  File \"/home/ghe/github/openstack/nova/nova/utils.py\", line 1197, in tempdir\n    tmpdir = tempfile.mkdtemp(**kwargs)\n  File \"/usr/lib/python2.7/tempfile.py\", line 325, in mkdtemp\n    _os.mkdir(file, 0700)\nOSError: [Errno 2] No such file or directory: '/snapshots/tmpsoUEEi'\n-------------------- >> begin captured logging << --------------------\nnova.tests.image.fake: WARNING: Unable to find image id 661122aa-1234-dede-fefe-babababababa.  Have images: {'70a599e0-31e7-49b7-b260-868f441e862b': {'status': 'active', 'name': 'fakeimage7', 'deleted': False, 'container_format': 'ova', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'vhd', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '70a599e0-31e7-49b7-b260-868f441e862b', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'auto_disk_config': 'True', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, '155d900f-4e14-4e4c-a73d-069cbf4541e6': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'raw', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'raw', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '155d900f-4e14-4e4c-a73d-069cbf4541e6', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, 'a2459075-d96c-40d5-893e-577ff92e721c': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'a2459075-d96c-40d5-893e-577ff92e721c', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}, 'a440c04b-79fa-479c-bed1-0b816eaec379': {'status': 'active', 'name': 'fakeimage6', 'deleted': False, 'container_format': 'ova', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'vhd', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'a440c04b-79fa-479c-bed1-0b816eaec379', 'is_public': False, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'auto_disk_config': 'False', 'ramdisk_id': 'nokernel', 'architecture': 'x86_64'}}, 'c905cedb-7281-47e4-8a62-f26bc5fc4c77': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'c905cedb-7281-47e4-8a62-f26bc5fc4c77', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': '155d900f-4e14-4e4c-a73d-069cbf4541e6', 'ramdisk_id': None}}, '3acdfcbb-536e-488c-adf8-fa9361680974': {'status': 'creating', 'is_public': False, 'properties': {'instance_id': 1, 'user_id': 'None'}, 'id': '3acdfcbb-536e-488c-adf8-fa9361680974', 'name': 'test-snap'}, 'cedef40a-ed67-4d10-800e-17455edce175': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': 'ami', 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': 'ami', 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': 'cedef40a-ed67-4d10-800e-17455edce175', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}, '76fa36fc-c930-4bf3-8c8a-ea2a2420deb6': {'status': 'active', 'name': 'fakeimage123456', 'deleted': False, 'container_format': None, 'created_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'disk_format': None, 'updated_at': datetime.datetime(2011, 1, 1, 1, 2, 3), 'id': '76fa36fc-c930-4bf3-8c8a-ea2a2420deb6', 'is_public': True, 'deleted_at': None, 'properties': {'kernel_id': 'nokernel', 'ramdisk_id': 'nokernel'}}}\n--------------------- >> end captured logging << ---------------------", 
            "date_created": "2012-07-09 17:59:30.261507+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghe.rivero"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/9532", 
            "date_created": "2012-07-09 18:07:12.144205+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/9532\nCommitted: http://github.com/openstack/nova/commit/5526fb6db239677fead7bfbff8b2a6672bba6367\nSubmitter: Jenkins\nBranch:    master\n\ncommit 5526fb6db239677fead7bfbff8b2a6672bba6367\nAuthor: Ghe Rivero <email address hidden>\nDate:   Mon Jul 9 20:02:44 2012 +0200\n\n    Fix snapshots tests failing\n    bug 1022670\n    \n    When running snapshot test, FLAGS.instances_path is defined as '',\n    with snapshot_directory='/snapshots' which will fail to to permissions errors.\n    \n    Modified class LibvirtConnTestCase to use libvirt_snapshots_directory=''\n    \n    Change-Id: I930e4f30ddffcf66c58312e92f0ae368e770e438\n", 
            "date_created": "2012-07-13 22:33:15.655942+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-08-16 07:43:17.932582+00:00"
}