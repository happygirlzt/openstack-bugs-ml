{
    "status": "Fix Released", 
    "last_updated": "2017-06-16 12:13:54.048625+00:00", 
    "description": "2015-10-12 10:36:17.470 INFO nova.virt.vmwareapi.vmops [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Using config drive for instance\n/usr/local/lib/python2.7/dist-packages/urllib3/util/ssl_.py:100: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n2015-10-12 10:36:17.819 ERROR oslo_vmware.rw_handles [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles Traceback (most recent call last):\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/oslo_vmware/rw_handles.py\", line 276, in write\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     self._file_handle.send(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/lib/python2.7/httplib.py\", line 798, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     self.sock.sendall(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 168, in sendall\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     v = self.send(data_to_send)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 143, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     super(GreenSSLSocket, self).send, data, flags)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 110, in _call_trampolining\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     return func(*a, **kw)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/lib/python2.7/ssl.py\", line 198, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     v = self._sslobj.write(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles error: [Errno 32] Broken pipe\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles \n2015-10-12 10:36:17.833 ERROR nova.virt.vmwareapi.vmops [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Creating config drive failed with error: Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\nCause: [Errno 32] Broken pipe\n2015-10-12 10:36:17.834 ERROR nova.compute.manager [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Instance failed to spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Traceback (most recent call last):\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2172, in _build_resources\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     yield resources\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2019, in _build_and_run_instance\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     block_device_info=block_device_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 390, in spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     admin_password, network_info, block_device_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 759, in spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     injected_files, admin_password, network_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 242, in _configure_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     cookies)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 813, in _create_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     e, instance=instance)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 195, in __exit__\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     six.reraise(self.type_, self.value, self.tb)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 808, in _create_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     file_path=upload_iso_path)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/images.py\", line 248, in upload_iso_to_datastore\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     write_file_handle.write(data)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/usr/local/lib/python2.7/dist-packages/oslo_vmware/rw_handles.py\", line 289, in write\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     raise exceptions.VimException(excep_msg, excep)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] VimException: Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Cause: [Errno 32] Broken pipe\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] \n2015-10-12 10:36:17.846 INFO nova.compute.manager [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Terminating instance", 
    "tags": [
        "vmware"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1505318", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1505318, 
    "index": 1827, 
    "openned": "2015-10-12 17:38:10.336954+00:00", 
    "created": "2015-10-12 17:38:10.336954+00:00", 
    "title": "VMware: fail to attach config drive when cluster is in a folder", 
    "comments": [
        {
            "content": "2015-10-12 10:36:17.470 INFO nova.virt.vmwareapi.vmops [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Using config drive for instance\n/usr/local/lib/python2.7/dist-packages/urllib3/util/ssl_.py:100: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n2015-10-12 10:36:17.819 ERROR oslo_vmware.rw_handles [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles Traceback (most recent call last):\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/oslo_vmware/rw_handles.py\", line 276, in write\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     self._file_handle.send(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/lib/python2.7/httplib.py\", line 798, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     self.sock.sendall(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 168, in sendall\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     v = self.send(data_to_send)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 143, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     super(GreenSSLSocket, self).send, data, flags)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/local/lib/python2.7/dist-packages/eventlet/green/ssl.py\", line 110, in _call_trampolining\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     return func(*a, **kw)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles   File \"/usr/lib/python2.7/ssl.py\", line 198, in send\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles     v = self._sslobj.write(data)\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles error: [Errno 32] Broken pipe\n2015-10-12 10:36:17.819 TRACE oslo_vmware.rw_handles \n2015-10-12 10:36:17.833 ERROR nova.virt.vmwareapi.vmops [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Creating config drive failed with error: Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\nCause: [Errno 32] Broken pipe\n2015-10-12 10:36:17.834 ERROR nova.compute.manager [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Instance failed to spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Traceback (most recent call last):\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2172, in _build_resources\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     yield resources\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2019, in _build_and_run_instance\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     block_device_info=block_device_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 390, in spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     admin_password, network_info, block_device_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 759, in spawn\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     injected_files, admin_password, network_info)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 242, in _configure_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     cookies)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 813, in _create_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     e, instance=instance)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 195, in __exit__\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     six.reraise(self.type_, self.value, self.tb)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 808, in _create_config_drive\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     file_path=upload_iso_path)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/opt/stack/nova/nova/virt/vmwareapi/images.py\", line 248, in upload_iso_to_datastore\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     write_file_handle.write(data)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]   File \"/usr/local/lib/python2.7/dist-packages/oslo_vmware/rw_handles.py\", line 289, in write\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f]     raise exceptions.VimException(excep_msg, excep)\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] VimException: Error occurred while writing data to https://10.161.64.148:443/folder/bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f/configdrive.iso?dsName=vdnetSharedStorage&dcPath=os-datacenter.\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Cause: [Errno 32] Broken pipe\n2015-10-12 10:36:17.834 TRACE nova.compute.manager [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] \n2015-10-12 10:36:17.846 INFO nova.compute.manager [req-85b5ece9-2f07-4c6d-ba63-307e9941b191 demo demo] [instance: bfa0cfd0-ddb7-4be5-a06d-2bc38ef9990f] Terminating instance", 
            "date_created": "2015-10-12 17:38:10.336954+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/233751", 
            "date_created": "2015-10-12 17:54:12.488883+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/233751\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=71b8d31233257e9b658ab18f222d91c16fc7d495\nSubmitter: Jenkins\nBranch:    master\n\ncommit 71b8d31233257e9b658ab18f222d91c16fc7d495\nAuthor: Gary Kotton <email address hidden>\nDate:   Mon Oct 12 10:50:50 2015 -0700\n\n    VMware: fix bug for config drive when inventory folder is used\n    \n    Config drive attachment fails if the datacenter is in an\n    inventory folder.\n    \n    Change-Id: I5f0123f6af3af9c06e27f7c2d133f3cd1bb07fd6\n    Closes-bug: #1505318\n", 
            "date_created": "2015-10-13 11:35:44.041337+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/liberty\nReview: https://review.openstack.org/259693", 
            "date_created": "2015-12-19 09:55:49.158368+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/259693\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=b8c20a8a3aec04a2d38f75978586e5e788a5c959\nSubmitter: Jenkins\nBranch:    stable/liberty\n\ncommit b8c20a8a3aec04a2d38f75978586e5e788a5c959\nAuthor: Gary Kotton <email address hidden>\nDate:   Mon Oct 12 10:50:50 2015 -0700\n\n    VMware: fix bug for config drive when inventory folder is used\n    \n    Config drive attachment fails if the datacenter is in an\n    inventory folder.\n    \n    Change-Id: I5f0123f6af3af9c06e27f7c2d133f3cd1bb07fd6\n    Closes-bug: #1505318\n    (cherry picked from commit 71b8d31233257e9b658ab18f222d91c16fc7d495)\n", 
            "date_created": "2016-01-11 23:15:06.576148+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2015-12-03 21:33:24.163576+00:00"
}