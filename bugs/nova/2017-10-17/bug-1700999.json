{
    "status": "Confirmed", 
    "last_updated": "2017-07-04 12:28:08.787552+00:00", 
    "description": "- [X] This doc is inaccurate in this way:\n\nHi ,\n\nPlease MOVE the quoted section below from : \n\nhttps://docs.openstack.org/ocata/install-guide-rdo/nova-controller-install.html#install-and-configure-components\n\nTo: \n\nhttps://docs.openstack.org/ocata/install-guide-rdo/nova-verify.html (before no.5).\n\nreason: \n\nWhen the patch is done at the original location it breaks the openstack client cli , breaking openstack configuration cli (openstack user create ...etc.):\n\ndetails further down ...\n\n\"\"\"\n\n\u00a0\u00a0\u00a0\u00a0Due to a packaging bug, you must enable access to the Placement API by adding the following configuration to /etc/httpd/conf.d/00-nova-placement-api.conf:\n\n\u00a0\u00a0\u00a0\u00a0<Directory /usr/bin>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<IfVersion >= 2.4>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Require all granted\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</IfVersion>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<IfVersion < 2.4>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Order allow,deny\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Allow from all\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</IfVersion>\n\u00a0\u00a0\u00a0\u00a0</Directory>\n\n\u00a0\u00a0\u00a0\u00a0Restart the httpd service:\n\n\u00a0\u00a0\u00a0\u00a0# systemctl restart httpd\n\n\"\"\"\n\nwhen you do add this <directory> section to the named httpd conf file. it causes the following error on all openstack client cli :\n\n#openstack endpoint list;openstack catalog list\nDiscovering versions from the identity service failed when creating the password plugin. Attempting to determine version from URL.\nInternal Server Error (HTTP 500)\nDiscovering versions from the identity service failed when creating the password plugin. Attempting to determine version from URL.\nInternal Server Error (HTTP 500)\n\nBug suggested solution :\nPlease MOVE the mentioned section to https://docs.openstack.org/ocata/install-guide-rdo/nova-verify.html (before no.5 - nova-status upgrade check).\nAdding the httpd section patch at this step works flawlessly.\n\nThe solution to the original bug placement as is :\nUndo && redo the following part of the identity service install :\nhttps://docs.openstack.org/ocata/install-guide-rdo/keystone-install.html\n\nopenstack vers. :\n#rpm -qa |grep openstack-nova\nopenstack-nova-common-15.0.3-2.el7.noarch\nopenstack-nova-conductor-15.0.3-2.el7.noarch\nopenstack-nova-api-15.0.3-2.el7.noarch\nopenstack-nova-console-15.0.3-2.el7.noarch\nopenstack-nova-scheduler-15.0.3-2.el7.noarch\nopenstack-nova-novncproxy-15.0.3-2.el7.noarch\n\nOS details :\nCentOS Linux release 7.3.1611 (Core)\nDerived from Red Hat Enterprise Linux 7.3 (Source)\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n\nCentOS Linux release 7.3.1611 (Core)\nCentOS Linux release 7.3.1611 (Core)\ncpe:/o:centos:centos:7\n\n-----------------------------------\nRelease: 15.0.0 on 2017-06-22 12:09\nSHA: 33b12839643984b75465df265ee355683e40c6cf\nSource: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/install-guide/source/nova-controller-install.rst\nURL: https://docs.openstack.org/ocata/install-guide-rdo/nova-controller-install.html", 
    "tags": [
        "httpd", 
        "install", 
        "install-guide", 
        "nova"
    ], 
    "importance": "High", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1700999", 
    "owner": "None", 
    "id": 1700999, 
    "index": 2092, 
    "openned": "2017-06-28 14:54:12.060227+00:00", 
    "created": "2017-06-28 14:54:12.060227+00:00", 
    "title": "during nova service install ,an unneeded httpd conf bug fix causes openstack client cli crash", 
    "comments": [
        {
            "content": "\n\n- [X] This doc is inaccurate in this way: \n\n\nplease remove the section below , it breaks the openstack client cli : \ndetails further down ...\n\n\n\"\"\"\n\n    Due to a packaging bug, you must enable access to the Placement API by adding the following configuration to /etc/httpd/conf.d/00-nova-placement-api.conf:\n\n    <Directory /usr/bin>\n       <IfVersion >= 2.4>\n          Require all granted\n       </IfVersion>\n       <IfVersion < 2.4>\n          Order allow,deny\n          Allow from all\n       </IfVersion>\n    </Directory>\n\n    Restart the httpd service:\n\n    # systemctl restart httpd\n\n\"\"\"\n\nthis bug is for version nova packages ver.15.0.0,  the current packages which are supplied by : yum install centos-release-openstack-ocata on centos7.3 are version \n15.0.3 , for the latest versions this bug is fixed.\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1430540\n\nfurthermore , when you do add this <directory> section to the named httpd conf file. it causes the following error on all openstack client cli : \n\n#openstack endpoint list;openstack catalog list\nDiscovering versions from the identity service failed when creating the password plugin. Attempting to determine version from URL.\nInternal Server Error (HTTP 500)\nDiscovering versions from the identity service failed when creating the password plugin. Attempting to determine version from URL.\nInternal Server Error (HTTP 500)\n\n\nThe solution is to undo && redo the following part of the identity service install : \nhttps://docs.openstack.org/ocata/install-guide-rdo/keystone-install.html\n\nOS details : \nCentOS Linux release 7.3.1611 (Core) \nDerived from Red Hat Enterprise Linux 7.3 (Source)\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n\nCentOS Linux release 7.3.1611 (Core) \nCentOS Linux release 7.3.1611 (Core) \ncpe:/o:centos:centos:7\n\n\n\n\n\n-----------------------------------\nRelease: 15.0.0 on 2017-06-22 12:09\nSHA: 33b12839643984b75465df265ee355683e40c6cf\nSource: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/install-guide/source/nova-controller-install.rst\nURL: https://docs.openstack.org/ocata/install-guide-rdo/nova-controller-install.html", 
            "date_created": "2017-06-28 14:54:12.060227+00:00", 
            "author": "https://api.launchpad.net/1.0/~pkomarov"
        }, 
        {
            "content": "The content in question is being moved to the nova repository, see https://review.openstack.org/#/c/477488/.\r\n\r\nI'm also not sure about the suggested fix, the nova placement configuration is not a verification step.", 
            "date_created": "2017-07-04 12:28:02.650159+00:00", 
            "author": "https://api.launchpad.net/1.0/~pmkovar"
        }
    ]
}