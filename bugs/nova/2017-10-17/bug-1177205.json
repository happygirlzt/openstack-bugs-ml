{
    "status": "Invalid", 
    "last_updated": "2013-05-08 20:45:58.322999+00:00", 
    "description": "The instance fault['message'] is displaying exception class, the detail message that is thrown from the exception class, and also the stack trace logs.\n\nWhen user run cli command like \"nova show image-name\" it will also show the stack trace logs as below example. The stack trace logs in not necessary here. \n\nMy proposal is that the fault messa \n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nexample:                                                                                                                                                                                                                                             |\n| fault                               | {u'message': u'PowerVMImageCreationFailed', u'code': 500, u'details': u'Image creation failed on PowerVM                                                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 816, in _run_instance                                                                                                                                                    |\n|                                     |     set_access_ip=set_access_ip)                                                                                                                                                                                                                 |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1081, in _spawn                                                                                                                                                          |\n|                                     |     LOG.exception(_(\\'Instance failed to spawn\\'), instance=instance)                                                                                                                                                                            |\n|                                     |   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__                                                                                                                                                                                |\n|                                     |     self.gen.next()                                                                                                                                                                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1078, in _spawn                                                                                                                                                          |\n|                                     |     block_device_info)                                                                                                                                                                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/driver.py\", line 107, in spawn                                                                                                                                                        |\n|                                     |     self._powervm.spawn(context, instance, image_meta[\\'id\\'], network_info)                                                                                                                                                                     |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 399, in spawn                                                                                                                                                      |\n|                                     |     LOG.exception(_(\\'Error while attempting to \\'                                                                                                                                                                                               |\n|                                     |   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__                                                                                                                                                                                |\n|                                     |     self.gen.next()                                                                                                                                                                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 373, in spawn                                                                                                                                                      |\n|                                     |     _create_image(context, instance, image_id)                                                                                                                                                                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 354, in _create_image                                                                                                                                              |\n|                                     |     raise exception.PowerVMImageCreationFailed()                                                                                                                                                                                                 |\n|                                     | ', u'created': u'2013-04-16T15:26:36Z'}                                                                                                                                                                                                          |\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nEnd-user does not need to see the trace log, so my proposal is that the fault's message should only include the exception class \nname and the detail message as below:\n| fault                               | {u'message': u'PowerVMImageCreationFailed', u'code': 500, u'details': u'Image creation failed on PowerVM", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1177205", 
    "owner": "https://api.launchpad.net/1.0/~phongdly", 
    "id": 1177205, 
    "index": 4901, 
    "openned": "2013-05-07 05:52:27.088458+00:00", 
    "created": "2013-05-07 05:52:27.088458+00:00", 
    "title": "Instance fault's message has stack trace logs", 
    "comments": [
        {
            "content": "The instance fault['message'] is displaying exception class, the detail message that is thrown from the exception class, and also the stack trace logs.\n\nWhen user run cli command like \"nova show image-name\" it will also show the stack trace logs as below example. The stack trace logs in not necessary here. \n\nMy proposal is that the fault messa \n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nexample:                                                                                                                                                                                                                                             |\n| fault                               | {u'message': u'PowerVMImageCreationFailed', u'code': 500, u'details': u'Image creation failed on PowerVM                                                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 816, in _run_instance                                                                                                                                                    |\n|                                     |     set_access_ip=set_access_ip)                                                                                                                                                                                                                 |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1081, in _spawn                                                                                                                                                          |\n|                                     |     LOG.exception(_(\\'Instance failed to spawn\\'), instance=instance)                                                                                                                                                                            |\n|                                     |   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__                                                                                                                                                                                |\n|                                     |     self.gen.next()                                                                                                                                                                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1078, in _spawn                                                                                                                                                          |\n|                                     |     block_device_info)                                                                                                                                                                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/driver.py\", line 107, in spawn                                                                                                                                                        |\n|                                     |     self._powervm.spawn(context, instance, image_meta[\\'id\\'], network_info)                                                                                                                                                                     |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 399, in spawn                                                                                                                                                      |\n|                                     |     LOG.exception(_(\\'Error while attempting to \\'                                                                                                                                                                                               |\n|                                     |   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__                                                                                                                                                                                |\n|                                     |     self.gen.next()                                                                                                                                                                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 373, in spawn                                                                                                                                                      |\n|                                     |     _create_image(context, instance, image_id)                                                                                                                                                                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/virt/powervm/operator.py\", line 354, in _create_image                                                                                                                                              |\n|                                     |     raise exception.PowerVMImageCreationFailed()                                                                                                                                                                                                 |\n|                                     | ', u'created': u'2013-04-16T15:26:36Z'}                                                                                                                                                                                                          |\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nEnd-user does not need to see the trace log, so my proposal is that the fault's message should only include the exception class \nname and the detail message as below:\n| fault                               | {u'message': u'PowerVMImageCreationFailed', u'code': 500, u'details': u'Image creation failed on PowerVM", 
            "date_created": "2013-05-07 05:52:27.088458+00:00", 
            "author": "https://api.launchpad.net/1.0/~phongdly"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/28391", 
            "date_created": "2013-05-07 06:40:58.163602+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "The detail trace logs are for admin, it works as designed, I am invalidating this defect.", 
            "date_created": "2013-05-08 20:45:47.950390+00:00", 
            "author": "https://api.launchpad.net/1.0/~phongdly"
        }
    ], 
    "closed": "2013-05-08 20:45:55.374763+00:00"
}