{
    "status": "Invalid", 
    "last_updated": "2013-10-10 07:18:15.722600+00:00", 
    "description": "Description of problem:\nThe services nova-api and the nova-metadata-api are both using the same port, 8775. \nThus, the services are 'competing' for the port and one of them will not work. \n\nVersion-Release number of selected component (if applicable):\n\nRed Hat Enterprise Linux Server release 6.5 Beta (Santiago)\n\npython-novaclient-2.15.0-1.el6ost.noarch\npython-nova-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-network-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-common-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-console-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-compute-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-conductor-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-novncproxy-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-scheduler-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-api-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-cert-2013.2-0.24.rc1.el6ost.noarch\n\nHow reproducible:\neverytime\n\nSteps to Reproduce:\n1. Install Havana on RHEL 6.5 AIO installation. \n2. \n3.\n\nActual results:\nEither the openstack-nova-api or the openstack-nova-metadata-api service is down.\n\nExpected results:\nBoth services are up and running.\n\nAdditional info:\nThe error from /var/log/nova/metadata-api.log:\n\n2013-10-09 10:54:21.975 4776 INFO nova.network.driver [-] Loading network driver 'nova.network.linux_net'\n2013-10-09 10:54:22.036 4776 DEBUG nova.wsgi [-] Loading app metadata from /etc/nova/api-paste.ini load_app /usr/lib/python2.6/site-packages/nova/wsgi.py:484\n2013-10-09 10:54:22.076 4776 INFO nova.openstack.common.periodic_task [-] Skipping periodic task _periodic_update_dns because its interval is negative\n2013-10-09 10:54:22.079 4776 CRITICAL nova [-] [Errno 98] Address already in use\n2013-10-09 10:54:22.079 4776 TRACE nova Traceback (most recent call last):\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/bin/nova-api-metadata\", line 10, in <module>\n2013-10-09 10:54:22.079 4776 TRACE nova     sys.exit(main())\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/cmd/api_metadata.py\", line 33, in main\n2013-10-09 10:54:22.079 4776 TRACE nova     server = service.WSGIService('metadata')\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 318, in __init__\n2013-10-09 10:54:22.079 4776 TRACE nova     max_url_len=max_url_len)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/wsgi.py\", line 123, in __init__\n2013-10-09 10:54:22.079 4776 TRACE nova     self._socket = eventlet.listen(bind_addr, family, backlog=backlog)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/eventlet/convenience.py\", line 38, in listen\n2013-10-09 10:54:22.079 4776 TRACE nova     sock.bind(addr)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"<string>\", line 1, in bind\n2013-10-09 10:54:22.079 4776 TRACE nova error: [Errno 98] Address already in use\n2013-10-09 10:54:22.079 4776 TRACE nova\n\nThe error from the nova-api log: \n2013-10-09 11:17:04.520 6048 CRITICAL nova [-] [Errno 98] Address already in use\n2013-10-09 11:17:04.520 6048 TRACE nova Traceback (most recent call last):\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/bin/nova-api\", line 10, in <module>\n2013-10-09 11:17:04.520 6048 TRACE nova     sys.exit(main())\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/cmd/api.py\", line 51, in main\n2013-10-09 11:17:04.520 6048 TRACE nova     server = service.WSGIService(api, use_ssl=should_use_ssl)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 318, in __init__\n2013-10-09 11:17:04.520 6048 TRACE nova     max_url_len=max_url_len)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/wsgi.py\", line 124, in __init__\n2013-10-09 11:17:04.520 6048 TRACE nova     self._socket = eventlet.listen(bind_addr, family, backlog=backlog)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/eventlet/convenience.py\", line 38, in listen\n2013-10-09 11:17:04.520 6048 TRACE nova     sock.bind(addr)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"<string>\", line 1, in bind\n2013-10-09 11:17:04.520 6048 TRACE nova error: [Errno 98] Address already in use\n2013-10-09 11:17:04.520 6048 TRACE nova\n\nnetstat: \ntcp        0      0 0.0.0.0:8775                0.0.0.0:*                   LISTEN      32327/python", 
    "tags": [
        "nova-manage"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1237334", 
    "owner": "https://api.launchpad.net/1.0/~jay-lau-513", 
    "id": 1237334, 
    "index": 5429, 
    "openned": "2013-10-09 10:41:31.001536+00:00", 
    "created": "2013-10-09 10:41:31.001536+00:00", 
    "title": "nova-api & nova-metadata-api services are using the same port", 
    "comments": [
        {
            "content": "Description of problem:\nThe services nova-api and the nova-metadata-api are both using the same port, 8775. \nThus, the services are 'competing' for the port and one of them will not work. \n\nVersion-Release number of selected component (if applicable):\n\nRed Hat Enterprise Linux Server release 6.5 Beta (Santiago)\n\npython-novaclient-2.15.0-1.el6ost.noarch\npython-nova-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-network-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-common-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-console-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-compute-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-conductor-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-novncproxy-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-scheduler-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-api-2013.2-0.24.rc1.el6ost.noarch\nopenstack-nova-cert-2013.2-0.24.rc1.el6ost.noarch\n\nHow reproducible:\neverytime\n\nSteps to Reproduce:\n1. Install Havana on RHEL 6.5 AIO installation. \n2. \n3.\n\nActual results:\nEither the openstack-nova-api or the openstack-nova-metadata-api service is down.\n\nExpected results:\nBoth services are up and running.\n\nAdditional info:\nThe error from /var/log/nova/metadata-api.log:\n\n2013-10-09 10:54:21.975 4776 INFO nova.network.driver [-] Loading network driver 'nova.network.linux_net'\n2013-10-09 10:54:22.036 4776 DEBUG nova.wsgi [-] Loading app metadata from /etc/nova/api-paste.ini load_app /usr/lib/python2.6/site-packages/nova/wsgi.py:484\n2013-10-09 10:54:22.076 4776 INFO nova.openstack.common.periodic_task [-] Skipping periodic task _periodic_update_dns because its interval is negative\n2013-10-09 10:54:22.079 4776 CRITICAL nova [-] [Errno 98] Address already in use\n2013-10-09 10:54:22.079 4776 TRACE nova Traceback (most recent call last):\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/bin/nova-api-metadata\", line 10, in <module>\n2013-10-09 10:54:22.079 4776 TRACE nova     sys.exit(main())\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/cmd/api_metadata.py\", line 33, in main\n2013-10-09 10:54:22.079 4776 TRACE nova     server = service.WSGIService('metadata')\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 318, in __init__\n2013-10-09 10:54:22.079 4776 TRACE nova     max_url_len=max_url_len)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/wsgi.py\", line 123, in __init__\n2013-10-09 10:54:22.079 4776 TRACE nova     self._socket = eventlet.listen(bind_addr, family, backlog=backlog)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"/usr/lib/python2.6/site-packages/eventlet/convenience.py\", line 38, in listen\n2013-10-09 10:54:22.079 4776 TRACE nova     sock.bind(addr)\n2013-10-09 10:54:22.079 4776 TRACE nova   File \"<string>\", line 1, in bind\n2013-10-09 10:54:22.079 4776 TRACE nova error: [Errno 98] Address already in use\n2013-10-09 10:54:22.079 4776 TRACE nova\n\nThe error from the nova-api log: \n2013-10-09 11:17:04.520 6048 CRITICAL nova [-] [Errno 98] Address already in use\n2013-10-09 11:17:04.520 6048 TRACE nova Traceback (most recent call last):\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/bin/nova-api\", line 10, in <module>\n2013-10-09 11:17:04.520 6048 TRACE nova     sys.exit(main())\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/cmd/api.py\", line 51, in main\n2013-10-09 11:17:04.520 6048 TRACE nova     server = service.WSGIService(api, use_ssl=should_use_ssl)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/service.py\", line 318, in __init__\n2013-10-09 11:17:04.520 6048 TRACE nova     max_url_len=max_url_len)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/nova/wsgi.py\", line 124, in __init__\n2013-10-09 11:17:04.520 6048 TRACE nova     self._socket = eventlet.listen(bind_addr, family, backlog=backlog)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"/usr/lib/python2.6/site-packages/eventlet/convenience.py\", line 38, in listen\n2013-10-09 11:17:04.520 6048 TRACE nova     sock.bind(addr)\n2013-10-09 11:17:04.520 6048 TRACE nova   File \"<string>\", line 1, in bind\n2013-10-09 11:17:04.520 6048 TRACE nova error: [Errno 98] Address already in use\n2013-10-09 11:17:04.520 6048 TRACE nova\n\nnetstat: \ntcp        0      0 0.0.0.0:8775                0.0.0.0:*                   LISTEN      32327/python", 
            "date_created": "2013-10-09 10:41:31.001536+00:00", 
            "author": "https://api.launchpad.net/1.0/~yrabl"
        }, 
        {
            "content": "I think that this is not a valid case.\n\nPlease check your nova.conf to see if metadata was configured in enabled_apis.\n\nThe default value of  enabled_apis is \"enabled_apis = osapi_compute,metadata\", this means that metadata was enabled by default, it will be started by nova-api.\n\nIf you remove metadata from enabled_apis, you will be able to start up your metadata api.\n\nThanks.", 
            "date_created": "2013-10-10 06:38:56.135136+00:00", 
            "author": "https://api.launchpad.net/1.0/~jay-lau-513"
        }, 
        {
            "content": "from nova.conf: \n\n# a list of APIs to enable by default (list value)\n#enabled_apis=ec2,osapi_compute,metadata\nenabled_apis=ec2,osapi_compute,metadata\n", 
            "date_created": "2013-10-10 07:10:00.200092+00:00", 
            "author": "https://api.launchpad.net/1.0/~yrabl"
        }, 
        {
            "content": "Yes, that's it. You can remove metadata from enabled_apis, then restart nova-api and start nova-metadata-api, it should be ok.", 
            "date_created": "2013-10-10 07:18:14.487955+00:00", 
            "author": "https://api.launchpad.net/1.0/~jay-lau-513"
        }
    ], 
    "closed": "2013-10-10 06:39:10.944480+00:00"
}