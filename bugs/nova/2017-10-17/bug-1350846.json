{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:58:38.560273+00:00", 
    "description": "nova add-fixed-ip <server> <network> fails with following in compute log:\n\n2014-07-31 06:01:48.697 ERROR oslo.messaging.rpc.dispatcher [req-6e04dd42-1ebe-4aa3-a37b-e84bb60b3413 admin demo] Exception during message handling: 'dict' object has no attribute 'get_meta'\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 414, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 327, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 315, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3737, in add_fixed_ip_to_instance\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self._inject_network_info(context, instance, network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4091, in _inject_network_info\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5383, in inject_network_info\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self.firewall_driver.setup_basic_filtering(instance, nw_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/firewall.py\", line 286, in setup_basic_filtering\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self.nwfilter.setup_basic_filtering(instance, network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/firewall.py\", line 123, in setup_basic_filtering\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     if subnet.get_meta('dhcp_server'):\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher AttributeError: 'dict' object has no attribute 'get_meta'\n\nsame happens with remove-fixed-ip call", 
    "tags": [
        "icehouse-backport-potential", 
        "network"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1350846", 
    "owner": "https://api.launchpad.net/1.0/~obondarev", 
    "id": 1350846, 
    "index": 3976, 
    "openned": "2014-07-31 13:08:04.372855+00:00", 
    "created": "2014-07-31 13:08:04.372855+00:00", 
    "title": "add/delete fixed ip fails with nova-network", 
    "comments": [
        {
            "content": "nova add-fixed-ip <server> <network> fails with following in compute log:\n\n2014-07-31 06:01:48.697 ERROR oslo.messaging.rpc.dispatcher [req-6e04dd42-1ebe-4aa3-a37b-e84bb60b3413 admin demo] Exception during message handling: 'dict' object has no attribute 'get_meta'\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 414, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 327, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 315, in decorated_function\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3737, in add_fixed_ip_to_instance\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self._inject_network_info(context, instance, network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4091, in _inject_network_info\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5383, in inject_network_info\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self.firewall_driver.setup_basic_filtering(instance, nw_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/firewall.py\", line 286, in setup_basic_filtering\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     self.nwfilter.setup_basic_filtering(instance, network_info)\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/firewall.py\", line 123, in setup_basic_filtering\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher     if subnet.get_meta('dhcp_server'):\n2014-07-31 06:01:48.697 TRACE oslo.messaging.rpc.dispatcher AttributeError: 'dict' object has no attribute 'get_meta'\n\nsame happens with remove-fixed-ip call", 
            "date_created": "2014-07-31 13:08:04.372855+00:00", 
            "author": "https://api.launchpad.net/1.0/~obondarev"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/110973", 
            "date_created": "2014-07-31 14:09:39.533905+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/110973\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=984f4192ede99951078e2f6091e4c3e26cdb0e01\nSubmitter: Jenkins\nBranch:    master\n\ncommit 984f4192ede99951078e2f6091e4c3e26cdb0e01\nAuthor: Oleg Bondarev <email address hidden>\nDate:   Thu Jul 31 17:59:11 2014 +0400\n\n    Return hydrated net info from novanet add/remove_fixed_ip calls\n    \n    Compute manager expects hydrated network info from network_api\n    \n    Change-Id: I36e48742144555004cbd1f71429a943c7e2952b0\n    Closes-bug: #1350846\n", 
            "date_created": "2014-09-21 04:28:19.272169+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2014-10-01 07:43:39.183890+00:00"
}