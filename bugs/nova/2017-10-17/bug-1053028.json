{
    "status": "Fix Released", 
    "last_updated": "2012-09-27 15:43:32.600674+00:00", 
    "description": "Using the marker parameter, gives a 500 error currently as shown below.\n\n curl -i http://184.106.79.70:8774/v2/bc409a503cef4976868aec0962260a23/servers?marker=1 -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: fe9c6ae8a8334edaa1de6900cf676078\"\nHTTP/1.1 500 Internal Server Error\nContent-Length: 128\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-674edf5d-0ced-4d1f-9815-96bcff41da38\nDate: Wed, 19 Sep 2012 17:54:39 GMT\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1053028", 
    "owner": "https://api.launchpad.net/1.0/~markwash", 
    "id": 1053028, 
    "index": 821, 
    "openned": "2012-09-19 17:55:33.546983+00:00", 
    "created": "2012-09-19 17:55:33.546983+00:00", 
    "title": "marker option not working", 
    "comments": [
        {
            "content": "Using the marker parameter, gives a 500 error currently as shown below.\n\n curl -i http://184.106.79.70:8774/v2/bc409a503cef4976868aec0962260a23/servers?marker=1 -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: fe9c6ae8a8334edaa1de6900cf676078\"\nHTTP/1.1 500 Internal Server Error\nContent-Length: 128\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-674edf5d-0ced-4d1f-9815-96bcff41da38\nDate: Wed, 19 Sep 2012 17:54:39 GMT\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}", 
            "date_created": "2012-09-19 17:55:33.546983+00:00", 
            "author": "https://api.launchpad.net/1.0/~iccha-sethi"
        }, 
        {
            "content": "Stack trace:\n\n\n2012-09-19 17:54:39 INFO nova.api.openstack.wsgi [req-674edf5d-0ced-4d1f-9815-96bcff41da38 demo demo] GET http://184.106.79.70:8774/v2/bc409a503\ncef4976868aec0962260a23/servers?marker=1\nGET http://184.106.79.70:8774/v2/bc409a503cef4976868aec0962260a23/servers?marker=1\n2012-09-19 17:54:39 DEBUG nova.api.openstack.wsgi [req-674edf5d-0ced-4d1f-9815-96bcff41da38 demo demo] No Content-Type provided in request from \n(pid=30668) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:783\nNo Content-Type provided in request\n2012-09-19 17:54:39 DEBUG nova.api.openstack.compute.servers [req-674edf5d-0ced-4d1f-9815-96bcff41da38 demo demo] Removing options 'marker' from\n query from (pid=30668) remove_invalid_options /opt/stack/nova/nova/api/openstack/compute/servers.py:1293\nRemoving options 'marker' from query\n2012-09-19 17:54:39 DEBUG nova.compute.api [req-674edf5d-0ced-4d1f-9815-96bcff41da38 demo demo] Searching by: {'deleted': False, 'project_id': u\n'bc409a503cef4976868aec0962260a23'} from (pid=30668) get_all /opt/stack/nova/nova/compute/api.py:1055\nSearching by: {'deleted': False, 'project_id': u'bc409a503cef4976868aec0962260a23'}\n2012-09-19 17:54:39 ERROR nova.api.openstack [req-674edf5d-0ced-4d1f-9815-96bcff41da38 demo demo] Caught error: 'unicode' object has no attribut\ne 'created_at'\n\n\n2012-09-19 17:54:39 TRACE nova.api.openstack Traceback (most recent call last):\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 78, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return req.get_response(self.application)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2012-09-19 17:54:39 TRACE nova.api.openstack     application, catch_exc_info=False)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2012-09-19 17:54:39 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return resp(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/keystone/keystone/middleware/auth_token.py\", line 278, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return self.app(env, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return resp(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return resp(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return resp(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     return resp(environ, start_response)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2012-09-19 17:54:39 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 885, in __call__\n2012-09-19 17:54:39 TRACE nova.api.openstack     content_type, body, accept)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 933, in _process_stack\n2012-09-19 17:54:39 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1021, in dispatch\n2012-09-19 17:54:39 TRACE nova.api.openstack     return method(req=request, **action_args)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 411, in index\n2012-09-19 17:54:39 TRACE nova.api.openstack     servers = self._get_servers(req, is_detail=False)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 501, in _get_servers\n2012-09-19 17:54:39 TRACE nova.api.openstack     limit=limit, marker=marker)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1109, in get_all\n2012-09-19 17:54:39 TRACE nova.api.openstack     marker=marker)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1135, in _get_instances_by_filters\n2012-09-19 17:54:39 TRACE nova.api.openstack     limit=limit, marker=marker)\n\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/compute/api.py\", line 1135, in _get_instances_by_filters\n2012-09-19 17:54:39 TRACE nova.api.openstack     limit=limit, marker=marker)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/api.py\", line 594, in instance_get_all_by_filters\n2012-09-19 17:54:39 TRACE nova.api.openstack     marker=marker)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 131, in wrapper\n2012-09-19 17:54:39 TRACE nova.api.openstack     return f(*args, **kwargs)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 1602, in instance_get_all_by_filters\n2012-09-19 17:54:39 TRACE nova.api.openstack     sort_dir=sort_dir)\n2012-09-19 17:54:39 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/common/sqlalchemyutils.py\", line 99, in paginate_query\n2012-09-19 17:54:39 TRACE nova.api.openstack     v = getattr(marker, sort_key)\n2012-09-19 17:54:39 TRACE nova.api.openstack AttributeError: 'unicode' object has no attribute 'created_at'\n2012-09-19 17:54:39 TRACE nova.api.openstack \nCaught error: 'unicode' object has no attribute 'created_at'\n", 
            "date_created": "2012-09-19 18:05:43.779963+00:00", 
            "author": "https://api.launchpad.net/1.0/~iccha-sethi"
        }, 
        {
            "content": "So basically, it is expecting a marker object, but it is receiving a string/unicode. ", 
            "date_created": "2012-09-19 18:08:15.402929+00:00", 
            "author": "https://api.launchpad.net/1.0/~iccha-sethi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/13302", 
            "date_created": "2012-09-19 19:12:48.491711+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: milestone-proposed\nReview: https://review.openstack.org/13309", 
            "date_created": "2012-09-19 20:49:20.650475+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/13302\nCommitted: http://github.com/openstack/nova/commit/09b903ed5e3306cf200328f41ce6df371923d03d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 09b903ed5e3306cf200328f41ce6df371923d03d\nAuthor: Mark Washenberger <email address hidden>\nDate:   Wed Sep 19 18:41:03 2012 +0000\n\n    Fix marker pagination for /servers\n    \n    Fixes bug 1053028.\n    \n    Recent changes to pagination required passing in full sqlalchemy objects\n    into paginate_query. However, calls to paginate_query were passing in\n    strings.\n    \n    Change-Id: Ib1396a78a12aef1a9cdc31f3624af30f19da44b5\n", 
            "date_created": "2012-09-20 02:13:36.558888+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/13309\nCommitted: http://github.com/openstack/nova/commit/7d5a10f6f70cf8a9242c5321ff5cfa5746fb37f8\nSubmitter: Jenkins\nBranch:    milestone-proposed\n\ncommit 7d5a10f6f70cf8a9242c5321ff5cfa5746fb37f8\nAuthor: Mark Washenberger <email address hidden>\nDate:   Wed Sep 19 18:41:03 2012 +0000\n\n    Fix marker pagination for /servers\n    \n    Fixes bug 1053028.\n    \n    Recent changes to pagination required passing in full sqlalchemy objects\n    into paginate_query. However, calls to paginate_query were passing in\n    strings.\n    \n    Change-Id: Ib1396a78a12aef1a9cdc31f3624af30f19da44b5\n    (cherry picked from commit 09b903ed5e3306cf200328f41ce6df371923d03d)\n", 
            "date_created": "2012-09-20 05:50:09.678307+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ], 
    "closed": "2012-09-20 05:50:08.064707+00:00"
}