{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:33:26.178068+00:00", 
    "description": "2014-02-27 14:08:23.013 ERROR nova.network.neutronv2.api [req-598b0d2f-e4e9-40eb-a9d4-027975d08b39 demo demo] Failed to delete neutron port 153f472b-f662-497b-bc7c-3cc362157ab1\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api Traceback (most recent call last):\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/nova/nova/network/neutronv2/api.py\", line 420, in deallocate_for_instance\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     neutron.update_port(port, port_req_body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 111, in with_params\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 321, in update_port\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1245, in put\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1221, in retry_request\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1164, in do_request\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1134, in _handle_fault_response\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 84, in exception_handler_v20\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     message=error_dict)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api NeutronClientException: Invalid input for device_id. Reason: 'None' is not a valid string.\n\n\n\n\n\n2014-02-27 14:08:23.011 ERROR neutron.api.v2.resource [req-3f133c17-198f-412d-b57e-66bbf0fcfbcb neutron abd2b56aa998417ba5af609a680a138d] update failed\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource Traceback (most recent call last):\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/resource.py\", line 84, in resource\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     result = method(request=request, **args)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/base.py\", line 466, in update\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     allow_bulk=self._allow_bulk)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/base.py\", line 600, in prepare_request_body\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     raise webob.exc.HTTPBadRequest(msg)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource HTTPBadRequest: Invalid input for device_id. Reason: 'None' is not a valid string.\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource", 
    "tags": [
        "network"
    ], 
    "importance": "Low", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1285886", 
    "owner": "https://api.launchpad.net/1.0/~arosen", 
    "id": 1285886, 
    "index": 1178, 
    "openned": "2014-02-27 22:17:39.559201+00:00", 
    "created": "2014-02-27 22:17:39.559201+00:00", 
    "title": "update_port passes device_id=None but neutron expects ''", 
    "comments": [
        {
            "content": "2014-02-27 14:08:23.013 ERROR nova.network.neutronv2.api [req-598b0d2f-e4e9-40eb-a9d4-027975d08b39 demo demo] Failed to delete neutron port 153f472b-f662-497b-bc7c-3cc362157ab1\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api Traceback (most recent call last):\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/nova/nova/network/neutronv2/api.py\", line 420, in deallocate_for_instance\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     neutron.update_port(port, port_req_body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 111, in with_params\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 321, in update_port\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1245, in put\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1221, in retry_request\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1164, in do_request\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 1134, in _handle_fault_response\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api   File \"/opt/stack/python-neutronclient/neutronclient/v2_0/client.py\", line 84, in exception_handler_v20\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api     message=error_dict)\n2014-02-27 14:08:23.013 TRACE nova.network.neutronv2.api NeutronClientException: Invalid input for device_id. Reason: 'None' is not a valid string.\n\n\n\n\n\n2014-02-27 14:08:23.011 ERROR neutron.api.v2.resource [req-3f133c17-198f-412d-b57e-66bbf0fcfbcb neutron abd2b56aa998417ba5af609a680a138d] update failed\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource Traceback (most recent call last):\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/resource.py\", line 84, in resource\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     result = method(request=request, **args)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/base.py\", line 466, in update\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     allow_bulk=self._allow_bulk)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource   File \"/opt/stack/neutron/neutron/api/v2/base.py\", line 600, in prepare_request_body\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource     raise webob.exc.HTTPBadRequest(msg)\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource HTTPBadRequest: Invalid input for device_id. Reason: 'None' is not a valid string.\n2014-02-27 14:08:23.011 TRACE neutron.api.v2.resource", 
            "date_created": "2014-02-27 22:17:39.559201+00:00", 
            "author": "https://api.launchpad.net/1.0/~arosen"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/77046", 
            "date_created": "2014-02-28 02:55:43.600136+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/77046\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=621fc02f70fa4fa50b2f05167eefa39b71f72024\nSubmitter: Jenkins\nBranch:    master\n\ncommit 621fc02f70fa4fa50b2f05167eefa39b71f72024\nAuthor: Aaron Rosen <email address hidden>\nDate:   Thu Feb 27 18:44:52 2014 -0800\n\n    Nova should pass device_id='' instead of None to neutron.update_port()\n    \n    In the case that neutron raises an error and nova needs to undo the api\n    calls it's done against neutron it should pass device_id='' instead of\n    None otherwise neutron raises an exception.\n    \n    Note: This should have a unit test but it's near impossible\n    to add one right without duplicating all of _stub_allocate_for_instance\n    due to the fact that it's using some crazy logic in the tests to make\n    decisions based on an index that's passed it. X.x\n    \n    Change-Id: I91334c07401ff379f71fdef1d5bd080cc68a72ab\n    Closes-bug: #1285886\n", 
            "date_created": "2014-04-24 07:22:03.553923+00:00", 
            "author": "https://api.launchpad.net/1.0/~openstack-gerrit"
        }
    ], 
    "closed": "2014-06-11 13:52:51.591878+00:00"
}