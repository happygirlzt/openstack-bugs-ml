{
    "status": "Invalid", 
    "last_updated": "2013-11-26 07:17:01.486990+00:00", 
    "description": "Hi list\n\n\nI'm working under CentOS 6.4 + Havana.\n\nI have a work fine instance in the cloud, display like:\n\n nova list\n+--------------------------------------+---------------+--------+----------------------------+\n| ID                                   | Name          | Status | Networks                   |\n+--------------------------------------+---------------+--------+----------------------------+\n| d3b16acd-2cae-47de-bbbb-b3435db19399 | test-havana-4 | ACTIVE | flat_physnet1=191.101.0.14 |\n+--------------------------------------+---------------+--------+----------------------------+\n\n After I run command nova interface-attach  --net-id ${net_id} test-havana-4\n\nI get:\n\n nova list\n+--------------------------------------+---------------+--------+---------------+\n| ID                                   | Name          | Status | Networks      |\n+--------------------------------------+---------------+--------+---------------+\n| d3b16acd-2cae-47de-bbbb-b3435db19399 | test-havana-4 | ACTIVE | vlan2=9.1.0.2 |\n+--------------------------------------+---------------+--------+---------------+\n\nThe original network disappeared ....\n\nBut, actually, in vm, everything works fine.\nI can get two virtual NIC in VM:\n        2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000\n              link/ether fa:16:3e:c7:a7:d6 brd ff:ff:ff:ff:ff:ff\n        3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000\n             link/ether fa:16:3e:23:eb:cc brd ff:ff:ff:ff:ff:ff\n\nSo, the result shows in \"nova list\" is not correct.\n\nThanks.\n-chen", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1249196", 
    "owner": "None", 
    "id": 1249196, 
    "index": 5539, 
    "openned": "2013-11-08 05:44:46.404172+00:00", 
    "created": "2013-11-08 05:44:46.404172+00:00", 
    "title": " nova list lost network information after run nova interface-attach ", 
    "comments": [
        {
            "content": "Hi list\n\n\nI'm working under CentOS 6.4 + Havana.\n\nI have a work fine instance in the cloud, display like:\n\n nova list\n+--------------------------------------+---------------+--------+----------------------------+\n| ID                                   | Name          | Status | Networks                   |\n+--------------------------------------+---------------+--------+----------------------------+\n| d3b16acd-2cae-47de-bbbb-b3435db19399 | test-havana-4 | ACTIVE | flat_physnet1=191.101.0.14 |\n+--------------------------------------+---------------+--------+----------------------------+\n\n After I run command nova interface-attach  --net-id ${net_id} test-havana-4\n\nI get:\n\n nova list\n+--------------------------------------+---------------+--------+---------------+\n| ID                                   | Name          | Status | Networks      |\n+--------------------------------------+---------------+--------+---------------+\n| d3b16acd-2cae-47de-bbbb-b3435db19399 | test-havana-4 | ACTIVE | vlan2=9.1.0.2 |\n+--------------------------------------+---------------+--------+---------------+\n\nThe original network disappeared ....\n\nBut, actually, in vm, everything works fine.\nI can get two virtual NIC in VM:\n        2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000\n              link/ether fa:16:3e:c7:a7:d6 brd ff:ff:ff:ff:ff:ff\n        3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000\n             link/ether fa:16:3e:23:eb:cc brd ff:ff:ff:ff:ff:ff\n\nSo, the result shows in \"nova list\" is not correct.\n\nThanks.\n-chen", 
            "date_created": "2013-11-08 05:44:46.404172+00:00", 
            "author": "https://api.launchpad.net/1.0/~chen-li"
        }, 
        {
            "content": "Hi,\n\nI run into the same problem and wanted to help clarifying the issue:\nnova list - shows only the latest inteface attached, while nova interface-list show all the attached interfaces.\n\nRegards,\nRoey", 
            "date_created": "2013-11-10 07:45:17.328684+00:00", 
            "author": "https://api.launchpad.net/1.0/~rdekel"
        }, 
        {
            "content": "I compare the database content for\n        1. instance boot with one network and then add a new interface using command  \"nova interface-attach \"\n        2. boot an instance with two network directly\n\nThe content in table instance_info_caches  is different.\n\n| created_at          | updated_at          | deleted_at | id  | network_info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | instance_uuid                        | deleted |\n\n| 2013-11-12 02:41:38 | 2013-11-12 05:14:23 | NULL       | 751 | [{\"ovs_interfaceid\": \"7771dfd4-ffe5-41ef-9072-b4f8ca421e01\", \"network\": {\"bridge\": \"br-int\", \"subnets\": [{\"ips\": [{\"meta\": {}, \"version\": 4, \"type\": \"fixed\", \"floating_ips\": [], \"address\": \"10.1.100.15\"}], \"version\": 4, \"meta\": {\"dhcp_server\": \"10.1.100.3\"}, \"dns\": [], \"routes\": [], \"cidr\": \"10.1.0.0/16\", \"gateway\": {\"meta\": {}, \"version\": 4, \"type\": \"gateway\", \"address\": \"10.1.0.1\"}}], \"meta\": {\"injected\": false, \"tenant_id\": \"45c69667e2a64c889719ef8d8e0dd098\"}, \"id\": \"8232d0b8-4204-4751-ba42-04345c2dbe5a\", \"label\": \"iStack_setup_B_private\"}, \"devname\": \"tap7771dfd4-ff\", \"qbh_params\": null, \"meta\": {}, \"address\": \"fa:16:3e:e8:3a:51\", \"type\": \"ovs\", \"id\": \"7771dfd4-ffe5-41ef-9072-b4f8ca421e01\", \"qbg_params\": null}]                                                                                                                                                                                                                                                                                                             | 21e57f4a-23c5-4d9f-b9f8-00b2db5ed021 |       0 |\n\n| 2013-11-13 07:47:11 | 2013-11-13 07:47:20 | NULL       | 756 | [{\"ovs_interfaceid\": \"8e4953da-d0f1-495d-aaaa-910dd5626be8\", \"network\": {\"bridge\": \"br-int\", \"subnets\": [{\"ips\": [{\"meta\": {}, \"version\": 4, \"type\": \"fixed\", \"floating_ips\": [], \"address\": \"191.101.0.27\"}], \"version\": 4, \"meta\": {\"dhcp_server\": \"191.101.0.4\"}, \"dns\": [], \"routes\": [], \"cidr\": \"191.101.0.0/16\", \"gateway\": {\"meta\": {}, \"version\": 4, \"type\": \"gateway\", \"address\": \"191.101.0.1\"}}], \"meta\": {\"injected\": false, \"tenant_id\": \"45c69667e2a64c889719ef8d8e0dd098\"}, \"id\": \"316215a2-e514-4dea-a061-6b335e89ccd7\", \"label\": \"flat_physnet1\"}, \"devname\": \"tap8e4953da-d0\", \"qbh_params\": null, \"meta\": {}, \"address\": \"fa:16:3e:a0:b8:2b\", \"type\": \"ovs\", \"id\": \"8e4953da-d0f1-495d-aaaa-910dd5626be8\", \"qbg_params\": null}, {\"ovs_interfaceid\": \"1ca3d64e-b113-4666-b4bb-eb5a4a017c18\", \"network\": {\"bridge\": \"br-int\", \"subnets\": [{\"ips\": [{\"meta\": {}, \"version\": 4, \"type\": \"fixed\", \"floating_ips\": [], \"address\": \"10.1.100.16\"}], \"version\": 4, \"meta\": {\"dhcp_server\": \"10.1.100.3\"}, \"dns\": [], \"routes\": [], \"cidr\": \"10.1.0.0/16\", \"gateway\": {\"meta\": {}, \"version\": 4, \"type\": \"gateway\", \"address\": \"10.1.0.1\"}}], \"meta\": {\"injected\": false, \"tenant_id\": \"45c69667e2a64c889719ef8d8e0dd098\"}, \"id\": \"8232d0b8-4204-4751-ba42-04345c2dbe5a\", \"label\": \"iStack_setup_B_private\"}, \"devname\": \"tap1ca3d64e-b1\", \"qbh_params\": null, \"meta\": {}, \"address\": \"fa:16:3e:38:1c:e1\", \"type\": \"ovs\", \"id\": \"1ca3d64e-b113-4666-b4bb-eb5a4a017c18\", \"qbg_params\": null}] | 4eca706b-a46a-4b37-b245-985908b76e77 |       0 |\n\n\n\n\n\nSo, nova interface-attach forget update table instance_info_caches, right ?\n\n\nThanks.\n-chen", 
            "date_created": "2013-11-13 08:59:44.273737+00:00", 
            "author": "https://api.launchpad.net/1.0/~chen-li"
        }, 
        {
            "content": "Sorry.\n\nNot forget update table instance_info_caches , but have cover the old network info by the new one.\n\nThis is the place went wrong.\n\n\n\nThanks.\n-chen", 
            "date_created": "2013-11-13 09:02:26.562605+00:00", 
            "author": "https://api.launchpad.net/1.0/~chen-li"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/57857", 
            "date_created": "2013-11-22 08:38:21.141241+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "duplicated bug for https://bugs.launchpad.net/nova/+bug/1223859.\nAlready fixed.\n\n\nThanks.\n-chen\n", 
            "date_created": "2013-11-26 07:16:47.960948+00:00", 
            "author": "https://api.launchpad.net/1.0/~chen-li"
        }
    ], 
    "closed": "2013-11-26 07:15:56.708034+00:00"
}