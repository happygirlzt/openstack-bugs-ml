{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 09:49:42.839025+00:00", 
    "description": "When attempting to run the test suite, I get as far as the first test in the CloudTestCase (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and then the tests just hang. I've attempted this twice, the second time waiting a full 10 minutes before I hit ^C; same results each time.\n\nNot sure if there's supposed to be another component installed? Wasn't able to discover any docs on running the unit tests, though I could easily have overlooked something...\n\nAdditional info:\n  Python 2.7\n  nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n  Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)", 
    "tags": [], 
    "importance": "Low", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/882933", 
    "owner": "https://api.launchpad.net/1.0/~oubiwann", 
    "id": 882933, 
    "index": 323, 
    "openned": "2011-10-28 06:41:55.066963+00:00", 
    "created": "2011-10-28 06:41:55.066963+00:00", 
    "title": "run_tests.sh stops at CloudTestCase test_ajax_console", 
    "comments": [
        {
            "content": "When attempting to run the test suite, I get as far as the first test in the CloudTestCase (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and then the tests just hang. I've attempted this twice, the second time waiting a full 10 minutes before I hit ^C; same results each time.\n\nNot sure if there's supposed to be another component installed? Wasn't able to discover any docs on running the unit tests, though I could easily have overlooked something...\n\nAdditional info:\n  Python 2.7\n  nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n  Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)", 
            "date_created": "2011-10-28 06:41:55.066963+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }, 
        {
            "content": "Are you running from a shared folder?  I have noticed that python-lockfile just utterly fails in a shared folder for some reason.  I have to update nova/tests/fake_flags.py to set the lock_path to something like /tmp for it to pass if you are running in a shared folder.\n\nVish\n\nOn Oct 27, 2011, at 11:41 PM, Duncan McGreggor wrote:\n\n> Public bug reported:\n> \n> When attempting to run the test suite, I get as far as the first test in\n> the CloudTestCase\n> (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n> then the tests just hang. I've attempted this twice, the second time\n> waiting a full 10 minutes before I hit ^C; same results each time.\n> \n> Not sure if there's supposed to be another component installed? Wasn't\n> able to discover any docs on running the unit tests, though I could\n> easily have overlooked something...\n> \n> Additional info:\n>  Python 2.7\n>  nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>  Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> -- \n> You received this bug notification because you are subscribed to\n> OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/882933\n> \n> Title:\n>  run_tests.sh stops at CloudTestCase test_ajax_console\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  When attempting to run the test suite, I get as far as the first test\n>  in the CloudTestCase\n>  (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>  then the tests just hang. I've attempted this twice, the second time\n>  waiting a full 10 minutes before I hit ^C; same results each time.\n> \n>  Not sure if there's supposed to be another component installed? Wasn't\n>  able to discover any docs on running the unit tests, though I could\n>  easily have overlooked something...\n> \n>  Additional info:\n>    Python 2.7\n>    nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>    Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n> \n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n\n", 
            "date_created": "2011-10-28 17:42:38+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Vish, that was amazing. Sure thing: as soon as added /tmp as the\nlock_file path, the tests continued.\n\nI'd love to document this someplace in the wiki... is there a \"run\nopenstack's unit tests\" page somewhere? If not, I can create one...\n\nOn Fri, Oct 28, 2011 at 10:42 AM, Vish Ishaya <email address hidden> wrote:\n> Are you running from a shared folder? \u00a0I have noticed that python-\n> lockfile just utterly fails in a shared folder for some reason. \u00a0I have\n> to update nova/tests/fake_flags.py to set the lock_path to something\n> like /tmp for it to pass if you are running in a shared folder.\n>\n> Vish\n>\n> On Oct 27, 2011, at 11:41 PM, Duncan McGreggor wrote:\n>\n>> Public bug reported:\n>>\n>> When attempting to run the test suite, I get as far as the first test in\n>> the CloudTestCase\n>> (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>> then the tests just hang. I've attempted this twice, the second time\n>> waiting a full 10 minutes before I hit ^C; same results each time.\n>>\n>> Not sure if there's supposed to be another component installed? Wasn't\n>> able to discover any docs on running the unit tests, though I could\n>> easily have overlooked something...\n>>\n>> Additional info:\n>> \u00a0Python 2.7\n>> \u00a0nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>> \u00a0Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n>>\n>> ** Affects: nova\n>> \u00a0 \u00a0 Importance: Undecided\n>> \u00a0 \u00a0 \u00a0 \u00a0 Status: New\n>>\n>> --\n>> You received this bug notification because you are subscribed to\n>> OpenStack Compute (nova).\n>> https://bugs.launchpad.net/bugs/882933\n>>\n>> Title:\n>> \u00a0run_tests.sh stops at CloudTestCase test_ajax_console\n>>\n>> Status in OpenStack Compute (Nova):\n>> \u00a0New\n>>\n>> Bug description:\n>> \u00a0When attempting to run the test suite, I get as far as the first test\n>> \u00a0in the CloudTestCase\n>> \u00a0(nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>> \u00a0then the tests just hang. I've attempted this twice, the second time\n>> \u00a0waiting a full 10 minutes before I hit ^C; same results each time.\n>>\n>> \u00a0Not sure if there's supposed to be another component installed? Wasn't\n>> \u00a0able to discover any docs on running the unit tests, though I could\n>> \u00a0easily have overlooked something...\n>>\n>> \u00a0Additional info:\n>> \u00a0 \u00a0Python 2.7\n>> \u00a0 \u00a0nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>> \u00a0 \u00a0Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n>>\n>> To manage notifications about this bug go to:\n>> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n>\n> --\n> You received this bug notification because you are subscribed to the bug\n> report.\n> https://bugs.launchpad.net/bugs/882933\n>\n> Title:\n> \u00a0run_tests.sh stops at CloudTestCase test_ajax_console\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n>\n", 
            "date_created": "2011-10-28 18:00:29+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }, 
        {
            "content": "FYI, you will need to change --instances_path from your shared folder as well if you want to actually run nova.  Alternatively, you can use nfs shares.  That is what i do with my vagrant script.\n\nVish\n\nOn Oct 28, 2011, at 11:00 AM, Duncan McGreggor wrote:\n\n> Vish, that was amazing. Sure thing: as soon as added /tmp as the\n> lock_file path, the tests continued.\n> \n> I'd love to document this someplace in the wiki... is there a \"run\n> openstack's unit tests\" page somewhere? If not, I can create one...\n> \n> On Fri, Oct 28, 2011 at 10:42 AM, Vish Ishaya <email address hidden> wrote:\n>> Are you running from a shared folder?  I have noticed that python-\n>> lockfile just utterly fails in a shared folder for some reason.  I have\n>> to update nova/tests/fake_flags.py to set the lock_path to something\n>> like /tmp for it to pass if you are running in a shared folder.\n>> \n>> Vish\n>> \n>> On Oct 27, 2011, at 11:41 PM, Duncan McGreggor wrote:\n>> \n>>> Public bug reported:\n>>> \n>>> When attempting to run the test suite, I get as far as the first test in\n>>> the CloudTestCase\n>>> (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>>> then the tests just hang. I've attempted this twice, the second time\n>>> waiting a full 10 minutes before I hit ^C; same results each time.\n>>> \n>>> Not sure if there's supposed to be another component installed? Wasn't\n>>> able to discover any docs on running the unit tests, though I could\n>>> easily have overlooked something...\n>>> \n>>> Additional info:\n>>>  Python 2.7\n>>>  nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>>>  Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n>>> \n>>> ** Affects: nova\n>>>     Importance: Undecided\n>>>         Status: New\n>>> \n>>> --\n>>> You received this bug notification because you are subscribed to\n>>> OpenStack Compute (nova).\n>>> https://bugs.launchpad.net/bugs/882933\n>>> \n>>> Title:\n>>>  run_tests.sh stops at CloudTestCase test_ajax_console\n>>> \n>>> Status in OpenStack Compute (Nova):\n>>>  New\n>>> \n>>> Bug description:\n>>>  When attempting to run the test suite, I get as far as the first test\n>>>  in the CloudTestCase\n>>>  (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>>>  then the tests just hang. I've attempted this twice, the second time\n>>>  waiting a full 10 minutes before I hit ^C; same results each time.\n>>> \n>>>  Not sure if there's supposed to be another component installed? Wasn't\n>>>  able to discover any docs on running the unit tests, though I could\n>>>  easily have overlooked something...\n>>> \n>>>  Additional info:\n>>>    Python 2.7\n>>>    nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>>>    Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n>>> \n>>> To manage notifications about this bug go to:\n>>> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n>> \n>> --\n>> You received this bug notification because you are subscribed to the bug\n>> report.\n>> https://bugs.launchpad.net/bugs/882933\n>> \n>> Title:\n>>  run_tests.sh stops at CloudTestCase test_ajax_console\n>> \n>> To manage notifications about this bug go to:\n>> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n>> \n> \n> -- \n> You received this bug notification because you are subscribed to\n> OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/882933\n> \n> Title:\n>  run_tests.sh stops at CloudTestCase test_ajax_console\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  When attempting to run the test suite, I get as far as the first test\n>  in the CloudTestCase\n>  (nova.tests.api.ec2.test_cloud.CloudTestCase.test_ajax_console), and\n>  then the tests just hang. I've attempted this twice, the second time\n>  waiting a full 10 minutes before I hit ^C; same results each time.\n> \n>  Not sure if there's supposed to be another component installed? Wasn't\n>  able to discover any docs on running the unit tests, though I could\n>  easily have overlooked something...\n> \n>  Additional info:\n>    Python 2.7\n>    nova from git (75a3fbb21eebd4de8775b63c327d9d57859d090c)\n>    Ubuntu 11.10 (running in a virtual box instance on a MacBook Air)\n> \n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/882933/+subscriptions\n\n", 
            "date_created": "2011-10-28 18:57:45+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Should that still be kept open as a nova bug ?", 
            "date_created": "2011-12-02 14:18:05.363837+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Thierry, no it should not. I meant to keep it open only long enough to get some documentation done, but that didn't happen!\n\nI did eventually find the unit test docs:\n  http://nova.openstack.org/devref/unit_tests.html\n\nI added a link on the wiki page here (in the development table):\n  http://wiki.openstack.org/InstallInstructions/Nova\n\nLooks like the unit test docs are in the source here:\n  ./doc/source/devref/unit_tests.rst\n\nSo I will add update that doc with Vishy's hint, and submit for review against this bug.", 
            "date_created": "2011-12-02 17:19:02.912420+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }, 
        {
            "content": "Okay, I just submitted a branch for review that adds the info that Vishy's provided (and gives a link to this bug):\n  https://review.openstack.org/#q,Idc95c12f939948bbbefd84a79b3785e3c2fd752c,n,z", 
            "date_created": "2011-12-02 17:50:31.649537+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }, 
        {
            "content": "Reviewed: https://review.openstack.org/2043\nCommitted: http://github.com/openstack/nova/commit/5f72723b4137ec59b4c6b376ddf6e7cb42df26b5\nSubmitter: Jenkins\nBranch: master\n\n status fixcommitted\n done\n\ncommit 5f72723b4137ec59b4c6b376ddf6e7cb42df26b5\nAuthor: Duncan McGreggor <email address hidden>\nDate: Fri Dec 2 09:48:15 2011 -0800\n\n    Add missing documentation for shared folder issue with unit tests and Python\n    lock file.\n\n    Addresses documentation need raised in bug 897155\n\n    Change-Id: Idc95c12f939948bbbefd84a79b3785e3c2fd752c\n", 
            "date_created": "2011-12-05 18:19:18.220019+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }, 
        {
            "content": "For whatever reason, the bug number is wrong in the git log... it should (obviously) point to bug 882933.", 
            "date_created": "2011-12-05 18:19:57.664994+00:00", 
            "author": "https://api.launchpad.net/1.0/~oubiwann"
        }
    ], 
    "closed": "2011-12-14 09:55:04.535544+00:00"
}