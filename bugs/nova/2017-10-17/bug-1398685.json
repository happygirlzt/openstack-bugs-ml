{
    "status": "Expired", 
    "last_updated": "2016-07-05 09:55:03.743918+00:00", 
    "description": "This is related to another bug: https://bugs.launchpad.net/cinder/+bug/1398588/\n\nIf one attempts to resize a server with volume attachment information that is inaccurate / contradicts Cinder's data (eg it thinks a volume is attached that is not), it results in the server going into an unrecoverable ERROR state:\n\nFault\n\nMessage\n    'NoneType' object has no attribute 'get'\nCode\n    500\nDetails\n    File \"/opt/stack/nova/nova/compute/manager.py\", line 314, in decorated_function return function(self, context, *args, **kwargs) File \"/opt/stack/nova/nova/compute/manager.py\", line 3900, in finish_resize self._set_instance_error_state(context, instance) File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__ six.reraise(self.type_, self.value, self.tb) File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize disk_info, image) File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize old_instance_type, sys_meta) File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__ six.reraise(self.type_, self.value, self.tb) File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize block_device_info, power_on) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5988, in finish_migration write_to_disk=True) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4152, in _get_guest_xml context) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3932, in _get_guest_config flavor): File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3483, in _get_guest_storage_config cfg = self._connect_volume(connection_info, info) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1321, in _connect_volume driver_type = connection_info.get('driver_volume_type')", 
    "tags": [
        "volumes"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1398685", 
    "owner": "None", 
    "id": 1398685, 
    "index": 6572, 
    "openned": "2014-12-03 06:01:40.389580+00:00", 
    "created": "2014-12-03 06:01:40.389580+00:00", 
    "title": "Attempting to resize a server with bad / inaccurate volumeAttachment information results in ERROR state", 
    "comments": [
        {
            "content": "This is related to another bug: https://bugs.launchpad.net/cinder/+bug/1398588/\n\nIf one attempts to resize a server with volume attachment information that is inaccurate / contradicts Cinder's data (eg it thinks a volume is attached that is not), it results in the server going into an unrecoverable ERROR state:\n\nFault\n\nMessage\n    'NoneType' object has no attribute 'get'\nCode\n    500\nDetails\n    File \"/opt/stack/nova/nova/compute/manager.py\", line 314, in decorated_function return function(self, context, *args, **kwargs) File \"/opt/stack/nova/nova/compute/manager.py\", line 3900, in finish_resize self._set_instance_error_state(context, instance) File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__ six.reraise(self.type_, self.value, self.tb) File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize disk_info, image) File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize old_instance_type, sys_meta) File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__ six.reraise(self.type_, self.value, self.tb) File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize block_device_info, power_on) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5988, in finish_migration write_to_disk=True) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4152, in _get_guest_xml context) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3932, in _get_guest_config flavor): File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3483, in _get_guest_storage_config cfg = self._connect_volume(connection_info, info) File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1321, in _connect_volume driver_type = connection_info.get('driver_volume_type')", 
            "date_created": "2014-12-03 06:01:40.389580+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "Full traceback from cpu logs:\n157433:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n157434:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n157435:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n157436:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n157437:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n157438:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n157439:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n157440:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n157441:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     payload)\n157442:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157443:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157444:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n157445:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n157446:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 298, in decorated_function\n157447:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     pass\n157448:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157449:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157450:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 284, in decorated_function\n157451:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n157452:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 348, in decorated_function\n157453:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n157454:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 272, in decorated_function\n157455:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     migration.instance_uuid, exc_info=True)\n157456:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157457:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157458:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 259, in decorated_function\n157459:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n157460:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 326, in decorated_function\n157461:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n157462:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157463:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157464:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 314, in decorated_function\n157465:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n157466:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3900, in finish_resize\n157467:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     self._set_instance_error_state(context, instance)\n157468:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157469:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157470:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3888, in finish_resize\n157471:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     disk_info, image)\n157472:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3856, in _finish_resize\n157473:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     old_instance_type, sys_meta)\n157474:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n157475:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n157476:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize\n157477:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     block_device_info, power_on)\n157478:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5988, in finish_migration\n157479:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     write_to_disk=True)\n157480:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4152, in _get_guest_xml\n157481:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     context)\n157482:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3932, in _get_guest_config\n157483:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     flavor):\n157484:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3483, in _get_guest_storage_config\n157485:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     cfg = self._connect_volume(connection_info, info)\n157486:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1321, in _connect_volume\n157487:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher     driver_type = connection_info.get('driver_volume_type')\n157488:2014-12-10 10:21:13.980 TRACE oslo.messaging.rpc.dispatcher AttributeError: 'NoneType' object has no attribute 'get'\n", 
            "date_created": "2014-12-10 20:07:54.139166+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "trace of a request from the cpu logs:\nscreen-n-cpu.log:283824:2014-12-10 10:58:13.461 DEBUG nova.compute.manager [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Stashing vm_state: active from (pid=21243) _prep_resize /opt/stack/nova/nova/compute/manager.py:3608\nscreen-n-cpu.log:283832:2014-12-10 10:58:13.659 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"compute_resources\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:283833:2014-12-10 10:58:13.660 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:283834:2014-12-10 10:58:13.660 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"resize_claim\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:283835:2014-12-10 10:58:13.660 DEBUG nova.compute.resource_tracker [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Memory overhead for 4096 MB instance; 0 MB from (pid=21243) resize_claim /opt/stack/nova/nova/compute/resource_tracker.py:171\nscreen-n-cpu.log:283836:2014-12-10 10:58:13.662 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Attempting claim: memory 4096 MB, disk 0 GB\nscreen-n-cpu.log:283837:2014-12-10 10:58:13.662 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Total memory: 36198 MB, used: 7168.00 MB\nscreen-n-cpu.log:283838:2014-12-10 10:58:13.663 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] memory limit: 54297.00 MB, free: 47129.00 MB\nscreen-n-cpu.log:283839:2014-12-10 10:58:13.663 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Total disk: 422 GB, used: 0.00 GB\nscreen-n-cpu.log:283840:2014-12-10 10:58:13.663 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] disk limit not specified, defaulting to unlimited\nscreen-n-cpu.log:283841:2014-12-10 10:58:13.676 DEBUG nova.compute.resources.vcpu [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Total CPUs: 8 VCPUs, used: 9.00 VCPUs from (pid=21243) test /opt/stack/nova/nova/compute/resources/vcpu.py:51\nscreen-n-cpu.log:283842:2014-12-10 10:58:13.676 DEBUG nova.compute.resources.vcpu [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] CPUs limit not specified, defaulting to unlimited from (pid=21243) test /opt/stack/nova/nova/compute/resources/vcpu.py:55\nscreen-n-cpu.log:283843:2014-12-10 10:58:13.677 AUDIT nova.compute.claims [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Claim successful\nscreen-n-cpu.log:283844:2014-12-10 10:58:13.739 AUDIT nova.compute.resource_tracker [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Updating from migration f564ef8d-02a4-4dcc-a222-24fb5303daae\nscreen-n-cpu.log:283845:2014-12-10 10:58:13.816 INFO nova.scheduler.client.report [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Compute_service record updated for ('erlking-dev', 'erlking-dev')\nscreen-n-cpu.log:283846:2014-12-10 10:58:13.816 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:283847:2014-12-10 10:58:13.817 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"resize_claim\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:283848:2014-12-10 10:58:13.817 AUDIT nova.compute.manager [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Migrating\nscreen-n-cpu.log:283866:2014-12-10 10:58:14.106 DEBUG nova.network.base_api [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Updating cache with info: [VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.15'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'643675bb-5a3c-4116-8204-6e4de4a51b5f', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:df:18:7f', 'active': False, 'type': u'bridge', 'id': u'90b42c45-6eac-4120-9b02-37412e4c3933', 'qbg_params': None})] from (pid=21243) update_instance_cache_with_nw_info /opt/stack/nova/nova/network/base_api.py:40\nscreen-n-cpu.log:284005:2014-12-10 10:58:14.594 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Starting migrate_disk_and_power_off from (pid=21243) migrate_disk_and_power_off /opt/stack/nova/nova/virt/libvirt/driver.py:5803\nscreen-n-cpu.log:284006:2014-12-10 10:58:14.603 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284007:2014-12-10 10:58:14.629 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284008:2014-12-10 10:58:14.631 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284009:2014-12-10 10:58:14.660 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284010:2014-12-10 10:58:14.668 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Shutting down instance from state 1 from (pid=21243) _clean_shutdown /opt/stack/nova/nova/virt/libvirt/driver.py:2427\nscreen-n-cpu.log:284277:2014-12-10 10:58:18.988 INFO nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Instance shutdown successfully after 4 seconds.\nscreen-n-cpu.log:284281:2014-12-10 10:58:19.003 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae_resize from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284282:2014-12-10 10:58:19.016 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284283:2014-12-10 10:58:19.017 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): mkdir -p /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284284:2014-12-10 10:58:19.031 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284285:2014-12-10 10:58:19.032 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae_resize/disk /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284308:2014-12-10 10:58:19.357 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284309:2014-12-10 10:58:19.357 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae_resize/disk.config /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284319:2014-12-10 10:58:19.388 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284320:2014-12-10 10:58:19.389 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf systool -c fc_host -v from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284326:2014-12-10 10:58:19.499 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 1 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284327:2014-12-10 10:58:19.500 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Could not determine fibre channel world wide node names from (pid=21243) get_volume_connector /opt/stack/nova/nova/virt/libvirt/driver.py:1277\nscreen-n-cpu.log:284328:2014-12-10 10:58:19.501 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf systool -c fc_host -v from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284336:2014-12-10 10:58:19.612 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 1 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284337:2014-12-10 10:58:19.613 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Could not determine fibre channel world wide port names from (pid=21243) get_volume_connector /opt/stack/nova/nova/virt/libvirt/driver.py:1284\nscreen-n-cpu.log:284338:2014-12-10 10:58:19.615 DEBUG nova.volume.cinder [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Cinderclient connection created using URL: http://192.168.0.5:8776/v1/d76033b92ddd4cca8b803decf19cc7a7 from (pid=21243) get_cinder_client_version /opt/stack/nova/nova/volume/cinder.py:255\nscreen-n-cpu.log:284354:2014-12-10 10:58:20.142 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"f564ef8d-02a4-4dcc-a222-24fb5303daae-events\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284355:2014-12-10 10:58:20.142 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"f564ef8d-02a4-4dcc-a222-24fb5303daae-events\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284356:2014-12-10 10:58:20.143 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"_clear_events\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284357:2014-12-10 10:58:20.143 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"f564ef8d-02a4-4dcc-a222-24fb5303daae-events\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284358:2014-12-10 10:58:20.143 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"_clear_events\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284402:2014-12-10 10:58:21.251 DEBUG nova.network.base_api [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Updating cache with info: [VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'meta': {}, 'version': 4, 'type': u'fixed', 'floating_ips': [], 'address': u'10.0.0.15'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'643675bb-5a3c-4116-8204-6e4de4a51b5f', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:df:18:7f', 'active': False, 'type': u'bridge', 'id': u'90b42c45-6eac-4120-9b02-37412e4c3933', 'qbg_params': None})] from (pid=21243) update_instance_cache_with_nw_info /opt/stack/nova/nova/network/base_api.py:40\nscreen-n-cpu.log:284496:2014-12-10 10:58:21.480 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Starting finish_migration from (pid=21243) finish_migration /opt/stack/nova/nova/virt/libvirt/driver.py:5966\nscreen-n-cpu.log:284497:2014-12-10 10:58:21.481 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): qemu-img convert -f raw -O qcow2 /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config_qcow from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284542:2014-12-10 10:58:21.798 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284543:2014-12-10 10:58:21.799 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): mv /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config_qcow /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284546:2014-12-10 10:58:21.819 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284547:2014-12-10 10:58:21.820 DEBUG nova.block_device [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] block_device_list [u'vdb'] from (pid=21243) volume_in_mapping /opt/stack/nova/nova/block_device.py:555\nscreen-n-cpu.log:284548:2014-12-10 10:58:21.821 INFO nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Creating image\nscreen-n-cpu.log:284549:2014-12-10 10:58:21.822 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf chown 1001 /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284553:2014-12-10 10:58:21.932 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284554:2014-12-10 10:58:21.933 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284555:2014-12-10 10:58:21.934 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284556:2014-12-10 10:58:21.934 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Attempting to grab external lock \"65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) external_lock /opt/stack/nova/nova/openstack/common/lockutils.py:178\nscreen-n-cpu.log:284557:2014-12-10 10:58:21.934 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got file lock \"/opt/stack/data/nova/instances/locks/nova-65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) acquire /opt/stack/nova/nova/openstack/common/lockutils.py:93\nscreen-n-cpu.log:284558:2014-12-10 10:58:21.934 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"copy_raw_image\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284559:2014-12-10 10:58:21.935 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/65d99f4d-0485-43f4-8524-fffb9021da5f /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/kernel from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284567:2014-12-10 10:58:21.970 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284568:2014-12-10 10:58:21.971 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Released file lock \"/opt/stack/data/nova/instances/locks/nova-65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) release /opt/stack/nova/nova/openstack/common/lockutils.py:115\nscreen-n-cpu.log:284569:2014-12-10 10:58:21.974 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"65d99f4d-0485-43f4-8524-fffb9021da5f\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284570:2014-12-10 10:58:21.975 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"copy_raw_image\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284571:2014-12-10 10:58:21.975 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/kernel from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284572:2014-12-10 10:58:22.010 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284573:2014-12-10 10:58:22.011 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284574:2014-12-10 10:58:22.012 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284575:2014-12-10 10:58:22.012 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284576:2014-12-10 10:58:22.012 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284577:2014-12-10 10:58:22.013 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284578:2014-12-10 10:58:22.014 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284579:2014-12-10 10:58:22.014 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284580:2014-12-10 10:58:22.014 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Attempting to grab external lock \"8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) external_lock /opt/stack/nova/nova/openstack/common/lockutils.py:178\nscreen-n-cpu.log:284581:2014-12-10 10:58:22.015 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got file lock \"/opt/stack/data/nova/instances/locks/nova-8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) acquire /opt/stack/nova/nova/openstack/common/lockutils.py:93\nscreen-n-cpu.log:284582:2014-12-10 10:58:22.015 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"copy_raw_image\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284583:2014-12-10 10:58:22.015 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): cp /opt/stack/data/nova/instances/_base/8a2b1d88-81ae-4d6f-850d-c3979d238424 /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/ramdisk from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284587:2014-12-10 10:58:22.048 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284588:2014-12-10 10:58:22.049 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Released file lock \"/opt/stack/data/nova/instances/locks/nova-8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) release /opt/stack/nova/nova/openstack/common/lockutils.py:115\nscreen-n-cpu.log:284589:2014-12-10 10:58:22.049 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"8a2b1d88-81ae-4d6f-850d-c3979d238424\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284590:2014-12-10 10:58:22.050 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"copy_raw_image\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284591:2014-12-10 10:58:22.051 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/ramdisk from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284592:2014-12-10 10:58:22.078 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284593:2014-12-10 10:58:22.079 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284594:2014-12-10 10:58:22.080 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284595:2014-12-10 10:58:22.080 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284596:2014-12-10 10:58:22.081 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284597:2014-12-10 10:58:22.081 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284598:2014-12-10 10:58:22.082 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284599:2014-12-10 10:58:22.082 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284600:2014-12-10 10:58:22.082 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284601:2014-12-10 10:58:22.100 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284602:2014-12-10 10:58:22.101 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284603:2014-12-10 10:58:22.101 INFO nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Using config drive\nscreen-n-cpu.log:284607:2014-12-10 10:58:22.177 INFO nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Creating config drive at /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config\nscreen-n-cpu.log:284608:2014-12-10 10:58:22.178 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): genisoimage -o /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config -ldots -allow-lowercase -allow-multidot -l -publisher OpenStack Nova 2014.2.0 -quiet -J -r -V config-2 /tmp/tmpgXs3Y4 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284609:2014-12-10 10:58:22.199 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284610:2014-12-10 10:58:22.202 DEBUG glanceclient.common.http [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] curl -i -X HEAD -H 'Accept-Encoding: gzip, deflate' -H 'Accept: */*' -H 'User-Agent: python-glanceclient' -H 'Connection: keep-alive' -H 'X-Auth-Token: {SHA1}7cfd5fc2012163c879e199e51e5967c2b7f74907' -H 'Content-Type: application/octet-stream' http://192.168.0.5:9292/v1/images/5f144852-a87f-4dec-8f1f-7adac1a5c026 from (pid=21243) log_curl_request /opt/stack/python-glanceclient/glanceclient/common/http.py:118\nscreen-n-cpu.log:284611:2014-12-10 10:58:22.430 DEBUG glanceclient.common.http [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] \nscreen-n-cpu.log:284654:2014-12-10 10:58:22.432 DEBUG nova.virt.libvirt.driver [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Start _get_guest_xml network_info=[VIF({'profile': None, 'ovs_interfaceid': None, 'network': Network({'bridge': u'br100', 'subnets': [Subnet({'ips': [FixedIP({'version': 4, 'vif_mac': u'fa:16:3e:df:18:7f', 'floating_ips': [], 'label': u'private', 'meta': {}, 'address': u'10.0.0.15', 'type': u'fixed'})], 'version': 4, 'meta': {u'dhcp_server': u'10.0.0.1'}, 'dns': [], 'routes': [], 'cidr': u'10.0.0.0/24', 'gateway': IP({'meta': {}, 'version': 4, 'type': u'gateway', 'address': u'10.0.0.1'})}), Subnet({'ips': [], 'version': None, 'meta': {u'dhcp_server': None}, 'dns': [], 'routes': [], 'cidr': None, 'gateway': IP({'meta': {}, 'version': None, 'type': u'gateway', 'address': None})})], 'meta': {u'tenant_id': None, u'should_create_bridge': True, u'bridge_interface': u'eth1'}, 'id': u'643675bb-5a3c-4116-8204-6e4de4a51b5f', 'label': u'private'}), 'devname': None, 'vnic_type': u'normal', 'qbh_params': None, 'meta': {}, 'details': {}, 'address': u'fa:16:3e:df:18:7f', 'active': False, 'type': u'bridge', 'id': u'90b42c45-6eac-4120-9b02-37412e4c3933', 'qbg_params': None})] disk_info={'disk_bus': 'virtio', 'cdrom_bus': 'ide', 'mapping': {u'/dev/vdb': {'bus': 'virtio', 'type': 'disk', 'dev': u'vdb'}, 'disk.config': {'bus': 'ide', 'type': 'cdrom', 'dev': 'hdd'}, 'disk': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': 'vda'}, 'root': {'bus': 'virtio', 'boot_index': '1', 'type': 'disk', 'dev': 'vda'}}} image_meta={u'min_disk': 0, u'container_format': u'ami', u'min_ram': 0, u'disk_format': u'ami', 'properties': {u'image_state': u'available', u'old_vm_state': u'active', 'old_instance_type_flavorid': u'9998', 'old_instance_type_vcpus': u'2', u'instance_type_name': u'm1.nano', u'new_instance_type_ephemeral_gb': u'0', u'base_image_ref': u'841ae14a-a654-4aeb-b4ff-f75a4aefddc5', u'new_instance_type_root_gb': u'0', u'user_id': u'429322689ab14d88ab60b8bfd176b558', u'image_type': u'snapshot', u'instance_type_ephemeral_gb': u'0', u'new_instance_type_rxtx_factor': u'1.0', u'kernel_id': u'65d99f4d-0485-43f4-8524-fffb9021da5f', u'network_allocated': u'True', 'old_instance_type_swap': u'0', 'old_instance_type_root_gb': u'0', u'new_instance_type_swap': u'0', 'old_instance_type_ephemeral_gb': u'0', u'image_location': u'snapshot', 'old_instance_type_rxtx_factor': u'1.0', u'ramdisk_id': u'8a2b1d88-81ae-4d6f-850d-c3979d238424', u'instance_type_root_gb': u'0', u'new_instance_type_name': u'test1', 'old_instance_type_id': u'10', u'new_instance_type_flavorid': u'9999', u'instance_type_rxtx_factor': u'1.0', u'new_instance_type_memory_mb': u'4096', u'new_instance_type_id': u'9', u'instance_type_vcpus': u'2', u'instance_uuid': u'b15d9d7d-0a17-4c96-8856-7f21ac52eb1e', u'instance_type_memory_mb': u'4096', u'instance_type_swap': u'0', u'new_instance_type_vcpus': u'2', 'old_instance_type_memory_mb': u'2048', u'instance_type_id': u'6', u'instance_type_flavorid': u'9999', u'owner_id': u'd76033b92ddd4cca8b803decf19cc7a7', 'old_instance_type_name': u'test2'}} rescue=None block_device_info={'swap': None, 'ephemerals': [], 'block_device_mapping': [{'guest_format': None, 'boot_index': None, 'mount_device': u'/dev/vdb', 'connection_info': None, 'disk_bus': 'virtio', 'device_type': 'disk', 'delete_on_termination': False}]} from (pid=21243) _get_guest_xml /opt/stack/nova/nova/virt/libvirt/driver.py:4149\nscreen-n-cpu.log:284655:2014-12-10 10:58:22.455 DEBUG nova.objects.instance [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Lazy-loading `numa_topology' on Instance uuid f564ef8d-02a4-4dcc-a222-24fb5303daae from (pid=21243) obj_load_attr /opt/stack/nova/nova/objects/instance.py:574\nscreen-n-cpu.log:284656:2014-12-10 10:58:22.468 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Getting desirable topologies for flavor Flavor(created_at=2014-12-10T17:31:11Z,deleted=False,deleted_at=None,disabled=False,ephemeral_gb=0,extra_specs={},flavorid='9999',id=9,is_public=True,memory_mb=4096,name='test1',projects=<?>,root_gb=0,rxtx_factor=1.0,swap=0,updated_at=None,vcpu_weight=0,vcpus=2) and image_meta {u'min_disk': 0, u'container_format': u'ami', u'min_ram': 0, u'disk_format': u'ami', 'properties': {u'image_state': u'available', u'old_vm_state': u'active', 'old_instance_type_flavorid': u'9998', 'old_instance_type_vcpus': u'2', u'instance_type_name': u'm1.nano', u'new_instance_type_ephemeral_gb': u'0', u'base_image_ref': u'841ae14a-a654-4aeb-b4ff-f75a4aefddc5', u'new_instance_type_root_gb': u'0', u'user_id': u'429322689ab14d88ab60b8bfd176b558', u'image_type': u'snapshot', u'instance_type_ephemeral_gb': u'0', u'new_instance_type_rxtx_factor': u'1.0', u'kernel_id': u'65d99f4d-0485-43f4-8524-fffb9021da5f', u'network_allocated': u'True', 'old_instance_type_swap': u'0', 'old_instance_type_root_gb': u'0', u'new_instance_type_swap': u'0', 'old_instance_type_ephemeral_gb': u'0', u'image_location': u'snapshot', 'old_instance_type_rxtx_factor': u'1.0', u'ramdisk_id': u'8a2b1d88-81ae-4d6f-850d-c3979d238424', u'instance_type_root_gb': u'0', u'new_instance_type_name': u'test1', 'old_instance_type_id': u'10', u'new_instance_type_flavorid': u'9999', u'instance_type_rxtx_factor': u'1.0', u'new_instance_type_memory_mb': u'4096', u'new_instance_type_id': u'9', u'instance_type_vcpus': u'2', u'instance_uuid': u'b15d9d7d-0a17-4c96-8856-7f21ac52eb1e', u'instance_type_memory_mb': u'4096', u'instance_type_swap': u'0', u'new_instance_type_vcpus': u'2', 'old_instance_type_memory_mb': u'2048', u'instance_type_id': u'6', u'instance_type_flavorid': u'9999', u'owner_id': u'd76033b92ddd4cca8b803decf19cc7a7', 'old_instance_type_name': u'test2'}} from (pid=21243) get_desirable_configs /opt/stack/nova/nova/virt/hardware.py:501\nscreen-n-cpu.log:284657:2014-12-10 10:58:22.474 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Flavor limits 65536:65536:65536 from (pid=21243) get_topology_constraints /opt/stack/nova/nova/virt/hardware.py:295\nscreen-n-cpu.log:284658:2014-12-10 10:58:22.475 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Image limits 65536:65536:65536 from (pid=21243) get_topology_constraints /opt/stack/nova/nova/virt/hardware.py:308\nscreen-n-cpu.log:284659:2014-12-10 10:58:22.475 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Flavor pref -1:-1:-1 from (pid=21243) get_topology_constraints /opt/stack/nova/nova/virt/hardware.py:331\nscreen-n-cpu.log:284660:2014-12-10 10:58:22.476 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Image pref -1:-1:-1 from (pid=21243) get_topology_constraints /opt/stack/nova/nova/virt/hardware.py:353\nscreen-n-cpu.log:284661:2014-12-10 10:58:22.476 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Chosen -1:-1:-1 limits 65536:65536:65536 from (pid=21243) get_topology_constraints /opt/stack/nova/nova/virt/hardware.py:382\nscreen-n-cpu.log:284662:2014-12-10 10:58:22.476 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Build topologies for 2 vcpu(s) 2:2:2 from (pid=21243) get_possible_topologies /opt/stack/nova/nova/virt/hardware.py:418\nscreen-n-cpu.log:284663:2014-12-10 10:58:22.477 DEBUG nova.virt.hardware [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got 3 possible topologies from (pid=21243) get_possible_topologies /opt/stack/nova/nova/virt/hardware.py:441\nscreen-n-cpu.log:284664:2014-12-10 10:58:22.481 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.config from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:161\nscreen-n-cpu.log:284665:2014-12-10 10:58:22.521 DEBUG nova.openstack.common.processutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Result was 0 from (pid=21243) execute /opt/stack/nova/nova/openstack/common/processutils.py:195\nscreen-n-cpu.log:284666:2014-12-10 10:58:22.523 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284667:2014-12-10 10:58:22.523 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284668:2014-12-10 10:58:22.523 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284669:2014-12-10 10:58:22.524 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"/opt/stack/data/nova/instances/f564ef8d-02a4-4dcc-a222-24fb5303daae/disk.info\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284670:2014-12-10 10:58:22.524 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"write_to_disk_info_file\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284672:2014-12-10 10:58:22.724 ERROR nova.compute.manager [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] [instance: f564ef8d-02a4-4dcc-a222-24fb5303daae] Setting instance vm_state to ERROR\nscreen-n-cpu.log:284709:2014-12-10 10:58:23.065 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Using existing semaphore \"compute_resources\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:202\nscreen-n-cpu.log:284740:2014-12-10 10:58:23.476 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284741:2014-12-10 10:58:23.477 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"update_usage\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284745:2014-12-10 10:58:23.584 INFO nova.scheduler.client.report [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Compute_service record updated for ('erlking-dev', 'erlking-dev')\nscreen-n-cpu.log:284746:2014-12-10 10:58:23.585 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284747:2014-12-10 10:58:23.585 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"update_usage\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284801:2014-12-10 10:58:24.269 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Created new semaphore \"compute_resources\" from (pid=21243) internal_lock /opt/stack/nova/nova/openstack/common/lockutils.py:206\nscreen-n-cpu.log:284802:2014-12-10 10:58:24.269 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Acquired semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:229\nscreen-n-cpu.log:284803:2014-12-10 10:58:24.269 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Got semaphore / lock \"update_usage\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:271\nscreen-n-cpu.log:284811:2014-12-10 10:58:24.471 INFO nova.scheduler.client.report [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Compute_service record updated for ('erlking-dev', 'erlking-dev')\nscreen-n-cpu.log:284812:2014-12-10 10:58:24.472 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Releasing semaphore \"compute_resources\" from (pid=21243) lock /opt/stack/nova/nova/openstack/common/lockutils.py:238\nscreen-n-cpu.log:284813:2014-12-10 10:58:24.472 DEBUG nova.openstack.common.lockutils [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Semaphore / lock released \"update_usage\" from (pid=21243) inner /opt/stack/nova/nova/openstack/common/lockutils.py:275\nscreen-n-cpu.log:284814:2014-12-10 10:58:24.475 ERROR oslo.messaging.rpc.dispatcher [req-4cad855e-60c2-4ac6-ab20-078285564b5a demo demo] Exception during message handling: 'NoneType' object has no attribute 'get'\n", 
            "date_created": "2014-12-10 20:08:30.360499+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "I have following logs which is similar to the issue you have \nbut I need to go back to see whether we can keep the instance status if there's something wrong \nduring resize process", 
            "date_created": "2014-12-23 07:08:32.111998+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "2014-12-23 00:33:19.018 ERROR nova.compute.manager [^[[01;36mreq-d09ffb44-cb79-4c92-9009-cd0032bd5689 ^[[00;36mdemo demo] ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] Setting instance vm_state to ERROR^[[00m\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00mTraceback (most recent call last):\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 6109, in _error_out_instance_on_exception\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    yield\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 3769, in resize_instance\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    self._terminate_volume_connections(context, instance, bdms)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 3798, in _terminate_volume_connections\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    connector)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/opt/stack/nova/nova/volume/cinder.py\", line 168, in wrapper\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    res = method(self, ctx, volume_id, *args, **kwargs)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/opt/stack/nova/nova/volume/cinder.py\", line 343, in terminate_connection\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    connector)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/usr/lib/python2.6/site-packages/cinderclient/v2/volumes.py\", line 384, in terminate_connection\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    {'connector': connector})\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/usr/lib/python2.6/site-packages/cinderclient/v2/volumes.py\", line 311, in _action\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    return self.api.client.post(url, body=body)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/usr/lib/python2.6/site-packages/cinderclient/client.py\", line 305, in post\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    return self._cs_request(url, 'POST', **kwargs)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m  File \"/usr/lib/python2.6/site-packages/cinderclient/client.py\", line 294, in _cs_request\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00m    raise exceptions.ConnectionError(msg)\n2014-12-23 00:33:19.018 TRACE nova.compute.manager ^[[01;35m[instance: 7a2242e6-95f6-481c-927c-c944d9b7e02c] ^[[00mCinderConnectionFailed: Connection to cinder host failed: Unable to establish connection: ('Connection aborted.', error(111, 'ECONNREFUSED'))", 
            "date_created": "2014-12-23 07:08:39.300637+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "To save other folk digging - this happens because the invalid details are only discovered at the end of the migration.", 
            "date_created": "2015-02-15 23:52:45.641734+00:00", 
            "author": "https://api.launchpad.net/1.0/~lifeless"
        }, 
        {
            "content": "File \"/opt/stack/nova/nova/compute/manager.py\", line 3851, in _finish_resize\n          block_device_info, power_on)\nFile \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 5988, in finish_migration\n          write_to_disk=True)\nFile \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4152, in _get_guest_xml\n          context)\nFile \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3932, in _get_guest_config\n          flavor):\nFile \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 3483, in _get_guest_storage_config\n          cfg = self._connect_volume(connection_info, info)\nFile \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1321, in _connect_volume\n          driver_type = connection_info.get('driver_volume_type')\nAttributeError: 'NoneType' object has no attribute 'get'\n", 
            "date_created": "2015-02-15 23:55:40.212351+00:00", 
            "author": "https://api.launchpad.net/1.0/~lifeless"
        }, 
        {
            "content": "I was seeing this in connection with https://bugs.launchpad.net/cinder/+bug/1398588, so this is likely invalid.\nWill attempt to retest again on a fresh dev environment and will update both bugs with the results this week.\n", 
            "date_created": "2015-02-16 00:18:23.700903+00:00", 
            "author": "https://api.launchpad.net/1.0/~patrick-crews"
        }, 
        {
            "content": "\nThis is an automated cleanup. This bug report has been closed because it\nis older than 18 months and there is no open code change to fix this.\nAfter this time it is unlikely that the circumstances which lead to\nthe observed issue can be reproduced.\n\nIf you can reproduce the bug, please:\n* reopen the bug report (set to status \"New\")\n* AND add the detailed steps to reproduce the issue (if applicable)\n* AND leave a comment \"CONFIRMED FOR: <RELEASE_NAME>\"\n  Only still supported release names are valid (LIBERTY, MITAKA, OCATA, NEWTON).\n  Valid example: CONFIRMED FOR: LIBERTY\n", 
            "date_created": "2016-07-05 09:55:02.993624+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ], 
    "closed": "2016-07-05 09:55:00.418539+00:00"
}