{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:57:41.034612+00:00", 
    "description": "Build: 2011.1~bzr546-0ubuntu0ppa1~lucid1 from https://launchpad.net/~nova-core/+archive/trunk\nEnvironment: 1 cloud controller (api/network/scheduler/objectstore), 1 compute node (compute/volume)\nDetails: After a previous vm launch failed, the next attempt at launching a VM failed because the security group chain file already existed on disk.  Stack trace is pretty clear.\n\n(nova.exception 2011.1-workspace:tarmac-20110111215430-m7kkn94d5heffw6x): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 367, in spawn\n(nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1017, in prepare_instance_filter\n(nova.exception): TRACE:     self.apply_ruleset()\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1024, in apply_ruleset\n(nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 144, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: sudo iptables-restore\n(nova.exception): TRACE: Exit code: 2\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: \"iptables-restore v1.4.4: error creating chain 'nova-sg-2':File exists\\n\\nError occurred at line: 13\\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\\n\"\n(nova.exception): TRACE: \n(nova.compute.manager 2011.1-workspace:tarmac-20110111215430-m7kkn94d5heffw6x): ERROR [IH0OJV5Z9BHGBEW527S1 admin default-project] instance 17: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: sudo iptables-restore\n(nova.compute.manager): TRACE: Exit code: 2\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: \"iptables-restore v1.4.4: error creating chain 'nova-sg-2':File exists\\n\\nError occurred at line: 13\\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\\n\"\n(nova.compute.manager): TRACE: \nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000011'", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/701734", 
    "owner": "https://api.launchpad.net/1.0/~soren", 
    "id": 701734, 
    "index": 3262, 
    "openned": "2011-01-12 00:41:19.144504+00:00", 
    "created": "2011-01-12 00:41:19.144504+00:00", 
    "title": "vm launch fails if security-group chain file already exists", 
    "comments": [
        {
            "content": "Build: 2011.1~bzr546-0ubuntu0ppa1~lucid1 from https://launchpad.net/~nova-core/+archive/trunk\nEnvironment: 1 cloud controller (api/network/scheduler/objectstore), 1 compute node (compute/volume)\nDetails: After a previous vm launch failed, the next attempt at launching a VM failed because the security group chain file already existed on disk.  Stack trace is pretty clear.\n\n(nova.exception 2011.1-workspace:tarmac-20110111215430-m7kkn94d5heffw6x): ERROR [N/A] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 82, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 367, in spawn\n(nova.exception): TRACE:     self.firewall_driver.prepare_instance_filter(instance)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1017, in prepare_instance_filter\n(nova.exception): TRACE:     self.apply_ruleset()\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 1024, in apply_ruleset\n(nova.exception): TRACE:     process_input='\\n'.join(new_filter))\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/utils.py\", line 144, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: sudo iptables-restore\n(nova.exception): TRACE: Exit code: 2\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: \"iptables-restore v1.4.4: error creating chain 'nova-sg-2':File exists\\n\\nError occurred at line: 13\\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\\n\"\n(nova.exception): TRACE: \n(nova.compute.manager 2011.1-workspace:tarmac-20110111215430-m7kkn94d5heffw6x): ERROR [IH0OJV5Z9BHGBEW527S1 admin default-project] instance 17: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 208, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 88, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: sudo iptables-restore\n(nova.compute.manager): TRACE: Exit code: 2\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: \"iptables-restore v1.4.4: error creating chain 'nova-sg-2':File exists\\n\\nError occurred at line: 13\\nTry `iptables-restore -h' or 'iptables-restore --help' for more information.\\n\"\n(nova.compute.manager): TRACE: \nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-00000011'", 
            "date_created": "2011-01-12 00:41:19.144504+00:00", 
            "author": "https://api.launchpad.net/1.0/~rlucio"
        }, 
        {
            "content": "I believe this was fixed in r561.", 
            "date_created": "2011-01-19 12:57:48.114243+00:00", 
            "author": "https://api.launchpad.net/1.0/~soren"
        }
    ], 
    "closed": "2011-02-07 13:57:39.210240+00:00"
}