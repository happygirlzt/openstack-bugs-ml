{
    "status": "Invalid", 
    "last_updated": "2014-03-10 12:31:36.581040+00:00", 
    "description": "I'm using Devstack. I discovered this using the dashboard, here's how to reproduce on the command line.  The image is a raw Fedora 20 cloud image ( http://download.fedoraproject.org/pub/fedora/linux/releases/20/Images/x86_64/Fedora-x86_64-20-20131211.1-sda.raw.xz ).\n\n$ cinder create --image-id 16e4aba3-7980-4b4a-aea5-787be62b03ef 1\n\nThen using the id of the new volume:\n\n$ nova boot --boot-volume 2e42b0ac-5910-4e11-ab07-5968d984b364 --flavor 1 test\n\nThe instances errors, from nova show:\n| fault                                | {\"message\": \"'name'\", \"code\": 500, \"created\": \"2014-03-07T11:03:53Z\"} |\n\nNova CPU logs:\n\n2014-03-07 11:03:53.735 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is 4ea53d662ce44c7aaae28fb8feecd08e. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.820 DEBUG nova.compute.utils [req-6e38fca5-410f-421a-87fc-b83fd3afede0 demo demo] [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] 'name' from (pid=11493) notify_about_instance_usage /opt/stack/nova/nova/compute/utils.py:335\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] Traceback (most recent call last):\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead]   File \"/opt/stack/nova/nova/compute/manager.py\", line 971, in _run_instance\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead]     extra_usage_info = {\"image_name\": image_meta['name']}\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] KeyError: 'name'\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] \n2014-03-07 11:03:53.821 DEBUG nova.openstack.common.lockutils [req-6e38fca5-410f-421a-87fc-b83fd3afede0 demo demo] Semaphore / lock released \"do_run_instance\" from (pid=11493) inner /opt/stack/nova/nova/openstack/common/lockutils.py:252\n2014-03-07 11:03:53.822 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is fd7da43b1fcf429b9b6e7dbe964e8aba from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.822 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is e3df4171e97c47ce89096f0593cb02cf. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.846 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is d8f418d961fd49d092767a310df0348c from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.847 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is d3eebe0a77294d209d9918a4633a6fa0. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.885 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is 08a04f80a6294785947e6c07ed1b6c57 from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.885 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is 1f76132cc21d4d8280c45ea661b9d4fb. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.957 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: 'name'\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 244, in decorated_function\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 259, in decorated_function\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 1848, in run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     do_run_instance()\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 249, in inner\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 1847, in do_run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     legacy_bdm_in_spec)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 996, in _run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     notify(\"error\", fault=e)  # notify that build failed\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 971, in _run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     extra_usage_info = {\"image_name\": image_meta['name']}\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher KeyError: 'name'\n2014-03-07 11:03:53.959 ERROR oslo.messaging._drivers.common [-] Returning exception 'name' to caller", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1289283", 
    "owner": "None", 
    "id": 1289283, 
    "index": 5899, 
    "openned": "2014-03-07 11:09:52.985392+00:00", 
    "created": "2014-03-07 11:09:52.985392+00:00", 
    "title": "Cannot boot from volume that was created from an image", 
    "comments": [
        {
            "content": "I'm using Devstack. I discovered this using the dashboard, here's how to reproduce on the command line.  The image is a raw Fedora 20 cloud image ( http://download.fedoraproject.org/pub/fedora/linux/releases/20/Images/x86_64/Fedora-x86_64-20-20131211.1-sda.raw.xz ).\n\n$ cinder create --image-id 16e4aba3-7980-4b4a-aea5-787be62b03ef 1\n\nThen using the id of the new volume:\n\n$ nova boot --boot-volume 2e42b0ac-5910-4e11-ab07-5968d984b364 --flavor 1 test\n\nThe instances errors, from nova show:\n| fault                                | {\"message\": \"'name'\", \"code\": 500, \"created\": \"2014-03-07T11:03:53Z\"} |\n\nNova CPU logs:\n\n2014-03-07 11:03:53.735 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is 4ea53d662ce44c7aaae28fb8feecd08e. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.820 DEBUG nova.compute.utils [req-6e38fca5-410f-421a-87fc-b83fd3afede0 demo demo] [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] 'name' from (pid=11493) notify_about_instance_usage /opt/stack/nova/nova/compute/utils.py:335\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] Traceback (most recent call last):\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead]   File \"/opt/stack/nova/nova/compute/manager.py\", line 971, in _run_instance\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead]     extra_usage_info = {\"image_name\": image_meta['name']}\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] KeyError: 'name'\n2014-03-07 11:03:53.820 TRACE nova.compute.utils [instance: 82f1d951-b5d0-43fa-a244-922beae98ead] \n2014-03-07 11:03:53.821 DEBUG nova.openstack.common.lockutils [req-6e38fca5-410f-421a-87fc-b83fd3afede0 demo demo] Semaphore / lock released \"do_run_instance\" from (pid=11493) inner /opt/stack/nova/nova/openstack/common/lockutils.py:252\n2014-03-07 11:03:53.822 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is fd7da43b1fcf429b9b6e7dbe964e8aba from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.822 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is e3df4171e97c47ce89096f0593cb02cf. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.846 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is d8f418d961fd49d092767a310df0348c from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.847 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is d3eebe0a77294d209d9918a4633a6fa0. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.885 DEBUG oslo.messaging._drivers.amqpdriver [-] MSG_ID is 08a04f80a6294785947e6c07ed1b6c57 from (pid=11493) _send /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqpdriver.py:377\n2014-03-07 11:03:53.885 DEBUG oslo.messaging._drivers.amqp [-] UNIQUE_ID is 1f76132cc21d4d8280c45ea661b9d4fb. from (pid=11493) _add_unique_id /opt/stack/oslo.messaging/oslo/messaging/_drivers/amqp.py:338\n2014-03-07 11:03:53.957 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: 'name'\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 244, in decorated_function\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 259, in decorated_function\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 1848, in run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     do_run_instance()\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 249, in inner\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 1847, in do_run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     legacy_bdm_in_spec)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 996, in _run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     notify(\"error\", fault=e)  # notify that build failed\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 971, in _run_instance\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher     extra_usage_info = {\"image_name\": image_meta['name']}\n2014-03-07 11:03:53.957 TRACE oslo.messaging.rpc.dispatcher KeyError: 'name'\n2014-03-07 11:03:53.959 ERROR oslo.messaging._drivers.common [-] Returning exception 'name' to caller", 
            "date_created": "2014-03-07 11:09:52.985392+00:00", 
            "author": "https://api.launchpad.net/1.0/~jpichon"
        }, 
        {
            "content": "Is that using today nova repo?\nCouldn't not reproduce, neither the line number seems to be the right one for run_instance", 
            "date_created": "2014-03-07 16:42:31.346995+00:00", 
            "author": "https://api.launchpad.net/1.0/~leandro-i-costantino"
        }, 
        {
            "content": "I'll make sure my repository is up to date and aim to reproduce on Monday.", 
            "date_created": "2014-03-07 17:47:23.918052+00:00", 
            "author": "https://api.launchpad.net/1.0/~jpichon"
        }, 
        {
            "content": "I can't reproduce the KeyError on a fresh devstack rebuilt from scratch. Now the new instance fails to boot due to bug 1290302, which is already being looked into. Thanks for the comment and sorry for the noise! ", 
            "date_created": "2014-03-10 12:31:27.603501+00:00", 
            "author": "https://api.launchpad.net/1.0/~jpichon"
        }
    ], 
    "closed": "2014-03-10 12:31:33.804472+00:00"
}