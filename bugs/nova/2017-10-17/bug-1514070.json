{
    "status": "Invalid", 
    "last_updated": "2015-11-07 16:12:53.298872+00:00", 
    "description": "Environment:\ncentos 7\nopenstack liberty\n\n# rpm -qa|grep nova\nopenstack-nova-api-12.0.0-1.el7.noarch\npython-novaclient-2.30.1-1.el7.noarch\nopenstack-nova-novncproxy-12.0.0-1.el7.noarch\nopenstack-nova-conductor-12.0.0-1.el7.noarch\npython-nova-12.0.0-1.el7.noarch\nopenstack-nova-console-12.0.0-1.el7.noarch\nopenstack-nova-common-12.0.0-1.el7.noarch\nopenstack-nova-compute-12.0.0-1.el7.noarch\nopenstack-nova-cert-12.0.0-1.el7.noarch\nopenstack-nova-scheduler-12.0.0-1.el7.noarch\n\nNetwork configuration:\n\n# neutron net-list\n+--------------------------------------+------+-------------------------------------------------------+\n| id                                   | name | subnets                                               |\n+--------------------------------------+------+-------------------------------------------------------+\n| 286b3e3c-9075-496f-8899-c9890397f087 | net2 | 0a9ff171-0455-459e-b3c6-486ab90ba83d 10.0.1.0/24      |\n|                                      |      | de602f61-8e05-4337-bc9d-c9f8265bb937 1000:2000::/24   |\n| a3931414-73c3-40c9-a39b-d93ae38844a2 | net3 | b6ce48ab-9387-4128-baa3-4a893dd27bb7 10.0.2.0/24      |\n| a5d1181f-bedd-40a5-8b4a-5574b74dba61 | net1 | 72be780a-6df9-47ea-991c-e6fa97396adc 192.168.122.0/24 |\n+--------------------------------------+------+-------------------------------------------------------+\n\nNetwork net2 have two subnets.\n\nCreated new instance:\n# nova boot \\\n\t--flavor 2 \\\n\t--image fedora23 \\\n\t--config-drive=True \\\n\t--nic net-id=a5d1181f-bedd-40a5-8b4a-5574b74dba61 \\\n\t--nic net-id=286b3e3c-9075-496f-8899-c9890397f087 \\\n\t--nic net-id=a3931414-73c3-40c9-a39b-d93ae38844a2 \\\n\t--user-data=/root/cloud-config \\\n\ttest\n\n# nova list\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                                                     |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n| d9d76e4b-62c8-4a84-9e4b-66481d303c83 | test | ACTIVE | -          | Running     | net3=10.0.2.115; net2=10.0.1.100, 1000:2000:3000::1101; net1=192.168.122.116 |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n\n# nova show test\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                   |\n| OS-EXT-AZ:availability_zone          | nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | localhost.localdomain                                    |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | localhost.localdomain                                    |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000012                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2015-11-07T13:17:00.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         | True                                                     |\n| created                              | 2015-11-07T13:16:50Z                                     |\n| flavor                               | m1.small (2)                                             |\n| hostId                               | d8d01459db9617763612ca6ed08bea56d168bfeac10eb90dd21b0df0 |\n| id                                   | d9d76e4b-62c8-4a84-9e4b-66481d303c83                     |\n| image                                | fedora23 (54d9ba46-b4bb-4a39-ae9d-bbbbfc0f024d)          |\n| key_name                             | -                                                        |\n| metadata                             | {}                                                       |\n| name                                 | test                                                     |\n| net1 network                         | 192.168.122.116                                          |\n| net2 network                         | 10.0.1.100, 1000:2000:3000::1101                         |\n| net3 network                         | 10.0.2.115                                               |\n| os-extended-volumes:volumes_attached | []                                                       |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | 7c89d90e17594c91943816a880c88a54                         |\n| updated                              | 2015-11-07T13:17:00Z                                     |\n| user_id                              | 1e84edc572b949cd8a1512e9dea35e6c                         |\n+--------------------------------------+----------------------------------------------------------+\n\nInstance have 2 ip addresses on the net2 network: 10.0.1.100, 1000:2000:3000::1101\n\n# neutron port-show c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n| Field                 | Value                                                                                                                                |\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n| admin_state_up        | True                                                                                                                                 |\n| allowed_address_pairs |                                                                                                                                      |\n| binding:host_id       | localhost.localdomain                                                                                                                |\n| binding:profile       | {}                                                                                                                                   |\n| binding:vif_details   | {\"port_filter\": true, \"ovs_hybrid_plug\": true}                                                                                       |\n| binding:vif_type      | ovs                                                                                                                                  |\n| binding:vnic_type     | normal                                                                                                                               |\n| device_id             | d9d76e4b-62c8-4a84-9e4b-66481d303c83                                                                                                 |\n| device_owner          | compute:None                                                                                                                         |\n| dns_assignment        | {\"hostname\": \"host-10-0-1-100\", \"ip_address\": \"10.0.1.100\", \"fqdn\": \"host-10-0-1-100.openstacklocal.\"}                               |\n|                       | {\"hostname\": \"host-1000-2000-3000--1101\", \"ip_address\": \"1000:2000:3000::1101\", \"fqdn\": \"host-1000-2000-3000--1101.openstacklocal.\"} |\n| dns_name              |                                                                                                                                      |\n| extra_dhcp_opts       |                                                                                                                                      |\n| fixed_ips             | {\"subnet_id\": \"0a9ff171-0455-459e-b3c6-486ab90ba83d\", \"ip_address\": \"10.0.1.100\"}                                                    |\n|                       | {\"subnet_id\": \"de602f61-8e05-4337-bc9d-c9f8265bb937\", \"ip_address\": \"1000:2000:3000::1101\"}                                          |\n| id                    | c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6                                                                                                 |\n| mac_address           | fa:16:3e:2e:b6:72                                                                                                                    |\n| name                  |                                                                                                                                      |\n| network_id            | 286b3e3c-9075-496f-8899-c9890397f087                                                                                                 |\n| security_groups       | 60c1ba09-e0a3-443e-923e-af40963d939b                                                                                                 |\n| status                | ACTIVE                                                                                                                               |\n| tenant_id             | 7c89d90e17594c91943816a880c88a54                                                                                                     |\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n\nInto the instance:\n# ip a show eth1\n3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether fa:16:3e:2e:b6:72 brd ff:ff:ff:ff:ff:ff\n    inet 10.0.1.100/24 brd 10.0.1.255 scope global eth1\n       valid_lft forever preferred_lft forever\n    inet6 1000:2000:3000::1101/24 scope global \n       valid_lft forever preferred_lft forever\n    inet6 fe80::f816:3eff:fe2e:b672/64 scope link \n       valid_lft forever preferred_lft forever\n\n# mount /dev/disk/by-label/config-2 /mnt\n\n# cat /mnt/openstack/latest/network_data.json|python3 -m json.tool\n{\n    \"links\": [\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:57:e9:90\",\n            \"id\": \"tap2f3d0dac-cf\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"2f3d0dac-cfd4-47b8-8032-c96f4f81b055\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:2e:b6:72\",\n            \"id\": \"tapc2f0b53c-8f\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:fb:60:b4\",\n            \"id\": \"tap5788427c-a4\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"5788427c-a415-4aaa-86a1-632e6a51c59c\"\n        }\n    ],\n    \"networks\": [\n        {\n            \"id\": \"network0\",\n            \"link\": \"tap2f3d0dac-cf\",\n            \"network_id\": \"a5d1181f-bedd-40a5-8b4a-5574b74dba61\",\n            \"type\": \"ipv4_dhcp\"\n        },\n        {\n            \"id\": \"network1\",\n            \"ip_address\": \"10.0.1.100\",\n            \"link\": \"tapc2f0b53c-8f\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"286b3e3c-9075-496f-8899-c9890397f087\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        },\n        {\n            \"id\": \"network2\",\n            \"ip_address\": \"10.0.2.115\",\n            \"link\": \"tap5788427c-a4\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"a3931414-73c3-40c9-a39b-d93ae38844a2\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        }\n    ],\n    \"services\": []\n}\n\nnetwork_data.json does not provide information about two ip addresses on the network1.", 
    "tags": [
        "metadata"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1514070", 
    "owner": "None", 
    "id": 1514070, 
    "index": 7099, 
    "openned": "2015-11-07 13:58:41.454635+00:00", 
    "created": "2015-11-07 13:58:41.454635+00:00", 
    "title": "network_data.json does not provide information about all ip addresses on nics.", 
    "comments": [
        {
            "content": "Environment:\ncentos 7\nopenstack liberty\n\n# rpm -qa|grep nova\nopenstack-nova-api-12.0.0-1.el7.noarch\npython-novaclient-2.30.1-1.el7.noarch\nopenstack-nova-novncproxy-12.0.0-1.el7.noarch\nopenstack-nova-conductor-12.0.0-1.el7.noarch\npython-nova-12.0.0-1.el7.noarch\nopenstack-nova-console-12.0.0-1.el7.noarch\nopenstack-nova-common-12.0.0-1.el7.noarch\nopenstack-nova-compute-12.0.0-1.el7.noarch\nopenstack-nova-cert-12.0.0-1.el7.noarch\nopenstack-nova-scheduler-12.0.0-1.el7.noarch\n\nNetwork configuration:\n\n# neutron net-list\n+--------------------------------------+------+-------------------------------------------------------+\n| id                                   | name | subnets                                               |\n+--------------------------------------+------+-------------------------------------------------------+\n| 286b3e3c-9075-496f-8899-c9890397f087 | net2 | 0a9ff171-0455-459e-b3c6-486ab90ba83d 10.0.1.0/24      |\n|                                      |      | de602f61-8e05-4337-bc9d-c9f8265bb937 1000:2000::/24   |\n| a3931414-73c3-40c9-a39b-d93ae38844a2 | net3 | b6ce48ab-9387-4128-baa3-4a893dd27bb7 10.0.2.0/24      |\n| a5d1181f-bedd-40a5-8b4a-5574b74dba61 | net1 | 72be780a-6df9-47ea-991c-e6fa97396adc 192.168.122.0/24 |\n+--------------------------------------+------+-------------------------------------------------------+\n\nNetwork net2 have two subnets.\n\nCreated new instance:\n# nova boot \\\n\t--flavor 2 \\\n\t--image fedora23 \\\n\t--config-drive=True \\\n\t--nic net-id=a5d1181f-bedd-40a5-8b4a-5574b74dba61 \\\n\t--nic net-id=286b3e3c-9075-496f-8899-c9890397f087 \\\n\t--nic net-id=a3931414-73c3-40c9-a39b-d93ae38844a2 \\\n\t--user-data=/root/cloud-config \\\n\ttest\n\n# nova list\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                                                     |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n| d9d76e4b-62c8-4a84-9e4b-66481d303c83 | test | ACTIVE | -          | Running     | net3=10.0.2.115; net2=10.0.1.100, 1000:2000:3000::1101; net1=192.168.122.116 |\n+--------------------------------------+------+--------+------------+-------------+------------------------------------------------------------------------------+\n\n# nova show test\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                   |\n| OS-EXT-AZ:availability_zone          | nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | localhost.localdomain                                    |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | localhost.localdomain                                    |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000012                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2015-11-07T13:17:00.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         | True                                                     |\n| created                              | 2015-11-07T13:16:50Z                                     |\n| flavor                               | m1.small (2)                                             |\n| hostId                               | d8d01459db9617763612ca6ed08bea56d168bfeac10eb90dd21b0df0 |\n| id                                   | d9d76e4b-62c8-4a84-9e4b-66481d303c83                     |\n| image                                | fedora23 (54d9ba46-b4bb-4a39-ae9d-bbbbfc0f024d)          |\n| key_name                             | -                                                        |\n| metadata                             | {}                                                       |\n| name                                 | test                                                     |\n| net1 network                         | 192.168.122.116                                          |\n| net2 network                         | 10.0.1.100, 1000:2000:3000::1101                         |\n| net3 network                         | 10.0.2.115                                               |\n| os-extended-volumes:volumes_attached | []                                                       |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | 7c89d90e17594c91943816a880c88a54                         |\n| updated                              | 2015-11-07T13:17:00Z                                     |\n| user_id                              | 1e84edc572b949cd8a1512e9dea35e6c                         |\n+--------------------------------------+----------------------------------------------------------+\n\nInstance have 2 ip addresses on the net2 network: 10.0.1.100, 1000:2000:3000::1101\n\n# neutron port-show c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n| Field                 | Value                                                                                                                                |\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n| admin_state_up        | True                                                                                                                                 |\n| allowed_address_pairs |                                                                                                                                      |\n| binding:host_id       | localhost.localdomain                                                                                                                |\n| binding:profile       | {}                                                                                                                                   |\n| binding:vif_details   | {\"port_filter\": true, \"ovs_hybrid_plug\": true}                                                                                       |\n| binding:vif_type      | ovs                                                                                                                                  |\n| binding:vnic_type     | normal                                                                                                                               |\n| device_id             | d9d76e4b-62c8-4a84-9e4b-66481d303c83                                                                                                 |\n| device_owner          | compute:None                                                                                                                         |\n| dns_assignment        | {\"hostname\": \"host-10-0-1-100\", \"ip_address\": \"10.0.1.100\", \"fqdn\": \"host-10-0-1-100.openstacklocal.\"}                               |\n|                       | {\"hostname\": \"host-1000-2000-3000--1101\", \"ip_address\": \"1000:2000:3000::1101\", \"fqdn\": \"host-1000-2000-3000--1101.openstacklocal.\"} |\n| dns_name              |                                                                                                                                      |\n| extra_dhcp_opts       |                                                                                                                                      |\n| fixed_ips             | {\"subnet_id\": \"0a9ff171-0455-459e-b3c6-486ab90ba83d\", \"ip_address\": \"10.0.1.100\"}                                                    |\n|                       | {\"subnet_id\": \"de602f61-8e05-4337-bc9d-c9f8265bb937\", \"ip_address\": \"1000:2000:3000::1101\"}                                          |\n| id                    | c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6                                                                                                 |\n| mac_address           | fa:16:3e:2e:b6:72                                                                                                                    |\n| name                  |                                                                                                                                      |\n| network_id            | 286b3e3c-9075-496f-8899-c9890397f087                                                                                                 |\n| security_groups       | 60c1ba09-e0a3-443e-923e-af40963d939b                                                                                                 |\n| status                | ACTIVE                                                                                                                               |\n| tenant_id             | 7c89d90e17594c91943816a880c88a54                                                                                                     |\n+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------+\n\nInto the instance:\n# ip a show eth1\n3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether fa:16:3e:2e:b6:72 brd ff:ff:ff:ff:ff:ff\n    inet 10.0.1.100/24 brd 10.0.1.255 scope global eth1\n       valid_lft forever preferred_lft forever\n    inet6 1000:2000:3000::1101/24 scope global \n       valid_lft forever preferred_lft forever\n    inet6 fe80::f816:3eff:fe2e:b672/64 scope link \n       valid_lft forever preferred_lft forever\n\n# mount /dev/disk/by-label/config-2 /mnt\n\n# cat /mnt/openstack/latest/network_data.json|python3 -m json.tool\n{\n    \"links\": [\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:57:e9:90\",\n            \"id\": \"tap2f3d0dac-cf\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"2f3d0dac-cfd4-47b8-8032-c96f4f81b055\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:2e:b6:72\",\n            \"id\": \"tapc2f0b53c-8f\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"c2f0b53c-8fa4-45a0-bcfb-6ffb2e7ed5b6\"\n        },\n        {\n            \"ethernet_mac_address\": \"fa:16:3e:fb:60:b4\",\n            \"id\": \"tap5788427c-a4\",\n            \"mtu\": null,\n            \"type\": \"ovs\",\n            \"vif_id\": \"5788427c-a415-4aaa-86a1-632e6a51c59c\"\n        }\n    ],\n    \"networks\": [\n        {\n            \"id\": \"network0\",\n            \"link\": \"tap2f3d0dac-cf\",\n            \"network_id\": \"a5d1181f-bedd-40a5-8b4a-5574b74dba61\",\n            \"type\": \"ipv4_dhcp\"\n        },\n        {\n            \"id\": \"network1\",\n            \"ip_address\": \"10.0.1.100\",\n            \"link\": \"tapc2f0b53c-8f\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"286b3e3c-9075-496f-8899-c9890397f087\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        },\n        {\n            \"id\": \"network2\",\n            \"ip_address\": \"10.0.2.115\",\n            \"link\": \"tap5788427c-a4\",\n            \"netmask\": \"255.255.255.0\",\n            \"network_id\": \"a3931414-73c3-40c9-a39b-d93ae38844a2\",\n            \"routes\": [],\n            \"type\": \"ipv4\"\n        }\n    ],\n    \"services\": []\n}\n\nnetwork_data.json does not provide information about two ip addresses on the network1.", 
            "date_created": "2015-11-07 13:58:41.454635+00:00", 
            "author": "https://api.launchpad.net/1.0/~oleg-f"
        }, 
        {
            "content": "Not a bug.\n\nFixed by changing nova.conf\n[DEFAULT]\nuse_ipv6=true", 
            "date_created": "2015-11-07 16:12:35.457993+00:00", 
            "author": "https://api.launchpad.net/1.0/~oleg-f"
        }
    ], 
    "closed": "2015-11-07 16:12:51.271487+00:00"
}