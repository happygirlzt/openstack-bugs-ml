{
    "status": "Invalid", 
    "last_updated": "2015-03-26 11:21:25.690844+00:00", 
    "description": "So I have installed the latest ubuntu server 13.04 where KVM package has been replaced by qemu-system-x86.\nWhen i install nova-compute-kvm, it doesn't start because there is no connection to libvirt ! I have tried to used nova-compute-qemu instead of nova-compute-kvm but the problem still persists (see Log below) \n\nMy processor supports virtualisation and i used to create VMs normally when i had Folsom. After updating ubuntu server 12.10 to ubuntu 13.04, it seems that things changed and communication to libvirt is lost. This is the nova-compute.log :\n\n2013-04-25 20:48:49.307 2338 ERROR nova.virt.libvirt.driver [-] Connection to libvirt failed: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver Traceback (most recent call last):\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 627, in _connect\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver     return libvirt.openAuth(uri, auth, 0)\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 102, in openAuth\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver     if ret is None:raise libvirtError('virConnectOpenAuth() failed')\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver libvirtError: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver \n2013-04-25 20:48:49.334 2338 WARNING nova.virt.libvirt.driver [-] URI qemu:///system does not support events\n2013-04-25 20:48:49.334 2338 ERROR nova.virt.libvirt.driver [-] Nova requires libvirt version 0.9.6 or greater.\n2013-04-25 20:48:49.373 2338 ERROR nova.virt.libvirt.driver [-] Connection to libvirt failed: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver Traceback (most recent call last):\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 627, in _connect\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver     return libvirt.openAuth(uri, auth, 0)\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 102, in openAuth\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver     if ret is None:raise libvirtError('virConnectOpenAuth() failed')\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver libvirtError: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver \n2013-04-25 20:48:49.374 WARNING nova.virt.libvirt.driver [req-b678205e-5535-4bcc-aeed-022d48cb2ede None None] URI qemu:///system does not support events\n2013-04-25 20:48:49.401 2338 CRITICAL nova [-] 'NoneType' object has no attribute 'numOfDomains'\n2013-04-25 20:48:49.401 2338 TRACE nova Traceback (most recent call last):\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/bin/nova-compute\", line 85, in <module>\n2013-04-25 20:48:49.401 2338 TRACE nova     service.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 689, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     _launcher.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 209, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     super(ServiceLauncher, self).wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 179, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     service.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     return self._exit_event.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     return hubs.get_hub().switch()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-04-25 20:48:49.401 2338 TRACE nova     return self.greenlet.switch()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-04-25 20:48:49.401 2338 TRACE nova     result = function(*args, **kwargs)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 147, in run_server\n2013-04-25 20:48:49.401 2338 TRACE nova     server.start()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 429, in start\n2013-04-25 20:48:49.401 2338 TRACE nova     self.manager.init_host()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 583, in init_host\n2013-04-25 20:48:49.401 2338 TRACE nova     self._destroy_evacuated_instances(context)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 434, in _destroy_evacuated_instances\n2013-04-25 20:48:49.401 2338 TRACE nova     local_instances = self._get_instances_on_driver(context)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 397, in _get_instances_on_driver\n2013-04-25 20:48:49.401 2338 TRACE nova     driver_uuids = self.driver.list_instance_uuids()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 681, in list_instance_uuids\n2013-04-25 20:48:49.401 2338 TRACE nova     for name in self.list_instances()]\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 663, in list_instances\n2013-04-25 20:48:49.401 2338 TRACE nova     for domain_id in self.list_instance_ids():\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 657, in list_instance_ids\n2013-04-25 20:48:49.401 2338 TRACE nova     if self._conn.numOfDomains() == 0:\n2013-04-25 20:48:49.401 2338 TRACE nova AttributeError: 'NoneType' object has no attribute 'numOfDomains'\n2013-04-25 20:48:49.401 2338 TRACE nova", 
    "tags": [
        "13.04", 
        "ubuntu"
    ], 
    "importance": "Undecided", 
    "heat": 28, 
    "link": "https://bugs.launchpad.net/nova/+bug/1172906", 
    "owner": "None", 
    "id": 1172906, 
    "index": 4874, 
    "openned": "2013-04-25 21:08:44.885189+00:00", 
    "created": "2013-04-25 21:08:44.885189+00:00", 
    "title": "Nova-Compute-kvm fails in ubuntu server 13.04", 
    "comments": [
        {
            "content": "So I have installed the latest ubuntu server 13.04 where KVM package has been replaced by qemu-system-x86.\nWhen i install nova-compute-kvm, it doesn't start because there is no connection to libvirt ! I have tried to used nova-compute-qemu instead of nova-compute-kvm but the problem still persists (see Log below) \n\nMy processor supports virtualisation and i used to create VMs normally when i had Folsom. After updating ubuntu server 12.10 to ubuntu 13.04, it seems that things changed and communication to libvirt is lost. This is the nova-compute.log :\n\n2013-04-25 20:48:49.307 2338 ERROR nova.virt.libvirt.driver [-] Connection to libvirt failed: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver Traceback (most recent call last):\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 627, in _connect\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver     return libvirt.openAuth(uri, auth, 0)\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 102, in openAuth\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver     if ret is None:raise libvirtError('virConnectOpenAuth() failed')\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver libvirtError: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.307 2338 TRACE nova.virt.libvirt.driver \n2013-04-25 20:48:49.334 2338 WARNING nova.virt.libvirt.driver [-] URI qemu:///system does not support events\n2013-04-25 20:48:49.334 2338 ERROR nova.virt.libvirt.driver [-] Nova requires libvirt version 0.9.6 or greater.\n2013-04-25 20:48:49.373 2338 ERROR nova.virt.libvirt.driver [-] Connection to libvirt failed: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver Traceback (most recent call last):\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 627, in _connect\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver     return libvirt.openAuth(uri, auth, 0)\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 102, in openAuth\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver     if ret is None:raise libvirtError('virConnectOpenAuth() failed')\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver libvirtError: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory\n2013-04-25 20:48:49.373 2338 TRACE nova.virt.libvirt.driver \n2013-04-25 20:48:49.374 WARNING nova.virt.libvirt.driver [req-b678205e-5535-4bcc-aeed-022d48cb2ede None None] URI qemu:///system does not support events\n2013-04-25 20:48:49.401 2338 CRITICAL nova [-] 'NoneType' object has no attribute 'numOfDomains'\n2013-04-25 20:48:49.401 2338 TRACE nova Traceback (most recent call last):\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/bin/nova-compute\", line 85, in <module>\n2013-04-25 20:48:49.401 2338 TRACE nova     service.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 689, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     _launcher.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 209, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     super(ServiceLauncher, self).wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 179, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     service.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     return self._exit_event.wait()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-04-25 20:48:49.401 2338 TRACE nova     return hubs.get_hub().switch()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-04-25 20:48:49.401 2338 TRACE nova     return self.greenlet.switch()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-04-25 20:48:49.401 2338 TRACE nova     result = function(*args, **kwargs)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 147, in run_server\n2013-04-25 20:48:49.401 2338 TRACE nova     server.start()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 429, in start\n2013-04-25 20:48:49.401 2338 TRACE nova     self.manager.init_host()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 583, in init_host\n2013-04-25 20:48:49.401 2338 TRACE nova     self._destroy_evacuated_instances(context)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 434, in _destroy_evacuated_instances\n2013-04-25 20:48:49.401 2338 TRACE nova     local_instances = self._get_instances_on_driver(context)\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 397, in _get_instances_on_driver\n2013-04-25 20:48:49.401 2338 TRACE nova     driver_uuids = self.driver.list_instance_uuids()\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 681, in list_instance_uuids\n2013-04-25 20:48:49.401 2338 TRACE nova     for name in self.list_instances()]\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 663, in list_instances\n2013-04-25 20:48:49.401 2338 TRACE nova     for domain_id in self.list_instance_ids():\n2013-04-25 20:48:49.401 2338 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 657, in list_instance_ids\n2013-04-25 20:48:49.401 2338 TRACE nova     if self._conn.numOfDomains() == 0:\n2013-04-25 20:48:49.401 2338 TRACE nova AttributeError: 'NoneType' object has no attribute 'numOfDomains'\n2013-04-25 20:48:49.401 2338 TRACE nova", 
            "date_created": "2013-04-25 21:08:44.885189+00:00", 
            "author": "https://api.launchpad.net/1.0/~msekni"
        }, 
        {
            "content": "Other info / report http://www.gossamer-threads.com/lists/openstack/dev/26485?do=post_view_threaded", 
            "date_created": "2013-04-26 13:32:34.593756+00:00", 
            "author": "https://api.launchpad.net/1.0/~smoser"
        }, 
        {
            "content": "I had the same issue too. I resolved it by doing the following:\n\napt-get purge libvirt-bin pm-utils\napt-get install -y kvm libvirt-bin pm-utils\nservice libvirt-bin restart\napt-get install nova-network nova-api-metadata nova-compute-kvm\ncd /etc/init.d/; for i in $(ls nova-*); do sudo service $i restart; don", 
            "date_created": "2013-04-29 13:45:07.554354+00:00", 
            "author": "https://api.launchpad.net/1.0/~andre-stephens"
        }, 
        {
            "content": "Looks like an Ubuntu packaging upgrade issue -- please reopen upstream task if you can point to an upstream bug", 
            "date_created": "2013-05-08 10:28:10.302114+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I have the same problem.\n\nI am using your step-by-step, Msekni.", 
            "date_created": "2013-07-08 23:31:05.448870+00:00", 
            "author": "https://api.launchpad.net/1.0/~dvsvictor"
        }, 
        {
            "content": "13.04 is no longer supported; marking 'Won't Fix'", 
            "date_created": "2015-03-26 11:21:22.063076+00:00", 
            "author": "https://api.launchpad.net/1.0/~james-page"
        }
    ], 
    "closed": "2013-05-08 10:28:12.797733+00:00"
}