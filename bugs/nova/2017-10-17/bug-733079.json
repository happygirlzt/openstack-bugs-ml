{
    "status": "Invalid", 
    "last_updated": "2011-03-31 07:36:40.641836+00:00", 
    "description": "I failed to run instance when network_manager was FlatManager. The related log and version info was as followings.\n\nnova-compute.log:\n\n2011-03-11 14:13:51,326 DEBUG nova.utils [-] execution result\uff1a 1 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:161\n2011-03-11 14:13:51,326 DEBUG nova.utils [-] execute command (subprocess): sudo umount /dev/nbd15 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,015 DEBUG nova.utils [-] execute command (subprocess): rmdir /tmp/tmphKFfeW from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,068 DEBUG nova.utils [-] execute command (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,178 ERROR nova.exception [-] Excpetion not caught\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 408, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 672, in _create_image\n(nova.exception): TRACE:     ' data into image %(img_id)s (%(e)s)') % locals())\n(nova.exception): TRACE: UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-25: ordinal not in range(128)\n(nova.exception): TRACE:\n2011-03-11 14:13:53,199 ERROR nova.compute.manager [9X8WPVKT5PFGRFW2R7V7 anne IRT] it failed to start instance 1.\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 213, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 126, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: 'ascii' codec can't encode characters in position 0-25: ordinal not in range(128)\n(nova.compute.manager): TRACE:\n\nVersion of nova-compute: 2011.2~bzr786-0ubuntu0ppa1~maverick1\n\nContents of nova.conf:\n\n--sql_connection=mysql://root:nova@ubuntu7/nova\n--s3_host=ubuntu7\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu7\n--fixed_range=192.168.2.64/26\n--network_size=64\n--lock_path=/home/nii/tmp", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/733079", 
    "owner": "None", 
    "id": 733079, 
    "index": 3327, 
    "openned": "2011-03-11 05:29:04.498472+00:00", 
    "created": "2011-03-11 05:29:04.498472+00:00", 
    "title": "Failure to log warning when injection fails results in instance failure", 
    "comments": [
        {
            "content": "I failed to run instance when network_manager was FlatManager. The related log and version info was as followings.\n\nnova-compute.log:\n\n2011-03-11 14:13:51,326 DEBUG nova.utils [-] execution result\uff1a 1 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:161\n2011-03-11 14:13:51,326 DEBUG nova.utils [-] execute command (subprocess): sudo umount /dev/nbd15 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,015 DEBUG nova.utils [-] execute command (subprocess): rmdir /tmp/tmphKFfeW from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,068 DEBUG nova.utils [-] execute command (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=12476) execute /usr/lib/pymodules/python2.6/nova/utils.py:148\n2011-03-11 14:13:53,178 ERROR nova.exception [-] Excpetion not caught\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 408, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 672, in _create_image\n(nova.exception): TRACE:     ' data into image %(img_id)s (%(e)s)') % locals())\n(nova.exception): TRACE: UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-25: ordinal not in range(128)\n(nova.exception): TRACE:\n2011-03-11 14:13:53,199 ERROR nova.compute.manager [9X8WPVKT5PFGRFW2R7V7 anne IRT] it failed to start instance 1.\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 213, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 126, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: 'ascii' codec can't encode characters in position 0-25: ordinal not in range(128)\n(nova.compute.manager): TRACE:\n\nVersion of nova-compute: 2011.2~bzr786-0ubuntu0ppa1~maverick1\n\nContents of nova.conf:\n\n--sql_connection=mysql://root:nova@ubuntu7/nova\n--s3_host=ubuntu7\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu7\n--fixed_range=192.168.2.64/26\n--network_size=64\n--lock_path=/home/nii/tmp", 
            "date_created": "2011-03-11 05:29:04.498472+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "data injection is failing (probably due to the image you're using), which should just result in a warning message... but the warning log attempt fails with a real error.", 
            "date_created": "2011-03-16 10:04:24.103999+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Hmm, I can't reproduce that in my testing, even using japanese locale. I can log exceptions alright... Could you check with current trunk ?", 
            "date_created": "2011-03-30 14:10:20.392745+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Thank you, Thierry. I tried it with the newest version. There was no error. So maybe it has been fixed by other bug fix.", 
            "date_created": "2011-03-31 01:18:58.090575+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Thanks for the feedback, closing as Invalid.", 
            "date_created": "2011-03-31 07:36:38.565044+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ], 
    "closed": "2011-03-31 07:36:39.535610+00:00"
}