{
    "status": "Fix Released", 
    "last_updated": "2015-08-11 20:00:12.620937+00:00", 
    "description": "After upgrading my Havana installation to Icehouse, VNC console logins are no longer working (1006 error). \n\nThe version in use is:\n\nopenstack-nova-novncproxy-2014.1-2.el6.noarch\n\nfrom RDO.\n\nThis is the full error in the logs:\n\n2014-05-07 17:12:58.003 13074 AUDIT nova.consoleauth.manager [req-684f9e8d-3c0a-4647-aa66-44f0bb35c4df None None] Checking Token: dbbd1b9b-002f-46b6-bf79-0d90e92c034e, True\n2014-05-07 17:12:58.112 13074 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: tuple index out of range\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    incoming.message))\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n    return self._do_dispatch(endpoint, method, ctxt, args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n    result = getattr(endpoint, method)(ctxt, **new_args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n    return func(*args, **kwargs)\n\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n    args = (_load_instance(args[0]),) + args[1:]\n\nIndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 117, in check_token\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     if self._validate_token(context, token):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 108, in _validate_token\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     token['console_type'])\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/compute/rpcapi.py\", line 506, in validate_console_port\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     console_type=console_type)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     wait_for_reply=True, timeout=timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/transport.py\", line 90, in _send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     timeout=timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     raise result\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher IndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     args = (_load_instance(args[0]),) + args[1:]\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher IndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher", 
    "tags": [
        "console", 
        "novnc"
    ], 
    "importance": "Undecided", 
    "heat": 46, 
    "link": "https://bugs.launchpad.net/nova/+bug/1317174", 
    "owner": "None", 
    "id": 1317174, 
    "index": 4832, 
    "created": "2014-05-07 16:27:08.299348+00:00", 
    "title": "novnc console failure after Icehouse upgrade", 
    "comments": [
        {
            "content": "After upgrading my Havana installation to Icehouse, VNC console logins are no longer working (1006 error). \n\nThe version in use is:\n\nopenstack-nova-novncproxy-2014.1-2.el6.noarch\n\nfrom RDO.\n\nThis is the full error in the logs:\n\n2014-05-07 17:12:58.003 13074 AUDIT nova.consoleauth.manager [req-684f9e8d-3c0a-4647-aa66-44f0bb35c4df None None] Checking Token: dbbd1b9b-002f-46b6-bf79-0d90e92c034e, True\n2014-05-07 17:12:58.112 13074 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: tuple index out of range\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    incoming.message))\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n    return self._do_dispatch(endpoint, method, ctxt, args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n    result = getattr(endpoint, method)(ctxt, **new_args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n    return func(*args, **kwargs)\n\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n    args = (_load_instance(args[0]),) + args[1:]\n\nIndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 117, in check_token\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     if self._validate_token(context, token):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 108, in _validate_token\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     token['console_type'])\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/compute/rpcapi.py\", line 506, in validate_console_port\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     console_type=console_type)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     wait_for_reply=True, timeout=timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/transport.py\", line 90, in _send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     timeout=timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     raise result\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher IndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher     args = (_load_instance(args[0]),) + args[1:]\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher IndexError: tuple index out of range\n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher \n2014-05-07 17:12:58.112 13074 TRACE oslo.messaging.rpc.dispatcher", 
            "date_created": "2014-05-07 16:27:08.299348+00:00", 
            "author": "https://api.launchpad.net/1.0/~adam-huffman"
        }, 
        {
            "content": "Same issue in my env when I upgraded my Havana + CentOS 6.5 to Icehouse\nThis is my logs:\n\n2014-05-23 00:36:20.953 838 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: tuple index out of range\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    incoming.message))\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n    return self._do_dispatch(endpoint, method, ctxt, args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n    result = getattr(endpoint, method)(ctxt, **new_args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n    return func(*args, **kwargs)\n\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n    args = (_load_instance(args[0]),) + args[1:]\n\nIndexError: tuple index out of range\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 117, in check_token\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     if self._validate_token(context, token):\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 108, in _validate_token\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     token['console_type'])\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/nova/compute/rpcapi.py\", line 506, in validate_console_port\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     console_type=console_type)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     wait_for_reply=True, timeout=timeout)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/transport.py\", line 90, in _send\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     timeout=timeout)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher     raise result\n2014-05-23 00:36:20.953 838 TRACE oslo.messaging.rpc.dispatcher IndexError: tuple index out of range\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    incoming.message))\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n    return self._do_dispatch(endpoint, method, ctxt, args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n    result = getattr(endpoint, method)(ctxt, **new_args)\n\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n    return func(*args, **kwargs)\n\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\n    args = (_load_instance(args[0]),) + args[1:]\n\nIndexError: tuple index out of range\n to caller\n2014-05-23 00:36:20.955 838 ERROR oslo.messaging._drivers.common [-] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 117, in check_token\\n    if self._validate_token(context, token):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 108, in _validate_token\\n    token[\\'console_type\\'])\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/rpcapi.py\", line 506, in validate_console_port\\n    console_type=console_type)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\\n    wait_for_reply=True, timeout=timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/transport.py\", line 90, in _send\\n    timeout=timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\\n    raise result\\n', 'IndexError: tuple index out of range\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\\n    incoming.message))\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\\n    return func(*args, **kwargs)\\n\\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 390, in decorated_function\\n    args = (_load_instance(args[0]),) + args[1:]\\n\\nIndexError: tuple index out of range\\n\\n']\n", 
            "date_created": "2014-05-22 16:44:07.659971+00:00", 
            "author": "https://api.launchpad.net/1.0/~samuel.chen"
        }, 
        {
            "content": "Same situation - after upgrade from RDO Havana to Icehouse (CentOS 6.5) VNC console is failing with error 1006.\n\nfrom the /var/log/nova/consoleauth.log:\n\n2014-08-24 23:15:46.140 22506 ERROR oslo.messaging._drivers.common [-] Returning exception tuple index out of range\nTraceback (most recent call last):\n \n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    incoming.message))\n \n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n    return self._do_dispatch(endpoint, method, ctxt, args)\n \n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n    result = getattr(endpoint, method)(ctxt, **new_args)\n \n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n    return func(*args, **kwargs)\n \n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 384, in decorated_function\n    args = (_load_instance(args[0]),) + args[1:]\n \nIndexError: tuple index out of range\n to caller\n2014-08-24 23:15:46.140 22506 ERROR oslo.messaging._drivers.common [-] ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\\n    incoming.message))\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n', '  File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 117, in check_token\\n    if self._validate_token(context, token):\\n', '  File \"/usr/lib/python2.6/site-packages/nova/consoleauth/manager.py\", line 108, in _validate_token\\n    token[\\'console_type\\'])\\n', '  File \"/usr/lib/python2.6/site-packages/nova/compute/rpcapi.py\", line 506, in validate_console_port\\n    console_type=console_type)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\\n    wait_for_reply=True, timeout=timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/transport.py\", line 90, in _send\\n    timeout=timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout)\\n', '  File \"/usr/lib/python2.6/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\\n    raise result\\n', 'IndexError: tuple index out of range\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\\n    incoming.message))\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\\n    return self._do_dispatch(endpoint, method, ctxt, args)\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n\\n  File \"/usr/lib/python2.6/site-packages/oslo/messaging/rpc/server.py\", line 139, in inner\\n    return func(*args, **kwargs)\\n\\n  File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 384, in decorated_function\\n    args = (_load_instance(args[0]),) + args[1:]\\n\\nIndexError: tuple index out of range\\n\\n']\n\n ", 
            "date_created": "2014-08-24 19:54:43.872921+00:00", 
            "author": "https://api.launchpad.net/1.0/~andres-active"
        }, 
        {
            "content": "Package version was : openstack-nova-novncproxy.noarch 2014.1.1-3.el6", 
            "date_created": "2014-08-24 20:06:14.351433+00:00", 
            "author": "https://api.launchpad.net/1.0/~andres-active"
        }, 
        {
            "content": "This workaround worked for me:\n\n# on Controller host:\n# remove icehouse-compat from nova.conf\nopenstack-config --del /etc/nova/nova.conf upgrade_levels compute\n\n# restart nova services on Controller host\nSVC_NOVA=\"openstack-nova-api openstack-nova-cert openstack-nova-scheduler openstack-nova-conductor openstack-nova-novncproxy openstack-nova-consoleauth\"\nfor SVC in $SVC_NOVA; do service $SVC restart; done\n\nThats a workaround - yet not proper solution - as if upgrading Compute hosts one-by-one icehouse-compat has to be preserved until ALL hosts have been upgraded to icehouse - if Im getting this correct. So novnc consoles would be still out during the upgrade process for Computes running already on icehouse.\n ", 
            "date_created": "2014-08-25 06:49:07.894113+00:00", 
            "author": "https://api.launchpad.net/1.0/~andres-active"
        }, 
        {
            "content": "This is fixed for me, the latest code in stable/icehouse branch works, not sure the exact commit that fixed it though sorry.\n\n", 
            "date_created": "2014-08-25 06:58:22.169734+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "It is reporting as fixed ", 
            "date_created": "2014-09-12 01:21:04.203305+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I have hit this issue just recently, and solution what's recommended, only service what needs to be restarted on controller nodes is \"consoleauth\"  \n\nThis workaround worked for me:\n\n# on Controller host:\n# remove icehouse-compat from nova.conf\nopenstack-config --del /etc/nova/nova.conf upgrade_levels compute\n\n# restart nova services on Controller host\nopenstack-service  restart openstack-nova-consoleauth \n\n", 
            "date_created": "2015-08-11 20:00:11.905636+00:00", 
            "author": "https://api.launchpad.net/1.0/~pczanwar"
        }
    ]
}