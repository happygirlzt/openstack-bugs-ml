{
    "status": "Invalid", 
    "last_updated": "2017-02-15 10:17:15.610351+00:00", 
    "description": "Following test is failing in our Kaminario Cinder Driver CI:\ntempest.api.compute.admin.test_volume_swap.TestVolumeSwap.test_volume_swap [421.842922s] ... FAILED\n\nFollowing is Traceback in the n-cpu.log:\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [req-3dcb5fb5-ca83-4e80-bfae-dbc96cc4d0de tempest-TestVolumeSwap-1094009596 tempest-TestVolumeSwap-1094009596] [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] Failed to swap volume a86302ea-9104-4084-9825-b863156f4964 for 48910757-0f3b-47ba-a278-e36ddf62d415\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] Traceback (most recent call last):\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 4982, in _swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     resize_to)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 1303, in swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     self._swap_volume(guest, disk_dev, conf.source_path, resize_to)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 1264, in _swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     dev.abort_job(pivot=True)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/guest.py\", line 704, in abort_job\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     self._guest._domain.blockJobAbort(self._disk, flags=flags)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     rv = execute(f, *args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     six.reraise(c, e, tb)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     rv = meth(*args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/libvirt.py\", line 650, in blockJobAbort\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     if ret == -1: raise libvirtError ('virDomainBlockJobAbort() failed', dom=self)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] libvirtError: Requested operation is not valid: pivot of disk 'vdb' requires an active copy job\n\n\n\nOther details:\nvirt_type = qemu\n\n\n$ dpkg -l | grep qemu\nii  ipxe-qemu                            1.0.0+git-20131111.c3d1e78-2ubuntu1.1 all          PXE boot firmware - ROM images for qemu\nii  qemu-keymaps                         2.0.0+dfsg-2ubuntu1.31                all          QEMU keyboard maps\nii  qemu-system                          2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries\nii  qemu-system-arm                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (arm)\nii  qemu-system-common                   2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (common files)\nii  qemu-system-mips                     2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (mips)\nii  qemu-system-misc                     2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (miscelaneous)\nii  qemu-system-ppc                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (ppc)\nii  qemu-system-sparc                    2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (sparc)\nii  qemu-system-x86                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (x86)\nii  qemu-utils                           2.0.0+dfsg-2ubuntu1.31                amd64        QEMU utilities\n\n\n$ dpkg -l | grep libvirt\nii  libvirt-bin                          1.2.2-0ubuntu13.1.17                  amd64        programs for the libvirt library\nii  libvirt-dev                          1.2.2-0ubuntu13.1.17                  amd64        development files for the libvirt library\nii  libvirt0                             1.2.2-0ubuntu13.1.17                  amd64        library for interfacing with different virtualization systems", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1662820", 
    "owner": "None", 
    "id": 1662820, 
    "index": 6665, 
    "created": "2017-02-08 09:40:44.199850+00:00", 
    "title": "test_volume_swap  failed in Kaminario Cinder Driver CI", 
    "comments": [
        {
            "content": "Following test is failing in our Kaminario Cinder Driver CI:\ntempest.api.compute.admin.test_volume_swap.TestVolumeSwap.test_volume_swap [421.842922s] ... FAILED\n\nFollowing is Traceback in the n-cpu.log:\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [req-3dcb5fb5-ca83-4e80-bfae-dbc96cc4d0de tempest-TestVolumeSwap-1094009596 tempest-TestVolumeSwap-1094009596] [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] Failed to swap volume a86302ea-9104-4084-9825-b863156f4964 for 48910757-0f3b-47ba-a278-e36ddf62d415\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] Traceback (most recent call last):\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 4982, in _swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     resize_to)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 1303, in swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     self._swap_volume(guest, disk_dev, conf.source_path, resize_to)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 1264, in _swap_volume\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     dev.abort_job(pivot=True)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/opt/stack/new/nova/nova/virt/libvirt/guest.py\", line 704, in abort_job\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     self._guest._domain.blockJobAbort(self._disk, flags=flags)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     rv = execute(f, *args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     six.reraise(c, e, tb)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     rv = meth(*args, **kwargs)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]   File \"/usr/local/lib/python2.7/dist-packages/libvirt.py\", line 650, in blockJobAbort\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5]     if ret == -1: raise libvirtError ('virDomainBlockJobAbort() failed', dom=self)\n2017-02-08 07:45:53.873 31516 ERROR nova.compute.manager [instance: b9f0e4a3-0913-42fd-ab98-c3bd2541c7b5] libvirtError: Requested operation is not valid: pivot of disk 'vdb' requires an active copy job\n\n\n\nOther details:\nvirt_type = qemu\n\n\n$ dpkg -l | grep qemu\nii  ipxe-qemu                            1.0.0+git-20131111.c3d1e78-2ubuntu1.1 all          PXE boot firmware - ROM images for qemu\nii  qemu-keymaps                         2.0.0+dfsg-2ubuntu1.31                all          QEMU keyboard maps\nii  qemu-system                          2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries\nii  qemu-system-arm                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (arm)\nii  qemu-system-common                   2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (common files)\nii  qemu-system-mips                     2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (mips)\nii  qemu-system-misc                     2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (miscelaneous)\nii  qemu-system-ppc                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (ppc)\nii  qemu-system-sparc                    2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (sparc)\nii  qemu-system-x86                      2.0.0+dfsg-2ubuntu1.31                amd64        QEMU full system emulation binaries (x86)\nii  qemu-utils                           2.0.0+dfsg-2ubuntu1.31                amd64        QEMU utilities\n\n\n$ dpkg -l | grep libvirt\nii  libvirt-bin                          1.2.2-0ubuntu13.1.17                  amd64        programs for the libvirt library\nii  libvirt-dev                          1.2.2-0ubuntu13.1.17                  amd64        development files for the libvirt library\nii  libvirt0                             1.2.2-0ubuntu13.1.17                  amd64        library for interfacing with different virtualization systems", 
            "date_created": "2017-02-08 09:40:44.199850+00:00", 
            "author": "https://api.launchpad.net/1.0/~nike-niec"
        }, 
        {
            "content": "This smells like https://bugzilla.redhat.com/show_bug.cgi?id=1202704 that would make sense given I can't reproduce in F25 and we haven't seen this in any Xenial based jobs that are using libvirt 1.3.1-1. IMHO I think you should just move to Xenial ASAP.", 
            "date_created": "2017-02-08 10:11:08.886002+00:00", 
            "author": "https://api.launchpad.net/1.0/~lyarwood"
        }, 
        {
            "content": "Ok, I will try to use Xenial as a diskimage in our Kaminario CI nodepool VMS.", 
            "date_created": "2017-02-08 10:43:42.816828+00:00", 
            "author": "https://api.launchpad.net/1.0/~nike-niec"
        }, 
        {
            "content": "Hi, the issue is solved using Xenial as a diskimage in our Kaminario CI.\nThanks for the suggestions.", 
            "date_created": "2017-02-15 10:17:14.617102+00:00", 
            "author": "https://api.launchpad.net/1.0/~nike-niec"
        }
    ]
}