{
    "status": "Fix Released", 
    "last_updated": "2011-09-22 13:11:09.238830+00:00", 
    "description": "Since migration operates by means of a resize, the code attempts to resize the instance from 0 to 0 GB.\n\n\n2011-07-13 01:14:36,323 DEBUG nova.virt.xenapi.vmops [-] Resizing VDI 90e2ee60-cbbe-429e-abf9-e0f2f813462d for instance instance-0000000a. Expanding to 0 GB from (pid=14629) resize_instance /home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py:577\n\nThis results in an exception:\n\n\n2011-07-13 01:14:36,607 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/exception.py\", line 87, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/compute/manager.py\", line 107, in decorated_function\n(nova.exception): TRACE:     function(self, context, instance_id, *args, **kwargs)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/compute/manager.py\", line 828, in finish_resize\n(nova.exception): TRACE:     self.driver.finish_resize(instance, disk_info, network_info)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi_conn.py\", line 207, in finish_resize\n(nova.exception): TRACE:     self._vmops.finish_resize(instance, disk_info, network_info)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py\", line 119, in finish_resize\n(nova.exception): TRACE:     self.resize_instance(instance, vdi_uuid)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py\", line 579, in resize_instance\n(nova.exception): TRACE:     self._session.call_xenapi('VDI.resize_online', vdi_ref, new_disk_size)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi_conn.py\", line 372, in call_xenapi \n(nova.exception): TRACE:     return tpool.execute(f, *args)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/eventlet/tpool.py\", line 76, in tworker\n(nova.exception): TRACE:     rv = meth(*args,**kwargs)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 229, in __call__\n(nova.exception): TRACE:     return self.__send(self.__name, args)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 133, in xenapi_request\n(nova.exception): TRACE:     result = _parse_result(getattr(self, methodname)(*full_params))\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 203, in _parse_result\n(nova.exception): TRACE:     raise Failure(result['ErrorDescription'])\n(nova.exception): TRACE: Failure: ['SR_BACKEND_FAILURE_79', '', 'VDI Invalid size [opterr=shrinking not allowed]', '']", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/809909", 
    "owner": "https://api.launchpad.net/1.0/~cerberus", 
    "id": 809909, 
    "index": 2457, 
    "created": "2011-07-13 14:19:46.833792+00:00", 
    "title": "Migrate of instance with no local storage fails with exception", 
    "comments": [
        {
            "content": "Since migration operates by means of a resize, the code attempts to resize the instance from 0 to 0 GB.\n\n\n2011-07-13 01:14:36,323 DEBUG nova.virt.xenapi.vmops [-] Resizing VDI 90e2ee60-cbbe-429e-abf9-e0f2f813462d for instance instance-0000000a. Expanding to 0 GB from (pid=14629) resize_instance /home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py:577\n\nThis results in an exception:\n\n\n2011-07-13 01:14:36,607 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/exception.py\", line 87, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/compute/manager.py\", line 107, in decorated_function\n(nova.exception): TRACE:     function(self, context, instance_id, *args, **kwargs)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/compute/manager.py\", line 828, in finish_resize\n(nova.exception): TRACE:     self.driver.finish_resize(instance, disk_info, network_info)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi_conn.py\", line 207, in finish_resize\n(nova.exception): TRACE:     self._vmops.finish_resize(instance, disk_info, network_info)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py\", line 119, in finish_resize\n(nova.exception): TRACE:     self.resize_instance(instance, vdi_uuid)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi/vmops.py\", line 579, in resize_instance\n(nova.exception): TRACE:     self._session.call_xenapi('VDI.resize_online', vdi_ref, new_disk_size)\n(nova.exception): TRACE:   File \"/home/johannes/openstack/nova/trunk/nova/virt/xenapi_conn.py\", line 372, in call_xenapi \n(nova.exception): TRACE:     return tpool.execute(f, *args)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/eventlet/tpool.py\", line 76, in tworker\n(nova.exception): TRACE:     rv = meth(*args,**kwargs)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 229, in __call__\n(nova.exception): TRACE:     return self.__send(self.__name, args)\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 133, in xenapi_request\n(nova.exception): TRACE:     result = _parse_result(getattr(self, methodname)(*full_params))\n(nova.exception): TRACE:   File \"/usr/local/lib/python2.6/dist-packages/XenAPI.py\", line 203, in _parse_result\n(nova.exception): TRACE:     raise Failure(result['ErrorDescription'])\n(nova.exception): TRACE: Failure: ['SR_BACKEND_FAILURE_79', '', 'VDI Invalid size [opterr=shrinking not allowed]', '']", 
            "date_created": "2011-07-13 14:19:46.833792+00:00", 
            "author": "https://api.launchpad.net/1.0/~johannes.erdfelt"
        }
    ]
}