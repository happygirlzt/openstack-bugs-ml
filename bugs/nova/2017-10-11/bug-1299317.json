{
    "status": "Invalid", 
    "last_updated": "2014-09-17 13:27:42.214938+00:00", 
    "description": "\nI use 'interface-attach'  without any option parameter to add vnic to a VM, nova return failed, but 'nova list' will see the vnic infor add to that vm, I do it as follow:\n\nroot@ubuntu01:/var/log/nova# nova list\n+--------------------------------------+------+--------+------------+-------------+----------------+\n| ID                                   | Name | Status | Task State | Power State | Networks       |\n+--------------------------------------+------+--------+------------+-------------+----------------+\n| 663dc949-11f9-4aab-aaf7-6f5bd761ab6f | test | ACTIVE | None       | Running     | test=10.10.0.5 |\n+--------------------------------------+------+--------+------------+-------------+----------------+\nroot@ubuntu01:/var/log/nova# nova interface-attach test\nERROR: Failed to attach interface (HTTP 500) (Request-ID: req-5af0e807-521f-45a2-a329-fd61ec74779e)\nroot@ubuntu01:/var/log/nova# nova list\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                               |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| 663dc949-11f9-4aab-aaf7-6f5bd761ab6f | test | ACTIVE | None       | Running     | test=10.10.0.5, 10.10.0.5, 10.10.0.12; test2=20.20.0.2 |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n\nthe error log in nova computer is:\n ERROR nova.openstack.common.rpc.amqp [req-5af0e807-521f-45a2-a329-fd61ec74779e bcac7970f8ae41f38f79e01dece39bd8 d13fb5f6d2354320bf4767f9b71df820] Exception during message handling\n TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n TRACE nova.openstack.common.rpc.amqp     **args)\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3892, in attach_interface\n TRACE nova.openstack.common.rpc.amqp     raise exception.InterfaceAttachFailed(instance=instance)\n TRACE nova.openstack.common.rpc.amqp InterfaceAttachFailed: Failed to attach network adapter device to {u'vm_state': u'active', u'availability_zone': u'nova', u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 3, u'user_data': None, u'cleaned': False, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-0542q330', u'id': 1, u'security_groups': [], u'disable_terminate': False, u'display_name': u'test', u'uuid': u'663dc949-11f9-4aab-aaf7-6f5bd761ab6f', u'default_swap_device': None, u'info_cache': {u'instance_uuid': u'663dc949-11f9-4aab-aaf7-6f5bd761ab6f', u'network_info': [{u'ovs_interfaceid': u'3c959010-25c5-4fe9-91c3-fdcfff57b870', u'network': {u'bridge': u'br-int', u'subnets': [{u'ips': [{u'floating_ips': [], u'meta': {}, u'type': u'fixed', u'version': 4, u'address': u'10.10.0.5'}], u'version': 4, u'meta': {u'dhcp_server': u'10.10.0.3'}, u'dns': [], u'routes': [], u'cidr': u'10.10.0.0/24', u'gateway': {u'meta': {}, u'type': u'gateway', u'version': 4, u'address': u'10.10.0.1'}}], u'meta': {u'injected': False, u'tenant_id': u'd13fb5f6d2354320bf4767f9b71df820'}, u'id': u'72d612c3-24e8-4a5c-8a45-7a5afb51c2f2', u'label': u'test'}, u'devname': u'tap3c959010-25', u'qbh_params': None, u'meta': {}, u'address': u'fa:16:3e:41:06:c6', u'type': u'ovs', u'id': u'3c959010-25c5-4fe9-91c3-fdcfff57b870', u'qbg_params': None}]}, u'hostname': u'test', u'launched_on': u'ubuntu01', u'display_description': u'test', u'key_data': None, u'kernel_id': u'', u'power_state': 1, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'd13fb5f6d2354320bf4767f9b71df820', u'launched_at': u'2014-03-27T21:03:05.000000', u'scheduled_at': u'2014-03-27T21:02:59.000000', u'node': u'ubuntu01', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2014-03-27T21:03:05.000000', u'host': u'ubuntu01', u'architecture': None, u'user_id': u'bcac7970f8ae41f38f79e01dece39bd8', u'system_metadata': {u'image_min_disk': u'1', u'instance_type_memory_mb': u'512', u'instance_type_swap': u'0', u'instance_type_vcpu_weight': None, u'instance_type_root_gb': u'1', u'instance_type_id': u'3', u'instance_type_name': u'm1.tiny', u'instance_type_ephemeral_gb': u'0', u'instance_type_rxtx_factor': u'1', u'instance_type_flavorid': u'1', u'image_container_format': u'bare', u'instance_type_vcpus': u'1', u'image_min_ram': u'0', u'image_disk_format': u'qcow2', u'image_base_image_ref': u'8449d5ce-bd3d-4096-8cd5-3d9e5dc5d7ee'}, u'task_state': None, u'shutdown_terminate': False, u'cell_name': None, u'root_gb': 1, u'locked': False, u'name': u'instance-00000001', u'created_at': u'2014-03-27T21:02:59.000000', u'locked_by': None, u'launch_index': 0, u'metadata': {}, u'memory_mb': 512, u'vcpus': 1, u'image_ref': u'8449d5ce-bd3d-4096-8cd5-3d9e5dc5d7ee', u'root_device_name': u'/dev/vda', u'auto_disk_config': False, u'os_type': None, u'config_drive': u''}", 
    "tags": [
        "compute"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1299317", 
    "owner": "https://api.launchpad.net/1.0/~shihanzhang", 
    "id": 1299317, 
    "index": 4699, 
    "created": "2014-03-29 02:48:55.265331+00:00", 
    "title": "use 'interface-attach' without option parameter happen ERROR", 
    "comments": [
        {
            "content": "\nI use 'interface-attach'  without any option parameter to add vnic to a VM, nova return failed, but 'nova list' will see the vnic infor add to that vm, I do it as follow:\n\nroot@ubuntu01:/var/log/nova# nova list\n+--------------------------------------+------+--------+------------+-------------+----------------+\n| ID                                   | Name | Status | Task State | Power State | Networks       |\n+--------------------------------------+------+--------+------------+-------------+----------------+\n| 663dc949-11f9-4aab-aaf7-6f5bd761ab6f | test | ACTIVE | None       | Running     | test=10.10.0.5 |\n+--------------------------------------+------+--------+------------+-------------+----------------+\nroot@ubuntu01:/var/log/nova# nova interface-attach test\nERROR: Failed to attach interface (HTTP 500) (Request-ID: req-5af0e807-521f-45a2-a329-fd61ec74779e)\nroot@ubuntu01:/var/log/nova# nova list\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                               |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| 663dc949-11f9-4aab-aaf7-6f5bd761ab6f | test | ACTIVE | None       | Running     | test=10.10.0.5, 10.10.0.5, 10.10.0.12; test2=20.20.0.2 |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n\nthe error log in nova computer is:\n ERROR nova.openstack.common.rpc.amqp [req-5af0e807-521f-45a2-a329-fd61ec74779e bcac7970f8ae41f38f79e01dece39bd8 d13fb5f6d2354320bf4767f9b71df820] Exception during message handling\n TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n TRACE nova.openstack.common.rpc.amqp     **args)\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3892, in attach_interface\n TRACE nova.openstack.common.rpc.amqp     raise exception.InterfaceAttachFailed(instance=instance)\n TRACE nova.openstack.common.rpc.amqp InterfaceAttachFailed: Failed to attach network adapter device to {u'vm_state': u'active', u'availability_zone': u'nova', u'terminated_at': None, u'ephemeral_gb': 0, u'instance_type_id': 3, u'user_data': None, u'cleaned': False, u'vm_mode': None, u'deleted_at': None, u'reservation_id': u'r-0542q330', u'id': 1, u'security_groups': [], u'disable_terminate': False, u'display_name': u'test', u'uuid': u'663dc949-11f9-4aab-aaf7-6f5bd761ab6f', u'default_swap_device': None, u'info_cache': {u'instance_uuid': u'663dc949-11f9-4aab-aaf7-6f5bd761ab6f', u'network_info': [{u'ovs_interfaceid': u'3c959010-25c5-4fe9-91c3-fdcfff57b870', u'network': {u'bridge': u'br-int', u'subnets': [{u'ips': [{u'floating_ips': [], u'meta': {}, u'type': u'fixed', u'version': 4, u'address': u'10.10.0.5'}], u'version': 4, u'meta': {u'dhcp_server': u'10.10.0.3'}, u'dns': [], u'routes': [], u'cidr': u'10.10.0.0/24', u'gateway': {u'meta': {}, u'type': u'gateway', u'version': 4, u'address': u'10.10.0.1'}}], u'meta': {u'injected': False, u'tenant_id': u'd13fb5f6d2354320bf4767f9b71df820'}, u'id': u'72d612c3-24e8-4a5c-8a45-7a5afb51c2f2', u'label': u'test'}, u'devname': u'tap3c959010-25', u'qbh_params': None, u'meta': {}, u'address': u'fa:16:3e:41:06:c6', u'type': u'ovs', u'id': u'3c959010-25c5-4fe9-91c3-fdcfff57b870', u'qbg_params': None}]}, u'hostname': u'test', u'launched_on': u'ubuntu01', u'display_description': u'test', u'key_data': None, u'kernel_id': u'', u'power_state': 1, u'default_ephemeral_device': None, u'progress': 0, u'project_id': u'd13fb5f6d2354320bf4767f9b71df820', u'launched_at': u'2014-03-27T21:03:05.000000', u'scheduled_at': u'2014-03-27T21:02:59.000000', u'node': u'ubuntu01', u'ramdisk_id': u'', u'access_ip_v6': None, u'access_ip_v4': None, u'deleted': False, u'key_name': None, u'updated_at': u'2014-03-27T21:03:05.000000', u'host': u'ubuntu01', u'architecture': None, u'user_id': u'bcac7970f8ae41f38f79e01dece39bd8', u'system_metadata': {u'image_min_disk': u'1', u'instance_type_memory_mb': u'512', u'instance_type_swap': u'0', u'instance_type_vcpu_weight': None, u'instance_type_root_gb': u'1', u'instance_type_id': u'3', u'instance_type_name': u'm1.tiny', u'instance_type_ephemeral_gb': u'0', u'instance_type_rxtx_factor': u'1', u'instance_type_flavorid': u'1', u'image_container_format': u'bare', u'instance_type_vcpus': u'1', u'image_min_ram': u'0', u'image_disk_format': u'qcow2', u'image_base_image_ref': u'8449d5ce-bd3d-4096-8cd5-3d9e5dc5d7ee'}, u'task_state': None, u'shutdown_terminate': False, u'cell_name': None, u'root_gb': 1, u'locked': False, u'name': u'instance-00000001', u'created_at': u'2014-03-27T21:02:59.000000', u'locked_by': None, u'launch_index': 0, u'metadata': {}, u'memory_mb': 512, u'vcpus': 1, u'image_ref': u'8449d5ce-bd3d-4096-8cd5-3d9e5dc5d7ee', u'root_device_name': u'/dev/vda', u'auto_disk_config': False, u'os_type': None, u'config_drive': u''}", 
            "date_created": "2014-03-29 02:48:55.265331+00:00", 
            "author": "https://api.launchpad.net/1.0/~shihanzhang"
        }, 
        {
            "content": "Hi,\nAre you using nova-network or neutron? Please note that the feature is currently onl supported when neutron is configured.\nThanks\nGary", 
            "date_created": "2014-04-06 13:04:18.992099+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "yes, I use neutron!", 
            "date_created": "2014-04-10 01:08:03.330706+00:00", 
            "author": "https://api.launchpad.net/1.0/~shihanzhang"
        }, 
        {
            "content": "It sounds as though neutron is failing to attach the interface to *one* of several networks after succeeding with attaching it to the others, and responding with an error when it hits the one that failed. Do you find that one or more of the total networks failed to attach? Or is it responding with error after succeeding attaching to all networks?", 
            "date_created": "2014-04-22 23:54:19.903704+00:00", 
            "author": "https://api.launchpad.net/1.0/~melwitt"
        }, 
        {
            "content": "This can't be reproduced without more logs from the failure. Please provide to reopen.", 
            "date_created": "2014-09-17 13:27:41.244646+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}