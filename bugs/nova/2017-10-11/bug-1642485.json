{
    "status": "Fix Released", 
    "last_updated": "2016-12-15 17:34:31.344598+00:00", 
    "description": "create/update resource_provider APIs raises HTTP 500 Internal Server Error if you pass name\ngreater than 200 character\n\nSteps to reproduce:\n\n$ curl -g -i -X POST http://10.232.48.200/placement/resource_providers  -H \"Content-Type: application/json\" -H \"X-Auth-Token: 38aac4d389d3437da8f6c0107a81ae95\" -d '{\"name\": \"testcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}'\n\nOutput:\n\nHTTP/1.1 500 Internal Server Error\nDate: Thu, 17 Nov 2016 06:45:05 GMT\nServer: Apache/2.4.7 (Ubuntu)\nx-openstack-request-id: req-7408f1f0-62be-4b22-9fdc-b005b9dc74c0\nContent-Length: 128\nConnection: close\nContent-Type: application/json; charset=UTF-8\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n\n\nError log:\n\n2016-11-17 12:15:05.334 TRACE nova.api.openstack Traceback (most recent call last):\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\n__init__.py\", line 88, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return req.get_response(self.applicatio\nn)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1299, in send\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     application, catch_exc_info=False)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1263, in call_application\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     app_iter = application(self.environ, st\nart_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 130, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resp = self.call_func(req, *args, **sel\nf.kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 195, in call_func\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/microversion.py\", line 103, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     response = req.get_response(self.applic\nation)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1299, in send\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     application, catch_exc_info=False)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1263, in call_application\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     app_iter = application(self.environ, st\nart_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/handler.py\", line 188, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return dispatch(environ, start_response\n, self._map)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/handler.py\", line 111, in dispatch\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return handler(environ, start_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 130, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resp = self.call_func(req, *args, **sel\nf.kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 195, in call_func\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/placement/util.py\", line 133, in decorated_function\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return f(req)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return f(req)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/placement/handlers/resource_provider.py\", line 89, in create_resource_provider\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resource_provider.create()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return fn(self, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/resource_provider.py\", line 331, in create\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     db_rp = self._create_in_db(self._context, updates)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 824, in wrapper\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return fn(*args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.gen.next()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 875, in _transaction_scope\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     yield resource\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.gen.next()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 522, in _session\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._end_session_transaction(self.session)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 543, in _end_session_transaction\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     session.commit()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 801, in commit\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.transaction.commit()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 392, in commit\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._prepare_impl()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 372, in _prepare_impl\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.session.flush()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2019, in flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._flush(objects)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2137, in _flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     transaction.rollback(_capture_exception=True)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     compat.reraise(exc_type, exc_value, exc_tb)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2101, in _flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     flush_context.execute()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     rec.execute(self)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     uow\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 174, in save_obj\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     mapper, table, insert)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 800, in _emit_insert_statements\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     execute(statement, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return meth(self, multiparams, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return connection._execute_clauseelement(self, multiparams, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     compiled_sql, distilled_params\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     context)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     util.raise_from_cause(newraise, exc_info)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 202, in raise_from_cause\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     context)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     cursor.execute(statement, parameters)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py\", line 166, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     result = self._query(query)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py\", line 322, in _query\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     conn.query(q)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 835, in query\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1019, in _read_query_result\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     result.read()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1302, in read\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     first_packet = self.connection._read_packet()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 981, in _read_packet\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     packet.check_error()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 393, in check_error\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     err.raise_mysql_exception(self._data)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     raise errorclass(errno, errval)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack DBError: (pymysql.err.DataError) (1406, u\"Data too long for column 'name' at row 1\") [SQL: u'INSERT INTO resource_providers (created_at, updated_at, uuid, name, generation, can_host) VALUES (%(created_at)s, %(updated_at)s, %(uuid)s, %(name)s, %(generation)s, %(can_host)s)'] [parameters: {'uuid': '5730402b-eff2-485a-906c-cbf0cb02f4ab', 'generation': 0, 'created_at': datetime.datetime(2016, 11, 17, 6, 45, 5, 321074), 'updated_at': None, 'can_host': 0, 'name': u'testcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc'}]", 
    "tags": [
        "api", 
        "placement"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1642485", 
    "owner": "https://api.launchpad.net/1.0/~bhagyashri-shewale", 
    "id": 1642485, 
    "index": 4679, 
    "created": "2016-11-17 07:17:52.382494+00:00", 
    "title": "create/update respource_provider APIs raises HTTP 500 Internal Server Error when name is greater than 200 characters", 
    "comments": [
        {
            "content": "create/update resource_provider APIs raises HTTP 500 Internal Server Error if you pass name\ngreater than 200 character\n\nSteps to reproduce:\n\n$ curl -g -i -X POST http://10.232.48.200/placement/resource_providers  -H \"Content-Type: application/json\" -H \"X-Auth-Token: 38aac4d389d3437da8f6c0107a81ae95\" -d '{\"name\": \"testcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\"}'\n\nOutput:\n\nHTTP/1.1 500 Internal Server Error\nDate: Thu, 17 Nov 2016 06:45:05 GMT\nServer: Apache/2.4.7 (Ubuntu)\nx-openstack-request-id: req-7408f1f0-62be-4b22-9fdc-b005b9dc74c0\nContent-Length: 128\nConnection: close\nContent-Type: application/json; charset=UTF-8\n\n{\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n\n\nError log:\n\n2016-11-17 12:15:05.334 TRACE nova.api.openstack Traceback (most recent call last):\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\n__init__.py\", line 88, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return req.get_response(self.applicatio\nn)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1299, in send\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     application, catch_exc_info=False)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1263, in call_application\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     app_iter = application(self.environ, st\nart_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 130, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resp = self.call_func(req, *args, **sel\nf.kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 195, in call_func\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/microversion.py\", line 103, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     response = req.get_response(self.applic\nation)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1299, in send\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     application, catch_exc_info=False)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/request.py\", line 1263, in call_application\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     app_iter = application(self.environ, st\nart_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/handler.py\", line 188, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return dispatch(environ, start_response\n, self._map)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/\nplacement/handler.py\", line 111, in dispatch\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return handler(environ, start_response)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 130, in __call__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resp = self.call_func(req, *args, **sel\nf.kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packa\nges/webob/dec.py\", line 195, in call_func\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/placement/util.py\", line 133, in decorated_function\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return f(req)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return f(req)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/placement/handlers/resource_provider.py\", line 89, in create_resource_provider\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     resource_provider.create()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return fn(self, *args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/objects/resource_provider.py\", line 331, in create\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     db_rp = self._create_in_db(self._context, updates)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 824, in wrapper\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return fn(*args, **kwargs)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.gen.next()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 875, in _transaction_scope\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     yield resource\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.gen.next()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 522, in _session\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._end_session_transaction(self.session)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 543, in _end_session_transaction\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     session.commit()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 801, in commit\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.transaction.commit()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 392, in commit\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._prepare_impl()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 372, in _prepare_impl\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self.session.flush()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2019, in flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._flush(objects)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2137, in _flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     transaction.rollback(_capture_exception=True)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     compat.reraise(exc_type, exc_value, exc_tb)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2101, in _flush\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     flush_context.execute()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     rec.execute(self)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     uow\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 174, in save_obj\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     mapper, table, insert)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 800, in _emit_insert_statements\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     execute(statement, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return meth(self, multiparams, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     return connection._execute_clauseelement(self, multiparams, params)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     compiled_sql, distilled_params\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     context)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     util.raise_from_cause(newraise, exc_info)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 202, in raise_from_cause\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     context)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     cursor.execute(statement, parameters)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py\", line 166, in execute\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     result = self._query(query)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/cursors.py\", line 322, in _query\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     conn.query(q)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 835, in query\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1019, in _read_query_result\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     result.read()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1302, in read\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     first_packet = self.connection._read_packet()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 981, in _read_packet\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     packet.check_error()\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 393, in check_error\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     err.raise_mysql_exception(self._data)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2016-11-17 12:15:05.334 TRACE nova.api.openstack     raise errorclass(errno, errval)\n2016-11-17 12:15:05.334 TRACE nova.api.openstack DBError: (pymysql.err.DataError) (1406, u\"Data too long for column 'name' at row 1\") [SQL: u'INSERT INTO resource_providers (created_at, updated_at, uuid, name, generation, can_host) VALUES (%(created_at)s, %(updated_at)s, %(uuid)s, %(name)s, %(generation)s, %(can_host)s)'] [parameters: {'uuid': '5730402b-eff2-485a-906c-cbf0cb02f4ab', 'generation': 0, 'created_at': datetime.datetime(2016, 11, 17, 6, 45, 5, 321074), 'updated_at': None, 'can_host': 0, 'name': u'testcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccctestcccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc'}]", 
            "date_created": "2016-11-17 07:17:52.382494+00:00", 
            "author": "https://api.launchpad.net/1.0/~bhagyashri-shewale"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/398998", 
            "date_created": "2016-11-17 12:54:20.963530+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Nice, thanks for identifying this and 1642484. There probably violations of this kind throughout the API. The basic issue here is that jsonschema are being used to validate input but in most cases are not checking length, letting that fall through to the DB, but then never catching the error.\n\nSo if you're in there looking around, might make sense to add tests for length things across the resource provider objects.", 
            "date_created": "2016-11-18 20:58:53.256141+00:00", 
            "author": "https://api.launchpad.net/1.0/~cdent"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/398998\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=9bbce28c56666de6eb430d027af4ddf5cfc686e4\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9bbce28c56666de6eb430d027af4ddf5cfc686e4\nAuthor: bhagyashris <email address hidden>\nDate:   Wed Nov 30 20:41:48 2016 +0530\n\n    Return 400 when name is more than 200 characters\n    \n    APIs listed below are returning 500 error if you pass name more than\n    200 characters.\n    1. create resource_providers\n    2. update resource_providers\n    \n    Added maxLength check in schema to ensure name should not be more than\n    200 characters.\n    \n    Closes-Bug: #1642485\n    Change-Id: Ia22ae86702dabe18bc577b17164a81c363da6d41\n", 
            "date_created": "2016-12-08 07:19:06.273121+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:34:30.750005+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}