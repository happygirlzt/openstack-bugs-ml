{
    "status": "Fix Released", 
    "last_updated": "2016-03-03 16:18:56.763498+00:00", 
    "description": "Seen here:\n\nhttp://logs.openstack.org/81/270981/3/check/gate-nova-python34/dfbe2a4/console.html#_2016-02-11_23_31_38_797\n\n2016-02-11 23:31:38.797 | nova.tests.unit.compute.test_compute.ComputeAPITestCase.test_create_with_numa_topology\n2016-02-11 23:31:38.798 | --------------------------------------------------------------------------------------\n2016-02-11 23:31:38.798 | \n2016-02-11 23:31:38.798 | Captured traceback:\n2016-02-11 23:31:38.798 | ~~~~~~~~~~~~~~~~~~~\n2016-02-11 23:31:38.798 |     b'Traceback (most recent call last):'\n2016-02-11 23:31:38.798 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/mock/mock.py\", line 1305, in patched'\n2016-02-11 23:31:38.798 |     b'    return func(*args, **keywargs)'\n2016-02-11 23:31:38.798 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/nova/tests/unit/compute/test_compute.py\", line 7656, in test_create_with_numa_topology'\n2016-02-11 23:31:38.799 |     b'    instances[0].numa_topology.cells[0].obj_to_primitive())'\n2016-02-11 23:31:38.799 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/testtools/testcase.py\", line 362, in assertEqual'\n2016-02-11 23:31:38.799 |     b'    self.assertThat(observed, matcher, message)'\n2016-02-11 23:31:38.799 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/testtools/testcase.py\", line 447, in assertThat'\n2016-02-11 23:31:38.799 |     b'    raise mismatch_error'\n2016-02-11 23:31:38.799 |     b'testtools.matchers._impl.MismatchError: !=:'\n2016-02-11 23:31:38.799 |     b\"reference = {'nova_object.changes': ['memory', 'cpuset', 'id'],\"\n2016-02-11 23:31:38.799 |     b\" 'nova_object.data': {'cpu_pinning_raw': None,\"\n2016-02-11 23:31:38.799 |     b\"                      'cpu_policy': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpu_thread_policy': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpu_topology': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpuset': (1, 2),\"\n2016-02-11 23:31:38.800 |     b\"                      'id': 0,\"\n2016-02-11 23:31:38.800 |     b\"                      'memory': 512,\"\n2016-02-11 23:31:38.800 |     b\"                      'pagesize': None},\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.name': 'InstanceNUMACell',\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.namespace': 'nova',\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.version': '1.3'}\"\n2016-02-11 23:31:38.801 |     b\"actual    = {'nova_object.changes': ['id', 'memory', 'cpuset'],\"\n2016-02-11 23:31:38.801 |     b\" 'nova_object.data': {'cpu_pinning_raw': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_policy': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_thread_policy': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_topology': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpuset': (1, 2),\"\n2016-02-11 23:31:38.801 |     b\"                      'id': 0,\"\n2016-02-11 23:31:38.801 |     b\"                      'memory': 512,\"\n2016-02-11 23:31:38.802 |     b\"                      'pagesize': None},\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.name': 'InstanceNUMACell',\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.namespace': 'nova',\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.version': '1.3'}\"\n2016-02-11 23:31:38.802 |     b''\n2016-02-11 23:31:38.802 |     b''\n\nThe nova_object.changes are a set which aren't sorted so we get intermittent results on the py34 job.\n\nDan Smith has a patch for this here: https://review.openstack.org/#/c/279242/", 
    "tags": [
        "testing"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1545177", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1545177, 
    "index": 4445, 
    "created": "2016-02-12 21:57:15.124645+00:00", 
    "title": "nova_object.changes compare intermittently fails in py34 unit tests", 
    "comments": [
        {
            "content": "Seen here:\n\nhttp://logs.openstack.org/81/270981/3/check/gate-nova-python34/dfbe2a4/console.html#_2016-02-11_23_31_38_797\n\n2016-02-11 23:31:38.797 | nova.tests.unit.compute.test_compute.ComputeAPITestCase.test_create_with_numa_topology\n2016-02-11 23:31:38.798 | --------------------------------------------------------------------------------------\n2016-02-11 23:31:38.798 | \n2016-02-11 23:31:38.798 | Captured traceback:\n2016-02-11 23:31:38.798 | ~~~~~~~~~~~~~~~~~~~\n2016-02-11 23:31:38.798 |     b'Traceback (most recent call last):'\n2016-02-11 23:31:38.798 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/mock/mock.py\", line 1305, in patched'\n2016-02-11 23:31:38.798 |     b'    return func(*args, **keywargs)'\n2016-02-11 23:31:38.798 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/nova/tests/unit/compute/test_compute.py\", line 7656, in test_create_with_numa_topology'\n2016-02-11 23:31:38.799 |     b'    instances[0].numa_topology.cells[0].obj_to_primitive())'\n2016-02-11 23:31:38.799 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/testtools/testcase.py\", line 362, in assertEqual'\n2016-02-11 23:31:38.799 |     b'    self.assertThat(observed, matcher, message)'\n2016-02-11 23:31:38.799 |     b'  File \"/home/jenkins/workspace/gate-nova-python34/.tox/py34/lib/python3.4/site-packages/testtools/testcase.py\", line 447, in assertThat'\n2016-02-11 23:31:38.799 |     b'    raise mismatch_error'\n2016-02-11 23:31:38.799 |     b'testtools.matchers._impl.MismatchError: !=:'\n2016-02-11 23:31:38.799 |     b\"reference = {'nova_object.changes': ['memory', 'cpuset', 'id'],\"\n2016-02-11 23:31:38.799 |     b\" 'nova_object.data': {'cpu_pinning_raw': None,\"\n2016-02-11 23:31:38.799 |     b\"                      'cpu_policy': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpu_thread_policy': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpu_topology': None,\"\n2016-02-11 23:31:38.800 |     b\"                      'cpuset': (1, 2),\"\n2016-02-11 23:31:38.800 |     b\"                      'id': 0,\"\n2016-02-11 23:31:38.800 |     b\"                      'memory': 512,\"\n2016-02-11 23:31:38.800 |     b\"                      'pagesize': None},\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.name': 'InstanceNUMACell',\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.namespace': 'nova',\"\n2016-02-11 23:31:38.800 |     b\" 'nova_object.version': '1.3'}\"\n2016-02-11 23:31:38.801 |     b\"actual    = {'nova_object.changes': ['id', 'memory', 'cpuset'],\"\n2016-02-11 23:31:38.801 |     b\" 'nova_object.data': {'cpu_pinning_raw': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_policy': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_thread_policy': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpu_topology': None,\"\n2016-02-11 23:31:38.801 |     b\"                      'cpuset': (1, 2),\"\n2016-02-11 23:31:38.801 |     b\"                      'id': 0,\"\n2016-02-11 23:31:38.801 |     b\"                      'memory': 512,\"\n2016-02-11 23:31:38.802 |     b\"                      'pagesize': None},\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.name': 'InstanceNUMACell',\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.namespace': 'nova',\"\n2016-02-11 23:31:38.802 |     b\" 'nova_object.version': '1.3'}\"\n2016-02-11 23:31:38.802 |     b''\n2016-02-11 23:31:38.802 |     b''\n\nThe nova_object.changes are a set which aren't sorted so we get intermittent results on the py34 job.\n\nDan Smith has a patch for this here: https://review.openstack.org/#/c/279242/", 
            "date_created": "2016-02-12 21:57:15.124645+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/279242\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=b8296d82a0792900624efbaf040eff2cd488889b\nSubmitter: Jenkins\nBranch:    master\n\ncommit b8296d82a0792900624efbaf040eff2cd488889b\nAuthor: Dan Smith <email address hidden>\nDate:   Thu Feb 11 11:48:13 2016 -0800\n\n    Add StableObjectJsonFixture and use it in our base test class\n    \n    This will ensure that our object JSON is stable during unit tests.\n    Specifically, the changes field, which is listified from a set, which\n    can vary in order.\n    \n    Closes-Bug: #1545177\n    Change-Id: Ib40ca16c41d5422c18f4fc7d658273a8059100ab\n", 
            "date_created": "2016-02-21 00:32:15.957385+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 13.0.0.0b3 development milestone.", 
            "date_created": "2016-03-03 16:18:55.955366+00:00", 
            "author": "https://api.launchpad.net/1.0/~doug-hellmann"
        }
    ]
}