{
    "status": "Fix Released", 
    "last_updated": "2010-10-25 20:17:26.505236+00:00", 
    "description": "When running nosetests on nova/tests/api, the openstack servers/backup_schedule delete test fails since it calls the delete method with an object id (which is empty). The method should take the id and just ignore it, or the routing should be changed to note have backup_schedule a strict resource mapping (so it doesn't send an ID). The routes package doesn't let you disable this (at least I can't find it), so we would need to manually add routes for the three different methods. Simply ignoring the id and using the normal resource mapping may be the easiest though.\n\nERROR: test_delete_backup_schedules (nova.tests.api.openstack.test_servers.Serve\nrsTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/eday/bzr/nova/lp660668/nova/tests/api/openstack/test_servers.py\", line 179, in test_delete_backup_schedules\n    res = req.get_response(nova.api.API())\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 918, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 886, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 130, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 130, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/eday/bzr/nova/lp660668/nova/wsgi.py\", line 217, in __call__\n    result = method(**arg_dict)\nTypeError: delete() got an unexpected keyword argument 'id'\n-------------------- >> begin captured logging << --------------------\nroutes.middleware: DEBUG: Initialized with method overriding = True, and path info altering = True\nroutes.middleware: DEBUG: Initialized with method overriding = True, and path info altering = True\nroutes.middleware: DEBUG: Matched DELETE /v1.0/servers/1/backup_schedules\nroutes.middleware: DEBUG: Route path: 'v1.0/{path_info:.*}', defaults: {'action': u'index', 'controller': <nova.api.openstack.API object at 0x261ab50>}\nroutes.middleware: DEBUG: Match dict: {'action': u'index', 'controller': <nova.api.openstack.API object at 0x261ab50>, 'sub_domain': None, 'path_info': 'servers/1/backup_schedules'}\nroutes.middleware: DEBUG: Matched DELETE /servers/1/backup_schedules\nroutes.middleware: DEBUG: Route path: 'servers/:server_id/backup_schedules/:(id)', defaults: {'action': u'delete', 'controller': <nova.api.openstack.backup_schedules.Controller object at 0x381e910>, 'id': None}\nroutes.middleware: DEBUG: Match dict: {'server_id': u'1', 'req': <Request at 0x21c2a10 DELETE http://localhost/v1.0/servers/1/backup_schedules>, 'id': None}\n--------------------- >> end captured logging << ---------------------", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/660818", 
    "owner": "https://api.launchpad.net/1.0/~eday", 
    "id": 660818, 
    "index": 1947, 
    "created": "2010-10-14 22:05:10.749086+00:00", 
    "title": "delete backup_schedule error while running nosetests", 
    "comments": [
        {
            "content": "When running nosetests on nova/tests/api, the openstack servers/backup_schedule delete test fails since it calls the delete method with an object id (which is empty). The method should take the id and just ignore it, or the routing should be changed to note have backup_schedule a strict resource mapping (so it doesn't send an ID). The routes package doesn't let you disable this (at least I can't find it), so we would need to manually add routes for the three different methods. Simply ignoring the id and using the normal resource mapping may be the easiest though.\n\nERROR: test_delete_backup_schedules (nova.tests.api.openstack.test_servers.Serve\nrsTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/eday/bzr/nova/lp660668/nova/tests/api/openstack/test_servers.py\", line 179, in test_delete_backup_schedules\n    res = req.get_response(nova.api.API())\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 918, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 886, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 130, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 130, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/eday/bzr/nova/lp660668/nova/wsgi.py\", line 217, in __call__\n    result = method(**arg_dict)\nTypeError: delete() got an unexpected keyword argument 'id'\n-------------------- >> begin captured logging << --------------------\nroutes.middleware: DEBUG: Initialized with method overriding = True, and path info altering = True\nroutes.middleware: DEBUG: Initialized with method overriding = True, and path info altering = True\nroutes.middleware: DEBUG: Matched DELETE /v1.0/servers/1/backup_schedules\nroutes.middleware: DEBUG: Route path: 'v1.0/{path_info:.*}', defaults: {'action': u'index', 'controller': <nova.api.openstack.API object at 0x261ab50>}\nroutes.middleware: DEBUG: Match dict: {'action': u'index', 'controller': <nova.api.openstack.API object at 0x261ab50>, 'sub_domain': None, 'path_info': 'servers/1/backup_schedules'}\nroutes.middleware: DEBUG: Matched DELETE /servers/1/backup_schedules\nroutes.middleware: DEBUG: Route path: 'servers/:server_id/backup_schedules/:(id)', defaults: {'action': u'delete', 'controller': <nova.api.openstack.backup_schedules.Controller object at 0x381e910>, 'id': None}\nroutes.middleware: DEBUG: Match dict: {'server_id': u'1', 'req': <Request at 0x21c2a10 DELETE http://localhost/v1.0/servers/1/backup_schedules>, 'id': None}\n--------------------- >> end captured logging << ---------------------", 
            "date_created": "2010-10-14 22:05:10.749086+00:00", 
            "author": "https://api.launchpad.net/1.0/~eday"
        }
    ]
}