{
    "status": "Fix Released", 
    "last_updated": "2015-10-15 09:03:51.828574+00:00", 
    "description": "When launching a VM with the NSX neutron driver we get the following exception:\n\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00mTraceback (most recent call last):\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 2152, in _build_resources\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    yield resources\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 2006, in _build_and_run_instance\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    block_device_info=block_device_info)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2444, in spawn\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    block_device_info=block_device_info)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4516, in _create_domain_and_network\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    xml, pause=pause, power_on=power_on)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4446, in _create_domain\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    guest.launch(pause=pause)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/guest.py\", line 141, in launch\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    self._encoded_xml, errors='ignore')\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 195, in __exit__\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    six.reraise(self.type_, self.value, self.tb)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/guest.py\", line 136, in launch\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    return self._domain.createWithFlags(flags)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    rv = execute(f, *args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    six.reraise(c, e, tb)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    rv = meth(*args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/libvirt.py\", line 900, in createWithFlags\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00mlibvirtError: unsupported configuration: scripts are not supported on interfaces of type bridge\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m\n \nThis is a result of the patch https://review.openstack.org/#/c/199092/", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1497896", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1497896, 
    "index": 1812, 
    "created": "2015-09-21 08:49:40.705365+00:00", 
    "title": "Libvirt: unable to launch a VM with direct OVS plugging neutron drivers", 
    "comments": [
        {
            "content": "When launching a VM with the NSX neutron driver we get the following exception:\n\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00mTraceback (most recent call last):\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 2152, in _build_resources\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    yield resources\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 2006, in _build_and_run_instance\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    block_device_info=block_device_info)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2444, in spawn\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    block_device_info=block_device_info)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4516, in _create_domain_and_network\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    xml, pause=pause, power_on=power_on)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4446, in _create_domain\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    guest.launch(pause=pause)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/guest.py\", line 141, in launch\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    self._encoded_xml, errors='ignore')\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 195, in __exit__\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    six.reraise(self.type_, self.value, self.tb)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/guest.py\", line 136, in launch\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    return self._domain.createWithFlags(flags)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 183, in doit\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    result = proxy_call(self._autowrap, f, *args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 141, in proxy_call\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    rv = execute(f, *args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 122, in execute\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    six.reraise(c, e, tb)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 80, in tworker\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    rv = meth(*args, **kwargs)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m  File \"/usr/local/lib/python2.7/dist-packages/libvirt.py\", line 900, in createWithFlags\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m    if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00mlibvirtError: unsupported configuration: scripts are not supported on interfaces of type bridge\n^[[01;31m2015-09-21 22:08:48.964 TRACE nova.compute.manager ^[[01;35m[instance: a8f73028-1493-4ad2-b957-1d75422b3ff2] ^[[00m\n \nThis is a result of the patch https://review.openstack.org/#/c/199092/", 
            "date_created": "2015-09-21 08:49:40.705365+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/225585", 
            "date_created": "2015-09-21 08:51:28.302552+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "[10:03:46]  <salv-orlando>\tjohnthetubaguy: I'm not sure if garyk mentioned that this is not only affecting the NSX plugin, but all the plugins that do direct OVS plugging", 
            "date_created": "2015-09-21 09:06:36.999020+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/225585\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=c85137c8b74880f849612d32175d4c572d6ba482\nSubmitter: Jenkins\nBranch:    master\n\ncommit c85137c8b74880f849612d32175d4c572d6ba482\nAuthor: garyk <email address hidden>\nDate:   Mon Sep 21 08:51:19 2015 +0000\n\n    libvirt: fix direct OVS plugging\n    \n    The commit cd1766287862162aadf1c111a4807f7618f34578 introduced a error\n    when doing direct OVS plugging.\n    \n    Closes-bug: #1497896\n    \n    Change-Id: I6f0ac3085d2dc4345dddd4647fccb540941669e5\n", 
            "date_created": "2015-09-21 11:48:03.880080+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}