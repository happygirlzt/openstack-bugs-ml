{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:57:25.841276+00:00", 
    "description": "Several tests fail when run on Python 2.6.1 (they appear at the bottom of this report). \n\nThe failures all ultimately look like this: \n\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: associate_floating_ip() keywords must be strings\n\nThe problems appears to be that the keys in the params dictionary are unicode strings, and Python 2.6.1 does not support unicode strings as keywords for function arguments. (I ran the Python debugger and confirmed the keys in the dict are unicode strings).\n\nAnd, indeed, you can't do that in Python 2.6.1 (stock  version on Mac OS X Snow Leopard):\n\n$ python\nPython 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n[GCC 4.2.1 (Apple Inc. build 5646)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> def f(a=1, b=2): print a, b\n... \n>>> f(**{\"a\":1, \"b\":2})\n1 2\n>>> f(**{u\"a\":1, u\"b\":2})\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nTypeError: f() keywords must be strings\n\nNote that all tests pass on Python 2.6.5 (stock version on Ubuntu 10.04). \n\nNot sure if Python 2.6.1 is intended to be supported by OpenStack or not, but if not, would help to do a version check somewhere and let the user know the local version isn't supported.\n\n\nComplete failure outputs from run_tests.sh:\n \n======================================================================\nERROR: test_associate_disassociate_address (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 115, in test_associate_disassociate_address\n    public_ip=address)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 759, in associate_address\n    address=public_ip)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: associate_floating_ip() keywords must be strings\n\n======================================================================\nERROR: test_console_output (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 195, in test_console_output\n    rv = self.cloud.run_instances(self.context, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 783, in run_instances\n    'AvailabilityZone'))\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: create() keywords must be strings\n\n======================================================================\nERROR: test_describe_instances (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 285, in test_describe_instances\n    result = self.cloud.describe_instances(self.context)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 638, in describe_instances\n    return self._format_describe_instances(context, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n    return {'reservationSet': self._format_instances(context, **kwargs)}\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n    if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\nKeyError: 'network'\n\n======================================================================\nERROR: test_instance_update_state (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 311, in test_instance_update_state\n    rv = self.cloud._format_describe_instances(self.context)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n    return {'reservationSet': self._format_instances(context, **kwargs)}\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n    if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\nKeyError: 'network'\n\n======================================================================\nERROR: test_update_of_instance_display_fields (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 382, in test_update_of_instance_display_fields\n    display_name='c00l 1m4g3')\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 824, in update_instance\n    self.compute_api.update(context, instance_id=instance_id, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: update() keywords must be strings\n\n======================================================================\nERROR: test_json_params (nova.tests.test_direct.DirectTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 71, in test_json_params\n    resp = req.get_response(self.router)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: echo() keywords must be strings\n\n======================================================================\nERROR: test_proxy (nova.tests.test_direct.DirectTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 86, in test_proxy\n    rv = proxy.fake.echo(self.context, data='baz')\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: echo() keywords must be strings", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/705052", 
    "owner": "https://api.launchpad.net/1.0/~vishvananda", 
    "id": 705052, 
    "index": 2245, 
    "created": "2011-01-19 18:50:59.908600+00:00", 
    "title": "Some tests fail on Python 2.6.1 - dict keys cannot be unicode strings", 
    "comments": [
        {
            "content": "Several tests fail when run on Python 2.6.1 (they appear at the bottom of this report). \n\nThe failures all ultimately look like this: \n\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: associate_floating_ip() keywords must be strings\n\nThe problems appears to be that the keys in the params dictionary are unicode strings, and Python 2.6.1 does not support unicode strings as keywords for function arguments. (I ran the Python debugger and confirmed the keys in the dict are unicode strings).\n\nAnd, indeed, you can't do that in Python 2.6.1 (stock  version on Mac OS X Snow Leopard):\n\n$ python\nPython 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n[GCC 4.2.1 (Apple Inc. build 5646)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> def f(a=1, b=2): print a, b\n... \n>>> f(**{\"a\":1, \"b\":2})\n1 2\n>>> f(**{u\"a\":1, u\"b\":2})\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nTypeError: f() keywords must be strings\n\nNote that all tests pass on Python 2.6.5 (stock version on Ubuntu 10.04). \n\nNot sure if Python 2.6.1 is intended to be supported by OpenStack or not, but if not, would help to do a version check somewhere and let the user know the local version isn't supported.\n\n\nComplete failure outputs from run_tests.sh:\n \n======================================================================\nERROR: test_associate_disassociate_address (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 115, in test_associate_disassociate_address\n    public_ip=address)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 759, in associate_address\n    address=public_ip)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: associate_floating_ip() keywords must be strings\n\n======================================================================\nERROR: test_console_output (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 195, in test_console_output\n    rv = self.cloud.run_instances(self.context, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 783, in run_instances\n    'AvailabilityZone'))\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: create() keywords must be strings\n\n======================================================================\nERROR: test_describe_instances (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 285, in test_describe_instances\n    result = self.cloud.describe_instances(self.context)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 638, in describe_instances\n    return self._format_describe_instances(context, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n    return {'reservationSet': self._format_instances(context, **kwargs)}\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n    if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\nKeyError: 'network'\n\n======================================================================\nERROR: test_instance_update_state (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 311, in test_instance_update_state\n    rv = self.cloud._format_describe_instances(self.context)\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n    return {'reservationSet': self._format_instances(context, **kwargs)}\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n    if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\nKeyError: 'network'\n\n======================================================================\nERROR: test_update_of_instance_display_fields (nova.tests.test_direct.DirectCloudTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 382, in test_update_of_instance_display_fields\n    display_name='c00l 1m4g3')\n  File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 824, in update_instance\n    self.compute_api.update(context, instance_id=instance_id, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: update() keywords must be strings\n\n======================================================================\nERROR: test_json_params (nova.tests.test_direct.DirectTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 71, in test_json_params\n    resp = req.get_response(self.router)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: echo() keywords must be strings\n\n======================================================================\nERROR: test_proxy (nova.tests.test_direct.DirectTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 86, in test_proxy\n    rv = proxy.fake.echo(self.context, data='baz')\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n    **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n    resp = req.get_response(self.app)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n    response = req.get_response(self.application)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n    application, catch_exc_info=False)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n    result = method(context, **params)\nTypeError: echo() keywords must be strings", 
            "date_created": "2011-01-19 18:50:59.908600+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "This is from  lp:nova, revision 583.", 
            "date_created": "2011-01-19 18:51:36.386612+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "Looks like the fix should be fairly simple... just coerce kwargs keys to str() on line 199 in direct.py?", 
            "date_created": "2011-01-19 19:10:56.598324+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "There was a similar bug I fixed a while back in context.  Conversion to and from json often turns things into unicode.\n\nI'll take a look at this one.\n\nVish\n\nOn Jan 19, 2011, at 10:51 AM, Lorin Hochstein wrote:\n\n> This is from  lp:nova, revision 583.\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/705052\n> \n> Title:\n>  Some tests fail on Python 2.6.1\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Several tests fail when run on Python 2.6.1 (they appear at the bottom\n>  of this report).\n> \n>  The failures all ultimately look like this:\n> \n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  The problems appears to be that the keys in the params dictionary are\n>  unicode strings, and Python 2.6.1 does not support unicode strings as\n>  keywords for function arguments. (I ran the Python debugger and\n>  confirmed the keys in the dict are unicode strings).\n> \n>  And, indeed, you can't do that in Python 2.6.1 (stock  version on Mac\n>  OS X Snow Leopard):\n> \n>  $ python\n>  Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n>  [GCC 4.2.1 (Apple Inc. build 5646)] on darwin\n>  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>> def f(a=1, b=2): print a, b\n>  ... \n>>>> f(**{\"a\":1, \"b\":2})\n>  1 2\n>>>> f(**{u\"a\":1, u\"b\":2})\n>  Traceback (most recent call last):\n>    File \"<stdin>\", line 1, in <module>\n>  TypeError: f() keywords must be strings\n> \n>  Note that all tests pass on Python 2.6.5 (stock version on Ubuntu\n>  10.04).\n> \n>  Not sure if Python 2.6.1 is intended to be supported by OpenStack or\n>  not, but if not, would help to do a version check somewhere and let\n>  the user know the local version isn't supported.\n> \n> \n>  Complete failure outputs from run_tests.sh:\n> \n>  ======================================================================\n>  ERROR: test_associate_disassociate_address (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 115, in test_associate_disassociate_address\n>      public_ip=address)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 759, in associate_address\n>      address=public_ip)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_console_output (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 195, in test_console_output\n>      rv = self.cloud.run_instances(self.context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 783, in run_instances\n>      'AvailabilityZone'))\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: create() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_describe_instances (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 285, in test_describe_instances\n>      result = self.cloud.describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 638, in describe_instances\n>      return self._format_describe_instances(context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_instance_update_state (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 311, in test_instance_update_state\n>      rv = self.cloud._format_describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_update_of_instance_display_fields (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 382, in test_update_of_instance_display_fields\n>      display_name='c00l 1m4g3')\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 824, in update_instance\n>      self.compute_api.update(context, instance_id=instance_id, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: update() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_json_params (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 71, in test_json_params\n>      resp = req.get_response(self.router)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_proxy (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 86, in test_proxy\n>      rv = proxy.fake.echo(self.context, data='baz')\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n> \n\n", 
            "date_created": "2011-01-19 19:11:58+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "I don't have all the dependencies installed on my mac atm.  Can you verify if\n\n=== modified file 'nova/api/direct.py'\n--- nova/api/direct.py  2011-01-04 22:07:46 +0000\n+++ nova/api/direct.py  2011-01-19 19:19:22 +0000\n@@ -196,6 +196,8 @@\n         # TODO(termie): do some basic normalization on methods\n         method = getattr(self.service_handle, action)\n \n+        # NOTE(vish): make sure we have no unicode keys for py2.6.\n+        params = dict([(str(k), v) for (k, v) in params.iteritems()])\n         result = method(context, **params)\n         if type(result) is dict or type(result) is list:\n             return self._serialize(result, req)\n\nfixes the problem?\n \nIf  you don't want to patch yourself, there is a branch with the patch applied here:\n\n lp:~vishvananda/nova/lp705052\n\nVish\n\nOn Jan 19, 2011, at 10:51 AM, Lorin Hochstein wrote:\n\n> This is from  lp:nova, revision 583.\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/705052\n> \n> Title:\n>  Some tests fail on Python 2.6.1\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Several tests fail when run on Python 2.6.1 (they appear at the bottom\n>  of this report).\n> \n>  The failures all ultimately look like this:\n> \n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  The problems appears to be that the keys in the params dictionary are\n>  unicode strings, and Python 2.6.1 does not support unicode strings as\n>  keywords for function arguments. (I ran the Python debugger and\n>  confirmed the keys in the dict are unicode strings).\n> \n>  And, indeed, you can't do that in Python 2.6.1 (stock  version on Mac\n>  OS X Snow Leopard):\n> \n>  $ python\n>  Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n>  [GCC 4.2.1 (Apple Inc. build 5646)] on darwin\n>  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>> def f(a=1, b=2): print a, b\n>  ... \n>>>> f(**{\"a\":1, \"b\":2})\n>  1 2\n>>>> f(**{u\"a\":1, u\"b\":2})\n>  Traceback (most recent call last):\n>    File \"<stdin>\", line 1, in <module>\n>  TypeError: f() keywords must be strings\n> \n>  Note that all tests pass on Python 2.6.5 (stock version on Ubuntu\n>  10.04).\n> \n>  Not sure if Python 2.6.1 is intended to be supported by OpenStack or\n>  not, but if not, would help to do a version check somewhere and let\n>  the user know the local version isn't supported.\n> \n> \n>  Complete failure outputs from run_tests.sh:\n> \n>  ======================================================================\n>  ERROR: test_associate_disassociate_address (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 115, in test_associate_disassociate_address\n>      public_ip=address)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 759, in associate_address\n>      address=public_ip)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_console_output (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 195, in test_console_output\n>      rv = self.cloud.run_instances(self.context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 783, in run_instances\n>      'AvailabilityZone'))\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: create() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_describe_instances (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 285, in test_describe_instances\n>      result = self.cloud.describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 638, in describe_instances\n>      return self._format_describe_instances(context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_instance_update_state (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 311, in test_instance_update_state\n>      rv = self.cloud._format_describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_update_of_instance_display_fields (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 382, in test_update_of_instance_display_fields\n>      display_name='c00l 1m4g3')\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 824, in update_instance\n>      self.compute_api.update(context, instance_id=instance_id, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: update() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_json_params (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 71, in test_json_params\n>      resp = req.get_response(self.router)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_proxy (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 86, in test_proxy\n>      rv = proxy.fake.echo(self.context, data='baz')\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n> \n\n", 
            "date_created": "2011-01-19 19:21:39+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Installed deps and tested, all tests run correctly on snow leopard.  Proposing merge.\nOn Jan 19, 2011, at 10:51 AM, Lorin Hochstein wrote:\n\n> This is from  lp:nova, revision 583.\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/705052\n> \n> Title:\n>  Some tests fail on Python 2.6.1\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  Several tests fail when run on Python 2.6.1 (they appear at the bottom\n>  of this report).\n> \n>  The failures all ultimately look like this:\n> \n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  The problems appears to be that the keys in the params dictionary are\n>  unicode strings, and Python 2.6.1 does not support unicode strings as\n>  keywords for function arguments. (I ran the Python debugger and\n>  confirmed the keys in the dict are unicode strings).\n> \n>  And, indeed, you can't do that in Python 2.6.1 (stock  version on Mac\n>  OS X Snow Leopard):\n> \n>  $ python\n>  Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n>  [GCC 4.2.1 (Apple Inc. build 5646)] on darwin\n>  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>> def f(a=1, b=2): print a, b\n>  ... \n>>>> f(**{\"a\":1, \"b\":2})\n>  1 2\n>>>> f(**{u\"a\":1, u\"b\":2})\n>  Traceback (most recent call last):\n>    File \"<stdin>\", line 1, in <module>\n>  TypeError: f() keywords must be strings\n> \n>  Note that all tests pass on Python 2.6.5 (stock version on Ubuntu\n>  10.04).\n> \n>  Not sure if Python 2.6.1 is intended to be supported by OpenStack or\n>  not, but if not, would help to do a version check somewhere and let\n>  the user know the local version isn't supported.\n> \n> \n>  Complete failure outputs from run_tests.sh:\n> \n>  ======================================================================\n>  ERROR: test_associate_disassociate_address (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 115, in test_associate_disassociate_address\n>      public_ip=address)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 759, in associate_address\n>      address=public_ip)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: associate_floating_ip() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_console_output (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 195, in test_console_output\n>      rv = self.cloud.run_instances(self.context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 783, in run_instances\n>      'AvailabilityZone'))\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: create() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_describe_instances (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 285, in test_describe_instances\n>      result = self.cloud.describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 638, in describe_instances\n>      return self._format_describe_instances(context, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_instance_update_state (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 311, in test_instance_update_state\n>      rv = self.cloud._format_describe_instances(self.context)\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 645, in _format_describe_instances\n>      return {'reservationSet': self._format_instances(context, **kwargs)}\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 683, in _format_instances\n>      if instance['fixed_ip']['network'] and 'use_v6' in kwargs:\n>  KeyError: 'network'\n> \n>  ======================================================================\n>  ERROR: test_update_of_instance_display_fields (nova.tests.test_direct.DirectCloudTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_cloud.py\", line 382, in test_update_of_instance_display_fields\n>      display_name='c00l 1m4g3')\n>    File \"/Users/lorin/nova/trunk/nova/api/ec2/cloud.py\", line 824, in update_instance\n>      self.compute_api.update(context, instance_id=instance_id, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: update() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_json_params (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 71, in test_json_params\n>      resp = req.get_response(self.router)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n>  ======================================================================\n>  ERROR: test_proxy (nova.tests.test_direct.DirectTestCase)\n>  ----------------------------------------------------------------------\n>  Traceback (most recent call last):\n>    File \"/Users/lorin/nova/trunk/nova/tests/test_direct.py\", line 86, in test_proxy\n>      rv = proxy.fake.echo(self.context, data='baz')\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 230, in _wrapper\n>      **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 217, in __do_request\n>      resp = req.get_response(self.app)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/wsgi.py\", line 207, in __call__\n>      response = req.get_response(self.application)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 919, in get_response\n>      application, catch_exc_info=False)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/request.py\", line 887, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n>      response = self.app(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 159, in __call__\n>      return resp(environ, start_response)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/Users/lorin/nova/trunk/.nova-venv/lib/python2.6/site-packages/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/Users/lorin/nova/trunk/nova/api/direct.py\", line 199, in __call__\n>      result = method(context, **params)\n>  TypeError: echo() keywords must be strings\n> \n> \n\n", 
            "date_created": "2011-01-19 19:36:14+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Confirmed that the patch fixes the problem on my machine.", 
            "date_created": "2011-01-19 20:00:46.763804+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }
    ]
}