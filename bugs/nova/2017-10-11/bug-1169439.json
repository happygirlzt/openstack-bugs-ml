{
    "status": "Invalid", 
    "last_updated": "2013-11-27 02:12:34.585357+00:00", 
    "description": "I'm following the http://docs.openstack.org/trunk/openstack-compute/install/apt/content/compute-verifying-install.html guide to install nova. \n\n\"nova-manage --debug service list\" gives me this error:\n2013-04-16 08:30:49 DEBUG nova.utils [req-3bb016b7-0b18-4440-9248-2802391617cc None None] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc'> __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:506\nCommand failed, please check log for more info\n2013-04-16 08:30:49 CRITICAL nova [req-3bb016b7-0b18-4440-9248-2802391617cc None None] (OperationalError) unable to open database file None None\n\nIf I run \"nova-manage config list\" then the only sql_connection line is:\nsql_connection = sqlite:////usr/lib/python2.7/dist-packages/nova.sqlite\neven if in my /etc/nova/nova.conf I have\nsql_connection=mysql://nova:f00bar@192.168.206.130/nova\n\nIt's funny that previously to \"nova-manage --debug service list\" I ran \"nova-manage db sync\" which connected to the mysql database and filled it up nicely.\n\n\"nova-manage version\":\n2012.2.2-dev (2012.2.2-LOCALBRANCH:LOCALREVISION)\n\nMy /etc/nova/nova.conf is the one from the installation guide:\n[DEFAULT]\n\n# LOGS/STATE\nverbose=True\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nlock_path=/var/lock/nova\nrootwrap_config=/etc/nova/rootwrap.conf\n\n# SCHEDULER\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\n\n# VOLUMES\nvolume_driver=nova.volume.driver.ISCSIDriver\nvolume_group=nova-volumes\nvolume_name_template=volume-%s\niscsi_helper=tgtadm\n\n# DATABASE\nsql_connection=mysql://nova:f00bar@192.168.206.130/nova\n\n# COMPUTE\nlibvirt_type=qemu\ncompute_driver=libvirt.LibvirtDriver\ninstance_name_template=instance-%08x\napi_paste_config=/etc/nova/api-paste.ini\n\n# COMPUTE/APIS: if you have separate configs for separate services\n# this flag is required for both nova-api and nova-compute\nallow_resize_to_same_host=True\n\n# APIS\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nec2_dmz_host=192.168.206.130\ns3_host=192.168.206.130\n\n# RABBITMQ\nrabbit_host=192.168.206.130\n\n# GLANCE\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=192.168.206.130:9292\n\n# NETWORK\nnetwork_manager=nova.network.manager.FlatDHCPManager\nforce_dhcp_release=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfirewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver\n\n# Change my_ip to match each host\nmy_ip=192.168.206.130\npublic_interface=eth0\nvlan_interface=eth0\nflat_network_bridge=br100\nflat_interface=eth0\nfixed_range=''\n\n# NOVNC CONSOLE\nnovncproxy_base_url=http://192.168.206.130:6080/vnc_auto.html\n\n# Change vncserver_proxyclient_address and vncserver_listen to match each compute host\nvncserver_proxyclient_address=192.168.206.130\nvncserver_listen=192.168.206.130\n\n# AUTHENTICATION\nauth_strategy=keystone", 
    "tags": [
        "nova-manage"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1169439", 
    "owner": "None", 
    "id": 1169439, 
    "index": 3585, 
    "created": "2013-04-16 06:35:54.914403+00:00", 
    "title": "nova-manage unable to open database", 
    "comments": [
        {
            "content": "I'm following the http://docs.openstack.org/trunk/openstack-compute/install/apt/content/compute-verifying-install.html guide to install nova. \n\n\"nova-manage --debug service list\" gives me this error:\n2013-04-16 08:30:49 DEBUG nova.utils [req-3bb016b7-0b18-4440-9248-2802391617cc None None] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc'> __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:506\nCommand failed, please check log for more info\n2013-04-16 08:30:49 CRITICAL nova [req-3bb016b7-0b18-4440-9248-2802391617cc None None] (OperationalError) unable to open database file None None\n\nIf I run \"nova-manage config list\" then the only sql_connection line is:\nsql_connection = sqlite:////usr/lib/python2.7/dist-packages/nova.sqlite\neven if in my /etc/nova/nova.conf I have\nsql_connection=mysql://nova:f00bar@192.168.206.130/nova\n\nIt's funny that previously to \"nova-manage --debug service list\" I ran \"nova-manage db sync\" which connected to the mysql database and filled it up nicely.\n\n\"nova-manage version\":\n2012.2.2-dev (2012.2.2-LOCALBRANCH:LOCALREVISION)\n\nMy /etc/nova/nova.conf is the one from the installation guide:\n[DEFAULT]\n\n# LOGS/STATE\nverbose=True\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nlock_path=/var/lock/nova\nrootwrap_config=/etc/nova/rootwrap.conf\n\n# SCHEDULER\ncompute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler\n\n# VOLUMES\nvolume_driver=nova.volume.driver.ISCSIDriver\nvolume_group=nova-volumes\nvolume_name_template=volume-%s\niscsi_helper=tgtadm\n\n# DATABASE\nsql_connection=mysql://nova:f00bar@192.168.206.130/nova\n\n# COMPUTE\nlibvirt_type=qemu\ncompute_driver=libvirt.LibvirtDriver\ninstance_name_template=instance-%08x\napi_paste_config=/etc/nova/api-paste.ini\n\n# COMPUTE/APIS: if you have separate configs for separate services\n# this flag is required for both nova-api and nova-compute\nallow_resize_to_same_host=True\n\n# APIS\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\nec2_dmz_host=192.168.206.130\ns3_host=192.168.206.130\n\n# RABBITMQ\nrabbit_host=192.168.206.130\n\n# GLANCE\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=192.168.206.130:9292\n\n# NETWORK\nnetwork_manager=nova.network.manager.FlatDHCPManager\nforce_dhcp_release=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\nfirewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver\n\n# Change my_ip to match each host\nmy_ip=192.168.206.130\npublic_interface=eth0\nvlan_interface=eth0\nflat_network_bridge=br100\nflat_interface=eth0\nfixed_range=''\n\n# NOVNC CONSOLE\nnovncproxy_base_url=http://192.168.206.130:6080/vnc_auto.html\n\n# Change vncserver_proxyclient_address and vncserver_listen to match each compute host\nvncserver_proxyclient_address=192.168.206.130\nvncserver_listen=192.168.206.130\n\n# AUTHENTICATION\nauth_strategy=keystone", 
            "date_created": "2013-04-16 06:35:54.914403+00:00", 
            "author": "https://api.launchpad.net/1.0/~diana-burduja"
        }, 
        {
            "content": "Make sure you don\u2019t have a rogue nova.conf in your root directory as it might take precedence, like it happened in this case:\n\nhttp://openstack.markmail.org/search/?q=mysql#query:mysql%20from%3A%22Samuel%20Winchenbach%22+page:1+mid:ei3kcvkcsaq23cix+state:results\n\n\n\n", 
            "date_created": "2013-04-25 14:25:44.310840+00:00", 
            "author": "https://api.launchpad.net/1.0/~gmi"
        }, 
        {
            "content": "Thanks George. That didn't help in my case, unfortunately. I'm having the same problem as Diana, where it seems that nova-manage is looking for a SQLite database when MySQL was clearly specified.\n\nWhen I run the command \"nova-manage --debug service list\" I get this output:\n\n2013-04-25 07:36:59.797 15203 DEBUG nova.servicegroup.api [-] ServiceGroup driver defined as an instance of db __new__ /usr/lib/python2.7/dist-packages/nova/servicegroup/api.py:61\n2013-04-25 07:36:59.869 DEBUG nova.openstack.common.lockutils [req-4383e6cf-d92c-4ab0-bbea-6db89825c073 None None] Got semaphore \"dbapi_backend\" for method \"__get_backend\"... inner /usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py:186\nCommand failed, please check log for more info\n2013-04-25 07:37:00.092 CRITICAL nova [req-4383e6cf-d92c-4ab0-bbea-6db89825c073 None None] (OperationalError) unable to open database file None None\n\nThis happens with almost all nova-manage commands. Additionally, there is /no/ log output in /var/log/nova-manage.log. The log file is there, but has zero length.\n\nI have definitely defined MySQL as the database, and it works fine in all other cases. I've logged into MySQL with the credentials I've defined in nova.conf with no problem. I've removed the nova.sqlite file, stopped/started all of the nova-* services and still I get this error.", 
            "date_created": "2013-04-25 16:15:35.259925+00:00", 
            "author": "https://api.launchpad.net/1.0/~zigguratt"
        }, 
        {
            "content": "Sorry, more details: Running grizzly on Ubuntu 12.04. All services on a single server. Not (yet) using Swift, Cinder or Quantum.", 
            "date_created": "2013-04-25 16:21:19.809053+00:00", 
            "author": "https://api.launchpad.net/1.0/~zigguratt"
        }, 
        {
            "content": "Thanks to help from GMi, the problem has been solved! It was a file permission issue, though I'm not sure why this occurred. nova-manage was not able to read /etc/nova/nova.conf so it was defaulting to trying to read a non-existent SQLite database file.\n\nThanks, George!", 
            "date_created": "2013-04-25 17:53:55.451119+00:00", 
            "author": "https://api.launchpad.net/1.0/~zigguratt"
        }, 
        {
            "content": "Thanks, it was the file permissions", 
            "date_created": "2013-04-28 19:37:33.049898+00:00", 
            "author": "https://api.launchpad.net/1.0/~diana-burduja"
        }, 
        {
            "content": "Just hit this issue too... I wonder if a warning indicating a permission issue might be worth it\n", 
            "date_created": "2013-09-21 21:47:11.450797+00:00", 
            "author": "https://api.launchpad.net/1.0/~pabelanger"
        }, 
        {
            "content": "I'm having the same error... How to change the file permission?\n\nis this correct?\n\nsudo chown -R root:nova /etc/nova\nsudo chmod 644 /etc/nova/nova.conf?", 
            "date_created": "2013-11-15 03:10:27.262269+00:00", 
            "author": "https://api.launchpad.net/1.0/~asma1290"
        }, 
        {
            "content": "Is this problem under the file permission or owner?\nI'm considering that this is influenced something.\n\nRunning grizzly on Ubuntu 12.04.\n\nuser01@compute:~$ sudo ls -lha /etc/nova/nova.conf\n-rw-r--r-- 1 root nova 2.4K Nov 27 01:08 /etc/nova/nova.conf\nuser01@compute:~$\nuser01@compute:~$ nova-manage network list\nid      IPv4                    IPv6            start address   DNS1            DNS2            VlanID              project         uuid\nCommand failed, please check log for more info\n2013-11-27 01:59:39.006 CRITICAL nova [req-f337adca-740c-4ded-b2c1-d1b20b3046cd None None] (OperationalError) unable to open database file None None\nuser01@compute:~$\nuser01@compute:~$ sudo su\nroot@compute:/home/user01#\nroot@compute:/home/user01# source /home/user01/.stackrc\nroot@compute:/home/user01# nova-manage network list\nid      IPv4                    IPv6            start address   DNS1            DNS2            VlanID              project         uuid\n1       10.0.10.0/26            None            10.0.10.3       8.8.4.4         None            100                 9d0164f44254454ebb08cee496c41aab        1bd4c82a-14b3-4ed0-ba46-44b42dd127c1\n2       10.10.1.0/24            None            10.10.1.2       8.8.4.4         None            None                9d0164f44254454ebb08cee496c41aab        48fb3820-945e-4ddd-9480-7798d60c3a98\n4       10.10.3.0/24            None            10.10.3.3       8.8.4.4         None            101                 9d0164f44254454ebb08cee496c41aab        faa42f9e-0f87-4b1c-b341-217c8d5449a2\nroot@compute:/home/user01#\nroot@compute:/home/user01# exit\nuser01@compute:~$ sudo chown nova.nova /etc/nova/nova.conf\nuser01@compute:~$ \nuser01@compute:~$ nova-manage network list\nid      IPv4                    IPv6            start address   DNS1            DNS2            VlaID              project         uuid\nCommand failed, please check log for more info\n2013-11-27 02:06:24.386 CRITICAL nova [req-30b3ce20-1ed9-4511-8be2-cad8d4811234 None None] (OperatinalError) unable to open database file None None\nuser01@compute:~$ sudo su\nroot@compute:/home/user01# nova-manage network list\nid      IPv4                    IPv6            start address   DNS1            DNS2            VlaID              project         uuid\n1       10.0.10.0/26            None            10.0.10.3       8.8.4.4         None            100                9d0164f44254454ebb08cee496c41aab        1bd4c82a-14b3-4ed0-ba46-44b42dd127c1\n2       10.10.1.0/24            None            10.10.1.2       8.8.4.4         None            Non                9d0164f44254454ebb08cee496c41aab        48fb3820-945e-4ddd-9480-7798d60c3a98\n4       10.10.3.0/24            None            10.10.3.3       8.8.4.4         None            101                9d0164f44254454ebb08cee496c41aab        faa42f9e-0f87-4b1c-b341-217c8d5449a2\nroot@compute:/home/user01#\n\n", 
            "date_created": "2013-11-27 02:12:33.376852+00:00", 
            "author": "https://api.launchpad.net/1.0/~chicchi-and-suyu"
        }
    ]
}