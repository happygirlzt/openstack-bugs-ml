{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:26:58.542495+00:00", 
    "description": "Please see\nhttp://logs.openstack.org/76/156076/8/check/check-tempest-dsvm-cells/a23e95f/logs/screen-n-api.txt.gz?level=TRACE\n\nTracked it down to this change\nIf3f9e73eedd71b779fc6984c53eec0023e39549d\n\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack Traceback (most recent call last):\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 977, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 902, in _call_app\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 136, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 749, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     content_type, body, accept)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 814, in _process_stack\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 904, in dispatch\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return method(req=request, **action_args)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/compute/contrib/hypervisors.py\", line 98, in index\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     for hyp in compute_nodes])\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack AttributeError: 'dict' object has no attribute 'host'", 
    "tags": [
        "api", 
        "cells"
    ], 
    "importance": "High", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1423237", 
    "owner": "https://api.launchpad.net/1.0/~alaski", 
    "id": 1423237, 
    "index": 1689, 
    "created": "2015-02-18 15:58:21.083345+00:00", 
    "title": "check-tempest-dsvm-cells fails with: 'AttributeError: 'dict' object has no attribute 'host' in hypervisor.py'", 
    "comments": [
        {
            "content": "Please see\nhttp://logs.openstack.org/76/156076/8/check/check-tempest-dsvm-cells/a23e95f/logs/screen-n-api.txt.gz?level=TRACE\n\nTracked it down to this change\nIf3f9e73eedd71b779fc6984c53eec0023e39549d\n\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack Traceback (most recent call last):\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return req.get_response(self.application)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     application, catch_exc_info=False)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 977, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self._call_app(env, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/keystonemiddleware/auth_token.py\", line 902, in _call_app\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self._app(env, _fake_start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/routes/middleware.py\", line 136, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return resp(environ, start_response)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 749, in __call__\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     content_type, body, accept)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 814, in _process_stack\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/wsgi.py\", line 904, in dispatch\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     return method(req=request, **action_args)\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack   File \"/opt/stack/new/nova/nova/api/openstack/compute/contrib/hypervisors.py\", line 98, in index\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack     for hyp in compute_nodes])\n2015-02-18 03:35:01.182 18985 TRACE nova.api.openstack AttributeError: 'dict' object has no attribute 'host'", 
            "date_created": "2015-02-18 15:58:21.083345+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "http://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiQXR0cmlidXRlRXJyb3I6ICdkaWN0JyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSAnaG9zdCdcIiBBTkQgbWVzc2FnZTpcImh5cGVydmlzb3JzLnB5XCIgQU5EIHRhZ3M6XCJzY3JlZW4tbi1hcGkudHh0XCIgQU5EIGJ1aWxkX25hbWU6XCJjaGVjay10ZW1wZXN0LWRzdm0tY2VsbHNcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTQyNDI3NTAwODAxOSwibW9kZSI6IiIsImFuYWx5emVfZmllbGQiOiIifQ==\n\nOver 1000 hits in 7 days, check queue only since the cells job isn't in the integrated gate and it's non-voting so probably no one noticed.", 
            "date_created": "2015-02-18 15:59:49.971700+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/157185", 
            "date_created": "2015-02-18 23:18:06.659480+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/168294", 
            "date_created": "2015-03-27 11:05:01.679899+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/168294\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=4db6e4c7b9a913cbb99fe70377c4c98befc17985\nSubmitter: Jenkins\nBranch:    master\n\ncommit 4db6e4c7b9a913cbb99fe70377c4c98befc17985\nAuthor: Sylvain Bauza <email address hidden>\nDate:   Thu Mar 26 17:39:29 2015 +0100\n\n    Remove old relation in Cells for ComputeNode and Service\n    \n    add_cell_to_service was still checking if compute_node was returned but now that\n    the DB model is no longer having a FK nor a relationship, it's always returning\n    nothing so we can fix the fake mocks and we can remove the conditional.\n    \n    Change-Id: Ib8e85b3daf2c13e8b55ca33e31605abee57a03a4\n    Related-Bug: #1423237\n", 
            "date_created": "2015-04-02 14:38:17.896799+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/157185\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=0860766e16cc27ad11e9e238331297f4661af796\nSubmitter: Jenkins\nBranch:    master\n\ncommit 0860766e16cc27ad11e9e238331297f4661af796\nAuthor: Sylvain Bauza <email address hidden>\nDate:   Thu Feb 19 00:14:22 2015 +0100\n\n    Fix how the Cells API is returning ComputeNode objects\n    \n    As we're expecting ComputeNode objects on the compute.api.HostAPI, we need\n    to convert the Cells API to return ComputeNode objects by using the\n    ComputeNodeProxy object.\n    \n    Co-Authored-By: Andrew Laski <email address hidden>\n    \n    Closes-Bug: #1423237\n    \n    Change-Id: I60995554d119735c42f6bf3ee2c7e78ba8f91b28\n", 
            "date_created": "2015-04-06 16:49:52.371092+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}