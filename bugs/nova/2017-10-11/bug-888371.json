{
    "status": "Fix Released", 
    "last_updated": "2012-07-26 08:24:29.087154+00:00", 
    "description": "if you use python webob 1.2b2 (it is the default install version of easy_install), you'd better change back to 1.1 stable version\n\nwhen i use command:\n\nswauth-list -A https://10.38.10.127:8080/auth/ -U .super_admin -K swauthkey\n\nit's return 500 error\n\nand from log of proxy server :\n\nNov  9 17:23:56 localhost proxy-server ERROR Unhandled exception in request:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 1706, in handle_request\n    return handler(req)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 82, in wrapped\n    return func(*a, **kw)\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 596, in GET\n    return self.GETorHEAD(req)\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 1439, in GETorHEAD\n    req.path_info.rstrip('/'), self.app.account_ring.replica_count)\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 719, in GETorHEAD_base\n    source.getheader('x-timestamp')\nTypeError: 'NoneType' object does not support item assignment\n\nat the storage node log:\n\nNov  9 17:02:18 wq045g2fatm account-server ERROR __call__ error with GET /sdb1/194797/AUTH_.auth : \nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/account/server.py\", line 305, in __call__\n    res = getattr(self, req.method)(req)\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/account/server.py\", line 189, in GET\n    prefix = get_param(req, 'prefix')\n  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/common/utils.py\", line 117, in get_param\n    value = req.str_params.get(name, default)\n  File \"build/bdist.linux-x86_64/egg/webob/descriptors.py\", line 86, in fget\n    warn()\n  File \"build/bdist.linux-x86_64/egg/webob/descriptors.py\", line 83, in warn\n    3\n  File \"build/bdist.linux-x86_64/egg/webob/util.py\", line 51, in warn_deprecation\n    raise DeprecationWarning(text)\nDeprecationWarning: The attribute None is deprecated: disabled starting WebOb 1.2, use params instead\n\nif i change my webob lib version from 1.2b2 to 1.1 , it's ok and just return:\n\n{\"accounts\": [{\"name\": \"hahah\"}, {\"name\": \"root2\"}, {\"name\": \"root3\"}, {\"name\": \"root4\"}, {\"name\": \"root5\"}, {\"name\": \"root6\"}, {\"name\": \"root7\"}, {\"name\": \"root8\"}, {\"name\": \"test\"}, {\"name\": \"testa\"}, {\"name\": \"testa20\"}, {\"name\": \"testa21\"}, {\"name\": \"testa22\"}, {\"name\": \"testaa\"}, {\"name\": \"testaaa\"}, {\"name\": \"testaaaa\"}, {\"name\": \"testaaaaa\"}, {\"name\": \"testaaaaaa\"}, {\"name\": \"testaaaaaaa\"}, {\"name\": \"testaaaaaaaa\"}, {\"name\": \"testaaaaaaaaa\"}, {\"name\": \"testaaaaaaaaaa\"}, {\"name\": \"testaaaaaaaaaaa\"}, {\"name\": \"testaccount\"}]}", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/888371", 
    "owner": "https://api.launchpad.net/1.0/~blamar", 
    "id": 888371, 
    "index": 2637, 
    "created": "2011-11-10 02:03:44.902656+00:00", 
    "title": "Compatibility issues with python webob 1.2b2", 
    "comments": [
        {
            "content": "if you use python webob 1.2b2 (it is the default install version of easy_install), you'd better change back to 1.1 stable version\n\nwhen i use command:\n\nswauth-list -A https://10.38.10.127:8080/auth/ -U .super_admin -K swauthkey\n\n\nit's return 500 error\n\nand from log of proxy server :\n\nNov  9 17:23:56 localhost proxy-server ERROR Unhandled exception in request: #012Traceback (most recent call last):#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 1706, in handle_request#012    return handler(req)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 82, in wrapped#012    return func(*a, **kw)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 596, in GET#012    return self.GETorHEAD(req)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 1439, in GETorHEAD#012    req.path_info.rstrip('/'), self.app.account_ring.replica_count)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/proxy/server.py\", line 719, in GETorHEAD_base#012    source.getheader('x-timestamp')#012TypeError: 'NoneType' object does not support item assignment\n\n\nat the storage node log:\n\nNov  9 17:02:18 wq045g2fatm account-server ERROR __call__ error with GET /sdb1/194797/AUTH_.auth : #012Traceback (most recent call last):#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/account/server.py\", line 305, in __call__#012    res = getattr(self, req.method)(req)#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/account/server.py\", line 189, in GET#012    prefix = get_param(req, 'prefix')#012  File \"/usr/lib/python2.6/site-packages/swift-1.4.3-py2.6.egg/swift/common/utils.py\", line 117, in get_param#012    value = req.str_params.get(name, default)#012  File \"build/bdist.linux-x86_64/egg/webob/descriptors.py\", line 86, in fget#012    warn()#012  File \"build/bdist.linux-x86_64/egg/webob/descriptors.py\", line 83, in warn#012    3#012  File \"build/bdist.linux-x86_64/egg/webob/util.py\", line 51, in warn_deprecation#012    raise DeprecationWarning(text)#012DeprecationWarning: The attribute None is deprecated: disabled starting WebOb 1.2, use params instead\n\nif i change my webob lib version from 1.2b2 to 1.1 , it's ok and just return:\n\n{\"accounts\": [{\"name\": \"hahah\"}, {\"name\": \"root2\"}, {\"name\": \"root3\"}, {\"name\": \"root4\"}, {\"name\": \"root5\"}, {\"name\": \"root6\"}, {\"name\": \"root7\"}, {\"name\": \"root8\"}, {\"name\": \"test\"}, {\"name\": \"testa\"}, {\"name\": \"testa20\"}, {\"name\": \"testa21\"}, {\"name\": \"testa22\"}, {\"name\": \"testaa\"}, {\"name\": \"testaaa\"}, {\"name\": \"testaaaa\"}, {\"name\": \"testaaaaa\"}, {\"name\": \"testaaaaaa\"}, {\"name\": \"testaaaaaaa\"}, {\"name\": \"testaaaaaaaa\"}, {\"name\": \"testaaaaaaaaa\"}, {\"name\": \"testaaaaaaaaaa\"}, {\"name\": \"testaaaaaaaaaaa\"}, {\"name\": \"testaccount\"}]}", 
            "date_created": "2011-11-10 02:03:44.902656+00:00", 
            "author": "https://api.launchpad.net/1.0/~shinepf"
        }, 
        {
            "content": "I also had this same issue (Deprecation Warning) with WebOb 1.2b2.  I can confirm that downgrading to WebOb version 1.1.1 solves this problem.", 
            "date_created": "2011-12-13 18:42:00.213010+00:00", 
            "author": "https://api.launchpad.net/1.0/~cloudops"
        }, 
        {
            "content": "Adding Nova based on report on the ML:\r\n\r\n2011-12-16 10:01:51,998 INFO nova.api.openstack.wsgi [b4427885-3601-47c3-9870-4260a3753f7d 2 1] GET http://10.0.10.1:8774/v1.1/1/servers/detail?fresh=1324047711.96\r\n2011-12-16 10:01:51,998 DEBUG nova.api.openstack.wsgi [b4427885-3601-47c3-9870-4260a3753f7d 2 1] Unrecognized Content-Type provided in request from (pid=11529) deserialize_body /usr/local/nova/nova/api/openstack/wsgi.py:257\r\n2011-12-16 10:01:51,998 ERROR nova.api.openstack.v2 [b4427885-3601-47c3-9870-4260a3753f7d 2 1] Caught error: The attribute None is deprecated: disabled starting WebOb 1.2, use GET instead\r\n(nova.api.openstack.v2): TRACE: Traceback (most recent call last):\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/v2/__init__.py\", line 61, in __call__\r\n(nova.api.openstack.v2): TRACE:     return req.get_response(self.application)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1149, in get_response\r\n(nova.api.openstack.v2): TRACE:     application, catch_exc_info=False)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1118, in call_application\r\n(nova.api.openstack.v2): TRACE:     app_iter = application(self.environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/keystone/middleware/auth_token.py\", line 310, in __call__\r\n(nova.api.openstack.v2): TRACE:     return self._forward_request(env, start_response, proxy_headers)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/keystone/middleware/auth_token.py\", line 488, in _forward_request\r\n(nova.api.openstack.v2): TRACE:     return self.app(env, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 132, in __call__\r\n(nova.api.openstack.v2): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 197, in call_func\r\n(nova.api.openstack.v2): TRACE:     return self.func(req, *args, **kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/wsgi.py\", line 499, in __call__\r\n(nova.api.openstack.v2): TRACE:     response = req.get_response(self.application)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1149, in get_response\r\n(nova.api.openstack.v2): TRACE:     application, catch_exc_info=False)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1118, in call_application\r\n(nova.api.openstack.v2): TRACE:     app_iter = application(self.environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\r\n(nova.api.openstack.v2): TRACE:     response = self.app(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 132, in __call__\r\n(nova.api.openstack.v2): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 197, in call_func\r\n(nova.api.openstack.v2): TRACE:     return self.func(req, *args, **kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/wsgi.py\", line 567, in __call__\r\n(nova.api.openstack.v2): TRACE:     action_result = self.dispatch(request, action, args)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/wsgi.py\", line 599, in dispatch\r\n(nova.api.openstack.v2): TRACE:     return controller_method(req=request, **action_args)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/v2/extensions.py\", line 166, in process\r\n(nova.api.openstack.v2): TRACE:     res = req.get_response(self.application)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1149, in get_response\r\n(nova.api.openstack.v2): TRACE:     application, catch_exc_info=False)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1118, in call_application\r\n(nova.api.openstack.v2): TRACE:     app_iter = application(self.environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\r\n(nova.api.openstack.v2): TRACE:     response = self.app(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 146, in __call__\r\n(nova.api.openstack.v2): TRACE:     return resp(environ, start_response)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 132, in __call__\r\n(nova.api.openstack.v2): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 197, in call_func\r\n(nova.api.openstack.v2): TRACE:     return self.func(req, *args, **kwargs)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/wsgi.py\", line 567, in __call__\r\n(nova.api.openstack.v2): TRACE:     action_result = self.dispatch(request, action, args)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/wsgi.py\", line 599, in dispatch\r\n(nova.api.openstack.v2): TRACE:     return controller_method(req=request, **action_args)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/v2/servers.py\", line 82, in detail\r\n(nova.api.openstack.v2): TRACE:     servers = self._get_servers(req, is_detail=True)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/local/nova/nova/api/openstack/v2/servers.py\", line 101, in _get_servers\r\n(nova.api.openstack.v2): TRACE:     search_opts.update(req.str_GET)\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/descriptors.py\", line 86, in fget\r\n(nova.api.openstack.v2): TRACE:     warn()\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/descriptors.py\", line 83, in warn\r\n(nova.api.openstack.v2): TRACE:     3\r\n(nova.api.openstack.v2): TRACE:   File \"/usr/lib/python2.6/site-packages/webob/util.py\", line 51, in warn_deprecation\r\n(nova.api.openstack.v2): TRACE:     raise DeprecationWarning(text)\r\n(nova.api.openstack.v2): TRACE: DeprecationWarning: The attribute None is deprecated: disabled starting WebOb 1.2, use GET instead", 
            "date_created": "2011-12-19 10:12:08.792842+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/2819\nCommitted: http://github.com/openstack/nova/commit/ccaf97a5544ca0660cb46d9743ffa06470e5c37a\nSubmitter: Jenkins\nBranch:    master\n\ncommit ccaf97a5544ca0660cb46d9743ffa06470e5c37a\nAuthor: Brian Lamar <email address hidden>\nDate:   Wed Jan 4 18:54:45 2012 -0500\n\n    Ensure nova is compatible with WebOb 1.2+\n    \n    Fixes bug 888371\n    \n    Change-Id: I965c15f9f18b835b666c60b2ab1e6089c0fb4121\n", 
            "date_created": "2012-01-13 05:00:50.770287+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "A proposed fix for swift is available here:\nhttps://github.com/jerboaa/swift/commit/af4d736390cf287f61e9b1c5890c9db4a45dcfc2\n\nUnit tests and functional tests pass as before. Let me know what you think.", 
            "date_created": "2012-02-18 19:31:28.990091+00:00", 
            "author": "https://api.launchpad.net/1.0/~jerboaa"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/5629", 
            "date_created": "2012-03-21 15:36:41.496047+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "See also bug 959881.", 
            "date_created": "2012-05-29 20:01:05.754602+00:00", 
            "author": "https://api.launchpad.net/1.0/~zaitcev"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/8195", 
            "date_created": "2012-06-05 18:44:23.961961+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/8195\nCommitted: http://github.com/openstack/swift/commit/de4d23c2a517050ab0afd0c8d0dbab817139b055\nSubmitter: Jenkins\nBranch:    master\n\ncommit de4d23c2a517050ab0afd0c8d0dbab817139b055\nAuthor: Iryoung Jeong <email address hidden>\nDate:   Wed Jun 6 03:39:53 2012 +0900\n\n    Adapt Swift for WebOb 1.2\n    \n    Based on PatchSet 3 of https://review.openstack.org/#/c/7569/ , make them to pass all funcional tests with both webob 1.x and 1.2.\n    \n    The additional following compatibility issues were addressed:\n     - Until patch for range header issue is merged into official webob release, testRangedGetsWithLWSinHeader() should skip test against webob 1.2\n    (https://github.com/Pylons/webob/commit/49c175aec2b5c134511dfea6564bfb1d37ab23a9)\n    \n     - common.constraints.check_utf8() can accept both utf8 str and unicode.\n    \n     - To convert unicode to utf-8 str if necessary.\n    \n     - Making proxy_logging can handle invalid utf-8 str\n    \n    bug 888371\n    bug 959881\n    \n    blueprint webob-support\n    \n    Change-Id: I00e5fd04cd1653259606a4ffdd4926db3c84c496\n", 
            "date_created": "2012-07-16 16:23:06.737942+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}