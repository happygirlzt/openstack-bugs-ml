{
    "status": "Invalid", 
    "last_updated": "2013-05-22 08:12:51.676026+00:00", 
    "description": "The command \"nova live-migration server1 host1\" failed when the compute nodes are hyper-v. Error log on hyper-v as below:\n\n013-03-29 17:26:29.953 ERROR nova.virt.hyperv.livemigrationutils [req-6660ad0f-aeb3-4d2a-b1bd-8aee63fc2e91 d1da8dd1f36a4b069ed60f14104ee8c1 198b9d213a3045efaadbcf805b11960f] <x_wmi: Unexpected COM Error (-2147024891, 'Access is denied.', None, None)>\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils Traceback (most recent call last):\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 39, in _get_conn_v2\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     return wmi.WMI(moniker='//%s/root/virtualization/v2' % host)\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\wmi.py\", line 1290, in connect\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     handle_com_error ()\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\wmi.py\", line 241, in handle_com_error\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     raise klass (com_error=err)\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils x_access_denied: <x_wmi: Unexpected COM Error (-2147024891, 'Access is denied.', None, None)>\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils \n2013-03-29 17:26:47.069 ERROR nova.openstack.common.rpc.amqp [req-6660ad0f-aeb3-4d2a-b1bd-8aee63fc2e91 d1da8dd1f36a4b069ed60f14104ee8c1 198b9d213a3045efaadbcf805b11960f] Exception during message handling\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\openstack\\common\\rpc\\amqp.py\", line 393, in _process_data\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\openstack\\common\\rpc\\dispatcher.py\", line 133, in dispatch\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 3033, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 117, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationops.py\", line 60, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     recover_method(context, instance_ref, dest, block_migration)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\contextlib.py\", line 24, in __exit__\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationops.py\", line 55, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     self._livemigrutils.live_migrate_vm(instance_name, dest)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 99, in live_migrate_vm\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     conn_v2_remote = self._get_conn_v2(dest_host)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 50, in _get_conn_v2\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     raise vmutils.HyperVException(msg)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp HyperVException: Live migration failed: \n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp", 
    "tags": [
        "hyper-v"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1162825", 
    "owner": "None", 
    "id": 1162825, 
    "index": 3560, 
    "created": "2013-04-01 14:28:11.840692+00:00", 
    "title": "Hyper-V Live Migration failed from the command line of OpenStack controller", 
    "comments": [
        {
            "content": "The command \"nova live-migration server1 host1\" failed when the compute nodes are hyper-v. Error log on hyper-v as below:\n\n013-03-29 17:26:29.953 ERROR nova.virt.hyperv.livemigrationutils [req-6660ad0f-aeb3-4d2a-b1bd-8aee63fc2e91 d1da8dd1f36a4b069ed60f14104ee8c1 198b9d213a3045efaadbcf805b11960f] <x_wmi: Unexpected COM Error (-2147024891, 'Access is denied.', None, None)>\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils Traceback (most recent call last):\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 39, in _get_conn_v2\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     return wmi.WMI(moniker='//%s/root/virtualization/v2' % host)\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\wmi.py\", line 1290, in connect\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     handle_com_error ()\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\wmi.py\", line 241, in handle_com_error\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils     raise klass (com_error=err)\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils x_access_denied: <x_wmi: Unexpected COM Error (-2147024891, 'Access is denied.', None, None)>\n2013-03-29 17:26:29.953 2376 TRACE nova.virt.hyperv.livemigrationutils \n2013-03-29 17:26:47.069 ERROR nova.openstack.common.rpc.amqp [req-6660ad0f-aeb3-4d2a-b1bd-8aee63fc2e91 d1da8dd1f36a4b069ed60f14104ee8c1 198b9d213a3045efaadbcf805b11960f] Exception during message handling\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\openstack\\common\\rpc\\amqp.py\", line 393, in _process_data\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\openstack\\common\\rpc\\dispatcher.py\", line 133, in dispatch\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\compute\\manager.py\", line 3033, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\driver.py\", line 117, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationops.py\", line 60, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     recover_method(context, instance_ref, dest, block_migration)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\contextlib.py\", line 24, in __exit__\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationops.py\", line 55, in live_migration\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     self._livemigrutils.live_migrate_vm(instance_name, dest)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 99, in live_migrate_vm\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     conn_v2_remote = self._get_conn_v2(dest_host)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp   File \"C:\\Program Files (x86)\\Hyper-V Agent\\Python27\\lib\\site-packages\\nova\\virt\\hyperv\\livemigrationutils.py\", line 50, in _get_conn_v2\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp     raise vmutils.HyperVException(msg)\n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp HyperVException: Live migration failed: \n2013-03-29 17:26:47.069 2376 TRACE nova.openstack.common.rpc.amqp", 
            "date_created": "2013-04-01 14:28:11.840692+00:00", 
            "author": "https://api.launchpad.net/1.0/~yahongdu"
        }, 
        {
            "content": "Which version is this with?", 
            "date_created": "2013-04-11 17:32:52.691400+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "We cannot solve the issue you reported without more information. Could you please provide the requested information ?", 
            "date_created": "2013-05-08 10:38:14.415253+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Ping?", 
            "date_created": "2013-05-22 05:21:14.399479+00:00", 
            "author": "https://api.launchpad.net/1.0/~mikal"
        }, 
        {
            "content": "This problem never happens again after using latest build.", 
            "date_created": "2013-05-22 08:12:50.944570+00:00", 
            "author": "https://api.launchpad.net/1.0/~yahongdu"
        }
    ]
}