{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:13:53.755368+00:00", 
    "description": "When creating instance with numa topology, if that instance is placed on a host numa node different then 0 , invalid libvirt.xml will be generated. it's because instance cell id's are used to store host id assignment. Instance cell id's should be normalized before generating libvirt.xml   \n\n\n2014-11-28 16:35:55.195 ERROR nova.virt.libvirt.driver [-] Error defining a domain with XML: <domain type=\"kvm\">\n  <uuid>b90dbaea-ed6f-49fa-b3bf-75137005c621</uuid>\n  <name>instance-00000005</name>\n  <memory>2097152</memory>\n  <numatune>\n    <memory mode=\"strict\" nodeset=\"1\"/>\n    <memnode cellid=\"1\" mode=\"strict\" nodeset=\"1\"/>\n  </numatune>\n  <vcpu>4</vcpu>\n  <metadata>\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\n      <nova:package version=\"2015.1.0\"/>\n      <nova:name>vm1</nova:name>\n      <nova:creationTime>2014-11-28 16:35:55</nova:creationTime>\n      <nova:flavor name=\"nano_mini\">\n        <nova:memory>2048</nova:memory>\n        <nova:disk>0</nova:disk>\n        <nova:swap>0</nova:swap>\n        <nova:ephemeral>0</nova:ephemeral>\n        <nova:vcpus>4</nova:vcpus>\n      </nova:flavor>\n      <nova:owner>\n        <nova:user uuid=\"04d6fa121cbc4b60b57c96eb32b356b1\">admin</nova:user>\n        <nova:project uuid=\"9193517bf6c64d0296d60095c88b2e5a\">demo</nova:project>\n      </nova:owner>\n      <nova:root type=\"image\" uuid=\"c0fc1ed6-1ee5-47fa-a2e7-f1aee3c6750b\"/>\n    </nova:instance>\n  </metadata>\n  <sysinfo type=\"smbios\">\n    <system>\n      <entry name=\"manufacturer\">OpenStack Foundation</entry>\n      <entry name=\"product\">OpenStack Nova</entry>\n      <entry name=\"version\">2015.1.0</entry>\n      <entry name=\"serial\">10881668-12bf-49c2-9efb-28bb8d278929</entry>\n      <entry name=\"uuid\">b90dbaea-ed6f-49fa-b3bf-75137005c621</entry>\n    </system>\n  </sysinfo>\n  <os>\n    <type>hvm</type>\n    <boot dev=\"hd\"/>\n    <smbios mode=\"sysinfo\"/>\n  </os>\n  <features>\n    <acpi/>\n    <apic/>\n  </features>\n  <cputune>\n    <vcpupin vcpu=\"0\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"1\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"2\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"3\" cpuset=\"10-19,30-39\"/>\n  </cputune>\n  <clock offset=\"utc\">\n    <timer name=\"pit\" tickpolicy=\"delay\"/>\n    <timer name=\"rtc\" tickpolicy=\"catchup\"/>\n    <timer name=\"hpet\" present=\"no\"/>\n  </clock>\n  <cpu match=\"exact\">\n    <topology sockets=\"4\" cores=\"1\" threads=\"1\"/>\n    <numa>\n      <cell id=\"1\" cpus=\"0-3\" memory=\"2097152\"/>\n    </numa>\n  </cpu>\n  <devices>\n    <disk type=\"file\" device=\"disk\">\n      <driver name=\"qemu\" type=\"qcow2\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/disk\"/>\n      <target bus=\"virtio\" dev=\"vda\"/>\n    </disk>\n    <disk type=\"file\" device=\"cdrom\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/disk.config\"/>\n      <target bus=\"ide\" dev=\"hdd\"/>\n    </disk>\n    <interface type=\"hostdev\" managed=\"yes\">\n      <mac address=\"fa:16:3e:69:8c:17\"/>\n      <source>\n        <address type=\"pci\" domain=\"0x0000\" bus=\"0x82\" slot=\"0x10\" function=\"0x2\"/>\n      </source>\n      <vlan>\n        <tag id=\"1000\"/>\n      </vlan>\n    </interface>\n    <serial type=\"file\">\n      <source path=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/console.log\"/>\n    </serial>\n    <serial type=\"pty\"/>\n    <graphics type=\"vnc\" autoport=\"yes\" keymap=\"en-us\" listen=\"127.0.0.1\"/>\n    <video>\n      <model type=\"cirrus\"/>\n    </video>\n    <memballoon model=\"virtio\">\n      <stats period=\"10\"/>\n    </memballoon>\n  </devices>\n</domain>\n\n2014-11-28 16:35:55.195 ERROR nova.compute.manager [-] [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] Instance failed to spawn\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] Traceback (most recent call last):\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/compute/manager.py\", line 2246, in _build_resources\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     yield resources\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/compute/manager.py\", line 2116, in _build_and_run_instance\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     instance_type=instance_type)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 2641, in spawn\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     block_device_info, disk_info=disk_info)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4490, in _create_domain_and_network\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     power_on=power_on)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4423, in _create_domain\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     LOG.error(err)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/oslo/utils/excutils.py\", line 82, in __exit__\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     six.reraise(self.type_, self.value, self.tb)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4407, in _create_domain\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     domain = self._conn.defineXML(xml)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 183, in doit\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 141, in proxy_call\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     rv = execute(f, *args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 122, in execute\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     six.reraise(c, e, tb)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 80, in tworker\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     rv = meth(*args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib64/python2.7/site-packages/libvirt.py\", line 3484, in defineXML\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     if ret is None:raise libvirtError('virDomainDefineXML() failed', conn=self)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] libvirtError: XML error: Exactly one 'cell' element per guest NUMA cell allowed, non-contiguous ranges or ranges not starting from 0 are not allowed", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1397381", 
    "owner": "https://api.launchpad.net/1.0/~pczesno", 
    "id": 1397381, 
    "index": 5298, 
    "created": "2014-11-28 16:45:53.191144+00:00", 
    "title": "numa cell ids need to be normalized before creating  xml", 
    "comments": [
        {
            "content": "When creating instance with numa topology, if that instance is placed on a host numa node different then 0 , invalid libvirt.xml will be generated. it's because instance cell id's are used to store host id assignment. Instance cell id's should be normalized before generating libvirt.xml   \n\n\n2014-11-28 16:35:55.195 ERROR nova.virt.libvirt.driver [-] Error defining a domain with XML: <domain type=\"kvm\">\n  <uuid>b90dbaea-ed6f-49fa-b3bf-75137005c621</uuid>\n  <name>instance-00000005</name>\n  <memory>2097152</memory>\n  <numatune>\n    <memory mode=\"strict\" nodeset=\"1\"/>\n    <memnode cellid=\"1\" mode=\"strict\" nodeset=\"1\"/>\n  </numatune>\n  <vcpu>4</vcpu>\n  <metadata>\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\n      <nova:package version=\"2015.1.0\"/>\n      <nova:name>vm1</nova:name>\n      <nova:creationTime>2014-11-28 16:35:55</nova:creationTime>\n      <nova:flavor name=\"nano_mini\">\n        <nova:memory>2048</nova:memory>\n        <nova:disk>0</nova:disk>\n        <nova:swap>0</nova:swap>\n        <nova:ephemeral>0</nova:ephemeral>\n        <nova:vcpus>4</nova:vcpus>\n      </nova:flavor>\n      <nova:owner>\n        <nova:user uuid=\"04d6fa121cbc4b60b57c96eb32b356b1\">admin</nova:user>\n        <nova:project uuid=\"9193517bf6c64d0296d60095c88b2e5a\">demo</nova:project>\n      </nova:owner>\n      <nova:root type=\"image\" uuid=\"c0fc1ed6-1ee5-47fa-a2e7-f1aee3c6750b\"/>\n    </nova:instance>\n  </metadata>\n  <sysinfo type=\"smbios\">\n    <system>\n      <entry name=\"manufacturer\">OpenStack Foundation</entry>\n      <entry name=\"product\">OpenStack Nova</entry>\n      <entry name=\"version\">2015.1.0</entry>\n      <entry name=\"serial\">10881668-12bf-49c2-9efb-28bb8d278929</entry>\n      <entry name=\"uuid\">b90dbaea-ed6f-49fa-b3bf-75137005c621</entry>\n    </system>\n  </sysinfo>\n  <os>\n    <type>hvm</type>\n    <boot dev=\"hd\"/>\n    <smbios mode=\"sysinfo\"/>\n  </os>\n  <features>\n    <acpi/>\n    <apic/>\n  </features>\n  <cputune>\n    <vcpupin vcpu=\"0\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"1\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"2\" cpuset=\"10-19,30-39\"/>\n    <vcpupin vcpu=\"3\" cpuset=\"10-19,30-39\"/>\n  </cputune>\n  <clock offset=\"utc\">\n    <timer name=\"pit\" tickpolicy=\"delay\"/>\n    <timer name=\"rtc\" tickpolicy=\"catchup\"/>\n    <timer name=\"hpet\" present=\"no\"/>\n  </clock>\n  <cpu match=\"exact\">\n    <topology sockets=\"4\" cores=\"1\" threads=\"1\"/>\n    <numa>\n      <cell id=\"1\" cpus=\"0-3\" memory=\"2097152\"/>\n    </numa>\n  </cpu>\n  <devices>\n    <disk type=\"file\" device=\"disk\">\n      <driver name=\"qemu\" type=\"qcow2\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/disk\"/>\n      <target bus=\"virtio\" dev=\"vda\"/>\n    </disk>\n    <disk type=\"file\" device=\"cdrom\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/disk.config\"/>\n      <target bus=\"ide\" dev=\"hdd\"/>\n    </disk>\n    <interface type=\"hostdev\" managed=\"yes\">\n      <mac address=\"fa:16:3e:69:8c:17\"/>\n      <source>\n        <address type=\"pci\" domain=\"0x0000\" bus=\"0x82\" slot=\"0x10\" function=\"0x2\"/>\n      </source>\n      <vlan>\n        <tag id=\"1000\"/>\n      </vlan>\n    </interface>\n    <serial type=\"file\">\n      <source path=\"/opt/stack/data/nova/instances/b90dbaea-ed6f-49fa-b3bf-75137005c621/console.log\"/>\n    </serial>\n    <serial type=\"pty\"/>\n    <graphics type=\"vnc\" autoport=\"yes\" keymap=\"en-us\" listen=\"127.0.0.1\"/>\n    <video>\n      <model type=\"cirrus\"/>\n    </video>\n    <memballoon model=\"virtio\">\n      <stats period=\"10\"/>\n    </memballoon>\n  </devices>\n</domain>\n\n2014-11-28 16:35:55.195 ERROR nova.compute.manager [-] [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] Instance failed to spawn\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] Traceback (most recent call last):\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/compute/manager.py\", line 2246, in _build_resources\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     yield resources\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/compute/manager.py\", line 2116, in _build_and_run_instance\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     instance_type=instance_type)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 2641, in spawn\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     block_device_info, disk_info=disk_info)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4490, in _create_domain_and_network\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     power_on=power_on)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4423, in _create_domain\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     LOG.error(err)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/oslo/utils/excutils.py\", line 82, in __exit__\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     six.reraise(self.type_, self.value, self.tb)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/shared/stack/nova/nova/virt/libvirt/driver.py\", line 4407, in _create_domain\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     domain = self._conn.defineXML(xml)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 183, in doit\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 141, in proxy_call\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     rv = execute(f, *args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 122, in execute\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     six.reraise(c, e, tb)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 80, in tworker\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     rv = meth(*args, **kwargs)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]   File \"/usr/lib64/python2.7/site-packages/libvirt.py\", line 3484, in defineXML\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621]     if ret is None:raise libvirtError('virDomainDefineXML() failed', conn=self)\n2014-11-28 16:35:55.195 TRACE nova.compute.manager [instance: b90dbaea-ed6f-49fa-b3bf-75137005c621] libvirtError: XML error: Exactly one 'cell' element per guest NUMA cell allowed, non-contiguous ranges or ranges not starting from 0 are not allowed", 
            "date_created": "2014-11-28 16:45:53.191144+00:00", 
            "author": "https://api.launchpad.net/1.0/~pczesno"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/138128", 
            "date_created": "2014-12-01 17:17:55.447189+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/138128\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=cb98f1e2f288de0b3d5f85c84717540b9290f8a8\nSubmitter: Jenkins\nBranch:    master\n\ncommit cb98f1e2f288de0b3d5f85c84717540b9290f8a8\nAuthor: Przemyslaw Czesnowicz <email address hidden>\nDate:   Mon Dec 1 11:43:29 2014 +0000\n\n    Libvirt normalize numa cell ids\n    \n    This patch normalizes the cell ids before writing xml.\n    As cell ids are used to store host cell association,\n    they need to be normalized before writing xml, or otherwise\n    the xml will be invalid.\n    \n    Change-Id: I9b565670f5b0ad24c7a5ff1853648594643b4c7a\n    Closes-bug: #1397381\n", 
            "date_created": "2014-12-08 15:50:35.235519+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Actually the proposed fix will break for NUMA topologies where host cell ID that the instance cell is pinned to is not in increasing order. The reason for this is the following loop\n\nhttps://github.com/openstack/nova/blob/4715dd9b402137ba16c8afa0519aca2eccb9c2cf/nova/virt/libvirt/driver.py#L3509\n\nAs it will go through the host cells (always in ascending order, and find instance cells that match (may not be in ascending order depending on how the fitting logic and usage of the host) but we simply append memnodes so they may end up in the wrong order when we hit the normalization loop:\n\nhttps://github.com/openstack/nova/blob/4715dd9b402137ba16c8afa0519aca2eccb9c2cf/nova/virt/libvirt/driver.py#L3553\n\nThus assigning CPUs to the correct host numa node, but force all memory to the wrong one. Ouch!", 
            "date_created": "2014-12-09 14:56:05.706406+00:00", 
            "author": "https://api.launchpad.net/1.0/~ndipanov"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/140357", 
            "date_created": "2014-12-09 15:11:09.416178+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/140357\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=08290cec7f02fa908dfda89d1749142d2d520f48\nSubmitter: Jenkins\nBranch:    master\n\ncommit 08290cec7f02fa908dfda89d1749142d2d520f48\nAuthor: Nikola Dipanov <email address hidden>\nDate:   Tue Dec 9 15:58:48 2014 +0100\n\n    libvirt: Fix NUMA memnode assignments to host cells\n    \n    This fix\n    \n      https://review.openstack.org/138128\n    \n    breaks assignments for NUMA topologies where host cell ID\n    that the instance cell is pinned to is not in increasing order. The\n    reason for this is that the main loop of the method that will go through\n    the host cells (always in ascending order), and find instance cells that\n    match (may not be in ascending order depending on how the fitting logic\n    and usage of the host) but we simply append memnodes so they may end up\n    in the wrong order when we hit the normalization loop.\n    \n    We fix this by \"pre-allocating\" the memnodes list and making sure to add\n    the matching memnode to the same position as the guest config cell\n    before hitting the normalization loop.\n    \n    Change-Id: I91055dc705f2ef54c830e641f9cf9ba0683eb313\n    Closes-bug: #1397381\n", 
            "date_created": "2014-12-11 17:10:02.778215+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}