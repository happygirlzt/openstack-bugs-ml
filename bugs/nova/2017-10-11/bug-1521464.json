{
    "status": "Invalid", 
    "last_updated": "2016-04-18 16:14:51.467237+00:00", 
    "description": "I boot an instance with ephemeral disk(or swap disk) in kilo, but return http request error:\neg\uff1a\nnova boot --flavor 2 --image 5905bd7e-a87f-4856-8401-b8eb7211c84d --nic net-id=12ace164-d996-4261-9228-23ca0680f7a8 --ephemeral size=5,format=ext3 test_vm1\n\nERROR (BadRequest): Block Device Mapping is Invalid: Boot sequence for the instance and image/block device mapping combination is not valid. (HTTP 400) (Request-ID: req-b571662f-e554-49a7-979f-763f34b4b162)\n\nI think the instance with ephemeral disk should be able to boot from the image, instead of invalid boot sequence.\n\nthe log in:\nhttp://paste.openstack.org/show/480452/", 
    "tags": [
        "compute"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1521464", 
    "owner": "None", 
    "id": 1521464, 
    "index": 5868, 
    "created": "2015-12-01 03:43:50.028238+00:00", 
    "title": "create an instance with ephemeral disk or swap disk error", 
    "comments": [
        {
            "content": "I boot an instance with ephemeral disk(or swap disk) in kilo, but return http request error:\neg\uff1a\nnova boot --flavor 2 --image 5905bd7e-a87f-4856-8401-b8eb7211c84d --nic net-id=12ace164-d996-4261-9228-23ca0680f7a8 --ephemeral size=5,format=ext3 test_vm1\n\nERROR (BadRequest): Block Device Mapping is Invalid: Boot sequence for the instance and image/block device mapping combination is not valid. (HTTP 400) (Request-ID: req-b571662f-e554-49a7-979f-763f34b4b162)\n\nI think the instance with ephemeral disk should be able to boot from the image, instead of invalid boot sequence.\n\nthe log in:\nhttp://paste.openstack.org/show/480452/", 
            "date_created": "2015-12-01 03:43:50.028238+00:00", 
            "author": "https://api.launchpad.net/1.0/~song-ruixia"
        }, 
        {
            "content": "Marking this invalid because it sounds like a feature to me. You may want to create a backlog spec, see http://specs.openstack.org/openstack/nova-specs/specs/backlog/index.html", 
            "date_created": "2015-12-14 11:54:50.031977+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexisl"
        }, 
        {
            "content": "Sorry, newbie bug triager here. After double-checking with markus_z, he recommends setting incomplete and asking for DEBUG level logs.", 
            "date_created": "2015-12-14 13:59:05.667756+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexisl"
        }, 
        {
            "content": "@Alexis Lee (alexisl)\nthe debug log :\nhttp://paste.openstack.org/show/481911/", 
            "date_created": "2015-12-15 06:36:09.559407+00:00", 
            "author": "https://api.launchpad.net/1.0/~nail-i"
        }, 
        {
            "content": "Setting New as log has been provided, however I don't have time to look at it before I go on holiday :(\n\nHopefully Markus or someone else will pick this up, otherwise happy holidays and see you in the new year.", 
            "date_created": "2015-12-15 15:48:35.785899+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexisl"
        }, 
        {
            "content": "I don't hit this in Mitaka\n\nubuntu@lm-1:~/devstack$ nova boot --image 2f53d11c-755e-49dc-92d0-6cd9b1957a39 --flavor 6 --nic net-id=4c4f0900-8b3a-49c0-8287-b1bdeeabd5a5  --ephemeral size=2,format=ext3 test_vm1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          |                                                                |\n| OS-EXT-SRV-ATTR:host                 | -                                                              |\n| OS-EXT-SRV-ATTR:hostname             | test-vm1                                                       |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | -                                                              |\n| OS-EXT-SRV-ATTR:instance_name        | instance-0000002a                                              |\n| OS-EXT-SRV-ATTR:kernel_id            | a80c2821-0ffc-42f6-941d-aae8b7011044                           |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                              |\n| OS-EXT-SRV-ATTR:ramdisk_id           | 43b713a9-26f5-4923-afce-92628dfd84da                           |\n| OS-EXT-SRV-ATTR:reservation_id       | r-e86tn23l                                                     |\n| OS-EXT-SRV-ATTR:root_device_name     | -                                                              |\n| OS-EXT-SRV-ATTR:user_data            | -                                                              |\n| OS-EXT-STS:power_state               | 0                                                              |\n| OS-EXT-STS:task_state                | scheduling                                                     |\n| OS-EXT-STS:vm_state                  | building                                                       |\n| OS-SRV-USG:launched_at               | -                                                              |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| adminPass                            | fyC3X2GXP4NK                                                   |\n| config_drive                         |                                                                |\n| created                              | 2016-03-09T03:30:05Z                                           |\n| description                          | -                                                              |\n| flavor                               | emphemeral_flavor (6)                                          |\n| hostId                               |                                                                |\n| host_status                          |                                                                |\n| id                                   | 89f4d97e-43ca-423b-a895-34e4e4b176b1                           |\n| image                                | cirros-0.3.4-x86_64-uec (2f53d11c-755e-49dc-92d0-6cd9b1957a39) |\n| key_name                             | -                                                              |\n| locked                               | False                                                          |\n| metadata                             | {}                                                             |\n| name                                 | test_vm1                                                       |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | BUILD                                                          |\n| tenant_id                            | 2deede298b744de2b88e6877e01857c8                               |\n| updated                              | 2016-03-09T03:30:08Z                                           |\n| user_id                              | 26a3eea4810a4d8890c6d49e38bb6feb                               |\n+--------------------------------------+----------------------------------------------------------------+\nubuntu@lm-1:~/devstack$ nova list\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| ID                                   | Name     | Status | Task State | Power State | Networks                                                |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| 9c788607-ce3b-465c-bbe7-2267dd271e97 | test     | ACTIVE | -          | Running     | private=fd3f:22c2:65e6:0:f816:3eff:fe12:2a34, 10.0.0.23 |\n| 89f4d97e-43ca-423b-a895-34e4e4b176b1 | test_vm1 | BUILD  | spawning   | NOSTATE     | private=fd3f:22c2:65e6:0:f816:3eff:fe27:6370, 10.0.0.24 |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\nubuntu@lm-1:~/devstack$ nova list\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| ID                                   | Name     | Status | Task State | Power State | Networks                                                |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| 9c788607-ce3b-465c-bbe7-2267dd271e97 | test     | ACTIVE | -          | Running     | private=fd3f:22c2:65e6:0:f816:3eff:fe12:2a34, 10.0.0.23 |\n| 89f4d97e-43ca-423b-a895-34e4e4b176b1 | test_vm1 | ACTIVE | -          | Running     | private=fd3f:22c2:65e6:0:f816:3eff:fe27:6370, 10.0.0.24 |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\nubuntu@lm-1:~/devstack$ nova list\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| ID                                   | Name     | Status | Task State | Power State | Networks                                                |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n| 9c788607-ce3b-465c-bbe7-2267dd271e97 | test     | ACTIVE | -          | Running     | private=fd3f:22c2:65e6:0:f816:3eff:fe12:2a34, 10.0.0.23 |\n| 89f4d97e-43ca-423b-a895-34e4e4b176b1 | test_vm1 | ACTIVE | -          | Running     | private=fd3f:22c2:65e6:0:f816:3eff:fe27:6370, 10.0.0.24 |\n+--------------------------------------+----------+--------+------------+-------------+---------------------------------------------------------+\n", 
            "date_created": "2016-03-09 03:32:43.262658+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }, 
        {
            "content": "On a newton devstack, this is what I get:\n\nstack@swapvol:~$ nova boot --flavor 2 --image c5c957b0-c19b-4567-8f57-9ccb8a5a1d0e --ephemeral size=5,format=ext3 bug1521464              ERROR (BadRequest): Ephemeral disks requested are larger than the instance type allows. (HTTP 400) (Request-ID: req-75051aa0-d6e7-43be-96c6-a065334311ee)\n\nWhich is actually some pretty old validation code:\n\nhttps://github.com/openstack/nova/blob/df488c863e1f9a6656aac1cd9cb9b54c6160ad01/nova/compute/api.py#L1352-L1356\n\nAdded here:\n\nhttps://review.openstack.org/#/c/44864/\n\nWhich makes this working as designed, you're requesting an ephemeral block device that is larger than the flavor being used allows.  So you'd need to use a flavor that has ephemeral>=5.", 
            "date_created": "2016-04-18 16:14:16.954972+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ]
}