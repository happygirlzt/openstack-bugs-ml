{
    "status": "Invalid", 
    "last_updated": "2012-01-20 14:24:29.380340+00:00", 
    "description": "Command: sudo nova-rootwrap FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\nExit code: 99\nStdout: 'Unauthorized command: FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\n'\nStderr: ''\nnova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/bin/nova-network\", line 49, in <module>\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 404, in wait\n(nova): TRACE:     _launcher.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 118, in wait\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\n(nova): TRACE:     return self._exit_event.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n(nova): TRACE:     return hubs.get_hub().switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\n(nova): TRACE:     return self.greenlet.switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\n(nova): TRACE:     result = function(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 88, in run_server\n(nova): TRACE:     server.start()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 148, in start\n(nova): TRACE:     self.manager.init_host()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 1619, in init_host(nova): TRACE:     NetworkManager.init_host(self)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 674, in init_host\n(nova): TRACE:     self._setup_network(ctxt, network)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 1712, in _setup_network\n(nova): TRACE:     self.driver.update_dhcp(context, dev, network_ref)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 651, in update_dhcp\n(nova): TRACE:     restart_dhcp(context, dev, network_ref)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 842, in inner\n(nova): TRACE:     retval = f(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 724, in restart_dhcp\n(nova): TRACE:     _execute(*cmd, run_as_root=True)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 818, in _execute\n(nova): TRACE:     return utils.execute(*cmd, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 225, in execute\n(nova): TRACE:     cmd=' '.join(cmd))\n(nova): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova): TRACE: Command: sudo nova-rootwrap FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\n(nova): TRACE: Exit code: 99\n(nova): TRACE: Stdout: 'Unauthorized command: FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\n'\n(nova): TRACE: Stderr: ''\n(nova): TRACE:", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/919034", 
    "owner": "None", 
    "id": 919034, 
    "index": 2498, 
    "created": "2012-01-20 03:25:28.163312+00:00", 
    "title": "dnsmasq with nova-rootwrapper results in tracebacks.", 
    "comments": [
        {
            "content": "Command: sudo nova-rootwrap FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\nExit code: 99\nStdout: 'Unauthorized command: FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\n'\nStderr: ''\nnova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/bin/nova-network\", line 49, in <module>\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 404, in wait\n(nova): TRACE:     _launcher.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 118, in wait\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\n(nova): TRACE:     return self._exit_event.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n(nova): TRACE:     return hubs.get_hub().switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\n(nova): TRACE:     return self.greenlet.switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\n(nova): TRACE:     result = function(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 88, in run_server\n(nova): TRACE:     server.start()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 148, in start\n(nova): TRACE:     self.manager.init_host()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 1619, in init_host(nova): TRACE:     NetworkManager.init_host(self)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 674, in init_host\n(nova): TRACE:     self._setup_network(ctxt, network)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 1712, in _setup_network\n(nova): TRACE:     self.driver.update_dhcp(context, dev, network_ref)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 651, in update_dhcp\n(nova): TRACE:     restart_dhcp(context, dev, network_ref)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 842, in inner\n(nova): TRACE:     retval = f(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 724, in restart_dhcp\n(nova): TRACE:     _execute(*cmd, run_as_root=True)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/network/linux_net.py\", line 818, in _execute\n(nova): TRACE:     return utils.execute(*cmd, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 225, in execute\n(nova): TRACE:     cmd=' '.join(cmd))\n(nova): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova): TRACE: Command: sudo nova-rootwrap FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\n(nova): TRACE: Exit code: 99\n(nova): TRACE: Stdout: 'Unauthorized command: FLAGFILE=/etc/nova/nova.conf NETWORK_ID=1 dnsmasq --strict-order --bind-interfaces --conf-file= --domain=novalocal --pid-file=/var/lib/nova/networks/nova-br100.pid --listen-address=10.0.0.1 --except-interface=lo --dhcp-range=10.0.0.3,static,120s --dhcp-lease-max=16 --dhcp-hostsfile=/var/lib/nova/networks/nova-br100.conf --dhcp-script=/usr/bin/nova-dhcpbridge --leasefile-ro\\n'\n(nova): TRACE: Stderr: ''\n(nova): TRACE:", 
            "date_created": "2012-01-20 03:25:28.163312+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "Might be a side-effect of bug 919105...\r\nIs dnsmasq the only command that fails to run through sudo nova-rootwrap ? Do you have other commands that succeed ? ", 
            "date_created": "2012-01-20 09:27:46.598826+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "(My default explanation is that the filter definition (in nova/rootwrap/compute.py or nova/rootwrap/network.py) is not present on the system that tries to run nova-rootwrap. But in this case I bet other commands would also fail.)", 
            "date_created": "2012-01-20 09:32:06.968390+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Same thing happens when the patch is applied from bug 919105. Note this is on a single machine.", 
            "date_created": "2012-01-20 14:07:37.019989+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }
    ]
}