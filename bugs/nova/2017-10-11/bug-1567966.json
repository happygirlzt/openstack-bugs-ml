{
    "status": "Confirmed", 
    "last_updated": "2016-04-11 10:00:11.371226+00:00", 
    "description": "If you make a request to the compute api with an explicit type set in the 'Accept' header it will ignore it. Ideally what should happen in this case is that the server should response with a 406 <https://httpstatuses.com/406>.\n\n(Examples run with devstack and nova master as of April 8, 2016)\n\nHere are two example one with an accept, one without:\n\ncurl -v -H 'x-auth-token: e893759204ff41d49542b9d87520b03a' http://192.168.33.10:8774/v2.1/servers\n* Hostname was NOT found in DNS cache\n*   Trying 192.168.33.10...\n* Connected to 192.168.33.10 (192.168.33.10) port 8774 (#0)\n> GET /v2.1/servers HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 192.168.33.10:8774\n> Accept: */*\n> x-auth-token: e893759204ff41d49542b9d87520b03a\n> \n< HTTP/1.1 200 OK\n< Content-Length: 15\n< Content-Type: application/json\n< X-Openstack-Nova-Api-Version: 2.1\n< Vary: X-OpenStack-Nova-API-Version\n< X-Compute-Request-Id: req-09186938-8745-498a-9485-4773f29e510a\n< Date: Fri, 08 Apr 2016 14:27:24 GMT\n< \n* Connection #0 to host 192.168.33.10 left intact\n{\"servers\": []}\n\ncurl -v -H 'x-auth-token: e893759204ff41d49542b9d87520b03a' -H 'accept: text/plain' http://192.168.33.10:8774/v2.1/servers\n* Hostname was NOT found in DNS cache\n*   Trying 192.168.33.10...\n* Connected to 192.168.33.10 (192.168.33.10) port 8774 (#0)\n> GET /v2.1/servers HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 192.168.33.10:8774\n> x-auth-token: e893759204ff41d49542b9d87520b03a\n> accept: text/plain\n> \n< HTTP/1.1 200 OK\n< Content-Length: 15\n< Content-Type: application/json\n< X-Openstack-Nova-Api-Version: 2.1\n< Vary: X-OpenStack-Nova-API-Version\n< X-Compute-Request-Id: req-6f5d003c-463e-4dae-b682-1091984e63ed\n< Date: Fri, 08 Apr 2016 14:28:32 GMT\n< \n* Connection #0 to host 192.168.33.10 left intact\n{\"servers\": []}\n\nSame response. Here's a gabbi failed test that may be a bit easier to read and demonstrats the expected result\n\n- name: try bad accept\n  desc: why u no 406?\n  xfail: True\n  GET: /servers\n  request_headers:\n      accept: text/plain\n  status: 406\n\nThis is related to the older https://bugs.launchpad.net/nova/+bug/724622 but this is a bit more specific.\n\nNow, obviously, this may not really be considered a bug, depending on how correct the api is supposed to be, but felt worth pointing it out.", 
    "tags": [
        "api", 
        "gabbi"
    ], 
    "importance": "Low", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1567966", 
    "owner": "None", 
    "id": 1567966, 
    "index": 722, 
    "created": "2016-04-08 14:32:25.074964+00:00", 
    "title": "api does not handle explicit accept headers correctly", 
    "comments": [
        {
            "content": "If you make a request to the compute api with an explicit type set in the 'Accept' header it will ignore it. Ideally what should happen in this case is that the server should response with a 406 <https://httpstatuses.com/406>.\n\n(Examples run with devstack and nova master as of April 8, 2016)\n\nHere are two example one with an accept, one without:\n\ncurl -v -H 'x-auth-token: e893759204ff41d49542b9d87520b03a' http://192.168.33.10:8774/v2.1/servers\n* Hostname was NOT found in DNS cache\n*   Trying 192.168.33.10...\n* Connected to 192.168.33.10 (192.168.33.10) port 8774 (#0)\n> GET /v2.1/servers HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 192.168.33.10:8774\n> Accept: */*\n> x-auth-token: e893759204ff41d49542b9d87520b03a\n> \n< HTTP/1.1 200 OK\n< Content-Length: 15\n< Content-Type: application/json\n< X-Openstack-Nova-Api-Version: 2.1\n< Vary: X-OpenStack-Nova-API-Version\n< X-Compute-Request-Id: req-09186938-8745-498a-9485-4773f29e510a\n< Date: Fri, 08 Apr 2016 14:27:24 GMT\n< \n* Connection #0 to host 192.168.33.10 left intact\n{\"servers\": []}\n\ncurl -v -H 'x-auth-token: e893759204ff41d49542b9d87520b03a' -H 'accept: text/plain' http://192.168.33.10:8774/v2.1/servers\n* Hostname was NOT found in DNS cache\n*   Trying 192.168.33.10...\n* Connected to 192.168.33.10 (192.168.33.10) port 8774 (#0)\n> GET /v2.1/servers HTTP/1.1\n> User-Agent: curl/7.35.0\n> Host: 192.168.33.10:8774\n> x-auth-token: e893759204ff41d49542b9d87520b03a\n> accept: text/plain\n> \n< HTTP/1.1 200 OK\n< Content-Length: 15\n< Content-Type: application/json\n< X-Openstack-Nova-Api-Version: 2.1\n< Vary: X-OpenStack-Nova-API-Version\n< X-Compute-Request-Id: req-6f5d003c-463e-4dae-b682-1091984e63ed\n< Date: Fri, 08 Apr 2016 14:28:32 GMT\n< \n* Connection #0 to host 192.168.33.10 left intact\n{\"servers\": []}\n\nSame response. Here's a gabbi failed test that may be a bit easier to read and demonstrats the expected result\n\n- name: try bad accept\n  desc: why u no 406?\n  xfail: True\n  GET: /servers\n  request_headers:\n      accept: text/plain\n  status: 406\n\nThis is related to the older https://bugs.launchpad.net/nova/+bug/724622 but this is a bit more specific.\n\nNow, obviously, this may not really be considered a bug, depending on how correct the api is supposed to be, but felt worth pointing it out.", 
            "date_created": "2016-04-08 14:32:25.074964+00:00", 
            "author": "https://api.launchpad.net/1.0/~cdent"
        }, 
        {
            "content": "Well, I think all the false return status codes should probably being discussed elsewhere, but having those wrong is IMHO still a bug (because we're not compliant with the RFC), so I'm fine keeping those.\n", 
            "date_created": "2016-04-11 10:00:10.695085+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }
    ]
}