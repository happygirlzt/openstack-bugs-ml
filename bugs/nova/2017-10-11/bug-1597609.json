{
    "status": "Expired", 
    "last_updated": "2016-10-30 04:17:35.836673+00:00", 
    "description": "While testing Netvirt 1 node openstack in csit, I could see two ips assigned to a single vm instance.\n\nSteps to be followed to reproduce:\n----------------------------------\n\n1. Create Network\n2. Create subnet\n3. Boot three vm instances in the same subnet\n\n\nExpected Result:\n---------------\nEach vm instance should be assigned with one ip.\n\nActual Result:\n--------------\nA vm instance assigned with two ips.\n\nObservation:\n------------\n\nfirst two vm instances properly assigned with ips (vm1 as 30.0.0.3 and vm2 as 30.0.0.4), where as the third vm instance assigned with two ips as (30.0.0.5 \nand 3.0.0.6) since the subnet range is 30.0.0.0/24 and Gateway is enabled.\n\nafter creating all three vm instances i printed them with nova show commands.\ni could see the below output for third vm instance.\n\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| OS-EXT-SRV-ATTR:host                 | centos7-devstack-721                                           |\n| OS-EXT-SRV-ATTR:hostname             | mythirdinstance-1                                              |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | centos7-devstack-721                                           |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000003                                              |\n| OS-EXT-SRV-ATTR:kernel_id            | 55ce53be-9fd0-4df7-ab55-5e78a296376c                           |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                              |\n| OS-EXT-SRV-ATTR:ramdisk_id           | 179666d0-e4f4-4a9b-bbf3-3e8f23fd5488                           |\n| OS-EXT-SRV-ATTR:reservation_id       | r-k85fjf88                                                     |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                       |\n| OS-EXT-SRV-ATTR:user_data            | -                                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-STS:task_state                | -                                                              |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-SRV-USG:launched_at               | 2016-06-28T07:10:10.000000                                     |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| config_drive                         | True                                                           |\n| created                              | 2016-06-28T07:10:05Z                                           |\n| description                          | -                                                              |\n| flavor                               | m1.nano (42)                                                   |\n| hostId                               | f7c621bc0d8cb4621e5a33dc1fdf12b1fd0adcfd96abc51eaf7c6e62       |\n| host_status                          | UP                                                             |\n| id                                   | f7d294d6-9b23-40f5-9151-1d7a1f8168e8                           |\n| image                                | cirros-0.3.4-x86_64-uec (05d7928d-4221-4e7f-ad27-f9d0bcf3a742) |\n| key_name                             | -                                                              |\n| l2_network_1 network                 | 30.0.0.5, 30.0.0.6                                             |\n| locked                               | False                                                          |\n| metadata                             | {}                                                             |\n| name                                 | MyThirdInstance_1                                              |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | ACTIVE                                                         |\n| tenant_id                            | d99ecfb314dd4731ab47d73ccb5e6c9e                               |\n| updated                              | 2016-06-28T07:10:10Z                                           |\n| user_id                              | 7f36ff94d6194308b647e720382b1f33                               |\n+--------------------------------------+----------------------------------------------------------------+\n[jenkins@centos7-devstack-9113 devstack]>\n\n\nwhen i check the ifconfig for the particular vm i could see the second ip (30.0.0.6) assigned to it.\n\nwhere as in dump flows there are entries for both the ips.\nas below:\n\ncookie=0x0, duration=16.270s, table=20, n_packets=0, n_bytes=0, priority=1024,arp,tun_id=0x43f,arp_tpa=30.0.0.6,arp_op=1 actions=move:NXM_OF_ETH_SRC[]->NXM_OF_ETH_DST[],set_field:fa:16:3e:b6:13:3e->eth_src,load:0x2->NXM_OF_ARP_OP[],move:NXM_NX_ARP_SHA[]->NXM_NX_ARP_THA[],move:NXM_OF_ARP_SPA[]->NXM_OF_ARP_TPA[],load:0xfa163eb6133e->NXM_NX_ARP_SHA[],load:0x1e000006->NXM_OF_ARP_SPA[],IN_PORT\n\n cookie=0x0, duration=16.252s, table=20, n_packets=0, n_bytes=0, priority=1024,arp,tun_id=0x43f,arp_tpa=30.0.0.5,arp_op=1 actions=move:NXM_OF_ETH_SRC[]->NXM_OF_ETH_DST[],set_field:fa:16:3e:5b:6a:6f->eth_src,load:0x2->NXM_OF_ARP_OP[],move:NXM_NX_ARP_SHA[]->NXM_NX_ARP_THA[],move:NXM_OF_ARP_SPA[]->NXM_OF_ARP_TPA[],load:0xfa163e5b6a6f->NXM_NX_ARP_SHA[],load:0x1e000005->NXM_OF_ARP_SPA[],IN_PORT\n\nPlease find the sandbox link for more details:\nhttps://jenkins.opendaylight.org/sandbox/job/netvirt-csit-1node-openstack-mitaka-openstack-beryllium/11/\n\nAttached the logs for reference, kindly let us know if any more details required.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1597609", 
    "owner": "None", 
    "id": 1597609, 
    "index": 6307, 
    "created": "2016-06-30 05:26:17.961912+00:00", 
    "title": "Single Vm instance assigned with two ips", 
    "comments": [
        {
            "content": "While testing Netvirt 1 node openstack in csit, I could see two ips assigned to a single vm instance.\n\nSteps to be followed to reproduce:\n----------------------------------\n\n1. Create Network\n2. Create subnet\n3. Boot three vm instances in the same subnet\n\n\nExpected Result:\n---------------\nEach vm instance should be assigned with one ip.\n\nActual Result:\n--------------\nA vm instance assigned with two ips.\n\nObservation:\n------------\n\nfirst two vm instances properly assigned with ips (vm1 as 30.0.0.3 and vm2 as 30.0.0.4), where as the third vm instance assigned with two ips as (30.0.0.5 \nand 3.0.0.6) since the subnet range is 30.0.0.0/24 and Gateway is enabled.\n\nafter creating all three vm instances i printed them with nova show commands.\ni could see the below output for third vm instance.\n\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| OS-EXT-SRV-ATTR:host                 | centos7-devstack-721                                           |\n| OS-EXT-SRV-ATTR:hostname             | mythirdinstance-1                                              |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | centos7-devstack-721                                           |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000003                                              |\n| OS-EXT-SRV-ATTR:kernel_id            | 55ce53be-9fd0-4df7-ab55-5e78a296376c                           |\n| OS-EXT-SRV-ATTR:launch_index         | 0                                                              |\n| OS-EXT-SRV-ATTR:ramdisk_id           | 179666d0-e4f4-4a9b-bbf3-3e8f23fd5488                           |\n| OS-EXT-SRV-ATTR:reservation_id       | r-k85fjf88                                                     |\n| OS-EXT-SRV-ATTR:root_device_name     | /dev/vda                                                       |\n| OS-EXT-SRV-ATTR:user_data            | -                                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-STS:task_state                | -                                                              |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-SRV-USG:launched_at               | 2016-06-28T07:10:10.000000                                     |\n| OS-SRV-USG:terminated_at             | -                                                              |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| config_drive                         | True                                                           |\n| created                              | 2016-06-28T07:10:05Z                                           |\n| description                          | -                                                              |\n| flavor                               | m1.nano (42)                                                   |\n| hostId                               | f7c621bc0d8cb4621e5a33dc1fdf12b1fd0adcfd96abc51eaf7c6e62       |\n| host_status                          | UP                                                             |\n| id                                   | f7d294d6-9b23-40f5-9151-1d7a1f8168e8                           |\n| image                                | cirros-0.3.4-x86_64-uec (05d7928d-4221-4e7f-ad27-f9d0bcf3a742) |\n| key_name                             | -                                                              |\n| l2_network_1 network                 | 30.0.0.5, 30.0.0.6                                             |\n| locked                               | False                                                          |\n| metadata                             | {}                                                             |\n| name                                 | MyThirdInstance_1                                              |\n| os-extended-volumes:volumes_attached | []                                                             |\n| progress                             | 0                                                              |\n| security_groups                      | default                                                        |\n| status                               | ACTIVE                                                         |\n| tenant_id                            | d99ecfb314dd4731ab47d73ccb5e6c9e                               |\n| updated                              | 2016-06-28T07:10:10Z                                           |\n| user_id                              | 7f36ff94d6194308b647e720382b1f33                               |\n+--------------------------------------+----------------------------------------------------------------+\n[jenkins@centos7-devstack-9113 devstack]>\n\n\nwhen i check the ifconfig for the particular vm i could see the second ip (30.0.0.6) assigned to it.\n\nwhere as in dump flows there are entries for both the ips.\nas below:\n\ncookie=0x0, duration=16.270s, table=20, n_packets=0, n_bytes=0, priority=1024,arp,tun_id=0x43f,arp_tpa=30.0.0.6,arp_op=1 actions=move:NXM_OF_ETH_SRC[]->NXM_OF_ETH_DST[],set_field:fa:16:3e:b6:13:3e->eth_src,load:0x2->NXM_OF_ARP_OP[],move:NXM_NX_ARP_SHA[]->NXM_NX_ARP_THA[],move:NXM_OF_ARP_SPA[]->NXM_OF_ARP_TPA[],load:0xfa163eb6133e->NXM_NX_ARP_SHA[],load:0x1e000006->NXM_OF_ARP_SPA[],IN_PORT\n\n cookie=0x0, duration=16.252s, table=20, n_packets=0, n_bytes=0, priority=1024,arp,tun_id=0x43f,arp_tpa=30.0.0.5,arp_op=1 actions=move:NXM_OF_ETH_SRC[]->NXM_OF_ETH_DST[],set_field:fa:16:3e:5b:6a:6f->eth_src,load:0x2->NXM_OF_ARP_OP[],move:NXM_NX_ARP_SHA[]->NXM_NX_ARP_THA[],move:NXM_OF_ARP_SPA[]->NXM_OF_ARP_TPA[],load:0xfa163e5b6a6f->NXM_NX_ARP_SHA[],load:0x1e000005->NXM_OF_ARP_SPA[],IN_PORT\n\nPlease find the sandbox link for more details:\nhttps://jenkins.opendaylight.org/sandbox/job/netvirt-csit-1node-openstack-mitaka-openstack-beryllium/11/\n\nAttached the logs for reference, kindly let us know if any more details required.", 
            "date_created": "2016-06-30 05:26:17.961912+00:00", 
            "author": "https://api.launchpad.net/1.0/~priya.ramasubbu"
        }, 
        {
            "content": "", 
            "date_created": "2016-06-30 05:26:17.961912+00:00", 
            "author": "https://api.launchpad.net/1.0/~priya.ramasubbu"
        }, 
        {
            "content": "What is this? https://jenkins.opendaylight.org/sandbox/job/netvirt-csit-1node-openstack-mitaka-openstack-beryllium/11/\n\nSomething internal to your company?\n\nWhat release of nova are you using?\n\nAre you using neutron or nova-network?\n\nIs this something running on a test patch?\n\nAre you to reproduce this with devstack and if so, please provide the configuration to do so.", 
            "date_created": "2016-07-14 19:55:09.416446+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "It would be nice to reproduce this on devstack, but I have seen the issue live on three Mitaka installations. Sometimes a vm gets two IPs instead of one. In these setups, Neutron networking is used, the packaging is plain Mitaka from centos-sig repositories.\n\nI could try to reproduce this on devstack if I have time.", 
            "date_created": "2016-08-30 09:26:50.180944+00:00", 
            "author": "https://api.launchpad.net/1.0/~toni-ylenius"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2016-10-30 04:17:33.168915+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ]
}