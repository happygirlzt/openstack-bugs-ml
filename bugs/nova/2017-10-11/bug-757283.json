{
    "status": "Invalid", 
    "last_updated": "2011-04-11 13:28:10.602020+00:00", 
    "description": "# virsh list --all\n Id Name                 State\n----------------------------------\n\n# source novarc \n# euca-run-instances ami-2a835aae --kernel aki-34cf3629 --ramdisk ari-217d77df -k rhelkey -t m1.tiny\nRESERVATION\tr-i9nxdcy8\trhelimg\tdefault\nINSTANCE\ti-00000001\tami-2a835aae\t\t\tscheduling\trhelkey (rhelimg, None)\t0\t\tm1.tiny\t2011-04-11T08:52:49Z\tunknown zone\n\n\n2011-04-11 12:52:51,544 nova.virt.libvirt_conn: instance instance-00000001: Creating image\n2011-04-11 12:52:51,641 nova.utils: Attempting to grab semaphore \"34cf3629\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:51,656 nova.utils: Running cmd (subprocess): cp /var/lib/nova/instances/_base/34cf3629 /var/lib/nova/instances/instance-00000001/kernel\n2011-04-11 12:52:51,693 nova.utils: Attempting to grab semaphore \"217d77df\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:51,707 nova.utils: Running cmd (subprocess): cp /var/lib/nova/instances/_base/217d77df /var/lib/nova/instances/instance-00000001/ramdisk\n2011-04-11 12:52:51,759 nova.utils: Attempting to grab semaphore \"2a835aae_sm\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:52,024 nova.utils: Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/var/lib/nova/instances/_base/2a835aae_sm /var/lib/nova/instances/instance-00000001/disk\n2011-04-11 12:52:52,064 nova.virt.libvirt_conn: instance instance-00000001: injecting key into image 713251502\n2011-04-11 12:52:52,081 nova.compute.disk: Mounting disk...\n2011-04-11 12:52:56,717 nova.compute.disk: Injecting SSH key...\n2011-04-11 12:52:57,474 nova.compute.disk: Deleting guestfs object...\n2011-04-11 12:52:59,280 nova.exception: Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 611, in spawn\n(nova.exception): TRACE:     domain = self._create_new_domain(xml)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 1072, in _create_new_domain\n(nova.exception): TRACE:     domain.createWithFlags(launch_flags)\n(nova.exception): TRACE: AttributeError: virDomain instance has no attribute 'createWithFlags'\n(nova.exception): TRACE: \n2011-04-11 12:52:59,281 nova.compute.manager: ERROR [WYUWXZ5CBTCE7-NTFUKK abr rhelimg] Instance '1' failed to spawn. Is virtualization enabled in the BIOS?\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 234, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: virDomain instance has no attribute 'createWithFlags'\n(nova.compute.manager): TRACE: \n2011-04-11 12:53:39,710 nova.compute.manager: Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n2011-04-11 12:54:39,742 nova.compute.manager: Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/757283", 
    "owner": "https://api.launchpad.net/1.0/~abrindeyev", 
    "id": 757283, 
    "index": 2105, 
    "created": "2011-04-11 08:59:57.112984+00:00", 
    "title": "Nova can't spawn new instance with 'virDomain instance has no attribute 'createWithFlags'' error on RHEL6.0", 
    "comments": [
        {
            "content": "# virsh list --all\n Id Name                 State\n----------------------------------\n\n# source novarc \n# euca-run-instances ami-2a835aae --kernel aki-34cf3629 --ramdisk ari-217d77df -k rhelkey -t m1.tiny\nRESERVATION\tr-i9nxdcy8\trhelimg\tdefault\nINSTANCE\ti-00000001\tami-2a835aae\t\t\tscheduling\trhelkey (rhelimg, None)\t0\t\tm1.tiny\t2011-04-11T08:52:49Z\tunknown zone\n\n\n2011-04-11 12:52:51,544 nova.virt.libvirt_conn: instance instance-00000001: Creating image\n2011-04-11 12:52:51,641 nova.utils: Attempting to grab semaphore \"34cf3629\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:51,656 nova.utils: Running cmd (subprocess): cp /var/lib/nova/instances/_base/34cf3629 /var/lib/nova/instances/instance-00000001/kernel\n2011-04-11 12:52:51,693 nova.utils: Attempting to grab semaphore \"217d77df\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:51,707 nova.utils: Running cmd (subprocess): cp /var/lib/nova/instances/_base/217d77df /var/lib/nova/instances/instance-00000001/ramdisk\n2011-04-11 12:52:51,759 nova.utils: Attempting to grab semaphore \"2a835aae_sm\" for method \"call_if_not_exists\"...\n2011-04-11 12:52:52,024 nova.utils: Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/var/lib/nova/instances/_base/2a835aae_sm /var/lib/nova/instances/instance-00000001/disk\n2011-04-11 12:52:52,064 nova.virt.libvirt_conn: instance instance-00000001: injecting key into image 713251502\n2011-04-11 12:52:52,081 nova.compute.disk: Mounting disk...\n2011-04-11 12:52:56,717 nova.compute.disk: Injecting SSH key...\n2011-04-11 12:52:57,474 nova.compute.disk: Deleting guestfs object...\n2011-04-11 12:52:59,280 nova.exception: Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 611, in spawn\n(nova.exception): TRACE:     domain = self._create_new_domain(xml)\n(nova.exception): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 1072, in _create_new_domain\n(nova.exception): TRACE:     domain.createWithFlags(launch_flags)\n(nova.exception): TRACE: AttributeError: virDomain instance has no attribute 'createWithFlags'\n(nova.exception): TRACE: \n2011-04-11 12:52:59,281 nova.compute.manager: ERROR [WYUWXZ5CBTCE7-NTFUKK abr rhelimg] Instance '1' failed to spawn. Is virtualization enabled in the BIOS?\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 234, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: virDomain instance has no attribute 'createWithFlags'\n(nova.compute.manager): TRACE: \n2011-04-11 12:53:39,710 nova.compute.manager: Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.\n2011-04-11 12:54:39,742 nova.compute.manager: Found instance 'instance-00000001' in DB but no VM. State=5, so setting state to shutoff.", 
            "date_created": "2011-04-11 08:59:57.112984+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "Forgot to specify environment: bzr972 + patch from Bug #755666", 
            "date_created": "2011-04-11 09:02:10.752941+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "Probably outdated version of libvirt (0.8.1) is main source of that bug.\ncreateWithFlags was added in 0.8.2", 
            "date_created": "2011-04-11 09:24:27.811233+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }, 
        {
            "content": "Hi Andrey - indeed, an older version of libvirt is almost definitely to blame.  Nova depends on its own patched version of libvirt anyway, so I don't think we can even try to be compatible with older versions.", 
            "date_created": "2011-04-11 12:13:02.911622+00:00", 
            "author": "https://api.launchpad.net/1.0/~justin-fathomdb"
        }, 
        {
            "content": "I can confirm that same codebase work ok with libvirt 0.8.7.", 
            "date_created": "2011-04-11 13:23:44.331316+00:00", 
            "author": "https://api.launchpad.net/1.0/~abrindeyev"
        }
    ]
}