{
    "status": "Fix Released", 
    "last_updated": "2017-06-16 17:23:07.585509+00:00", 
    "description": "Setting the mtu of a vhost-user port with the ip command will cause vms to fail\nto boot with a device not found error as vhost-user prots are not represented as\nkernel netdevs.\n\nthis bug is present in stable/kilo, stable/liberty and master and i would like to ask that it be back ported if accepted\nand fixed in master.\n\nwhen using vhost-user with ovs-dpdk the vhost-user port is plugged into ovs by nova using a non atomic call to linux_net.create_ovs_vif_port to add an ovs port followed by a second call to linux_net.ovs_set_vhostuser_port_type to update the port type.\n\nhttps://github.com/openstack/nova/blob/1bf6a8760f0ef226dba927b62d4354e248b984de/nova/virt/libvirt/vif.py#L652-L655\n\nthe reuse of the create_ovs_vif_port has an untended concequece of introducing an error where\nthe ip tool is invoked to try and set the mtu on the userspace vhost-user interface which dose not exist\nas a kernel netdev.\nhttps://github.com/openstack/nova/blob/1bf6a8760f0ef226dba927b62d4354e248b984de/nova/network/linux_net.py#L1379\n\nthis results in the in the call to set_device_mtu throwing an exception as the ip comand exits with code 1\nhttps://github.com/openstack/nova/blob/1bf6a8760f0ef226dba927b62d4354e248b984de/nova/network/linux_net.py#L1340-L1342\n\nas a result the second function call to ovs_set_vhostuser_port_type  is never maid and the vm fails to boot.\n\nto resolve this issue i would like to introduce a new function to inux_net.py\ncreate_ovs_vhostuser_port  which will create the vhostuser port as an atomic action\nand will not set the mtu similar to the impentation in the os-vif vhost-user driver\n\nhttps://github.com/jaypipes/vif_plug_vhostuser/blob/8ac30ce32b3e0bae5d2d8f1edc9d64ac2871608e/vif_plug_vhostuser/linux_net.py#L34-L46\n\nan alternitive solution would be to add \"1\" to the retrun code check here https://github.com/openstack/nova/blob/master/nova/network/linux_net.py#L1339  or catch the exception here https://github.com/openstack/nova/blob/1bf6a8760f0ef226dba927b62d4354e248b984de/nova/virt/libvirt/vif.py#L652\n\u00a0however neither solve the underlying cause.\n\nthis was observed with kilo openstack  on ubuntu 14.04 with ovs-dpdk deployed with puppet/fule.", 
    "tags": [
        "kilo-backport-potential", 
        "liberty-backport-potential", 
        "mitaka-backport-potential", 
        "network"
    ], 
    "importance": "Medium", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1533876", 
    "owner": "https://api.launchpad.net/1.0/~sean-k-mooney", 
    "id": 1533876, 
    "index": 4424, 
    "created": "2016-01-13 22:31:04.951128+00:00", 
    "title": "plug_vhostuser may fail due to device not found error when setting mtu", 
    "comments": [
        {
            "content": "with certain version of iproute2 spawning of vm with vhost-user ports will fail do to a \ndevice not found error generated by trying to set the mtu on a vhost-user port us the ip command.\n\nthis bug is present in stable/kilo, stable/liberty and master and i would like to ask that it be back ported if accepted\nand fixed in master.\n\nwhen using vhost-user with ovs-dpdk the vhost-user port is plugged into ovs by nova using\na non atomic call to linux_net.create_ovs_vif_port to add an ovs port followed by \na second call to linux_net.ovs_set_vhostuser_port_type to update the port type.\n\nsee: https://github.com/openstack/nova/blob/master/nova/virt/libvirt/vif.py#L637-L640\n\nthe reuse of the create_ovs_vif_port has an untended concequece of introducing an error where\nthe ip tool is invoked to try and set the mtu on the userspace vhost-user interface which dose not exist\nas a kernel netdev. \nhttps://github.com/openstack/nova/blob/master/nova/network/linux_net.py#L1376\n\nthis results in the in the call to set_device_mtu throwing an exception as the ip comand exits with code 1\nhttps://github.com/openstack/nova/blob/master/nova/network/linux_net.py#L1337-L1339\n\nas a result the second function call to ovs_set_vhostuser_port_type  is never maid and the vm fails to boot.\n\nto resolve this issue i would like to introduce a new function to inux_net.py\ncreate_ovs_vhostuser_port  which will create the vhostuser port as an atomic action \nand will not set the mtu similar to the impentation in the os-vif vhost-user driver\n\nhttps://github.com/jaypipes/vif_plug_vhostuser/blob/master/vif_plug_vhostuser/linux_net.py#L34-L46\n \nan alternitive solution would be to add \"1\" to the retrun code check here https://github.com/openstack/nova/blob/master/nova/network/linux_net.py#L1339  or catch the exception here https://github.com/openstack/nova/blob/master/nova/virt/libvirt/vif.py#L637 however neither solve the underlying cause.\n\nthis was observed on ubuntu 14.04 when trying to deploy ovs-dpdk with kilo using puppet/fule.", 
            "date_created": "2016-01-13 22:31:04.951128+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "i will try to submit a patch to fix this in then next day or too.", 
            "date_created": "2016-01-13 22:35:52.537533+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "@sean mooney:\n\nBug skimming result\n===================\nDo you still actively working on this bug? I have troubles to\nunderstand how I reproduce the issue you described. Would you please\n* either push a change to gerrit (with unit tests)\n* or explain the issue so that others can reproduce it? A template\n  can be found at [1].\n\nNevertheless, the link to the code you provided won't point to the\npieces of code you mean and fail to document the issue properly. \nPlease use a stable link with a commit id like:\n\n    https://github.com/openstack/nova/blob/4dbc6abef99b3da41a6089f322d32676f44cd1f6/nova/virt/libvirt/vif.py#L637-L640\n\nIf you have questions, I'm available in the IRC channel #openstack-nova\nunder the name \"markus_z\".\n\nReferences\n==========\n[1] https://wiki.openstack.org/wiki/Nova/BugsTeam/BugReportTemplate", 
            "date_created": "2016-01-22 12:27:59.653479+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "hi yes i should have a patch for it today.\n\njust fixing unit tests now", 
            "date_created": "2016-01-22 17:01:45.908671+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/271444", 
            "date_created": "2016-01-22 17:41:51.962131+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "@markus_z\n\nif you have a ubuntu 14.04 system and run the following command it will result in an\nexit code of 1\n\nstack@silpixa00390506:~/devstack$ ip link set eth50 mtu 1000\nCannot find device \"eth50\"\nstack@silpixa00390506:~/devstack$ echo $?\n1\n\nas the vhost-user ports are not represented in the kernel network stack setting the\nmtu on vhost-user port will always cause the binding to be failed with any version of\nip link /iproute2 package that  returns 1 when a device is not found.\n\nto replicate the nova boot issue you would need to deploy ovs with dpdk though that is not nessacary\nas the root cause is the uncaught return code caused by the incorrect call to set the mtu. \n\nthe patch i have submitted will remove the errant call to ip link to set the mtu. \nit also make the creation of the vhost-user port atomic which will silence an ovs error  message that is currently emitted \nevery time a vhost-user port is created due to the type not being set as part of the create.\n\nideally this change should be backported to kilo and liberty as the non atomic create and mtu issue have always been present since support was introduced in kilo. \n", 
            "date_created": "2016-01-26 10:09:27.327514+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "I've confirmed this bug on mitaka. There are only one workaround here is to unset network_device_mtu variable. It's not really good idea.", 
            "date_created": "2016-02-23 14:46:22.709530+00:00", 
            "author": "https://api.launchpad.net/1.0/~yottatsa"
        }, 
        {
            "content": "what we see is that when _set_device_mtu is called on the vhostuser device the device becomes non-functional:\n[root@compute-0-0 ~]# ovs-vsctl show\nf954b20d-8b91-4357-a6fa-df707f0bd1e6\n    Bridge br-int\n        fail_mode: secure\n        Port \"vhu272ad051-d5\"\n            Interface \"vhu272ad051-d5\"\n                error: \"could not open network device vhu272ad051-d5 (No such device)\"\n\nAnd its correspondent socket (/var/run/openvswitch) doesn't exist (==the call itself changed the state of the port for some reason)\nRemoving the call (temporarily for debugging) solved the issue.\n", 
            "date_created": "2016-02-25 11:03:34.708501+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-edery"
        }, 
        {
            "content": "type: s/correspondent/corresponding/g", 
            "date_created": "2016-02-25 11:05:36.268352+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-edery"
        }, 
        {
            "content": "what is annorying me about this is i do not see the bug on my local devstack deployment but we were able to see it on a puppet install of the same codebase. in any case the current logic is incorrect so yes i hope this can be fixed.\n\ni will aim to rebase and resubmit  by monday.\nideally i would like to also backport this to liberty and kilo.", 
            "date_created": "2016-02-26 21:40:55.879146+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "recently \nhttps://review.openstack.org/#/c/283847/6/nova/virt/libvirt/vif.py\nhttps://review.openstack.org/#/c/284407/3/neutron/plugins/ml2/config.py\n\nhave mergered which cause this bug to happen frequently in our ci( we suspect that passing build have not been rebased on the neutron change)\n\ni will rebase the patch shortly and leave a comment on  both commits that point to this bug", 
            "date_created": "2016-03-01 15:01:28.360250+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "Fix proposed to branch: stable/liberty\nReview: https://review.openstack.org/289370", 
            "date_created": "2016-03-07 14:48:09.893524+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/kilo\nReview: https://review.openstack.org/289374", 
            "date_created": "2016-03-07 14:51:34.510036+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Considering there are backports proposed for this bug, it doesn't appear to be a regression in mitaka and is a latent issue, so I've removed the mitaka-rc-potential tag.", 
            "date_created": "2016-03-14 16:56:30.351195+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "i have updated the bug discription as it is not version specific as it should fail  with any released version of ip tool.\n\nthis latent bug was masked by the previous default value for the mtu of 0 in the nova config wich caused the ip link command to not be called. as default value was used in the upstream ci and in our third party ci the issue was not seen initially.\n", 
            "date_created": "2016-03-16 00:58:16.443342+00:00", 
            "author": "https://api.launchpad.net/1.0/~sean-k-mooney"
        }, 
        {
            "content": "Fix proposed to branch: stable/mitaka\nReview: https://review.openstack.org/294649", 
            "date_created": "2016-03-18 15:08:53.319234+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/271444\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=adf7ba61dd73fe4bfffa20295be9a4b1006a1fe6\nSubmitter: Jenkins\nBranch:    master\n\ncommit adf7ba61dd73fe4bfffa20295be9a4b1006a1fe6\nAuthor: Sean Mooney <email address hidden>\nDate:   Fri Jan 22 17:00:36 2016 +0000\n\n    stop setting mtu when plugging vhost-user ports\n    \n    vhost-user is a userspace protocol to establish connectivity\n    between a virto-net frontend typically qemu and a\n    userspace virtio backend such as ovs with dpdk.\n    \n    vhost-user interfaces exist only in userspace from the host perspective\n    and are not represented in the linux networking stack as kernel netdevs.\n    As a result attempting to set the mtu on a vhost-user interface\n    using ifconfig or ip link will fail with a device not found error.\n    \n    - this change removes a call to _set_device_mtu when plugging\n      vhost-user interfaces.\n    - this change prevents the device not found error from occurring\n      which stopped vms booting with vhost-user interfaces\n      due to an uncaught exception resulting in a failure to set the\n      interface type in ovs.\n    - this change make creating vhost-user interface\n      an atomic action.\n    \n    This latent bug is only triggered when the mtu value is set to a\n    value other than 0 which was the default proir to mitaka.\n    \n    Change-Id: I2e17723d5052d57cd1557bd8a173c06ea0dcb2d4\n    Closes-Bug: #1533876\n", 
            "date_created": "2016-03-22 01:22:44.837168+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by sean mooney (<email address hidden>) on branch: stable/kilo\nReview: https://review.openstack.org/289374\nReason: ill abandon this for now and we can reopen later if this issue starts to be hit more widespread in kilo. mmost commercial openstack release have moved to liberty as such i would not expect many new kilo deployment with ovs and dpdk to be deployed.", 
            "date_created": "2016-03-22 22:06:06.965538+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/294649\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=c7eb823fe73e3db5dca48df5879db18cbab5bd8d\nSubmitter: Jenkins\nBranch:    stable/mitaka\n\ncommit c7eb823fe73e3db5dca48df5879db18cbab5bd8d\nAuthor: Sean Mooney <email address hidden>\nDate:   Fri Jan 22 17:00:36 2016 +0000\n\n    stop setting mtu when plugging vhost-user ports\n    \n    vhost-user is a userspace protocol to establish connectivity\n    between a virto-net frontend typically qemu and a\n    userspace virtio backend such as ovs with dpdk.\n    \n    vhost-user interfaces exist only in userspace from the host perspective\n    and are not represented in the linux networking stack as kernel netdevs.\n    As a result attempting to set the mtu on a vhost-user interface\n    using ifconfig or ip link will fail with a device not found error.\n    \n    - this change removes a call to _set_device_mtu when plugging\n      vhost-user interfaces.\n    - this change prevents the device not found error from occurring\n      which stopped vms booting with vhost-user interfaces\n      due to an uncaught exception resulting in a failure to set the\n      interface type in ovs.\n    - this change make creating vhost-user interface\n      an atomic action.\n    \n    This latent bug is only triggered when the mtu value is set to a\n    value other than 0 which was the default proir to mitaka.\n    \n    Change-Id: I2e17723d5052d57cd1557bd8a173c06ea0dcb2d4\n    Closes-Bug: #1533876\n    (cherry picked from commit adf7ba61dd73fe4bfffa20295be9a4b1006a1fe6)\n", 
            "date_created": "2016-03-23 23:06:02.256779+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 13.0.0.0rc2 release candidate.", 
            "date_created": "2016-03-24 16:05:36.375751+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/302578", 
            "date_created": "2016-04-07 07:47:30.524175+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/302578\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=a8ebbebd4ee0c3bb1452ea32f92e1588a6b35067\nSubmitter: Jenkins\nBranch:    master\n\ncommit 7105f888ee1f52d2a462fc0ece3130dc0d3d49f5\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Thu Mar 31 06:28:06 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Ibe5d4d38834fbcb99c0332d3375659a21d94154e\n\ncommit 5de98cb2de2eca3d061488c55f96e6f7c9bc56a8\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Wed Mar 30 06:41:25 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Ia46d661560b1141c1c1522c9477c510d28a0d0e7\n\ncommit a9d55427b6e8d2472088e3d40a8a5151ce408283\nAuthor: Moshe Levi <email address hidden>\nDate:   Wed Mar 23 10:59:04 2016 +0200\n\n    Fix detach SR-IOV when using LibvirtConfigGuestHostdevPCI\n    \n    This patch fixes an issue which was introduced by this\n    change If3edc1965c01a077eb61984a442e0d778d870d75.\n    Usually the vif config is of type LibvirtConfigGuestInterface,\n    but some vif use LibvirtConfigGuestHostdevPCI config\n    (e.g.  the ib_hostdev). The difference is that\n    LibvirtConfigGuestInterface keeps the pci address in source_dev\n    while LibvirtConfigGuestHostdevPCI has domain, bus, slot and\n    function, instead of relying on the vif config type we can take the\n    pci address for the neutron port.\n    \n    Closes-Bug: #1560860\n    \n    Change-Id: I62a7ff16f1c9c5da923451520fbeeabb5cc0c5c6\n    (cherry picked from commit f15d9a9693b19393fcde84cf4bc6f044d39ffdca)\n\ncommit 5b6ee702df7ad901f68bec2ed8d43b66aa6d98c1\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Tue Mar 29 06:37:30 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Iad0e42a18bd3a7dcf216b4df17b9893e13382efe\n\ncommit 29042e06f7e570bd13607b62b997a6ae21db80c5\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Mon Mar 28 06:34:19 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: If159133a2e32c6ef53ba104751a3eb054a95b733\n\ncommit 3e9819dab8249ec9993b0b9874e80a78f2ed1754\nAuthor: Matt Riedemann <email address hidden>\nDate:   Sun Mar 27 19:31:32 2016 -0400\n\n    Update cells blacklist regex for test_server_basic_ops\n    \n    Tempest change 9bee3b92f1559cb604c8bd74dcca57805a85a97a\n    renamed a test in our blacklist so update the filter to\n    handle the old and new name.\n    \n    The Tempest team is hesitant to revert the change so we\n    should handle it ourselves and eventually move to using\n    test uuids for our blacklist, but there might need to\n    be work in devstack-gate for that first.\n    \n    Change-Id: Ibab3958044c21568d7fbbe0a298bb40bbbc20df3\n    Closes-Bug: #1562323\n    (cherry picked from commit e86b7fbb99de0c4cff6a9569f748bae1bde693a6)\n\ncommit c71c4e01b21da5b5b7cb262969e30d6a68b3c58a\nAuthor: Sylvain Bauza <email address hidden>\nDate:   Thu Mar 24 23:07:54 2016 +0100\n\n    Stop providing force_hosts to the scheduler for move ops\n    \n    Since now we provide the original RequestSpec for move operations (unshelve,\n    live-migrate and evacuate), it can also provide the original force_hosts/nodes\n    to the scheduler.\n    In that case, it means that if an admin was asking to boot an instance forcing\n    to an host, a later move operation could then give again the forced value and\n    then wouldn't permit to get a different destination which is an issue.\n    \n    TBH, that is not a problem for live-migrate and evacuate that do provide an\n    optional host value (which bypasses then the scheduler) but since unshelve\n    is not having this optional value, it would mean that we could only unshelve\n    an forced instance to the same host.\n    \n    Change-Id: I03c22ff757d0ee1da9d69fa48cc4bdd036e6b13f\n    Closes-Bug: #1561357\n    (cherry picked from commit 446d15568e00a483d909dc5c565d70baf29179ad)\n\ncommit 73e4fb189abe098f0058d173044708119785e494\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Thu Mar 24 06:31:09 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Ide680eb6e11506d19cbaa549837a0ea448b9c401\n\ncommit ad3c069f69ca1ab2c1d9c6c18d762b7c26c5ad92\nAuthor: Pawel Koniszewski <email address hidden>\nDate:   Wed Mar 23 18:44:10 2016 +0100\n\n    Try to repopulate instance_group if it is None\n    \n    There are cases that we need to create new RequestSpect object and we\n    pass None for instance_group argument. It might cause server group\n    policies to be omitted during filtering phase. Therefore if\n    instance_group is None we should try to repopulate instance_group\n    basing on data that is in filter_properties.\n    \n    Change-Id: Id7e669e0a6db1ff1052c42006f1a141bdb8cdf29\n    Closes-Bug: #1561022\n    (cherry picked from commit 00efcf3a4171d270fc3a7b9b4a9230332aea81e6)\n\ncommit 9b98668465e326cde844a8b012e4a0eec6c2844c\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Wed Mar 23 06:29:56 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: I3be6855101c04f36b9c06a69d16876cdf6f00c62\n\ncommit c7eb823fe73e3db5dca48df5879db18cbab5bd8d\nAuthor: Sean Mooney <email address hidden>\nDate:   Fri Jan 22 17:00:36 2016 +0000\n\n    stop setting mtu when plugging vhost-user ports\n    \n    vhost-user is a userspace protocol to establish connectivity\n    between a virto-net frontend typically qemu and a\n    userspace virtio backend such as ovs with dpdk.\n    \n    vhost-user interfaces exist only in userspace from the host perspective\n    and are not represented in the linux networking stack as kernel netdevs.\n    As a result attempting to set the mtu on a vhost-user interface\n    using ifconfig or ip link will fail with a device not found error.\n    \n    - this change removes a call to _set_device_mtu when plugging\n      vhost-user interfaces.\n    - this change prevents the device not found error from occurring\n      which stopped vms booting with vhost-user interfaces\n      due to an uncaught exception resulting in a failure to set the\n      interface type in ovs.\n    - this change make creating vhost-user interface\n      an atomic action.\n    \n    This latent bug is only triggered when the mtu value is set to a\n    value other than 0 which was the default proir to mitaka.\n    \n    Change-Id: I2e17723d5052d57cd1557bd8a173c06ea0dcb2d4\n    Closes-Bug: #1533876\n    (cherry picked from commit adf7ba61dd73fe4bfffa20295be9a4b1006a1fe6)\n\ncommit a598793ad92057f685100d3b0f30cbc1aa597d38\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Tue Mar 22 06:29:59 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Id73392e9f47d7ac891237869979d186386f34bfa\n\ncommit 23a202eee87a14b152e25eac1f9b6a0aa14a2bd3\nAuthor: Matthew Booth <email address hidden>\nDate:   Fri Mar 18 12:12:51 2016 +0000\n\n    Fix conversion of config disks to qcow2 during resize/migration\n    \n    finish_migration contains some code which converts raw disks to qcow2\n    when moving from a host which uses raw disks to a host which uses\n    qcow2 disks. This was erroneously also converted config disks, which\n    are hard-coded to be raw even when other disks are qcow2.\n    \n    This has always been broken, but it wasn't previously exposed because\n    a subsequent bug unconditionally overwrote the qcow2 config disk with\n    a new, raw one. Change I03e08fae97416ebe5cdedcf238a06d1b90203c5d\n    changed the order of these 2 events, so that the erroneously-converted\n    config drive was no longer overwritten, resulting in a qcow2 file\n    being presented to the instance as raw.\n    \n    This change explicitly filters out config disks from conversion.\n    \n    Change-Id: I6bf3cd4f9e0e152bf69732d9a17f93c86dedbd40\n    Closes-Bug: #1558343\n    (cherry picked from commit 29fb0aca1623eb0c4a565d728501667a4c5e8136)\n\ncommit f0dc7dbb6823f15e3bad1e407c498b3ce0248665\nAuthor: Pawel Koniszewski <email address hidden>\nDate:   Tue Mar 15 16:13:38 2016 +0100\n\n    xenapi: Fix when auto block_migration in the API\n    \n    When nova calculates live migration type it stores the calculated\n    type in migrate_data.block_migration. Because of that we really should\n    not use block_migration, because it might not be accurate in certain\n    cases.\n    \n    Closes-Bug: #1557585\n    Change-Id: I0796a4b9bfabb1b2132a8253963528a40b1fb680\n    (cherry picked from commit 762605ca4c2ac990b53a50d8f2c52fc793e07c94)\n\ncommit adaa9dee27279e6dda5d95750c626e620ce496a8\nAuthor: John Garbutt <email address hidden>\nDate:   Tue Mar 15 18:23:36 2016 +0000\n\n    xenapi: Fix up passing of sr_uuid_map\n    \n    Currently pre_live_migration breaks the chain of passing the migrate\n    data between the different driver calls.\n    \n    Also, the place that was using sr_uuid_map was not looking for it in the\n    migrate data object, where it now lives.\n    \n    Related-Bug: #1557585\n    Change-Id: I6f210d876816dc59325f3c36c75c2df5c880c61e\n    (cherry picked from commit 8e5188af4c5221faaa60b21fa9c35550a1380e9f)\n\ncommit 15372ef7cc42e43185aef3e8ec960436987970cf\nAuthor: Bob Ball <email address hidden>\nDate:   Tue Mar 15 16:21:00 2016 +0000\n\n    xenapi: Fix the live-migrate aggregate check\n    \n    AggregateList now returns [] if the host is not in an\n    aggregate.  This was causing an IndexError in XenAPI.\n    \n    This change also replaces the AggregateHostNotFound exception,\n    which is not caught properly further up the stack, with the\n    MigrationPreCheckError as this is a suitable substitute since\n    the aggregate check is only part of the pre migration check.\n    \n    Probably introduced by Ibcb896b2eef673bce23491161ff394bcc87aa541\n    \n    Related-Bug: #1557585\n    Change-Id: Icacd3cbe065ee8598e5e5f03bd73463b95ed2f75\n    (cherry picked from commit 38738d79e0774cf71dfff8185330b1f45b64d9fc)\n\ncommit 61b4dcc18ffe0c2b00ef9984af28b7294bcaf68d\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Mon Mar 21 06:29:57 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: Ife86c184c2b8971a18a278d68555d6d646792e25\n\ncommit e9804f545b97a3e84157a6cf74e8482cd9fafdc3\nAuthor: OpenStack Proposal Bot <email address hidden>\nDate:   Fri Mar 18 06:27:59 2016 +0000\n\n    Imported Translations from Zanata\n    \n    For more information about this automatic import see:\n    https://wiki.openstack.org/wiki/Translations/Infrastructure\n    \n    Change-Id: I50fa5f8d7efd9ef1638ec1fe31177d6210588638\n\ncommit a970127bf7d0de2328f8bdfe1f8201c3938b6d77\nAuthor: Thierry Carrez <email address hidden>\nDate:   Wed Mar 16 19:16:46 2016 +0100\n\n    Update .gitreview for stable/mitaka\n    \n    Change-Id: Ie60313913fdb70d6fbbdcceced621e14d2cf54eb\n", 
            "date_created": "2016-04-07 12:53:30.087915+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/289370\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=98464d54d0fcdba452191bc0291d59957c9cdae6\nSubmitter: Jenkins\nBranch:    stable/liberty\n\ncommit 98464d54d0fcdba452191bc0291d59957c9cdae6\nAuthor: Sean Mooney <email address hidden>\nDate:   Fri Jan 22 17:00:36 2016 +0000\n\n    stop setting mtu when plugging vhost-user ports\n    \n    vhost-user is a userspace protocol to establish connectivity\n    between a virto-net frontend typically qemu and a\n    userspace virtio backend such as ovs with dpdk.\n    \n    vhost-user interfaces exist only in userspace from the host perspective\n    and are not represented in the linux networking stack as kernel netdevs.\n    As a result attempting to set the mtu on a vhost-user interface\n    using ifconfig or ip link will fail with a device not found error.\n    \n    - this change removes a call to _set_device_mtu when plugging\n      vhost-user interfaces.\n    - this change prevents the device not found error from occurring\n      which stopped vms booting with vhost-user interfaces\n      due to an uncaught exception resulting in a failure to set the\n      interface type in ovs.\n    - this change make creating vhost-user interface\n      an atomic action.\n    \n    This latent bug is only triggered when the mtu value is set to a\n    value other than 0 which was the default proir to mitaka.\n    \n    Conflicts:\n    \tnova/network/model.py\n    \tnova/tests/unit/virt/libvirt/test_vif.py\n    \tnova/virt/libvirt/vif.py\n    \n    Change-Id: I2e17723d5052d57cd1557bd8a173c06ea0dcb2d4\n    Closes-Bug: #1533876\n    (cherry picked from commit adf7ba61dd73fe4bfffa20295be9a4b1006a1fe6)\n", 
            "date_created": "2016-04-23 04:48:40.347144+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b1 development milestone.", 
            "date_created": "2016-06-02 19:34:51.158642+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b1 development milestone.", 
            "date_created": "2016-06-02 19:35:08.638885+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 12.0.4 release.", 
            "date_created": "2016-06-08 21:35:35.664683+00:00", 
            "author": "https://api.launchpad.net/1.0/~doug-hellmann"
        }
    ]
}