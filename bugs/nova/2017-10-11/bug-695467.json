{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 14:03:52.913769+00:00", 
    "description": "Version: Bexar, build 502\nEnvironment: 1 controller machine (api/network/objectstore/scheduler) and 1 compute machine (compute/volume), Ubuntu Lucid\nDetail:  After deploying and restarting services with build 502 (from debs via https://launchpad.net/~nova-core/+archive/trunk) I tried to spin up a VM.  The spin up fails, giving a message about an attribute error for injected_network_template.  After looking at the nova bzr repo, it appears that the flag definition for this attribute was accidentally removed at R471 (Add raw disk image support.).\n\nOutput from nova-compute when trying to spin a new VM:\n\nINFO:root:instance instance-1914438087: Creating image\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-akhlldt4/image -H \"Date: Wed, 29 Dec 2010 18:40:44 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:w1nTwssiBtLcIjMBNExI2V0jTu4=\" -o /var/lib/nova/instances/instance-1914438087/disk-raw\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-lc2uk0wz/image -H \"Date: Wed, 29 Dec 2010 18:40:48 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:LrmluqPt5vVcftY6Vhlv888/noE=\" -o /var/lib/nova/instances/instance-1914438087/kernel\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-fscox004/image -H \"Date: Wed, 29 Dec 2010 18:40:48 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:Ios1d/cgvBCcYFpOY3DNCxFJ/pw=\" -o /var/lib/nova/instances/instance-1914438087/ramdisk\nERROR:root:Uncaught exception\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 83, in _wrap\n    return f(*args, **kw)\n  File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 334, in spawn\n    self._create_image(instance, xml)\n  File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 462, in _create_image\n    with open(FLAGS.injected_network_template) as f:\n  File \"/usr/lib/pymodules/python2.6/nova/flags.py\", line 141, in __getattr__\n    val = gflags.FlagValues.__getattr__(self, name)\n  File \"/usr/lib/python2.6/dist-packages/gflags.py\", line 810, in __getattr__\n    raise AttributeError(name)\nAttributeError: injected_network_template\nERROR:root:instance instance-1914438087: Failed to spawn\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 146, in run_instance\n    self.driver.spawn(instance_ref)\n  File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 89, in _wrap\n    raise Error(str(e))\nError: injected_network_template\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-1914438087'", 
    "tags": [
        "bexar", 
        "nova-compute"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/695467", 
    "owner": "https://api.launchpad.net/1.0/~rlucio", 
    "id": 695467, 
    "index": 1977, 
    "created": "2010-12-29 19:16:10.020413+00:00", 
    "title": "nova-compute flag 'injected_network_template' definition is missing, causes vm creation failure", 
    "comments": [
        {
            "content": "Version: Bexar, build 502\nEnvironment: 1 controller machine (api/network/objectstore/scheduler) and 1 compute machine (compute/volume), Ubuntu Lucid\nDetail:  After deploying and restarting services with build 502 (from debs via https://launchpad.net/~nova-core/+archive/trunk) I tried to spin up a VM.  The spin up fails, giving a message about an attribute error for injected_network_template.  After looking at the nova bzr repo, it appears that the flag definition for this attribute was accidentally removed at R471 (Add raw disk image support.).\n\nOutput from nova-compute when trying to spin a new VM:\n\nINFO:root:instance instance-1914438087: Creating image\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-akhlldt4/image -H \"Date: Wed, 29 Dec 2010 18:40:44 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:w1nTwssiBtLcIjMBNExI2V0jTu4=\" -o /var/lib/nova/instances/instance-1914438087/disk-raw\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-lc2uk0wz/image -H \"Date: Wed, 29 Dec 2010 18:40:48 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:LrmluqPt5vVcftY6Vhlv888/noE=\" -o /var/lib/nova/instances/instance-1914438087/kernel\nDEBUG:root:Running cmd (subprocess): /usr/bin/curl --fail --silent http://192.168.0.64:3333/_images/ami-fscox004/image -H \"Date: Wed, 29 Dec 2010 18:40:48 GMT\" -H \"Authorization: AWS 95399557-0b14-47e9\n-b5a0-4933b55b1a82:default-project:Ios1d/cgvBCcYFpOY3DNCxFJ/pw=\" -o /var/lib/nova/instances/instance-1914438087/ramdisk\nERROR:root:Uncaught exception\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 83, in _wrap\n    return f(*args, **kw)\n  File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 334, in spawn\n    self._create_image(instance, xml)\n  File \"/usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py\", line 462, in _create_image\n    with open(FLAGS.injected_network_template) as f:\n  File \"/usr/lib/pymodules/python2.6/nova/flags.py\", line 141, in __getattr__\n    val = gflags.FlagValues.__getattr__(self, name)\n  File \"/usr/lib/python2.6/dist-packages/gflags.py\", line 810, in __getattr__\n    raise AttributeError(name)\nAttributeError: injected_network_template\nERROR:root:instance instance-1914438087: Failed to spawn\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/nova/compute/manager.py\", line 146, in run_instance\n    self.driver.spawn(instance_ref)\n  File \"/usr/lib/pymodules/python2.6/nova/exception.py\", line 89, in _wrap\n    raise Error(str(e))\nError: injected_network_template\nlibvir: QEMU error : Domain not found: no domain with matching name 'instance-1914438087'", 
            "date_created": "2010-12-29 19:16:10.020413+00:00", 
            "author": "https://api.launchpad.net/1.0/~rlucio"
        }
    ]
}