{
    "status": "Invalid", 
    "last_updated": "2016-04-26 20:28:46.255004+00:00", 
    "description": "I intentionally make the title of this bug similar to #1259323. Since then, the default cmdline for libvirt was probably changed to\n<cmdline>root=/dev/vda console=tty0 console=ttyS0 console=ttyAMA0</cmdline>\nI can't find when the change could have occured. It is weird that I'm getting it on a fairly standard OpenStack Kilo installation on Ubuntu 14.04, AMD64 platform.\nThe default cmdline is applied because I'm launching instances in the AMI format.\nThe consequence is that I do not see the output of init scripts in the console log. Everything between the last kernel message and the login prompt is missing. Because of that, I do not see, e.g., the generated root password of the image. The graphical console of course works.\nThe kernel documentation explains it - the LAST console= statement is where /dev/console is redirected. Kernel messages go to all of them. The login prompt is then generated by a getty configured in /etc/inittab.\nIt can be fixed using image properties on image upload to glance, such as:\nglance image-create ... --prop os_command_line=\"root=/dev/vda console=tty0 console=ttyS0\"\nThere are also properties for setting kernel and ramdisk on the command line, so it's not a big problem to add one more definition, but it took me a few hours to figure it out...", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1574384", 
    "owner": "None", 
    "id": 1574384, 
    "index": 6174, 
    "created": "2016-04-24 20:46:14.011297+00:00", 
    "title": "Libvirt console parameter incorrect for AMD64 KVM", 
    "comments": [
        {
            "content": "I intentionally make the title of this bug similar to #1259323. Since then, the default cmdline for libvirt was probably changed to\n<cmdline>root=/dev/vda console=tty0 console=ttyS0 console=ttyAMA0</cmdline>\nI can't find when the change could have occured. It is weird that I'm getting it on a fairly standard OpenStack Kilo installation on Ubuntu 14.04, AMD64 platform.\nThe default cmdline is applied because I'm launching instances in the AMI format.\nThe consequence is that I do not see the output of init scripts in the console log. Everything between the last kernel message and the login prompt is missing. Because of that, I do not see, e.g., the generated root password of the image. The graphical console of course works.\nThe kernel documentation explains it - the LAST console= statement is where /dev/console is redirected. Kernel messages go to all of them. The login prompt is then generated by a getty configured in /etc/inittab.\nIt can be fixed using image properties on image upload to glance, such as:\nglance image-create ... --prop os_command_line=\"root=/dev/vda console=tty0 console=ttyS0\"\nThere are also properties for setting kernel and ramdisk on the command line, so it's not a big problem to add one more definition, but it took me a few hours to figure it out...", 
            "date_created": "2016-04-24 20:46:14.011297+00:00", 
            "author": "https://api.launchpad.net/1.0/~wondra"
        }, 
        {
            "content": "Nova doesn't set the cmdline if it is not defined in the image properties. Your installed libvirt version uses then a default for that platform and it sounds like an issue in libvirt itself. You can double-check in the logs of nova-compute, there should be the generated \"libvirt.xml\" *without* any cmdline. I'm closing this bug report.\n\n-besides of that-\n\nKilo is only supported for security fixes and this issue doesn't sound like one. \n\n", 
            "date_created": "2016-04-26 20:28:38.721533+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ]
}