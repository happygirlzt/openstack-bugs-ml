{
    "status": "Won't Fix", 
    "last_updated": "2012-10-08 13:04:19.061682+00:00", 
    "description": "Pass an invalid volume ID to nova boot from bootable volume API.\n\n$ nova boot --flavor 1 --image a2bfa0c3-fb77-4da3-9a45-c0ed0debb1d5 --block_device_mapping vda=fbd8ae99-2aaf-4c88-83bb-9341d4f2gc5s:volume:1 boot_from_vol\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                               |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000003                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-STS:task_state               | scheduling                           |\n| OS-EXT-STS:vm_state                 | building                             |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| adminPass                           | H4EiQhswhe8v                         |\n| config_drive                        |                                      |\n| created                             | 2012-10-04T12:20:58Z                 |\n| flavor                              | m1.tiny                              |\n| hostId                              |                                      |\n| id                                  | 1ed3e2b8-0591-4c20-af54-073a4e086f2b |\n| image                               | cirros-0.3.0-x86_64-uec              |\n| key_name                            | None                                 |\n| metadata                            | {}                                   |\n| name                                | boot_from_vol                        |\n| progress                            | 0                                    |\n| security_groups                     | [{u'name': u'default'}]              |\n| status                              | BUILD                                |\n| tenant_id                           | b1519b1ea6b8439fb7d88b1ec79ceec2     |\n| updated                             | 2012-10-04T12:20:59Z                 |\n| user_id                             | bd1b5e2ca71f4ae2b2be7c0950629792     |\n+-------------------------------------+--------------------------------------+\n\nThe instance goes into ERROR state after some time.\n$ nova list\n+--------------------------------------+---------------+--------+----------+\n| ID                                   | Name          | Status | Networks |\n+--------------------------------------+---------------+--------+----------+\n| 1ed3e2b8-0591-4c20-af54-073a4e086f2b | boot_from_vol | ERROR  |          |\n+--------------------------------------+---------------+--------+----------+", 
    "tags": [
        "ntt"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1061576", 
    "owner": "None", 
    "id": 1061576, 
    "index": 3134, 
    "created": "2012-10-04 12:38:59.018161+00:00", 
    "title": "HTTP 200 returned instead of HTTP 404 on passing invalid volume  ID to boot server", 
    "comments": [
        {
            "content": "Pass an invalid volume ID to nova boot from bootable volume API.\n\n$ nova boot --flavor 1 --image a2bfa0c3-fb77-4da3-9a45-c0ed0debb1d5 --block_device_mapping vda=fbd8ae99-2aaf-4c88-83bb-9341d4f2gc5s:volume:1 boot_from_vol\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-DCF:diskConfig                   | MANUAL                               |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000003                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-STS:task_state               | scheduling                           |\n| OS-EXT-STS:vm_state                 | building                             |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| adminPass                           | H4EiQhswhe8v                         |\n| config_drive                        |                                      |\n| created                             | 2012-10-04T12:20:58Z                 |\n| flavor                              | m1.tiny                              |\n| hostId                              |                                      |\n| id                                  | 1ed3e2b8-0591-4c20-af54-073a4e086f2b |\n| image                               | cirros-0.3.0-x86_64-uec              |\n| key_name                            | None                                 |\n| metadata                            | {}                                   |\n| name                                | boot_from_vol                        |\n| progress                            | 0                                    |\n| security_groups                     | [{u'name': u'default'}]              |\n| status                              | BUILD                                |\n| tenant_id                           | b1519b1ea6b8439fb7d88b1ec79ceec2     |\n| updated                             | 2012-10-04T12:20:59Z                 |\n| user_id                             | bd1b5e2ca71f4ae2b2be7c0950629792     |\n+-------------------------------------+--------------------------------------+\n\nThe instance goes into ERROR state after some time.\n$ nova list\n+--------------------------------------+---------------+--------+----------+\n| ID                                   | Name          | Status | Networks |\n+--------------------------------------+---------------+--------+----------+\n| 1ed3e2b8-0591-4c20-af54-073a4e086f2b | boot_from_vol | ERROR  |          |\n+--------------------------------------+---------------+--------+----------+", 
            "date_created": "2012-10-04 12:38:59.018161+00:00", 
            "author": "https://api.launchpad.net/1.0/~rohitk"
        }, 
        {
            "content": "In order to throw a 404 we'd need to update the Nova API code to check for the existence of a supplied volume. This would potentially make the API slower and require either a DB or Cinder check which is probably something we'd want to avoid in the Nova API itself.\n\nWhile we do check for valid images UUIDs (because the spec requires it I think) I'd actually like to suggest that this is poor behavior since it involves making an extra call to Glance. Perhaps long term we should actually look at changing the Nova v3 spec to validate the image ID later as well when the image is actually downloaded.", 
            "date_created": "2012-10-04 16:06:50.124181+00:00", 
            "author": "https://api.launchpad.net/1.0/~dan-prince"
        }, 
        {
            "content": "In my opinion, I think this check should be made in the API code making the behavior similar to the current implementation for booting from an image (atleast for v2). Either ways, validation should be made in the API. \n\nThe impact and overhead of not validating would be unwanted network creation and related DB calls involved.\nValidation of the volume ID should be mandatory while booting from volume. ", 
            "date_created": "2012-10-05 14:26:34.259371+00:00", 
            "author": "https://api.launchpad.net/1.0/~rohitk"
        }, 
        {
            "content": "In general I think it is good to validate things up front in the API. When there is an extra cost associated with that validation I think we need to make an exception however and perform that validation asynchronously. This will help ensure that over the long term our API performance remains fast.", 
            "date_created": "2012-10-08 13:04:18.174746+00:00", 
            "author": "https://api.launchpad.net/1.0/~dan-prince"
        }
    ]
}