{
    "status": "Fix Released", 
    "last_updated": "2011-04-15 08:33:12.205342+00:00", 
    "description": "Hi:\n1) I'm running Ubuntu Server 10.04.1 LTS fresh install on bare metal. \n2) I Installed OpenStack via nova.sh script no problem  (Trunk Revision 643)\n3) Jump to screen 8 and do: euca-add-keypair mykey > mykey.priv\n\nI get the following stack trace in mykey.priv:\n\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nBotoServerError: 500 Internal Server Error\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/eventlet/wsgi.py\", line 336, in handle_one_response\n    result = self.application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/paste/urlmap.py\", line 203, in __call__\n    return app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 60, in __call__\n    rv = req.get_response(self.application)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 918, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 886, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 171, in __call__\n    req.path)\n  File \"/home/novademo/nova/nova/auth/manager.py\", line 260, in authenticate\n    user = self.get_user_from_access_key(access_key)\n  File \"/home/novademo/nova/nova/auth/manager.py\", line 606, in get_user_from_access_key\n    user_dict = drv.get_user_from_access_key(access_key)\n  File \"/home/novademo/nova/nova/auth/dbdriver.py\", line 53, in get_user_from_access_key\n    user = db.user_get_by_access_key(context.get_admin_context(), access)\n  File \"/home/novademo/nova/nova/db/api.py\", line 827, in user_get_by_access_key\n    return IMPL.user_get_by_access_key(context, access_key)\n  File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 96, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 1706, in user_get_by_access_key\n    filter_by(deleted=can_read_deleted(context)).\\\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1496, in first\n    ret = list(self[0:1])\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1405, in __getitem__\n    return list(res)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1565, in __iter__\n    return self._execute_and_instances(context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1570, in _execute_and_instances\n    mapper=self._mapper_zero_or_none())\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 735, in execute\n    clause, params or {})\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1157, in execute\n    params)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1237, in _execute_clauseelement\n    return self.__execute_context(context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 288, in do_execute\n    cursor.execute(statement, parameters)\nOperationalError: (OperationalError) no such table: users u'SELECT users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.deleted_at AS users_deleted_at, users.deleted AS users_deleted, users.id AS users_id, us\ners.name AS users_name, users.access_key AS users_access_key, users.secret_key AS users_secret_key, users.is_admin AS users_is_admin \\nFROM users \\nWHERE users.access_key = ? AND users.deleted = ? \\n LIMIT 1 OFFSET 0' ('admin', False)\n\nNote 1: nova.sqlite works fine.\nNote 2: users table does exist in nova database in MySQL.\n\nCheers,\nDave", 
    "tags": [], 
    "importance": "High", 
    "heat": 20, 
    "link": "https://bugs.launchpad.net/nova/+bug/711439", 
    "owner": "https://api.launchpad.net/1.0/~vishvananda", 
    "id": 711439, 
    "index": 344, 
    "created": "2011-02-01 19:30:30.147321+00:00", 
    "title": "euca-add-keypair fails with MySQL chosen in nova.sh", 
    "comments": [
        {
            "content": "Hi:\n1) I'm running Ubuntu Server 10.04.1 LTS fresh install on bare metal. \n2) I Installed OpenStack via nova.sh script no problem  (Trunk Revision 643)\n3) Jump to screen 8 and do: euca-add-keypair mykey > mykey.priv\n\nI get the following stack trace in mykey.priv:\n\nWarning: failed to parse error message from AWS: <unknown>:1:0: syntax error\nBotoServerError: 500 Internal Server Error\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/eventlet/wsgi.py\", line 336, in handle_one_response\n    result = self.application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/paste/urlmap.py\", line 203, in __call__\n    return app(environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 60, in __call__\n    rv = req.get_response(self.application)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 918, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 886, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 171, in __call__\n    req.path)\n  File \"/home/novademo/nova/nova/auth/manager.py\", line 260, in authenticate\n    user = self.get_user_from_access_key(access_key)\n  File \"/home/novademo/nova/nova/auth/manager.py\", line 606, in get_user_from_access_key\n    user_dict = drv.get_user_from_access_key(access_key)\n  File \"/home/novademo/nova/nova/auth/dbdriver.py\", line 53, in get_user_from_access_key\n    user = db.user_get_by_access_key(context.get_admin_context(), access)\n  File \"/home/novademo/nova/nova/db/api.py\", line 827, in user_get_by_access_key\n    return IMPL.user_get_by_access_key(context, access_key)\n  File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 96, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 1706, in user_get_by_access_key\n    filter_by(deleted=can_read_deleted(context)).\\\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1496, in first\n    ret = list(self[0:1])\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1405, in __getitem__\n    return list(res)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1565, in __iter__\n    return self._execute_and_instances(context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1570, in _execute_and_instances\n    mapper=self._mapper_zero_or_none())\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 735, in execute\n    clause, params or {})\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1157, in execute\n    params)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1237, in _execute_clauseelement\n    return self.__execute_context(context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 288, in do_execute\n    cursor.execute(statement, parameters)\nOperationalError: (OperationalError) no such table: users u'SELECT users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.deleted_at AS users_deleted_at, users.deleted AS users_deleted, users.id AS users_id, us\ners.name AS users_name, users.access_key AS users_access_key, users.secret_key AS users_secret_key, users.is_admin AS users_is_admin \\nFROM users \\nWHERE users.access_key = ? AND users.deleted = ? \\n LIMIT 1 OFFSET 0' ('admin', False)\n\nNote 1: nova.sqlite works fine.\nNote 2: users table does exist in nova database in MySQL.\n\nCheers,\nDave", 
            "date_created": "2011-02-01 19:30:30.147321+00:00", 
            "author": "https://api.launchpad.net/1.0/~smoothsoft"
        }, 
        {
            "content": "Solved it using this answer: https://answers.launchpad.net/nova/+question/134376", 
            "date_created": "2011-02-03 15:24:31.159534+00:00", 
            "author": "https://api.launchpad.net/1.0/~smoothsoft"
        }, 
        {
            "content": "Marking invalid as per OP comment", 
            "date_created": "2011-02-07 09:44:14.628571+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I have faced related problems running Nova Compute using nova.sh script  with mysql db ( Although i have not found the same problem for sqlite). The problem is  \"OperationalError no such table: users ...\"  -- when i run euca-describe-keypair after the installation. Finally, got rid of by making some small changes in the script. \n \nI have added  '--flagfile=$NOVA_DIR/bin/nova.conf'  in the nova.sh for each components in the following example way\n\n    * nova-api\n    * nova-compute\n    * nova-objectstore\n    * nova-volume\n    * nova-scheduler\n\ne.g. \nscreen_it api \"$NOVA_DIR/bin/nova-api  --flagfile=$NOVA_DIR/bin/nova.conf\"\n\n \n\n", 
            "date_created": "2011-02-25 15:42:48.418529+00:00", 
            "author": "https://api.launchpad.net/1.0/~shohel-csdu"
        }, 
        {
            "content": "Looks like nova-api has lost its call to default_flagfile\n\nVish\n\nOn Feb 25, 2011, at 7:42 AM, Shohel wrote:\n\n> I have faced related problems running Nova Compute using nova.sh script  with mysql db ( Although i have not found the same problem for sqlite). The problem is  \"OperationalError no such table: users ...\"  -- when i run euca-describe-keypair after the installation. Finally, got rid of by making some small changes in the script. \n> \n> I have added  '--flagfile=$NOVA_DIR/bin/nova.conf'  in the nova.sh for each components in the following example way\n> \n>    * nova-api\n>    * nova-compute\n>    * nova-objectstore\n>    * nova-volume\n>    * nova-scheduler\n> \n> e.g. \n> screen_it api \"$NOVA_DIR/bin/nova-api  --flagfile=$NOVA_DIR/bin/nova.conf\"\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/711439\n> \n> Title:\n>  euca-add-keypair fails with MySQL chosen in nova.sh\n> \n> Status in OpenStack Compute (Nova):\n>  Invalid\n> \n> Bug description:\n>  Hi:\n>  1) I'm running Ubuntu Server 10.04.1 LTS fresh install on bare metal. \n>  2) I Installed OpenStack via nova.sh script no problem  (Trunk Revision 643)\n>  3) Jump to screen 8 and do: euca-add-keypair mykey > mykey.priv\n> \n>  I get the following stack trace in mykey.priv:\n> \n>  Warning: failed to parse error message from AWS: <unknown>:1:0: syntax error\n>  BotoServerError: 500 Internal Server Error\n>  Traceback (most recent call last):\n>    File \"/usr/lib/pymodules/python2.6/eventlet/wsgi.py\", line 336, in handle_one_response\n>      result = self.application(self.environ, start_response)\n>    File \"/usr/lib/pymodules/python2.6/paste/urlmap.py\", line 203, in __call__\n>      return app(environ, start_response)\n>    File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 60, in __call__\n>      rv = req.get_response(self.application)\n>    File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 918, in get_response\n>      application, catch_exc_info=False)\n>    File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 886, in call_application\n>      app_iter = application(self.environ, start_response)\n>    File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n>      resp = self.call_func(req, *args, **self.kwargs)\n>    File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n>      return self.func(req, *args, **kwargs)\n>    File \"/home/novademo/nova/nova/api/ec2/__init__.py\", line 171, in __call__\n>      req.path)\n>    File \"/home/novademo/nova/nova/auth/manager.py\", line 260, in authenticate\n>      user = self.get_user_from_access_key(access_key)\n>    File \"/home/novademo/nova/nova/auth/manager.py\", line 606, in get_user_from_access_key\n>      user_dict = drv.get_user_from_access_key(access_key)\n>    File \"/home/novademo/nova/nova/auth/dbdriver.py\", line 53, in get_user_from_access_key\n>      user = db.user_get_by_access_key(context.get_admin_context(), access)\n>    File \"/home/novademo/nova/nova/db/api.py\", line 827, in user_get_by_access_key\n>      return IMPL.user_get_by_access_key(context, access_key)\n>    File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 96, in wrapper\n>      return f(*args, **kwargs)\n>    File \"/home/novademo/nova/nova/db/sqlalchemy/api.py\", line 1706, in user_get_by_access_key\n>      filter_by(deleted=can_read_deleted(context)).\\\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1496, in first\n>      ret = list(self[0:1])\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1405, in __getitem__\n>      return list(res)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1565, in __iter__\n>      return self._execute_and_instances(context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/query.py\", line 1570, in _execute_and_instances\n>      mapper=self._mapper_zero_or_none())\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/orm/session.py\", line 735, in execute\n>      clause, params or {})\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1157, in execute\n>      params)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1237, in _execute_clauseelement\n>      return self.__execute_context(context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>      context.parameters[0], context=context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>      context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>      context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>      context.parameters[0], context=context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>      context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>      context)\n>    File \"/usr/lib/pymodules/python2.6/sqlalchemy/engine/default.py\", line 288, in do_execute\n>      cursor.execute(statement, parameters)\n>  OperationalError: (OperationalError) no such table: users u'SELECT users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.deleted_at AS users_deleted_at, users.deleted AS users_deleted, users.id AS users_id, us\n>  ers.name AS users_name, users.access_key AS users_access_key, users.secret_key AS users_secret_key, users.is_admin AS users_is_admin \\nFROM users \\nWHERE users.access_key = ? AND users.deleted = ? \\n LIMIT 1 OFFSET 0' ('admin', False)\n> \n>  Note 1: nova.sqlite works fine.\n>  Note 2: users table does exist in nova database in MySQL.\n> \n>  Cheers,\n>  Dave\n\n", 
            "date_created": "2011-02-25 20:09:48+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ]
}