{
    "status": "Fix Released", 
    "last_updated": "2017-06-16 12:14:01.415911+00:00", 
    "description": "A debian image loaded in and used in Kilo is unable to be used in liberty.\n\nnicira@htb-1n-eng-dhcp8:~$ nova image-show  debian-2.6.32-i686 \n+-----------------------------+--------------------------------------+\n| Property                    | Value                                |\n+-----------------------------+--------------------------------------+\n| OS-EXT-IMG-SIZE:size        | 1073741824                           |\n| created                     | 2015-10-15T11:19:33Z                 |\n| id                          | 34d8aa13-fbad-44ad-90c9-4d259abb0a2a |\n| metadata hw_vif_model       | e1000                                |\n| metadata vmware_adaptertype |                                      |\n| metadata vmware_disktype    | preallocated                         |\n| minDisk                     | 0                                    |\n| minRam                      | 0                                    |\n| name                        | debian-2.6.32-i686                   |\n| progress                    | 100                                  |\n| status                      | ACTIVE                               |\n| updated                     | 2015-10-15T11:19:49Z                 |\n+-----------------------------+--------------------------------------+\n\nThe trace from the API is:\n\n2015-10-15 11:25:48.118 ERROR nova.api.openstack.extensions [req-ca854e8c-68fe-47f6-9ce0-c2a5083b417d demo demo] Unexpected exception in API method\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 602, in create\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     **create_kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/hooks.py\", line 149, in inner\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 1562, in create\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 1162, in _create_instance\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     auto_disk_config, reservation_id, max_count)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 921, in _validate_and_build_base_options\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     image_meta = objects.ImageMeta.from_dict(boot_meta)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 107, in from_dict\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     image_meta.get(\"properties\", {}))\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 459, in from_dict\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     obj._set_attr_from_legacy_names(image_props)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 397, in _set_attr_from_legacy_names\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     setattr(self, \"hw_scsi_model\", vmware_adaptertype)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 71, in setter\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     field_value = field.coerce(self, name, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 189, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return self._type.coerce(obj, attr, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/fields.py\", line 272, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return super(SCSIModel, self).coerce(obj, attr, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 284, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     raise ValueError(msg)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions ValueError: Field value  is invalid\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions \n\n\nThe reason for this is that the default adapter type is set as \"\"", 
    "tags": [
        "in-stable-liberty", 
        "vmware"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1506465", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1506465, 
    "index": 1831, 
    "created": "2015-10-15 12:41:31.873516+00:00", 
    "title": "VMware: unable to deploy debian image with liberty", 
    "comments": [
        {
            "content": "A debian image loaded in and used in Kilo is unable to be used in liberty.\n\nnicira@htb-1n-eng-dhcp8:~$ nova image-show  debian-2.6.32-i686 \n+-----------------------------+--------------------------------------+\n| Property                    | Value                                |\n+-----------------------------+--------------------------------------+\n| OS-EXT-IMG-SIZE:size        | 1073741824                           |\n| created                     | 2015-10-15T11:19:33Z                 |\n| id                          | 34d8aa13-fbad-44ad-90c9-4d259abb0a2a |\n| metadata hw_vif_model       | e1000                                |\n| metadata vmware_adaptertype |                                      |\n| metadata vmware_disktype    | preallocated                         |\n| minDisk                     | 0                                    |\n| minRam                      | 0                                    |\n| name                        | debian-2.6.32-i686                   |\n| progress                    | 100                                  |\n| status                      | ACTIVE                               |\n| updated                     | 2015-10-15T11:19:49Z                 |\n+-----------------------------+--------------------------------------+\n\nThe trace from the API is:\n\n2015-10-15 11:25:48.118 ERROR nova.api.openstack.extensions [req-ca854e8c-68fe-47f6-9ce0-c2a5083b417d demo demo] Unexpected exception in API method\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 602, in create\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     **create_kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/hooks.py\", line 149, in inner\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 1562, in create\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 1162, in _create_instance\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     auto_disk_config, reservation_id, max_count)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 921, in _validate_and_build_base_options\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     image_meta = objects.ImageMeta.from_dict(boot_meta)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 107, in from_dict\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     image_meta.get(\"properties\", {}))\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 459, in from_dict\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     obj._set_attr_from_legacy_names(image_props)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/image_meta.py\", line 397, in _set_attr_from_legacy_names\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     setattr(self, \"hw_scsi_model\", vmware_adaptertype)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 71, in setter\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     field_value = field.coerce(self, name, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 189, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return self._type.coerce(obj, attr, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/fields.py\", line 272, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     return super(SCSIModel, self).coerce(obj, attr, value)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/fields.py\", line 284, in coerce\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions     raise ValueError(msg)\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions ValueError: Field value  is invalid\n2015-10-15 11:25:48.118 TRACE nova.api.openstack.extensions \n\n\nThe reason for this is that the default adapter type is set as \"\"", 
            "date_created": "2015-10-15 12:41:31.873516+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/235303", 
            "date_created": "2015-10-15 12:45:36.413215+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/235303\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=70f4299450a260465102f879758f79160223dc29\nSubmitter: Jenkins\nBranch:    master\n\ncommit 70f4299450a260465102f879758f79160223dc29\nAuthor: Gary Kotton <email address hidden>\nDate:   Thu Oct 15 05:42:59 2015 -0700\n\n    Image meta: treat legacy vmware adapter type values\n    \n    Ensure that legacy metadata vmware_adaptertype values are\n    treated correctly. This value could have been set as \"\" and there\n    are existing deployments that use that.\n    \n    Change-Id: I28e9ca9075f33ff19855408af02bc454780e7c79\n    Closes-bug: #1506465\n", 
            "date_created": "2015-10-20 13:52:30.944565+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/liberty\nReview: https://review.openstack.org/237752", 
            "date_created": "2015-10-20 19:22:55.450440+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Only affects one virt driver so marking as High rather than Critical.", 
            "date_created": "2015-11-06 15:29:29.930185+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/237752\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=50db2a54e950c6b58495a538c0f18503e348de42\nSubmitter: Jenkins\nBranch:    stable/liberty\n\ncommit 50db2a54e950c6b58495a538c0f18503e348de42\nAuthor: Gary Kotton <email address hidden>\nDate:   Thu Oct 15 05:42:59 2015 -0700\n\n    Image meta: treat legacy vmware adapter type values\n    \n    Ensure that legacy metadata vmware_adaptertype values are\n    treated correctly. This value could have been set as \"\" and there\n    are existing deployments that use that.\n    \n    Change-Id: I28e9ca9075f33ff19855408af02bc454780e7c79\n    Closes-bug: #1506465\n    (cherry picked from commit 70f4299450a260465102f879758f79160223dc29)\n", 
            "date_created": "2015-11-08 13:57:27.139850+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}