{
    "status": "Invalid", 
    "last_updated": "2016-02-18 12:28:42.081234+00:00", 
    "description": "I'm using OpenStack Juno\n$ rpm -qa |grep nova\npython-nova-2014.2.2-1.el7.noarch\nopenstack-nova-scheduler-2014.2.2-1.el7.noarch\npython-novaclient-2.20.0-1.el7.centos.noarch\nopenstack-nova-common-2014.2.2-1.el7.noarch\nopenstack-nova-api-2014.2.2-1.el7.noarch\nopenstack-nova-cert-2014.2.2-1.el7.noarch\nopenstack-nova-console-2014.2.2-1.el7.noarch\nopenstack-nova-conductor-2014.2.2-1.el7.noarch\nopenstack-nova-novncproxy-2014.2.2-1.el7.noarch\n\nThere has two problems\nProblem1:\nToken not expired, but somehow deleted which cause /usr/lib/python2.7/site-packages/neutronclient/client.py:do_request() failed with exceptions.Unauthorized\n\n\u00a0\u00a0\u00a0\u00a0def do_request(self, url, method, **kwargs):\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.authenticate_and_fetch_endpoint_url()\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0# Perform the request once. If we get a 401 back then it\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0# might be because the auth token expired, so try to\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0# re-authenticate and try again. If it still fails, bail.\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0try:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0kwargs.setdefault('headers', {})\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if self.auth_token is None:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.auth_token = \"\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0kwargs['headers']['X-Auth-Token'] = self.auth_token\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0resp, body = self._cs_request(self.endpoint_url + url, method,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0**kwargs)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return resp, body\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0except exceptions.Unauthorized:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.authenticate()\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0kwargs.setdefault('headers', {})\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0kwargs['headers']['X-Auth-Token'] = self.auth_token\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0resp, body = self._cs_request(\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0self.endpoint_url + url, method, **kwargs)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return resp, body\n\nProblem2:\nIn except branch, self.authenticate() failed with exceptions.Unauthorized\nwhich is a duplicate of https://bugs.launchpad.net/nova/+bug/1418529\nBut there has no fix for juno.\n\nHere is log found from nova-compute\n########### Log for problem1\n2016-01-07 16:08:42.396 1334 DEBUG neutronclient.client [req-7d95c82d-b26a-4584-851b-95de5c99f17c ]\nREQ: curl -i https://hf1-neutron.qa.webex.com:443/v2.0/extensions.json -X GET -H \"X-Auth-Token: 119b7628442f4e19b4bd1041d05c2afa\" -H \"User-Agent: python-neutronclient\"\n\u00a0http_log_req /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:140\n2016-01-07 16:08:42.473 1334 DEBUG neutronclient.client [req-7d95c82d-b26a-4584-851b-95de5c99f17c ] RESP:401 {'content-length': '23', 'www-authenticate': \"Keystone uri='https://hf1-keystone-srv.qa.webex.com:443/v2.0'\", 'connection': 'keep-alive', 'date': 'Thu, 07 Jan 2016 16:08:42 GMT', 'content-type': 'text/plain', 'x-openstack-request-id': 'req-36035958-9e5d-44db-a12a-0ed0764a7d0e'} Authentication required\n\u00a0http_log_resp /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:149\n\n########### Log for problem2\n2016-01-07 16:08:42.474 1334 ERROR nova.compute.manager [req-7d95c82d-b26a-4584-851b-95de5c99f17c None] [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] Setting instance vm_state to ERROR\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] Traceback (most recent call last):\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3904, in finish_resize\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     disk_info, image)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3843, in _finish_resize\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     migration_p)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 1241, in migrate_instance_finish\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     if not self._has_port_binding_extension(context, refresh_cache=True):\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 471, in _has_port_binding_extension\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self._refresh_neutron_extensions_cache(context)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 463, in _refresh_neutron_extensions_cache\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     extensions_list = neutron.list_extensions()['extensions']\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 98, in with_params\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     ret = self.function(instance, *args, **kwargs)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 300, in list_extensions\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     return self.get(self.extensions_path, params=_params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1320, in get\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     headers=headers, params=params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1297, in retry_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     headers=headers, params=params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1240, in do_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     content_type=self.content_type())\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 183, in do_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self.authenticate()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 247, in authenticate\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self._authenticate_keystone()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 220, in _authenticate_keystone\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     raise exceptions.NoAuthURLProvided()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] NoAuthURLProvided: auth_url was not provided to the Neutron client\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]\n\nHere is the log found from keystone\n########## Log for problem1\n2016-01-07 05:16:33.697 21392 DEBUG keystone.common.wsgi [-] arg_dict: {'token_id': u'119b7628442f4e19b4bd1041d05c2afa'} __call__ /usr/lib/python2.7/site-packages/keystone/common/wsgi.py:191\n2016-01-07 05:16:33.698 21392 DEBUG keystone.common.controller [-] RBAC: Authorizing identity:validate_token(token_id=119b7628442f4e19b4bd1041d05c2afa) _build_policy_check_credentials /usr/lib/python2.7/site-packages/keystone/common/controller.py:55\n2016-01-07 05:16:33.721 21392 INFO eventlet.wsgi.server [-] 10.224.241.140,10.224.236.93 - - [07/Jan/2016 05:16:33] \"GET /v2.0/tokens/119b7628442f4e19b4bd1041d05c2afa HTTP/1.1\" 200 2157 0.040029\n2016-01-07 05:22:00.632 21393 DEBUG keystone.common.wsgi [-] arg_dict: {'token_id': u'119b7628442f4e19b4bd1041d05c2afa'} __call__ /usr/lib/python2.7/site-packages/keystone/common/wsgi.py:191\n2016-01-07 05:22:00.633 21393 DEBUG keystone.common.controller [-] RBAC: Authorizing identity:validate_token(token_id=119b7628442f4e19b4bd1041d05c2afa) _build_policy_check_credentials /usr/lib/python2.7/site-packages/keystone/common/controller.py:55\n2016-01-07 05:22:00.648 21393 INFO eventlet.wsgi.server [-] 10.224.241.139,10.224.236.93 - - [07/Jan/2016 05:22:00] \"GET /v2.0/tokens/119b7628442f4e19b4bd1041d05c2afa HTTP/1.1\" 200 2157 0.034250\n2016-01-07 06:19:05.034 21410 DEBUG keystone.common.wsgi [-] arg_dict: {'token_id': u'119b7628442f4e19b4bd1041d05c2afa'} __call__ /usr/lib/python2.7/site-packages/keystone/common/wsgi.py:191\n\n########## I think this part is the key, but I do not understand where and why need to delete this token before it expire\n2016-01-07 06:19:05.069 21410 INFO eventlet.wsgi.server [-] 10.224.241.139,10.224.236.93 - - [07/Jan/2016 06:19:05] \"DELETE /v2.0/tokens/119b7628442f4e19b4bd1041d05c2afa HTTP/1.1\" 204 127 0.049150\n\nAnd here is found token from database\n########## Log for problem1\n| id                                                                         | expires                            | extra  | valid | trust_id | user_id                          |\n| 119b7628442f4e19b4bd1041d05c2afa | 2016-01-08 04:47:23 | {\"bind\": null, \"token_data\": {\"access\": {\"token\": {\"issued_at\": \"2016-01-07T04:48:10.638860\", \"expires\": \"2016-01-08T04:47:23Z\", ...  |     0 | NULL     | e35c77abe1384bf2a1f50363d870b44f |", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1534066", 
    "owner": "None", 
    "id": 1534066, 
    "index": 5963, 
    "created": "2016-01-14 09:15:18.317257+00:00", 
    "title": "Resize failed when instance get large", 
    "comments": [
        {
            "content": "I'm using OpenStack Juno rel\n$ rpm -qa |grep nova\npython-nova-2014.2.2-1.el7.noarch\nopenstack-nova-scheduler-2014.2.2-1.el7.noarch\npython-novaclient-2.20.0-1.el7.centos.noarch\nopenstack-nova-common-2014.2.2-1.el7.noarch\nopenstack-nova-api-2014.2.2-1.el7.noarch\nopenstack-nova-cert-2014.2.2-1.el7.noarch\nopenstack-nova-console-2014.2.2-1.el7.noarch\nopenstack-nova-conductor-2014.2.2-1.el7.noarch\nopenstack-nova-novncproxy-2014.2.2-1.el7.noarch\n\nDescribe about the problem\n1. At first, /usr/lib/python2.7/site-packages/neutronclient/client.py:do_request() is failed with exceptions.Unauthorized\n    -> Token is not expired, but after checking keystone's log, it is somehow deleted\n2. When try to do authenticate(), it's failed with exceptions.NoAuthURLProvided()\n\n\n\nHere is log found from nova-compute\n\n2016-01-07 16:08:42.396 1334 DEBUG neutronclient.client [req-7d95c82d-b26a-4584-851b-95de5c99f17c ]\nREQ: curl -i https://hf1-neutron.qa.webex.com:443/v2.0/extensions.json -X GET -H \"X-Auth-Token: 119b7628442f4e19b4bd1041d05c2afa\" -H \"User-Agent: python-neutronclient\"\n http_log_req /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:140\n2016-01-07 16:08:42.473 1334 DEBUG neutronclient.client [req-7d95c82d-b26a-4584-851b-95de5c99f17c ] RESP:401 {'content-length': '23', 'www-authenticate': \"Keystone uri='https://hf1-keystone-srv.qa.webex.com:443/v2.0'\", 'connection': 'keep-alive', 'date': 'Thu, 07 Jan 2016 16:08:42 GMT', 'content-type': 'text/plain', 'x-openstack-request-id': 'req-36035958-9e5d-44db-a12a-0ed0764a7d0e'} Authentication required\n http_log_resp /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:149\n2016-01-07 16:08:42.474 1334 ERROR nova.compute.manager [req-7d95c82d-b26a-4584-851b-95de5c99f17c None] [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] Setting instance vm_state to ERROR\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] Traceback (most recent call last):\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3904, in finish_resize\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     disk_info, image)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3843, in _finish_resize\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     migration_p)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 1241, in migrate_instance_finish\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     if not self._has_port_binding_extension(context, refresh_cache=True):\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 471, in _has_port_binding_extension\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self._refresh_neutron_extensions_cache(context)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 463, in _refresh_neutron_extensions_cache\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     extensions_list = neutron.list_extensions()['extensions']\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 98, in with_params\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     ret = self.function(instance, *args, **kwargs)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 300, in list_extensions\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     return self.get(self.extensions_path, params=_params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1320, in get\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     headers=headers, params=params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1297, in retry_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     headers=headers, params=params)\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 1240, in do_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     content_type=self.content_type())\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 183, in do_request\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self.authenticate()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 247, in authenticate\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     self._authenticate_keystone()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 220, in _authenticate_keystone\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]     raise exceptions.NoAuthURLProvided()\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127] NoAuthURLProvided: auth_url was not provided to the Neutron client\n2016-01-07 16:08:42.474 1334 TRACE nova.compute.manager [instance: fc8d35d5-874d-4c09-9f23-9bf7587b2127]\n\n\n\nHere is the log found from keystone\n\n# zcat /var/log/keystone/keystone.log-20160110.gz | grep 119b7628442f4e19b4bd1041d05c2afa\n2016-01-07 04:48:13.474 20083 DEBUG keystone.common.wsgi [-] arg_dict: {'token_id': u'119b7628442f4e19b4bd1041d05c2afa'} __call__ /usr/lib/python2.7/site-packages/keystone/common/wsgi.py:191\n2016-01-07 04:48:13.475 20083 DEBUG keystone.common.controller [-] RBAC: Authorizing identity:validate_token(token_id=119b7628442f4e19b4bd1041d05c2afa) _build_policy_check_credentials /usr/lib/python2.7/site-packages/keystone/common/controller.py:55\n2016-01-07 04:48:13.485 20083 INFO eventlet.wsgi.server [-] 10.224.241.140,10.224.236.93 - - [07/Jan/2016 04:48:13] \"GET /v2.0/tokens/119b7628442f4e19b4bd1041d05c2afa HTTP/1.1\" 200 2157 0.023179\n2016-01-07 05:27:10.502 20083 DEBUG keystone.common.wsgi [-] arg_dict: {'token_id': u'119b7628442f4e19b4bd1041d05c2afa'} __call__ /usr/lib/python2.7/site-packages/keystone/common/wsgi.py:191\n2016-01-07 05:27:10.503 20083 DEBUG keystone.common.controller [-] RBAC: Authorizing identity:validate_token(token_id=119b7628442f4e19b4bd1041d05c2afa) _build_policy_check_credentials /usr/lib/python2.7/site-packages/keystone/common/controller.py:55\n2016-01-07 05:27:10.513 20083 INFO eventlet.wsgi.server [-] 10.224.241.141,10.224.236.93 - - [07/Jan/2016 05:27:10] \"GET /v2.0/tokens/119b7628442f4e19b4bd1041d05c2afa HTTP/1.1\" 200 2157 0.022409\n\n\nAnd here is found token from databse\n| id                                                                         | expires                            | extra  | valid | trust_id | user_id                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \n| 119b7628442f4e19b4bd1041d05c2afa | 2016-01-08 04:47:23 | {\"bind\": null, \"token_data\": {\"access\": {\"token\": {\"issued_at\": \"2016-01-07T04:48:10.638860\", \"expires\": \"2016-01-08T04:47:23Z\", ...  |     0 | NULL     | e35c77abe1384bf2a1f50363d870b44f |", 
            "date_created": "2016-01-14 09:15:18.317257+00:00", 
            "author": "https://api.launchpad.net/1.0/~feli5"
        }, 
        {
            "content": "@leehom:\n\nBug skimming result\n===================\nJuno has reached end of life (EOL) [1] and won't get any updates\nanymore. That's why I close this bug as \"Invalid\". \n\nIf you observe the issue(s) in one or more of the supported releases \n(kilo, liberty, mitaka=master), then reopen the bug report and provide\nmore information with template [2] to allow an analysis of the issue.\n\nIf you have questions, I'm available in the IRC channel #openstack-nova\nunder the name \"markus_z\".\n\nReferences\n==========\n[1] http://docs.openstack.org/releases/\n[2] https://wiki.openstack.org/wiki/Nova/BugsTeam/BugReportTemplate", 
            "date_created": "2016-01-22 12:18:30.196028+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "We are hitting this in our Kilo environment as well.  We were also trying to resize an instance (disk sized around 200 GB)\n\nIncreasing the keystone token expiry is one way out, but not a clean solution. \n\n****************************************************\n2016-02-15 14:07:49.038 31213 INFO nova.compute.manager [req-55880ad0-7132-40d7-ace4-506e60dcdd61- - -] [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9] Migrating\n2016-02-15 16:17:44.579 31213 ERROR nova.compute.manager [req-55880ad0-7132-40d7-ace4-506e60dcdd61] [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9] Setting instance vm_state to ERROR\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9] Traceback (most recent call last):\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4168, in finish_resize\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     disk_info, image)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4106, in _finish_resize\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     migration_p)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 1392, in migrate_instance_finish\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     migration['dest_compute'])\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 1684, in _update_port_binding_for_instance\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     if not self._has_port_binding_extension(context, refresh_cache=True):\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 607, in _has_port_binding_extension\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     self._refresh_neutron_extensions_cache(context, neutron=neutron)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 599, in _refresh_neutron_extensions_cache\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     extensions_list = neutron.list_extensions()['extensions']\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 99, in with_params\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     ret = self.function(instance, *args, **kwargs)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 485, in list_extensions\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     return self.get(self.extensions_path, params=_params)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 290, in get\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     headers=headers, params=params)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 267, in retry_request\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     headers=headers, params=params)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 208, in do_request\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     self._handle_fault_response(status_code, replybody)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 182, in _handle_fault_response\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     exception_handler_v20(status_code, des_error_body)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 80, in exception_handler_v20\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9]     message=message)\n2016-02-15 16:17:44.579 31213 TRACE nova.compute.manager [instance: 8df847bc-cdf7-4e1d-8675-3f78c5448cb9] NeutronClientException: Authentication required", 
            "date_created": "2016-02-18 10:00:03.894330+00:00", 
            "author": "https://api.launchpad.net/1.0/~sudhakar-gariganti"
        }, 
        {
            "content": "Hi Sudhakar, Have you check the status of token in database? In my situation, token is not expired, but somehow be deleted.", 
            "date_created": "2016-02-18 12:28:41.433063+00:00", 
            "author": "https://api.launchpad.net/1.0/~feli5"
        }
    ]
}