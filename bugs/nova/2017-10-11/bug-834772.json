{
    "status": "Fix Released", 
    "last_updated": "2011-09-22 12:59:14.429889+00:00", 
    "description": "Unit tests now fail when run on Python 2.6.x because of the use of unittest.assertIn, which was added in Python 2.7\n\nOS version: Ubuntu 10.04 (Lucid)\nPython version: 2.6.5\nnova revision: 1499\n\n(Tested under virtualenv)\n\n======================================================================\nERROR: test_destroy_instance (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 240, in test_destroy_instance\n    self.assertIn(instance_ref['name'],\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_ajax_console (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 324, in test_get_ajax_console\n    self.assertIn('token', ajax_console)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_console_pool_info (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 344, in test_get_console_pool_info\n    self.assertIn('address', console_pool)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_host_stats (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 448, in test_get_host_stats\n    self._check_host_status_fields(host_status)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 425, in _check_host_status_fields\n    self.assertIn('host_name-description', host_status)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_info (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 262, in test_get_info\n    self.assertIn('state', info)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_vnc_console (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 334, in test_get_vnc_console\n    self.assertIn('token', vnc_console)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_spawn (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 81, in test_spawn\n    self.assertIn(instance_ref['name'], domains)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_update_host_status (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 443, in test_update_host_status\n    self._check_host_status_fields(host_status)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 425, in _check_host_status_fields\n    self.assertIn('host_name-description', host_status)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/834772", 
    "owner": "https://api.launchpad.net/1.0/~throughnothing", 
    "id": 834772, 
    "index": 2256, 
    "created": "2011-08-26 14:43:54.556925+00:00", 
    "title": "Unit tests fail on Python 2.6", 
    "comments": [
        {
            "content": "Unit tests now fail when run on Python 2.6.x because of the use of unittest.assertIn, which was added in Python 2.7\n\nOS version: Ubuntu 10.04 (Lucid)\nPython version: 2.6.5\nnova revision: 1499\n\n(Tested under virtualenv)\n\n======================================================================\nERROR: test_destroy_instance (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 240, in test_destroy_instance\n    self.assertIn(instance_ref['name'],\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_ajax_console (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 324, in test_get_ajax_console\n    self.assertIn('token', ajax_console)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_console_pool_info (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 344, in test_get_console_pool_info\n    self.assertIn('address', console_pool)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_host_stats (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 448, in test_get_host_stats\n    self._check_host_status_fields(host_status)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 425, in _check_host_status_fields\n    self.assertIn('host_name-description', host_status)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_info (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 262, in test_get_info\n    self.assertIn('state', info)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_get_vnc_console (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 334, in test_get_vnc_console\n    self.assertIn('token', vnc_console)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_spawn (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 81, in test_spawn\n    self.assertIn(instance_ref['name'], domains)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'\n\n======================================================================\nERROR: test_update_host_status (nova.tests.test_virt_drivers.FakeConnectionTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 443, in test_update_host_status\n    self._check_host_status_fields(host_status)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 43, in wrapped_func\n    return f(self, *args, **kwargs)\n  File \"/var/lib/hudson/jobs/nova-trunk/workspace/nova/tests/test_virt_drivers.py\", line 425, in _check_host_status_fields\n    self.assertIn('host_name-description', host_status)\nAttributeError: 'FakeConnectionTestCase' object has no attribute 'assertIn'", 
            "date_created": "2011-08-26 14:43:54.556925+00:00", 
            "author": "https://api.launchpad.net/1.0/~lorinh"
        }, 
        {
            "content": "I see the 2 implementations of this fix involve unittest2.  I'm going ahead and merge propping this:\n\nhttps://code.launchpad.net/~cbehrens/nova/assert-in-fixes/+merge/73208\n\nwhich is a smaller change.  I feel a switch to unittest2 should be a separate proposal, if we wish to do that.\n\nI'll let people fight it out for what they want.  No offense taken if my merge prop is not chosen. :)", 
            "date_created": "2011-08-29 07:39:05.249141+00:00", 
            "author": "https://api.launchpad.net/1.0/~cbehrens"
        }
    ]
}