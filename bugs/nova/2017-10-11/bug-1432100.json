{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:25:19.124511+00:00", 
    "description": "Use admin user create new network called 'net1' \n\nalex@hp-pc:~/code/devstack$ source ./openrc admin admin\n\nalex@hp-pc:~/code/devstack$ nova network-list\n+--------------------------------------+---------+-------------+\n| ID                                   | Label   | Cidr        |\n+--------------------------------------+---------+-------------+\n| 5fed3168-0ae8-4f2c-904c-dd750698fbca | private | 10.0.0.0/24 |\n+--------------------------------------+---------+-------------+\n\nalex@hp-pc:~/code/devstack$ nova network-create net1 --fixed-range-v4 20.0.0.0/24\n\nalex@hp-pc:~/code/devstack$ nova network-list\n+--------------------------------------+---------+-------------+\n| ID                                   | Label   | Cidr        |\n+--------------------------------------+---------+-------------+\n| 5fed3168-0ae8-4f2c-904c-dd750698fbca | private | 10.0.0.0/24 |\n| e6b5a972-be01-4f54-acfb-eae53ae67cec | net1    | 20.0.0.0/24 |\n+--------------------------------------+---------+-------------+\n\n\nalex@hp-pc:~/code/devstack$ nova network-show net1\n\n+---------------------+--------------------------------------+\n| Property            | Value                                |\n+---------------------+--------------------------------------+\n| bridge              | br101                                |\n| bridge_interface    | eth0                                 |\n| broadcast           | 20.0.0.255                           |\n| cidr                | 20.0.0.0/24                          |\n| cidr_v6             | -                                    |\n| created_at          | 2015-03-14T04:20:22.000000           |\n| deleted             | False                                |\n| deleted_at          | -                                    |\n| dhcp_server         | 20.0.0.1                             |\n| dhcp_start          | 20.0.0.3                             |\n| dns1                | 8.8.4.4                              |\n| dns2                | -                                    |\n| enable_dhcp         | True                                 |\n| gateway             | 20.0.0.1                             |\n| gateway_v6          | -                                    |\n| host                | -                                    |\n| id                  | e6b5a972-be01-4f54-acfb-eae53ae67cec |\n| injected            | False                                |\n| label               | net1                                 |\n| mtu                 | -                                    |\n| multi_host          | False                                |\n| netmask             | 255.255.255.0                        |\n| netmask_v6          | -                                    |\n| priority            | -                                    |\n| project_id          | -                                    |\n| rxtx_base           | -                                    |\n| share_address       | False                                |\n| updated_at          | -                                    |\n| vlan                | 101                                  |\n| vpn_private_address | 20.0.0.2                             |\n| vpn_public_address  | -                                    |\n| vpn_public_port     | 1001                                 |\n+---------------------+--------------------------------------+\n\n\nSwitch to non-admin user 'demo',  then the demo user can't see the net1, but demo user can delete it by id directly.\n\n\nalex@hp-pc:~/code/devstack$ source ./openrc demo demo\n\nalex@hp-pc:~/code/devstack$ nova tenant-network-list\n\n+----+-------+------+\n| ID | Label | CIDR |\n+----+-------+------+\n+----+-------+------+\n\n\nalex@hp-pc:~/code/devstack$ nova tenant-network-delete e6b5a972-be01-4f54-acfb-eae53ae67cec", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1432100", 
    "owner": "https://api.launchpad.net/1.0/~xuhj", 
    "id": 1432100, 
    "index": 344, 
    "created": "2015-03-14 04:18:41.599022+00:00", 
    "title": "non-admin user can delete a network without any project assoicate with nova-network's Vlan manager", 
    "comments": [
        {
            "content": "Use admin user create new network called 'net1' \n\nalex@hp-pc:~/code/devstack$ source ./openrc admin admin\n\nalex@hp-pc:~/code/devstack$ nova network-list\n+--------------------------------------+---------+-------------+\n| ID                                   | Label   | Cidr        |\n+--------------------------------------+---------+-------------+\n| 5fed3168-0ae8-4f2c-904c-dd750698fbca | private | 10.0.0.0/24 |\n+--------------------------------------+---------+-------------+\n\nalex@hp-pc:~/code/devstack$ nova network-create net1 --fixed-range-v4 20.0.0.0/24\n\nalex@hp-pc:~/code/devstack$ nova network-list\n+--------------------------------------+---------+-------------+\n| ID                                   | Label   | Cidr        |\n+--------------------------------------+---------+-------------+\n| 5fed3168-0ae8-4f2c-904c-dd750698fbca | private | 10.0.0.0/24 |\n| e6b5a972-be01-4f54-acfb-eae53ae67cec | net1    | 20.0.0.0/24 |\n+--------------------------------------+---------+-------------+\n\n\nalex@hp-pc:~/code/devstack$ nova network-show net1\n\n+---------------------+--------------------------------------+\n| Property            | Value                                |\n+---------------------+--------------------------------------+\n| bridge              | br101                                |\n| bridge_interface    | eth0                                 |\n| broadcast           | 20.0.0.255                           |\n| cidr                | 20.0.0.0/24                          |\n| cidr_v6             | -                                    |\n| created_at          | 2015-03-14T04:20:22.000000           |\n| deleted             | False                                |\n| deleted_at          | -                                    |\n| dhcp_server         | 20.0.0.1                             |\n| dhcp_start          | 20.0.0.3                             |\n| dns1                | 8.8.4.4                              |\n| dns2                | -                                    |\n| enable_dhcp         | True                                 |\n| gateway             | 20.0.0.1                             |\n| gateway_v6          | -                                    |\n| host                | -                                    |\n| id                  | e6b5a972-be01-4f54-acfb-eae53ae67cec |\n| injected            | False                                |\n| label               | net1                                 |\n| mtu                 | -                                    |\n| multi_host          | False                                |\n| netmask             | 255.255.255.0                        |\n| netmask_v6          | -                                    |\n| priority            | -                                    |\n| project_id          | -                                    |\n| rxtx_base           | -                                    |\n| share_address       | False                                |\n| updated_at          | -                                    |\n| vlan                | 101                                  |\n| vpn_private_address | 20.0.0.2                             |\n| vpn_public_address  | -                                    |\n| vpn_public_port     | 1001                                 |\n+---------------------+--------------------------------------+\n\n\nSwitch to non-admin user 'demo',  then the demo user can't see the net1, but demo user can delete it by id directly.\n\n\nalex@hp-pc:~/code/devstack$ source ./openrc demo demo\n\nalex@hp-pc:~/code/devstack$ nova tenant-network-list\n\n+----+-------+------+\n| ID | Label | CIDR |\n+----+-------+------+\n+----+-------+------+\n\n\nalex@hp-pc:~/code/devstack$ nova tenant-network-delete e6b5a972-be01-4f54-acfb-eae53ae67cec", 
            "date_created": "2015-03-14 04:18:41.599022+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/164551", 
            "date_created": "2015-03-16 01:16:00.884124+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/164551\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=cf6b9436533238e3a43e01d260639f42e48b7590\nSubmitter: Jenkins\nBranch:    master\n\ncommit cf6b9436533238e3a43e01d260639f42e48b7590\nAuthor: He Jie Xu <email address hidden>\nDate:   Mon Mar 16 09:09:03 2015 +0800\n\n    Remove the elevated context when get network\n    \n    The os-tenant-networks API is called by non-admin user. But currently\n    the show and delete method can act on the network which didn't belong\n    to the request user. So remove the elevated context, then db call\n    will only return project-only networks for non-admin user, and returns\n    all networks for admin user.\n    \n    Change-Id: I77c3a1d45c85509ca9bd204fcd0496bc4f4411da\n    Closes-Bug: #1432100\n", 
            "date_created": "2015-03-19 07:35:04.174253+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}