{
    "status": "Invalid", 
    "last_updated": "2014-03-03 10:52:05.365884+00:00", 
    "description": "I quite investigating it.\nThe problem seams to be related to\nnova/virt/libvirt/volume.py\nfunction _mount_glusterfs\nprepares a command to locally mount a glusterfs volume with this line of code:\ngluster_cmd.extend([glusterfs_share, mount_path, ' '])\nthe trailing white spaces causes mount error on my system.\n\nUsing the original code i get:\n\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 177, in execute\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp     return processutils.execute(*cmd, **kwargs)\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/processutils.py\", line 178, in execute\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp     cmd=' '.join(cmd))\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp ProcessExecutionError: Unexpected error while running command.\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Command: sudo nova-rootwrap /etc/nova/rootwrap.conf mount -t glusterfs 10.101.101.120:v_cinder /var/lib/cinder/mnt/8bf7d2294d80777975e85e1905255721\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Exit code: 1\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Stdout: ''\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Stderr: \"Usage: mount -V                 : print version\\n       mount -h                 : print this help\\n       mount                    : list mounted filesystems\\n       mount -l                 : idem, including volume labels\\nSo far the informational part. Next the mounting.\\nThe command is `mount [-t fstype] something somewhere'.\\nDetails found in /etc/fstab may be omitted.\\n       mount -a [-t|-O] ...     : mount all stuff from /etc/fstab\\n       mount device             : mount device at the known place\\n       mount directory          : mount known device here\\n       mount -t type dev dir    : ordinary mount command\\nNote that one does not really mount a device, one mounts\\na filesystem (of the given type) found on the device.\\nOne can also mount an already visible directory tree elsewhere:\\n       mount --bind olddir newdir\\nor move a subtree:\\n       mount --move olddir newdir\\nOne can change the type of mount containing the directory dir:\\n       mount --make-shared dir\\n       mount --make-slave dir\\n       mount --make-private dir\\n       mount --make-unbindable dir\\nOne can change the type of all the mounts in a mount subtree\\ncontaining the directory dir:\\n       mount --make-rshared dir\\n       mount --make-rslave dir\\n       mount --make-rprivate dir\\n       mount --make-runbindable dir\\nA device can be given by name, say /dev/hda1 or /dev/cdrom,\\nor by label, using  -L label  or by uuid, using  -U uuid .\\nOther options: [-nfFrsvw] [-o options] [-p passwdfd].\\nFor many more details, say  man 8 mount .\\n\"\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp\n\n\nSimply replacing this line\ngluster_cmd.extend([glusterfs_share, mount_path, ' '])\nwith this\ngluster_cmd.extend([glusterfs_share, mount_path])\nit works correctly and it mount and attach my cinder glouster volume\n\nI don't understand why a trailing space can cause this kind of problem.\n\nI'm using havana vanilla distribution on CENTOS 6.4\n\nciao", 
    "tags": [
        "attach", 
        "centos", 
        "cider", 
        "gluster", 
        "glusterfs", 
        "havana", 
        "libvirt", 
        "mount", 
        "nova"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1254007", 
    "owner": "None", 
    "id": 1254007, 
    "index": 3714, 
    "created": "2013-11-22 12:42:17.679905+00:00", 
    "title": "Error attaching a cinder glousterfs volume with libvirt", 
    "comments": [
        {
            "content": "I quite investigating it.\nThe problem seams to be related to\nnova/virt/libvirt/volume.py\nfunction _mount_glusterfs\nprepares a command to locally mount a glusterfs volume with this line of code:\ngluster_cmd.extend([glusterfs_share, mount_path, ' '])\nthe trailing white spaces causes mount error on my system.\n\nUsing the original code i get:\n\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 177, in execute\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp     return processutils.execute(*cmd, **kwargs)\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/processutils.py\", line 178, in execute\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp     cmd=' '.join(cmd))\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp ProcessExecutionError: Unexpected error while running command.\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Command: sudo nova-rootwrap /etc/nova/rootwrap.conf mount -t glusterfs 10.101.101.120:v_cinder /var/lib/cinder/mnt/8bf7d2294d80777975e85e1905255721\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Exit code: 1\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Stdout: ''\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp Stderr: \"Usage: mount -V                 : print version\\n       mount -h                 : print this help\\n       mount                    : list mounted filesystems\\n       mount -l                 : idem, including volume labels\\nSo far the informational part. Next the mounting.\\nThe command is `mount [-t fstype] something somewhere'.\\nDetails found in /etc/fstab may be omitted.\\n       mount -a [-t|-O] ...     : mount all stuff from /etc/fstab\\n       mount device             : mount device at the known place\\n       mount directory          : mount known device here\\n       mount -t type dev dir    : ordinary mount command\\nNote that one does not really mount a device, one mounts\\na filesystem (of the given type) found on the device.\\nOne can also mount an already visible directory tree elsewhere:\\n       mount --bind olddir newdir\\nor move a subtree:\\n       mount --move olddir newdir\\nOne can change the type of mount containing the directory dir:\\n       mount --make-shared dir\\n       mount --make-slave dir\\n       mount --make-private dir\\n       mount --make-unbindable dir\\nOne can change the type of all the mounts in a mount subtree\\ncontaining the directory dir:\\n       mount --make-rshared dir\\n       mount --make-rslave dir\\n       mount --make-rprivate dir\\n       mount --make-runbindable dir\\nA device can be given by name, say /dev/hda1 or /dev/cdrom,\\nor by label, using  -L label  or by uuid, using  -U uuid .\\nOther options: [-nfFrsvw] [-o options] [-p passwdfd].\\nFor many more details, say  man 8 mount .\\n\"\n2013-11-22 13:32:23.272 6686 TRACE nova.openstack.common.rpc.amqp\n\n\nSimply replacing this line\ngluster_cmd.extend([glusterfs_share, mount_path, ' '])\nwith this\ngluster_cmd.extend([glusterfs_share, mount_path])\nit works correctly and it mount and attach my cinder glouster volume\n\nI don't understand why a trailing space can cause this kind of problem.\n\nI'm using havana vanilla distribution on CENTOS 6.4\n\nciao", 
            "date_created": "2013-11-22 12:42:17.679905+00:00", 
            "author": "https://api.launchpad.net/1.0/~simone-tiraboschi"
        }, 
        {
            "content": "I've jut checked the log of volume.py module and I couldn't find any version containing that extra whitespace mentioned in your report. Could it be that it was introduced by mistake in your local checkout?\n\nSee https://github.com/openstack/nova/blob/master/nova/virt/libvirt/volume.py#L810", 
            "date_created": "2014-02-26 14:43:19.939059+00:00", 
            "author": "https://api.launchpad.net/1.0/~xqueralt-deactivatedaccount"
        }, 
        {
            "content": "Yes, I double checked it and you are right.\nI've no idea about where it comes from.\nSorry.", 
            "date_created": "2014-03-03 10:52:04.366883+00:00", 
            "author": "https://api.launchpad.net/1.0/~simone-tiraboschi"
        }
    ]
}