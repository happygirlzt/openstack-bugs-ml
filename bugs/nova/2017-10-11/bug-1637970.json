{
    "status": "In Progress", 
    "last_updated": "2016-10-31 10:25:44.395882+00:00", 
    "description": "Executed the below testcase with 10 iterations and 7 concurrency\n\n1. create 1 security_group\n2. create 4 rules\n3. create network\n4. create subnet\n5. create router (Distributed)\n6. add router interface\n6. set external gateway\n5. nova boot servers\n6. nova associate fip\n7. verify ping from rally server\n    to openstack instance\n\n\nFor one of the iteration, nova instance failed to spawn showing the below error.\n\n2016-06-27 14:47:46.432 8124 ERROR nova.compute.manager [req-92a4fb34-f14f-42d0-9677-4e533d7c4c36 6bf77a5f2ea34d27948169813731737a dab0bef5c9fa40dbae556d3e6aaa13f1 - - -] [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Instance failed to spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Traceback (most recent call last):\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2494, in _build_resources\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] yield resources\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2366, in _build_and_run_instance\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] block_device_info=block_device_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/driver.py\", line 497, in spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] admin_password, network_info, block_device_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vmops.py\", line 784, in spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] metadata)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vmops.py\", line 310, in build_virtual_machine\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 191, in get_vif_info\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] is_neutron, vif))\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 177, in get_vif_dict\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] ref = get_network_ref(session, cluster, vif, is_neutron)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 166, in get_network_ref\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_ref = get_neutron_network(session, network_name, cluster, vif)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 150, in get_neutron_network\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] session, network_name, cluster, full_match=False)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/network_util.py\", line 103, in get_network_with_the_name\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_name, full_match)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/network_util.py\", line 64, in _get_network_obj\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] \"DistributedVirtualPortgroup\", \"config\")\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/driver.py\", line 746, in _call_method\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return self.invoke_api(module, method, self.vim, *args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 343, in invoke_api\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return _invoke_api(module, method, *args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 122, in func\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return evt.wait()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 121, in wait\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return hubs.get_hub().switch()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 294, in switch\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return self.greenlet.switch()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/common/loopingcall.py\", line 123, in _inner\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] idle = self.f(*self.args, **self.kw)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 95, in _func\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] result = f(*args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 326, in _invoke_api\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] details=excep.details)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] ManagedObjectNotFoundException: The object has already been deleted or has not been completely created\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Cause: Server raised fault: 'The object has already been deleted or has not been completely created'\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Faults: [ManagedObjectNotFound]\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Details: {'obj': 'dvportgroup-4635'}\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4]\n2016-06-27 14:47:46.437 8124 INFO nova.compute.manager [req-92a4fb34-f14f-42d0-9677-4e533d7c4c36 6bf77a5f2ea34d27948169813731737a dab0bef5c9fa40dbae556d3e6aaa13f1 - - -] [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Terminating instance", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1637970", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1637970, 
    "index": 6507, 
    "created": "2016-10-31 10:21:42.011604+00:00", 
    "title": "VMware: occasional failure under load - network not ready", 
    "comments": [
        {
            "content": "Executed the below testcase with 10 iterations and 7 concurrency\n\n1. create 1 security_group\n2. create 4 rules\n3. create network\n4. create subnet\n5. create router (Distributed)\n6. add router interface\n6. set external gateway\n5. nova boot servers\n6. nova associate fip\n7. verify ping from rally server\n    to openstack instance\n\n\nFor one of the iteration, nova instance failed to spawn showing the below error.\n\n2016-06-27 14:47:46.432 8124 ERROR nova.compute.manager [req-92a4fb34-f14f-42d0-9677-4e533d7c4c36 6bf77a5f2ea34d27948169813731737a dab0bef5c9fa40dbae556d3e6aaa13f1 - - -] [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Instance failed to spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Traceback (most recent call last):\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2494, in _build_resources\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] yield resources\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2366, in _build_and_run_instance\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] block_device_info=block_device_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/driver.py\", line 497, in spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] admin_password, network_info, block_device_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vmops.py\", line 784, in spawn\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] metadata)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vmops.py\", line 310, in build_virtual_machine\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_info)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 191, in get_vif_info\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] is_neutron, vif))\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 177, in get_vif_dict\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] ref = get_network_ref(session, cluster, vif, is_neutron)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 166, in get_network_ref\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_ref = get_neutron_network(session, network_name, cluster, vif)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/vif.py\", line 150, in get_neutron_network\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] session, network_name, cluster, full_match=False)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/network_util.py\", line 103, in get_network_with_the_name\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] network_name, full_match)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/network_util.py\", line 64, in _get_network_obj\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] \"DistributedVirtualPortgroup\", \"config\")\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/nova/virt/vmwareapi/driver.py\", line 746, in _call_method\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return self.invoke_api(module, method, self.vim, *args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 343, in invoke_api\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return _invoke_api(module, method, *args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 122, in func\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return evt.wait()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 121, in wait\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return hubs.get_hub().switch()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 294, in switch\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] return self.greenlet.switch()\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/common/loopingcall.py\", line 123, in _inner\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] idle = self.f(*self.args, **self.kw)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 95, in _func\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] result = f(*args, **kwargs)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] File \"/usr/lib/python2.7/dist-packages/oslo_vmware/api.py\", line 326, in _invoke_api\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] details=excep.details)\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] ManagedObjectNotFoundException: The object has already been deleted or has not been completely created\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Cause: Server raised fault: 'The object has already been deleted or has not been completely created'\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Faults: [ManagedObjectNotFound]\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Details: {'obj': 'dvportgroup-4635'}\n2016-06-27 14:47:46.432 8124 TRACE nova.compute.manager [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4]\n2016-06-27 14:47:46.437 8124 INFO nova.compute.manager [req-92a4fb34-f14f-42d0-9677-4e533d7c4c36 6bf77a5f2ea34d27948169813731737a dab0bef5c9fa40dbae556d3e6aaa13f1 - - -] [instance: c6c1903b-d560-471a-a4bc-cc3bb52c1ed4] Terminating instance", 
            "date_created": "2016-10-31 10:21:42.011604+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/391778", 
            "date_created": "2016-10-31 10:25:43.738266+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}