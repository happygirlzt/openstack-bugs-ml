{
    "status": "Invalid", 
    "last_updated": "2012-07-12 10:02:38.162650+00:00", 
    "description": "when i start a bunch of instances not all will be assigned a private IP address, usually affects over half of the instances. For example:\n\nroot@cloud-cc:~#  euca-describe-instances \nRESERVATION\tr-z3007qk2\tproject1\tdefault\nINSTANCE\ti-0000010c\tami-00000001\t\t\tpending\tNone (project1, compute03)\t45\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010d\tami-00000001\t\t\tpending\tNone (project1, compute02)\t46\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010e\tami-00000001\t\t\tpending\tNone (project1, compute04)\t47\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010f\tami-00000001\t10.0.0.22\t10.0.0.22\trunning\tNone (project1, compute03)\t48\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000109\tami-00000001\t\t\tpending\tNone (project1, compute03)\t42\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010a\tami-00000001\t\t\tpending\tNone (project1, compute02)\t43\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010b\tami-00000001\t\t\tpending\tNone (project1, compute02)\t44\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000105\tami-00000001\t\t\tpending\tNone (project1, compute01)\t38\t\tm1.small\t2011-10-05T11:32:01Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000106\tami-00000001\t\t\tpending\tNone (project1, None)\t39\t\tm1.small\t2011-10-05T11:32:01Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-00000107\tami-00000001\t\t\tpending\tNone (project1, None)\t40\t\tm1.small\t2011-10-05T11:32:01Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-00000108\tami-00000001\t\t\tpending\tNone (project1, compute04)\t41\t\tm1.small\t2011-10-05T11:32:01Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000101\tami-00000001\t\t\tpending\tNone (project1, compute02)\t34\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000102\tami-00000001\t10.0.0.12\t10.0.0.12\trunning\tNone (project1, compute01)\t35\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000103\tami-00000001\t\t\tpending\tNone (project1, compute04)\t36\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000104\tami-00000001\t\t\tpending\tNone (project1, compute04)\t37\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000100\tami-00000001\t\t\tpending\tNone (project1, compute03)\t33\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fd\tami-00000001\t10.0.0.11\t10.0.0.11\trunning\tNone (project1, compute01)\t30\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fe\tami-00000001\t\t\tpending\tNone (project1, compute04)\t31\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000ff\tami-00000001\t\t\tpending\tNone (project1, compute02)\t32\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f8\tami-00000001\t10.0.0.20\t10.0.0.20\trunning\tNone (project1, compute03)\t25\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f9\tami-00000001\t\t\tpending\tNone (project1, None)\t26\t\tm1.small\t2011-10-05T11:31:58Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-000000fa\tami-00000001\t10.0.0.19\t10.0.0.19\trunning\tNone (project1, compute03)\t27\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fb\tami-00000001\t10.0.0.10\t10.0.0.10\trunning\tNone (project1, compute01)\t28\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fc\tami-00000001\t10.0.0.13\t10.0.0.13\trunning\tNone (project1, compute03)\t29\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f4\tami-00000001\t\t\tpending\tNone (project1, compute04)\t21\t\tm1.small\t2011-10-05T11:31:57Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f5\tami-00000001\t\t\tpending\tNone (project1, compute04)\t22\t\tm1.small\t2011-10-05T11:31:57Z\tnova\tami-00000000\tami-00000000\n\nThe instances without IP addresses are in pending.\n\nand in the logs I see\n\n(nova.rpc): TRACE: RemoteError: AttributeError 'NoneType' object has no attribute '_keymap'", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/868321", 
    "owner": "None", 
    "id": 868321, 
    "index": 2303, 
    "created": "2011-10-05 12:29:37.534273+00:00", 
    "title": "instances not being assigned a private IP address", 
    "comments": [
        {
            "content": "when i start a bunch of instances not all will be assigned a private IP address, usually affects over half of the instances. For example:\n\nroot@cloud-cc:~#  euca-describe-instances \nRESERVATION\tr-z3007qk2\tproject1\tdefault\nINSTANCE\ti-0000010c\tami-00000001\t\t\tpending\tNone (project1, compute03)\t45\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010d\tami-00000001\t\t\tpending\tNone (project1, compute02)\t46\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010e\tami-00000001\t\t\tpending\tNone (project1, compute04)\t47\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010f\tami-00000001\t10.0.0.22\t10.0.0.22\trunning\tNone (project1, compute03)\t48\t\tm1.small\t2011-10-05T11:32:03Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000109\tami-00000001\t\t\tpending\tNone (project1, compute03)\t42\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010a\tami-00000001\t\t\tpending\tNone (project1, compute02)\t43\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-0000010b\tami-00000001\t\t\tpending\tNone (project1, compute02)\t44\t\tm1.small\t2011-10-05T11:32:02Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000105\tami-00000001\t\t\tpending\tNone (project1, compute01)\t38\t\tm1.small\t2011-10-05T11:32:01Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000106\tami-00000001\t\t\tpending\tNone (project1, None)\t39\t\tm1.small\t2011-10-05T11:32:01Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-00000107\tami-00000001\t\t\tpending\tNone (project1, None)\t40\t\tm1.small\t2011-10-05T11:32:01Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-00000108\tami-00000001\t\t\tpending\tNone (project1, compute04)\t41\t\tm1.small\t2011-10-05T11:32:01Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000101\tami-00000001\t\t\tpending\tNone (project1, compute02)\t34\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000102\tami-00000001\t10.0.0.12\t10.0.0.12\trunning\tNone (project1, compute01)\t35\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000103\tami-00000001\t\t\tpending\tNone (project1, compute04)\t36\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000104\tami-00000001\t\t\tpending\tNone (project1, compute04)\t37\t\tm1.small\t2011-10-05T11:32:00Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-00000100\tami-00000001\t\t\tpending\tNone (project1, compute03)\t33\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fd\tami-00000001\t10.0.0.11\t10.0.0.11\trunning\tNone (project1, compute01)\t30\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fe\tami-00000001\t\t\tpending\tNone (project1, compute04)\t31\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000ff\tami-00000001\t\t\tpending\tNone (project1, compute02)\t32\t\tm1.small\t2011-10-05T11:31:59Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f8\tami-00000001\t10.0.0.20\t10.0.0.20\trunning\tNone (project1, compute03)\t25\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f9\tami-00000001\t\t\tpending\tNone (project1, None)\t26\t\tm1.small\t2011-10-05T11:31:58Z\tunknown zone\tami-00000000\tami-00000000\nINSTANCE\ti-000000fa\tami-00000001\t10.0.0.19\t10.0.0.19\trunning\tNone (project1, compute03)\t27\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fb\tami-00000001\t10.0.0.10\t10.0.0.10\trunning\tNone (project1, compute01)\t28\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000fc\tami-00000001\t10.0.0.13\t10.0.0.13\trunning\tNone (project1, compute03)\t29\t\tm1.small\t2011-10-05T11:31:58Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f4\tami-00000001\t\t\tpending\tNone (project1, compute04)\t21\t\tm1.small\t2011-10-05T11:31:57Z\tnova\tami-00000000\tami-00000000\nINSTANCE\ti-000000f5\tami-00000001\t\t\tpending\tNone (project1, compute04)\t22\t\tm1.small\t2011-10-05T11:31:57Z\tnova\tami-00000000\tami-00000000\n\nThe instances without IP addresses are in pending.\n\nand in the logs I see\n\n(nova.rpc): TRACE: RemoteError: AttributeError 'NoneType' object has no attribute '_keymap'", 
            "date_created": "2011-10-05 12:29:37.534273+00:00", 
            "author": "https://api.launchpad.net/1.0/~jo0006"
        }, 
        {
            "content": "adding:\n\n--sql_min_pool_size = 1 and --sql_max_pool_size =1 helps but problem still remains", 
            "date_created": "2011-10-10 13:38:27.457427+00:00", 
            "author": "https://api.launchpad.net/1.0/~jo0006"
        }, 
        {
            "content": "\nCould you add more details about your setup ? Specifically could you confirm that you have enough fixed_ips assigned to your project ? ", 
            "date_created": "2011-10-21 09:33:57.782738+00:00", 
            "author": "https://api.launchpad.net/1.0/~gavin-brebner-orange"
        }, 
        {
            "content": "Hi,\n\nI'm running ubuntu 10.10 with openstack installed from ppa:openstack-release/2011.3. I have one node running all the nova management services (api, scheduler etc) and 4 nodes running compute. The networking is FlatDHCP.\n\nI had enough fixed ip addresses, created from nova-network create private_net --bridge br100 10.0.0.0/24 1 256\n\na select * from fixed_ips shows they were all there.\n\nThe problem occurs when starting a number of instances at the same time: say euca-run-instances $ami -n 10\n\nthis results in a few instances always being left in the state as shown above. The larger the number of instances the worse the problem. I can though do the following without a problem:\n\nfor n in `seq 1 50`;do euca-run-instances $ami -n 2; sleep 10; done\n\nand 100 instances do all start ok.  I can confirm the problem did not exist on my cactus install, I have this week reinstalled with trunk and there is no problem there.\n\nRegards\nJohn", 
            "date_created": "2011-10-21 09:52:25.136157+00:00", 
            "author": "https://api.launchpad.net/1.0/~jo0006"
        }, 
        {
            "content": "OK thanks. Changing status to confirmed.", 
            "date_created": "2011-10-21 10:07:40.943267+00:00", 
            "author": "https://api.launchpad.net/1.0/~gavin-brebner-orange"
        }, 
        {
            "content": "Is this still reproducible? Nobody else has reported seeing this that I know of so I'm inclined to think this was an isolated incident.", 
            "date_created": "2012-02-02 22:47:11.188336+00:00", 
            "author": "https://api.launchpad.net/1.0/~bcwaldon"
        }, 
        {
            "content": "We cannot solve the issue you reported without more information. Could you please provide the requested information ?", 
            "date_created": "2012-06-07 12:32:17.597399+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "This bug lacks the necessary information to effectively reproduce and fix it, therefore it has been closed. Feel free to reopen the bug by providing the requested information and set the bug status back to ''New''.", 
            "date_created": "2012-07-12 10:02:34.575533+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}