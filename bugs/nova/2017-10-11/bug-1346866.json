{
    "status": "Fix Released", 
    "last_updated": "2016-07-26 20:16:15.237653+00:00", 
    "description": "When booting a volume backend instance, there may be an error because of volume creating error. and the following error occur when deleting the instance:\n\n2014-07-22 11:19:15.305 14601 ERROR nova.compute.manager [-] [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] Failed to complete a deletion\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] Traceback (most recent call last):\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 845, in _init_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     self._delete_instance(context, instance, bdms)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 103, in inner\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     rv = f(*args, **kwargs)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2220, in _delete_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     user_id=user_id)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     six.reraise(self.type_, self.value, self.tb)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2190, in _delete_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     self._shutdown_instance(context, db_inst, bdms)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2136, in _shutdown_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     connector)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 174, in wrapper\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     res = method(self, ctx, volume_id, *args, **kwargs)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 276, in terminate_connection\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     return cinderclient(context).volumes.terminate_connection(volume_id,\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 92, in cinderclient\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     endpoint_type=endpoint_type)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/cinderclient/service_catalog.py\", line 80, in url_for\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     raise cinderclient.exceptions.EndpointNotFound()\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] EndpointNotFound\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1346866", 
    "owner": "https://api.launchpad.net/1.0/~liyingjun", 
    "id": 1346866, 
    "index": 48, 
    "created": "2014-07-22 11:28:06.584692+00:00", 
    "title": "EndpointNotFound when deleting volume backended instance", 
    "comments": [
        {
            "content": "When booting a volume backend instance, there may be an error because of volume creating error. and the following error occur when deleting the instance:\n\n2014-07-22 11:19:15.305 14601 ERROR nova.compute.manager [-] [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] Failed to complete a deletion\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] Traceback (most recent call last):\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 845, in _init_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     self._delete_instance(context, instance, bdms)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 103, in inner\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     rv = f(*args, **kwargs)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2220, in _delete_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     user_id=user_id)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     six.reraise(self.type_, self.value, self.tb)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2190, in _delete_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     self._shutdown_instance(context, db_inst, bdms)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2136, in _shutdown_instance\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     connector)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 174, in wrapper\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     res = method(self, ctx, volume_id, *args, **kwargs)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 276, in terminate_connection\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     return cinderclient(context).volumes.terminate_connection(volume_id,\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 92, in cinderclient\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     endpoint_type=endpoint_type)\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]   File \"/usr/lib/python2.7/dist-packages/cinderclient/service_catalog.py\", line 80, in url_for\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]     raise cinderclient.exceptions.EndpointNotFound()\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815] EndpointNotFound\n2014-07-22 11:19:15.305 14601 TRACE nova.compute.manager [instance: dc0d5ad1-caa7-4160-9f6f-158ca1193815]", 
            "date_created": "2014-07-22 11:28:06.584692+00:00", 
            "author": "https://api.launchpad.net/1.0/~liyingjun"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/108656", 
            "date_created": "2014-07-22 11:52:14.911695+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/108656\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=e5c3ff67b51f7c466d89778cc2c4999e10c7e08e\nSubmitter: Jenkins\nBranch:    master\n\ncommit e5c3ff67b51f7c466d89778cc2c4999e10c7e08e\nAuthor: liyingjun <email address hidden>\nDate:   Thu Jun 26 21:48:52 2014 +0800\n\n    EndpointNotFound deleting volume backend instance\n    \n    When there is some error in volume creating on booting from volume,\n    we may get the EndpointNotFound exception when deleting the error instance.\n    Then we can never delete the instance successfully. The exception should\n    be ignored.\n    \n    Change-Id: Ia92b648eb18c70996747d361e227de771f33ee9c\n    Closes-bug: 1346866\n", 
            "date_created": "2014-08-05 01:37:35.983713+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "I think the correct fix is to find why cinderclient raise EndpointNotFound , this is mostly caused by wrong configuration,  can anyone reproduce this? \n\nLi,\nCan you give more details on how to reproduce this bug ? in what situation will you see this exception, thanks. ", 
            "date_created": "2014-08-05 05:59:31.703604+00:00", 
            "author": "https://api.launchpad.net/1.0/~heut2008"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/128166", 
            "date_created": "2014-10-14 04:09:17.038933+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Sean Dague (<email address hidden>) on branch: stable/icehouse\nReview: https://review.openstack.org/128166\nReason: This review is > 4 weeks without comment, and failed Jenkins the last time it was checked. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.", 
            "date_created": "2015-01-23 15:28:32.212462+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/296890", 
            "date_created": "2016-03-24 04:57:18.902658+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Michael Still (<email address hidden>) on branch: master\nReview: https://review.openstack.org/296890\nReason: This code hasn't been updated in a long time, and is in merge conflict. I am going to abandon this review, but feel free to restore it if you're still working on this.", 
            "date_created": "2016-07-26 20:16:14.413484+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}