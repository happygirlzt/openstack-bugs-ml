{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:47:11.678738+00:00", 
    "description": "When using VMwareVC nova driver and VMwareVcVMDK cinder driver, booting from volume via the Horizon UI fails. The instance boots with ERROR status and the log shows \"Image  could not be found\". In addition, the user is unable to access the instances index page in Horizon due to an error 500 (other pages work, however). Steps to reproduce:\n\n(Using horizon)\n1. Create a volume from an image\n2. Boot an instance from the volume \n\nExpected result: \n1. An instance is booted from the volume successfully\n2. User is redirected to the instances index page in Horizon\n\nActual result:\n1. Instance fails to boot with status ERROR\n2. User is redirected to instances index page but page fails with 500 error. In debug mode, user sees TypeError at /project/instances: string indices must be integers (see link to trace below)\n\nNova log error:\n\n Traceback (most recent call last):\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1037, in _build_instance\n     set_access_ip=set_access_ip)\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1410, in _spawn\n     LOG.exception(_('Instance failed to spawn'), instance=instance)\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1407, in _spawn\n     block_device_info)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 623, in spawn\n     admin_password, network_info, block_device_info)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 208, in spawn\n     disk_type, vif_model, image_linked_clone) = _get_image_properties()\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 187, in \n     instance)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmware_images.py\", line 184, in \n     meta_data = image_service.show(context, image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 290, in show\n     _reraise_translated_image_exception(image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 288, in show\n     image = self._client.call(context, 1, 'get', image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 212, in call\n     return getattr(client.images, method)(*args, **kwargs)\n   File \"/opt/stack/python-glanceclient/glanceclient/v1/images.py\", line 114, in \n     % urllib.quote(str(image_id)))\n   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 272, \n     return self._http_request(url, method, **kwargs)\n   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 233, \n     raise exc.from_response(resp, body_str)\n ImageNotFound: Image  could not be found.\n \nHorizon error:\n\n    Request Method:\tGET\n    Request URL:\thttp://10.20.72.218/project/instances/\n    Django Version:\t1.5.4\n    Exception Type:\tTypeError\n    Exception Value:\t\n    string indices must be integers\n    Exception Location:\t/opt/stack/horizon/openstack_dashboard/wsgi/../../openstack_dashboard/    dashboards/project/instances/views.py in get_data, line 92\n    Python Executable:\t/usr/bin/python\n    Python Version:\t2.7.3", 
    "tags": [
        "vmware"
    ], 
    "importance": "High", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1235022", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1235022, 
    "index": 1262, 
    "created": "2013-10-03 23:59:10.073039+00:00", 
    "title": "VMware: errors booting from volume via Horizon", 
    "comments": [
        {
            "content": "When using VMwareVC nova driver and VMwareVcVMDK cinder driver, booting from volume via the Horizon UI fails. The instance boots with ERROR status and the log shows \"Image  could not be found\". In addition, the user is unable to access the instances index page in Horizon due to an error 500 (other pages work, however). Steps to reproduce:\n\n(Using horizon)\n1. Create a volume from an image\n2. Boot an instance from the volume \n\nExpected result: \n1. An instance is booted from the volume successfully\n2. User is redirected to the instances index page in Horizon\n\nActual result:\n1. Instance fails to boot with status ERROR\n2. User is redirected to instances index page but page fails with 500 error. In debug mode, user sees TypeError at /project/instances: string indices must be integers (see link to trace below)\n\nNova log error:\n\n Traceback (most recent call last):\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1037, in _build_instance\n     set_access_ip=set_access_ip)\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1410, in _spawn\n     LOG.exception(_('Instance failed to spawn'), instance=instance)\n   File \"/opt/stack/nova/nova/compute/manager.py\", line 1407, in _spawn\n     block_device_info)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/driver.py\", line 623, in spawn\n     admin_password, network_info, block_device_info)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 208, in spawn\n     disk_type, vif_model, image_linked_clone) = _get_image_properties()\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmops.py\", line 187, in \n     instance)\n   File \"/opt/stack/nova/nova/virt/vmwareapi/vmware_images.py\", line 184, in \n     meta_data = image_service.show(context, image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 290, in show\n     _reraise_translated_image_exception(image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 288, in show\n     image = self._client.call(context, 1, 'get', image_id)\n   File \"/opt/stack/nova/nova/image/glance.py\", line 212, in call\n     return getattr(client.images, method)(*args, **kwargs)\n   File \"/opt/stack/python-glanceclient/glanceclient/v1/images.py\", line 114, in \n     % urllib.quote(str(image_id)))\n   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 272, \n     return self._http_request(url, method, **kwargs)\n   File \"/opt/stack/python-glanceclient/glanceclient/common/http.py\", line 233, \n     raise exc.from_response(resp, body_str)\n ImageNotFound: Image  could not be found.\n \nHorizon error:\n\n    Request Method:\tGET\n    Request URL:\thttp://10.20.72.218/project/instances/\n    Django Version:\t1.5.4\n    Exception Type:\tTypeError\n    Exception Value:\t\n    string indices must be integers\n    Exception Location:\t/opt/stack/horizon/openstack_dashboard/wsgi/../../openstack_dashboard/    dashboards/project/instances/views.py in get_data, line 92\n    Python Executable:\t/usr/bin/python\n    Python Version:\t2.7.3", 
            "date_created": "2013-10-03 23:59:10.073039+00:00", 
            "author": "https://api.launchpad.net/1.0/~rhsu"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/50053", 
            "date_created": "2013-10-07 12:31:01.795977+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/50053\nCommitted: http://github.com/openstack/nova/commit/026843773b71ab0ac30abb36fe9eed92f5e11f7a\nSubmitter: Jenkins\nBranch:    master\n\ncommit 026843773b71ab0ac30abb36fe9eed92f5e11f7a\nAuthor: Gary Kotton <email address hidden>\nDate:   Mon Oct 7 05:28:19 2013 -0700\n\n    VMware: fix bug with booting from volumes\n    \n    When booting from a volume without an image reference would cause\n    an exception.\n    \n    Change-Id: Ib0302197b8d4f5e054a8c4426cb0dde7cb82842e\n    Closes-bug: #1235022\n", 
            "date_created": "2013-10-23 07:09:05.748391+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/54020", 
            "date_created": "2013-10-27 08:30:56.434716+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/54020\nCommitted: http://github.com/openstack/nova/commit/30461e8554c94a9008765a4906cc56b1ba42bb14\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 30461e8554c94a9008765a4906cc56b1ba42bb14\nAuthor: Gary Kotton <email address hidden>\nDate:   Mon Oct 7 05:28:19 2013 -0700\n\n    VMware: fix bug with booting from volumes\n    \n    When booting from a volume without an image reference would cause\n    an exception.\n    \n    Change-Id: Ib0302197b8d4f5e054a8c4426cb0dde7cb82842e\n    Closes-bug: #1235022\n    (cherry picked from commit 026843773b71ab0ac30abb36fe9eed92f5e11f7a)\n", 
            "date_created": "2013-10-31 07:38:29.293871+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}