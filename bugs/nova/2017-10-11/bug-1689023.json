{
    "status": "Expired", 
    "last_updated": "2017-08-27 04:17:48.338733+00:00", 
    "description": "Hi all:\nI'm now trying to install an Openstack Ocata on a CentOS 7.2 Host,with PostgreSQL 9.2.18 el7 as the backend database.Following the offical installation Guide of Ocata.\n\n1\u3001Keystone is successfully deployed on the controller node.\n2\u3001Glance is successfully deployed on the controller node.\n3\u3001Nova is successfuly deployed on the controller node.\n\nAfter Check all NOVA-Service is active and running, before continuing deploy nova on compute node,i typed the \u201copenstack compute service list\u201d command, i got an error return as following:\n\n[root@controller ~(keystone_admin)]# openstack compute service list\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-41ec69a5-28cf-4b00-8ec9-d4aad3d83481)\n\nWhen i check the nova-api.log,i found although the nova-api service is active and running,there is always an database connection fail error from the very beginning after i started the nova-api service.The error log is in the attachment:\n\n2017-05-07 05:47:07.789 2311 ERROR oslo_service.service OperationalError: (psycopg2.OperationalError) asynchronous connection failed\n\n\nIs there any solution now?", 
    "tags": [
        "openstack-version.ocata"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1689023", 
    "owner": "None", 
    "id": 1689023, 
    "index": 6840, 
    "created": "2017-05-07 10:12:51.919530+00:00", 
    "title": "PostgreSQL fails with Ocata Nova-API on CentOS 7.2", 
    "comments": [
        {
            "content": "Hi all:\nI'm now trying to install an Openstack Ocata on a CentOS 7.2 Host,with PostgreSQL 9.2.18 el7 as the backend database.Following the offical installation Guide of Ocata.\n\n1\u3001Keystone is successfully deployed on the controller node.\n2\u3001Glance is successfully deployed on the controller node.\n3\u3001Nova is successfuly deployed on the controller node.\n\nAfter Check all NOVA-Service is active and running, before continuing deploy nova on compute node,i typed the \u201copenstack compute service list\u201d command, i got an error return as following:\n\n[root@controller ~(keystone_admin)]# openstack compute service list\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-41ec69a5-28cf-4b00-8ec9-d4aad3d83481)\n\nWhen i check the nova-api.log,i found although the nova-api service is active and running,there is always an database connection fail error from the very beginning after i started the nova-api service.The error log is in the attachment.\n\nIs there any solution now?", 
            "date_created": "2017-05-07 10:12:51.919530+00:00", 
            "author": "https://api.launchpad.net/1.0/~autoberry"
        }, 
        {
            "content": "", 
            "date_created": "2017-05-07 10:12:51.919530+00:00", 
            "author": "https://api.launchpad.net/1.0/~autoberry"
        }, 
        {
            "content": "it looks like reported in API layer, however, it's some configuration error from you call back trace in db layer, please double check your db settings first\n\n\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service Traceback (most recent call last):\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_service/service.py\", line 722, in run_service\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     service.start()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/nova/service.py\", line 377, in start\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     self.binary)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     result = fn(cls, context, *args, **kwargs)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/nova/objects/service.py\", line 255, in get_by_host_and_binary\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     host, binary)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/nova/db/api.py\", line 127, in service_get_by_host_and_binary\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return IMPL.service_get_by_host_and_binary(context, host, binary)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 265, in wrapped\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     with ctxt_mgr.reader.using(context):\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return self.gen.next()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 944, in _transaction_scope\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     allow_async=self._allow_async) as resource:\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return self.gen.next()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 558, in _session\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     bind=self.connection, mode=self.mode)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 317, in _create_session\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     self._start()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 403, in _start\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     engine_args, maker_args)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 427, in _setup_for_connection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     sql_connection=sql_connection, **engine_kwargs)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     test_conn = _test_connection(engine, max_retries, retry_interval)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return engine.connect()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return self._connection_cls(self, **kwargs)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     if connection is not None else engine.raw_connection()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     self.pool.unique_connection, _connection)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     e, dialect, self)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     util.raise_from_cause(newraise, exc_info)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     reraise(type(exception), exception, tb=exc_tb)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return fn()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return _ConnectionFairy._checkout(self)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     fairy = _ConnectionRecord.checkout(pool)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 480, in checkout\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     rec = pool._do_get()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     self._dec_overflow()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     compat.reraise(exc_type, exc_value, exc_tb)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1057, in _do_get\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return self._create_connection()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return _ConnectionRecord(self)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 449, in __init__\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     self.connection = self.__connect()\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 607, in __connect\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     connection = self.__pool._invoke_creator(self)\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-05-07 05:13:01.753 37965 ERROR oslo_service.service     return dialect.connect(*cargs, **cparams)", 
            "date_created": "2017-05-08 07:37:27.497080+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "Automatically discovered version ocata in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 15:58:19.039136+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-08-27 04:17:45.184978+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ]
}