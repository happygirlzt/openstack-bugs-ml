{
    "status": "Fix Released", 
    "last_updated": "2016-12-15 17:35:38.982603+00:00", 
    "description": "Seeing this in a gate job here:\n\nhttp://logs.openstack.org/00/398800/1/gate/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/a387fb0/logs/screen-n-cpu.txt.gz?level=TRACE#_2016-11-17_11_29_10_965\n\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server [req-1e141c4e-e2eb-4b06-89b5-849ecf4d065d nova service] Exception during message handling\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 225, in dispatch\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 195, in _do_dispatch\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/exception_wrapper.py\", line 75, in wrapped\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/exception_wrapper.py\", line 66, in wrapped\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 6755, in external_instance_event\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     event.tag)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 6724, in _process_instance_vif_deleted_event\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     self.driver.detach_interface(instance, vif)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server TypeError: detach_interface() takes exactly 4 arguments (3 given)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server \n\nhttp://logstash.openstack.org/#dashboard/file/logstash.json?query=message%3A%5C%22_process_instance_vif_deleted_event%5C%22%20AND%20message%3A%5C%22TypeError%3A%20detach_interface()%20takes%20exactly%204%20arguments%20(3%20given)%5C%22%20AND%20tags%3A%5C%22screen-n-cpu.txt%5C%22&from=7d\n\nNew regression as of 11/16: https://review.openstack.org/#/c/209362/", 
    "tags": [
        "compute", 
        "neutron"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1642681", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1642681, 
    "index": 2005, 
    "created": "2016-11-17 17:50:11.024341+00:00", 
    "title": "_process_instance_vif_deleted_event fails with 'TypeError: detach_interface() takes exactly 4 arguments (3 given)'", 
    "comments": [
        {
            "content": "Seeing this in a gate job here:\n\nhttp://logs.openstack.org/00/398800/1/gate/gate-tempest-dsvm-full-devstack-plugin-ceph-ubuntu-xenial/a387fb0/logs/screen-n-cpu.txt.gz?level=TRACE#_2016-11-17_11_29_10_965\n\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server [req-1e141c4e-e2eb-4b06-89b5-849ecf4d065d nova service] Exception during message handling\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 225, in dispatch\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 195, in _do_dispatch\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/exception_wrapper.py\", line 75, in wrapped\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/exception_wrapper.py\", line 66, in wrapped\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 6755, in external_instance_event\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     event.tag)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 6724, in _process_instance_vif_deleted_event\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server     self.driver.detach_interface(instance, vif)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server TypeError: detach_interface() takes exactly 4 arguments (3 given)\n2016-11-17 11:29:10.965 2249 ERROR oslo_messaging.rpc.server \n\nhttp://logstash.openstack.org/#dashboard/file/logstash.json?query=message%3A%5C%22_process_instance_vif_deleted_event%5C%22%20AND%20message%3A%5C%22TypeError%3A%20detach_interface()%20takes%20exactly%204%20arguments%20(3%20given)%5C%22%20AND%20tags%3A%5C%22screen-n-cpu.txt%5C%22&from=7d\n\nNew regression as of 11/16: https://review.openstack.org/#/c/209362/", 
            "date_created": "2016-11-17 17:50:11.024341+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/399155", 
            "date_created": "2016-11-17 17:54:40.827602+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/399155\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=383e795a5ed16cdafdab04858c1bd889fa893fe5\nSubmitter: Jenkins\nBranch:    master\n\ncommit 383e795a5ed16cdafdab04858c1bd889fa893fe5\nAuthor: Dan Smith <email address hidden>\nDate:   Thu Nov 17 09:59:32 2016 -0800\n\n    Fix detach_interface() call from external event handler\n    \n    The signature for VirtDriver.detach_interface() changed recently in\n    41591c9456fd4eb91407551b9b9898e8f4974050, but the call from the\n    external event handler was not updated. This does that.\n    \n    Change-Id: I560920ed521f09909d91bb0aac42bf97447475b0\n    Closes-Bug: #1642681\n", 
            "date_created": "2016-11-19 00:16:55.053147+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:35:37.892120+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}