{
    "status": "Invalid", 
    "last_updated": "2014-11-19 14:27:24.367632+00:00", 
    "description": "Instances will start, but will not boot into their respective operating systems with more than five cinder volumes attached to the instance. The instance sits at a \"No bootable device\" error.\n\nOpenstack Version: OpenStack Havana (2013.2)\n\nuname -a:   Linux controller01 3.8.0-29-generic #42~precise1-Ubuntu SMP Wed Aug 14 16:19:23 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n\nLog files have been attached including cinder & nova logs from the controller and from the compute node where the instance resides. For reference, the instance name is:  'alex-test-volume' and volumes are named: 'alex-test-1' through 'alex-test-6'.", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Medium", 
    "heat": 18, 
    "link": "https://bugs.launchpad.net/nova/+bug/1272447", 
    "owner": "None", 
    "id": 1272447, 
    "index": 3771, 
    "created": "2014-01-24 18:01:33.527149+00:00", 
    "title": "Instances fail to boot properly with more than 5 cinder volumes attached", 
    "comments": [
        {
            "content": "Instances will start, but will not boot into their respective operating systems with more than five cinder volumes attached to the instance. The instance sits at a \"No bootable device\" error.\n\nOpenstack Version: OpenStack Havana (2013.2)\n\nuname -a:   Linux controller01 3.8.0-29-generic #42~precise1-Ubuntu SMP Wed Aug 14 16:19:23 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n\nLog files have been attached including cinder & nova logs from the controller and from the compute node where the instance resides. For reference, the instance name is:  'alex-test-volume' and volumes are named: 'alex-test-1' through 'alex-test-6'.", 
            "date_created": "2014-01-24 18:01:33.527149+00:00", 
            "author": "https://api.launchpad.net/1.0/~ablack"
        }, 
        {
            "content": "", 
            "date_created": "2014-01-24 18:01:33.527149+00:00", 
            "author": "https://api.launchpad.net/1.0/~ablack"
        }, 
        {
            "content": "Which cinder driver are you using for your backend?  I could attach more than 5 volumes to an instance and start/stop the instance.  This was a quick test using devstack with cinder enabled.  Could you post the output of a virsh dumpxml <instance>?  ", 
            "date_created": "2014-02-13 05:05:19.141243+00:00", 
            "author": "https://api.launchpad.net/1.0/~thang-pham"
        }, 
        {
            "content": "We\u00b9re using the gluster driver for the backend.\n\nHere is the XML dump for an instance having this issue:\n\n<domain type='kvm' id='19'>\n  <name>instance-00000337</name>\n  <uuid>a490322c-67d7-4c99-a128-b7731fc233c9</uuid>\n  <memory unit='KiB'>4194304</memory>\n  <currentMemory unit='KiB'>4194304</currentMemory>\n  <vcpu placement='static'>2</vcpu>\n  <resource>\n    <partition>/machine</partition>\n  </resource>\n  <sysinfo type='smbios'>\n    <system>\n      <entry name='manufacturer'>OpenStack Foundation</entry>\n      <entry name='product'>OpenStack Nova</entry>\n      <entry name='version'>2013.2</entry>\n      <entry name='serial'>2bb944fc-5bb2-11d9-8e89-9674f3fd2c00</entry>\n      <entry name='uuid'>a490322c-67d7-4c99-a128-b7731fc233c9</entry>\n    </system>\n  </sysinfo>\n  <os>\n    <type arch='x86_64' machine='pc-i440fx-1.5'>hvm</type>\n    <boot dev='hd'/>\n    <smbios mode='sysinfo'/>\n  </os>\n  <features>\n    <acpi/>\n    <apic/>\n  </features>\n  <cpu mode='host-model'>\n    <model fallback='allow'/>\n    <feature policy='require' name='pdpe1gb'/>\n    <feature policy='require' name='osxsave'/>\n    <feature policy='require' name='dca'/>\n    <feature policy='require' name='pcid'/>\n    <feature policy='require' name='pdcm'/>\n    <feature policy='require' name='xtpr'/>\n    <feature policy='require' name='tm2'/>\n    <feature policy='require' name='est'/>\n    <feature policy='require' name='smx'/>\n    <feature policy='require' name='vmx'/>\n    <feature policy='require' name='ds_cpl'/>\n    <feature policy='require' name='monitor'/>\n    <feature policy='require' name='dtes64'/>\n    <feature policy='require' name='pbe'/>\n    <feature policy='require' name='tm'/>\n    <feature policy='require' name='ht'/>\n    <feature policy='require' name='ss'/>\n    <feature policy='require' name='acpi'/>\n    <feature policy='require' name='ds'/>\n    <feature policy='require' name='vme'/>\n  </cpu>\n  <clock offset='utc'>\n    <timer name='pit' tickpolicy='delay'/>\n    <timer name='rtc' tickpolicy='catchup'/>\n  </clock>\n  <on_poweroff>destroy</on_poweroff>\n  <on_reboot>restart</on_reboot>\n  <on_crash>destroy</on_crash>\n  <devices>\n    <emulator>/usr/bin/kvm</emulator>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='qcow2' cache='none'/>\n      <source\nfile='/var/lib/nova/instances/a490322c-67d7-4c99-a128-b7731fc233c9/disk'/>\n      <target dev='vda' bus='virtio'/>\n      <alias name='virtio-disk0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='qcow2' cache='none'/>\n      <source\nfile='/var/lib/nova/instances/a490322c-67d7-4c99-a128-b7731fc233c9/disk.loc\nal'/>\n      <target dev='vdb' bus='virtio'/>\n      <alias name='virtio-disk1'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-e9399feb\n-24bc-4356-85df-3ceb843135f2'/>\n      <target dev='vdc' bus='virtio'/>\n      <serial>e9399feb-24bc-4356-85df-3ceb843135f2</serial>\n      <alias name='virtio-disk2'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-2a15ef06\n-1a30-47e4-b398-943fb4ea252e'/>\n      <target dev='vdd' bus='virtio'/>\n      <serial>2a15ef06-1a30-47e4-b398-943fb4ea252e</serial>\n      <alias name='virtio-disk3'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x07'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-2da65f73\n-ee7b-49f4-8ed7-2b0385e24d1a'/>\n      <target dev='vde' bus='virtio'/>\n      <serial>2da65f73-ee7b-49f4-8ed7-2b0385e24d1a</serial>\n      <alias name='virtio-disk4'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x08'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-218b3949\n-2176-460e-8f50-a79c2adcbb1a'/>\n      <target dev='vdf' bus='virtio'/>\n      <serial>218b3949-2176-460e-8f50-a79c2adcbb1a</serial>\n      <alias name='virtio-disk5'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x09'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-69c55852\n-37cc-4f75-83d3-6690fba3e22e'/>\n      <target dev='vdg' bus='virtio'/>\n      <serial>69c55852-37cc-4f75-83d3-6690fba3e22e</serial>\n      <alias name='virtio-disk6'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x0a'\nfunction='0x0'/>\n    </disk>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source\nfile='/var/lib/cinder/volumes/7f0cc69a1ef93033e7456a6c0c22b6b5/vol-1929889b\n-e3e3-4033-87df-e373ba2c3174'/>\n      <target dev='vdh' bus='virtio'/>\n      <serial>1929889b-e3e3-4033-87df-e373ba2c3174</serial>\n      <alias name='virtio-disk7'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x0c'\nfunction='0x0'/>\n    </disk>\n    <controller type='usb' index='0'>\n      <alias name='usb0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x01'\nfunction='0x2'/>\n    </controller>\n    <controller type='pci' index='0' model='pci-root'>\n      <alias name='pci0'/>\n    </controller>\n    <interface type='bridge'>\n      <mac address='fa:16:3e:6b:4e:64'/>\n      <source bridge='qbr06e1c5a8-de'/>\n      <target dev='tap06e1c5a8-de'/>\n      <model type='virtio'/>\n      <alias name='net0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03'\nfunction='0x0'/>\n    </interface>\n    <serial type='file'>\n      <source\npath='/var/lib/nova/instances/a490322c-67d7-4c99-a128-b7731fc233c9/console.\nlog'/>\n      <target port='0'/>\n      <alias name='serial0'/>\n    </serial>\n    <serial type='pty'>\n      <source path='/dev/pts/21'/>\n      <target port='1'/>\n      <alias name='serial1'/>\n    </serial>\n    <console type='file'>\n      <source\npath='/var/lib/nova/instances/a490322c-67d7-4c99-a128-b7731fc233c9/console.\nlog'/>\n      <target type='serial' port='0'/>\n      <alias name='serial0'/>\n    </console>\n    <input type='tablet' bus='usb'>\n      <alias name='input0'/>\n    </input>\n    <input type='mouse' bus='ps2'/>\n    <graphics type='vnc' port='5916' autoport='yes' listen='0.0.0.0'\nkeymap='en-us'>\n      <listen type='address' address='0.0.0.0'/>\n    </graphics>\n    <video>\n      <model type='cirrus' vram='9216' heads='1'/>\n      <alias name='video0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02'\nfunction='0x0'/>\n    </video>\n    <memballoon model='virtio'>\n      <alias name='balloon0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x0b'\nfunction='0x0'/>\n    </memballoon>\n  </devices>\n  <seclabel type='dynamic' model='apparmor' relabel='yes'>\n    <label>libvirt-a490322c-67d7-4c99-a128-b7731fc233c9</label>\n    <imagelabel>libvirt-a490322c-67d7-4c99-a128-b7731fc233c9</imagelabel>\n  </seclabel>\n</domain>\n\n\n\nOn 2/12/14, 10:05 PM, \"Thang Pham\" <email address hidden> wrote:\n\n>Which cinder driver are you using for your backend?  I could attach more\n>than 5 volumes to an instance and start/stop the instance.  This was a\n>quick test using devstack with cinder enabled.  Could you post the\n>output of a virsh dumpxml <instance>?\n>\n>--\n>You received this bug notification because you are subscribed to the bug\n>report.\n>https://bugs.launchpad.net/bugs/1272447\n>\n>Title:\n>  Instances fail to boot properly with more than 5 cinder volumes\n>  attached\n>\n>Status in Cinder:\n>  New\n>Status in OpenStack Compute (Nova):\n>  Triaged\n>\n>Bug description:\n>  Instances will start, but will not boot into their respective\n>  operating systems with more than five cinder volumes attached to the\n>  instance. The instance sits at a \"No bootable device\" error.\n>\n>  Openstack Version: OpenStack Havana (2013.2)\n>\n>  uname -a:   Linux controller01 3.8.0-29-generic #42~precise1-Ubuntu\n>  SMP Wed Aug 14 16:19:23 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n>\n>  Log files have been attached including cinder & nova logs from the\n>  controller and from the compute node where the instance resides. For\n>  reference, the instance name is:  'alex-test-volume' and volumes are\n>  named: 'alex-test-1' through 'alex-test-6'.\n>\n>To manage notifications about this bug go to:\n>https://bugs.launchpad.net/cinder/+bug/1272447/+subscriptions\n\nThe communication contained in this e-mail is confidential and is intended only for the named recipient(s) and may contain information that is privileged, proprietary, attorney work product or exempt from disclosure under applicable law. If you have received this message in error, or are not the named recipient(s), please note that any form of distribution, copying or use of this communication or the information in it is strictly prohibited and may be unlawful. Please immediately notify the sender of the error, and delete this communication including any attached files from your system. Thank you for your cooperation.\n", 
            "date_created": "2014-02-13 19:34:19+00:00", 
            "author": "https://api.launchpad.net/1.0/~ablack"
        }, 
        {
            "content": "I got a chance to look at the log.  Most of them do not contain a lot of info on what went wrong.  I saw a lot of these messages in the nova-api log: \n\n- Authorization failed for token \n- Got mysql server has gone away: (2006, 'MySQL server has gone away')\n\nIs your MySQL server still active?\n\nAccording to http://dev.mysql.com/doc/refman/5.0/en/gone-away.html: The most common reason for the MySQL server has gone away error is that the server timed out and closed the connection.  By default, the server closes the connection after eight hours if nothing has happened.\n\nAlso, I saw this messages in nova-compute, but I do not believe it is related to your issue:\n- Failed to mount filesystem: Unexpected error while running command.\nCommand: sudo nova-rootwrap /etc/nova/rootwrap.conf mount /dev/nbd6 /tmp/openstack-vfs-localfs0HxTXd\nExit code: 32\nStdout: ''\nStderr: 'mount: you must specify the filesystem type\\n' mnt\n\n\nDid you see anything in /var/log/libvirt/libvirtd.log?\n\nFor what it is worth, I recently setup gluster and devstack on a 2 node environment to try this scenario out and was able to attach 6 nodes to my instance.", 
            "date_created": "2014-03-15 14:08:33.291071+00:00", 
            "author": "https://api.launchpad.net/1.0/~thang-pham"
        }, 
        {
            "content": "Moving this to incomplete as it seems that thang-pham managed to show that it is in fact working. Feel free to move back to confirmed if you feel that this is in fact an issue.", 
            "date_created": "2014-03-17 14:29:53.686622+00:00", 
            "author": "https://api.launchpad.net/1.0/~ndipanov"
        }, 
        {
            "content": "Marked as Incomplete in Cinder too. As Nikola said too, feel free to move back to confirmed if you still see the issue..", 
            "date_created": "2014-09-09 13:55:35.367223+00:00", 
            "author": "https://api.launchpad.net/1.0/~rushiagr"
        }, 
        {
            "content": "Marking as Invalid since there's been no response from reporter in > 6 months and others confirmed it works for them.", 
            "date_created": "2014-11-19 14:27:07.717420+00:00", 
            "author": "https://api.launchpad.net/1.0/~berrange"
        }
    ]
}