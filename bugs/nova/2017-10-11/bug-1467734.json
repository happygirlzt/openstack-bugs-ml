{
    "status": "Invalid", 
    "last_updated": "2015-06-24 07:29:19.457450+00:00", 
    "description": "Bug Description\n \nenvironment:  openstack kilo centos7 tree node(controller nova neutron)\n\nwhen I launch a instance in dashborad,it masks a mistake.the prompt is: No valid host was found. There are not enough hosts available.].\n\nIn controller node /var/log/nova/nova-conductor.log shows:\nFile \"/usr/lib/python2.7/site-packages/nova/scheduler/manager.py\", line 86, in select_destinations\n    filter_properties)\n\n  File \"/usr/lib/python2.7/site-packages/nova/scheduler/filter_scheduler.py\", line 80, in select_destinations\n    raise exception.NoValidHost(reason=reason)\n\nNoValidHost: No valid host was found. There are not enough hosts available.\n\n\nIn compute node /var/log/nova/nova-compute.log shows:\n\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Attempting claim: memory 512 MB, disk 1 GB\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Total memory: 7741 MB, used: 512.00 MB\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] memory limit: 11611.50 MB, free: 11099.50 MB\n2015-06-22 22:33:33.641 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Total disk: 98 GB, used: 0.00 GB\n2015-06-22 22:33:33.641 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] disk limit not specified, defaulting to unlimited\n2015-06-22 22:33:33.657 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Claim successful\n2015-06-22 22:33:33.736 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:33.911 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:34.089 22560 INFO nova.virt.libvirt.driver [req-ba296006-b580-4e49-ab9e-506f3f3d8d31 - - - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Creating image\n2015-06-22 22:33:34.277 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:36.754 22560 ERROR nova.compute.manager [req-ba296006-b580-4e49-ab9e-506f3f3d8d31 - - - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Instance failed to spawn\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Traceback (most recent call last):\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2442, in _build_resources\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     yield resources\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2314, in _build_and_run_instance\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     block_device_info=block_device_info)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2351, in spawn\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     write_to_disk=True)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4172, in _get_guest_xml\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     context)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4043, in _get_guest_config\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     flavor, virt_type)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/vif.py\", line 374, in get_config\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     _(\"Unexpected vif_type=%s\") % vif_type)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] NovaException: Unexpected vif_type=binding_failed\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] \n2015-06-22 22:33:36.755 22560 INFO nova.compute.manager [req-73d92fcd-e293-4581-b9fe-ec060ed40de6 5e725319a5804879b9db7ee2aad6241d 92272f7c0c9d4cd884037296afdc2d66 - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Terminating instance\n\n\nothers log haven't error", 
    "tags": [
        "libvirt", 
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1467734", 
    "owner": "None", 
    "id": 1467734, 
    "index": 5617, 
    "created": "2015-06-23 03:24:16.389272+00:00", 
    "title": "openstack kilo can't launch a instance  nova-conductor's and nova-compute's log have error", 
    "comments": [
        {
            "content": "Bug Description\n \nenvironment:  openstack kilo centos7 tree node(controller nova neutron)\n\nwhen I launch a instance in dashborad,it masks a mistake.the prompt is: No valid host was found. There are not enough hosts available.].\n\nIn controller node /var/log/nova/nova-conductor.log shows:\nFile \"/usr/lib/python2.7/site-packages/nova/scheduler/manager.py\", line 86, in select_destinations\n    filter_properties)\n\n  File \"/usr/lib/python2.7/site-packages/nova/scheduler/filter_scheduler.py\", line 80, in select_destinations\n    raise exception.NoValidHost(reason=reason)\n\nNoValidHost: No valid host was found. There are not enough hosts available.\n\n\nIn compute node /var/log/nova/nova-compute.log shows:\n\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Attempting claim: memory 512 MB, disk 1 GB\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Total memory: 7741 MB, used: 512.00 MB\n2015-06-22 22:33:33.640 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] memory limit: 11611.50 MB, free: 11099.50 MB\n2015-06-22 22:33:33.641 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Total disk: 98 GB, used: 0.00 GB\n2015-06-22 22:33:33.641 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] disk limit not specified, defaulting to unlimited\n2015-06-22 22:33:33.657 22560 INFO nova.compute.claims [-] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Claim successful\n2015-06-22 22:33:33.736 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:33.911 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:34.089 22560 INFO nova.virt.libvirt.driver [req-ba296006-b580-4e49-ab9e-506f3f3d8d31 - - - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Creating image\n2015-06-22 22:33:34.277 22560 INFO nova.scheduler.client.report [-] Compute_service record updated for ('node-79', 'node-79')\n2015-06-22 22:33:36.754 22560 ERROR nova.compute.manager [req-ba296006-b580-4e49-ab9e-506f3f3d8d31 - - - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Instance failed to spawn\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Traceback (most recent call last):\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2442, in _build_resources\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     yield resources\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2314, in _build_and_run_instance\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     block_device_info=block_device_info)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2351, in spawn\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     write_to_disk=True)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4172, in _get_guest_xml\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     context)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4043, in _get_guest_config\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     flavor, virt_type)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/vif.py\", line 374, in get_config\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf]     _(\"Unexpected vif_type=%s\") % vif_type)\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] NovaException: Unexpected vif_type=binding_failed\n2015-06-22 22:33:36.754 22560 TRACE nova.compute.manager [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] \n2015-06-22 22:33:36.755 22560 INFO nova.compute.manager [req-73d92fcd-e293-4581-b9fe-ec060ed40de6 5e725319a5804879b9db7ee2aad6241d 92272f7c0c9d4cd884037296afdc2d66 - - -] [instance: 0f326b28-bef5-4d77-99c8-0949e3a00dbf] Terminating instance\n\n\nothers log haven't error", 
            "date_created": "2015-06-23 03:24:16.389272+00:00", 
            "author": "https://api.launchpad.net/1.0/~1403383953-h"
        }, 
        {
            "content": "Your description doesn't explain why this was opened as a private security vulnerability report. If this was meant to be a normal bug report, please switch it from \"private security\" to just \"public\" so that the nova developers will be able to see it. Thanks!", 
            "date_created": "2015-06-23 11:29:19.406291+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "@Moonlight -shadow (1403383953-h):\n\nThe error \"Unexpected vif_type=binding_failed\" could be caused by a misconfiguration of Neutron. You could try [1] to resolve this. Also the \"nova.conf\" configuration option \"vif_plugging_is_fatal=False\" [2] could help you, depending on the purpose of your OpenStack installation. I close this bug as \"invalid\". Please feel free to set this bug to \"new\" again if you think that there is an issue which is not caused by a misconfiguration.\n\n[1] https://ask.openstack.org/en/question/48407/instance-failing-to-spawn-logs-show-novaexception-unexpected-vif_typebinding_failed/\n[2] http://docs.openstack.org/kilo/config-reference/content/list-of-compute-config-options.html", 
            "date_created": "2015-06-24 07:29:18.780923+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ]
}