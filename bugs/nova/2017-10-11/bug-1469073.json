{
    "status": "Expired", 
    "last_updated": "2015-09-16 04:17:24.582194+00:00", 
    "description": "Using the body to create a instance, the instance is active, but instance os can't be loaded:\n{\n  \"server\": {\n    \"name\": \"BFVS\",\n    \"imageRef\": \"91959f5d-16f9-4dd0-823e-81fa11d2add3\",\n    \"block_device_mapping_v2\": [\n      {\n        \"device_type\": \"disk\",\n        \"uuid\": \"91959f5d-16f9-4dd0-823e-81fa11d2add3\",\n        \"source_type\": \"image\",\n        \"destination_type\": \"volume\",\n        \"boot_index\": \"0\",\n        \"delete_on_termination\": false,\n        \"volume_size\": \"4\",\n        \"disk_bus\": \"scsi\"\n      }\n    ],\n    \"flavorRef\": \"2\",\n    \"max_count\": 1,\n    \"min_count\": 1,\n    \"networks\": [\n      {\n        \"uuid\": \"984e18a5-3225-49b4-861a-779ad75d6e0a\"\n      }\n    ],\n\"user_data\": \"IyEvYmluL3NoCnBhc3N3ZCB1YnVudHU8PEVPRgp1YnVudHUKdWJ1bnR1CkVPRgpzZWQgLWkgJ3MvUGFzc3dvcmRBdXRoZW50aWNhdGlvbiBuby9QYXNzd29yZEF1dGhlbnRpY2F0aW9uIHllcy9nJyAvZXRjL3NzaC9zc2hkX2NvbmZpZwpzZXJ2aWNlIHNzaCByZXN0YXJ0\"\n  }\n}\n\nThe libvirt.xml generated is:\n<disk type=\"file\" device=\"cdrom\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/831e1529-5275-4a0c-b2fb-90f467b220ff/disk.config\"/>\n      <target bus=\"ide\" dev=\"hdd\"/>\n    </disk>\n    <disk type=\"block\" device=\"disk\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source dev=\"/dev/disk/by-path/ip-103.30.0.58:3260-iscsi-iqn.2010-10.org.openstack:volume-ed94715e-3e46-4463-9669-4f80393c48ef-lun-1\"/>\n      <target bus=\"scsi\" dev=\"sda\"/>\n      <serial>ed94715e-3e46-4463-9669-4f80393c48ef</serial>\n    </disk>\n\nThe nova.conf is:\n[DEFAULT]\nvif_plugging_timeout = 300\nvif_plugging_is_fatal = True\nlinuxnet_interface_driver =\nsecurity_group_api = neutron\nnetwork_api_class = nova.network.neutronv2.api.API\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\ncompute_driver = libvirt.LibvirtDriver\ndefault_ephemeral_format = ext4\nmetadata_workers = 12\nec2_workers = 12\nosapi_compute_workers = 12\nrpc_backend = rabbit\nkeystone_ec2_url = http://103.30.0.58:5000/v2.0/ec2tokens\nec2_dmz_host = 103.30.0.58\nvncserver_proxyclient_address = 127.0.0.1\nvncserver_listen = 127.0.0.1\nvnc_enabled = true\nxvpvncproxy_base_url = http://103.30.0.58:6081/console\nnovncproxy_base_url = http://103.30.0.58:6080/vnc_auto.html\nforce_config_drive = True\nuse_syslog = True\nsend_arp_for_ha = True\nmulti_host = True\ninstances_path = /opt/stack/data/nova/instances\nstate_path = /opt/stack/data/nova\nenabled_apis = ec2,osapi_compute,metadata\ninstance_name_template = instance-%08x\nmy_ip = 103.30.0.58\ns3_port = 3333\ns3_host = 103.30.0.58\ndefault_floating_pool = public\nforce_dhcp_release = True\ndhcpbridge_flagfile = /etc/nova/nova.conf\nscheduler_driver = nova.scheduler.filter_scheduler.FilterScheduler\nrootwrap_config = /etc/nova/rootwrap.conf\napi_paste_config = /etc/nova/api-paste.ini\nallow_migrate_to_same_host = True\nallow_resize_to_same_host = True\ndebug = True\nverbose = True\n\n[database]\nconnection = mysql://root:xxx@103.30.0.58/nova?charset=utf8\n\n[osapi_v3]\nenabled = True\n\n[keystone_authtoken]\nsigning_dir = /var/cache/nova\ncafile = /opt/stack/data/ca-bundle.pem\nauth_uri = http://103.30.0.58:5000\nproject_domain_id = default\nproject_name = service\nuser_domain_id = default\npassword = xxx\nusername = nova\nauth_url = http://103.30.0.58:35357\nauth_plugin = password\n\n[oslo_concurrency]\nlock_path = /opt/stack/data/nova\n\n[spice]\nenabled = false\nhtml5proxy_base_url = http://103.30.0.58:6082/spice_auto.html\n\n[oslo_messaging_rabbit]\nrabbit_userid = stackrabbit\nrabbit_password = xxx\nrabbit_hosts = 103.30.0.58\n\n[glance]\napi_servers = http://103.30.0.58:9292\n\n[cinder]\nos_region_name = RegionOne\n\n[libvirt]\nvif_driver = nova.virt.libvirt.vif.LibvirtGenericVIFDriver\ninject_partition = -2\nlive_migration_uri = qemu+ssh://stack@%s/system\nuse_usb_tablet = False\ncpu_mode = none\nvirt_type = kvm\nimages_volume_group = novavg\nimages_type = lvm\n\n[neutron]\nservice_metadata_proxy = True\nurl = http://103.30.0.58:9696\nregion_name = RegionOne\nadmin_tenant_name = service\nauth_strategy = keystone\nadmin_auth_url = http://103.30.0.58:35357/v2.0\nadmin_password = xxx\nadmin_username = neutron\n\n[keymgr]\nfixed_key = ded30f541b44b53c3ed8304ba20bb9d710b123de7313398b02993e72c2fadc69", 
    "tags": [
        "disks", 
        "libvirt"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1469073", 
    "owner": "None", 
    "id": 1469073, 
    "index": 5621, 
    "created": "2015-06-26 09:14:56.832499+00:00", 
    "title": "disk-bus=scsi in block-device-mapping is invalid", 
    "comments": [
        {
            "content": "Using the body to create a instance, the instance is active, but instance os can't be loaded:\n{\n  \"server\": {\n    \"name\": \"BFVS\",\n    \"imageRef\": \"91959f5d-16f9-4dd0-823e-81fa11d2add3\",\n    \"block_device_mapping_v2\": [\n      {\n        \"device_type\": \"disk\",\n        \"uuid\": \"91959f5d-16f9-4dd0-823e-81fa11d2add3\",\n        \"source_type\": \"image\",\n        \"destination_type\": \"volume\",\n        \"boot_index\": \"0\",\n        \"delete_on_termination\": false,\n        \"volume_size\": \"4\",\n        \"disk_bus\": \"scsi\"\n      }\n    ],\n    \"flavorRef\": \"2\",\n    \"max_count\": 1,\n    \"min_count\": 1,\n    \"networks\": [\n      {\n        \"uuid\": \"984e18a5-3225-49b4-861a-779ad75d6e0a\"\n      }\n    ],\n\"user_data\": \"IyEvYmluL3NoCnBhc3N3ZCB1YnVudHU8PEVPRgp1YnVudHUKdWJ1bnR1CkVPRgpzZWQgLWkgJ3MvUGFzc3dvcmRBdXRoZW50aWNhdGlvbiBuby9QYXNzd29yZEF1dGhlbnRpY2F0aW9uIHllcy9nJyAvZXRjL3NzaC9zc2hkX2NvbmZpZwpzZXJ2aWNlIHNzaCByZXN0YXJ0\"\n  }\n}\n\nThe libvirt.xml generated is:\n<disk type=\"file\" device=\"cdrom\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source file=\"/opt/stack/data/nova/instances/831e1529-5275-4a0c-b2fb-90f467b220ff/disk.config\"/>\n      <target bus=\"ide\" dev=\"hdd\"/>\n    </disk>\n    <disk type=\"block\" device=\"disk\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source dev=\"/dev/disk/by-path/ip-103.30.0.58:3260-iscsi-iqn.2010-10.org.openstack:volume-ed94715e-3e46-4463-9669-4f80393c48ef-lun-1\"/>\n      <target bus=\"scsi\" dev=\"sda\"/>\n      <serial>ed94715e-3e46-4463-9669-4f80393c48ef</serial>\n    </disk>\n\nThe nova.conf is:\n[DEFAULT]\nvif_plugging_timeout = 300\nvif_plugging_is_fatal = True\nlinuxnet_interface_driver =\nsecurity_group_api = neutron\nnetwork_api_class = nova.network.neutronv2.api.API\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\ncompute_driver = libvirt.LibvirtDriver\ndefault_ephemeral_format = ext4\nmetadata_workers = 12\nec2_workers = 12\nosapi_compute_workers = 12\nrpc_backend = rabbit\nkeystone_ec2_url = http://103.30.0.58:5000/v2.0/ec2tokens\nec2_dmz_host = 103.30.0.58\nvncserver_proxyclient_address = 127.0.0.1\nvncserver_listen = 127.0.0.1\nvnc_enabled = true\nxvpvncproxy_base_url = http://103.30.0.58:6081/console\nnovncproxy_base_url = http://103.30.0.58:6080/vnc_auto.html\nforce_config_drive = True\nuse_syslog = True\nsend_arp_for_ha = True\nmulti_host = True\ninstances_path = /opt/stack/data/nova/instances\nstate_path = /opt/stack/data/nova\nenabled_apis = ec2,osapi_compute,metadata\ninstance_name_template = instance-%08x\nmy_ip = 103.30.0.58\ns3_port = 3333\ns3_host = 103.30.0.58\ndefault_floating_pool = public\nforce_dhcp_release = True\ndhcpbridge_flagfile = /etc/nova/nova.conf\nscheduler_driver = nova.scheduler.filter_scheduler.FilterScheduler\nrootwrap_config = /etc/nova/rootwrap.conf\napi_paste_config = /etc/nova/api-paste.ini\nallow_migrate_to_same_host = True\nallow_resize_to_same_host = True\ndebug = True\nverbose = True\n\n[database]\nconnection = mysql://root:xxx@103.30.0.58/nova?charset=utf8\n\n[osapi_v3]\nenabled = True\n\n[keystone_authtoken]\nsigning_dir = /var/cache/nova\ncafile = /opt/stack/data/ca-bundle.pem\nauth_uri = http://103.30.0.58:5000\nproject_domain_id = default\nproject_name = service\nuser_domain_id = default\npassword = xxx\nusername = nova\nauth_url = http://103.30.0.58:35357\nauth_plugin = password\n\n[oslo_concurrency]\nlock_path = /opt/stack/data/nova\n\n[spice]\nenabled = false\nhtml5proxy_base_url = http://103.30.0.58:6082/spice_auto.html\n\n[oslo_messaging_rabbit]\nrabbit_userid = stackrabbit\nrabbit_password = xxx\nrabbit_hosts = 103.30.0.58\n\n[glance]\napi_servers = http://103.30.0.58:9292\n\n[cinder]\nos_region_name = RegionOne\n\n[libvirt]\nvif_driver = nova.virt.libvirt.vif.LibvirtGenericVIFDriver\ninject_partition = -2\nlive_migration_uri = qemu+ssh://stack@%s/system\nuse_usb_tablet = False\ncpu_mode = none\nvirt_type = kvm\nimages_volume_group = novavg\nimages_type = lvm\n\n[neutron]\nservice_metadata_proxy = True\nurl = http://103.30.0.58:9696\nregion_name = RegionOne\nadmin_tenant_name = service\nauth_strategy = keystone\nadmin_auth_url = http://103.30.0.58:35357/v2.0\nadmin_password = xxx\nadmin_username = neutron\n\n[keymgr]\nfixed_key = ded30f541b44b53c3ed8304ba20bb9d710b123de7313398b02993e72c2fadc69", 
            "date_created": "2015-06-26 09:14:56.832499+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhangni"
        }, 
        {
            "content": "Maybe the problem is in LVM, Set the default source_type is block:\n\nclass Lvm(Image):\n    @staticmethod\n    def escape(filename):\n        return filename.replace('_', '__')\n\n    def __init__(self, instance=None, disk_name=None, path=None):\n        super(Lvm, self).__init__(\"block\", \"raw\", is_block_dev=True)", 
            "date_created": "2015-06-26 09:17:45.571900+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhangni"
        }, 
        {
            "content": "I can't reproduce this bug.\nPlease offer more information such as your api endpoint or nova branch sha number", 
            "date_created": "2015-07-17 05:05:48.933912+00:00", 
            "author": "https://api.launchpad.net/1.0/~lyanchih"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2015-09-16 04:17:20.591940+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ]
}