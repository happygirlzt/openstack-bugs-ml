{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:57:00.684943+00:00", 
    "description": "when I port negative tempest  test into v3, this test cann't pass against v3 api. I think it failed because the security_groups extension has not been implemented.\n\n     @attr(type=['negative', 'gate'])\n    def test_create_with_nonexistent_security_group(self):\n        # Create a server with a nonexistent security group\n\n        security_groups = [{'name': 'does_not_exist'}]\n        self.assertRaises(exceptions.BadRequest,\n                          self.create_server,\n                          security_groups=security_groups)\n\n\nthe following is the log:\n\n\nFAIL: tempest.api.compute.servers.v3.test_servers_negative.ServersNegativeV3TestJSON.test_create_with_nonexistent_security_group[gate,negative]\n----------------------------------------------------------------------\n_StringException: Traceback (most recent call last):\n  File \"/opt/stack/tempest/tempest/api/compute/servers/v3/test_servers_negative.py\", line 249, in test_create_with_nonexistent_security_group\n    security_groups=security_groups)\n  File \"/opt/stack/tempest/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 394, in assertRaises\n    self.assertThat(our_callable, matcher)\n  File \"/opt/stack/tempest/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 417, in assertThat\n    raise MismatchError(matchee, matcher, mismatch, verbose)\nMismatchError: <bound method type.create_server of <class 'tempest.api.compute.servers.v3.test_servers_negative.ServersNegativeV3TestJSON'>> returned ({'status': '202', 'content-length': '345', 'x-compute-request-id': 'req-0251d6a1-38e0-4249-8ee2-459fb09fa0a0', 'location': 'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', 'date': 'Tue, 06 Aug 2013 09:03:29 GMT', 'content-type': 'application/json'}, {u'links': [{u'href': u'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', u'rel': u'self'}, {u'href': u'http://192.168.1.101:8774/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', u'rel': u'bookmark'}], u'id': u'c5738f95-11ad-42d0-b91d-bbb248c834ec', u'security_groups': [{u'name': u'default'}], u'adminPass': u'cBR2Y9tt3nhr'})\n\n-------------------- >> begin captured logging << --------------------\ntempest.common.rest_client: INFO: Request: POST http://192.168.1.101:8774/v3/servers\ntempest.common.rest_client: DEBUG: Request Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<Token omitted>'}\ntempest.common.rest_client: DEBUG: Request Body: {\"server\": {\"security_groups\": [{\"name\": \"does_not_exist\"}], \"flavorRef\": 42, \"name\": \"ServersNegativeV3TestJSON-instance24887116\", \"imageRef\": \"cade0819-2939-484b-a52f-600d039aefc1\"}}\ntempest.common.rest_client: INFO: Response Status: 202\ntempest.common.rest_client: DEBUG: Response Headers: {'content-length': '345', 'location': 'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', 'date': 'Tue, 06 Aug 2013 09:03:29 GMT', 'x-compute-request-id': 'req-0251d6a1-38e0-4249-8ee2-459fb09fa0a0', 'content-type': 'application/json'}\ntempest.common.rest_client: DEBUG: Response Body: {\"server\": {\"security_groups\": [{\"name\": \"default\"}], \"id\": \"c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"links\": [{\"href\": \"http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"rel\": \"self\"}, {\"href\": \"http://192.168.1.101:8774/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"rel\": \"bookmark\"}], \"adminPass\": \"cBR2Y9tt3nhr\"}}\n--------------------- >> end captured logging << ---------------------", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1208746", 
    "owner": "https://api.launchpad.net/1.0/~cyeoh-0", 
    "id": 1208746, 
    "index": 1173, 
    "created": "2013-08-06 09:21:57.248180+00:00", 
    "title": "no validation for security groups in create server of v3 api", 
    "comments": [
        {
            "content": "when I port negative tempest  test into v3, this test cann't pass against v3 api. I think it failed because the security_groups extension has not been implemented.\n\n     @attr(type=['negative', 'gate'])\n    def test_create_with_nonexistent_security_group(self):\n        # Create a server with a nonexistent security group\n\n        security_groups = [{'name': 'does_not_exist'}]\n        self.assertRaises(exceptions.BadRequest,\n                          self.create_server,\n                          security_groups=security_groups)\n\n\nthe following is the log:\n\n\nFAIL: tempest.api.compute.servers.v3.test_servers_negative.ServersNegativeV3TestJSON.test_create_with_nonexistent_security_group[gate,negative]\n----------------------------------------------------------------------\n_StringException: Traceback (most recent call last):\n  File \"/opt/stack/tempest/tempest/api/compute/servers/v3/test_servers_negative.py\", line 249, in test_create_with_nonexistent_security_group\n    security_groups=security_groups)\n  File \"/opt/stack/tempest/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 394, in assertRaises\n    self.assertThat(our_callable, matcher)\n  File \"/opt/stack/tempest/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 417, in assertThat\n    raise MismatchError(matchee, matcher, mismatch, verbose)\nMismatchError: <bound method type.create_server of <class 'tempest.api.compute.servers.v3.test_servers_negative.ServersNegativeV3TestJSON'>> returned ({'status': '202', 'content-length': '345', 'x-compute-request-id': 'req-0251d6a1-38e0-4249-8ee2-459fb09fa0a0', 'location': 'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', 'date': 'Tue, 06 Aug 2013 09:03:29 GMT', 'content-type': 'application/json'}, {u'links': [{u'href': u'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', u'rel': u'self'}, {u'href': u'http://192.168.1.101:8774/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', u'rel': u'bookmark'}], u'id': u'c5738f95-11ad-42d0-b91d-bbb248c834ec', u'security_groups': [{u'name': u'default'}], u'adminPass': u'cBR2Y9tt3nhr'})\n\n-------------------- >> begin captured logging << --------------------\ntempest.common.rest_client: INFO: Request: POST http://192.168.1.101:8774/v3/servers\ntempest.common.rest_client: DEBUG: Request Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<Token omitted>'}\ntempest.common.rest_client: DEBUG: Request Body: {\"server\": {\"security_groups\": [{\"name\": \"does_not_exist\"}], \"flavorRef\": 42, \"name\": \"ServersNegativeV3TestJSON-instance24887116\", \"imageRef\": \"cade0819-2939-484b-a52f-600d039aefc1\"}}\ntempest.common.rest_client: INFO: Response Status: 202\ntempest.common.rest_client: DEBUG: Response Headers: {'content-length': '345', 'location': 'http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec', 'date': 'Tue, 06 Aug 2013 09:03:29 GMT', 'x-compute-request-id': 'req-0251d6a1-38e0-4249-8ee2-459fb09fa0a0', 'content-type': 'application/json'}\ntempest.common.rest_client: DEBUG: Response Body: {\"server\": {\"security_groups\": [{\"name\": \"default\"}], \"id\": \"c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"links\": [{\"href\": \"http://192.168.1.101:8774/v3/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"rel\": \"self\"}, {\"href\": \"http://192.168.1.101:8774/servers/c5738f95-11ad-42d0-b91d-bbb248c834ec\", \"rel\": \"bookmark\"}], \"adminPass\": \"cBR2Y9tt3nhr\"}}\n--------------------- >> end captured logging << ---------------------", 
            "date_created": "2013-08-06 09:21:57.248180+00:00", 
            "author": "https://api.launchpad.net/1.0/~ivan-zhu"
        }, 
        {
            "content": "Looks like we have to port a bit more security groups to handle the server creation path", 
            "date_created": "2013-08-07 04:36:17.353863+00:00", 
            "author": "https://api.launchpad.net/1.0/~cyeoh-0"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/40608", 
            "date_created": "2013-08-07 12:36:19.158582+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "changing this to not critical because V3 will only be experimental in Havana.", 
            "date_created": "2013-08-28 17:05:48.846469+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/40608\nCommitted: http://github.com/openstack/nova/commit/15b1f6b6e03c5c89b4c16297b2103d67a8cae10c\nSubmitter: Jenkins\nBranch:    master\n\ncommit 15b1f6b6e03c5c89b4c16297b2103d67a8cae10c\nAuthor: Chris Yeoh <email address hidden>\nDate:   Wed Aug 7 21:57:33 2013 +0930\n\n    Adds support for security_groups for V3 API server create\n    \n    Adds support for specifying the security group during the V3 API\n    server create to the security groups extensions. This was\n    accidentally missed during the initial port. Adds the\n    corresponding XML deserialization and unittests.\n    \n    Partially implements blueprint nova-v3-api\n    Fixes bug #1208746\n    \n    Change-Id: Ie9d9e03ae20357212b0f270d97a19a0d0f9b0557\n", 
            "date_created": "2013-08-29 15:34:49.490493+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}