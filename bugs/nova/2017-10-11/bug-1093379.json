{
    "status": "Fix Released", 
    "last_updated": "2013-05-30 03:09:01.580049+00:00", 
    "description": "i install openstack with nova-compute-lxc.\n\nfor a test, i boot a lxc instance via \"nova boot\",then i stop it via \"nova stop\",finaly i reboot the host.\nwhen the host is up,the lxc instance's status is SUTOFF,i want to start the stoped lxc instnace via \"nova start\",but i can not do it.\n\nPS,i can boot new lxc instance via \"nova boot\".\n\nbelow is the nova-compute log:\n\n2012-12-24 10:54:15 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     pass\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 196, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 953, in start_instance\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.power_on_instance(context, instance)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     pass\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp KeyError: 'instance'", 
    "tags": [
        "lxc", 
        "nova"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1093379", 
    "owner": "https://api.launchpad.net/1.0/~jing", 
    "id": 1093379, 
    "index": 3285, 
    "created": "2012-12-24 02:57:07.113769+00:00", 
    "title": "i can not  start lxc instance via 'nova start' after rebooting the host ", 
    "comments": [
        {
            "content": "i install openstack with nova-compute-lxc.\n\nfor a test, i boot a lxc instance via \"nova boot\",then i stop it via \"nova stop\",finaly i reboot the host.\nwhen the host is up,the lxc instance's status is SUTOFF,i want to start the stoped lxc instnace via \"nova start\",but i can not do it.\n\nPS,i can boot new lxc instance via \"nova boot\".\n\nbelow is the nova-compute log:\n\n2012-12-24 10:54:15 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     pass\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 196, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 953, in start_instance\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.power_on_instance(context, instance)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     pass\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-12-24 10:54:15 TRACE nova.openstack.common.rpc.amqp KeyError: 'instance'", 
            "date_created": "2012-12-24 02:57:07.113769+00:00", 
            "author": "https://api.launchpad.net/1.0/~jing"
        }, 
        {
            "content": "when  i start the lxc instance via \"nova start\" after rebooting host, the nova-compute.log will report the belowing error\n\n#######################################################################################\n2013-01-11 16:35:38 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 275, in _process_data\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     pass\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 196, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 953, in start_instance\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.power_on_instance(context, instance)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 92, in wrapped\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 181, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     pass\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 167, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 202, in decorated_function\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2013-01-11 16:35:38 TRACE nova.openstack.common.rpc.amqp KeyError: 'instance'\n#######################################################################################", 
            "date_created": "2013-01-11 08:38:12.937451+00:00", 
            "author": "https://api.launchpad.net/1.0/~jing"
        }, 
        {
            "content": "Hi Lawrance,\n\nCould you please try the fix I proposed here?     https://bugs.launchpad.net/nova/+bug/1091639\nWhich should include the fix for your problem as well.", 
            "date_created": "2013-01-22 06:50:38.679101+00:00", 
            "author": "https://api.launchpad.net/1.0/~unicell"
        }, 
        {
            "content": "OK, i will try and post the result here ASAP, thanks a lot", 
            "date_created": "2013-01-28 01:00:26.289121+00:00", 
            "author": "https://api.launchpad.net/1.0/~jing"
        }, 
        {
            "content": "Any luck with that fix?", 
            "date_created": "2013-03-10 23:58:49.756558+00:00", 
            "author": "https://api.launchpad.net/1.0/~mikal"
        }, 
        {
            "content": "sorry for for the delay reply ,the bug is fixed in master trunk and i have tried it in folsom but failed :(", 
            "date_created": "2013-03-15 07:17:32.875033+00:00", 
            "author": "https://api.launchpad.net/1.0/~jing"
        }, 
        {
            "content": "Hi unicell\uff0c i tested openstack Grizzly  with LXC\uff0cand it fix my problem\uff0cthanks a lot", 
            "date_created": "2013-04-26 07:57:21.907506+00:00", 
            "author": "https://api.launchpad.net/1.0/~jing"
        }
    ]
}