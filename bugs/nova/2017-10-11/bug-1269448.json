{
    "status": "Fix Released", 
    "last_updated": "2014-09-22 22:19:14.896912+00:00", 
    "description": "Issuing\n[root@jhenner-node ~(keystone_admin)]# nova secgroup-add-rule  default tcp 33 33 0.0.0.0/0\n+-------------+-----------+---------+-----------+--------------+\n| IP Protocol | From Port | To Port | IP Range  | Source Group |\n+-------------+-----------+---------+-----------+--------------+\n| tcp         | 33        | 33      | 0.0.0.0/0 |              |\n+-------------+-----------+---------+-----------+--------------+\n\ncauses:\n[root@jhenner-node ~(keystone_admin)]# tail -f /var/log/nova/compute.log | grep -v DEBUG\n2014-01-15 14:43:33.040 19359 ERROR nova.openstack.common.rpc.amqp [req-8273843f-cf2f-4638-8e41-ad7b5278773b c617ab6c5a9c45ac97d59b3d799e431e 89cec4e2039c4344b30e74575444afd1] Exception during message handling\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 90, in wrapped\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 73, in wrapped\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 857, in refresh_instance_security_rules\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return _sync_refresh()\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 34, in __exit__\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     self.gen.throw(type, value, traceback)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 210, in lock\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     yield sem\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 856, in _sync_refresh\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return self.driver.refresh_instance_security_rules(instance)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp AttributeError: 'VMwareVCDriver' object has no attribute 'refresh_instance_security_rules'\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp \n\nThe secgroups seems to be ineffective, there seems to be no firewalling.", 
    "tags": [
        "vmware"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1269448", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1269448, 
    "index": 1367, 
    "created": "2014-01-15 14:49:53.552220+00:00", 
    "title": "VMware: VC driver lacks support for firewall rules", 
    "comments": [
        {
            "content": "Issuing\n[root@jhenner-node ~(keystone_admin)]# nova secgroup-add-rule  default tcp 33 33 0.0.0.0/0\n+-------------+-----------+---------+-----------+--------------+\n| IP Protocol | From Port | To Port | IP Range  | Source Group |\n+-------------+-----------+---------+-----------+--------------+\n| tcp         | 33        | 33      | 0.0.0.0/0 |              |\n+-------------+-----------+---------+-----------+--------------+\n\ncauses:\n[root@jhenner-node ~(keystone_admin)]# tail -f /var/log/nova/compute.log | grep -v DEBUG\n2014-01-15 14:43:33.040 19359 ERROR nova.openstack.common.rpc.amqp [req-8273843f-cf2f-4638-8e41-ad7b5278773b c617ab6c5a9c45ac97d59b3d799e431e 89cec4e2039c4344b30e74575444afd1] Exception during message handling\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 90, in wrapped\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 73, in wrapped\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 857, in refresh_instance_security_rules\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return _sync_refresh()\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 34, in __exit__\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     self.gen.throw(type, value, traceback)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 210, in lock\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     yield sem\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 856, in _sync_refresh\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp     return self.driver.refresh_instance_security_rules(instance)\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp AttributeError: 'VMwareVCDriver' object has no attribute 'refresh_instance_security_rules'\n2014-01-15 14:43:33.040 19359 TRACE nova.openstack.common.rpc.amqp \n\nThe secgroups seems to be ineffective, there seems to be no firewalling.", 
            "date_created": "2014-01-15 14:49:53.552220+00:00", 
            "author": "https://api.launchpad.net/1.0/~jhenner"
        }, 
        {
            "content": "https://bugzilla.redhat.com/show_bug.cgi?id=1055529", 
            "date_created": "2014-01-20 14:08:14.722899+00:00", 
            "author": "https://api.launchpad.net/1.0/~jhenner"
        }, 
        {
            "content": "We should certainly clean up this error message, but security groups with vSphere require the use of Neutron.  See the limitations section of http://docs.openstack.org/trunk/config-reference/content/vmware.html", 
            "date_created": "2014-01-20 17:04:49.027150+00:00", 
            "author": "https://api.launchpad.net/1.0/~danwent"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/69600", 
            "date_created": "2014-01-28 13:46:59.031107+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Addressed by https://review.openstack.org/69600", 
            "date_created": "2014-01-28 13:47:04.668991+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/69600\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=5a98d7b61fa6adb1557e69f2f234406be0e2739c\nSubmitter: Jenkins\nBranch:    master\n\ncommit 5a98d7b61fa6adb1557e69f2f234406be0e2739c\nAuthor: Gary Kotton <email address hidden>\nDate:   Tue Jan 28 05:43:12 2014 -0800\n\n    Add declaration of 'refresh_instance_security_rules' to virt driver\n    \n    The method 'refresh_instance_security_rules' was not defined\n    in the virt driver ComputeDriver class. In cases where the\n    underlying virt driver does not support security groups\n    an exception would be encountered indication that the driver\n    class does not have the specific attribute.\n    \n    In addition to adding the method the patch set also catches the\n    exception NotImplementedError and logs a warning.\n    \n    Change-Id: Ia36b0dfb54a3ede86467d87f0650a0902adb6d46\n    Closes-bug: #1269448\n", 
            "date_created": "2014-03-09 21:40:53.519291+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/91262", 
            "date_created": "2014-04-30 03:00:08.749443+00:00", 
            "author": "https://api.launchpad.net/1.0/~openstack-gerrit"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/91262\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=ce354f595b897ac26548c535e6378b9cc9c7b110\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit ce354f595b897ac26548c535e6378b9cc9c7b110\nAuthor: Gary Kotton <email address hidden>\nDate:   Tue Jan 28 05:43:12 2014 -0800\n\n    Add declaration of 'refresh_instance_security_rules' to virt driver\n    \n    The method 'refresh_instance_security_rules' was not defined\n    in the virt driver ComputeDriver class. In cases where the\n    underlying virt driver does not support security groups\n    an exception would be encountered indication that the driver\n    class does not have the specific attribute.\n    \n    In addition to adding the method the patch set also catches the\n    exception NotImplementedError and logs a warning.\n    \n    Closes-bug: #1269448\n    (cherry picked from commit 5a98d7b61fa6adb1557e69f2f234406be0e2739c)\n    \n    Conflicts:\n    \tnova/tests/virt/hyperv/test_hypervapi.py\n    \n    Change-Id: Ia36b0dfb54a3ede86467d87f0650a0902adb6d46\n", 
            "date_created": "2014-09-20 07:39:30.658282+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}