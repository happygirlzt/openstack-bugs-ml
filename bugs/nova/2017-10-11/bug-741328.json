{
    "status": "Fix Released", 
    "last_updated": "2011-04-15 08:38:34.420230+00:00", 
    "description": "May be OS X specific, but when attempting to do retries the utils.execute code will fail.\n\n======================================================================\nERROR: test_retry_on_failure (nova.tests.test_utils.ExecuteTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/termie/p/nova/nova/tests/test_utils.py\", line 57, in test_retry_on_failure\n    delay_on_retry=False)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/unittest.py\", line 336, in failUnlessRaises\n    callableObj(*args, **kwargs)\n  File \"/Users/termie/p/nova/nova/utils.py\", line 160, in execute\n    result = obj.communicate(process_input)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/subprocess.py\", line 701, in communicate\n    return self._communicate(input)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/subprocess.py\", line 1224, in _communicate\n    data = os.read(self.stderr.fileno(), 1024)\nOSError: [Errno 35] Resource temporarily unavailable\n-------------------- >> begin captured logging << --------------------\n2011-03-23 12:47:16,563 DEBUG nova.utils [-] Running cmd (subprocess): /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI from (pid=592) execute /Users/termie/p/nova/nova/utils.py:149\n2011-03-23 12:47:16,580 DEBUG nova.utils [-] Result was 1 from (pid=592) execute /Users/termie/p/nova/nova/utils.py:165\n2011-03-23 12:47:16,581 DEBUG nova.utils [-] ['/var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg', '/var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI'] failed. Retrying. from (pid=592) execute /Users/termie/p/nova/nova/utils.py:182\n2011-03-23 12:47:16,582 DEBUG nova.utils [-] Running cmd (subprocess): /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI from (pid=592) execute /Users/termie/p/nova/nova/utils.py:149\n--------------------- >> end captured logging << ---------------------", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/741328", 
    "owner": "https://api.launchpad.net/1.0/~termie", 
    "id": 741328, 
    "index": 5034, 
    "created": "2011-03-23 22:23:52.541405+00:00", 
    "title": "utils.execute fails retries", 
    "comments": [
        {
            "content": "May be OS X specific, but when attempting to do retries the utils.execute code will fail.\n\n======================================================================\nERROR: test_retry_on_failure (nova.tests.test_utils.ExecuteTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/termie/p/nova/nova/tests/test_utils.py\", line 57, in test_retry_on_failure\n    delay_on_retry=False)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/unittest.py\", line 336, in failUnlessRaises\n    callableObj(*args, **kwargs)\n  File \"/Users/termie/p/nova/nova/utils.py\", line 160, in execute\n    result = obj.communicate(process_input)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/subprocess.py\", line 701, in communicate\n    return self._communicate(input)\n  File \"/usr/local/Cellar/python/2.6.5/lib/python2.6/subprocess.py\", line 1224, in _communicate\n    data = os.read(self.stderr.fileno(), 1024)\nOSError: [Errno 35] Resource temporarily unavailable\n-------------------- >> begin captured logging << --------------------\n2011-03-23 12:47:16,563 DEBUG nova.utils [-] Running cmd (subprocess): /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI from (pid=592) execute /Users/termie/p/nova/nova/utils.py:149\n2011-03-23 12:47:16,580 DEBUG nova.utils [-] Result was 1 from (pid=592) execute /Users/termie/p/nova/nova/utils.py:165\n2011-03-23 12:47:16,581 DEBUG nova.utils [-] ['/var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg', '/var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI'] failed. Retrying. from (pid=592) execute /Users/termie/p/nova/nova/utils.py:182\n2011-03-23 12:47:16,582 DEBUG nova.utils [-] Running cmd (subprocess): /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmpPYU_Pg /var/folders/vZ/vZRD261jEaOaybrhr4Aazk+++TI/-Tmp-/tmps5BtyI from (pid=592) execute /Users/termie/p/nova/nova/utils.py:149\n--------------------- >> end captured logging << ---------------------", 
            "date_created": "2011-03-23 22:23:52.541405+00:00", 
            "author": "https://api.launchpad.net/1.0/~termie"
        }, 
        {
            "content": "fixed proposed: https://code.launchpad.net/~termie/nova/execute_retry/+merge/54600", 
            "date_created": "2011-03-23 22:25:34.417983+00:00", 
            "author": "https://api.launchpad.net/1.0/~termie"
        }
    ]
}