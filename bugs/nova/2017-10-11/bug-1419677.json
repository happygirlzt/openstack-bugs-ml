{
    "status": "Invalid", 
    "last_updated": "2015-08-07 20:53:06.129207+00:00", 
    "description": "Booting a dedicated cpu instance is failed in libvirt 1.2.2.\nI think if the libvirt version is not enough, just ignore the memnodes parameter instead of throwing NoneType error.\n\n2015-02-09 03:37:03.193 19160 ERROR nova.compute.manager [-] [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Instance failed to spawn\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Traceback (most recent call last):\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2320, in _build_resources\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     yield resources\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2190, in _build_and_run_instance\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     flavor=flavor)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2333, in spawn\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     flavor=flavor)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4066, in _get_guest_xml\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     xml = conf.to_xml()\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 79, in to_xml\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     root = self.format_dom()\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1891, in format_dom\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     self._format_basic_props(root)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1820, in _format_basic_props\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     root.append(self.numatune.format_dom())\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1714, in format_dom\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     for node in self.memnodes:\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] TypeError: 'NoneType' object is not iterable\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]\n2015-02-09 03:37:03.194 AUDIT nova.compute.manager [req-81824176-50df-4d40-8834-d5af10268538 admin admin] [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Terminating instance\n\ndeployment info:\nstack@openstack:~$ $ virsh version\nCompiled against library: libvirt 1.2.2\nUsing library: libvirt 1.2.2\nUsing API: QEMU 1.2.2\nRunning hypervisor: QEMU 2.0.0", 
    "tags": [
        "libvirt"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1419677", 
    "owner": "https://api.launchpad.net/1.0/~liusheng", 
    "id": 1419677, 
    "index": 4146, 
    "created": "2015-02-09 09:38:28.422840+00:00", 
    "title": "NoneType Error was raised when booting a dedicated cpu instance on libvirt1.2.2", 
    "comments": [
        {
            "content": "Booting a dedicated cpu instance is failed in libvirt 1.2.2.\nI think if the libvirt version is not enough, just ignore the memnodes parameter instead of throwing NoveType error.\n\n2015-02-09 03:37:03.193 19160 ERROR nova.compute.manager [-] [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Instance failed to spawn\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Traceback (most recent call last):\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2320, in _build_resources\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     yield resources\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/compute/manager.py\", line 2190, in _build_and_run_instance\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     flavor=flavor)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2333, in spawn\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     flavor=flavor)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 4066, in _get_guest_xml\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     xml = conf.to_xml()\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 79, in to_xml\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     root = self.format_dom()\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1891, in format_dom\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     self._format_basic_props(root)\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1820, in _format_basic_props\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     root.append(self.numatune.format_dom())\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]   File \"/opt/stack/nova/nova/virt/libvirt/config.py\", line 1714, in format_dom\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]     for node in self.memnodes:\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] TypeError: 'NoneType' object is not iterable\n2015-02-09 03:37:03.193 19160 TRACE nova.compute.manager [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2]\n2015-02-09 03:37:03.194 AUDIT nova.compute.manager [req-81824176-50df-4d40-8834-d5af10268538 admin admin] [instance: c9de6f64-b75f-44ef-9b72-e27b9af180a2] Terminating instance\n\ndeployment info:\nstack@openstack:~$ $ virsh version\nCompiled against library: libvirt 1.2.2\nUsing library: libvirt 1.2.2\nUsing API: QEMU 1.2.2\nRunning hypervisor: QEMU 2.0.0", 
            "date_created": "2015-02-09 09:38:28.422840+00:00", 
            "author": "https://api.launchpad.net/1.0/~kiwik-chenrui"
        }, 
        {
            "content": "I have been authorized to work for this issue :)", 
            "date_created": "2015-02-27 01:44:29.608707+00:00", 
            "author": "https://api.launchpad.net/1.0/~liusheng"
        }, 
        {
            "content": "when I try to reproduce this issue, I cannot get the above error. I have briefly check the code, I found the \"self.memnodes\" has a default value of \"[]\", So, I guess this bug has been fixed :)", 
            "date_created": "2015-03-05 02:51:21.625889+00:00", 
            "author": "https://api.launchpad.net/1.0/~liusheng"
        }
    ]
}