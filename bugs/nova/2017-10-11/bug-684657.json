{
    "status": "Won't Fix", 
    "last_updated": "2010-12-16 16:49:17.629353+00:00", 
    "description": "novarc is currently trying to redefine an alias using /usr/bin/ec2-* tools when on my ubuntu maverick this is using /usr/bin/euca-* I am assuming this was renamed somewhere so probably could handle both case.\n\nanother low priority thing is that the novarc is very bashist and for the other shell user out there like zsh they would not have a BASH_SOURCE defined.", 
    "tags": [], 
    "importance": "Wishlist", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/684657", 
    "owner": "https://api.launchpad.net/1.0/~chmouel", 
    "id": 684657, 
    "index": 978, 
    "created": "2010-12-03 10:50:36.790363+00:00", 
    "title": "novarc improvement", 
    "comments": [
        {
            "content": "novarc is currently trying to redefine an alias using /usr/bin/ec2-* tools when on my ubuntu maverick this is using /usr/bin/euca-* I am assuming this was renamed somewhere so probably could handle both case.\n\nanother low priority thing is that the novarc is very bashist and for the other shell user out there like zsh they would not have a BASH_SOURCE defined.", 
            "date_created": "2010-12-03 10:50:36.790363+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "On 03/12/10 14:52, Soren Hansen wrote:\n> > 2010/12/3 Chmouel Boudjnah <email address hidden>:\n>> >> === modified file 'nova/auth/novarc.template'\n>> >> --- nova/auth/novarc.template   2010-07-15 15:52:11 +0000\n>> >> +++ nova/auth/novarc.template   2010-12-03 14:23:53 +0000\n>> >> @@ -1,3 +1,5 @@\n>> >> +[ -n $BASH_SOURCE ] || BASH_SOURCE=$(readlink -f $0)\n>> >> +\nThis is only for bash for zsh $0 would be the sourced script name. IE:\n\nchmouel@lutece:~$ echo $ZSH_VERSION\n4.3.10-dev-1-cvs0720\nchmouel@lutece:~$ cat /tmp/a.zsh\necho $0\nchmouel@lutece:~$ source /tmp/a.zsh\n/tmp/a.zsh\nchmouel@lutece:~$ bash --login\nchmouel@lutece:~$ source /tmp/a.zsh\nbash\nchmouel@lutece:~$\n\n> > This won't work. novarc is sourced, not run as a script, so $0\n> > is \"bash\" or something like that. What you need is an equivalent\n> > of __file__.\n> > \n>> >> -alias ec2-bundle-image=\"ec2-bundle-image --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\n>> >> -alias ec2-upload-bundle=\"ec2-upload-bundle -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\n>> >> +\n>> >> +[ -x /usr/bin/ec2-bundle-image ] && E_B_IMG=/usr/bin/ec2-bundle-image || E_B_IMG=/usr/bin/euca-bundle-image\n>> >> +[ -x /usr/bin/ec2-upload-image ] && E_U_IMG=/usr/bin/ec2-upload-bundle || E_U_IMG=/usr/bin/euca-upload-bundle\n>> >> +\n>> >> +alias ${E_B_IMG}=\"${E_B_IMG} --cert ${EC2_CERT} --privatekey ${EC2_PRIVATE_KEY} --user 42 --ec2cert ${NOVA_CERT}\"\n>> >> +alias ${E_U_IMG}=\"${E_U_IMG} -a ${EC2_ACCESS_KEY} -s ${EC2_SECRET_KEY} --url ${S3_URL} --ec2cert ${NOVA_CERT}\"\n> > \n> > I'm not sure this is necessary. I've succesfully run euca-*bundle*\n> > without any problems without this fix?\nI have just installed a ubuntu maverick from scratch and the euca2ool\nfrom maverick and it does not seem to be present :\n\nchmouel@chmoutest:~$ dpkg --get-selections|grep euca2ools\nchmouel@chmoutest:~$ sudo aptitude -y install euca2ools\nThe following NEW packages will be installed:\n  cloud-utils{a} euca2ools libyaml-0-2{a} python-boto{a} python-crypto{a}\n  python-m2crypto{a} python-paramiko{a} python-yaml{a}\n0 packages upgraded, 8 newly installed, 0 to remove and 32 not upgraded.\nNeed to get 1,672kB of archives. After unpacking 12.4MB will be used.\nGet:1 http://gb.archive.ubuntu.com/ubuntu/ maverick/main python-m2crypto\namd64 0.20.1-1ubuntu4 [206kB]\nGet:2 http://gb.archive.ubuntu.com/ubuntu/ maverick/main python-boto all\n1.9b-1ubuntu3 [182kB]\nGet:3 http://gb.archive.ubuntu.com/ubuntu/ maverick/main euca2ools all\n1.2-0ubuntu11 [74.4kB]\nGet:4 http://gb.archive.ubuntu.com/ubuntu/ maverick/main libyaml-0-2\namd64 0.1.3-1 [55.0kB]\nGet:5 http://gb.archive.ubuntu.com/ubuntu/ maverick/main python-crypto\namd64 2.0.1+dfsg1-4ubuntu2 [187kB]\nGet:6 http://gb.archive.ubuntu.com/ubuntu/ maverick/main python-paramiko\nall 1.7.6-2 [819kB]\nGet:7 http://gb.archive.ubuntu.com/ubuntu/ maverick/main python-yaml\namd64 3.09-4build1 [124kB]\nGet:8 http://gb.archive.ubuntu.com/ubuntu/ maverick/main cloud-utils all\n0.16ubuntu1 [24.6kB]\nFetched 1,672kB in 0s (3,662kB/s)\nSelecting previously deselected package python-m2crypto.\n(Reading database ... 25444 files and directories currently installed.)\nUnpacking python-m2crypto (from\n.../python-m2crypto_0.20.1-1ubuntu4_amd64.deb) ...\nSelecting previously deselected package python-boto.\nUnpacking python-boto (from .../python-boto_1.9b-1ubuntu3_all.deb) ...\nSelecting previously deselected package euca2ools.\nUnpacking euca2ools (from .../euca2ools_1.2-0ubuntu11_all.deb) ...\nSelecting previously deselected package libyaml-0-2.\nUnpacking libyaml-0-2 (from .../libyaml-0-2_0.1.3-1_amd64.deb) ...\nSelecting previously deselected package python-crypto.\nUnpacking python-crypto (from\n.../python-crypto_2.0.1+dfsg1-4ubuntu2_amd64.deb) ...\nSelecting previously deselected package python-paramiko.\nUnpacking python-paramiko (from .../python-paramiko_1.7.6-2_all.deb) ...\nSelecting previously deselected package python-yaml.\nUnpacking python-yaml (from .../python-yaml_3.09-4build1_amd64.deb) ...\nSelecting previously deselected package cloud-utils.\nUnpacking cloud-utils (from .../cloud-utils_0.16ubuntu1_all.deb) ...\nProcessing triggers for man-db ...\nSetting up python-m2crypto (0.20.1-1ubuntu4) ...\nSetting up python-boto (1.9b-1ubuntu3) ...\nSetting up euca2ools (1.2-0ubuntu11) ...\nSetting up libyaml-0-2 (0.1.3-1) ...\nSetting up python-crypto (2.0.1+dfsg1-4ubuntu2) ...\nSetting up python-yaml (3.09-4build1) ...\nProcessing triggers for python-central ...\nSetting up python-paramiko (1.7.6-2) ...\nSetting up cloud-utils (0.16ubuntu1) ...\nProcessing triggers for python-support ...\nProcessing triggers for libc-bin ...\nldconfig deferred processing now taking place\n\nchmouel@chmoutest:~$ ls /usr/bin/ec2-bundle-image\nls: cannot access /usr/bin/ec2-bundle-image: No such file or directory\n\nChmouel\n", 
            "date_created": "2010-12-03 15:08:34.695083+00:00", 
            "author": "https://api.launchpad.net/1.0/~chmouel"
        }, 
        {
            "content": "The euca-* tools don't need an alias (they use the env). Only the ec2-* tools need the extra parameters...\r\nMarking as wontfix, feel free to reopen if you disagree :)", 
            "date_created": "2010-12-16 16:49:15.348960+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}