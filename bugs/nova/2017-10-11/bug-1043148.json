{
    "status": "Invalid", 
    "last_updated": "2016-06-02 19:17:18.770212+00:00", 
    "description": "Apologies if this is a glance or swift bug (or not a bug at all!) but I think I've nailed it down to nova.\n\nSetup: \n\n* We are using latest nova in ubuntu precise.\n* using swift as a backend to glance\n* Compute nodes are running nova-compute and nova-network (have 10G ethernet)\n* glance-api and swift-proxy are installed on the same host. (also has 10G ethernet)\n\nWhen snapshotting instances we regularly get the snapshot failing.\n\nSometimes it works, sometimes it fails adding the 1st hunk and sometimes it fails after a few.\n\nLogs below show it failing after 34 hunks have been added to swift successfully (takes around 3 seconds to PUT a hunk until the error)\n\nThe reason I think this has something to do with nova is that I can successfully use the glance client from the compute node to upload the image.\n\nThere's a lot of log info below, happy to provide more information if needed. It been bugging us for sometime.\n\nI think the client read timeout is between glance and nova as glance and swift are on the same host so I would doubt they would timeout.\n\nThanks in advance.\n\nSam\n\n\n\n\nNova:\n2012-08-29 07:33:08 ERROR nova.rpc.amqp [req-33589abd-db75-4a1f-b36c-a64f41e8862f 25 23] Exception during message handling\n2012-08-29 07:33:08 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py\", line 253, in _process_data\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': {u'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ctxt': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': u'snapshot_instance',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'node_args': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'node_func': <bound method ComputeManager.snapshot_instance of <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.rpc.amqp.ProxyCallback object at 0x3e48d10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 114, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (<nova.compute.manager.ComputeManager object at 0x7f63192f4a90>,),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'event_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exc_info': (<class 'nova.exception.Invalid'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <traceback object at 0x4050d88>),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'f': <function snapshot_instance at 0x1f28500>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kw': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'level': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'notifier': <module 'nova.notifier.api' from '/usr/lib/python2.7/dist-packages/nova/notifier/api.pyc'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'payload': {'args': (<nova.compute.manager.ComputeManager object at 0x7f63192f4a90>,),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exception': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'publisher_id': 'compute.np-rcc6',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'temp_level': 'ERROR',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'temp_type': 'snapshot_instance'}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 183, in decorated_function\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'function': <function snapshot_instance at 0x1f28488>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'self': <contextlib.GeneratorContextManager object at 0x47500d0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'traceback': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'value': None}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 177, in decorated_function\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'function': <function snapshot_instance at 0x1f28488>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 965, in snapshot_instance\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'current_power_state': 1,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_ref': <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 114, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (<nova.virt.libvirt.connection.LibvirtConnection object at 0x238fdd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a'),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'event_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exc_info': (<class 'nova.exception.Invalid'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <traceback object at 0x3bd0638>),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'f': <function snapshot at 0x21101b8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kw': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'level': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'notifier': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'publisher_id': None}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 714, in snapshot\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'_cpus': 2,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_image_service': (<nova.image.glance.GlanceImageService object at 0x446f390>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a'),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_max_mem': 8388608L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_mem': 8388608L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_t': 22530000000L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'base': {'checksum': '76c16ce652fed5c3665294b10e79c270',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'created_at': datetime.datetime(2012, 4, 30, 0, 48, 2),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted_at': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'id': 'd5a4b467-de5e-4042-8ad0-86478c205e01',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': True,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_disk': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_ram': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'Ubuntu 12.04 LTS (Precise) amd64 UEC',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'size': 226623488,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'updated_at': datetime.datetime(2012, 4, 30, 0, 48, 38)},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_path': '/var/lib/nova/instances/instance-000020e2/disk',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'domain': <Element 'domain' at 0x3a377d0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_file': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_href': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'd5a4b467-de5e-4042-8ad0-86478c205e01',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_service': <nova.image.glance.GlanceImageService object at 0x49e6a90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance': <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'metadata': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'out_path': '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.virt.libvirt.connection.LibvirtConnection object at 0x238fdd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot': {'checksum': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'container_format': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'created_at': datetime.datetime(2012, 8, 29, 7, 23, 11),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted_at': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'id': 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_disk': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_ram': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_type': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': '2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'user_id': '25'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'size': 0,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'queued',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'updated_at': datetime.datetime(2012, 8, 29, 7, 23, 11)},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_image_service': <nova.image.glance.GlanceImageService object at 0x446f390>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_name': 'c9950d1ac5674d66b9bbb8179baf53d3',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'source': <Element 'source' at 0x3a02550>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'source_format': 'qcow2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'state': 1,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'tmpdir': '/tmp/tmp2WBWt8',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'virt_dom': <libvirt.virDomain instance at 0x4139c20>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'xml_desc': \"<domain type='kvm' id='31'>\\n  <name>instance-000020e2</name>\\n  <uuid>2fb5ba40-0f61-4360-bb57-f28871f7cebf</uuid>\\n  <memory>8388608</memory>\\n  <currentMemory>8388608</currentMemory>\\n  <vcpu>2</vcpu>\\n  <os>\\n    <type arch='x86_64' machine='pc-1.0'>hvm</type>\\n    <boot dev='hd'/>\\n  </os>\\n  <features>\\n    <acpi/>\\n  </features>\\n  <clock offset='utc'/>\\n  <on_poweroff>destroy</on_poweroff>\\n  <on_reboot>restart</on_reboot>\\n  <on_crash>destroy</on_crash>\\n  <devices>\\n    <emulator>/usr/bin/kvm</emulator>\\n    <disk type='file' device='disk'>\\n      <driver name='qemu' type='qcow2' cache='none'/>\\n      <source file='/var/lib/nova/instances/instance-000020e2/disk'/>\\n      <target dev='vda' bus='virtio'/>\\n      <alias name='virtio-disk0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\\n    </disk>\\n    <disk type='file' device='disk'>\\n      <driver name='qemu' type='qcow2' cache='none'/>\\n      <source file='/var/lib/nova/instances/instance-000020e2/disk.local'/>\\n      <target dev='vdb' bus='virtio'/>\\n      <alias name='virtio-disk1'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>\\n    </disk>\\n    <interface type='bridge'>\\n      <mac address='fa:16:3e:17:52:ce'/>\\n      <source bridge='br100'/>\\n      <target dev='vnet7'/>\\n      <filterref filter='nova-instance-instance-000020e2-fa163e1752ce'>\\n        <parameter name='DHCPSERVER' value='115.146.92.9'/>\\n        <parameter name='IP' value='115.146.94.228'/>\\n      </filterref>\\n      <alias name='net0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\\n    </interface>\\n    <serial type='file'>\\n      <source path='/var/lib/nova/instances/instance-000020e2/console.log'/>\\n      <target port='0'/>\\n      <alias name='serial0'/>\\n    </serial>\\n    <serial type='pty'>\\n      <source path='/dev/pts/8'/>\\n      <target port='1'/>\\n      <alias name='serial1'/>\\n    </serial>\\n    <console type='file'>\\n      <source path='/var/lib/nova/instances/instance-000020e2/console.log'/>\\n      <target type='serial' port='0'/>\\n      <alias name='serial0'/>\\n    </console>\\n    <input type='tablet' bus='usb'>\\n      <alias name='input0'/>\\n    </input>\\n    <input type='mouse' bus='ps2'/>\\n    <graphics type='vnc' port='5907' autoport='yes' listen='0.0.0.0' keymap='en-us'>\\n      <listen type='address' address='0.0.0.0'/>\\n    </graphics>\\n    <video>\\n      <model type='cirrus' vram='9216' heads='1'/>\\n      <alias name='video0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\\n    </video>\\n    <memballoon model='virtio'>\\n      <alias name='balloon0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>\\n    </memballoon>\\n  </devices>\\n  <seclabel type='dynamic' model='apparmor' relabel='yes'>\\n    <label>libvirt-2fb5ba40-0f61-4360-bb57-f28871f7cebf</label>\\n    <imagelabel>libvirt-2fb5ba40-0f61-4360-bb57-f28871f7cebf</imagelabel>\\n  </seclabel>\\n</domain>\\n\"}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/image/glance.py\", line 306, in update\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'client': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.image.glance.GlanceImageService object at 0x49e6a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/image/glance.py\", line 304, in update\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'client': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.image.glance.GlanceImageService object at 0x49e6a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/client.py\", line 195, in update_image\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'features': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 58, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': ('PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'}),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'func': <function do_request at 0x1e4c410>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 420, in do_request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'action': u'/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'params': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment='')}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 75, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'MAX_REDIRECTS': 5,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_': 0,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'func': <function _do_request at 0x1e4c578>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment='')}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 547, in _do_request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'_chunkbody': <function _chunkbody at 0x4759de8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_filelike': <function _filelike at 0x311b500>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_pushing': <function _pushing at 0x3e4eb90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_retry': <function _retry at 0x3be52a8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_sendbody': <function _sendbody at 0x4759c08>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_simple': <function _simple at 0x311b668>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'c': <httplib.HTTPConnection instance at 0x4675680>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'connection_type': <class httplib.HTTPConnection at 0x1dc5328>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'header': 'x-image-meta-name',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'iter': <generator object chunkiter at 0x4051cd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'path': u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'res': <httplib.HTTPResponse instance at 0x3e5a200>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status_code': 400,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment=''),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'use_sendfile': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'value': u'snap2012.1.2'}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp Invalid: Data supplied was not valid.\n2012-08-29 07:33:08 TRACE nova.rpc.amqp Details: 400 Bad Request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp The server could not comply with the request since it is either malformed or otherwise incorrect.\n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp  Error uploading image: (BackendException): Failed to add object to Swift. Got error from Swift: put_object('images', 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035', ...) failure and no ability to reset contents for reupload.  \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n\n\n\nGlance:\n ERROR [glance.api.v1.images] Traceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/glance/api/v1/images.py\", line 393, in _upload\n    image_size)\n  File \"/usr/lib/python2.7/dist-packages/glance/store/swift.py\", line 468, in add\n    raise glance.store.BackendException(msg)\nBackendException: Failed to add object to Swift.\nGot error from Swift: put_object('images', 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035', ...) failure and no ability to reset contents for reupload.\n\nSwift:\nAug 29 07:31:44 np-rcp1-int swift-proxy-server ERROR Client read timeout (60s) (txn: tx63d535ecc0e4436fb372548eba4117ed) (client_ip: 115.146.92.105)\nAug 29 07:31:53 np-rcp1-int swift-proxy-server 115.146.92.105 115.146.92.105 29/Aug/2012/07/31/53 PUT /v1/AUTH_3/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035 HTTP/1.0 408 - - 49c45a349eaf473aae3a1f948a2c4c5b 3342336 - - tx63d535ecc0e4436fb372548eba4117ed X-Tenant-Name%3A%20glance%0AX-Timestamp%3A%201346225444.59149%0AX-Role%3A%20Admin%0AX-User-Id%3A%2005981327e31941b28fd4ec0dfb4687a1%0AContent-Length%3A%20204800000%0AX-Auth-Token%3A%2049c45a349eaf473aae3a1f948a2c4c5b%0AX-Trans-Id%3A%20tx63d535ecc0e4436fb372548eba4117ed%0AX-Identity-Status%3A%20Confirmed%0AX-Roles%3A%20Admin%0AX-User%3A%20glance%0AHost%3A%20swift.rc.nectar.org.au%3A8888%0AX-Tenant-Id%3A%203%0AX-Tenant%3A%20glance%0AX-User-Name%3A%20glance%0AContent-Type%3A%20application/octet-stream%0AAccept-Encoding%3A%20identity 69.1460 -", 
    "tags": [
        "ops"
    ], 
    "importance": "Low", 
    "heat": 34, 
    "link": "https://bugs.launchpad.net/nova/+bug/1043148", 
    "owner": "None", 
    "id": 1043148, 
    "index": 5537, 
    "created": "2012-08-29 08:21:45.344962+00:00", 
    "title": "snapshots fail with client read timeout when using swift", 
    "comments": [
        {
            "content": "Apologies if this is a glance or swift bug (or not a bug at all!) but I think I've nailed it down to nova.\n\nSetup: \n\n* We are using latest nova in ubuntu precise.\n* using swift as a backend to glance\n* Compute nodes are running nova-compute and nova-network (have 10G ethernet)\n* glance-api and swift-proxy are installed on the same host. (also has 10G ethernet)\n\nWhen snapshotting instances we regularly get the snapshot failing.\n\nSometimes it works, sometimes it fails adding the 1st hunk and sometimes it fails after a few.\n\nLogs below show it failing after 34 hunks have been added to swift successfully (takes around 3 seconds to PUT a hunk until the error)\n\nThe reason I think this has something to do with nova is that I can successfully use the glance client from the compute node to upload the image.\n\nThere's a lot of log info below, happy to provide more information if needed. It been bugging us for sometime.\n\nI think the client read timeout is between glance and nova as glance and swift are on the same host so I would doubt they would timeout.\n\nThanks in advance.\n\nSam\n\n\n\n\nNova:\n2012-08-29 07:33:08 ERROR nova.rpc.amqp [req-33589abd-db75-4a1f-b36c-a64f41e8862f 25 23] Exception during message handling\n2012-08-29 07:33:08 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py\", line 253, in _process_data\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': {u'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ctxt': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': u'snapshot_instance',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'node_args': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'node_func': <bound method ComputeManager.snapshot_instance of <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.rpc.amqp.ProxyCallback object at 0x3e48d10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 114, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (<nova.compute.manager.ComputeManager object at 0x7f63192f4a90>,),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'event_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exc_info': (<class 'nova.exception.Invalid'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <traceback object at 0x4050d88>),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'f': <function snapshot_instance at 0x1f28500>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kw': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'level': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'notifier': <module 'nova.notifier.api' from '/usr/lib/python2.7/dist-packages/nova/notifier/api.pyc'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'payload': {'args': (<nova.compute.manager.ComputeManager object at 0x7f63192f4a90>,),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exception': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'publisher_id': 'compute.np-rcc6',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'temp_level': 'ERROR',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'temp_type': 'snapshot_instance'}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 183, in decorated_function\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'function': <function snapshot_instance at 0x1f28488>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'self': <contextlib.GeneratorContextManager object at 0x47500d0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'traceback': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'value': None}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 177, in decorated_function\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f27150>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'function': <function snapshot_instance at 0x1f28488>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 965, in snapshot_instance\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'backup_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'current_power_state': 1,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_type': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_ref': <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': u'2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'rotation': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.compute.manager.ComputeManager object at 0x7f63192f4a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 114, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': (<nova.virt.libvirt.connection.LibvirtConnection object at 0x238fdd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a'),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'e': Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'event_type': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'exc_info': (<class 'nova.exception.Invalid'>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            Invalid(Invalid(),),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <traceback object at 0x3bd0638>),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'f': <function snapshot at 0x21101b8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kw': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'level': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'notifier': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'publisher_id': None}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 714, in snapshot\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'_cpus': 2,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_image_service': (<nova.image.glance.GlanceImageService object at 0x446f390>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a'),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_max_mem': 8388608L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_mem': 8388608L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_t': 22530000000L,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'base': {'checksum': '76c16ce652fed5c3665294b10e79c270',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'created_at': datetime.datetime(2012, 4, 30, 0, 48, 2),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted_at': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'id': 'd5a4b467-de5e-4042-8ad0-86478c205e01',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': True,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_disk': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_ram': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'Ubuntu 12.04 LTS (Precise) amd64 UEC',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'size': 226623488,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'updated_at': datetime.datetime(2012, 4, 30, 0, 48, 38)},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_path': '/var/lib/nova/instances/instance-000020e2/disk',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'domain': <Element 'domain' at 0x3a377d0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_file': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_href': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'd5a4b467-de5e-4042-8ad0-86478c205e01',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_service': <nova.image.glance.GlanceImageService object at 0x49e6a90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance': <nova.db.sqlalchemy.models.Instance object at 0x446fe90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'metadata': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'out_path': '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.virt.libvirt.connection.LibvirtConnection object at 0x238fdd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot': {'checksum': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'container_format': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'created_at': datetime.datetime(2012, 8, 29, 7, 23, 11),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'deleted_at': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'id': 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_disk': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'min_ram': '0',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_type': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'instance_uuid': '2fb5ba40-0f61-4360-bb57-f28871f7cebf',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'user_id': '25'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'size': 0,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'queued',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'updated_at': datetime.datetime(2012, 8, 29, 7, 23, 11)},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_image_service': <nova.image.glance.GlanceImageService object at 0x446f390>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'snapshot_name': 'c9950d1ac5674d66b9bbb8179baf53d3',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'source': <Element 'source' at 0x3a02550>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'source_format': 'qcow2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'state': 1,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'tmpdir': '/tmp/tmp2WBWt8',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'virt_dom': <libvirt.virDomain instance at 0x4139c20>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'xml_desc': \"<domain type='kvm' id='31'>\\n  <name>instance-000020e2</name>\\n  <uuid>2fb5ba40-0f61-4360-bb57-f28871f7cebf</uuid>\\n  <memory>8388608</memory>\\n  <currentMemory>8388608</currentMemory>\\n  <vcpu>2</vcpu>\\n  <os>\\n    <type arch='x86_64' machine='pc-1.0'>hvm</type>\\n    <boot dev='hd'/>\\n  </os>\\n  <features>\\n    <acpi/>\\n  </features>\\n  <clock offset='utc'/>\\n  <on_poweroff>destroy</on_poweroff>\\n  <on_reboot>restart</on_reboot>\\n  <on_crash>destroy</on_crash>\\n  <devices>\\n    <emulator>/usr/bin/kvm</emulator>\\n    <disk type='file' device='disk'>\\n      <driver name='qemu' type='qcow2' cache='none'/>\\n      <source file='/var/lib/nova/instances/instance-000020e2/disk'/>\\n      <target dev='vda' bus='virtio'/>\\n      <alias name='virtio-disk0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\\n    </disk>\\n    <disk type='file' device='disk'>\\n      <driver name='qemu' type='qcow2' cache='none'/>\\n      <source file='/var/lib/nova/instances/instance-000020e2/disk.local'/>\\n      <target dev='vdb' bus='virtio'/>\\n      <alias name='virtio-disk1'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>\\n    </disk>\\n    <interface type='bridge'>\\n      <mac address='fa:16:3e:17:52:ce'/>\\n      <source bridge='br100'/>\\n      <target dev='vnet7'/>\\n      <filterref filter='nova-instance-instance-000020e2-fa163e1752ce'>\\n        <parameter name='DHCPSERVER' value='115.146.92.9'/>\\n        <parameter name='IP' value='115.146.94.228'/>\\n      </filterref>\\n      <alias name='net0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\\n    </interface>\\n    <serial type='file'>\\n      <source path='/var/lib/nova/instances/instance-000020e2/console.log'/>\\n      <target port='0'/>\\n      <alias name='serial0'/>\\n    </serial>\\n    <serial type='pty'>\\n      <source path='/dev/pts/8'/>\\n      <target port='1'/>\\n      <alias name='serial1'/>\\n    </serial>\\n    <console type='file'>\\n      <source path='/var/lib/nova/instances/instance-000020e2/console.log'/>\\n      <target type='serial' port='0'/>\\n      <alias name='serial0'/>\\n    </console>\\n    <input type='tablet' bus='usb'>\\n      <alias name='input0'/>\\n    </input>\\n    <input type='mouse' bus='ps2'/>\\n    <graphics type='vnc' port='5907' autoport='yes' listen='0.0.0.0' keymap='en-us'>\\n      <listen type='address' address='0.0.0.0'/>\\n    </graphics>\\n    <video>\\n      <model type='cirrus' vram='9216' heads='1'/>\\n      <alias name='video0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\\n    </video>\\n    <memballoon model='virtio'>\\n      <alias name='balloon0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>\\n    </memballoon>\\n  </devices>\\n  <seclabel type='dynamic' model='apparmor' relabel='yes'>\\n    <label>libvirt-2fb5ba40-0f61-4360-bb57-f28871f7cebf</label>\\n    <imagelabel>libvirt-2fb5ba40-0f61-4360-bb57-f28871f7cebf</imagelabel>\\n  </seclabel>\\n</domain>\\n\"}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/image/glance.py\", line 306, in update\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'client': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.image.glance.GlanceImageService object at 0x49e6a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/image/glance.py\", line 304, in update\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'client': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'context': <nova.rpc.amqp.RpcContext object at 0x3f4bb50>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <nova.image.glance.GlanceImageService object at 0x49e6a90>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/client.py\", line 195, in update_image\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'features': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_data': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_id': u'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_meta': {'container_format': 'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'disk_format': 'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'is_public': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'name': 'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'properties': {'image_location': 'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_state': 'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'ramdisk_id': u''},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status': 'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'image_size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 58, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'args': ('PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            u'/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'}),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'func': <function do_request at 0x1e4c410>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'kwargs': {},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 420, in do_request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'action': u'/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'params': None,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment='')}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 75, in wrapped\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'MAX_REDIRECTS': 5,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_': 0,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'func': <function _do_request at 0x1e4c578>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment='')}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 547, in _do_request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp     Locals:{'_chunkbody': <function _chunkbody at 0x4759de8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_filelike': <function _filelike at 0x311b500>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_pushing': <function _pushing at 0x3e4eb90>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_retry': <function _retry at 0x3be52a8>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_sendbody': <function _sendbody at 0x4759c08>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            '_simple': <function _simple at 0x311b668>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'body': <closed file '/tmp/tmp2WBWt8/c9950d1ac5674d66b9bbb8179baf53d3', mode 'r' at 0x33dced0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'c': <httplib.HTTPConnection instance at 0x4675680>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'connection_type': <class httplib.HTTPConnection at 0x1dc5328>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'header': 'x-image-meta-name',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'headers': {'content-length': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'content-type': 'application/octet-stream',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-auth-token': u'ee51bea27ba04f44ac61e6ea279a55a4',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-container_format': u'bare',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-disk_format': u'raw',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-is_public': u'False',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-name': u'snap2012.1.2',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_location': u'snapshot',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-image_state': u'available',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-kernel_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-owner_id': u'23',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-property-ramdisk_id': u'',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-size': 10737418240,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'x-image-meta-status': u'active'},\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'iter': <generator object chunkiter at 0x4051cd0>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'method': 'PUT',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'path': u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a',\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'res': <httplib.HTTPResponse instance at 0x3e5a200>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'self': <glance.client.V1Client object at 0x4657e10>,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'status_code': 400,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'url': ParseResult(scheme='http', netloc='np-rcp1.melbourne.nectar.org.au:9292', path=u'/v1/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a', params='', query=None, fragment=''),\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'use_sendfile': False,\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            'value': u'snap2012.1.2'}\n2012-08-29 07:33:08 TRACE nova.rpc.amqp            \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp Invalid: Data supplied was not valid.\n2012-08-29 07:33:08 TRACE nova.rpc.amqp Details: 400 Bad Request\n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp The server could not comply with the request since it is either malformed or otherwise incorrect.\n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n2012-08-29 07:33:08 TRACE nova.rpc.amqp  Error uploading image: (BackendException): Failed to add object to Swift. Got error from Swift: put_object('images', 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035', ...) failure and no ability to reset contents for reupload.  \n2012-08-29 07:33:08 TRACE nova.rpc.amqp \n\n\n\nGlance:\n ERROR [glance.api.v1.images] Traceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/glance/api/v1/images.py\", line 393, in _upload\n    image_size)\n  File \"/usr/lib/python2.7/dist-packages/glance/store/swift.py\", line 468, in add\n    raise glance.store.BackendException(msg)\nBackendException: Failed to add object to Swift.\nGot error from Swift: put_object('images', 'e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035', ...) failure and no ability to reset contents for reupload.\n\nSwift:\nAug 29 07:31:44 np-rcp1-int swift-proxy-server ERROR Client read timeout (60s) (txn: tx63d535ecc0e4436fb372548eba4117ed) (client_ip: 115.146.92.105)\nAug 29 07:31:53 np-rcp1-int swift-proxy-server 115.146.92.105 115.146.92.105 29/Aug/2012/07/31/53 PUT /v1/AUTH_3/images/e866c9ee-80c7-42a0-91c4-d23b9d4edd6a-00035 HTTP/1.0 408 - - 49c45a349eaf473aae3a1f948a2c4c5b 3342336 - - tx63d535ecc0e4436fb372548eba4117ed X-Tenant-Name%3A%20glance%0AX-Timestamp%3A%201346225444.59149%0AX-Role%3A%20Admin%0AX-User-Id%3A%2005981327e31941b28fd4ec0dfb4687a1%0AContent-Length%3A%20204800000%0AX-Auth-Token%3A%2049c45a349eaf473aae3a1f948a2c4c5b%0AX-Trans-Id%3A%20tx63d535ecc0e4436fb372548eba4117ed%0AX-Identity-Status%3A%20Confirmed%0AX-Roles%3A%20Admin%0AX-User%3A%20glance%0AHost%3A%20swift.rc.nectar.org.au%3A8888%0AX-Tenant-Id%3A%203%0AX-Tenant%3A%20glance%0AX-User-Name%3A%20glance%0AContent-Type%3A%20application/octet-stream%0AAccept-Encoding%3A%20identity 69.1460 -", 
            "date_created": "2012-08-29 08:21:45.344962+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "Thanks for the report!\n\nI don't think we're quite at the stage yet that we can confirm this as a bug in Nova, nor how a developer can easily reproduce it\n\nThis sounds somewhat similar to bug #971411\n\nAre you seeing a \"pause\" during the upload similar to what was reported in that bug?\n\nIf you change Swift's client_timeout setting to e.g. 600, does the upload succeed ... albeit slowly perhaps?", 
            "date_created": "2012-08-29 11:30:26.129651+00:00", 
            "author": "https://api.launchpad.net/1.0/~markmc"
        }, 
        {
            "content": "OK I upped the client_timeout to 600 and it did eventually work. \n\nThe image was split into 53 part, the majority of these took 2-4 seconds to upload. \nI had 1 part that took 124, one 60 and a couple 17 seconds.\n\nNow to figure out what is slowing these down.\n\nVery hard to tell if this is a bug in nova or something with our setup. Will keep digging.", 
            "date_created": "2012-08-29 12:30:34.592931+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "Nice one Sam, that does sound similar to bug #971411\n\nMaybe try switching glance to a filesystem backend and see if you can reproduce the upload pauses - that would eliminate swift from the equation at least", 
            "date_created": "2012-08-29 12:54:11.599146+00:00", 
            "author": "https://api.launchpad.net/1.0/~markmc"
        }, 
        {
            "content": "Hi Mark,\n\nThis may be tricky as this is in our production environment. There is a way to specify glance to use a specific store I think so I'll have a go with that.\n\nI don't think swift or glance is the issue though as I never get an issue using glance-client from the same compute node.\n\n", 
            "date_created": "2012-08-30 01:11:08.509806+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "Folks, I have the exact same issue on my platform. configuration as follows:\nUbuntu 12.04, platform updated to latest versions of all components via apt-get dist-upgrade as of 15th September 2012\n\nCloud controller running glance/Nova Api, Scheduler, Mysql,nova-compute,,nova-network  etc.... \nit has a 1GB primary network, 10GBe storage network - running Intel 5600series processors /32GB ram\n\n2 only compute nodes  running  a 1GB primary network, 10GBe storage network\nConnected via secondary 10Gbe network to ISCSI targets (unique to each compute node, not shared)running Intel 5600series processors /48GB ram\n\nSeparate physical swift proxy server  - running Intel 5600series processors /48GB ram\n5 storage nodes - all are running Intel 5600series processors /24GB ram, 5 only 72GB disks configured as per current swift docs\nStorage nodes are on the secondary 10GBe network. All rings reference the secondary interface only\n\nI do get the occasional put error, but nothing fails to upload using swift directly. Its is both quick and doesn't fail\nI can usually upload a 11gb disk image in approximately 3mins\nI can also upload the same image by glance successfully 90% of the time in about 5-8mins. I use the same chunking value for both swift and Glance (155mb). Occasionally i get a malformed image response from glance , particularly when i script up a list of images to import one after the other\n\nHowever, if i attempt a snapshot from one of the compute nodes, it fails and the image is killed 90% of the time, 1 success in ten. When it does successfully upload to glance it takes approx 45 mins to an hr.\n\nIf i snapshot from the cloud controller (its also a compute node), It also fails maybe 80% of the time. When it does successfully upload to glance it takes approx 45 mins to an hr. There is almost no disk or network activity to swift storage nodes and glance seems to 'go to sleep'  and wait for a while and then wake up (consumes more CPU resource) and starts to push more chunks to swift. \n\nSetting the glance client to have a client timeout did help in reducing the error rate a little. I could not successfully snapshot at all from any compute node prior to changing this from the 60sec default in swift proxy.conf\n\nIf there is any further info i can provide to help narrow down this issue, please let me know\n\nsee the glance api.log below:\n\n2012-09-21 18:40:40 28696    DEBUG [root] HTTP PERF: 0.20796 seconds to POST 172.28.137.49:35357 /v2.0/tokens)\n2012-09-21 18:40:40 28696    DEBUG [root] HTTP PERF: 0.02576 seconds to HEAD 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance)\n2012-09-21 18:40:40 28696    DEBUG [glance.store.swift] Adding image object 'ee1d91a3-30f4-4de5-bb1a-4f760c4806a9' to Swift\n2012-09-21 18:40:44 28696    DEBUG [root] HTTP PERF: 3.89385 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00001)\n2012-09-21 18:40:44 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00001 (1/72) of length 158720000 to Swift returning MD5 of content: c86ddad7fa28e0af9c7550db3e28edfc\n2012-09-21 18:40:49 28696    DEBUG [root] HTTP PERF: 9.15400 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00002)\n2012-09-21 18:40:49 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00002 (2/72) of length 158720000 to Swift returning MD5 of content: c7f31f4cb748bef74fc5c3b8f942c4ae\n2012-09-21 18:41:00 28696    DEBUG [root] HTTP PERF: 20.04777 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00003)\n2012-09-21 18:41:00 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00003 (3/72) of length 158720000 to Swift returning MD5 of content: 8896ab0349be0fddf24071e211e5482c\n2012-09-21 18:41:03 28696    DEBUG [root] HTTP PERF: 23.46228 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00004)\n2012-09-21 18:41:03 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00004 (4/72) of length 158720000 to Swift returning MD5 of content: 223834137543908be9f7624c157f4684\n2012-09-21 18:41:13 28696    DEBUG [root] HTTP PERF: 33.39679 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00005)\n2012-09-21 18:41:13 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00005 (5/72) of length 158720000 to Swift returning MD5 of content: a6e11196ae29bc7291de9054747e90ac\n2012-09-21 18:41:17 28696    DEBUG [root] HTTP PERF: 36.86076 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00006)\n2012-09-21 18:41:17 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00006 (6/72) of length 158720000 to Swift returning MD5 of content: 11439287054d9f492acf5e91323ae421\n2012-09-21 18:41:20 28696    DEBUG [root] HTTP PERF: 40.58124 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00007)\n2012-09-21 18:41:20 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00007 (7/72) of length 158720000 to Swift returning MD5 of content: 118b29012d1ccda9b498ef312f4b1679\n2012-09-21 18:41:24 28696    DEBUG [root] HTTP PERF: 43.75643 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00008)\n2012-09-21 18:41:24 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00008 (8/72) of length 158720000 to Swift returning MD5 of content: b706804770bbaa17ff0bc75f4da4088c\n2012-09-21 18:41:29 28696    DEBUG [root] HTTP PERF: 49.57457 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00009)\n2012-09-21 18:41:29 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00009 (9/72) of length 158720000 to Swift returning MD5 of content: ef5f84009e1acb9f0368e9ba6b5548b8\n2012-09-21 18:41:45 28696    DEBUG [root] HTTP PERF: 65.67195 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00010)\n2012-09-21 18:41:45 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00010 (10/72) of length 158720000 to Swift returning MD5 of content: 628dd5c4c650490f464db3c6e5d2519b\n2012-09-21 18:41:51 28696    DEBUG [root] HTTP PERF: 71.34518 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00011)\n2012-09-21 18:41:51 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00011 (11/72) of length 158720000 to Swift returning MD5 of content: 381e1fa06a6ddd2ba38091508406b02b\n2012-09-21 18:41:57 28696    DEBUG [root] HTTP PERF: 77.09147 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00012)\n2012-09-21 18:41:57 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00012 (12/72) of length 158720000 to Swift returning MD5 of content: 8f70a422898bf5c855d2bd0fde8f8cb8\n2012-09-21 18:42:15 28696    DEBUG [root] HTTP PERF: 95.62544 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00013)\n2012-09-21 18:42:15 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00013 (13/72) of length 158720000 to Swift returning MD5 of content: ff3146029035c755f4f0d6ea70a95b3d\n2012-09-21 18:42:25 28696    DEBUG [root] HTTP PERF: 105.07774 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00014)\n2012-09-21 18:42:25 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00014 (14/72) of length 158720000 to Swift returning MD5 of content: c9c4cce0796215a6e75c483aeaa58dcd\n2012-09-21 18:42:34 28696    DEBUG [root] HTTP PERF: 114.06453 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00015)\n2012-09-21 18:42:34 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00015 (15/72) of length 158720000 to Swift returning MD5 of content: c058437d1130676b3ff2785376a0380f\n2012-09-21 18:42:52 28696    DEBUG [root] HTTP PERF: 132.14624 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00016)\n2012-09-21 18:42:52 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00016 (16/72) of length 158720000 to Swift returning MD5 of content: 5452b96bfe3f8d20e5a3afd4640cb646\n2012-09-21 18:43:08 28696    DEBUG [root] HTTP PERF: 148.34352 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00017)\n2012-09-21 18:43:08 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00017 (17/72) of length 158720000 to Swift returning MD5 of content: d046fa5680bac30beebf9cb35d71f687\n2012-09-21 18:43:26 28696    DEBUG [root] HTTP PERF: 166.17645 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00018)\n2012-09-21 18:43:26 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00018 (18/72) of length 158720000 to Swift returning MD5 of content: 7d9b8a2709097abb5f0613c1f9941f9d\n2012-09-21 18:43:29 28696    DEBUG [root] HTTP PERF: 169.38774 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00019)\n2012-09-21 18:43:29 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00019 (19/72) of length 158720000 to Swift returning MD5 of content: 7334a87e146a9a462cbdd0f7e1723353\n2012-09-21 18:43:33 28696    DEBUG [root] HTTP PERF: 173.55660 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00020)\n2012-09-21 18:43:33 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00020 (20/72) of length 158720000 to Swift returning MD5 of content: 48738d5e357e4e330529263ef652bcbc\n2012-09-21 18:43:37 28696    DEBUG [root] HTTP PERF: 177.61530 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00021)\n2012-09-21 18:43:37 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00021 (21/72) of length 158720000 to Swift returning MD5 of content: 35f3ef419bb40d43560dd5a0ca85d8e9\n2012-09-21 18:43:41 28696    DEBUG [root] HTTP PERF: 181.36565 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00022)\n2012-09-21 18:43:41 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00022 (22/72) of length 158720000 to Swift returning MD5 of content: 9c291b39ddf8a4f04a76117fb7841280\n2012-09-21 18:44:03 28696    DEBUG [root] HTTP PERF: 202.73614 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00023)\n2012-09-21 18:44:03 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00023 (23/72) of length 158720000 to Swift returning MD5 of content: 181fdef933298bba7ff85a2f5a16ff0c\n2012-09-21 18:44:19 28696    DEBUG [root] HTTP PERF: 218.84386 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00024)\n2012-09-21 18:44:19 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00024 (24/72) of length 158720000 to Swift returning MD5 of content: 27981d3b6f1894ea90851d5ed2631534\n2012-09-21 18:44:22 28696    DEBUG [root] HTTP PERF: 222.47428 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00025)\n2012-09-21 18:44:22 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00025 (25/72) of length 158720000 to Swift returning MD5 of content: 123b5e0a0b9a053d50ef03dec539a3ee\n2012-09-21 18:44:28 28696    DEBUG [root] HTTP PERF: 227.72689 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00026)\n2012-09-21 18:44:28 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00026 (26/72) of length 158720000 to Swift returning MD5 of content: 7a110421058b68eb79305f9c7afcd492\n2012-09-21 18:44:44 28696    DEBUG [root] HTTP PERF: 243.92328 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00027)\n2012-09-21 18:44:44 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00027 (27/72) of length 158720000 to Swift returning MD5 of content: 34751ef9005981adb9756e7ee857036a\n2012-09-21 18:45:04 28696    DEBUG [root] HTTP PERF: 264.39482 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00028)\n2012-09-21 18:45:04 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00028 (28/72) of length 158720000 to Swift returning MD5 of content: e5138150dce49087006a2b7d561fe6ad\n2012-09-21 18:45:17 28696    DEBUG [root] HTTP PERF: 277.43175 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00029)\n2012-09-21 18:45:17 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00029 (29/72) of length 158720000 to Swift returning MD5 of content: a1a4217040a5c73c790820909dca490f\n2012-09-21 18:45:21 28696    DEBUG [root] HTTP PERF: 281.56405 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00030)\n2012-09-21 18:45:21 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00030 (30/72) of length 158720000 to Swift returning MD5 of content: 814467904f28feb6d29330f6ad6ad57a\n2012-09-21 18:45:37 28696    DEBUG [root] HTTP PERF: 297.66068 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00031)\n2012-09-21 18:45:37 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00031 (31/72) of length 158720000 to Swift returning MD5 of content: b952687f04f1fd1e70415c974a69acbb\n2012-09-21 18:45:41 28696    DEBUG [root] HTTP PERF: 301.22460 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00032)\n2012-09-21 18:45:41 28696    DEBUG [glance.store.swift] Wrote chunk ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00032 (32/72) of length 158720000 to Swift returning MD5 of content: 12f52a4d13dcb51aa5ad31d2c9c06b05\n2012-09-21 18:46:12 28696    DEBUG [root] HTTP PERF: 332.10418 seconds to PUT 192.168.5.109:8888 /v1/AUTH_e99fff4f92f440408cf6f534da4a4b0c/glance/ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00033)\n2012-09-21 18:46:13 28696    ERROR [glance.store.swift] Failed to add object to Swift.\nGot error from Swift: put_object('glance', 'ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00033', ...) failure and no ability to reset contents for reupload.\n2012-09-21 18:46:13 28696    ERROR [glance.api.v1.images] Traceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/glance/api/v1/images.py\", line 398, in _upload\n    image_size)\n  File \"/usr/lib/python2.7/dist-packages/glance/store/swift.py\", line 471, in add\n    raise glance.store.BackendException(msg)\nBackendException: Failed to add object to Swift.\nGot error from Swift: put_object('glance', 'ee1d91a3-30f4-4de5-bb1a-4f760c4806a9-00033', ...) failure and no ability to reset contents for reupload.\n\n  \n\n\n \n", 
            "date_created": "2012-09-21 18:51:49.274196+00:00", 
            "author": "https://api.launchpad.net/1.0/~dafridgie"
        }, 
        {
            "content": "to add to my last post:\n\nexact circumstances to reproduce this bug:\nassumptions - Windows and Linux images are treated equally , difference is only in size as follows\nLinux image 1 - 1.1gb\nLinux image 2 - 2.5gb\nWindows image 1 - 11.5gb\n\nPlatform configuration:\nubuntu 12.04 LTS - latest update Sept 15 2012\nCloud Controller running all openstack services + Glance\n - Keystone used for all user/service management\n - Swift defined as 'object store' service\n2 only separate compute nodes on same management network\n1 swift proxy with 2 NICS\nproxy.conf  - client timeout at 600, node timeout at 15\n5 swift compute nodes on secondary network, all with 5 devices minimum. Separate account/container and object conf files for each defined device on separate port\n\nActions to reproduce\nfrom dashboard:\n     create snapshot from any running VM\nfrom CLi:\n     nova image create <vm name> <snapshot name>\n\nobserved behaviour:\nSnapshot takes much longer than expected as the file size image increases:\nNote - these timings are taken once image is assembled in /tmp on compute node, actual upload speed is described to state where image is 'active'\n1.1gb linux image - 192sec \n2.5gb image - 341sec\n11.5gb - 2751sec (90% failure rate)\n\nis there a difference in reliability when snapshot is taken from Vm hosted on Cloud controller ?\nyes - but not by much and has improved reliability (80% failure instead of 90% failure rate)\n\nhope this is enough to allow reproduction of this bug.\n\nAs we want to use swift as the backing store for glance, this is a showstopper issue for us as it stands today\n\nthanks for your time\n\n\n\n\n\n\n\n", 
            "date_created": "2012-09-24 12:59:37.520556+00:00", 
            "author": "https://api.launchpad.net/1.0/~dafridgie"
        }, 
        {
            "content": "Hi , any update on when this bug will be looked at or a workaround identified ?", 
            "date_created": "2012-10-12 17:18:04.849503+00:00", 
            "author": "https://api.launchpad.net/1.0/~dafridgie"
        }, 
        {
            "content": "We're also seeing this when nova downloads an image from glance. When nova does it it can take an hour however using glance client manually on the host it will download in a couple of minutes. It seems as if the nova process is getting stuck somewhere. \n", 
            "date_created": "2013-08-22 07:10:38.595160+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "Sam, is this still an issue in the current release you're using?", 
            "date_created": "2016-04-01 11:23:46.892691+00:00", 
            "author": "https://api.launchpad.net/1.0/~fifieldt"
        }, 
        {
            "content": "I think this can be closed, too long ago :-)", 
            "date_created": "2016-04-05 01:10:47.203812+00:00", 
            "author": "https://api.launchpad.net/1.0/~sorrison"
        }, 
        {
            "content": "Closing this bug based Sam's comment.", 
            "date_created": "2016-06-02 19:17:06.949412+00:00", 
            "author": "https://api.launchpad.net/1.0/~siva-radhakrishnan"
        }
    ]
}