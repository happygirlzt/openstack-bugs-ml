{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:51:14.844640+00:00", 
    "description": "The instance will be ERROR when booting instance from volume, if the volume quota is not enough. And there is even no useful error message to show to the user. Following is the related nova-compute.log:\n\n2014-07-27 17:56:19.372 17060 ERROR nova.compute.manager [req-4e876b97-be8a-486b-98e2-7d707266755d 98fa3fd418914a9288b5560e1bb6944e 5254621adfd949a9a3b975f68119e269] [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] Instance failed block device setup\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] Traceback (most recent call last):\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1690, in _prep_block_device\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     self.driver, self._await_block_device_map_created))\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 363, in attach_block_devices\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     map(_log_and_attach, block_device_mapping)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 361, in _log_and_attach\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     bdm.attach(*attach_args, **attach_kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 311, in attach\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     '', '', image_id=self.image_id)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 303, in create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     item = cinderclient(context).volumes.create(size, **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/v1/volumes.py\", line 187, in create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     return self._create('/volumes', body, 'volume')\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/base.py\", line 153, in _create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     resp, body = self.api.client.post(url, body=body)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 209, in post\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     return self._cs_request(url, 'POST', **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 173, in _cs_request\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 156, in request\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     raise exceptions.from_response(resp, body)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] OverLimit: VolumeLimitExceeded: Maximum number of volumes allowed (10) exceeded (HTTP 413) (Request-ID: req-07dcc4c4-182f-4d73-b054-806f31cb7e71)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]\n2014-07-27 17:56:19.693 17060 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: Block Device Mapping is Invalid.\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 88, in wrapped\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 71, in wrapped\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 282, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 268, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 335, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 311, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     e, sys.exc_info())\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 298, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2077, in run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     do_run_instance()\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 249, in inner\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2076, in do_run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     legacy_bdm_in_spec)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1209, in _run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     notify(\"error\", fault=e)  # notify that build failed\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1193, in _run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     instance, image_meta, legacy_bdm_in_spec)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1347, in _build_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     LOG.exception(msg, instance=instance)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1304, in _build_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     context, instance, bdms)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1707, in _prep_block_device\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     raise exception.InvalidBDM()\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher InvalidBDM: Block Device Mapping is Invalid.\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher", 
    "tags": [
        "compute"
    ], 
    "importance": "Low", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1349268", 
    "owner": "https://api.launchpad.net/1.0/~thang-pham", 
    "id": 1349268, 
    "index": 53, 
    "created": "2014-07-28 07:18:52.103396+00:00", 
    "title": "OverLimit: VolumeLimitExceeded: Maximum number of volumes allowed (10) exceeded", 
    "comments": [
        {
            "content": "The instance will be ERROR booting instance from volume, if the volume quota is not enough. And there is no even usable error message to show to the user. Following is the related nova-compute.log:\n\n2014-07-27 17:56:19.372 17060 ERROR nova.compute.manager [req-4e876b97-be8a-486b-98e2-7d707266755d 98fa3fd418914a9288b5560e1bb6944e 5254621adfd949a9a3b975f68119e269] [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] Instance failed block device setup\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] Traceback (most recent call last):\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1690, in _prep_block_device\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     self.driver, self._await_block_device_map_created))\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 363, in attach_block_devices\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     map(_log_and_attach, block_device_mapping)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 361, in _log_and_attach\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     bdm.attach(*attach_args, **attach_kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 311, in attach\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     '', '', image_id=self.image_id)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/nova/volume/cinder.py\", line 303, in create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     item = cinderclient(context).volumes.create(size, **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/v1/volumes.py\", line 187, in create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     return self._create('/volumes', body, 'volume')\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/base.py\", line 153, in _create\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     resp, body = self.api.client.post(url, body=body)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 209, in post\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     return self._cs_request(url, 'POST', **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 173, in _cs_request\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     **kwargs)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]   File \"/usr/lib/python2.7/dist-packages/cinderclient/client.py\", line 156, in request\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]     raise exceptions.from_response(resp, body)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc] OverLimit: VolumeLimitExceeded: Maximum number of volumes allowed (10) exceeded (HTTP 413) (Request-ID: req-07dcc4c4-182f-4d73-b054-806f31cb7e71)\n2014-07-27 17:56:19.372 17060 TRACE nova.compute.manager [instance: 2a124872-3332-4f54-bb28-f0a96a7ed7bc]\n2014-07-27 17:56:19.693 17060 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: Block Device Mapping is Invalid.\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/server.py\", line 139, in inner\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return func(*args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 88, in wrapped\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     payload)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 71, in wrapped\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 282, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     pass\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 268, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 335, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 311, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     e, sys.exc_info())\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 298, in decorated_function\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2077, in run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     do_run_instance()\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 249, in inner\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2076, in do_run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     legacy_bdm_in_spec)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1209, in _run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     notify(\"error\", fault=e)  # notify that build failed\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1193, in _run_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     instance, image_meta, legacy_bdm_in_spec)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1347, in _build_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     LOG.exception(msg, instance=instance)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1304, in _build_instance\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     context, instance, bdms)\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1707, in _prep_block_device\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher     raise exception.InvalidBDM()\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher InvalidBDM: Block Device Mapping is Invalid.\n2014-07-27 17:56:19.693 17060 TRACE oslo.messaging.rpc.dispatcher", 
            "date_created": "2014-07-28 07:18:52.103396+00:00", 
            "author": "https://api.launchpad.net/1.0/~liyingjun"
        }, 
        {
            "content": "I reproduced the error, and I am able to see an explanation of why it failed in n-cpu.log:\n\n2014-08-20 21:54:16.115 DEBUG nova.compute.utils [req-0db5b860-2e6a-41d7-bb19-fa9f069cdc64 demo demo] [in\nstance: 6880fd09-a82a-4965-9b0b-27ded82093d0] Build of instance 6880fd09-a82a-4965-9b0b-27ded82093d0 abor\nted: Failure prepping block device. from (pid=5906) notify_about_instance_usage /opt/stack/nova/nova/comp\nute/utils.py:306\n2014-08-20 21:54:16.115 ERROR nova.compute.manager [req-0db5b860-2e6a-41d7-bb19-fa9f069cdc64 demo demo] [\ninstance: 6880fd09-a82a-4965-9b0b-27ded82093d0] Build of instance 6880fd09-a82a-4965-9b0b-27ded82093d0 ab\norted: Failure prepping block device.\n\nHowever, it is a DEBUG message.   Are you suggesting it be set to an error or warning log?", 
            "date_created": "2014-08-21 01:59:42.198567+00:00", 
            "author": "https://api.launchpad.net/1.0/~thang-pham"
        }, 
        {
            "content": "Also, looking the trace logs you have above, I no longer see \"OverLimit: VolumeLimitExceeded\" exceptions.  Which version of nova are you using?  I tried my tests above using the latest in the nova master branch.", 
            "date_created": "2014-08-21 02:43:06.964517+00:00", 
            "author": "https://api.launchpad.net/1.0/~thang-pham"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/115852", 
            "date_created": "2014-08-21 02:52:00.632409+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/115852\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=26871aa60ba663d56951fcd449167bfadbe01522\nSubmitter: Jenkins\nBranch:    master\n\ncommit 26871aa60ba663d56951fcd449167bfadbe01522\nAuthor: Thang Pham <email address hidden>\nDate:   Wed Aug 20 22:43:14 2014 -0400\n\n    Log warning message if volume quota is exceeded\n    \n    It would be useful to the user if a warning message is logged\n    when the volume quota is exceeded instead of a debug message.\n    This would allow the root cause to be more easily determined\n    instead of turning on the debug option.\n    \n    Change-Id: I19dc078cbacf8f39480e8a7f4c4edb764e4696eb\n    Closes-Bug: #1349268\n", 
            "date_created": "2014-08-23 08:22:32.758129+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}