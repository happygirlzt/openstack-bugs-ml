{
    "status": "Invalid", 
    "last_updated": "2016-07-07 13:02:51.897614+00:00", 
    "description": "Operating steps:\n1. nova boot a instance named 'A' on host named 'hostxx'.\n2. use 'systemctl stop openstack-nova-compute' command to stop nova-compute service on hostxx.\n3. use 'nova delete' command delete instance A, and the result is successful.\n4. Then use 'systemctl start openstack-nova-compute' command to start nova-compute service on hostxx.\n5. wait 30 minutes, the periodic task named '_cleanup_running_deleted_instances' will execute to delete the instance A on hostxx and the exception InstanceInfoCacheNotFound occurs. (You can modify the value of 'running_deleted_instance_poll_interval' in file /etc/nova/nova.conf to reduce the waiting time)\n\nthe nova-compute.log on hostxx:\nroot@lxlcompute1 ~]# tail -100 /var/log/nova/nova-compute.log\n2015-03-17 15:55:36.764 17764 WARNING nova.compute.manager [-] Found 0 in the database and 1 on the hypervisor.\n2015-03-17 15:56:00.963 17764 INFO nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Destroying instance with name label 'instance-00000056' which is marked as DELETED but still present on host.\n2015-03-17 15:56:00.964 17764 AUDIT nova.compute.manager [req-2d912481-6e91-4713-a62a-694232c4e58c None None] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Terminating instance\n2015-03-17 15:56:01.263 17764 INFO nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] VM Stopped (Lifecycle Event)\n2015-03-17 15:56:01.272 17764 INFO nova.virt.libvirt.driver [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Instance destroyed successfully.\n2015-03-17 15:56:01.854 17764 ERROR nova.network.api [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Failed storing info cache\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Traceback (most recent call last):\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 81, in update_instance_cache_with_nw_info\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     ic.save(update_cells=update_cells)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 142, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     ctxt, self, fn.__name__, args, kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/conductor/rpcapi.py\", line 430, in object_action\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     objmethod=objmethod, args=args, kwargs=kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     wait_for_reply=True, timeout=timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/transport.py\", line 90, in _send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     timeout=timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     raise result\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] InstanceInfoCacheNotFound_Remote: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Traceback (most recent call last):\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 598, in _object_dispatch\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return getattr(target, method)(context, *args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 151, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return fn(self, ctxt, *args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/instance_info_cache.py\", line 91, in save\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     {'network_info': nw_info_json})\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/api.py\", line 879, in instance_info_cache_update\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return IMPL.instance_info_cache_update(context, instance_uuid, values)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 164, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return f(*args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 2353, in instance_info_cache_update\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     instance_uuid=instance_uuid)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] InstanceInfoCacheNotFound: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]\n2015-03-17 15:56:01.855 17764 ERROR nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Failed to deallocate network for instance.\n2015-03-17 15:56:01.982 17764 ERROR root [-] Original exception being dropped: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2322, in _shutdown_instance\\n    block_device_info)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 971, in destroy\\n    destroy_disks)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1050, in cleanup\\n    volume_meta[\\'properties\\'] = self._get_volume_metadata(context, connection_info)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3088, in _get_volume_metadata\\n    raise exception.InvalidBDMVolume(id=volume_id)\\n', 'InvalidBDMVolume: Block Device Mapping is Invalid: failed to get volume 7fad9bb5-8b65-4647-af85-91a72252862f.\\n']\n2015-03-17 15:56:01.982 17764 WARNING nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Periodic cleanup failed to delete instance: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\nTraceback (most recent call last):\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 598, in _object_dispatch\n\u00a0\u00a0\u00a0\u00a0return getattr(target, method)(context, *args, **kwargs)\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 151, in wrapper\n\u00a0\u00a0\u00a0\u00a0return fn(self, ctxt, *args, **kwargs)\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/objects/instance_info_cache.py\", line 91, in save\n\u00a0\u00a0\u00a0\u00a0{'network_info': nw_info_json})\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/db/api.py\", line 879, in instance_info_cache_update\n\u00a0\u00a0\u00a0\u00a0return IMPL.instance_info_cache_update(context, instance_uuid, values)\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 164, in wrapper\n\u00a0\u00a0\u00a0\u00a0return f(*args, **kwargs)\n\n\u00a0\u00a0File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 2353, in instance_info_cache_update\n\u00a0\u00a0\u00a0\u00a0instance_uuid=instance_uuid)\n\nInstanceInfoCacheNotFound: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 22, 
    "link": "https://bugs.launchpad.net/nova/+bug/1412285", 
    "owner": "None", 
    "id": 1412285, 
    "index": 5387, 
    "created": "2015-01-19 02:43:21.232405+00:00", 
    "title": "InstanceInfoCacheNotFound exception", 
    "comments": [
        {
            "content": "Operating steps:\n1. nova boot a instance named 'A' on host named 'hostxx'.\n2. use 'systemctl stop openstack-nova-compute' command to stop nova-compute service on hostxx.\n3. use 'nova delete' command delete instance A, and the result is successful.\n4. Then use 'systemctl start openstack-nova-compute' command to start nova-compute service on hostxx.\n5. wait 30 minutes, the periodic tack named '_cleanup_running_deleted_instances' will execute to delete the instance A on hostxx and the exception InstanceInfoCacheNotFound occurs. (You can modify the value of 'running_deleted_instance_poll_interval' in file /etc/nova/nova.conf to reduce the waiting time)\n\nthe nova-compute.log on hostxx:\nroot@lxlcompute1 ~]# tail -100 /var/log/nova/nova-compute.log\n2015-03-17 15:55:36.764 17764 WARNING nova.compute.manager [-] Found 0 in the database and 1 on the hypervisor.\n2015-03-17 15:56:00.963 17764 INFO nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Destroying instance with name label 'instance-00000056' which is marked as DELETED but still present on host.\n2015-03-17 15:56:00.964 17764 AUDIT nova.compute.manager [req-2d912481-6e91-4713-a62a-694232c4e58c None None] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Terminating instance\n2015-03-17 15:56:01.263 17764 INFO nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] VM Stopped (Lifecycle Event)\n2015-03-17 15:56:01.272 17764 INFO nova.virt.libvirt.driver [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Instance destroyed successfully.\n2015-03-17 15:56:01.854 17764 ERROR nova.network.api [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Failed storing info cache\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Traceback (most recent call last):\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 81, in update_instance_cache_with_nw_info\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     ic.save(update_cells=update_cells)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 142, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     ctxt, self, fn.__name__, args, kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/conductor/rpcapi.py\", line 430, in object_action\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     objmethod=objmethod, args=args, kwargs=kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/rpc/client.py\", line 150, in call\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     wait_for_reply=True, timeout=timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/transport.py\", line 90, in _send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     timeout=timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return self._send(target, ctxt, message, wait_for_reply, timeout)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     raise result\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] InstanceInfoCacheNotFound_Remote: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Traceback (most recent call last):\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 598, in _object_dispatch\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return getattr(target, method)(context, *args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 151, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return fn(self, ctxt, *args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/objects/instance_info_cache.py\", line 91, in save\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     {'network_info': nw_info_json})\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/api.py\", line 879, in instance_info_cache_update\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return IMPL.instance_info_cache_update(context, instance_uuid, values)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 164, in wrapper\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     return f(*args, **kwargs)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]   File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 2353, in instance_info_cache_update\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158]     instance_uuid=instance_uuid)\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] InstanceInfoCacheNotFound: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.854 17764 TRACE nova.network.api [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] \n2015-03-17 15:56:01.855 17764 ERROR nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Failed to deallocate network for instance.\n2015-03-17 15:56:01.982 17764 ERROR root [-] Original exception being dropped: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2322, in _shutdown_instance\\n    block_device_info)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 971, in destroy\\n    destroy_disks)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 1050, in cleanup\\n    volume_meta[\\'properties\\'] = self._get_volume_metadata(context, connection_info)\\n', '  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3088, in _get_volume_metadata\\n    raise exception.InvalidBDMVolume(id=volume_id)\\n', 'InvalidBDMVolume: Block Device Mapping is Invalid: failed to get volume 7fad9bb5-8b65-4647-af85-91a72252862f.\\n']\n2015-03-17 15:56:01.982 17764 WARNING nova.compute.manager [-] [instance: b4217413-f4ef-4e0c-84a6-3e4739bb6158] Periodic cleanup failed to delete instance: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 598, in _object_dispatch\n    return getattr(target, method)(context, *args, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/nova/objects/base.py\", line 151, in wrapper\n    return fn(self, ctxt, *args, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/nova/objects/instance_info_cache.py\", line 91, in save\n    {'network_info': nw_info_json})\n\n  File \"/usr/lib/python2.7/site-packages/nova/db/api.py\", line 879, in instance_info_cache_update\n    return IMPL.instance_info_cache_update(context, instance_uuid, values)\n\n  File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 164, in wrapper\n    return f(*args, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/nova/db/sqlalchemy/api.py\", line 2353, in instance_info_cache_update\n    instance_uuid=instance_uuid)\n\nInstanceInfoCacheNotFound: Info cache for instance b4217413-f4ef-4e0c-84a6-3e4739bb6158 could not be found.", 
            "date_created": "2015-01-19 02:43:21.232405+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "Reason:\n1. The step 3 deletes all tables related instance A, contained table 'instance_info_cache'.\n   code:\n    def _local_delete(self, context, instance, bdms, delete_type, cb):\n        LOG.warning(_(\"instance's host %s is down, deleting from \"\n                      \"database\") % instance['host'], instance=instance)\n        instance.info_cache.delete()\n\n2. The step 5,  the periodic task named '_cleanup_running_deleted_instances' call the '_try_deallocate_network' function which do something to update the database table 'instance_info_cache' related to instance A. And he instance A's related instance_info_cache data is deleted at the step 3. So the operation save data to database raise exception.\ncode:\n   if info_cache and info_cache['deleted']:\n            raise exception.InstanceInfoCacheNotFound(\n                    instance_uuid=instance_uuid)\n", 
            "date_created": "2015-01-19 02:51:31.992648+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "Hi all!\n\nUnfortunately, I can't reproduce the bug on devstack. I see that nobody works on this bug, maybe someone could provide more information how to reproduce it. I tried to boot vm, stop the compute (in screen), delete vm, start compute. Also tried to 'play' with 'running_deleted_instance_poll_interval' opt, but everytime I got no exceptions.", 
            "date_created": "2016-03-09 13:47:15.176749+00:00", 
            "author": "https://api.launchpad.net/1.0/~pkholkin"
        }, 
        {
            "content": "Looks like this got fixed, marking it as invalid.", 
            "date_created": "2016-07-07 13:02:51.058928+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }
    ]
}