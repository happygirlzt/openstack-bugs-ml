{
    "status": "Invalid", 
    "last_updated": "2012-08-14 18:18:06.536402+00:00", 
    "description": "Controller: Ubuntu 11.04\nHost: XenServer 6.0 with VM PV compute node (ubuntu 11.04)\n\nWhen i `m trying to start instance, XenCenter console hungs but instance works and i can connect via ssh. However compute node reports boot error:\n\n\n2012-02-23 16:33:37,007 ERROR nova.virt.xenapi.vmops [-] Instance instance-00000047: failed to boot\n(nova.virt.xenapi.vmops): TRACE: Traceback (most recent call last):\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 380, in _wait_for_boot\n(nova.virt.xenapi.vmops): TRACE:     state = self.get_info(instance_name)['state']\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 1041, in get_info\n(nova.virt.xenapi.vmops): TRACE:     vm_ref = self._get_vm_opaque_ref(instance)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 450, in _get_vm_opaque_ref\n(nova.virt.xenapi.vmops): TRACE:     obj = self._session.get_xenapi().VM.get_uuid(instance_or_vm)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/local/lib/python2.7/dist-packages/XenAPI.py\", line 229, in __call__\n(nova.virt.xenapi.vmops): TRACE:     return self.__send(self.__name, args)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/local/lib/python2.7/dist-packages/XenAPI.py\", line 133, in xenapi_request\n(nova.virt.xenapi.vmops): TRACE:     result = _parse_result(getattr(self, methodname)(*full_params))\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1224, in __call__\n(nova.virt.xenapi.vmops): TRACE:     return self.__send(self.__name, args)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1575, in __request\n(nova.virt.xenapi.vmops): TRACE:     verbose=self.__verbose\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1264, in request\n(nova.virt.xenapi.vmops): TRACE:     return self.single_request(host, handler, request_body, verbose)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1289, in single_request\n(nova.virt.xenapi.vmops): TRACE:     self.send_request(h, handler, request_body)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1391, in send_request\n(nova.virt.xenapi.vmops): TRACE:     connection.putrequest(\"POST\", handler, skip_accept_encoding=True)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/httplib.py\", line 853, in putrequest\n(nova.virt.xenapi.vmops): TRACE:     raise CannotSendRequest()\n(nova.virt.xenapi.vmops): TRACE: CannotSendRequest\n(nova.virt.xenapi.vmops): TRACE:", 
    "tags": [
        "xenserver"
    ], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/940204", 
    "owner": "None", 
    "id": 940204, 
    "index": 2769, 
    "created": "2012-02-24 11:08:37.284027+00:00", 
    "title": "running instances - xenserver", 
    "comments": [
        {
            "content": "Controller: Ubuntu 11.04\nHost: XenServer 6.0 with VM PV compute node (ubuntu 11.04)\n\nWhen i `m trying to start instance, XenCenter console hungs but instance works and i can connect via ssh. However compute node reports boot error:\n\n\n2012-02-23 16:33:37,007 ERROR nova.virt.xenapi.vmops [-] Instance instance-00000047: failed to boot\n(nova.virt.xenapi.vmops): TRACE: Traceback (most recent call last):\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 380, in _wait_for_boot\n(nova.virt.xenapi.vmops): TRACE:     state = self.get_info(instance_name)['state']\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 1041, in get_info\n(nova.virt.xenapi.vmops): TRACE:     vm_ref = self._get_vm_opaque_ref(instance)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vmops.py\", line 450, in _get_vm_opaque_ref\n(nova.virt.xenapi.vmops): TRACE:     obj = self._session.get_xenapi().VM.get_uuid(instance_or_vm)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/local/lib/python2.7/dist-packages/XenAPI.py\", line 229, in __call__\n(nova.virt.xenapi.vmops): TRACE:     return self.__send(self.__name, args)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/local/lib/python2.7/dist-packages/XenAPI.py\", line 133, in xenapi_request\n(nova.virt.xenapi.vmops): TRACE:     result = _parse_result(getattr(self, methodname)(*full_params))\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1224, in __call__\n(nova.virt.xenapi.vmops): TRACE:     return self.__send(self.__name, args)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1575, in __request\n(nova.virt.xenapi.vmops): TRACE:     verbose=self.__verbose\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1264, in request\n(nova.virt.xenapi.vmops): TRACE:     return self.single_request(host, handler, request_body, verbose)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1289, in single_request\n(nova.virt.xenapi.vmops): TRACE:     self.send_request(h, handler, request_body)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/xmlrpclib.py\", line 1391, in send_request\n(nova.virt.xenapi.vmops): TRACE:     connection.putrequest(\"POST\", handler, skip_accept_encoding=True)\n(nova.virt.xenapi.vmops): TRACE:   File \"/usr/lib/python2.7/httplib.py\", line 853, in putrequest\n(nova.virt.xenapi.vmops): TRACE:     raise CannotSendRequest()\n(nova.virt.xenapi.vmops): TRACE: CannotSendRequest\n(nova.virt.xenapi.vmops): TRACE:", 
            "date_created": "2012-02-24 11:08:37.284027+00:00", 
            "author": "https://api.launchpad.net/1.0/~kamil-gardziejczyk"
        }, 
        {
            "content": "I am at a loss to understand this, it looks like the connection to XS is seriously broken! If so how could you have possibly launched an instance is beyond me. \n\nHave you tried running nova-compute using python 2.6?\n\nWhat connection_url are you using?", 
            "date_created": "2012-02-24 12:23:52.079989+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "It is exactly like I said. Instances works fine but nova-compute reports boot error and XenCenter console hungs on\n\nBegin: Running /scripts/init-bottom...\n\n I havn`t tried python 2.6 (my version is 2.7.2).\n\nI able to connect via ssh. I`m using lucid_img from http://wiki.openstack.org/XenServerDevelopment\n\nDo you need my cfg files?\n\n", 
            "date_created": "2012-02-24 13:51:25.285342+00:00", 
            "author": "https://api.launchpad.net/1.0/~kamil-gardziejczyk"
        }, 
        {
            "content": "I do believe you! But without log files and full configuration is hard to tell what's wrong.  What nova version are you running?\n\nHave you tried other things like terminating the instance, rebooting it etc.?\n\nMaybe if you paste the entire nova-compute log with xensource.log/messages on dom0 we could get to the bottom of this one.", 
            "date_created": "2012-02-24 18:01:12.440471+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "Sorry it took me so long...\n\n1) compute node log file:\n\nhttp://speedy.sh/QXz9x/compute.txt\n\n2) xenserver log file:\n\nhttp://speedy.sh/ycuAz/xenserver.txt\n\n3) my configuration files for CC and CN:\n\nCC:\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n--logdir=/var/log/nova\n--state_path=/var/lib/nova\n--lock_path=/var/lock/nova\n--force_dhcp_release=True\n--use_deprecated_auth\n--iscsi_helper=tgtadm\n--verbose\n\n--sql_connection=mysql://nova:nova@<CC_IP>/nova\n--s3_host=<CC_IP>\n--rabbit_host=<CC_IP>\n--cc_host=<CC_IP>\n--ec2_url=http://<CC_IP>:8773/services/Cloud\n--glance_api_servers=<CC_IP>:9292\n--routing_source_ip=<CC_IP>\n\n--image_service=nova.image.glance.GlanceImageService\n\n--network_manager=nova.network.manager.FlatDHCPManager\n--network_host=<CC_IP>\n--flat_network_dhcp_start=10.0.0.2\n--flat_interface=eth1\n--flat_injected=False\n--public_interface=eth0\n--floating_range=<FR_IP>/28\n--fixed_range=10.0.0.0/28\n--network_size=14\n\n--flat_network_bridge=xenbr1\n--connection_type=xenapi\n--xenapi_connection_url=https://<XS_IP>\n--xenapi_connection_username=root\n--xenapi_connection_password=\n--reboot_timeout=600\n--rescue_timeout=86400\n--resize_confirm_window=86400\n--allow_admin_api\n--allow_resize_to_same_host\n--xenapi_generate_swap\n--firewall_driver=nova.virt.xenapi.firewall.Dom0IptablesFirewallDriver\n\nCN:\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n--logdir=/var/log/nova\n--state_path=/var/lib/nova\n--lock_path=/var/lock/nova\n--force_dhcp_release=True\n--use_deprecated_auth\n--iscsi_helper=tgtadm\n--verbose\n\n--sql_connection=mysql://nova:nova@<CC_IP>/nova\n--s3_host=<CC_IP>\n--rabbit_host=<CC_IP>\n--cc_host=<CC_IP>\n--ec2_url=http://<CC_IP>:8773/services/Cloud\n--glance_api_servers=<CC_IP>:9292\n--routing_source_ip=<CC_IP>\n\n#--glance_host=<CC_IP>\n--image_service=nova.image.glance.GlanceImageService\n\n--network_manager=nova.network.manager.FlatDHCPManager\n--network_host=<CC_IP>\n#--flat_network_bridge=br100\n--flat_network_dhcp_start=10.0.0.2\n--flat_interface=eth1\n--flat_injected=False\n--public_interface=eth0\n--floating_range=<FR_IP>/28\n\n\n--fixed_range=10.0.0.0/28\n--network_size=14\n\n--flat_network_bridge=xenbr0\n--connection_type=xenapi\n--xenapi_connection_url=https://<XS_IP>\n--xenapi_connection_username=root\n--xenapi_connection_password=\n--reboot_timeout=600\n--rescue_timeout=86400\n--resize_confirm_window=86400\n--allow_admin_api\n--enabled_apis=osapi_compute\n--allow_resize_to_same_host\n--xenapi_generate_swap\n--firewall_driver=nova.virt.xenapi.firewall.Dom0IptablesFirewallDriver\n\n4) and some other info...\n\nProblem may be caused by not creating connection with VM via internal network...If i create public connection manually then i can connect via ssh and ip adress is shown in XenCenter VM description, but if try to use internal (private) network, ip is not assigned to VM and XenCenter VM network status is unknown. \n\n...and my ifconfig output....\n\nCN (PV):\n\nhttp://speedy.sh/b9guU/cn.txt\n\nCC:\n\nhttp://speedy.sh/j4UzH/cc.txt\n\nXS:\n\nhttp://speedy.sh/GAjQg/xs.txt\n\n\n\n", 
            "date_created": "2012-03-01 13:15:17.842099+00:00", 
            "author": "https://api.launchpad.net/1.0/~kamil-gardziejczyk"
        }, 
        {
            "content": "I am getting file not found exceptions for the links, I guess they have expired - sorry.\n\nThis looks a lot like a networking misconfiguration.\n\n\n\n", 
            "date_created": "2012-07-17 15:21:08.182045+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }
    ]
}