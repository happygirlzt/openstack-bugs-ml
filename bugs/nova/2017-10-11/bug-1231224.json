{
    "status": "Invalid", 
    "last_updated": "2014-09-07 22:55:26.327821+00:00", 
    "description": "I tried to run \"nova-manage db sync\" with mysql cluster, encounting the following errors, but the (most) tables were created.  the mysql process without cluster is ok!\n\nIf I dump a normal nova database from mysql(without cluster), and then \nmysql asdfsdfasdf < nova.sql,to write data to mysql cluster, this worked OK. A bug on sqlalchemy ?\n\nSoftware involved\uff1a\nnova-2012.2.5 \uff08nova folsom)\nmysql cluster (mysql-5.6.11 ndb-7.3.2)\nMySQL_python-1.2.3\nsqlalchemy_migrate-0.7.2\nSQLAlchemy-0.7.9\n\n\n\n\nlog:\n\nNo handlers could be found for logger \"106_add_foreign_keys\"\n2013-09-26 02:09:23 17100 CRITICAL nova [-] (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\n2013-09-26 02:09:23 17100 TRACE nova Traceback (most recent call last):\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/bin/nova-manage\", line 5, in <module>\n2013-09-26 02:09:23 17100 TRACE nova     pkg_resources.run_script('nova==2012.2.5', 'nova-manage')\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 499, in run_script\n2013-09-26 02:09:23 17100 TRACE nova     self.require(requires)[0].run_script(script_name, ns)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 1239, in run_script\n2013-09-26 02:09:23 17100 TRACE nova     execfile(script_filename, namespace, namespace)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1404, in <module>\n2013-09-26 02:09:23 17100 TRACE nova     main()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1391, in main\n2013-09-26 02:09:23 17100 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 760, in sync\n2013-09-26 02:09:23 17100 TRACE nova     return migration.db_sync(version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/migration.py\", line 32, in db_sync\n2013-09-26 02:09:23 17100 TRACE nova     return IMPL.db_sync(version=version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-09-26 02:09:23 17100 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 186, in upgrade\n2013-09-26 02:09:23 17100 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-09-26 02:09:23 17100 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-09-26 02:09:23 17100 TRACE nova     return f(*a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 366, in _migrate\n2013-09-26 02:09:23 17100 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/schema.py\", line 91, in runchange\n2013-09-26 02:09:23 17100 TRACE nova     change.run(self.engine, step)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/script/py.py\", line 145, in run\n2013-09-26 02:09:23 17100 TRACE nova     script_func(engine)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migrate_repo/versions/106_add_foreign_keys.py\", line 43, in upgrade\n2013-09-26 02:09:23 17100 TRACE nova     refcolumns=[instances.c.uuid]).create()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 44, in create\n2013-09-26 02:09:23 17100 TRACE nova     self.__do_imports('constraintgenerator', *a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 32, in __do_imports\n2013-09-26 02:09:23 17100 TRACE nova     run_single_visitor(engine, visitorcallable, self, *a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/databases/visitor.py\", line 75, in run_single_visitor\n2013-09-26 02:09:23 17100 TRACE nova     fn(element, **kwargs)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 266, in visit_migrate_foreign_key_constraint\n2013-09-26 02:09:23 17100 TRACE nova     self._visit_constraint(*p, **k)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 278, in _visit_constraint\n2013-09-26 02:09:23 17100 TRACE nova     self.execute()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 42, in execute\n2013-09-26 02:09:23 17100 TRACE nova     return self.connection.execute(self.buffer.getvalue())\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1449, in execute\n2013-09-26 02:09:23 17100 TRACE nova     params)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1628, in _execute_text\n2013-09-26 02:09:23 17100 TRACE nova     statement, parameters\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1698, in _execute_context\n2013-09-26 02:09:23 17100 TRACE nova     context)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1691, in _execute_context\n2013-09-26 02:09:23 17100 TRACE nova     context)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/default.py\", line 331, in do_execute\n2013-09-26 02:09:23 17100 TRACE nova     cursor.execute(statement, parameters)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/cursors.py\", line 174, in execute\n2013-09-26 02:09:23 17100 TRACE nova     self.errorhandler(self, exc, value)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n2013-09-26 02:09:23 17100 TRACE nova     raise errorclass, errorvalue\n2013-09-26 02:09:23 17100 TRACE nova IntegrityError: (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\n2013-09-26 02:09:23 17100 TRACE nova\nCommand failed, please check log for more info", 
    "tags": [
        "db"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1231224", 
    "owner": "None", 
    "id": 1231224, 
    "index": 5897, 
    "created": "2013-09-26 02:18:38.481670+00:00", 
    "title": "No handlers could be found for logger '106_add_foreign_keys'", 
    "comments": [
        {
            "content": "I tried to run \"nova-manage db sync\" with mysql cluster, encounting the following errors, but the (most) tables were created.  the mysql process without cluster is ok!\n\n\nNo handlers could be found for logger \"106_add_foreign_keys\"\n2013-09-26 02:09:23 17100 CRITICAL nova [-] (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\n2013-09-26 02:09:23 17100 TRACE nova Traceback (most recent call last):\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/bin/nova-manage\", line 5, in <module>\n2013-09-26 02:09:23 17100 TRACE nova     pkg_resources.run_script('nova==2012.2.5', 'nova-manage')\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 499, in run_script\n2013-09-26 02:09:23 17100 TRACE nova     self.require(requires)[0].run_script(script_name, ns)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 1239, in run_script\n2013-09-26 02:09:23 17100 TRACE nova     execfile(script_filename, namespace, namespace)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1404, in <module>\n2013-09-26 02:09:23 17100 TRACE nova     main()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1391, in main\n2013-09-26 02:09:23 17100 TRACE nova     fn(*fn_args, **fn_kwargs)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 760, in sync\n2013-09-26 02:09:23 17100 TRACE nova     return migration.db_sync(version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/migration.py\", line 32, in db_sync\n2013-09-26 02:09:23 17100 TRACE nova     return IMPL.db_sync(version=version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\n2013-09-26 02:09:23 17100 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 186, in upgrade\n2013-09-26 02:09:23 17100 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n2013-09-26 02:09:23 17100 TRACE nova   File \"<string>\", line 2, in _migrate\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\n2013-09-26 02:09:23 17100 TRACE nova     return f(*a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 366, in _migrate\n2013-09-26 02:09:23 17100 TRACE nova     schema.runchange(ver, change, changeset.step)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/schema.py\", line 91, in runchange\n2013-09-26 02:09:23 17100 TRACE nova     change.run(self.engine, step)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/script/py.py\", line 145, in run\n2013-09-26 02:09:23 17100 TRACE nova     script_func(engine)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migrate_repo/versions/106_add_foreign_keys.py\", line 43, in upgrade\n2013-09-26 02:09:23 17100 TRACE nova     refcolumns=[instances.c.uuid]).create()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 44, in create\n2013-09-26 02:09:23 17100 TRACE nova     self.__do_imports('constraintgenerator', *a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 32, in __do_imports\n2013-09-26 02:09:23 17100 TRACE nova     run_single_visitor(engine, visitorcallable, self, *a, **kw)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/databases/visitor.py\", line 75, in run_single_visitor\n2013-09-26 02:09:23 17100 TRACE nova     fn(element, **kwargs)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 266, in visit_migrate_foreign_key_constraint\n2013-09-26 02:09:23 17100 TRACE nova     self._visit_constraint(*p, **k)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 278, in _visit_constraint\n2013-09-26 02:09:23 17100 TRACE nova     self.execute()\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 42, in execute\n2013-09-26 02:09:23 17100 TRACE nova     return self.connection.execute(self.buffer.getvalue())\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1449, in execute\n2013-09-26 02:09:23 17100 TRACE nova     params)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1628, in _execute_text\n2013-09-26 02:09:23 17100 TRACE nova     statement, parameters\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1698, in _execute_context\n2013-09-26 02:09:23 17100 TRACE nova     context)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1691, in _execute_context\n2013-09-26 02:09:23 17100 TRACE nova     context)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/default.py\", line 331, in do_execute\n2013-09-26 02:09:23 17100 TRACE nova     cursor.execute(statement, parameters)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/cursors.py\", line 174, in execute\n2013-09-26 02:09:23 17100 TRACE nova     self.errorhandler(self, exc, value)\n2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n2013-09-26 02:09:23 17100 TRACE nova     raise errorclass, errorvalue\n2013-09-26 02:09:23 17100 TRACE nova IntegrityError: (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\n2013-09-26 02:09:23 17100 TRACE nova \nCommand failed, please check log for more info", 
            "date_created": "2013-09-26 02:18:38.481670+00:00", 
            "author": "https://api.launchpad.net/1.0/~jj-t"
        }, 
        {
            "content": "", 
            "date_created": "2013-09-26 02:18:38.481670+00:00", 
            "author": "https://api.launchpad.net/1.0/~jj-t"
        }, 
        {
            "content": "This is in Folsom migration 106, and we don't change migrations in stable branches, and 106 no longer exists in later versions as we squashed it into migration 133 in Grizzly.\n\nSo it's going to be difficult to fix the underlying bug without reproducing it in a newer version first.", 
            "date_created": "2013-09-30 15:23:15.900092+00:00", 
            "author": "https://api.launchpad.net/1.0/~dripton"
        }, 
        {
            "content": "Is there any document on Folsom migration ? I do not understand what does migration indeed do . thx\r\n  \r\n\r\n \r\n\r\n ------------------ \u539f\u59cb\u90ae\u4ef6 ------------------\r\n  \u53d1\u4ef6\u4eba: \"David Ripton\";<email address hidden>;\r\n \u53d1\u9001\u65f6\u95f4: 2013\u5e749\u670830\u65e5(\u661f\u671f\u4e00) \u665a\u4e0a11:23\r\n \u6536\u4ef6\u4eba: \"jj\"<email address hidden>; \r\n \r\n \u4e3b\u9898: [Bug 1231224] Re: No handlers could be found for logger\"106_add_foreign_keys\"\r\n\r\n \r\n\r\nThis is in Folsom migration 106, and we don't change migrations in\r\nstable branches, and 106 no longer exists in later versions as we\r\nsquashed it into migration 133 in Grizzly.\r\n\r\nSo it's going to be difficult to fix the underlying bug without\r\nreproducing it in a newer version first.\r\n\r\n-- \r\nYou received this bug notification because you are subscribed to the bug\r\nreport.\r\nhttps://bugs.launchpad.net/bugs/1231224\r\n\r\nTitle:\r\n  No handlers could be found for logger \"106_add_foreign_keys\"\r\n\r\nStatus in OpenStack Compute (Nova):\r\n  Triaged\r\n\r\nBug description:\r\n  I tried to run \"nova-manage db sync\" with mysql cluster, encounting\r\n  the following errors, but the (most) tables were created.  the mysql\r\n  process without cluster is ok!\r\n\r\n  If I dump a normal nova database from mysql(without cluster), and then \r\n  mysql asdfsdfasdf < nova.sql,to write data to mysql cluster, this worked OK. A bug on sqlalchemy ?\r\n\r\n  Software involved\uff1a\r\n  nova-2012.2.5 \uff08nova folsom)\r\n  mysql cluster (mysql-5.6.11 ndb-7.3.2)\r\n  MySQL_python-1.2.3\r\n  sqlalchemy_migrate-0.7.2\r\n  SQLAlchemy-0.7.9\r\n\r\n\r\n  \r\n  log:\r\n\r\n  No handlers could be found for logger \"106_add_foreign_keys\"\r\n  2013-09-26 02:09:23 17100 CRITICAL nova [-] (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\r\n  2013-09-26 02:09:23 17100 TRACE nova Traceback (most recent call last):\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/bin/nova-manage\", line 5, in <module>\r\n  2013-09-26 02:09:23 17100 TRACE nova     pkg_resources.run_script('nova==2012.2.5', 'nova-manage')\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 499, in run_script\r\n  2013-09-26 02:09:23 17100 TRACE nova     self.require(requires)[0].run_script(script_name, ns)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg/pkg_resources.py\", line 1239, in run_script\r\n  2013-09-26 02:09:23 17100 TRACE nova     execfile(script_filename, namespace, namespace)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1404, in <module>\r\n  2013-09-26 02:09:23 17100 TRACE nova     main()\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 1391, in main\r\n  2013-09-26 02:09:23 17100 TRACE nova     fn(*fn_args, **fn_kwargs)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/EGG-INFO/scripts/nova-manage\", line 760, in sync\r\n  2013-09-26 02:09:23 17100 TRACE nova     return migration.db_sync(version)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/migration.py\", line 32, in db_sync\r\n  2013-09-26 02:09:23 17100 TRACE nova     return IMPL.db_sync(version=version)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 79, in db_sync\r\n  2013-09-26 02:09:23 17100 TRACE nova     return versioning_api.upgrade(get_engine(), repository, version)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 186, in upgrade\r\n  2013-09-26 02:09:23 17100 TRACE nova     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"<string>\", line 2, in _migrate\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migration.py\", line 44, in patched_with_engine\r\n  2013-09-26 02:09:23 17100 TRACE nova     return f(*a, **kw)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/api.py\", line 366, in _migrate\r\n  2013-09-26 02:09:23 17100 TRACE nova     schema.runchange(ver, change, changeset.step)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/schema.py\", line 91, in runchange\r\n  2013-09-26 02:09:23 17100 TRACE nova     change.run(self.engine, step)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/versioning/script/py.py\", line 145, in run\r\n  2013-09-26 02:09:23 17100 TRACE nova     script_func(engine)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/nova-2012.2.5-py2.7.egg/nova/db/sqlalchemy/migrate_repo/versions/106_add_foreign_keys.py\", line 43, in upgrade\r\n  2013-09-26 02:09:23 17100 TRACE nova     refcolumns=[instances.c.uuid]).create()\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 44, in create\r\n  2013-09-26 02:09:23 17100 TRACE nova     self.__do_imports('constraintgenerator', *a, **kw)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/constraint.py\", line 32, in __do_imports\r\n  2013-09-26 02:09:23 17100 TRACE nova     run_single_visitor(engine, visitorcallable, self, *a, **kw)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/databases/visitor.py\", line 75, in run_single_visitor\r\n  2013-09-26 02:09:23 17100 TRACE nova     fn(element, **kwargs)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 266, in visit_migrate_foreign_key_constraint\r\n  2013-09-26 02:09:23 17100 TRACE nova     self._visit_constraint(*p, **k)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 278, in _visit_constraint\r\n  2013-09-26 02:09:23 17100 TRACE nova     self.execute()\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy_migrate-0.7.2-py2.7.egg/migrate/changeset/ansisql.py\", line 42, in execute\r\n  2013-09-26 02:09:23 17100 TRACE nova     return self.connection.execute(self.buffer.getvalue())\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1449, in execute\r\n  2013-09-26 02:09:23 17100 TRACE nova     params)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1628, in _execute_text\r\n  2013-09-26 02:09:23 17100 TRACE nova     statement, parameters\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1698, in _execute_context\r\n  2013-09-26 02:09:23 17100 TRACE nova     context)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/base.py\", line 1691, in _execute_context\r\n  2013-09-26 02:09:23 17100 TRACE nova     context)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.9-py2.7-linux-mips64.egg/sqlalchemy/engine/default.py\", line 331, in do_execute\r\n  2013-09-26 02:09:23 17100 TRACE nova     cursor.execute(statement, parameters)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/cursors.py\", line 174, in execute\r\n  2013-09-26 02:09:23 17100 TRACE nova     self.errorhandler(self, exc, value)\r\n  2013-09-26 02:09:23 17100 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/MySQL_python-1.2.3-py2.7-linux-mips64.egg/MySQLdb/connections.py\", line 36, in defaulterrorhandler\r\n  2013-09-26 02:09:23 17100 TRACE nova     raise errorclass, errorvalue\r\n  2013-09-26 02:09:23 17100 TRACE nova IntegrityError: (IntegrityError) (1215, 'Cannot add foreign key constraint') 'ALTER TABLE security_group_instance_association ADD CONSTRAINT security_group_instance_association_instance_uuid_fkey FOREIGN KEY(instance_uuid) REFERENCES instances (uuid)' ()\r\n  2013-09-26 02:09:23 17100 TRACE nova\r\n  Command failed, please check log for more info\r\n\r\nTo manage notifications about this bug go to:\r\nhttps://bugs.launchpad.net/nova/+bug/1231224/+subscriptions", 
            "date_created": "2013-10-01 01:14:19+00:00", 
            "author": "https://api.launchpad.net/1.0/~jj-t"
        }, 
        {
            "content": "We don't have a 106_add_foreign_keys anymore. :)", 
            "date_created": "2014-09-07 22:55:11.460985+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ]
}