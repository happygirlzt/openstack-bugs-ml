{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:43:12.627070+00:00", 
    "description": "Memcached requires strings, not unicode to be passed as the key. The following error is seen when attempting to use memcached with Grizzly 2013.1.1.\n\n2013-04-23 13:56:52.883 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Creating image\n2013-04-23 13:56:53.039 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Using config drive\n2013-04-23 13:56:53.166 ERROR nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Instance failed to spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Traceback (most recent call last):\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/comput\ne/manager.py\", line 1089, in _spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     block_device_info)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/l\nibvirt/driver.py\", line 1517, in spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     admin_pass=admin_password)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/l\nibvirt/driver.py\", line 1858, in _create_image\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     content=files, extra_md=extra_md)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/api/me\ntadata/base.py\", line 124, in __init__\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     self.ec2_ids = capi.get_ec2_ids(ctxt, instance)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/conduc\ntor/api.py\", line 674, in get_ec2_ids\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return self.conductor_rpcapi.get_ec2_ids(context\n, instance)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/conduc\ntor/rpcapi.py\", line 434, in get_ec2_ids\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return self.call(context, msg, version='1.42')\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/proxy.py\", line 80, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return rpc.call(context, self._get_topic(topic),\n msg, timeout)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/__init__.py\", line 140, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return _get_impl().call(CONF, context, topic, ms\ng, timeout)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/impl_kombu.py\", line 798, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     rpc_amqp.get_connection_pool(conf, Connection))\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/amqp.py\", line 612, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     rv = list(rv)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/amqp.py\", line 561, in __iter__\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     raise result\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] RemoteError: Remote error: MemcachedStringEncodingEr\nror Keys must be str()'s, not unicode.  Convert your unicode strings using mystring.encode(charset)!\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] [u'Traceback (most recent call last):\\n', u'  File \"\n/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\n\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **\nkwargs)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/conductor/manager.py\", line 410, in get_ec2_ids\\n    ec2_ids[\\'instance-id\\'] = ec2utils.id_to_ec2\n_inst_id(instance[\\'uuid\\'])\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 161, in id_to_ec2_inst_id\\n    int_id = get_int_id\n_from_instance_uuid(ctxt, instance_id)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 45, in memoizer\\n    value = _CACHE.get(\nkey)\\n', u'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 862, in get\\n    return self._get(\\'get\\', key)\\n', u'  File \"/usr/lib/python2.7/dist-p\nackages/memcache.py\", line 813, in _get\\n    self.check_key(key)\\n', u'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 1014, in check_key\\n    \"Ke\nys must be str()\\'s, not unicode.  Convert your unicode \"\\n', u\"MemcachedStringEncodingError: Keys must be str()'s, not unicode.  Convert your unicode strings\n using mystring.encode(charset)!\\n\"].\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]\n2013-04-23 13:56:53.249 AUDIT nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Terminating instance\n2013-04-23 13:56:53.661 14035 ERROR nova.virt.libvirt.driver [-] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] During wait destroy, instance disappeared.\n2013-04-23 13:56:53.663 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Deleting instance files /var/lib/nova/instances/b7fbc357-ad45-4c13-97a9-a72258b475f0\n2013-04-23 13:56:53.735 ERROR nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Error: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/mana\nger.py\", line 834, in _run_instance\\n    set_access_ip=set_access_ip)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1093, in _s\npawn\\n    LOG.exception(_(\\'Instance failed to spawn\\'), instance=instance)\\n', '  File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\\n    self.gen\n.next()\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1089, in _spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.7/d\nist-packages/nova/virt/libvirt/driver.py\", line 1517, in spawn\\n    admin_pass=admin_password)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt\n/driver.py\", line 1858, in _create_image\\n    content=files, extra_md=extra_md)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/api/metadata/base.py\", line\n 124, in __init__\\n    self.ec2_ids = capi.get_ec2_ids(ctxt, instance)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/conductor/api.py\", line 674, in get_\nec2_ids\\n    return self.conductor_rpcapi.get_ec2_ids(context, instance)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/conductor/rpcapi.py\", line 434, in\n get_ec2_ids\\n    return self.call(context, msg, version=\\'1.42\\')\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/proxy.py\", line 80,\n in call\\n    return rpc.call(context, self._get_topic(topic), msg, timeout)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/__init__.\npy\", line 140, in call\\n    return _get_impl().call(CONF, context, topic, msg, timeout)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rp\nc/impl_kombu.py\", line 798, in call\\n    rpc_amqp.get_connection_pool(conf, Connection))\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/r\npc/amqp.py\", line 612, in call\\n    rv = list(rv)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 561, in __iter__\\n\n raise result\\n', 'RemoteError: Remote error: MemcachedStringEncodingError Keys must be str()\\'s, not unicode.  Convert your unicode strings using mystring.en\ncode(charset)!\\n[u\\'Traceback (most recent call last):\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _pro\ncess_data\\\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatch\ner.py\", line 133, in dispatch\\\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/conductor/manager.\npy\", line 410, in get_ec2_ids\\\\n    ec2_ids[\\\\\\'instance-id\\\\\\'] = ec2utils.id_to_ec2_inst_id(instance[\\\\\\'uuid\\\\\\'])\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist\n-packages/nova/api/ec2/ec2utils.py\", line 161, in id_to_ec2_inst_id\\\\n    int_id = get_int_id_from_instance_uuid(ctxt, instance_id)\\\\n\\', u\\'  File \"/usr/lib/\npython2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 45, in memoizer\\\\n    value = _CACHE.get(key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcac\nhe.py\", line 862, in get\\\\n    return self._get(\\\\\\'get\\\\\\', key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 813, in _get\\\\n    self\n.check_key(key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 1014, in check_key\\\\n    \"Keys must be str()\\\\\\'s, not unicode.  Convert\nyour unicode \"\\\\n\\', u\"MemcachedStringEncodingError: Keys must be str()\\'s, not unicode.  Convert your unicode strings using mystring.encode(charset)!\\\\n\"].\\n\n']", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1174487", 
    "owner": "https://api.launchpad.net/1.0/~dflorea", 
    "id": 1174487, 
    "index": 3371, 
    "created": "2013-04-29 19:02:14.534035+00:00", 
    "title": "Nova API memcached key encoding error", 
    "comments": [
        {
            "content": "Memcached requires strings, not unicode to be passed as the key. The following error is seen when attempting to use memcached with Grizzly 2013.1.1.\n\n2013-04-23 13:56:52.883 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Creating image\n2013-04-23 13:56:53.039 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Using config drive\n2013-04-23 13:56:53.166 ERROR nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Instance failed to spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Traceback (most recent call last):\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/comput\ne/manager.py\", line 1089, in _spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     block_device_info)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/l\nibvirt/driver.py\", line 1517, in spawn\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     admin_pass=admin_password)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/l\nibvirt/driver.py\", line 1858, in _create_image\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     content=files, extra_md=extra_md)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/api/me\ntadata/base.py\", line 124, in __init__\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     self.ec2_ids = capi.get_ec2_ids(ctxt, instance)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/conduc\ntor/api.py\", line 674, in get_ec2_ids\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return self.conductor_rpcapi.get_ec2_ids(context\n, instance)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/conduc\ntor/rpcapi.py\", line 434, in get_ec2_ids\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return self.call(context, msg, version='1.42')\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/proxy.py\", line 80, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return rpc.call(context, self._get_topic(topic),\n msg, timeout)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/__init__.py\", line 140, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     return _get_impl().call(CONF, context, topic, ms\ng, timeout)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/impl_kombu.py\", line 798, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     rpc_amqp.get_connection_pool(conf, Connection))\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/amqp.py\", line 612, in call\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     rv = list(rv)\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]   File \"/usr/lib/python2.7/dist-packages/nova/openst\nack/common/rpc/amqp.py\", line 561, in __iter__\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]     raise result\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] RemoteError: Remote error: MemcachedStringEncodingEr\nror Keys must be str()'s, not unicode.  Convert your unicode strings using mystring.encode(charset)!\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] [u'Traceback (most recent call last):\\n', u'  File \"\n/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\n\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **\nkwargs)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/conductor/manager.py\", line 410, in get_ec2_ids\\n    ec2_ids[\\'instance-id\\'] = ec2utils.id_to_ec2\n_inst_id(instance[\\'uuid\\'])\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 161, in id_to_ec2_inst_id\\n    int_id = get_int_id\n_from_instance_uuid(ctxt, instance_id)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 45, in memoizer\\n    value = _CACHE.get(\nkey)\\n', u'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 862, in get\\n    return self._get(\\'get\\', key)\\n', u'  File \"/usr/lib/python2.7/dist-p\nackages/memcache.py\", line 813, in _get\\n    self.check_key(key)\\n', u'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 1014, in check_key\\n    \"Ke\nys must be str()\\'s, not unicode.  Convert your unicode \"\\n', u\"MemcachedStringEncodingError: Keys must be str()'s, not unicode.  Convert your unicode strings\n using mystring.encode(charset)!\\n\"].\n2013-04-23 13:56:53.166 14035 TRACE nova.compute.manager [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0]\n2013-04-23 13:56:53.249 AUDIT nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Terminating instance\n2013-04-23 13:56:53.661 14035 ERROR nova.virt.libvirt.driver [-] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] During wait destroy, instance disappeared.\n2013-04-23 13:56:53.663 INFO nova.virt.libvirt.driver [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0\nefa] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Deleting instance files /var/lib/nova/instances/b7fbc357-ad45-4c13-97a9-a72258b475f0\n2013-04-23 13:56:53.735 ERROR nova.compute.manager [req-97b9d0e8-77c4-4d22-9f9c-d028497e6db6 cc295ce252b24080a83a46a974aaa417 5b5b73caffc04791a04ce86c919b0efa\n] [instance: b7fbc357-ad45-4c13-97a9-a72258b475f0] Error: ['Traceback (most recent call last):\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/mana\nger.py\", line 834, in _run_instance\\n    set_access_ip=set_access_ip)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1093, in _s\npawn\\n    LOG.exception(_(\\'Instance failed to spawn\\'), instance=instance)\\n', '  File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\\n    self.gen\n.next()\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1089, in _spawn\\n    block_device_info)\\n', '  File \"/usr/lib/python2.7/d\nist-packages/nova/virt/libvirt/driver.py\", line 1517, in spawn\\n    admin_pass=admin_password)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt\n/driver.py\", line 1858, in _create_image\\n    content=files, extra_md=extra_md)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/api/metadata/base.py\", line\n 124, in __init__\\n    self.ec2_ids = capi.get_ec2_ids(ctxt, instance)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/conductor/api.py\", line 674, in get_\nec2_ids\\n    return self.conductor_rpcapi.get_ec2_ids(context, instance)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/conductor/rpcapi.py\", line 434, in\n get_ec2_ids\\n    return self.call(context, msg, version=\\'1.42\\')\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/proxy.py\", line 80,\n in call\\n    return rpc.call(context, self._get_topic(topic), msg, timeout)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/__init__.\npy\", line 140, in call\\n    return _get_impl().call(CONF, context, topic, msg, timeout)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rp\nc/impl_kombu.py\", line 798, in call\\n    rpc_amqp.get_connection_pool(conf, Connection))\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/r\npc/amqp.py\", line 612, in call\\n    rv = list(rv)\\n', '  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 561, in __iter__\\n\n raise result\\n', 'RemoteError: Remote error: MemcachedStringEncodingError Keys must be str()\\'s, not unicode.  Convert your unicode strings using mystring.en\ncode(charset)!\\n[u\\'Traceback (most recent call last):\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _pro\ncess_data\\\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatch\ner.py\", line 133, in dispatch\\\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/nova/conductor/manager.\npy\", line 410, in get_ec2_ids\\\\n    ec2_ids[\\\\\\'instance-id\\\\\\'] = ec2utils.id_to_ec2_inst_id(instance[\\\\\\'uuid\\\\\\'])\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist\n-packages/nova/api/ec2/ec2utils.py\", line 161, in id_to_ec2_inst_id\\\\n    int_id = get_int_id_from_instance_uuid(ctxt, instance_id)\\\\n\\', u\\'  File \"/usr/lib/\npython2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 45, in memoizer\\\\n    value = _CACHE.get(key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcac\nhe.py\", line 862, in get\\\\n    return self._get(\\\\\\'get\\\\\\', key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 813, in _get\\\\n    self\n.check_key(key)\\\\n\\', u\\'  File \"/usr/lib/python2.7/dist-packages/memcache.py\", line 1014, in check_key\\\\n    \"Keys must be str()\\\\\\'s, not unicode.  Convert\nyour unicode \"\\\\n\\', u\"MemcachedStringEncodingError: Keys must be str()\\'s, not unicode.  Convert your unicode strings using mystring.encode(charset)!\\\\n\"].\\n\n']", 
            "date_created": "2013-04-29 19:02:14.534035+00:00", 
            "author": "https://api.launchpad.net/1.0/~dflorea"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/27873", 
            "date_created": "2013-05-01 00:10:03.519670+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/27886", 
            "date_created": "2013-05-01 04:03:32.821355+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/27886\nCommitted: http://github.com/openstack/nova/commit/37fbfad813e12d00da8f9d3e9f6f13256d5bb7c1\nSubmitter: Jenkins\nBranch:    master\n\ncommit 37fbfad813e12d00da8f9d3e9f6f13256d5bb7c1\nAuthor: Dan Florea <email address hidden>\nDate:   Tue Apr 30 21:02:18 2013 -0700\n\n    Convert the cache key from unicode to a string.\n    \n    The memcached API expects string format, not unicode.\n    Convert the key passed to the memory cache to a string\n    before sending it to memcached. Since both the function\n    name and the id that form the key are ascii format, a\n    simple conversion from unicode to str is sufficient.\n    \n    Change-Id: I9d15858ad4e10aa183444cccda9c33676059e55a\n    Fixes: bug #1174487\n", 
            "date_created": "2013-05-01 14:21:26.677507+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/27954", 
            "date_created": "2013-05-01 20:08:48.075817+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Great, it worked and fixed the same bug for me.", 
            "date_created": "2013-05-02 06:19:31.239806+00:00", 
            "author": "https://api.launchpad.net/1.0/~arminder"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/27954\nCommitted: http://github.com/openstack/nova/commit/55769853a22c7d83207734b9d7727b2f344854c8\nSubmitter: Jenkins\nBranch:    stable/grizzly\n\ncommit 55769853a22c7d83207734b9d7727b2f344854c8\nAuthor: Dan Florea <email address hidden>\nDate:   Tue Apr 30 21:02:18 2013 -0700\n\n    Convert the cache key from unicode to a string.\n    \n    The memcached API expects string format, not unicode.\n    Convert the key passed to the memory cache to a string\n    before sending it to memcached. Since both the function\n    name and the id that form the key are ascii format, a\n    simple conversion from unicode to str is sufficient.\n    \n    Change-Id: I9d15858ad4e10aa183444cccda9c33676059e55a\n    Fixes: bug #1174487\n    (cherry picked from commit 37fbfad813e12d00da8f9d3e9f6f13256d5bb7c1)\n", 
            "date_created": "2013-05-02 18:37:07.945467+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}