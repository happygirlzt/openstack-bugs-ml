{
    "status": "Fix Released", 
    "last_updated": "2016-09-02 01:14:56.980091+00:00", 
    "description": "[[Environment]]\nHave enabled n-api n-cond n-cpu n-crt n-obj n-sch.\n\n[[Since]]\nThis issue is observed to happen since 2016-06-17 07:31:07 by a 3rd party CI.\n\n[[The issue]]\nOther nova command (like flavor-show or list) worked fine.\nHowever, showing detail of an Ironic node hypervisor failed.....\n\n$ nova hypervisor-list\n+----+--------------------------------------+-------+---------+\n| ID | Hypervisor hostname                  | State | Status  |\n+----+--------------------------------------+-------+---------+\n| 1  | aad1dade-c627-42b0-b2bf-dd7d9925f1bb | up    | enabled |\n+----+--------------------------------------+-------+---------+\n\n$ ironic node-list\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n| UUID                                 | Name | Instance UUID | Power State | Provisioning State | Maintenance |\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n| aad1dade-c627-42b0-b2bf-dd7d9925f1bb | None | None          | power off   | available          | False       |\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n\n$ nova hypervisor-show aad1dade-c627-42b0-b2bf-dd7d9925f1bb\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-2eab78b2-ac04-454f-b74b-7e7311eeb6d4)\n\n$ nova hypervisor-show 1\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-898eb920-0547-4178-a44b-ddf9c55fbaec)\n\n[[n-api.log]]\n2016-06-20 02:16:20.958 12142 DEBUG nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Calling method '<bound method HypervisorsController.show of <nova.api.openstack.compute.hypervisors.HypervisorsController object at 0x7f18ac0898d0>>' _process_stack /opt/stack/new/nova/nova/api/openstack/wsgi.py:702\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Unexpected exception in API method\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 453, in wrapped\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/hypervisors.py\", line 119, in show\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     hyp, service, True, req))\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/hypervisors.py\", line 69, in _view_hypervisor\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     hyp_dict['cpu_info'] = jsonutils.loads(hypervisor.cpu_info)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_serialization/jsonutils.py\", line 235, in loads\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return json.loads(encodeutils.safe_decode(s, encoding), **kwargs)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/__init__.py\", line 338, in loads\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return _default_decoder.decode(s)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 366, in decode\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 384, in raw_decode\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     raise ValueError(\"No JSON object could be decoded\")\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions ValueError: No JSON object could be decoded\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions\n2016-06-20 02:16:20.975 12142 INFO nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'>\n2016-06-20 02:16:20.976 12142 DEBUG nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> __call__ /opt/stack/new/nova/nova/api/openstack/wsgi.py:1114\n2016-06-20 02:16:20.979 12142 INFO nova.osapi_compute.wsgi.server [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] 127.0.0.1 \"GET /v2.1/os-hypervisors/1 HTTP/1.1\" status: 500 len: 563 time: 0.0255849", 
    "tags": [
        "api"
    ], 
    "importance": "Undecided", 
    "heat": 24, 
    "link": "https://bugs.launchpad.net/nova/+bug/1594230", 
    "owner": "https://api.launchpad.net/1.0/~shiina-hironori", 
    "id": 1594230, 
    "index": 6287, 
    "created": "2016-06-20 02:54:02.063886+00:00", 
    "title": "nova hypervisor cannot show ironic node", 
    "comments": [
        {
            "content": "[[Environment]]\nHave enabled n-api n-cond n-cpu n-crt n-obj n-sch.\n\n[[The issue]]\nOther nova command (like flavor-show or list) worked fine.\nHowever, showing detail of an Ironic node hypervisor failed.....\n\n$ nova hypervisor-list\n+----+--------------------------------------+-------+---------+\n| ID | Hypervisor hostname                  | State | Status  |\n+----+--------------------------------------+-------+---------+\n| 1  | aad1dade-c627-42b0-b2bf-dd7d9925f1bb | up    | enabled |\n+----+--------------------------------------+-------+---------+\n\n$ ironic node-list\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n| UUID                                 | Name | Instance UUID | Power State | Provisioning State | Maintenance |\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n| aad1dade-c627-42b0-b2bf-dd7d9925f1bb | None | None          | power off   | available          | False       |\n+--------------------------------------+------+---------------+-------------+--------------------+-------------+\n\n$ nova hypervisor-show aad1dade-c627-42b0-b2bf-dd7d9925f1bb\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-2eab78b2-ac04-454f-b74b-7e7311eeb6d4)\n\n$ nova hypervisor-show 1\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-898eb920-0547-4178-a44b-ddf9c55fbaec)\n\n[[n-api.log]]\n2016-06-20 02:16:20.958 12142 DEBUG nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Calling method '<bound method HypervisorsController.show of <nova.api.openstack.compute.hypervisors.HypervisorsController object at 0x7f18ac0898d0>>' _process_stack /opt/stack/new/nova/nova/api/openstack/wsgi.py:702\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Unexpected exception in API method\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 453, in wrapped\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/hypervisors.py\", line 119, in show\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     hyp, service, True, req))\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/hypervisors.py\", line 69, in _view_hypervisor\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     hyp_dict['cpu_info'] = jsonutils.loads(hypervisor.cpu_info)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_serialization/jsonutils.py\", line 235, in loads\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return json.loads(encodeutils.safe_decode(s, encoding), **kwargs)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/__init__.py\", line 338, in loads\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     return _default_decoder.decode(s)\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 366, in decode\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 384, in raw_decode\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions     raise ValueError(\"No JSON object could be decoded\")\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions ValueError: No JSON object could be decoded\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions\n2016-06-20 02:16:20.975 12142 INFO nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'>\n2016-06-20 02:16:20.976 12142 DEBUG nova.api.openstack.wsgi [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> __call__ /opt/stack/new/nova/nova/api/openstack/wsgi.py:1114\n2016-06-20 02:16:20.979 12142 INFO nova.osapi_compute.wsgi.server [req-898eb920-0547-4178-a44b-ddf9c55fbaec admin admin] 127.0.0.1 \"GET /v2.1/os-hypervisors/1 HTTP/1.1\" status: 500 len: 563 time: 0.0255849", 
            "date_created": "2016-06-20 02:54:02.063886+00:00", 
            "author": "https://api.launchpad.net/1.0/~watanabe.isao"
        }, 
        {
            "content": "What version of Nova are you running (eg, Liberty, Mitaka, master)?\n\nCan you also provide your API logs? Thanks!", 
            "date_created": "2016-06-21 23:00:26.060730+00:00", 
            "author": "https://api.launchpad.net/1.0/~auggy"
        }, 
        {
            "content": "Hello, @Augustina Ragwitz (auggy) \n\nThe version of Nova I'm using is master.\nAnd the debug information is attached here.", 
            "date_created": "2016-06-22 02:45:49.834368+00:00", 
            "author": "https://api.launchpad.net/1.0/~watanabe.isao"
        }, 
        {
            "content": "Hi Watanabe, this isn't the API log, but thank you for the information! Can you also please attach the log from the Nova API process?", 
            "date_created": "2016-06-22 17:36:50.531187+00:00", 
            "author": "https://api.launchpad.net/1.0/~auggy"
        }, 
        {
            "content": "Hello, @Augustina Ragwitz (auggy)\nSorry, I'm not so familiar with nova.\nWhen you saying \"log from the Nova API\", do you mean the \"n-api.log\".\nIf yes, it is already in the \"Bug Description\".\nIf no, could you please be more specific?\nThank you.", 
            "date_created": "2016-06-22 23:29:21.416020+00:00", 
            "author": "https://api.launchpad.net/1.0/~watanabe.isao"
        }, 
        {
            "content": "Hi Watanabe, my apologies, I realize you did attach it in your original description.\n\nIt looks like the issue is somewhere in here:\n\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions hyp, service, True, req))\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions File \"/opt/stack/new/nova/nova/api/openstack/compute/hypervisors.py\", line 69, in _view_hypervisor\n2016-06-20 02:16:20.974 12142 ERROR nova.api.openstack.extensions hyp_dict['cpu_info'] = jsonutils.loads(hypervisor.cpu_info)\n\nI'll mark this as New so someone can work to reproduce it.", 
            "date_created": "2016-06-27 23:05:48.630260+00:00", 
            "author": "https://api.launchpad.net/1.0/~auggy"
        }, 
        {
            "content": "Hello, @Augustina Ragwitz (auggy)\nThanks. \nIt is very kind of you to check it.\nYes, maybe it is a spacial issue.\nI'll dig more and update any new evidence.", 
            "date_created": "2016-06-27 23:53:22.699543+00:00", 
            "author": "https://api.launchpad.net/1.0/~watanabe.isao"
        }, 
        {
            "content": "similar condition on my node.\nThe hypervisor id=1 is not KVM.\n\nnicira@htb-1n-eng-dhcp8:/opt/stack/logs$ nova hypervisor-list\n+----+------------------------------------------------+-------+---------+\n| ID | Hypervisor hostname                            | State | Status  |\n+----+------------------------------------------------+-------+---------+\n| 1  | domain-c8.54363740-b6b7-42b4-b007-c1649977cd50 | up    | enabled |\n| 2  | kvm-compute-node1                              | up    | enabled |\n+----+------------------------------------------------+-------+---------+\nnicira@htb-1n-eng-dhcp8:/opt/stack/logs$ nova hypervisor-show 1\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-e091d6bb-93e1-43d8-866d-8be6c037540e)\nnicira@htb-1n-eng-dhcp8:/opt/stack/logs$ nova hypervisor-show 2\n+---------------------------+----------------------------------------+\n| Property                  | Value                                  |\n+---------------------------+----------------------------------------+\n| cpu_info_arch             | x86_64                                 |\n| cpu_info_features         | [\"pge\", \"clflush\", \"sep\", \"syscall\",   |\n|                           | \"vme\", \"msr\", \"vmx\", \"cmov\", \"fpu\",    |\n|                           | \"pat\", \"lm\", \"tsc\", \"nx\", \"fxsr\",      |\n|                           | \"sse4.1\", \"pae\", \"sse4.2\", \"pclmuldq\", |\n|                           | \"mmx\", \"cx8\", \"mce\", \"de\", \"rdtscp\",   |\n|                           | \"mca\", \"pse\", \"pni\", \"popcnt\", \"apic\", |\n|                           | \"sse\", \"ds\", \"lahf_lm\", \"aes\", \"sse2\", |\n|                           | \"ss\", \"hypervisor\", \"ssse3\", \"cx16\",   |\n|                           | \"pse36\", \"mtrr\"]                       |\n| cpu_info_model            | Westmere                               |\n| cpu_info_topology_cells   | 1                                      |\n| cpu_info_topology_cores   | 1                                      |\n| cpu_info_topology_sockets | 8                                      |\n| cpu_info_topology_threads | 1                                      |\n| cpu_info_vendor           | Intel                                  |\n| current_workload          | 0                                      |\n| disk_available_least      | 8                                      |\n| free_disk_gb              | 14                                     |\n| free_ram_mb               | 15536                                  |\n| host_ip                   | 10.144.139.89                          |\n| hypervisor_hostname       | kvm-compute-node1                      |\n| hypervisor_type           | QEMU                                   |\n| hypervisor_version        | 2000000                                |\n| id                        | 2                                      |\n| local_gb                  | 14                                     |\n| local_gb_used             | 0                                      |\n| memory_mb                 | 16048                                  |\n| memory_mb_used            | 512                                    |\n| running_vms               | 0                                      |\n| service_disabled_reason   | None                                   |\n| service_host              | kvm-compute-node1                      |\n| service_id                | 9                                      |\n| state                     | up                                     |\n| status                    | enabled                                |\n| vcpus                     | 8                                      |\n| vcpus_used                | 0                                      |\n+---------------------------+----------------------------------------+\nnicira@htb-1n-eng-dhcp8:/opt/stack/logs$ \n\n\n### n-api.log:\n#################\n2016-07-25 02:51:47.404 DEBUG nova.osapi_compute.wsgi.server [req-3967381d-706b-49a3-9dc8-57f7b9bfc608 None None] (32039) accepted ('10.144.138.49', 46862) from (pid=32039) server /usr/local/lib/python2.7/dist-packages/eventlet/wsgi.py:868\n2016-07-25 02:51:47.528 INFO nova.osapi_compute.wsgi.server [req-da2665a6-38ca-42a1-bb19-1f16a45aa90e admin admin] 10.144.138.49 \"GET /v2.1 HTTP/1.1\" status: 302 len: 249 time: 0.1223969\n2016-07-25 02:51:47.614 DEBUG nova.api.openstack.wsgi [req-d812ed1d-3567-4733-b2ac-bbc922cf118e admin admin] Calling method '<bound method VersionsController.show of <nova.api.openstack.compute.versionsV21.VersionsController object at 0x7f96c40e3f90>>' from (pid=32039) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:636\n2016-07-25 02:51:47.617 INFO nova.osapi_compute.wsgi.server [req-d812ed1d-3567-4733-b2ac-bbc922cf118e admin admin] 10.144.138.49 \"GET /v2.1/ HTTP/1.1\" status: 200 len: 720 time: 0.0844119\n2016-07-25 02:51:47.889 DEBUG nova.api.openstack.wsgi [req-2bc1bb74-775f-4891-98f9-18b614638d04 admin admin] Calling method '<bound method HypervisorsController.show of <nova.api.openstack.compute.hypervisors.HypervisorsController object at 0x7f96c4539450>>' from (pid=32039) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:636\n2016-07-25 02:51:47.919 ERROR nova.api.openstack.extensions [req-2bc1bb74-775f-4891-98f9-18b614638d04 admin admin] Unexpected exception in API method\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 338, in wrapped\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/hypervisors.py\", line 170, in show\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     hyp, service, True, req))\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/hypervisors.py\", line 72, in _view_hypervisor\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     hyp_dict['cpu_info'] = jsonutils.loads(hypervisor.cpu_info)\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_serialization/jsonutils.py\", line 235, in loads\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     return json.loads(encodeutils.safe_decode(s, encoding), **kwargs)\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/__init__.py\", line 338, in loads\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     return _default_decoder.decode(s)\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 366, in decode\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/json/decoder.py\", line 384, in raw_decode\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions     raise ValueError(\"No JSON object could be decoded\")\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions ValueError: No JSON object could be decoded\n2016-07-25 02:51:47.919 TRACE nova.api.openstack.extensions \n2016-07-25 02:51:47.921 INFO nova.api.openstack.wsgi [req-2bc1bb74-775f-4891-98f9-18b614638d04 admin admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'>\n2016-07-25 02:51:47.922 DEBUG nova.api.openstack.wsgi [req-2bc1bb74-775f-4891-98f9-18b614638d04 admin admin] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> from (pid=32039) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1044\n2016-07-25 02:51:47.924 INFO nova.osapi_compute.wsgi.server [req-2bc1bb74-775f-4891-98f9-18b614638d04 admin admin] 10.144.138.49 \"GET /v2.1/os-hypervisors/1 HTTP/1.1\" status: 500 len: 563 time: 0.0685430\n", 
            "date_created": "2016-07-25 02:59:11.910940+00:00", 
            "author": "https://api.launchpad.net/1.0/~akang"
        }, 
        {
            "content": "We can reproduce this bug by deploying ironic with DevStack[1].\nIt happens with Nova API microversion 2.28 or later as follows.\n\n~$ nova --os-compute-api-version 2.28 hypervisor-show 1\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.ValueError'> (HTTP 500) (Request-ID: req-06578b31-e22d-450f-855c-567ac0c3a804)\n\n~$ nova --os-compute-api-version 2.27 hypervisor-show 1\n+-------------------------+--------------------------------------+\n| Property                | Value                                |\n+-------------------------+--------------------------------------+\n| cpu_info                |                                      |\n| current_workload        | 0                                    |\n| disk_available_least    | -10                                  |\n| free_disk_gb            | 0                                    |\n| free_ram_mb             | 0                                    |\n| host_ip                 | 192.168.122.148                      |\n| hypervisor_hostname     | 70b56477-97ec-4e8d-84f5-cb6f99afe45e |\n| hypervisor_type         | ironic                               |\n| hypervisor_version      | 1                                    |\n| id                      | 1                                    |\n| local_gb                | 0                                    |\n| local_gb_used           | 10                                   |\n| memory_mb               | 0                                    |\n| memory_mb_used          | 1024                                 |\n| running_vms             | 1                                    |\n| service_disabled_reason | None                                 |\n| service_host            | devstack                             |\n| service_id              | 6                                    |\n| state                   | up                                   |\n| status                  | enabled                              |\n| vcpus                   | 0                                    |\n| vcpus_used              | 1                                    |\n+-------------------------+--------------------------------------+\n\nThis bug is caused by passing an empty string as cpu_info to jsonutils.loads in nova/api/openstack/compute/hypervisors.py[2].\n\n\n[1] http://docs.openstack.org/developer/ironic/dev/dev-quickstart.html#deploying-ironic-with-devstack\n[2] https://github.com/openstack/nova/blob/master/nova/api/openstack/compute/hypervisors.py#L72\n", 
            "date_created": "2016-07-25 12:28:31.567472+00:00", 
            "author": "https://api.launchpad.net/1.0/~shiina-hironori"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/346868", 
            "date_created": "2016-07-25 14:45:20.841913+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/346868\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=72fb6726c07707d6b7ec6052f97e24f44b2c45ab\nSubmitter: Jenkins\nBranch:    master\n\ncommit 72fb6726c07707d6b7ec6052f97e24f44b2c45ab\nAuthor: Hironori Shiina <email address hidden>\nDate:   Mon Jul 25 23:29:55 2016 +0900\n\n    Allow empty CPU info of hypervisors in API response\n    \n    CPU info of hypervisors in an API response was changed from string to\n    object at API microversion 2.28. CPU info in a hypervisor object can be\n    empty when using some virt drivers such as ironic virt driver. If the\n    CPU info is an empty string or None, it cannot be convert to a JSON\n    object with json.loads method. It causes an internal server error.\n    \n    This patch sets CPU info in an API response to an empty dict without\n    using json.loads method in this case follwing the schema of the\n    response data.\n    \n    This patch also adds unit tests for this fix. These tests copies a\n    hypervisor object locally and modified the copy. In\n    CellHypervisorsTestV21, hypervisor objects are wrapped by\n    ComputeNodeProxy. In order to apply deepcopy to a ComputeNodeProxy,\n    the test adds __deepcopy__ method to the class. Without __deepcopy__,\n    __deepcopy__ of an self._obj works due to __getattr__\n    method of the proxy, which creates a copy of self._obj.\n    \n    Change-Id: I34a7937ee6df985587fa98ccc3a17c969516d5ef\n    Closes-Bug: #1594230\n", 
            "date_created": "2016-08-27 01:02:34.306974+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b3 development milestone.", 
            "date_created": "2016-09-02 01:14:56.377772+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}