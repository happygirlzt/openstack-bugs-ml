{
    "status": "Invalid", 
    "last_updated": "2010-07-17 19:23:08.649314+00:00", 
    "description": "I tried running run_tests.py on the latest trunk (<email address hidden>) and got a bunch of errors. Most of them seem to have to do with missing users, which leads me to believe, perhaps erroneously, that perhaps I don't have something installed?\n\nIt worked on this machine before vendor/ was removed (which I applaud btw)\n\n===============================================================================\n[FAIL]: nova.tests.users_unittest.UserTestCase.test_010_can_list_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 104, in test_010_can_list_users\n    self.assertTrue(filter(lambda u: u.id == 'test1', users))\ntwisted.trial.unittest.FailTest: None\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_001_allow_all\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_002_allow_none\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_003_allow_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_004_allow_sys_and_net\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_005_allow_sys_no_pm\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_describe_instances\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/api_unittest.py\", line 184, in test_describe_instances\n    self.assertEqual(self.ec2.get_all_instances(), [])\n  File \"/usr/lib/pymodules/python2.6/boto/ec2/connection.py\", line 378, in get_all_instances\n    return self.get_list('DescribeInstances', params, [('item', Reservation)])\n  File \"/usr/lib/pymodules/python2.6/boto/connection.py\", line 615, in get_list\n    raise self.ResponseError(response.status, response.reason, body)\nboto.exception.EC2ResponseError: EC2ResponseError: 403 Forbidden\n<html><title>403: Forbidden</title><body>403: Forbidden</body></html>\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_get_all_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/api_unittest.py\", line 196, in test_get_all_key_pairs\n    self.users.generate_key_pair('fake', keyname)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 556, in generate_key_pair\n    raise exception.NotFound(\"User %s doesn't exist\" % user)\nnova.exception.NotFound: User fake doesn't exist\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_get_all_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 114, in tearDown\n    super(BaseTestCase, self).tearDown()\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 74, in tearDown\n    self.mox.VerifyAll()\n  File \"/usr/lib/pymodules/python2.6/mox.py\", line 284, in VerifyAll\n    mock_obj._Verify()\n  File \"/usr/lib/pymodules/python2.6/mox.py\", line 504, in _Verify\n    raise ExpectedMethodCallsError(self._expected_calls_queue)\nmox.ExpectedMethodCallsError: Verify: Expected methods never called:\n  0.  Stub for <bound method EC2Connection.new_http_connection of EC2Connection:127.0.0.1>.__call__(None, False) -> <nova.tests.api_unittest.FakeHttplibConnection object at 0x29f5d90>\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_console_output\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_instance_update_state\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_run_instances\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_allocate_deallocate_ip\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_deallocate_before_issued\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_public_network_allocation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_range_allocation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_release_before_deallocate\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_subnet_edge\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_too_many_addresses\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_console_output\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 115, in test_console_output\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_reboot\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 101, in test_reboot\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_run_describe_terminate\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 86, in test_run_describe_terminate\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_run_instance_existing\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 124, in test_run_instance_existing\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_buckets\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 92, in test_buckets\n    objectstore.bucket.Bucket.create('new_bucket', self.context)\n  File \"/home/mordred/ozone/trunk/nova/objectstore/bucket.py\", line 84, in create\n    json.dump({'ownerId': context.project.id}, f)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_buckets\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 82, in tearDown\n    self.um.delete_project('proj1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=proj1,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_images\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 150, in test_images\n    objectstore.bucket.Bucket.create('image_bucket', self.context)\n  File \"/home/mordred/ozone/trunk/nova/objectstore/bucket.py\", line 84, in create\n    json.dump({'ownerId': context.project.id}, f)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_images\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 82, in tearDown\n    self.um.delete_project('proj1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=proj1,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_001_can_create_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 45, in test_001_can_create_users\n    self.users.create_user('test1', 'access', 'secret')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 529, in create_user\n    result = conn.create_user(user, access, secret, admin)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 723, in create_user\n    self.conn.add_s(self.__uid_to_dn(name), attr)\n  File \"/home/mordred/ozone/trunk/nova/auth/fakeldap.py\", line 160, in add_s\n    datastore.Redis.instance().hmset(key, value_dict)\nexceptions.AttributeError: 'Redis' object has no attribute 'hmset'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_003_can_retreive_properties\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 53, in test_003_can_retreive_properties\n    self.assertEqual('test1', user.id)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_006_test_key_storage\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 74, in test_006_test_key_storage\n    user.create_key_pair('public', 'key', 'fingerprint')\nexceptions.AttributeError: 'NoneType' object has no attribute 'create_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_007_test_key_generation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 81, in test_007_test_key_generation\n    private_key, fingerprint = user.generate_key_pair('public2')\nexceptions.AttributeError: 'NoneType' object has no attribute 'generate_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_008_can_list_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 92, in test_008_can_list_key_pairs\n    keys = self.users.get_user('test1').get_key_pairs()\nexceptions.AttributeError: 'NoneType' object has no attribute 'get_key_pairs'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_009_can_delete_key_pair\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 97, in test_009_can_delete_key_pair\n    self.users.get_user('test1').delete_key_pair('public')\nexceptions.AttributeError: 'NoneType' object has no attribute 'delete_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_101_can_add_user_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 107, in test_101_can_add_user_role\n    self.assertFalse(self.users.has_role('test1', 'itsec'))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 440, in has_role\n    None)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 804, in has_role\n    return self.is_in_group(uid, role_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 822, in is_in_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test1 can't be searched in group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_199_can_remove_user_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 112, in test_199_can_remove_user_role\n    self.assertTrue(self.users.has_role('test1', 'itsec'))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 440, in has_role\n    None)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 804, in has_role\n    return self.is_in_group(uid, role_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 822, in is_in_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test1 can't be searched in group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_201_can_create_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 117, in test_201_can_create_project\n    project = self.users.create_project('testproj', 'test1', 'A test project', ['test1'])\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager test1 doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_202_user1_is_project_member\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 125, in test_202_user1_is_project_member\n    self.assertTrue(self.users.get_user('test1').is_project_member('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_member'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_203_user2_is_not_project_member\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 128, in test_203_user2_is_not_project_member\n    self.assertFalse(self.users.get_user('test2').is_project_member('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_member'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_204_user1_is_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 131, in test_204_user1_is_project_manager\n    self.assertTrue(self.users.get_user('test1').is_project_manager('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_manager'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_205_user2_is_not_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 134, in test_205_user2_is_not_project_manager\n    self.assertFalse(self.users.get_user('test2').is_project_manager('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_manager'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_206_can_add_user_to_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 137, in test_206_can_add_user_to_project\n    self.users.add_to_project('test2', 'testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 488, in add_to_project\n    Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 760, in add_to_project\n    return self.add_to_group(uid, dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 832, in add_to_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test2 can't be added to the group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_208_can_remove_user_from_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 141, in test_208_can_remove_user_from_project\n    self.users.remove_from_project('test2', 'testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 505, in remove_from_project\n    Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 764, in remove_from_project\n    return self.remove_from_group(uid, dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 847, in remove_from_group\n    (group_dn,))\nnova.exception.NotFound: The group at dn cn=testproj,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_209_can_generate_x509\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 148, in test_209_can_generate_x509\n    private_key, signed_cert_string = self.users.get_project('testproj').generate_x509_cert('test1')\nexceptions.AttributeError: 'NoneType' object has no attribute 'generate_x509_cert'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_210_can_add_project_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 170, in test_210_can_add_project_role\n    self.assertFalse(project.has_role('test1', 'sysadmin'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'has_role'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_211_can_remove_project_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 178, in test_211_can_remove_project_role\n    self.assertTrue(project.has_role('test1', 'sysadmin'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'has_role'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_212_vpn_ip_and_port_looks_valid\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 186, in test_212_vpn_ip_and_port_looks_valid\n    self.assert_(project.vpn_ip)\nexceptions.AttributeError: 'NoneType' object has no attribute 'vpn_ip'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_299_can_delete_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 196, in test_299_can_delete_project\n    self.users.delete_project('testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=testproj,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_999_can_delete_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 200, in test_999_can_delete_users\n    self.users.delete_user('test1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 548, in delete_user\n    conn.delete_user(user)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 902, in delete_user\n    raise exception.NotFound(\"User %s doesn't exist\" % uid)\nnova.exception.NotFound: User test1 doesn't exist\n-------------------------------------------------------------------------------", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/606055", 
    "owner": "None", 
    "id": 606055, 
    "index": 1891, 
    "created": "2010-07-15 22:40:37.578863+00:00", 
    "title": "a whole host of test failures in run_tests.py", 
    "comments": [
        {
            "content": "I tried running run_tests.py on the latest trunk (<email address hidden>) and got a bunch of errors. Most of them seem to have to do with missing users, which leads me to believe, perhaps erroneously, that perhaps I don't have something installed?\n\nIt worked on this machine before vendor/ was removed (which I applaud btw)\n\n===============================================================================\n[FAIL]: nova.tests.users_unittest.UserTestCase.test_010_can_list_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 104, in test_010_can_list_users\n    self.assertTrue(filter(lambda u: u.id == 'test1', users))\ntwisted.trial.unittest.FailTest: None\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_001_allow_all\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_002_allow_none\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_003_allow_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_004_allow_sys_and_net\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.access_unittest.AccessTestCase.test_005_allow_sys_no_pm\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/access_unittest.py\", line 77, in setUp\n    self.context.project = self.project\nexceptions.AttributeError: 'AccessTestCase' object has no attribute 'project'\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_describe_instances\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/api_unittest.py\", line 184, in test_describe_instances\n    self.assertEqual(self.ec2.get_all_instances(), [])\n  File \"/usr/lib/pymodules/python2.6/boto/ec2/connection.py\", line 378, in get_all_instances\n    return self.get_list('DescribeInstances', params, [('item', Reservation)])\n  File \"/usr/lib/pymodules/python2.6/boto/connection.py\", line 615, in get_list\n    raise self.ResponseError(response.status, response.reason, body)\nboto.exception.EC2ResponseError: EC2ResponseError: 403 Forbidden\n<html><title>403: Forbidden</title><body>403: Forbidden</body></html>\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_get_all_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/api_unittest.py\", line 196, in test_get_all_key_pairs\n    self.users.generate_key_pair('fake', keyname)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 556, in generate_key_pair\n    raise exception.NotFound(\"User %s doesn't exist\" % user)\nnova.exception.NotFound: User fake doesn't exist\n===============================================================================\n[ERROR]: nova.tests.api_unittest.ApiEc2TestCase.test_get_all_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 114, in tearDown\n    super(BaseTestCase, self).tearDown()\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 74, in tearDown\n    self.mox.VerifyAll()\n  File \"/usr/lib/pymodules/python2.6/mox.py\", line 284, in VerifyAll\n    mock_obj._Verify()\n  File \"/usr/lib/pymodules/python2.6/mox.py\", line 504, in _Verify\n    raise ExpectedMethodCallsError(self._expected_calls_queue)\nmox.ExpectedMethodCallsError: Verify: Expected methods never called:\n  0.  Stub for <bound method EC2Connection.new_http_connection of EC2Connection:127.0.0.1>.__call__(None, False) -> <nova.tests.api_unittest.FakeHttplibConnection object at 0x29f5d90>\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_console_output\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_instance_update_state\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_run_instances\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 215, in run\n    self.setUp()\n  File \"/home/mordred/ozone/trunk/nova/tests/cloud_unittest.py\", line 69, in setUp\n    project = users.UserManager.instance().create_project('proj', 'admin', 'proj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager admin doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_allocate_deallocate_ip\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_deallocate_before_issued\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_public_network_allocation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_range_allocation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_release_before_deallocate\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_subnet_edge\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.network_unittest.NetworkTestCase.test_too_many_addresses\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/tests/network_unittest.py\", line 51, in setUp\n    self.manager.create_project(name, 'netuser', name)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager netuser doesn't exist\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_console_output\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 115, in test_console_output\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_reboot\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 101, in test_reboot\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_run_describe_terminate\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 86, in test_run_describe_terminate\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.node_unittest.NodeConnectionTestCase.test_run_instance_existing\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 823, in _inlineCallbacks\n    result = g.send(result)\n  File \"/home/mordred/ozone/trunk/nova/tests/node_unittest.py\", line 124, in test_run_instance_existing\n    rv = yield self.node.run_instance(instance_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/node.py\", line 168, in run_instance\n    security_group).express()\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 298, in get_network_for_project\n    vlan = get_vlan_for_project(project_id)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 509, in get_vlan_for_project\n    known_vlans = Vlan.dict_by_vlan()\n  File \"/home/mordred/ozone/trunk/nova/datastore.py\", line 66, in _wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mordred/ozone/trunk/nova/compute/network.py\", line 125, in dict_by_vlan\n    for v in h.keys():\nexceptions.AttributeError: 'NoneType' object has no attribute 'keys'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_buckets\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 92, in test_buckets\n    objectstore.bucket.Bucket.create('new_bucket', self.context)\n  File \"/home/mordred/ozone/trunk/nova/objectstore/bucket.py\", line 84, in create\n    json.dump({'ownerId': context.project.id}, f)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_buckets\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 82, in tearDown\n    self.um.delete_project('proj1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=proj1,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_images\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 150, in test_images\n    objectstore.bucket.Bucket.create('image_bucket', self.context)\n  File \"/home/mordred/ozone/trunk/nova/objectstore/bucket.py\", line 84, in create\n    json.dump({'ownerId': context.project.id}, f)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.objectstore_unittest.ObjectStoreTestCase.test_images\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 237, in run\n    self.tearDown()\n  File \"/home/mordred/ozone/trunk/nova/tests/objectstore_unittest.py\", line 82, in tearDown\n    self.um.delete_project('proj1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=proj1,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_001_can_create_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 45, in test_001_can_create_users\n    self.users.create_user('test1', 'access', 'secret')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 529, in create_user\n    result = conn.create_user(user, access, secret, admin)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 723, in create_user\n    self.conn.add_s(self.__uid_to_dn(name), attr)\n  File \"/home/mordred/ozone/trunk/nova/auth/fakeldap.py\", line 160, in add_s\n    datastore.Redis.instance().hmset(key, value_dict)\nexceptions.AttributeError: 'Redis' object has no attribute 'hmset'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_003_can_retreive_properties\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 53, in test_003_can_retreive_properties\n    self.assertEqual('test1', user.id)\nexceptions.AttributeError: 'NoneType' object has no attribute 'id'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_006_test_key_storage\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 74, in test_006_test_key_storage\n    user.create_key_pair('public', 'key', 'fingerprint')\nexceptions.AttributeError: 'NoneType' object has no attribute 'create_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_007_test_key_generation\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 81, in test_007_test_key_generation\n    private_key, fingerprint = user.generate_key_pair('public2')\nexceptions.AttributeError: 'NoneType' object has no attribute 'generate_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_008_can_list_key_pairs\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 92, in test_008_can_list_key_pairs\n    keys = self.users.get_user('test1').get_key_pairs()\nexceptions.AttributeError: 'NoneType' object has no attribute 'get_key_pairs'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_009_can_delete_key_pair\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 97, in test_009_can_delete_key_pair\n    self.users.get_user('test1').delete_key_pair('public')\nexceptions.AttributeError: 'NoneType' object has no attribute 'delete_key_pair'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_101_can_add_user_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 107, in test_101_can_add_user_role\n    self.assertFalse(self.users.has_role('test1', 'itsec'))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 440, in has_role\n    None)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 804, in has_role\n    return self.is_in_group(uid, role_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 822, in is_in_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test1 can't be searched in group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_199_can_remove_user_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 112, in test_199_can_remove_user_role\n    self.assertTrue(self.users.has_role('test1', 'itsec'))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 440, in has_role\n    None)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 804, in has_role\n    return self.is_in_group(uid, role_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 822, in is_in_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test1 can't be searched in group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_201_can_create_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 117, in test_201_can_create_project\n    project = self.users.create_project('testproj', 'test1', 'A test project', ['test1'])\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 473, in create_project\n    member_users)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 733, in create_project\n    \"manager %s doesn't exist\" % manager_uid)\nnova.exception.NotFound: Project can't be created because manager test1 doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_202_user1_is_project_member\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 125, in test_202_user1_is_project_member\n    self.assertTrue(self.users.get_user('test1').is_project_member('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_member'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_203_user2_is_not_project_member\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 128, in test_203_user2_is_not_project_member\n    self.assertFalse(self.users.get_user('test2').is_project_member('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_member'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_204_user1_is_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 131, in test_204_user1_is_project_manager\n    self.assertTrue(self.users.get_user('test1').is_project_manager('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_manager'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_205_user2_is_not_project_manager\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 134, in test_205_user2_is_not_project_manager\n    self.assertFalse(self.users.get_user('test2').is_project_manager('testproj'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'is_project_manager'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_206_can_add_user_to_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 137, in test_206_can_add_user_to_project\n    self.users.add_to_project('test2', 'testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 488, in add_to_project\n    Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 760, in add_to_project\n    return self.add_to_group(uid, dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 832, in add_to_group\n    \"becuase the user doesn't exist\" % (uid,))\nnova.exception.NotFound: User test2 can't be added to the group becuase the user doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_208_can_remove_user_from_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 141, in test_208_can_remove_user_from_project\n    self.users.remove_from_project('test2', 'testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 505, in remove_from_project\n    Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 764, in remove_from_project\n    return self.remove_from_group(uid, dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 847, in remove_from_group\n    (group_dn,))\nnova.exception.NotFound: The group at dn cn=testproj,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_209_can_generate_x509\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 148, in test_209_can_generate_x509\n    private_key, signed_cert_string = self.users.get_project('testproj').generate_x509_cert('test1')\nexceptions.AttributeError: 'NoneType' object has no attribute 'generate_x509_cert'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_210_can_add_project_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 170, in test_210_can_add_project_role\n    self.assertFalse(project.has_role('test1', 'sysadmin'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'has_role'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_211_can_remove_project_role\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 178, in test_211_can_remove_project_role\n    self.assertTrue(project.has_role('test1', 'sysadmin'))\nexceptions.AttributeError: 'NoneType' object has no attribute 'has_role'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_212_vpn_ip_and_port_looks_valid\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 186, in test_212_vpn_ip_and_port_looks_valid\n    self.assert_(project.vpn_ip)\nexceptions.AttributeError: 'NoneType' object has no attribute 'vpn_ip'\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_299_can_delete_project\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 196, in test_299_can_delete_project\n    self.users.delete_project('testproj')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 509, in delete_project\n    return conn.delete_project(Project.safe_id(project))\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 928, in delete_project\n    self.delete_group(project_dn)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 917, in delete_group\n    raise exception.NotFound(\"Group at dn %s doesn't exist\" % group_dn)\nnova.exception.NotFound: Group at dn cn=testproj,ou=Groups,dc=example,dc=com doesn't exist\n===============================================================================\n[ERROR]: nova.tests.users_unittest.UserTestCase.test_999_can_delete_users\n\nTraceback (most recent call last):\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 224, in run\n    d = self._maybeInlineCallbacks(testMethod)\n  File \"/home/mordred/ozone/trunk/nova/test.py\", line 184, in _maybeInlineCallbacks\n    g = f()\n  File \"/home/mordred/ozone/trunk/nova/tests/users_unittest.py\", line 200, in test_999_can_delete_users\n    self.users.delete_user('test1')\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 548, in delete_user\n    conn.delete_user(user)\n  File \"/home/mordred/ozone/trunk/nova/auth/users.py\", line 902, in delete_user\n    raise exception.NotFound(\"User %s doesn't exist\" % uid)\nnova.exception.NotFound: User test1 doesn't exist\n-------------------------------------------------------------------------------", 
            "date_created": "2010-07-15 22:40:37.578863+00:00", 
            "author": "https://api.launchpad.net/1.0/~mordred"
        }, 
        {
            "content": "(The tracebacks say ozone, but I get the exact same ones on latest trunk of lp:nova)", 
            "date_created": "2010-07-15 22:47:56.358318+00:00", 
            "author": "https://api.launchpad.net/1.0/~mordred"
        }, 
        {
            "content": "This is due to missing dependencies.  While there are a few test cases failing, most do not fail when all required dependencies (namely python-mox) and all paths are setup correctly\r\n\r\nSo, there are bugs, but this bug report describes an issue with installation.  Install/packaging and installation instructions is currently being worked on to get rid of these issues and hopefully provide better input when dependencies are missing.\r\n\r\nCheers!\r\njay", 
            "date_created": "2010-07-16 15:54:37.448131+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }
    ]
}