{
    "status": "Invalid", 
    "last_updated": "2015-12-01 10:19:30.835698+00:00", 
    "description": "I installed OpenStack using Ubuntu formal documentation. every things is good but in chapter installing compute service in verify section when i run #nova image-list , i recieve the following error:\n\n\"ERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-d6d93391-b65d-4d0c-b3ba-a8ad51744b74)\"\n\nWhile i run #nova service-list or #nova flavor-list without any problem.\n\nuseful log files is attached to this bug report.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 36, 
    "link": "https://bugs.launchpad.net/nova/+bug/1514480", 
    "owner": "https://api.launchpad.net/1.0/~ghayem-training", 
    "id": 1514480, 
    "index": 5834, 
    "created": "2015-11-09 15:25:35.912087+00:00", 
    "title": "Bug in nova image-list ", 
    "comments": [
        {
            "content": "I installed OpenStack using Ubuntu formal documentation. every things is good but in chapter installing compute service in verify section when i run #nova image-list , i recieve the following error:\n\n\"ERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-d6d93391-b65d-4d0c-b3ba-a8ad51744b74)\"\n\nWhile i run #nova service-list or #nova flavor-list without any problem.\n\nuseful log files is attached to this bug report.", 
            "date_created": "2015-11-09 15:25:35.912087+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghayem-training"
        }, 
        {
            "content": "", 
            "date_created": "2015-11-09 15:25:35.912087+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghayem-training"
        }, 
        {
            "content": "Can you check the config and make sure it has correct user/pass value?", 
            "date_created": "2015-11-20 22:02:45.826573+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }, 
        {
            "content": "I've checked nova.conf files on all nodes and password/usernames are correct.", 
            "date_created": "2015-11-25 09:46:30.838534+00:00", 
            "author": "https://api.launchpad.net/1.0/~storm1911"
        }, 
        {
            "content": "run below command:\nnova --debug image-list\n\nand then stamp the entire output here. Want to check as to what is getting messed up", 
            "date_created": "2015-11-26 01:04:09.425617+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }, 
        {
            "content": "Also check glance password  in glance-api.conf and the one in db should same. Please try to use the same password.\n\nAre you on juno or kilo?", 
            "date_created": "2015-11-26 01:06:56.639612+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }, 
        {
            "content": "Issue seen in liberty also", 
            "date_created": "2015-11-26 07:13:42.697089+00:00", 
            "author": "https://api.launchpad.net/1.0/~thalabathy-v"
        }, 
        {
            "content": "root@liberty-osc:~# nova --debug image-list\nDEBUG (session:198) REQ: curl -g -i -X GET http://127.0.0.1:35357/v2.0 -H \"Accept: application/json\" -H \"User-Agent: python-keystoneclient\"\nINFO (connectionpool:205) Starting new HTTP connection (1): 127.0.0.1\nDEBUG (connectionpool:385) \"GET /v2.0 HTTP/1.1\" 200 336\nDEBUG (session:215) RESP: [200] Content-Length: 336 Vary: X-Auth-Token X-Distribution: Ubuntu Connection: keep-alive Date: Thu, 26 Nov 2015 06:57:36 GMT Content-Type: application/json X-Openstack-Request-Id: req-9eb68a99-0df9-4b57-b911-d4738bdb4321\nRESP BODY: {\"version\": {\"status\": \"stable\", \"updated\": \"2014-04-17T00:00:00Z\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.identity-v2.0+json\"}], \"id\": \"v2.0\", \"links\": [{\"href\": \"http://127.0.0.1:35357/v2.0/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}]}}\n\nDEBUG (v2:86) Making authentication request to http://127.0.0.1:35357/v2.0/tokens\nDEBUG (connectionpool:385) \"POST /v2.0/tokens HTTP/1.1\" 200 1698\nDEBUG (session:198) REQ: curl -g -i -X GET http://127.0.0.1:8774/v2/ -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}ad425dd68b2466f53a4b745b72f64ff5b104cbfb\"\nINFO (connectionpool:205) Starting new HTTP connection (1): 127.0.0.1\nDEBUG (connectionpool:385) \"GET /v2/ HTTP/1.1\" 200 374\nDEBUG (session:215) RESP: [200] Date: Thu, 26 Nov 2015 06:57:36 GMT Connection: keep-alive Content-Type: application/json Content-Length: 374 X-Compute-Request-Id: req-d7c9e778-a092-4563-8d7a-b6bb5057a660\nRESP BODY: {\"version\": {\"status\": \"SUPPORTED\", \"updated\": \"2011-01-21T11:33:21Z\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}], \"min_version\": \"\", \"version\": \"\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\"}}\n\nDEBUG (session:198) REQ: curl -g -i -X GET http://127.0.0.1:8774/v2/d41e6b4f5ab74c5b9aa3b3f3c11c32a1/images/detail -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}ad425dd68b2466f53a4b745b72f64ff5b104cbfb\"\nDEBUG (connectionpool:385) \"GET /v2/d41e6b4f5ab74c5b9aa3b3f3c11c32a1/images/detail HTTP/1.1\" 500 214\nDEBUG (session:215) RESP: [500] Date: Thu, 26 Nov 2015 07:00:42 GMT Connection: keep-alive Content-Type: application/json; charset=UTF-8 Content-Length: 214 X-Compute-Request-Id: req-6f54084f-31eb-4fe7-bcb4-bd8592d414ee\nRESP BODY: {\"computeFault\": {\"message\": \"Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<class 'glanceclient.exc.HTTPInternalServerError'>\", \"code\": 500}}\n\nDEBUG (shell:905) Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-6f54084f-31eb-4fe7-bcb4-bd8592d414ee)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 903, in main\n    OpenStackComputeShell().main(argv)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/shell.py\", line 830, in main\n    args.func(self.cs, args)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 1115, in do_image_list\n    image_list = cs.images.list(limit=limit)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/v2/images.py\", line 74, in list\n    return self._list('/images%s%s' % (detail, query), 'images')\n  File \"/usr/lib/python2.7/dist-packages/novaclient/base.py\", line 72, in _list\n    _resp, body = self.api.client.get(url)\n  File \"/usr/lib/python2.7/dist-packages/keystoneclient/adapter.py\", line 170, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/dist-packages/novaclient/client.py\", line 93, in request\n    raise exceptions.from_response(resp, body, url, method)\nClientException: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-6f54084f-31eb-4fe7-bcb4-bd8592d414ee)\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-6f54084f-31eb-4fe7-bcb4-bd8592d414ee)\nroot@liberty-osc:~#\n", 
            "date_created": "2015-11-26 07:13:53.569418+00:00", 
            "author": "https://api.launchpad.net/1.0/~thalabathy-v"
        }, 
        {
            "content": "Running version:\n\nroot@liberty-osc:~# dpkg -l | grep nova\nii  nova-api                            2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - API frontend\nii  nova-cert                           2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - certificate management\nii  nova-common                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - common files\nii  nova-compute                        2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - compute node base\nii  nova-compute-kvm                    2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - compute node (KVM)\nii  nova-compute-libvirt                2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - compute node libvirt support\nii  nova-conductor                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - conductor service\nii  nova-console                        2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - Console\nii  nova-consoleauth                    2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                     2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - virtual machine scheduler\nii  python-nova                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute Python libraries\nii  python-novaclient                   2:2.30.1-1~cloud0                     all          client library for OpenStack Compute API\nroot@liberty-osc:~#\n\n", 
            "date_created": "2015-11-26 07:14:52.068029+00:00", 
            "author": "https://api.launchpad.net/1.0/~thalabathy-v"
        }, 
        {
            "content": "Please confirm the keystone endpoint-list \n\nvalues and check basic glance image-list and other glance commands. This is a configuration issue. Please check the passwords for glance .", 
            "date_created": "2015-11-27 00:21:03.948448+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }, 
        {
            "content": "root@liberty-osc:~# keystone endpoint-list\n/usr/lib/python2.7/dist-packages/keystoneclient/shell.py:64: DeprecationWarning: The keystone CLI is deprecated in favor of python-openstackclient. For a Python library, continue using python-keystoneclient.\n  'python-keystoneclient.', DeprecationWarning)\n/usr/lib/python2.7/dist-packages/keystoneclient/v2_0/client.py:145: DeprecationWarning: Constructing an instance of the keystoneclient.v2_0.client.Client class without a session is deprecated as of the 1.7.0 release and may be removed in the 2.0.0 release.\n  'the 2.0.0 release.', DeprecationWarning)\n/usr/lib/python2.7/dist-packages/keystoneclient/v2_0/client.py:147: DeprecationWarning: Using the 'tenant_name' argument is deprecated in version '1.7.0' and will be removed in version '2.0.0', please use the 'project_name' argument instead\n  super(Client, self).__init__(**kwargs)\n/usr/lib/python2.7/dist-packages/debtcollector/renames.py:43: DeprecationWarning: Using the 'tenant_id' argument is deprecated in version '1.7.0' and will be removed in version '2.0.0', please use the 'project_id' argument instead\n  return f(*args, **kwargs)\n/usr/lib/python2.7/dist-packages/keystoneclient/httpclient.py:376: DeprecationWarning: Constructing an HTTPClient instance without using a session is deprecated as of the 1.7.0 release and may be removed in the 2.0.0 release.\n  'the 2.0.0 release.', DeprecationWarning)\n+----------------------------------+-----------+----------------------------------------+----------------------------------------+----------------------------------------+----------------------------------+\n|                id                |   region  |               publicurl                |              internalurl               |                adminurl                |            service_id            |\n+----------------------------------+-----------+----------------------------------------+----------------------------------------+----------------------------------------+----------------------------------+\n| 2408bda10529429cb0e4fbbd729f6ba0 | regionOne | http://127.0.0.1:8774/v2/%(tenant_id)s | http://127.0.0.1:8774/v2/%(tenant_id)s | http://127.0.0.1:8774/v2/%(tenant_id)s | 2f113e6b7e9b4f398f6e3a63d5634e4a |\n| 77d739a39ec545f2ac29e27c826e7f73 | regionOne |         http://127.0.0.1:9696          |         http://127.0.0.1:9696          |         http://127.0.0.1:9696          | f1fae12bee9443e39d93425e1f05c404 |\n| b9048c6ae5f440aaad4e3a7d2b437902 | regionOne |         http://127.0.0.1:9292          |         http://127.0.0.1:9292          |         http://127.0.0.1:9292          | 387e6bd7f84245d78bf4199b7cba3c55 |\n| d304bd3119a44953bb624b53790a5044 | regionOne |       http://127.0.0.1:5000/v2.0       |       http://127.0.0.1:5000/v2.0       |      http://127.0.0.1:35357/v2.0       | 8088e6726503445fb13116fa6a65b6b7 |\n+----------------------------------+-----------+----------------------------------------+----------------------------------------+----------------------------------------+----------------------------------+\nroot@liberty-osc:~# glance image-list\n+--------------------------------------+--------------+\n| ID                                   | Name         |\n+--------------------------------------+--------------+\n| 22d44771-7c00-46f5-b8e2-a8d6c0c6c79f | qcow-cirros  |\n| 60e3fff2-bf18-40b5-ba50-36880de944b7 | qcow-cirros1 |\n+--------------------------------------+--------------+\nroot@liberty-osc:~# dpkg -l | grep glance*\nii  glance                              2:11.0.0-0ubuntu1~cloud0              all          OpenStack Image Registry and Delivery Service - Daemons\nii  glance-api                          2:11.0.0-0ubuntu1~cloud0              all          OpenStack Image Registry and Delivery Service - API\nii  glance-common                       2:11.0.0-0ubuntu1~cloud0              all          OpenStack Image Registry and Delivery Service - Common\nii  glance-registry                     2:11.0.0-0ubuntu1~cloud0              all          OpenStack Image Registry and Delivery Service - Registry\nii  python-glance                       2:11.0.0-0ubuntu1~cloud0              all          OpenStack Image Registry and Delivery Service - Python library\nii  python-glance-store                 0.9.1-1ubuntu1~cloud0                 all          OpenStack Image Service store library - Python 2.x\nii  python-glanceclient                 1:1.1.0-0ubuntu1~cloud0               all          Client library for Openstack glance server - Python 2.x\nroot@liberty-osc:~#", 
            "date_created": "2015-11-27 11:58:40.089858+00:00", 
            "author": "https://api.launchpad.net/1.0/~thalabathy-v"
        }, 
        {
            "content": "I am able to list glance image-list and all other glance operation.\nSome how interaction between nova and glance broken. \n", 
            "date_created": "2015-11-27 12:00:07.704687+00:00", 
            "author": "https://api.launchpad.net/1.0/~thalabathy-v"
        }, 
        {
            "content": "Alright. This is a password drift. Check in glance-api.conf and glance-registry.conf. Please check password in db for the same. Try to reset the glance password if not. This is duplicate bug since many users have reported in the past. Please refer to old bugs and follow the same.", 
            "date_created": "2015-12-01 10:19:01.939073+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }
    ]
}