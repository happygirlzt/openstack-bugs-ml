{
    "status": "Won't Fix", 
    "last_updated": "2016-02-10 15:44:30.337939+00:00", 
    "description": "The `nova network-create` is *silently* ignoring the --bridge when using the VlanManager. The bridge name is hardcoded to \"br%s\" % vlan. \n\nhttps://github.com/openstack/nova/blob/stable/juno/nova/network/manager.py#L1361\n\n[root@jhenner-vmware ~(keystone_admin)]# nova network-create novanetwork --fixed-range-v4 192.168.32.0/22 --bridge br101 --bridge-interface br101 --uuid 874ab2f1-c57d-464a-8a3f-5dda76ac7613 --vlan 102\n[root@jhenner-vmware ~(keystone_admin)]# nova network-show novanetwork\n+---------------------+--------------------------------------+\n| Property            | Value                                |\n+---------------------+--------------------------------------+\n| bridge              | br102                                |\n| bridge_interface    | br101                                |\n| broadcast           | 192.168.35.255                       |\n| cidr                | 192.168.32.0/22                      |\n| cidr_v6             | -                                    |\n| created_at          | 2015-03-10T20:25:41.000000           |\n| deleted             | False                                |\n| deleted_at          | -                                    |\n| dhcp_server         | 192.168.32.1                         |\n| dhcp_start          | 192.168.32.3                         |\n| dns1                | 8.8.4.4                              |\n| dns2                | -                                    |\n| enable_dhcp         | True                                 |\n| gateway             | 192.168.32.1                         |\n| gateway_v6          | -                                    |\n| host                | -                                    |\n| id                  | ca6b6f02-9f40-4578-89c6-9c8ca6d29bee |\n| injected            | False                                |\n| label               | novanetwork                          |\n| mtu                 | -                                    |\n| multi_host          | True                                 |\n| netmask             | 255.255.252.0                        |\n| netmask_v6          | -                                    |\n| priority            | -                                    |\n| project_id          | -                                    |\n| rxtx_base           | -                                    |\n| share_address       | False                                |\n| updated_at          | -                                    |\n| vlan                | 102                                  |\n| vpn_private_address | 192.168.32.2                         |\n| vpn_public_address  | -                                    |\n| vpn_public_port     | 1000                                 |\n+---------------------+--------------------------------------+\n\n\n\nIt would be good to have the bridge name configurable when using VlanManager because when the nova vcenter driver is used, nova is checking whether there is a \"port group\" in the vcenter of same name as bridge used in nova-network.", 
    "tags": [
        "network"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1430521", 
    "owner": "None", 
    "id": 1430521, 
    "index": 330, 
    "created": "2015-03-10 20:37:59.126595+00:00", 
    "title": "nova network-create is ignoring --bridge when using the VlanManager", 
    "comments": [
        {
            "content": "The `nova network-create` is *silently* ignoring the --bridge when using the VlanManager. The bridge name is hardcoded to \"br%s\" % vlan. \n\nhttps://github.com/openstack/nova/blob/stable/juno/nova/network/manager.py#L1361\n\n[root@jhenner-vmware ~(keystone_admin)]# nova network-create novanetwork --fixed-range-v4 192.168.32.0/22 --bridge br101 --bridge-interface br101 --uuid 874ab2f1-c57d-464a-8a3f-5dda76ac7613 --vlan 102\n[root@jhenner-vmware ~(keystone_admin)]# nova network-show novanetwork\n+---------------------+--------------------------------------+\n| Property            | Value                                |\n+---------------------+--------------------------------------+\n| bridge              | br102                                |\n| bridge_interface    | br101                                |\n| broadcast           | 192.168.35.255                       |\n| cidr                | 192.168.32.0/22                      |\n| cidr_v6             | -                                    |\n| created_at          | 2015-03-10T20:25:41.000000           |\n| deleted             | False                                |\n| deleted_at          | -                                    |\n| dhcp_server         | 192.168.32.1                         |\n| dhcp_start          | 192.168.32.3                         |\n| dns1                | 8.8.4.4                              |\n| dns2                | -                                    |\n| enable_dhcp         | True                                 |\n| gateway             | 192.168.32.1                         |\n| gateway_v6          | -                                    |\n| host                | -                                    |\n| id                  | ca6b6f02-9f40-4578-89c6-9c8ca6d29bee |\n| injected            | False                                |\n| label               | novanetwork                          |\n| mtu                 | -                                    |\n| multi_host          | True                                 |\n| netmask             | 255.255.252.0                        |\n| netmask_v6          | -                                    |\n| priority            | -                                    |\n| project_id          | -                                    |\n| rxtx_base           | -                                    |\n| share_address       | False                                |\n| updated_at          | -                                    |\n| vlan                | 102                                  |\n| vpn_private_address | 192.168.32.2                         |\n| vpn_public_address  | -                                    |\n| vpn_public_port     | 1000                                 |\n+---------------------+--------------------------------------+\n\n\n\nIt would be good to have the bridge name configurable when using VlanManager because when the nova vcenter driver is used, nova is checking whether there is a \"port group\" in the vcenter of same name as bridge used in nova-network.", 
            "date_created": "2015-03-10 20:37:59.126595+00:00", 
            "author": "https://api.launchpad.net/1.0/~jhenner"
        }, 
        {
            "content": "There are other bits of the nova-network code which assume bridge # maps to vlan #, so I'm not sure this is reasonably changable above the driver layer. I suspect a warning that vlan and bridge are incompatibile options in the client would be the near term fix.", 
            "date_created": "2015-03-30 11:52:24.332692+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I am not sure why this is a VMware bug. The VMware driver only creates the port group when the instance is spawned. Removing the vmware tag.", 
            "date_created": "2015-04-02 15:19:07.785274+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Cleanup\n=======\n\nThis bug report has the status \"Incomplete\" since more than 30 days\nand it looks like that there are no open reviews for it. To keep\nthe bug list sane, I close this bug with \"won't fix\". This does not\nmean that it is not a valid bug report, it's more to acknowledge that\nno progress can be expected here anymore. You are still free to push a\nnew patch for this bug. If you could reproduce it on the current master\ncode or on a maintained stable branch, please switch it to \"Confirmed\".", 
            "date_created": "2016-02-10 15:44:29.626749+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ]
}