{
    "status": "Fix Released", 
    "last_updated": "2013-02-20 02:21:17.001971+00:00", 
    "description": "Our tempest test fails while creating a snapshot of a server. The snapshot name passed is over 256 characters in length.\n\nExpected Error: 400 BadRequest\nActual Error : 500 ComputeFault\n\nBranch: stable/essex\n\nTest: \nReturn an error if snapshot name over 256 characters is passed ... FAIL\n\n======================================================================\nFAIL: Return an error if snapshot name over 256 characters is passed\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/opt/stack/tempest/tempest/tests/test_images.py\", line 222, in test_create_image_specify_name_over_256_chars\n    self.fail(\"Should return 400 BadRequest for this operation\")\nAssertionError: Should return 400 BadRequest for this operation\n-------------------- >> begin captured logging << --------------------\ntempest.config: INFO: Using tempest config file /opt/stack/tempest/etc/tempest.conf\ntempest.common.rest_client: ERROR: Request URL: http://10.2.3.164:8774/v2/e5eb2e14ed8a409d9b36db3fddb5a757/images/9ea13f87-88ff-420c-8822-4d7ee7352d51\ntempest.common.rest_client: ERROR: Request Body: None\ntempest.common.rest_client: ERROR: Response Headers: {'date': 'Fri, 25 May 2012 15:56:13 GMT', 'status': '404', 'content-length': '62', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-80b9136f-5e1f-437d-933f-fbf8335d4866'}\ntempest.common.rest_client: ERROR: Response Body: {\"itemNotFound\": {\"message\": \"Image not found.\", \"code\": 404}}\ntempest.common.rest_client: ERROR: Request URL: http://10.2.3.164:8774/v2/e5eb2e14ed8a409d9b36db3fddb5a757/servers/572153ec-505d-4803-b166-9f494a08360c/action\ntempest.common.rest_client: ERROR: Request Body: {\"createImage\": {\"name\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa73153641560\"}}\ntempest.common.rest_client: ERROR: Response Headers: {'date': 'Fri, 25 May 2012 15:56:24 GMT', 'status': '500', 'content-length': '128', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-c6bb53f7-121d-41cc-93b1-5e56ca2d9423'}\ntempest.common.rest_client: ERROR: Response Body: {u'computeFault': {u'message': u'The server has either erred or is incapable of performing the requested operation.', u'code': 500}}\n--------------------- >> end captured logging << ---------------------\n\n----------------------------------------------------------------------\nRan 1 test in 31.747s\n\nFAILED (failures=1)", 
    "tags": [
        "ntt", 
        "tempest"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1004564", 
    "owner": "None", 
    "id": 1004564, 
    "index": 5468, 
    "created": "2012-05-25 15:59:25.474838+00:00", 
    "title": "ComputeFault while creating a snapshot with a really long name (>256 characters)", 
    "comments": [
        {
            "content": "Our tempest test fails while creating a snapshot of a server. The snapshot name passed is over 256 characters in length.\n\nExpected Error: 400 BadRequest\nActual Error : 500 ComputeFault\n\nBranch: stable/essex\n\nTest: \nReturn an error if snapshot name over 256 characters is passed ... FAIL\n\n======================================================================\nFAIL: Return an error if snapshot name over 256 characters is passed\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/opt/stack/tempest/tempest/tests/test_images.py\", line 222, in test_create_image_specify_name_over_256_chars\n    self.fail(\"Should return 400 BadRequest for this operation\")\nAssertionError: Should return 400 BadRequest for this operation\n-------------------- >> begin captured logging << --------------------\ntempest.config: INFO: Using tempest config file /opt/stack/tempest/etc/tempest.conf\ntempest.common.rest_client: ERROR: Request URL: http://10.2.3.164:8774/v2/e5eb2e14ed8a409d9b36db3fddb5a757/images/9ea13f87-88ff-420c-8822-4d7ee7352d51\ntempest.common.rest_client: ERROR: Request Body: None\ntempest.common.rest_client: ERROR: Response Headers: {'date': 'Fri, 25 May 2012 15:56:13 GMT', 'status': '404', 'content-length': '62', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-80b9136f-5e1f-437d-933f-fbf8335d4866'}\ntempest.common.rest_client: ERROR: Response Body: {\"itemNotFound\": {\"message\": \"Image not found.\", \"code\": 404}}\ntempest.common.rest_client: ERROR: Request URL: http://10.2.3.164:8774/v2/e5eb2e14ed8a409d9b36db3fddb5a757/servers/572153ec-505d-4803-b166-9f494a08360c/action\ntempest.common.rest_client: ERROR: Request Body: {\"createImage\": {\"name\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa73153641560\"}}\ntempest.common.rest_client: ERROR: Response Headers: {'date': 'Fri, 25 May 2012 15:56:24 GMT', 'status': '500', 'content-length': '128', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-c6bb53f7-121d-41cc-93b1-5e56ca2d9423'}\ntempest.common.rest_client: ERROR: Response Body: {u'computeFault': {u'message': u'The server has either erred or is incapable of performing the requested operation.', u'code': 500}}\n--------------------- >> end captured logging << ---------------------\n\n----------------------------------------------------------------------\nRan 1 test in 31.747s\n\nFAILED (failures=1)", 
            "date_created": "2012-05-25 15:59:25.474838+00:00", 
            "author": "https://api.launchpad.net/1.0/~rohitk"
        }, 
        {
            "content": "Looks like this is already fixed\n\nREQ: curl -i http://192.168.1.136:8774/v2/e5df6fe673ed4becb58605fdd9e85fc8/servers/65d19429-6ba3-46af-aa3e-e2682f6b7360/action -X POST -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" -H \"X-Auth-Token: 6aea61cfb02e4c019a3d6fab392afc6b\" -d '{\"createImage\": {\"name\": \"65d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b7360\", \"metadata\": {}}}'\n\nsend: u'POST /v2/e5df6fe673ed4becb58605fdd9e85fc8/servers/65d19429-6ba3-46af-aa3e-e2682f6b7360/action HTTP/1.1\\r\\nHost: 192.168.1.136:8774\\r\\nContent-Length: 369\\r\\nx-auth-project-id: demo\\r\\naccept-encoding: gzip, deflate\\r\\naccept: application/json\\r\\nx-auth-token: 6aea61cfb02e4c019a3d6fab392afc6b\\r\\nuser-agent: python-novaclient\\r\\ncontent-type: application/json\\r\\n\\r\\n{\"createImage\": {\"name\": \"65d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b736065d19429-6ba3-46af-aa3e-e2682f6b7360\", \"metadata\": {}}}'\nreply: 'HTTP/1.1 400 Bad Request\\r\\n'\nheader: Content-Length: 141\nheader: Content-Type: application/json; charset=UTF-8\nheader: X-Compute-Request-Id: req-9f633a87-63f1-4cca-9dce-2f016658f09a\nheader: Date: Sat, 24 Nov 2012 00:48:12 GMT\nRESP:{'date': 'Sat, 24 Nov 2012 00:48:12 GMT', 'status': '400', 'content-length': '141', 'content-type': 'application/json; charset=UTF-8', 'x-compute-request-id': 'req-9f633a87-63f1-4cca-9dce-2f016658f09a'} {\"badRequest\": {\"message\": \"The server could not comply with the request since it is either malformed or otherwise incorrect.\", \"code\": 400}}\n\nDEBUG (shell:543) The server could not comply with the request since it is either malformed or otherwise incorrect. (HTTP 400) (Request-ID: req-9f633a87-63f1-4cca-9dce-2f016658f09a)\nTraceback (most recent call last):\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 540, in main\n    OpenStackComputeShell().main(sys.argv[1:])\n  File \"/opt/stack/python-novaclient/novaclient/shell.py\", line 476, in main\n    args.func(self.cs, args)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/shell.py\", line 914, in do_image_create\n    image_uuid = cs.servers.create_image(server, args.name)\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 613, in create_image\n    location = self._action('createImage', server, body)[0]['location']\n  File \"/opt/stack/python-novaclient/novaclient/v1_1/servers.py\", line 715, in _action\n    return self.api.client.post(url, body=body)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 244, in post\n    return self._cs_request(url, 'POST', **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 228, in _cs_request\n    **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 210, in _time_request\n    resp, body = self.request(url, method, **kwargs)\n  File \"/opt/stack/python-novaclient/novaclient/client.py\", line 204, in request\n    raise exceptions.from_response(resp, body)\nBadRequest: The server could not comply with the request since it is either malformed or otherwise incorrect. (HTTP 400) (Request-ID: req-9f633a87-63f1-4cca-9dce-2f016658f09a)\nERROR: The server could not comply with the request since it is either malformed or otherwise incorrect. (HTTP 400) (Request-ID: req-9f633a87-63f1-4cca-9dce-2f016658f09a)\n", 
            "date_created": "2012-11-24 00:50:02.304123+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }
    ]
}