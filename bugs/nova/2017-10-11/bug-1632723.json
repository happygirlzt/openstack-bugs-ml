{
    "status": "Fix Released", 
    "last_updated": "2016-12-07 10:45:42.133637+00:00", 
    "description": "Description\n===========\nI385c36e0af1a8a785c02e21ba4efa6046cde6366 introduced a new requirement of WebOb>=1.6.1 that has not been reflected in requirements.txt either globally or within Nova.\n\nSteps to reproduce\n==================\n# tox -e py27 nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type\n[..]\nSlowest Tests\nTest id                                                                                         Runtime (s)\n----------------------------------------------------------------------------------------------  -----------\nnova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type  0.130\n\n======\nTotals\n======\nRan: 1 tests in 15.0000 sec.\n - Passed: 1\n - Skipped: 0\n - Expected Fail: 0\n - Unexpected Success: 0\n - Failed: 0\nSum of execute time for each test: 0.1295 sec.\n\n==============\nWorker Balance\n==============\n - Worker 0 (1 tests) => 0:00:00.129534\n[..]\n# . .tox/py27/bin/activate\n(py27)# pip list | grep -i webob\nWebOb (1.6.1)\n(py27)# pip install WebOb==1.2.3\nCollecting WebOb==1.2.3\n  Downloading WebOb-1.2.3.tar.gz (191kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 194kB 319kB/s \nBuilding wheels for collected packages: WebOb\n  Running setup.py bdist_wheel for WebOb ... done\n  Stored in directory: /home/lyarwood/.cache/pip/wheels/41/d1/c9/fd5b1a17465c81580c3b5c8876a4611c8c677b81a94dad8f72\nSuccessfully built WebOb\nInstalling collected packages: WebOb\n  Found existing installation: WebOb 1.6.1\n    Uninstalling WebOb-1.6.1:\n      Successfully uninstalled WebOb-1.6.1\nSuccessfully installed WebOb-1.2.3\n(py27)# deactivate \n# tox -e py27 nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type\n[..]\n{0} nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type [0.133657s] ... FAILED\n\nCaptured traceback:\n~~~~~~~~~~~~~~~~~~~\n    Traceback (most recent call last):\n      File \"nova/tests/unit/api/openstack/placement/test_util.py\", line 229, in test_fail_no_content_type\n        self.handler, req)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 485, in assertRaises\n        self.assertThat(our_callable, matcher)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 496, in assertThat\n        mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 547, in _matchHelper\n        mismatch = matcher.match(matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n        mismatch = self.exception_matcher.match(exc_info)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n        mismatch = matcher.match(matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 475, in match\n        reraise(*matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n        result = matchee()\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 1049, in __call__\n        return self._callable_object(*self._args, **self._kwargs)\n      File \"nova/api/openstack/placement/util.py\", line 131, in decorated_function\n        json_formatter=json_error_formatter)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/webob/exc.py\", line 263, in __init__\n        **kw)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/webob/response.py\", line 155, in __init__\n        \"Unexpected keyword: %s=%r\" % (name, value))\n    TypeError: Unexpected keyword: json_formatter=<function json_error_formatter at 0x7fc28376c848>\n[..]\n\nExpected result\n===============\n\nActual result\n=============\n\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n\n# git rev-parse HEAD\n2669f1c73b7dee923c399729d95eee4d83c7ea56\n\n2. Which hypervisor did you use?\n   (For example: Libvirt + KVM, Libvirt + XEN, Hyper-V, PowerKVM, ...)\n   What's the version of that?\nN/A\n\n2. Which storage type did you use?\n   (For example: Ceph, LVM, GPFS, ...)\n   What's the version of that?\nN/A\n\n3. Which networking type did you use?\n   (For example: nova-network, Neutron with OpenVSwitch, ...)\nN/A\n\nLogs & Configs\n==============\nN/A", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1632723", 
    "owner": "https://api.launchpad.net/1.0/~mriedem", 
    "id": 1632723, 
    "index": 4645, 
    "created": "2016-10-12 14:01:04.978027+00:00", 
    "title": "New WebOb minimum version requirement of >=1.6.1", 
    "comments": [
        {
            "content": "Description\n===========\nI385c36e0af1a8a785c02e21ba4efa6046cde6366 introduced a new requirement of WebOb>=1.6.1 that has not been reflected in requirements.txt either globally or within Nova.\n\nSteps to reproduce\n==================\n# tox -e py27 nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type\n[..]\nSlowest Tests\nTest id                                                                                         Runtime (s)\n----------------------------------------------------------------------------------------------  -----------\nnova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type  0.130\n\n======\nTotals\n======\nRan: 1 tests in 15.0000 sec.\n - Passed: 1\n - Skipped: 0\n - Expected Fail: 0\n - Unexpected Success: 0\n - Failed: 0\nSum of execute time for each test: 0.1295 sec.\n\n==============\nWorker Balance\n==============\n - Worker 0 (1 tests) => 0:00:00.129534\n[..]\n# . .tox/py27/bin/activate\n(py27)# pip list | grep -i webob\nWebOb (1.6.1)\n(py27)# pip install WebOb==1.2.3\nCollecting WebOb==1.2.3\n  Downloading WebOb-1.2.3.tar.gz (191kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 194kB 319kB/s \nBuilding wheels for collected packages: WebOb\n  Running setup.py bdist_wheel for WebOb ... done\n  Stored in directory: /home/lyarwood/.cache/pip/wheels/41/d1/c9/fd5b1a17465c81580c3b5c8876a4611c8c677b81a94dad8f72\nSuccessfully built WebOb\nInstalling collected packages: WebOb\n  Found existing installation: WebOb 1.6.1\n    Uninstalling WebOb-1.6.1:\n      Successfully uninstalled WebOb-1.6.1\nSuccessfully installed WebOb-1.2.3\n(py27)# deactivate \n# tox -e py27 nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type\n[..]\n{0} nova.tests.unit.api.openstack.placement.test_util.TestRequireContent.test_fail_no_content_type [0.133657s] ... FAILED\n\nCaptured traceback:\n~~~~~~~~~~~~~~~~~~~\n    Traceback (most recent call last):\n      File \"nova/tests/unit/api/openstack/placement/test_util.py\", line 229, in test_fail_no_content_type\n        self.handler, req)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 485, in assertRaises\n        self.assertThat(our_callable, matcher)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 496, in assertThat\n        mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 547, in _matchHelper\n        mismatch = matcher.match(matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n        mismatch = self.exception_matcher.match(exc_info)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n        mismatch = matcher.match(matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 475, in match\n        reraise(*matchee)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n        result = matchee()\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/testtools/testcase.py\", line 1049, in __call__\n        return self._callable_object(*self._args, **self._kwargs)\n      File \"nova/api/openstack/placement/util.py\", line 131, in decorated_function\n        json_formatter=json_error_formatter)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/webob/exc.py\", line 263, in __init__\n        **kw)\n      File \"/home/lyarwood/redhat/devel/src/openstack/nova/.tox/py27/lib/python2.7/site-packages/webob/response.py\", line 155, in __init__\n        \"Unexpected keyword: %s=%r\" % (name, value))\n    TypeError: Unexpected keyword: json_formatter=<function json_error_formatter at 0x7fc28376c848>\n[..]\n\nExpected result\n===============\n\nActual result\n=============\n\n\nEnvironment\n===========\n1. Exact version of OpenStack you are running. See the following\n  list for all releases: http://docs.openstack.org/releases/\n\n# git rev-parse HEAD\n2669f1c73b7dee923c399729d95eee4d83c7ea56\n\n2. Which hypervisor did you use?\n   (For example: Libvirt + KVM, Libvirt + XEN, Hyper-V, PowerKVM, ...)\n   What's the version of that?\nN/A\n\n2. Which storage type did you use?\n   (For example: Ceph, LVM, GPFS, ...)\n   What's the version of that?\nN/A\n\n3. Which networking type did you use?\n   (For example: nova-network, Neutron with OpenVSwitch, ...)\nN/A\n\nLogs & Configs\n==============\nN/A", 
            "date_created": "2016-10-12 14:01:04.978027+00:00", 
            "author": "https://api.launchpad.net/1.0/~lyarwood"
        }, 
        {
            "content": "Yeah the change in newton that added this:\n\nhttps://review.openstack.org/#/c/352573/6/nova/api/openstack/placement/util.py@41\n\nAnd that json_formatter kwarg was in webob 1.6.0:\n\nhttps://github.com/Pylons/webob/commit/87c8749a57c1ff2442db2d74d9fb86935b7b201e", 
            "date_created": "2016-10-12 14:11:40.660766+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Apologies, I forgot to note that the corresponding change in WebOb 1.6.0 required by the changes made in I385c36e0af1a8a785c02e21ba4efa6046cde6366 is :\n\nhttps://github.com/Pylons/webob/commit/87c8749a57c1ff2442db2d74d9fb86935b7b201e", 
            "date_created": "2016-10-12 14:12:16.451639+00:00", 
            "author": "https://api.launchpad.net/1.0/~lyarwood"
        }, 
        {
            "content": "Here is the g-r bump for master: https://review.openstack.org/#/c/385495/\n\nTo fix newton, we'll need to either patch the newton code to handle webob<1.6.0, or just put out a release note saying the placement API requires webob>=1.6.0.", 
            "date_created": "2016-10-12 14:16:55.498024+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/385499", 
            "date_created": "2016-10-12 14:26:13.301385+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/385499\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=41adb9f0394cd3115e620def803d18a1719791c9\nSubmitter: Jenkins\nBranch:    master\n\ncommit 41adb9f0394cd3115e620def803d18a1719791c9\nAuthor: Matt Riedemann <email address hidden>\nDate:   Wed Oct 12 10:25:09 2016 -0400\n\n    Require WebOb>=1.6.0\n    \n    Nova change 4e923eb9a660593b8a7d2522992700182978a54c started\n    using the json_formatter kwarg which was introduced in WebOb\n    1.6.0:\n    \n    https://github.com/Pylons/webob/commit/87c8749a57c1ff2442db2d74d9fb86935b7b201e\n    \n    So we need to raise the minimum required version for nova to use.\n    \n    Change-Id: Ia778a11afb03b6d4b57dbd55a801a5a28b10541d\n    Depends-On: I2bbad0c059cc514ba0be1d42c061056a342caadc\n    Closes-Bug: #1632723\n", 
            "date_created": "2016-10-12 22:40:47.711222+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/newton\nReview: https://review.openstack.org/386000", 
            "date_created": "2016-10-13 13:58:35.153880+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/386000\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=92ca31b27d892e5aa9a6ffb990c7ea17b26fa991\nSubmitter: Jenkins\nBranch:    stable/newton\n\ncommit 92ca31b27d892e5aa9a6ffb990c7ea17b26fa991\nAuthor: Lee Yarwood <email address hidden>\nDate:   Thu Oct 13 14:52:58 2016 +0100\n\n    releasenote: WebOb<1.6.0 placement API known issue\n    \n    4e923eb9a660593b8a7d2522992700182978a54c introduced a new requirement\n    for WebOb>=1.6.0 that was not reflected in requirements.txt until after\n    the release of Newton.\n    \n    As a result we can only releasenote this as a known issue and direct\n    users to ensure they meet this requirement when using the optional\n    placement API.\n    \n    Change-Id: I8c1d8df513c109ebdbdad5deca070fbbe9ac1947\n    Closes-bug: #1632723\n", 
            "date_created": "2016-10-14 04:16:11.266665+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.2 release.", 
            "date_created": "2016-11-07 04:59:43.662167+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.2 release.", 
            "date_created": "2016-11-10 02:34:09.766676+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b1 development milestone.", 
            "date_created": "2016-11-17 13:12:35.313075+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.2 release.", 
            "date_created": "2016-12-07 10:45:41.512621+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}