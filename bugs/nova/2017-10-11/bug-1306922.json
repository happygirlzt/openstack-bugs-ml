{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:42:50.673043+00:00", 
    "description": "After unshelve an instance, found the attached port's binding info didn't get updated.\n\nos@cloudcontroller:~$ nova show vm2\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                     |\n| OS-EXT-AZ:availability_zone          | nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | xuhj-c1                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | xuhj-c1                                                  |\n| OS-EXT-SRV-ATTR:instance_name        | instance-0000000d                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2014-04-11T07:15:36.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         |                                                          |\n| created                              | 2014-04-11T06:51:04Z                                     |\n| flavor                               | m1.small (2)                                             |\n| hostId                               | 493891ff9d0ff1ab3dddfa99ec9aba8fc30bfb2ccbc34e91f9f5c5b8 |\n| id                                   | 6c952df5-8893-47c8-b19d-c3f393c7f688                     |\n| image                                | ubuntu-core (0237b107-a492-44ea-817e-d94589943c9c)       |\n| key_name                             | -                                                        |\n| metadata                             | {}                                                       |\n| name                                 | vm2                                                      |\n| net1 network                         | 12.0.0.7                                                 |\n| os-extended-volumes:volumes_attached | []                                                       |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | fac60a38271e4b3bbc4a7dc97aee4e90                         |\n| updated                              | 2014-04-11T07:15:36Z                                     |\n| user_id                              | d7f959000a764cccbc0e9c634eb82514                         |\n+--------------------------------------+----------------------------------------------------------+\n\n\nos@cloudcontroller:~$ neutron port-show c514acdd-4038-414f-be3a-d30f76b4cba6\n+-----------------------+---------------------------------------------------------------------------------+\n| Field                 | Value                                                                           |\n+-----------------------+---------------------------------------------------------------------------------+\n| admin_state_up        | True                                                                            |\n| allowed_address_pairs |                                                                                 |\n| binding:host_id       | xuhj-c2                                                                         |\n| binding:profile       | {}                                                                              |\n| binding:vif_details   | {\"port_filter\": true}                                                           |\n| binding:vif_type      | bridge                                                                          |\n| binding:vnic_type     | normal                                                                          |\n| device_id             | 6c952df5-8893-47c8-b19d-c3f393c7f688                                            |\n| device_owner          | compute:nova                                                                    |\n| extra_dhcp_opts       |                                                                                 |\n| fixed_ips             | {\"subnet_id\": \"b4bf03ac-5243-404d-bd16-705b4b61643e\", \"ip_address\": \"12.0.0.7\"} |\n| id                    | c514acdd-4038-414f-be3a-d30f76b4cba6                                            |\n| mac_address           | fa:16:3e:49:9b:1f                                                               |\n| name                  |                                                                                 |\n| network_id            | cea70fce-b954-40da-b325-b0bea5179ca0                                            |\n| security_groups       | 83dac46b-fa06-41e6-a028-35f9b7bf4046                                            |\n| status                | BUILD                                                                           |\n| tenant_id             | fac60a38271e4b3bbc4a7dc97aee4e90                                                |\n+-----------------------+---------------------------------------------------------------------------------+\n\n\n| OS-EXT-SRV-ATTR:host                 | xuhj-c1                                                  |\n-------------\n| binding:host_id       | xuhj-c2                                                                         |", 
    "tags": [
        "icehouse-backport-potential", 
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1306922", 
    "owner": "https://api.launchpad.net/1.0/~xuhj", 
    "id": 1306922, 
    "index": 4743, 
    "created": "2014-04-12 10:39:16.105397+00:00", 
    "title": "binding:host_id isn't updated after unshelve instance", 
    "comments": [
        {
            "content": "After unshelve an instance, found the attached port's binding info didn't get updated.\n\nos@cloudcontroller:~$ nova show vm2\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                     |\n| OS-EXT-AZ:availability_zone          | nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | xuhj-c1                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | xuhj-c1                                                  |\n| OS-EXT-SRV-ATTR:instance_name        | instance-0000000d                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2014-04-11T07:15:36.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         |                                                          |\n| created                              | 2014-04-11T06:51:04Z                                     |\n| flavor                               | m1.small (2)                                             |\n| hostId                               | 493891ff9d0ff1ab3dddfa99ec9aba8fc30bfb2ccbc34e91f9f5c5b8 |\n| id                                   | 6c952df5-8893-47c8-b19d-c3f393c7f688                     |\n| image                                | ubuntu-core (0237b107-a492-44ea-817e-d94589943c9c)       |\n| key_name                             | -                                                        |\n| metadata                             | {}                                                       |\n| name                                 | vm2                                                      |\n| net1 network                         | 12.0.0.7                                                 |\n| os-extended-volumes:volumes_attached | []                                                       |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | fac60a38271e4b3bbc4a7dc97aee4e90                         |\n| updated                              | 2014-04-11T07:15:36Z                                     |\n| user_id                              | d7f959000a764cccbc0e9c634eb82514                         |\n+--------------------------------------+----------------------------------------------------------+\n\n\nos@cloudcontroller:~$ neutron port-show c514acdd-4038-414f-be3a-d30f76b4cba6\n+-----------------------+---------------------------------------------------------------------------------+\n| Field                 | Value                                                                           |\n+-----------------------+---------------------------------------------------------------------------------+\n| admin_state_up        | True                                                                            |\n| allowed_address_pairs |                                                                                 |\n| binding:host_id       | xuhj-c2                                                                         |\n| binding:profile       | {}                                                                              |\n| binding:vif_details   | {\"port_filter\": true}                                                           |\n| binding:vif_type      | bridge                                                                          |\n| binding:vnic_type     | normal                                                                          |\n| device_id             | 6c952df5-8893-47c8-b19d-c3f393c7f688                                            |\n| device_owner          | compute:nova                                                                    |\n| extra_dhcp_opts       |                                                                                 |\n| fixed_ips             | {\"subnet_id\": \"b4bf03ac-5243-404d-bd16-705b4b61643e\", \"ip_address\": \"12.0.0.7\"} |\n| id                    | c514acdd-4038-414f-be3a-d30f76b4cba6                                            |\n| mac_address           | fa:16:3e:49:9b:1f                                                               |\n| name                  |                                                                                 |\n| network_id            | cea70fce-b954-40da-b325-b0bea5179ca0                                            |\n| security_groups       | 83dac46b-fa06-41e6-a028-35f9b7bf4046                                            |\n| status                | BUILD                                                                           |\n| tenant_id             | fac60a38271e4b3bbc4a7dc97aee4e90                                                |\n+-----------------------+---------------------------------------------------------------------------------+\n\n\n| OS-EXT-SRV-ATTR:host                 | xuhj-c1                                                  |\n-------------\n| binding:host_id       | xuhj-c2                                                                         |", 
            "date_created": "2014-04-12 10:39:16.105397+00:00", 
            "author": "https://api.launchpad.net/1.0/~xuhj"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/87080", 
            "date_created": "2014-04-12 11:38:15.856060+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/87080\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=4f8185549dfe11eb1ce405711593baa1528045ea\nSubmitter: Jenkins\nBranch:    master\n\ncommit 4f8185549dfe11eb1ce405711593baa1528045ea\nAuthor: He Jie Xu <email address hidden>\nDate:   Sat Apr 12 13:19:11 2014 +0800\n\n    Update port binding when unshelve instance\n    \n    When unshelve instance, it should update the attached port also.\n    This patch invoke network_api.migrate_instance_finish to update\n    the port's binding info.\n    \n    Change-Id: Iaa77163dde5494154d67ef392142669d70c3e643\n    Closes-Bug: #1306922\n", 
            "date_created": "2014-07-21 05:51:32.908480+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}