{
    "status": "Expired", 
    "last_updated": "2017-01-18 04:17:41.666133+00:00", 
    "description": "my nova.conf like this:\nnetwork_api_class=nova.network.neutronv2.api.API\nuse_neutron=True\n\nwhen I create a vm because nova-compute not found the glance image then a exceptin occure:\n2016-11-14 11:32:48.729 37828  Traceback (most recent call last):\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 358, in _cleanup_allocated_networks\n2016-11-14 11:32:48.729 37828      context, instance, requested_networks=requested_networks)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 49, in wrapped\n2016-11-14 11:32:48.729 37828      return func(self, context, *args, **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 299, in deallocate_for_instance\n2016-11-14 11:32:48.729 37828      requested_networks=requested_networks)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/rpcapi.py\", line 183, in deallocate_for_instance\n2016-11-14 11:32:48.729 37828      return cctxt.call(ctxt, 'deallocate_for_instance', **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 413, in call\n2016-11-14 11:32:48.729 37828      return self.prepare().call(ctxt, method, **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 158, in call\n2016-11-14 11:32:48.729 37828      retry=self.retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/transport.py\", line 91, in _send\n2016-11-14 11:32:48.729 37828      timeout=timeout, retry=retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 512, in send\n2016-11-14 11:32:48.729 37828      retry=retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 501, in _send\n2016-11-14 11:32:48.729 37828      result = self._waiter.wait(msg_id, timeout)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 379, in wait\n2016-11-14 11:32:48.729 37828      message = self.waiters.get(msg_id, timeout=timeout)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 277, in get\n2016-11-14 11:32:48.729 37828      'to message ID %s' % msg_id)\n2016-11-14 11:32:48.729 37828  MessagingTimeout: Timed out waiting for a reply to message ID e3b4c7fb434b48908ac4f0ef49fb77f1\n\nI use the neutron for netowrk but the error log show that nova-conductor use nova-network rpc api\nfor example the code:File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 299, in deallocate_for_instance \nin fact it should use /usr/lib/python2.7/site-packages/nova/network/neutronv2.api.py\n\nwhy? I guess maybe I create a error instance then the bug occure\nif I create a active instance the bug will not be occure", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1642579", 
    "owner": "None", 
    "id": 1642579, 
    "index": 6539, 
    "created": "2016-11-17 12:45:56.511804+00:00", 
    "title": "use neutron for nova-compute but compute use nova-network rpc api", 
    "comments": [
        {
            "content": "my nova.conf like this:\nnetwork_api_class=nova.network.neutronv2.api.API\nuse_neutron=True\n\nwhen I create a vm because nova-compute not found the glance image then a exceptin occure:\n2016-11-14 11:32:48.729 37828  Traceback (most recent call last):\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/conductor/manager.py\", line 358, in _cleanup_allocated_networks\n2016-11-14 11:32:48.729 37828      context, instance, requested_networks=requested_networks)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 49, in wrapped\n2016-11-14 11:32:48.729 37828      return func(self, context, *args, **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 299, in deallocate_for_instance\n2016-11-14 11:32:48.729 37828      requested_networks=requested_networks)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/nova/network/rpcapi.py\", line 183, in deallocate_for_instance\n2016-11-14 11:32:48.729 37828      return cctxt.call(ctxt, 'deallocate_for_instance', **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 413, in call\n2016-11-14 11:32:48.729 37828      return self.prepare().call(ctxt, method, **kwargs)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/client.py\", line 158, in call\n2016-11-14 11:32:48.729 37828      retry=self.retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/transport.py\", line 91, in _send\n2016-11-14 11:32:48.729 37828      timeout=timeout, retry=retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 512, in send\n2016-11-14 11:32:48.729 37828      retry=retry)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 501, in _send\n2016-11-14 11:32:48.729 37828      result = self._waiter.wait(msg_id, timeout)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 379, in wait\n2016-11-14 11:32:48.729 37828      message = self.waiters.get(msg_id, timeout=timeout)\n2016-11-14 11:32:48.729 37828    File \"/usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqpdriver.py\", line 277, in get\n2016-11-14 11:32:48.729 37828      'to message ID %s' % msg_id)\n2016-11-14 11:32:48.729 37828  MessagingTimeout: Timed out waiting for a reply to message ID e3b4c7fb434b48908ac4f0ef49fb77f1\n\nI use the neutron for netowrk but the error log show that nova-conductor use nova-network rpc api\nfor example the code:File \"/usr/lib/python2.7/site-packages/nova/network/api.py\", line 299, in deallocate_for_instance \nin fact it should use /usr/lib/python2.7/site-packages/nova/network/neutronv2.api.py\n\nwhy? I guess maybe I create a error instance then the bug occure\nif I create a active instance the bug will not be occure", 
            "date_created": "2016-11-17 12:45:56.511804+00:00", 
            "author": "https://api.launchpad.net/1.0/~wanglmopenstack"
        }, 
        {
            "content": "is it because you change the configuration and didn't restart service? \nwhich version are you using? master?", 
            "date_created": "2016-11-18 15:17:57.538451+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-01-18 04:17:37.921217+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ]
}