{
    "status": "Won't Fix", 
    "last_updated": "2012-05-11 17:41:57.947214+00:00", 
    "description": "When you delete a project/tenant from keystone (which you've had running instances in), the fixed network it was originally assigned are not released in VLANmanager.\n\nAs you can see below, only the three first networks belog to tenants that still exist. Number 4-7 belongs to deleted tenants.\n\nuser@controller:~# keystone tenant-list\n+----------------------------------+---------------+---------+\n|                id                |      name     | enabled |\n+----------------------------------+---------------+---------+\n| 2392fed7abbf4ebb88059a7307e8d944 | japan         | True    |\n| 2a118220740f4df2b5a0cfc7398dffb7 | openstackDemo | true    |\n| 55632a3aa17048a3a9cb3343aa72e9b1 | service       | true    |\n| 615f89019f6a44bba476ec372b3a5a4a | larserik      | True    |\n+----------------------------------+---------------+---------+\nuser@controller:~# nova-manage network list\nid   \tIPv4              \tIPv6           \tstart address  \tDNS1           \tDNS2           \tVlanID         \tproject        \tuuid\n2012-03-29 00:41:23 DEBUG nova.utils [req-b2c12fc3-0dcd-43a8-9d8a-cdd52c4f0d1a None None] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc'> from (pid=27284) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:658\n1    \t172.16.0.0/24     \tNone           \t172.16.0.3     \tNone           \tNone           \t100            \t2a118220740f4df2b5a0cfc7398dffb7\t970a55c9-caf9-4335-b8c7-efacbd501ae2\n2    \t172.16.1.0/24     \tNone           \t172.16.1.3     \tNone           \tNone           \t101            \t615f89019f6a44bba476ec372b3a5a4a\t3dcced0f-fb72-490b-bebd-47282e78fc71\n3    \t172.16.2.0/24     \tNone           \t172.16.2.3     \tNone           \tNone           \t102            \t2392fed7abbf4ebb88059a7307e8d944\t5fc87226-2a58-481d-b2d1-17cab552ec25\n4    \t172.16.3.0/24     \tNone           \t172.16.3.3     \tNone           \tNone           \t103            \ta5207bb49375493ab51231afa0d065d9\tb6d45f58-42e5-48a6-ab9b-b48c938862fc\n5    \t172.16.4.0/24     \tNone           \t172.16.4.3     \tNone           \tNone           \t104            \tda5fd1b301e742889e7c5a179044590b\tcf1c44cb-d447-44ee-9a97-70d2e0a7ddfa\n6    \t172.16.5.0/24     \tNone           \t172.16.5.3     \tNone           \tNone           \t105            \t1e60b2d283254d6f889acd4b2597dcb1\t2ac9ee0e-e3d0-4233-8b85-a1434ff36e65\n7    \t172.16.6.0/24     \tNone           \t172.16.6.3     \tNone           \tNone           \t106            \te948098f56534c9186ed460585768e2c\t8019132a-a46e-4542-bc96-3ae614d18838\n8    \t172.16.7.0/24     \tNone           \t172.16.7.3     \tNone           \tNone           \t107            \t35a717ff2232441aa2e118b14a25919f\t171147ab-252e-42ab-b333-569e4d833948\n9    \t172.16.8.0/24     \tNone           \t172.16.8.3     \tNone           \tNone           \t108            \tNone           \ted5b9738-f1c9-4bea-b2b3-328e7ffa0d00\n10   \t172.16.9.0/24     \tNone           \t172.16.9.3     \tNone           \tNone           \t109            \tNone           \tde8c809a-ceaf-4935-8f5d-6abcfd3c306e\n11   \t172.16.10.0/24    \tNone           \t172.16.10.3    \tNone           \tNone           \t110            \tNone           \t12d4e435-5975-4d68-8af7-df74fa72bbe6\n12   \t172.16.11.0/24    \tNone           \t172.16.11.3    \tNone           \tNone           \t111            \tNone           \tf1b900ef-fbdb-47a5-a8af-a68b10649089\n13   \t172.16.12.0/24    \tNone           \t172.16.12.3    \tNone           \tNone           \t112            \tNone           \t635bcdb6-e94e-4f66-81b7-656a8f50a094\n14   \t172.16.13.0/24    \tNone           \t172.16.13.3    \tNone           \tNone           \t113            \tNone           \tc164b6bb-eb55-4a2c-ad44-4e31921553fa\n15   \t172.16.14.0/24    \tNone           \t172.16.14.3    \tNone           \tNone           \t114            \tNone           \ta213fb2f-2946-4e56-bafc-79c801b6aa6b\n16   \t172.16.15.0/24    \tNone           \t172.16.15.3    \tNone           \tNone           \t115            \tNone           \t2db1c2b6-ec4d-43be-8f7c-2156594e6ed2", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/967840", 
    "owner": "None", 
    "id": 967840, 
    "index": 2730, 
    "created": "2012-03-28 22:43:11.060617+00:00", 
    "title": "Fixed networks are not released from deleted projects", 
    "comments": [
        {
            "content": "When you delete a project/tenant from keystone (which you've had running instances in), the fixed network it was originally assigned are not released in VLANmanager\n\n\nuser@controller:~# keystone tenant-list\n+----------------------------------+---------------+---------+\n|                id                |      name     | enabled |\n+----------------------------------+---------------+---------+\n| 2392fed7abbf4ebb88059a7307e8d944 | japan         | True    |\n| 2a118220740f4df2b5a0cfc7398dffb7 | openstackDemo | true    |\n| 55632a3aa17048a3a9cb3343aa72e9b1 | service       | true    |\n| 615f89019f6a44bba476ec372b3a5a4a | larserik      | True    |\n+----------------------------------+---------------+---------+\nuser@controller:~# nova-manage network list\nid   \tIPv4              \tIPv6           \tstart address  \tDNS1           \tDNS2           \tVlanID         \tproject        \tuuid           \n2012-03-29 00:41:23 DEBUG nova.utils [req-b2c12fc3-0dcd-43a8-9d8a-cdd52c4f0d1a None None] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.pyc'> from (pid=27284) __get_backend /usr/lib/python2.7/dist-packages/nova/utils.py:658\n1    \t172.16.0.0/24     \tNone           \t172.16.0.3     \tNone           \tNone           \t100            \t2a118220740f4df2b5a0cfc7398dffb7\t970a55c9-caf9-4335-b8c7-efacbd501ae2\n2    \t172.16.1.0/24     \tNone           \t172.16.1.3     \tNone           \tNone           \t101            \t615f89019f6a44bba476ec372b3a5a4a\t3dcced0f-fb72-490b-bebd-47282e78fc71\n3    \t172.16.2.0/24     \tNone           \t172.16.2.3     \tNone           \tNone           \t102            \t2392fed7abbf4ebb88059a7307e8d944\t5fc87226-2a58-481d-b2d1-17cab552ec25\n4    \t172.16.3.0/24     \tNone           \t172.16.3.3     \tNone           \tNone           \t103            \ta5207bb49375493ab51231afa0d065d9\tb6d45f58-42e5-48a6-ab9b-b48c938862fc\n5    \t172.16.4.0/24     \tNone           \t172.16.4.3     \tNone           \tNone           \t104            \tda5fd1b301e742889e7c5a179044590b\tcf1c44cb-d447-44ee-9a97-70d2e0a7ddfa\n6    \t172.16.5.0/24     \tNone           \t172.16.5.3     \tNone           \tNone           \t105            \t1e60b2d283254d6f889acd4b2597dcb1\t2ac9ee0e-e3d0-4233-8b85-a1434ff36e65\n7    \t172.16.6.0/24     \tNone           \t172.16.6.3     \tNone           \tNone           \t106            \te948098f56534c9186ed460585768e2c\t8019132a-a46e-4542-bc96-3ae614d18838\n8    \t172.16.7.0/24     \tNone           \t172.16.7.3     \tNone           \tNone           \t107            \t35a717ff2232441aa2e118b14a25919f\t171147ab-252e-42ab-b333-569e4d833948\n9    \t172.16.8.0/24     \tNone           \t172.16.8.3     \tNone           \tNone           \t108            \tNone           \ted5b9738-f1c9-4bea-b2b3-328e7ffa0d00\n10   \t172.16.9.0/24     \tNone           \t172.16.9.3     \tNone           \tNone           \t109            \tNone           \tde8c809a-ceaf-4935-8f5d-6abcfd3c306e\n11   \t172.16.10.0/24    \tNone           \t172.16.10.3    \tNone           \tNone           \t110            \tNone           \t12d4e435-5975-4d68-8af7-df74fa72bbe6\n12   \t172.16.11.0/24    \tNone           \t172.16.11.3    \tNone           \tNone           \t111            \tNone           \tf1b900ef-fbdb-47a5-a8af-a68b10649089\n13   \t172.16.12.0/24    \tNone           \t172.16.12.3    \tNone           \tNone           \t112            \tNone           \t635bcdb6-e94e-4f66-81b7-656a8f50a094\n14   \t172.16.13.0/24    \tNone           \t172.16.13.3    \tNone           \tNone           \t113            \tNone           \tc164b6bb-eb55-4a2c-ad44-4e31921553fa\n15   \t172.16.14.0/24    \tNone           \t172.16.14.3    \tNone           \tNone           \t114            \tNone           \ta213fb2f-2946-4e56-bafc-79c801b6aa6b\n16   \t172.16.15.0/24    \tNone           \t172.16.15.3    \tNone           \tNone           \t115            \tNone           \t2db1c2b6-ec4d-43be-8f7c-2156594e6ed2", 
            "date_created": "2012-03-28 22:43:11.060617+00:00", 
            "author": "https://api.launchpad.net/1.0/~pedersen-larserik"
        }, 
        {
            "content": "Same here. In addition, I cannot delete the network itself nor disassociate the project from the network using nova-manage.\n\ne.g:\n\nnova-manage network modify --fixed_range 10.1.2.0/24  --disassociate-project\n2012-05-10 17:48:43 CRITICAL nova [-] 'bool' object has no attribute 'decode'\n\nHowever, this occurred before I deleted the project (I did so due to not being able to remove the project reference from the network)\n\nA consequence is that a network cannot be deleted at all since it is a precondition that no projects be associated with it.", 
            "date_created": "2012-05-11 00:49:59.265321+00:00", 
            "author": "https://api.launchpad.net/1.0/~jkyle"
        }, 
        {
            "content": "I have same bug. Very annoying one", 
            "date_created": "2012-05-11 14:49:39.412424+00:00", 
            "author": "https://api.launchpad.net/1.0/~vkhomenko"
        }, 
        {
            "content": "There is no way for nova to know that a project has been deleted unless you tell it.\n\nThe issue with modify above is due to:\n\nhttps://bugs.launchpad.net/nova/+bug/952176\n\nwhich has been fixed in trunk and is being backported to stable/essex so it should show up in packages soon.\n\nFYI the right way to disassociate network (and security groups) is:\n\nnova-manage project scrub <project_id>\n\nnote that you must use the id from keystone, not the name.", 
            "date_created": "2012-05-11 17:41:05.440510+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ]
}