{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:19:07.752345+00:00", 
    "description": "Rebooting a VM in rescue state should not be allowed, as it gets the VM back to the active state (and VM could be unusable still). Reboot on rescued VM should be blocked the way it is done for other server operations like Snapshot on rescued VM / rebuild on a rescued VM\n\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova image-list\n+--------------------------------------+---------------------------------+--------+--------+\n| ID                                   | Name                            | Status | Server |\n+--------------------------------------+---------------------------------+--------+--------+\n| dba8c589-4864-4cb0-8531-1f95c66c815b | cirros-0.3.0-x86_64-uec         | ACTIVE |        |\n| 4806d1a4-aabd-43e8-a201-b82935cd896a | cirros-0.3.0-x86_64-uec-kernel  | ACTIVE |        |\n| 9b7c5642-b295-4f83-abdb-ef2be6c2b0d7 | cirros-0.3.0-x86_64-uec-ramdisk | ACTIVE |        |\n+--------------------------------------+---------------------------------+--------+--------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova boot --image=dba8c589-4864-4cb0-8531-1f95c66c815b --flavor=1 testrescue\n+------------------------+--------------------------------------+\n| Property               | Value                                |\n+------------------------+--------------------------------------+\n| status                 | BUILD                                |\n| updated                | 2013-02-15T12:12:09Z                 |\n| OS-EXT-STS:task_state  | scheduling                           |\n| key_name               | None                                 |\n| image                  | cirros-0.3.0-x86_64-uec              |\n| hostId                 |                                      |\n| OS-EXT-STS:vm_state    | building                             |\n| flavor                 | m1.tiny                              |\n| id                     | 760c3933-834d-4d9c-aab0-51b82bdfb1c9 |\n| security_groups        | [{u'name': u'default'}]              |\n| user_id                | af7d5d9476e74baa872fe3a469f2ddc1     |\n| name                   | testrescue                           |\n| adminPass              | gs9T2ZUMc4ZG                         |\n| tenant_id              | 70da7d12007e42e684926fec7a18635c     |\n| created                | 2013-02-15T12:12:09Z                 |\n| OS-DCF:diskConfig      | MANUAL                               |\n| accessIPv4             |                                      |\n| accessIPv6             |                                      |\n| progress               | 0                                    |\n| OS-EXT-STS:power_state | 0                                    |\n| metadata               | {}                                   |\n| config_drive           |                                      |\n+------------------------+--------------------------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | ACTIVE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\n(reverse-i-search)`act': source .venv/bin/^Ctivate\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova rescue 760c3933-834d-4d9c-aab0-51b82bdfb1c9\n+-----------+--------------+\n| Property  | Value        |\n+-----------+--------------+\n| adminPass | CdeNx7UTeb9A |\n+-----------+--------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | RESCUE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova reboot 760c3933-834d-4d9c-aab0-51b82bdfb1c9\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | ACTIVE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1126163", 
    "owner": "https://api.launchpad.net/1.0/~russellb", 
    "id": 1126163, 
    "index": 3228, 
    "created": "2013-02-15 12:20:35.304570+00:00", 
    "title": "Rebooting a VM in Rescue state takes the VM to Active state", 
    "comments": [
        {
            "content": "Rebooting a VM in rescue state should not be allowed, as it gets the VM back to the active state (and VM could be unusable still). Reboot on rescued VM should be blocked the way it is done for other server operations like Snapshot on rescued VM / rebuild on a rescued VM\n\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova image-list\n+--------------------------------------+---------------------------------+--------+--------+\n| ID                                   | Name                            | Status | Server |\n+--------------------------------------+---------------------------------+--------+--------+\n| dba8c589-4864-4cb0-8531-1f95c66c815b | cirros-0.3.0-x86_64-uec         | ACTIVE |        |\n| 4806d1a4-aabd-43e8-a201-b82935cd896a | cirros-0.3.0-x86_64-uec-kernel  | ACTIVE |        |\n| 9b7c5642-b295-4f83-abdb-ef2be6c2b0d7 | cirros-0.3.0-x86_64-uec-ramdisk | ACTIVE |        |\n+--------------------------------------+---------------------------------+--------+--------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova boot --image=dba8c589-4864-4cb0-8531-1f95c66c815b --flavor=1 testrescue\n+------------------------+--------------------------------------+\n| Property               | Value                                |\n+------------------------+--------------------------------------+\n| status                 | BUILD                                |\n| updated                | 2013-02-15T12:12:09Z                 |\n| OS-EXT-STS:task_state  | scheduling                           |\n| key_name               | None                                 |\n| image                  | cirros-0.3.0-x86_64-uec              |\n| hostId                 |                                      |\n| OS-EXT-STS:vm_state    | building                             |\n| flavor                 | m1.tiny                              |\n| id                     | 760c3933-834d-4d9c-aab0-51b82bdfb1c9 |\n| security_groups        | [{u'name': u'default'}]              |\n| user_id                | af7d5d9476e74baa872fe3a469f2ddc1     |\n| name                   | testrescue                           |\n| adminPass              | gs9T2ZUMc4ZG                         |\n| tenant_id              | 70da7d12007e42e684926fec7a18635c     |\n| created                | 2013-02-15T12:12:09Z                 |\n| OS-DCF:diskConfig      | MANUAL                               |\n| accessIPv4             |                                      |\n| accessIPv6             |                                      |\n| progress               | 0                                    |\n| OS-EXT-STS:power_state | 0                                    |\n| metadata               | {}                                   |\n| config_drive           |                                      |\n+------------------------+--------------------------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | ACTIVE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\n(reverse-i-search)`act': source .venv/bin/^Ctivate\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova rescue 760c3933-834d-4d9c-aab0-51b82bdfb1c9\n+-----------+--------------+\n| Property  | Value        |\n+-----------+--------------+\n| adminPass | CdeNx7UTeb9A |\n+-----------+--------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | RESCUE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova reboot 760c3933-834d-4d9c-aab0-51b82bdfb1c9\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$ nova list\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | REBOOT | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$\n+--------------------------------------+------------+--------+------------------+\n| ID                                   | Name       | Status | Networks         |\n+--------------------------------------+------------+--------+------------------+\n| 760c3933-834d-4d9c-aab0-51b82bdfb1c9 | testrescue | ACTIVE | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------------+\nstack@server-1359571136-az-1-region-a-geo-1:~/latest_tempest/tempest$", 
            "date_created": "2013-02-15 12:20:35.304570+00:00", 
            "author": "https://api.launchpad.net/1.0/~nithya-ganesan"
        }, 
        {
            "content": "agreed we should disable this.", 
            "date_created": "2013-02-26 23:14:02.513765+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "I would humbly suggest to increase the priority of this, an instance in a rescued state that then goes ACTIVE is extremely difficult to fix (impossible without access to the hypervisor, afaict).\n\nthe libvirt XML configuration will never be updated to remove the .rescue files, and so the libvirt configuration needs to be edited to manually fix the disk configuration.", 
            "date_created": "2013-03-04 22:42:39.375664+00:00", 
            "author": "https://api.launchpad.net/1.0/~78luphr0rnk2nuqimstywepozxn9kl19tqh0tx66b5dki1xxsh5mkz9gl21a5rlwfnr8jn6ln0m3jxne2k9x1ohg85w3jabxlrqbgszpjpwcmvk-launchpad"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/23482", 
            "date_created": "2013-03-04 23:15:49.450242+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/23482\nCommitted: http://github.com/openstack/nova/commit/68a5519e2ed52e1d55f304d198b2967c084610d8\nSubmitter: Jenkins\nBranch:    master\n\ncommit 68a5519e2ed52e1d55f304d198b2967c084610d8\nAuthor: Russell Bryant <email address hidden>\nDate:   Mon Mar 4 18:00:42 2013 -0500\n\n    Prevent reboot of rescued instance.\n    \n    Do not allow rebooting an instance in the RESCUED state.  This will\n    revert the instance back into an ACTIVE state, which may still be\n    broken.  Require an explicit unrescue, instead.\n    \n    Fix bug 1126163.\n    \n    Change-Id: I144163666767923e3beb0a82e687066d1f3a0441\n", 
            "date_created": "2013-03-05 04:09:42.049478+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}