{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:41:47.012528+00:00", 
    "description": "Repro Steps:\n\n 1. set in nova.conf use_cow_images=false\n 2. set in nova.conf force_raw_images=false\n 3. upload a qcow2 image to glance\n 4. boot an instance from the image\n\nResults:\n \n Instance does not boot correctly\n\nExpected:\n\n Instance boots", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1163009", 
    "owner": "https://api.launchpad.net/1.0/~vishvananda", 
    "id": 1163009, 
    "index": 3332, 
    "created": "2013-04-01 21:09:39.333399+00:00", 
    "title": "libvirt: use_cow_images=false and force_raw_images=false broken", 
    "comments": [
        {
            "content": "Repro Steps:\n\n 1. set in nova.conf use_cow_images=false\n 2. set in nova.conf force_raw_images=false\n 3. upload a qcow2 image to glance\n 4. boot an instance from the image\n\nResults:\n \n Instance does not boot correctly\n\nExpected:\n\n Instance boots", 
            "date_created": "2013-04-01 21:09:39.333399+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "The xml generated by libvirt uses raw for the device type:\n\n    <disk type=\"file\" device=\"disk\">\n      <driver name=\"qemu\" type=\"raw\" cache=\"none\"/>\n      <source file=\"/mnt/instances/instance-00000001/disk\"/>\n      <target bus=\"virtio\" dev=\"vda\"/>\n    </disk>\n\n\nThe type should be different depending on the type of the image that is downloaded from glance.", 
            "date_created": "2013-04-01 21:13:14.738549+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/25845", 
            "date_created": "2013-04-01 21:21:38.521403+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/25845\nCommitted: http://github.com/openstack/nova/commit/494a3cb5749d52aa90daeacd980362df5f971c0d\nSubmitter: Jenkins\nBranch:    master\n\ncommit 494a3cb5749d52aa90daeacd980362df5f971c0d\nAuthor: Vishvananda Ishaya <email address hidden>\nDate:   Mon Apr 1 14:19:49 2013 -0700\n\n    libvirt: Get driver type from base image type.\n    \n    If we are using the raw backend (no cow), we should set the driver\n    type based on the type of the source image instead of always\n    using raw.\n    \n    Calls to to_xml were moved after _create_image so that the image\n    type could be determined when creating the xml for libvirt.\n    \n    Fixes bug 1163009\n    \n    Change-Id: Ic8d5f0ab83d868a42f834d39c0afb64818d7e027\n", 
            "date_created": "2013-04-09 15:20:07.101258+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/26617", 
            "date_created": "2013-04-10 13:39:06.168604+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/26617\nCommitted: http://github.com/openstack/nova/commit/44d42e20657ddb9f25cec62f7c3ddebba6d9cd7a\nSubmitter: Jenkins\nBranch:    stable/grizzly\n\ncommit 44d42e20657ddb9f25cec62f7c3ddebba6d9cd7a\nAuthor: Vishvananda Ishaya <email address hidden>\nDate:   Mon Apr 1 14:19:49 2013 -0700\n\n    libvirt: Get driver type from base image type.\n    \n    If we are using the raw backend (no cow), we should set the driver\n    type based on the type of the source image instead of always\n    using raw.\n    \n    Calls to to_xml were moved after _create_image so that the image\n    type could be determined when creating the xml for libvirt.\n    \n    Fixes bug 1163009\n    \n    Change-Id: Ic8d5f0ab83d868a42f834d39c0afb64818d7e027\n    (cherry picked from commit 494a3cb5749d52aa90daeacd980362df5f971c0d)\n", 
            "date_created": "2013-04-12 22:47:10.451655+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}