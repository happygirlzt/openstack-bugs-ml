{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 10:09:33.047539+00:00", 
    "description": "Steps to reproduce:\n\n> nova flavor-create anotherflavor 45 256 2 1 --ephemeral 33\n\nExpected:\n\nSuccessful creation\n\nActual:\n\nThe flavor is created, but a 400 is returned.  nova-api shows this:\n\n\n(nova.api.openstack.wsgi): TRACE: Traceback (most recent call last):\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 767, in post_process_extensions\n(nova.api.openstack.wsgi): TRACE:     **action_args)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/flavorextradata.py\", line 88, in create\n(nova.api.openstack.wsgi): TRACE:     get_instance_type_by_flavor_id(id)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/compute/instance_types.py\", line 136, in get_instance_type_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     return db.instance_type_get_by_flavor_id(ctxt, flavorid)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/api.py\", line 1445, in instance_type_get_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     return IMPL.instance_type_get_by_flavor_id(context, id)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 119, in wrapper\n(nova.api.openstack.wsgi): TRACE:     return f(*args, **kwargs)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 3481, in instance_type_get_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     filter_by(flavorid=flavor_id).\\\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1652, in first\n(nova.api.openstack.wsgi): TRACE:     ret = list(self[0:1])\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1560, in __getitem__\n(nova.api.openstack.wsgi): TRACE:     return list(res)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1721, in __iter__\n(nova.api.openstack.wsgi): TRACE:     return self._execute_and_instances(context)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1726, in _execute_and_instances\n(nova.api.openstack.wsgi): TRACE:     mapper=self._mapper_zero_or_none())\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 724, in execute\n(nova.api.openstack.wsgi): TRACE:     clause, params or {})\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1191, in execute\n(nova.api.openstack.wsgi): TRACE:     params)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1269, in _execute_clauseelement\n(nova.api.openstack.wsgi): TRACE:     parameters=params\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1377, in __create_execution_context\n(nova.api.openstack.wsgi): TRACE:     connection=self, **kwargs)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 388, in __init__\n(nova.api.openstack.wsgi): TRACE:     grp,m in enumerate(parameters)]\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/compiler.py\", line 291, in construct_params\n(nova.api.openstack.wsgi): TRACE:     pd[self.bind_names[bindparam]] = bindparam.value()\n(nova.api.openstack.wsgi): TRACE: TypeError: id() takes exactly one argument (0 given)", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/938212", 
    "owner": "https://api.launchpad.net/1.0/~sleepsonthefloor", 
    "id": 938212, 
    "index": 585, 
    "created": "2012-02-21 21:57:46.566800+00:00", 
    "title": "flavors create yields 400 due to id() typo", 
    "comments": [
        {
            "content": "Steps to reproduce:\n\n> nova flavor-create anotherflavor 45 256 2 1 --ephemeral 33\n\nExpected:\n\nSuccessful creation\n\nActual:\n\nThe flavor is created, but a 400 is returned.  nova-api shows this:\n\n\n(nova.api.openstack.wsgi): TRACE: Traceback (most recent call last):\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 767, in post_process_extensions\n(nova.api.openstack.wsgi): TRACE:     **action_args)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/flavorextradata.py\", line 88, in create\n(nova.api.openstack.wsgi): TRACE:     get_instance_type_by_flavor_id(id)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/compute/instance_types.py\", line 136, in get_instance_type_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     return db.instance_type_get_by_flavor_id(ctxt, flavorid)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/api.py\", line 1445, in instance_type_get_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     return IMPL.instance_type_get_by_flavor_id(context, id)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 119, in wrapper\n(nova.api.openstack.wsgi): TRACE:     return f(*args, **kwargs)\n(nova.api.openstack.wsgi): TRACE:   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 3481, in instance_type_get_by_flavor_id\n(nova.api.openstack.wsgi): TRACE:     filter_by(flavorid=flavor_id).\\\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1652, in first\n(nova.api.openstack.wsgi): TRACE:     ret = list(self[0:1])\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1560, in __getitem__\n(nova.api.openstack.wsgi): TRACE:     return list(res)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1721, in __iter__\n(nova.api.openstack.wsgi): TRACE:     return self._execute_and_instances(context)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/query.py\", line 1726, in _execute_and_instances\n(nova.api.openstack.wsgi): TRACE:     mapper=self._mapper_zero_or_none())\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 724, in execute\n(nova.api.openstack.wsgi): TRACE:     clause, params or {})\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1191, in execute\n(nova.api.openstack.wsgi): TRACE:     params)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1269, in _execute_clauseelement\n(nova.api.openstack.wsgi): TRACE:     parameters=params\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1377, in __create_execution_context\n(nova.api.openstack.wsgi): TRACE:     connection=self, **kwargs)\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 388, in __init__\n(nova.api.openstack.wsgi): TRACE:     grp,m in enumerate(parameters)]\n(nova.api.openstack.wsgi): TRACE:   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/compiler.py\", line 291, in construct_params\n(nova.api.openstack.wsgi): TRACE:     pd[self.bind_names[bindparam]] = bindparam.value()\n(nova.api.openstack.wsgi): TRACE: TypeError: id() takes exactly one argument (0 given)", 
            "date_created": "2012-02-21 21:57:46.566800+00:00", 
            "author": "https://api.launchpad.net/1.0/~sleepsonthefloor"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/4370", 
            "date_created": "2012-02-21 22:31:10.771336+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/4370\nCommitted: http://github.com/openstack/nova/commit/1fe09926c8c1523d83aa834d2b143d266fde14ad\nSubmitter: Jenkins\nBranch:    master\n\ncommit 1fe09926c8c1523d83aa834d2b143d266fde14ad\nAuthor: Anthony Young <email address hidden>\nDate:   Tue Feb 21 13:59:29 2012 -0800\n\n    Fix error that causes 400 in flavor create.\n    \n     * Fixes bug 938212\n     * Fix style per bcwaldon's comment\n    \n    Change-Id: I5c4a024c29634f1b786a36ca93050b9f2de41dea\n", 
            "date_created": "2012-02-22 03:02:36.598703+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}