{
    "status": "Invalid", 
    "last_updated": "2011-06-27 13:17:11.891337+00:00", 
    "description": "  * i can't start a live migration because of the following error\n  * the problem is, that there is no object //host/cpu/model in the output of virsh capabilities on a xen system\n\n{{{\n2011-04-21 00:12:33,357 INFO nova.virt.libvirt_conn [-] Instance launched has CPU info:\n{\"arch\": \"x86_64\", \"features\": [], \"topology\": {}}\n2011-04-21 00:12:33,367 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 793, in compare_cpu\n(nova.exception): TRACE:     return self.driver.compare_cpu(cpu_info)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 1434, in compare_cpu\n(nova.exception): TRACE:     xml = str(Template(self.cpuinfo_xml, searchList=dic))\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/Cheetah/Template.py\", line 1005, in __str__\n(nova.exception): TRACE:     rc = getattr(self, mainMethName)()\n(nova.exception): TRACE:   File \"cheetah_DynamicallyCompiledCheetahTemplate_1303337553_36_93785.py\", line 91, in respond\n(nova.exception): TRACE: NotFound: cannot find 'model'\n(nova.exception): TRACE:\n2011-04-21 00:12:33,376 ERROR nova [-] Exception during message handling\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/rpc.py\", line 188, in _receive\n(nova): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\n(nova): TRACE:     raise Error(str(e))\n(nova): TRACE: Error: cannot find 'model'\n(nova): TRACE:\n2011-04-21 00:12:33,381 ERROR nova.rpc [-] Returning exception cannot find 'model' to caller\n2011-04-21 00:12:33,381 ERROR nova.rpc [-] ['Traceback (most recent call last):\\n', '  File \"/usr/lib64/python2.6/site-packages/nova/rpc.py\", line 188, in _receive\\n    rval = node_func(context=ctxt, **node_args)\\n', '  File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\\n    raise Error(str(e))\\n', \"Error: cannot find 'model'\\n\"]\n}}}\n\n  * example output xen:\n\n{{{\n  <host>\n    <cpu>\n      <arch>x86_64</arch>\n      <features>\n        <pae/>\n      </features>\n    </cpu>\n    <migration_features>\n      <live/>\n      <uri_transports>\n        <uri_transport>xenmigr</uri_transport>\n      </uri_transports>\n    </migration_features>\n    <topology>\n      <cells num='2'>\n        <cell id='0'>\n          <cpus num='2'>\n            <cpu id='0'/>\n            <cpu id='2'/>\n          </cpus>\n        </cell>\n        <cell id='1'>\n          <cpus num='2'>\n            <cpu id='1'/>\n            <cpu id='3'/>\n          </cpus>\n        </cell>\n      </cells>\n    </topology>\n  </host>\n}}}", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/767798", 
    "owner": "None", 
    "id": 767798, 
    "index": 2129, 
    "created": "2011-04-20 22:21:29.202213+00:00", 
    "title": "model used in method get_cpu_info() in nova/virt/libvirt_conn.py is not available in capabilities on a xen system", 
    "comments": [
        {
            "content": "  * i can't start a live migration because of the following error\n  * the problem is, that there is no object //host/cpu/model in the output of virsh capabilities on a xen system\n\n{{{\n2011-04-21 00:12:33,357 INFO nova.virt.libvirt_conn [-] Instance launched has CPU info:\n{\"arch\": \"x86_64\", \"features\": [], \"topology\": {}}\n2011-04-21 00:12:33,367 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 120, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 793, in compare_cpu\n(nova.exception): TRACE:     return self.driver.compare_cpu(cpu_info)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 1434, in compare_cpu\n(nova.exception): TRACE:     xml = str(Template(self.cpuinfo_xml, searchList=dic))\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/Cheetah/Template.py\", line 1005, in __str__\n(nova.exception): TRACE:     rc = getattr(self, mainMethName)()\n(nova.exception): TRACE:   File \"cheetah_DynamicallyCompiledCheetahTemplate_1303337553_36_93785.py\", line 91, in respond\n(nova.exception): TRACE: NotFound: cannot find 'model'\n(nova.exception): TRACE:\n2011-04-21 00:12:33,376 ERROR nova [-] Exception during message handling\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/rpc.py\", line 188, in _receive\n(nova): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\n(nova): TRACE:     raise Error(str(e))\n(nova): TRACE: Error: cannot find 'model'\n(nova): TRACE:\n2011-04-21 00:12:33,381 ERROR nova.rpc [-] Returning exception cannot find 'model' to caller\n2011-04-21 00:12:33,381 ERROR nova.rpc [-] ['Traceback (most recent call last):\\n', '  File \"/usr/lib64/python2.6/site-packages/nova/rpc.py\", line 188, in _receive\\n    rval = node_func(context=ctxt, **node_args)\\n', '  File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 126, in _wrap\\n    raise Error(str(e))\\n', \"Error: cannot find 'model'\\n\"]\n}}}\n\n  * example output xen:\n\n{{{\n  <host>\n    <cpu>\n      <arch>x86_64</arch>\n      <features>\n        <pae/>\n      </features>\n    </cpu>\n    <migration_features>\n      <live/>\n      <uri_transports>\n        <uri_transport>xenmigr</uri_transport>\n      </uri_transports>\n    </migration_features>\n    <topology>\n      <cells num='2'>\n        <cell id='0'>\n          <cpus num='2'>\n            <cpu id='0'/>\n            <cpu id='2'/>\n          </cpus>\n        </cell>\n        <cell id='1'>\n          <cpus num='2'>\n            <cpu id='1'/>\n            <cpu id='3'/>\n          </cpus>\n        </cell>\n      </cells>\n    </topology>\n  </host>\n}}}", 
            "date_created": "2011-04-20 22:21:29.202213+00:00", 
            "author": "https://api.launchpad.net/1.0/~berendt"
        }, 
        {
            "content": "Looks like the live migration feature is not supported for libvirt/Xen.", 
            "date_created": "2011-05-24 20:29:33.840558+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Closing as unsupported, per the above comment.", 
            "date_created": "2011-06-27 13:17:10.076889+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}