{
    "status": "Invalid", 
    "last_updated": "2015-10-19 17:08:03.881826+00:00", 
    "description": "I am running:\n\nUbuntu 14.04\n\nContrail 2.20\nroot@cmpt02:~# dpkg -l | grep contrail\nii  contrail-lib                         2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail libraries\nii  contrail-nodemgr                     2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail nodemgr implementation\nii  contrail-nova-driver                 2.20+0~1443532552.81~1.c0c6c68        amd64        OpenStack Nova compute-node driver for OpenContrail\nii  contrail-utils                       2.20+0~1441967460.80~1.bb1145b        amd64        OpenContrail tools and utilities\nii  contrail-vrouter-agent               2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter agent\nii  contrail-vrouter-dkms                2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail VRouter - DKMS version\nii  contrail-vrouter-utils               2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail VRouter - Utilities\nii  python-backports.ssl-match-hostname  3.4.0.2-1contrail1                    all          The ssl.match_hostname() function from Python 3.4\nii  python-bitarray                      0.8.0-2contrail1                      amd64        Python module for efficient boolean array handling\nii  python-contrail                      2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail python-libs\nii  python-contrail-vrouter-api          2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter agent api\nii  python-geventhttpclient              1.1.0-1contrail1                      amd64        http client library for gevent\nii  python-opencontrail-vrouter-netns    2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter network namespace package\n\n\nOpenStack Kilo packages\nroot@cmpt02:~# dpkg -l | grep nova\nii  contrail-nova-driver                 2.20+0~1443532552.81~1.c0c6c68        amd64        OpenStack Nova compute-node driver for OpenContrail\nii  nova-common                            1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - common files\nii  nova-compute                            1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node base\nii  nova-compute-kvm                   1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node (KVM)\nii  nova-compute-libvirt               1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node libvirt support\nii  python-nova                               1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute Python libraries\nii  python-novaclient                    1:2.22.0-0ubuntu1~cloud0              all          client library for OpenStack Compute API\n\n\nNova will not boot an instance; debug log snippet from /var/log/nova/nova-compute.log:\n\nERROR nova.compute.manager [-] Instance failed network setup after 1 attempt(s)\nTRACE nova.compute.manager Traceback (most recent call last):\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1782, in _allocate_network_async\nTRACE nova.compute.manager     dhcp_options=dhcp_options)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 406, in allocate_for_instance\nTRACE nova.compute.manager     neutron = get_client(context)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 221, in get_client\nTRACE nova.compute.manager     region_name=CONF.neutron.region_name)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 1200, in __init__\nTRACE nova.compute.manager     self.httpclient = client.construct_http_client(**kwargs)\nTRACE nova.compute.manager TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\n\n\n2015-10-12 18:40:06.334 27007 ERROR nova.compute.manager [req-58ce7b2e-bc73-40ee-a368-cfbeaed434ca 42329176f69a4cc1b7d5e6ae805080cd 7812bd244b7f4a8eba3a5cb1213210a5 - - -] [instance: 0713d74f-fe59-4992-894c-\ne3378fb1752d] Instance failed to spawn\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager Traceback (most recent call last):\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2461, in _build_resources\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     yield resources\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2333, in _build_and_run_insta\nnce                                                      \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     block_device_info=block_device_info)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2382, in spawn\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     write_to_disk=True)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4169, in _get_guest_xml\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     network_info_str = str(network_info)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 480, in __str__\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     return self._sync_wrapper(fn, *args, **kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 463, in _sync_wrapper\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 495, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self[:] = self._gt.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 175, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     return self._exit_event.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 125, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     current.throw(*self._exc)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 214, in main\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     result = function(*args, **kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1782, in _allocate_network_as\nync                                                      \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     dhcp_options=dhcp_options)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 406, in allocate_for_in\nstance                                                   \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     neutron = get_client(context)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 221, in get_client\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     region_name=CONF.neutron.region_name)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 1200, in __init__\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self.httpclient = client.construct_http_client(**kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager \n2015-10-12 18:40:06.336 27007 INFO nova.compute.manager [req-58ce7b2e-bc73-40ee-a368-cfbeaed434ca 42329176f69a4cc1b7d5e6ae805080cd 7812bd244b7f4a8eba3a5cb1213210a5 - - -] [instance: 0713d74f-fe59-4992-894c-e\n3378fb1752d] Terminating instance\n\n\n\nThere is nothing that appears to be wrong in /var/log/neutron-server.conf or in contrail's logfiles. \n\nHas anyone come across the log \"TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\" before?", 
    "tags": [
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1505313", 
    "owner": "None", 
    "id": 1505313, 
    "index": 5802, 
    "created": "2015-10-12 17:12:34.300635+00:00", 
    "title": "nova kilo and contrail 2.2, instances fail to boot throwing an endpoint_override error", 
    "comments": [
        {
            "content": "I am running:\n\nUbuntu 14.04\n\nContrail 2.20\nroot@cmpt02:~# dpkg -l | grep contrail\nii  contrail-lib                         2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail libraries\nii  contrail-nodemgr                     2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail nodemgr implementation\nii  contrail-nova-driver                 2.20+0~1443532552.81~1.c0c6c68        amd64        OpenStack Nova compute-node driver for OpenContrail\nii  contrail-utils                       2.20+0~1441967460.80~1.bb1145b        amd64        OpenContrail tools and utilities\nii  contrail-vrouter-agent               2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter agent\nii  contrail-vrouter-dkms                2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail VRouter - DKMS version\nii  contrail-vrouter-utils               2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail VRouter - Utilities\nii  python-backports.ssl-match-hostname  3.4.0.2-1contrail1                    all          The ssl.match_hostname() function from Python 3.4\nii  python-bitarray                      0.8.0-2contrail1                      amd64        Python module for efficient boolean array handling\nii  python-contrail                      2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail python-libs\nii  python-contrail-vrouter-api          2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter agent api\nii  python-geventhttpclient              1.1.0-1contrail1                      amd64        http client library for gevent\nii  python-opencontrail-vrouter-netns    2.20+0~1443532552.81~1.c0c6c68        amd64        OpenContrail vrouter network namespace package\n\n\nOpenStack Kilo packages\nroot@cmpt02:~# dpkg -l | grep nova\nii  contrail-nova-driver                 2.20+0~1443532552.81~1.c0c6c68        amd64        OpenStack Nova compute-node driver for OpenContrail\nii  nova-common                            1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - common files\nii  nova-compute                            1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node base\nii  nova-compute-kvm                   1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node (KVM)\nii  nova-compute-libvirt               1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute - compute node libvirt support\nii  python-nova                               1:2015.1.1-0ubuntu1~cloud2            all          OpenStack Compute Python libraries\nii  python-novaclient                    1:2.22.0-0ubuntu1~cloud0              all          client library for OpenStack Compute API\n\n\nNova will not boot an instance; debug log snippet from /var/log/nova/nova-compute.log:\n\nERROR nova.compute.manager [-] Instance failed network setup after 1 attempt(s)\nTRACE nova.compute.manager Traceback (most recent call last):\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1782, in _allocate_network_async\nTRACE nova.compute.manager     dhcp_options=dhcp_options)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 406, in allocate_for_instance\nTRACE nova.compute.manager     neutron = get_client(context)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 221, in get_client\nTRACE nova.compute.manager     region_name=CONF.neutron.region_name)\nTRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 1200, in __init__\nTRACE nova.compute.manager     self.httpclient = client.construct_http_client(**kwargs)\nTRACE nova.compute.manager TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\n\n\n2015-10-12 18:40:06.334 27007 ERROR nova.compute.manager [req-58ce7b2e-bc73-40ee-a368-cfbeaed434ca 42329176f69a4cc1b7d5e6ae805080cd 7812bd244b7f4a8eba3a5cb1213210a5 - - -] [instance: 0713d74f-fe59-4992-894c-\ne3378fb1752d] Instance failed to spawn\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager Traceback (most recent call last):\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2461, in _build_resources\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     yield resources\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2333, in _build_and_run_insta\nnce                                                      \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     block_device_info=block_device_info)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2382, in spawn\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     write_to_disk=True)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4169, in _get_guest_xml\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     network_info_str = str(network_info)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 480, in __str__\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     return self._sync_wrapper(fn, *args, **kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 463, in _sync_wrapper\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/model.py\", line 495, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self[:] = self._gt.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 175, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     return self._exit_event.wait()\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 125, in wait\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     current.throw(*self._exc)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 214, in main\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     result = function(*args, **kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1782, in _allocate_network_as\nync                                                      \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     dhcp_options=dhcp_options)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 406, in allocate_for_in\nstance                                                   \n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     neutron = get_client(context)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/nova/network/neutronv2/api.py\", line 221, in get_client\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     region_name=CONF.neutron.region_name)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager   File \"/usr/lib/python2.7/dist-packages/neutronclient/v2_0/client.py\", line 1200, in __init__\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager     self.httpclient = client.construct_http_client(**kwargs)\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\n2015-10-12 18:40:06.334 27007 TRACE nova.compute.manager \n2015-10-12 18:40:06.336 27007 INFO nova.compute.manager [req-58ce7b2e-bc73-40ee-a368-cfbeaed434ca 42329176f69a4cc1b7d5e6ae805080cd 7812bd244b7f4a8eba3a5cb1213210a5 - - -] [instance: 0713d74f-fe59-4992-894c-e\n3378fb1752d] Terminating instance\n\n\n\nThere is nothing that appears to be wrong in /var/log/neutron-server.conf or in contrail's logfiles. \n\nHas anyone come across the log \"TypeError: construct_http_client() got an unexpected keyword argument 'endpoint_override'\" before?", 
            "date_created": "2015-10-12 17:12:34.300635+00:00", 
            "author": "https://api.launchpad.net/1.0/~m5x"
        }, 
        {
            "content": "", 
            "date_created": "2015-10-12 17:12:34.300635+00:00", 
            "author": "https://api.launchpad.net/1.0/~m5x"
        }, 
        {
            "content": "", 
            "date_created": "2015-10-12 17:13:04.822402+00:00", 
            "author": "https://api.launchpad.net/1.0/~m5x"
        }, 
        {
            "content": "Resolved:\n\nAfter upgrading from Juno to Kilo python-neutronclient was stuck at an older version.\n\napt-get install python-neutronclient=1:2.3.11-0ubuntu1.2~cloud0 all nodes fixed the issue.", 
            "date_created": "2015-10-19 17:06:43.961773+00:00", 
            "author": "https://api.launchpad.net/1.0/~m5x"
        }
    ]
}