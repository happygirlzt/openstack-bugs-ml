{
    "status": "Fix Released", 
    "last_updated": "2012-09-27 15:18:41.680129+00:00", 
    "description": "Scenario: Update the status of a host using the os-hosts extension.\n\nBranch: master\nRequest URL: http://127.0.0.1:8774/v2/03dce75fed734c019d87f30e738a0273/os-hosts/ubuntu-devstack\nRequest Body: {\"status\": \"disable\"}\n\nExpected Result: The host status must be updated to 'disabled'.\nActual Result: API call fails with a 500 Internal Server Error.\n\nStack Trace:\n    2012-03-20 05:15:01 ERROR nova.api.openstack [req-406770bf-4f57-4907-8ac4-1e8d52412321 f9e618906d8f479f800347a0f5db88f7 03dce75fed734c019d87f30e738a0273] Caught error:\n    'HostAPI' object has no attribute '_call_compute_message'\n    (nova.api.openstack): TRACE: Traceback (most recent call last):\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 41, in __call__\n    (nova.api.openstack): TRACE:     return req.get_response(self.application)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n    (nova.api.openstack): TRACE:     application, catch_exc_info=False)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n    (nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/keystone/keystone/middleware/auth_token.py\", line 176, in __call__\n    (nova.api.openstack): TRACE:     return self.app(env, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.7/routes/middleware.py\", line 131, in __call__\n    (nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n    (nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n    (nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 803, in __call__\n    (nova.api.openstack): TRACE:     content_type, body, accept)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 851, in _process_stack\n    (nova.api.openstack): TRACE:     action_result = self.dispatch(meth, request, action_args)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 926, in dispatch\n    (nova.api.openstack): TRACE:     return method(req=request, **action_args)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 114, in wrapped\n    (nova.api.openstack): TRACE:     return fn(self, req, id, *args, **kwargs)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 163, in update\n    (nova.api.openstack): TRACE:     result.update(update_setters[key](req, id, value))\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 183, in _set_enabled_status\n    (nova.api.openstack): TRACE:     enabled=enabled)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/compute/api.py\", line 1689, in set_host_enabled\n    (nova.api.openstack): TRACE:     return self._call_compute_message(\"set_host_enabled\", context,\n    (nova.api.openstack): TRACE: AttributeError: 'HostAPI' object has no attribute '_call_compute_message'\n    (nova.api.openstack): TRACE:", 
    "tags": [
        "ntt"
    ], 
    "importance": "High", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/960226", 
    "owner": "https://api.launchpad.net/1.0/~cbehrens", 
    "id": 960226, 
    "index": 640, 
    "created": "2012-03-20 14:00:00.956312+00:00", 
    "title": "Nova API os-hosts extension broken", 
    "comments": [
        {
            "content": "Scenario: Update the status of a host using the os-hosts extension.\n\nBranch: master\nRequest URL: http://127.0.0.1:8774/v2/03dce75fed734c019d87f30e738a0273/os-hosts/ubuntu-devstack\nRequest Body: {\"status\": \"disable\"}\n\nExpected Result: The host status must be updated to 'disabled'.\nActual Result: API call fails with a 500 Internal Server Error.\n\nStack Trace:\n    2012-03-20 05:15:01 ERROR nova.api.openstack [req-406770bf-4f57-4907-8ac4-1e8d52412321 f9e618906d8f479f800347a0f5db88f7 03dce75fed734c019d87f30e738a0273] Caught error:\n    'HostAPI' object has no attribute '_call_compute_message'\n    (nova.api.openstack): TRACE: Traceback (most recent call last):\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 41, in __call__\n    (nova.api.openstack): TRACE:     return req.get_response(self.application)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n    (nova.api.openstack): TRACE:     application, catch_exc_info=False)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n    (nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/keystone/keystone/middleware/auth_token.py\", line 176, in __call__\n    (nova.api.openstack): TRACE:     return self.app(env, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.7/routes/middleware.py\", line 131, in __call__\n    (nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    (nova.api.openstack): TRACE:     return resp(environ, start_response)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n    (nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n    (nova.api.openstack): TRACE:   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n    (nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 803, in __call__\n    (nova.api.openstack): TRACE:     content_type, body, accept)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 851, in _process_stack\n    (nova.api.openstack): TRACE:     action_result = self.dispatch(meth, request, action_args)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 926, in dispatch\n    (nova.api.openstack): TRACE:     return method(req=request, **action_args)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 114, in wrapped\n    (nova.api.openstack): TRACE:     return fn(self, req, id, *args, **kwargs)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 163, in update\n    (nova.api.openstack): TRACE:     result.update(update_setters[key](req, id, value))\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/hosts.py\", line 183, in _set_enabled_status\n    (nova.api.openstack): TRACE:     enabled=enabled)\n    (nova.api.openstack): TRACE:   File \"/opt/stack/nova/nova/compute/api.py\", line 1689, in set_host_enabled\n    (nova.api.openstack): TRACE:     return self._call_compute_message(\"set_host_enabled\", context,\n    (nova.api.openstack): TRACE: AttributeError: 'HostAPI' object has no attribute '_call_compute_message'\n    (nova.api.openstack): TRACE:", 
            "date_created": "2012-03-20 14:00:00.956312+00:00", 
            "author": "https://api.launchpad.net/1.0/~unmesh-gurjar"
        }, 
        {
            "content": "the chain of events that brought to this can be tracked down here:\n\nhttps://review.openstack.org/#change,5252", 
            "date_created": "2012-03-20 15:18:07.004824+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "This also applies to the startup, shutdown, and reboot actions this extension provides.", 
            "date_created": "2012-04-09 18:40:37.656426+00:00", 
            "author": "https://api.launchpad.net/1.0/~bcwaldon"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/6382", 
            "date_created": "2012-04-09 19:25:45.314757+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/6382\nCommitted: http://github.com/openstack/nova/commit/1478aa3478d50c587913e095f4ee14746b54dc98\nSubmitter: Jenkins\nBranch:    master\n\ncommit 1478aa3478d50c587913e095f4ee14746b54dc98\nAuthor: Chris Behrens <email address hidden>\nDate:   Mon Apr 9 19:23:03 2012 +0000\n\n    Create compute.api.BaseAPI for compute APIs to use\n    \n    Fixes bug 960226 where compute.api.HostAPI called non-existent methods\n    \n    Regression was introduced here:\n    https://review.openstack.org/#change,5252\n    \n    Added tests for HostAPI\n    \n    Change-Id: Id17927bc608ff638ea9b0b5509f0f0bb14503f85\n", 
            "date_created": "2012-04-09 23:52:47.496280+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/essex\nReview: https://review.openstack.org/6429", 
            "date_created": "2012-04-10 22:17:15.606265+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}