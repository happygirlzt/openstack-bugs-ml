{
    "status": "Fix Released", 
    "last_updated": "2017-08-11 12:27:01.300282+00:00", 
    "description": "Description\n===========\n'os-extended-volumes:volumes_attached' field in 'server list' api response is empty list, while in 'server show' it has attached volumes\n\nSteps to reproduce\n==================\n* create a server\n* create a volume\n* attach a volume to the server\n* $ openstack --debug server list \n* $ openstack --debug server show <server>\n\nActual result\n=============\nRESP from 'openstack --debug server list' command:\n \nRESP BODY: {\"servers\": [{\"OS-EXT-STS:task_state\": null, \"addresses\": {\"public\": [{\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 4, \"addr\": \"172.24.4.13\", \"OS-EXT-IPS:type\": \"fixed\"}, {\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 6, \"addr\": \"2001:db8::e\", \"OS-EXT-IPS:type\": \"fixed\"}]}, \"links\": [{\"href\": \"http://192.168.56.101/compute/v2.1/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"self\"}, {\"href\": \"http://192.168.56.101/compute/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"bookmark\"}], \"image\": {\"id\": \"9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"links\": [{\"href\": \"http://192.168.56.101/compute/images/9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"rel\": \"bookmark\"}]}, \"OS-EXT-STS:vm_state\": \"active\", \"OS-EXT-SRV-ATTR:instance_name\": \"instance-00000002\", \"OS-SRV-USG:launched_at\": \"2017-08-02T16:10:18.000000\", \"flavor\": {\"id\": \"1\", \"links\": [{\"href\": \"http://192.168.56.101/compute/flavors/1\", \"rel\": \"bookmark\"}]}, \"id\": \"03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"security_groups\": [{\"name\": \"default\"}], \"user_id\": \"5863c93dccb84f1ba5c98b3297496b4d\", \"OS-DCF:diskConfig\": \"MANUAL\", \"accessIPv4\": \"\", \"accessIPv6\": \"\", \"progress\": 0, \"OS-EXT-STS:power_state\": 1, \"OS-EXT-AZ:availability_zone\": \"nova\", \"config_drive\": \"\", \"status\": \"ACTIVE\", \"updated\": \"2017-08-02T16:10:50Z\", \"hostId\": \"40e335d04e2be60ef52b202610fcd5742ac0471e531b83ff52421470\", \"OS-EXT-SRV-ATTR:host\": \"tikitavi-VirtualBox\", \"OS-SRV-USG:terminated_at\": null, \"key_name\": null, \"OS-EXT-SRV-ATTR:hypervisor_hostname\": \"tikitavi-VirtualBox\", \"name\": \"test\", \"created\": \"2017-08-02T16:09:22Z\", \"tenant_id\": \"e27d79288f3441e98d0bdf742722c5f3\", \"os-extended-volumes:volumes_attached\": [], \"metadata\": {}}]}\n\nRESP from 'openstack --debug server show test' command:\nRESP BODY: {\"server\": {\"OS-EXT-STS:task_state\": null, \"addresses\": {\"public\": [{\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 4, \"addr\": \"172.24.4.13\", \"OS-EXT-IPS:type\": \"fixed\"}, {\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 6, \"addr\": \"2001:db8::e\", \"OS-EXT-IPS:type\": \"fixed\"}]}, \"links\": [{\"href\": \"http://192.168.56.101/compute/v2.1/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"self\"}, {\"href\": \"http://192.168.56.101/compute/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"bookmark\"}], \"image\": {\"id\": \"9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"links\": [{\"href\": \"http://192.168.56.101/compute/images/9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"rel\": \"bookmark\"}]}, \"OS-EXT-STS:vm_state\": \"active\", \"OS-EXT-SRV-ATTR:instance_name\": \"instance-00000002\", \"OS-SRV-USG:launched_at\": \"2017-08-02T16:10:18.000000\", \"flavor\": {\"id\": \"1\", \"links\": [{\"href\": \"http://192.168.56.101/compute/flavors/1\", \"rel\": \"bookmark\"}]}, \"id\": \"03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"security_groups\": [{\"name\": \"default\"}], \"user_id\": \"5863c93dccb84f1ba5c98b3297496b4d\", \"OS-DCF:diskConfig\": \"MANUAL\", \"accessIPv4\": \"\", \"accessIPv6\": \"\", \"progress\": 0, \"OS-EXT-STS:power_state\": 1, \"OS-EXT-AZ:availability_zone\": \"nova\", \"config_drive\": \"\", \"status\": \"ACTIVE\", \"updated\": \"2017-08-02T16:10:50Z\", \"hostId\": \"40e335d04e2be60ef52b202610fcd5742ac0471e531b83ff52421470\", \"OS-EXT-SRV-ATTR:host\": \"tikitavi-VirtualBox\", \"OS-SRV-USG:terminated_at\": null, \"key_name\": null, \"OS-EXT-SRV-ATTR:hypervisor_hostname\": \"tikitavi-VirtualBox\", \"name\": \"test\", \"created\": \"2017-08-02T16:09:22Z\", \"tenant_id\": \"e27d79288f3441e98d0bdf742722c5f3\", \"os-extended-volumes:volumes_attached\": [{\"id\": \"6f788e6d-2659-407f-99d6-fde9d250909a\"}, {\"id\": \"5d11953c-6b20-44c7-9f5e-d30e87edda7b\"}], \"metadata\": {}}}\n\n(more detailed logs are in attachment)\n\nExpected result\n===============\nExpected to find 'os-extended-volumes:volumes_attached' field in 'server list' the same as in 'server show'\n\nEnvironment\n===========\n\nRunning devstack\ndevstack$ git log -1\ncommit dea3083d984569eac9647f1a28f10ae98afc42f7\nAuthor: Vasyl Saienko <email address hidden>\nDate:   Tue Aug 1 00:16:51 2017 +0300\n\n    Fix path to mlock_report\n    \n    This patch fixes path to mlock_report.py. Also add python-psutil\n    to dstat depends as it is required by mlock_report.\n    \n    Change-Id: Ia2b507a7b923f1e3393a9cb7746c66d39d6abfde\n\n/nova$ git log -1\ncommit 8e56bdb1dc48dd7d15ec387d9c130c7c84407012\nMerge: 929de34 598314a\nAuthor: Jenkins <email address hidden>\nDate:   Wed Aug 2 10:00:54 2017 +0000\n\n    Merge \"Add release note for PUT /os-services/* for non-compute services\"", 
    "tags": [
        "api", 
        "cells"
    ], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1708210", 
    "owner": "https://api.launchpad.net/1.0/~natsume-takashi", 
    "id": 1708210, 
    "index": 2121, 
    "created": "2017-08-02 17:00:17.622370+00:00", 
    "title": " \u2018os-extended-volumes:volumes_attached\u2019 field empty in 'server list' api response", 
    "comments": [
        {
            "content": "Description\n===========\n'os-extended-volumes:volumes_attached' field in 'server list' api response is empty list, while in 'server show' it has attached volumes\n\nSteps to reproduce\n==================\n* create a server\n* create a volume\n* attach a volume to the server\n* $ openstack --debug server list \n* $ openstack --debug server show <server>\n\nActual result\n=============\nRESP from 'openstack --debug server list' command:\n \nRESP BODY: {\"servers\": [{\"OS-EXT-STS:task_state\": null, \"addresses\": {\"public\": [{\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 4, \"addr\": \"172.24.4.13\", \"OS-EXT-IPS:type\": \"fixed\"}, {\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 6, \"addr\": \"2001:db8::e\", \"OS-EXT-IPS:type\": \"fixed\"}]}, \"links\": [{\"href\": \"http://192.168.56.101/compute/v2.1/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"self\"}, {\"href\": \"http://192.168.56.101/compute/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"bookmark\"}], \"image\": {\"id\": \"9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"links\": [{\"href\": \"http://192.168.56.101/compute/images/9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"rel\": \"bookmark\"}]}, \"OS-EXT-STS:vm_state\": \"active\", \"OS-EXT-SRV-ATTR:instance_name\": \"instance-00000002\", \"OS-SRV-USG:launched_at\": \"2017-08-02T16:10:18.000000\", \"flavor\": {\"id\": \"1\", \"links\": [{\"href\": \"http://192.168.56.101/compute/flavors/1\", \"rel\": \"bookmark\"}]}, \"id\": \"03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"security_groups\": [{\"name\": \"default\"}], \"user_id\": \"5863c93dccb84f1ba5c98b3297496b4d\", \"OS-DCF:diskConfig\": \"MANUAL\", \"accessIPv4\": \"\", \"accessIPv6\": \"\", \"progress\": 0, \"OS-EXT-STS:power_state\": 1, \"OS-EXT-AZ:availability_zone\": \"nova\", \"config_drive\": \"\", \"status\": \"ACTIVE\", \"updated\": \"2017-08-02T16:10:50Z\", \"hostId\": \"40e335d04e2be60ef52b202610fcd5742ac0471e531b83ff52421470\", \"OS-EXT-SRV-ATTR:host\": \"tikitavi-VirtualBox\", \"OS-SRV-USG:terminated_at\": null, \"key_name\": null, \"OS-EXT-SRV-ATTR:hypervisor_hostname\": \"tikitavi-VirtualBox\", \"name\": \"test\", \"created\": \"2017-08-02T16:09:22Z\", \"tenant_id\": \"e27d79288f3441e98d0bdf742722c5f3\", \"os-extended-volumes:volumes_attached\": [], \"metadata\": {}}]}\n\nRESP from 'openstack --debug server show test' command:\nRESP BODY: {\"server\": {\"OS-EXT-STS:task_state\": null, \"addresses\": {\"public\": [{\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 4, \"addr\": \"172.24.4.13\", \"OS-EXT-IPS:type\": \"fixed\"}, {\"OS-EXT-IPS-MAC:mac_addr\": \"fa:16:3e:05:15:9f\", \"version\": 6, \"addr\": \"2001:db8::e\", \"OS-EXT-IPS:type\": \"fixed\"}]}, \"links\": [{\"href\": \"http://192.168.56.101/compute/v2.1/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"self\"}, {\"href\": \"http://192.168.56.101/compute/servers/03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"rel\": \"bookmark\"}], \"image\": {\"id\": \"9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"links\": [{\"href\": \"http://192.168.56.101/compute/images/9929f291-7d09-49ff-8374-e59d2fb2f43c\", \"rel\": \"bookmark\"}]}, \"OS-EXT-STS:vm_state\": \"active\", \"OS-EXT-SRV-ATTR:instance_name\": \"instance-00000002\", \"OS-SRV-USG:launched_at\": \"2017-08-02T16:10:18.000000\", \"flavor\": {\"id\": \"1\", \"links\": [{\"href\": \"http://192.168.56.101/compute/flavors/1\", \"rel\": \"bookmark\"}]}, \"id\": \"03f3a8da-2c51-4f43-96dc-9354a6fef3f5\", \"security_groups\": [{\"name\": \"default\"}], \"user_id\": \"5863c93dccb84f1ba5c98b3297496b4d\", \"OS-DCF:diskConfig\": \"MANUAL\", \"accessIPv4\": \"\", \"accessIPv6\": \"\", \"progress\": 0, \"OS-EXT-STS:power_state\": 1, \"OS-EXT-AZ:availability_zone\": \"nova\", \"config_drive\": \"\", \"status\": \"ACTIVE\", \"updated\": \"2017-08-02T16:10:50Z\", \"hostId\": \"40e335d04e2be60ef52b202610fcd5742ac0471e531b83ff52421470\", \"OS-EXT-SRV-ATTR:host\": \"tikitavi-VirtualBox\", \"OS-SRV-USG:terminated_at\": null, \"key_name\": null, \"OS-EXT-SRV-ATTR:hypervisor_hostname\": \"tikitavi-VirtualBox\", \"name\": \"test\", \"created\": \"2017-08-02T16:09:22Z\", \"tenant_id\": \"e27d79288f3441e98d0bdf742722c5f3\", \"os-extended-volumes:volumes_attached\": [{\"id\": \"6f788e6d-2659-407f-99d6-fde9d250909a\"}, {\"id\": \"5d11953c-6b20-44c7-9f5e-d30e87edda7b\"}], \"metadata\": {}}}\n\n(more detailed logs are in attachment)\n\nExpected result\n===============\nExpected to find 'os-extended-volumes:volumes_attached' field in 'server list' the same as in 'server show'\n\nEnvironment\n===========\n\nRunning devstack\ndevstack$ git log -1\ncommit dea3083d984569eac9647f1a28f10ae98afc42f7\nAuthor: Vasyl Saienko <email address hidden>\nDate:   Tue Aug 1 00:16:51 2017 +0300\n\n    Fix path to mlock_report\n    \n    This patch fixes path to mlock_report.py. Also add python-psutil\n    to dstat depends as it is required by mlock_report.\n    \n    Change-Id: Ia2b507a7b923f1e3393a9cb7746c66d39d6abfde\n\n/nova$ git log -1\ncommit 8e56bdb1dc48dd7d15ec387d9c130c7c84407012\nMerge: 929de34 598314a\nAuthor: Jenkins <email address hidden>\nDate:   Wed Aug 2 10:00:54 2017 +0000\n\n    Merge \"Add release note for PUT /os-services/* for non-compute services\"", 
            "date_created": "2017-08-02 17:00:17.622370+00:00", 
            "author": "https://api.launchpad.net/1.0/~rtikitavi"
        }, 
        {
            "content": "", 
            "date_created": "2017-08-02 17:00:17.622370+00:00", 
            "author": "https://api.launchpad.net/1.0/~rtikitavi"
        }, 
        {
            "content": "This bug can be reproduced with nova (master: commit 0566ad6b878ff8d2643b9f3c5d206ae10371c089) and python-openstackclient 3.12.0.", 
            "date_created": "2017-08-03 01:39:55.658766+00:00", 
            "author": "https://api.launchpad.net/1.0/~natsume-takashi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/490340", 
            "date_created": "2017-08-03 06:22:57.510434+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/490340\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=0a2f45a5b2e90b0a5650f5069b77dd2a8ddfc4a4\nSubmitter: Jenkins\nBranch:    master\n\ncommit 0a2f45a5b2e90b0a5650f5069b77dd2a8ddfc4a4\nAuthor: Takashi NATSUME <email address hidden>\nDate:   Thu Aug 3 14:11:19 2017 +0900\n\n    Fix getting instance bdms in multiple cells\n    \n    In the 'detail' method of ExtendedVolumesController\n    related to 'GET /servers/detail' API,\n    multiple cells environemnt is not taken into account\n    when getting instance BDMs.\n    So fix it.\n    \n    Change-Id: I9377e988fbdc822df46e91c0db6c8012697bc2ee\n    Closes-Bug: #1708210\n", 
            "date_created": "2017-08-04 20:17:29.197404+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 16.0.0.0rc1 release candidate.", 
            "date_created": "2017-08-11 12:27:00.766065+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}