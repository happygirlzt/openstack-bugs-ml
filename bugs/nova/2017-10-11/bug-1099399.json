{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:15:23.602881+00:00", 
    "description": "GET against /os-services with latest devstack fails with \n\n\n2013-01-14 13:39:32.65 ERROR nova.api.openstack [req-fbf380f3-fba8-4f17-9201-e5b7519a5758 admin demo] Caught error: 'Service' object has no attribute 'availability_zone'\n2013-01-14 13:39:32.65 TRACE nova.api.openstack Traceback (most recent call last):\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 81, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 329, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 895, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     content_type, body, accept)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 951, in _process_stack\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1040, in dispatch\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/services.py\", line 95, in index\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     'zone': svc['availability_zone'],\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/models.py\", line 64, in __getitem__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return getattr(self, key)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack AttributeError: 'Service' object has no attribute 'availability_zone'\n2013-01-14 13:39:32.65 TRACE nova.api.openstack", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1099399", 
    "owner": "None", 
    "id": 1099399, 
    "index": 3312, 
    "created": "2013-01-14 13:41:45.984006+00:00", 
    "title": "services contrib extension fails with 'Service' object has no attribute 'availability_zone'", 
    "comments": [
        {
            "content": "GET against /os-services with latest devstack fails with \n\n\n2013-01-14 13:39:32.65 ERROR nova.api.openstack [req-fbf380f3-fba8-4f17-9201-e5b7519a5758 admin demo] Caught error: 'Service' object has no attribute 'availability_zone'\n2013-01-14 13:39:32.65 TRACE nova.api.openstack Traceback (most recent call last):\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 81, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 329, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 895, in __call__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     content_type, body, accept)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 951, in _process_stack\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1040, in dispatch\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return method(req=request, **action_args)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/services.py\", line 95, in index\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     'zone': svc['availability_zone'],\n2013-01-14 13:39:32.65 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/db/sqlalchemy/models.py\", line 64, in __getitem__\n2013-01-14 13:39:32.65 TRACE nova.api.openstack     return getattr(self, key)\n2013-01-14 13:39:32.65 TRACE nova.api.openstack AttributeError: 'Service' object has no attribute 'availability_zone'\n2013-01-14 13:39:32.65 TRACE nova.api.openstack", 
            "date_created": "2013-01-14 13:41:45.984006+00:00", 
            "author": "https://api.launchpad.net/1.0/~mjfork"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/19626", 
            "date_created": "2013-01-14 13:48:55.309998+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/19626\nCommitted: http://github.com/openstack/nova/commit/20ba7028fc406509c5f8430f79f7153f359d87af\nSubmitter: Jenkins\nBranch:    master\n\ncommit 20ba7028fc406509c5f8430f79f7153f359d87af\nAuthor: Michael J Fork <email address hidden>\nDate:   Mon Jan 14 13:45:23 2013 +0000\n\n    Populate service list with availability zone\n    \n    Fixes bug 1099399\n    \n    Availability zone was removed from the service object and is now added\n    via a separate call to availabilty_zones.set_availability_zones\n    \n    Change-Id: I89126bb72e482f3ce701a9e28035416805a639a0\n", 
            "date_created": "2013-01-14 18:42:59.421148+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/19668", 
            "date_created": "2013-01-14 21:42:07.838239+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/19668\nCommitted: http://github.com/openstack/nova/commit/fc42f76b24df376c89f94a177f2476dacbc87073\nSubmitter: Jenkins\nBranch:    master\n\ncommit fc42f76b24df376c89f94a177f2476dacbc87073\nAuthor: Michael J Fork <email address hidden>\nDate:   Tue Jan 15 12:44:41 2013 +0000\n\n    Populate service list with availability zone and correct unit test\n    \n    Availability zone was removed from the service object and is now added\n    via a separate call to availabilty_zones.set_availability_zones. Fix\n    the fake_services_list structure in test_services to reflect that\n    availability zone is no longer returned but added separately based\n    on the topic.\n    \n    NOTE: original fix was reverted, combining unit test fix and original\n    change here.\n    \n    bug 1099399\n    Change-Id: Ic9675a88c2c229d6feb20f5b934458e10c17684f\n", 
            "date_created": "2013-01-15 19:15:00.695363+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}