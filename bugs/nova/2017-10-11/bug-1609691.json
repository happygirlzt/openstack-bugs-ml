{
    "status": "Fix Released", 
    "last_updated": "2016-09-02 01:13:49.245303+00:00", 
    "description": "Non-admin users can lists VM instances of other projects (tenants) by default.\nThey should not be able to see VM instances of other projects by default.\n\n\nstack@devstack-master:/opt/devstack$ openstack project list\n+----------------------------------+--------------------+\n| ID                               | Name               |\n+----------------------------------+--------------------+\n| 33621006e3744ecea0b7090658601929 | alt_demo           |\n| 6773c471c311455d862ed22f685574b0 | admin              |\n| 850f809b7ee5469f8aa639b4717f58a5 | demo               |\n| 95a64b7c097e4b69bd8af9224f332cd6 | invisible_to_admin |\n| c65ecc9a29e64e83bedf0609bb27266f | service            |\n+----------------------------------+--------------------+\nstack@devstack-master:/opt/devstack$ openstack user list\n+----------------------------------+----------+\n| ID                               | Name     |\n+----------------------------------+----------+\n| 60066d4ac41a44d1ab6abea61809e78a | admin    |\n| 896d17cb7d0f49f585ce460f61f35a5a | demo     |\n| 6fcc02a6cfa64de097d15d2535d0108e | alt_demo |\n| b703f8d08aae46e0bad0fe3022d13250 | nova     |\n| 205a38f88db84c13bb84274456da8b69 | glance   |\n| c2a64c7cffae430493dac9d8b4ef6470 | cinder   |\n| 5ad6f4ce7c64489e965d56eba081e2a9 | neutron  |\n| 2d16f7d5f324446dbfa30db2a04f9658 | heat     |\n+----------------------------------+----------+\nstack@devstack-master:/opt/devstack$ openstack user role list --project admin admin\n+----------------------------------+-------+---------+-------+\n| ID                               | Name  | Project | User  |\n+----------------------------------+-------+---------+-------+\n| 915b08cc7e6b40ceb55a803e8a843d0d | admin | admin   | admin |\n+----------------------------------+-------+---------+-------+\nstack@devstack-master:/opt/devstack$ openstack user role list --project demo demo\n+----------------------------------+-------------+---------+------+\n| ID                               | Name        | Project | User |\n+----------------------------------+-------------+---------+------+\n| cf49079e087a4c61935bac9a5c6c224d | Member      | demo    | demo |\n| 664e30492b954257ae579e8498c4fc78 | anotherrole | demo    | demo |\n+----------------------------------+-------------+---------+------+\n\nOperated by admin:\nstack@devstack-master:/opt/devstack$ nova show server1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n(snipped...)\n| OS-EXT-STS:vm_state                  | active                                                         |\n(snipped...)\n| id                                   | 853d681b-de17-4fd3-bcd6-0f91d153ccd6                           |\n(snipped...)\n| name                                 | server1                                                        |\n(snipped...)\n| tenant_id                            | 6773c471c311455d862ed22f685574b0                               | * admin\n| updated                              | 2016-08-04T08:09:49Z                                           |\n| user_id                              | 60066d4ac41a44d1ab6abea61809e78a                               | * admin\n+--------------------------------------+----------------------------------------------------------------+\n\nOperated by demo:\nstack@devstack-master:/opt/devstack$ env | grep OS\n(snipped...)\nOS_USERNAME=demo\nOS_TENANT_NAME=demo\n(snipped...)\nstack@devstack-master:/opt/devstack$ nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\nstack@devstack-master:/opt/devstack$ nova list --all-tenants\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name    | Tenant ID                        | Status | Task State | Power State | Networks                       |\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n| 853d681b-de17-4fd3-bcd6-0f91d153ccd6 | server1 | 6773c471c311455d862ed22f685574b0 | ACTIVE | -          | Running     | public=2001:db8::4, 10.0.2.201 |\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n\n[Environment]\nOS: Ubuntu 14.04.1 LTS (64bit)\nnova master(commit: 5d040245e750aab06c620344828c2182703515b7)", 
    "tags": [
        "api"
    ], 
    "importance": "Critical", 
    "heat": 256, 
    "link": "https://bugs.launchpad.net/nova/+bug/1609691", 
    "owner": "https://api.launchpad.net/1.0/~natsume-takashi", 
    "id": 1609691, 
    "index": 280, 
    "created": "2016-08-04 08:39:29.765013+00:00", 
    "title": "Non-admin users can lists VM instances of other projects (tenants) by default", 
    "comments": [
        {
            "content": "Non-admin users can lists VM instances of other projects (tenants) by default.\nThey should not be able to see VM instances of other projects by default.\n\n\nstack@devstack-master:/opt/devstack$ openstack project list\n+----------------------------------+--------------------+\n| ID                               | Name               |\n+----------------------------------+--------------------+\n| 33621006e3744ecea0b7090658601929 | alt_demo           |\n| 6773c471c311455d862ed22f685574b0 | admin              |\n| 850f809b7ee5469f8aa639b4717f58a5 | demo               |\n| 95a64b7c097e4b69bd8af9224f332cd6 | invisible_to_admin |\n| c65ecc9a29e64e83bedf0609bb27266f | service            |\n+----------------------------------+--------------------+\nstack@devstack-master:/opt/devstack$ openstack user list\n+----------------------------------+----------+\n| ID                               | Name     |\n+----------------------------------+----------+\n| 60066d4ac41a44d1ab6abea61809e78a | admin    |\n| 896d17cb7d0f49f585ce460f61f35a5a | demo     |\n| 6fcc02a6cfa64de097d15d2535d0108e | alt_demo |\n| b703f8d08aae46e0bad0fe3022d13250 | nova     |\n| 205a38f88db84c13bb84274456da8b69 | glance   |\n| c2a64c7cffae430493dac9d8b4ef6470 | cinder   |\n| 5ad6f4ce7c64489e965d56eba081e2a9 | neutron  |\n| 2d16f7d5f324446dbfa30db2a04f9658 | heat     |\n+----------------------------------+----------+\nstack@devstack-master:/opt/devstack$ openstack user role list --project admin admin\n+----------------------------------+-------+---------+-------+\n| ID                               | Name  | Project | User  |\n+----------------------------------+-------+---------+-------+\n| 915b08cc7e6b40ceb55a803e8a843d0d | admin | admin   | admin |\n+----------------------------------+-------+---------+-------+\nstack@devstack-master:/opt/devstack$ openstack user role list --project demo demo\n+----------------------------------+-------------+---------+------+\n| ID                               | Name        | Project | User |\n+----------------------------------+-------------+---------+------+\n| cf49079e087a4c61935bac9a5c6c224d | Member      | demo    | demo |\n| 664e30492b954257ae579e8498c4fc78 | anotherrole | demo    | demo |\n+----------------------------------+-------------+---------+------+\n\nOperated by admin:\nstack@devstack-master:/opt/devstack$ nova show server1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n(snipped...)\n| OS-EXT-STS:vm_state                  | active                                                         |\n(snipped...)\n| id                                   | 853d681b-de17-4fd3-bcd6-0f91d153ccd6                           |\n(snipped...)\n| name                                 | server1                                                        |\n(snipped...)\n| tenant_id                            | 6773c471c311455d862ed22f685574b0                               | * admin\n| updated                              | 2016-08-04T08:09:49Z                                           |\n| user_id                              | 60066d4ac41a44d1ab6abea61809e78a                               | * admin\n+--------------------------------------+----------------------------------------------------------------+\n\nOperated by demo:\nstack@devstack-master:/opt/devstack$ env | grep OS\n(snipped...)\nOS_USERNAME=demo\nOS_TENANT_NAME=demo\n(snipped...)\nstack@devstack-master:/opt/devstack$ nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\nstack@devstack-master:/opt/devstack$ nova list --all-tenants\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n| ID                                   | Name    | Tenant ID                        | Status | Task State | Power State | Networks                       |\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n| 853d681b-de17-4fd3-bcd6-0f91d153ccd6 | server1 | 6773c471c311455d862ed22f685574b0 | ACTIVE | -          | Running     | public=2001:db8::4, 10.0.2.201 |\n+--------------------------------------+---------+----------------------------------+--------+------------+-------------+--------------------------------+\n\n[Environment]\nOS: Ubuntu 14.04.1 LTS (64bit)\nnova master(commit: 5d040245e750aab06c620344828c2182703515b7)", 
            "date_created": "2016-08-04 08:39:29.765013+00:00", 
            "author": "https://api.launchpad.net/1.0/~natsume-takashi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/351077", 
            "date_created": "2016-08-04 09:22:15.606471+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Since the offending commit appears only in the master branch of openstack/nova and doesn't seem to have been backported to any stable branches, this falls under VMT report class Y and will therefore not require publication of a security advisory: https://security.openstack.org/vmt-process.html#incident-report-taxonomy", 
            "date_created": "2016-08-04 12:45:33.789306+00:00", 
            "author": "https://api.launchpad.net/1.0/~fungi"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/351077\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=16a38564cb61031466bf60ac393363bfeaedbd93\nSubmitter: Jenkins\nBranch:    master\n\ncommit 16a38564cb61031466bf60ac393363bfeaedbd93\nAuthor: Takashi NATSUME <email address hidden>\nDate:   Thu Aug 4 17:56:58 2016 +0900\n\n    Fix server operations' policies to admin only\n    \n    Before the following policies were set to admin only operations\n    by default.\n    \n    * detail:get_all_tenants\n    * index:get_all_tenants\n    * create:forced_host\n    \n    But currently they are not limited to admin users by default.\n    They were changed unintentionally in\n    I71b3d1233255125cb280a000b990329f5b03fdfd.\n    So set them admin only again.\n    And a unit test for policy is fixed.\n    \n    Change-Id: I1c0a4f1ff19d68152953dd6b265a7fb2e0f6271a\n    Closes-Bug: #1609625\n    Closes-Bug: #1609691\n    Closes-Bug: #1611628\n", 
            "date_created": "2016-08-11 06:08:07.695282+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.0.0b3 development milestone.", 
            "date_created": "2016-09-02 01:13:48.457201+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}