{
    "status": "Invalid", 
    "last_updated": "2011-02-08 09:54:39.189820+00:00", 
    "description": "---Background---\nOS:  Ubuntu 10.04 LTS\nNova:  2011.2~bzr650-0ubuntu0ppa1~lucid1\nFlatManager \nmySQL DB\n-----------------------\n\nWhen running the 'nova-manage network create ...\" command, I always get a CIDR that is +1 from the one that I originally entered, e.g.\n\n/usr/bin/python /usr/bin/nova-manage network create 184.106.73.80/28 1 14\n\n-----enters into mySQL-----\n\nmysql> select * from networks\\G\n*************************** 1. row ***************************\n         created_at: 2011-02-08 04:26:29\n         updated_at: 2011-02-08 04:26:30\n         deleted_at: NULL\n            deleted: 0\n                 id: 1\n           injected: 0\n               cidr: 184.106.73.80/29\n            netmask: 255.255.255.248\n             bridge: br100\n            gateway: 184.106.73.81\n          broadcast: 184.106.73.87\n                dns: NULL\n               vlan: NULL\n vpn_public_address: NULL\n    vpn_public_port: NULL\nvpn_private_address: NULL\n         dhcp_start: 184.106.73.82\n         project_id: wayneproject\n               host: NULL\n            cidr_v6: NULL\n          ra_server: NULL\n1 row in set (0.00 sec)\n\n#####\n\nThere are a couple of issues that arise from this:\n\nA)  I have to manually go in and set my CIDR, netmask, broadcast, and gateway (from what I can tell whatever network you create nova-manage assume the first two IPs are the network and gateway IP).  This is fine in some cases, but I've found myself having to set my gateway manually almost every time.\n\nB)  This also causes a problem with 'nova.fixed_ips', as my available IPs are now from a /29 block, and not a /28.  \n\nC)  Networking is totally broke due to this, and requires all these changes in order to reach any instances that are spun up.\n\nThis doesn't keep Nova from running, it just makes configuration a bit more difficult from the networking perspective.\n\n\nApologies in advance if this is already a known issue, I couldn't find any references so I thought I'd submit a new bug...\n\ncheers", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/714986", 
    "owner": "None", 
    "id": 714986, 
    "index": 2028, 
    "created": "2011-02-08 04:52:44.479855+00:00", 
    "title": "'nova-manage network create ...' populates incorrect data in database", 
    "comments": [
        {
            "content": "---Background---\nOS:  Ubuntu 10.04 LTS\nNova:  2011.2~bzr650-0ubuntu0ppa1~lucid1\nFlatManager \nmySQL DB\n-----------------------\n\nWhen running the 'nova-manage network create ...\" command, I always get a CIDR that is +1 from the one that I originally entered, e.g.\n\n/usr/bin/python /usr/bin/nova-manage network create 184.106.73.80/28 1 14\n\n-----enters into mySQL-----\n\nmysql> select * from networks\\G\n*************************** 1. row ***************************\n         created_at: 2011-02-08 04:26:29\n         updated_at: 2011-02-08 04:26:30\n         deleted_at: NULL\n            deleted: 0\n                 id: 1\n           injected: 0\n               cidr: 184.106.73.80/29\n            netmask: 255.255.255.248\n             bridge: br100\n            gateway: 184.106.73.81\n          broadcast: 184.106.73.87\n                dns: NULL\n               vlan: NULL\n vpn_public_address: NULL\n    vpn_public_port: NULL\nvpn_private_address: NULL\n         dhcp_start: 184.106.73.82\n         project_id: wayneproject\n               host: NULL\n            cidr_v6: NULL\n          ra_server: NULL\n1 row in set (0.00 sec)\n\n#####\n\nThere are a couple of issues that arise from this:\n\nA)  I have to manually go in and set my CIDR, netmask, broadcast, and gateway (from what I can tell whatever network you create nova-manage assume the first two IPs are the network and gateway IP).  This is fine in some cases, but I've found myself having to set my gateway manually almost every time.\n\nB)  This also causes a problem with 'nova.fixed_ips', as my available IPs are now from a /29 block, and not a /28.  \n\nC)  Networking is totally broke due to this, and requires all these changes in order to reach any instances that are spun up.\n\nThis doesn't keep Nova from running, it just makes configuration a bit more difficult from the networking perspective.\n\n\nApologies in advance if this is already a known issue, I couldn't find any references so I thought I'd submit a new bug...\n\ncheers", 
            "date_created": "2011-02-08 04:52:44.479855+00:00", 
            "author": "https://api.launchpad.net/1.0/~wayne-walls"
        }, 
        {
            "content": "Network create tries to split up whatever you put in the private range by the network_size.  The problem is that you are putting in 14 for network_size.   If you want to use the full /28, use /28 1 16.  In fact don't ever use non-power of twos for network size.  If you want to reserve some ips, then create the network and manually set the reserved flag on some of the addresses.\n\nVish\n\nOn Feb 7, 2011, at 8:52 PM, Wayne A. Walls wrote:\n\n> Public bug reported:\n> \n> ---Background---\n> OS:  Ubuntu 10.04 LTS\n> Nova:  2011.2~bzr650-0ubuntu0ppa1~lucid1\n> FlatManager \n> mySQL DB\n> -----------------------\n> \n> When running the 'nova-manage network create ...\" command, I always get\n> a CIDR that is +1 from the one that I originally entered, e.g.\n> \n> /usr/bin/python /usr/bin/nova-manage network create 184.106.73.80/28 1\n> 14\n> \n> -----enters into mySQL-----\n> \n> mysql> select * from networks\\G\n> *************************** 1. row ***************************\n>         created_at: 2011-02-08 04:26:29\n>         updated_at: 2011-02-08 04:26:30\n>         deleted_at: NULL\n>            deleted: 0\n>                 id: 1\n>           injected: 0\n>               cidr: 184.106.73.80/29\n>            netmask: 255.255.255.248\n>             bridge: br100\n>            gateway: 184.106.73.81\n>          broadcast: 184.106.73.87\n>                dns: NULL\n>               vlan: NULL\n> vpn_public_address: NULL\n>    vpn_public_port: NULL\n> vpn_private_address: NULL\n>         dhcp_start: 184.106.73.82\n>         project_id: wayneproject\n>               host: NULL\n>            cidr_v6: NULL\n>          ra_server: NULL\n> 1 row in set (0.00 sec)\n> \n> #####\n> \n> There are a couple of issues that arise from this:\n> \n> A)  I have to manually go in and set my CIDR, netmask, broadcast, and\n> gateway (from what I can tell whatever network you create nova-manage\n> assume the first two IPs are the network and gateway IP).  This is fine\n> in some cases, but I've found myself having to set my gateway manually\n> almost every time.\n> \n> B)  This also causes a problem with 'nova.fixed_ips', as my available\n> IPs are now from a /29 block, and not a /28.\n> \n> C)  Networking is totally broke due to this, and requires all these\n> changes in order to reach any instances that are spun up.\n> \n> This doesn't keep Nova from running, it just makes configuration a bit\n> more difficult from the networking perspective.\n> \n> \n> Apologies in advance if this is already a known issue, I couldn't find any references so I thought I'd submit a new bug...\n> \n> cheers\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/714986\n> \n> Title:\n>  'nova-manage network create ...' populates incorrect data in database\n> \n> Status in OpenStack Compute (Nova):\n>  New\n> \n> Bug description:\n>  ---Background---\n>  OS:  Ubuntu 10.04 LTS\n>  Nova:  2011.2~bzr650-0ubuntu0ppa1~lucid1\n>  FlatManager \n>  mySQL DB\n>  -----------------------\n> \n>  When running the 'nova-manage network create ...\" command, I always\n>  get a CIDR that is +1 from the one that I originally entered, e.g.\n> \n>  /usr/bin/python /usr/bin/nova-manage network create 184.106.73.80/28 1\n>  14\n> \n>  -----enters into mySQL-----\n> \n>  mysql> select * from networks\\G\n>  *************************** 1. row ***************************\n>           created_at: 2011-02-08 04:26:29\n>           updated_at: 2011-02-08 04:26:30\n>           deleted_at: NULL\n>              deleted: 0\n>                   id: 1\n>             injected: 0\n>                 cidr: 184.106.73.80/29\n>              netmask: 255.255.255.248\n>               bridge: br100\n>              gateway: 184.106.73.81\n>            broadcast: 184.106.73.87\n>                  dns: NULL\n>                 vlan: NULL\n>   vpn_public_address: NULL\n>      vpn_public_port: NULL\n>  vpn_private_address: NULL\n>           dhcp_start: 184.106.73.82\n>           project_id: wayneproject\n>                 host: NULL\n>              cidr_v6: NULL\n>            ra_server: NULL\n>  1 row in set (0.00 sec)\n> \n>  #####\n> \n>  There are a couple of issues that arise from this:\n> \n>  A)  I have to manually go in and set my CIDR, netmask, broadcast, and\n>  gateway (from what I can tell whatever network you create nova-manage\n>  assume the first two IPs are the network and gateway IP).  This is\n>  fine in some cases, but I've found myself having to set my gateway\n>  manually almost every time.\n> \n>  B)  This also causes a problem with 'nova.fixed_ips', as my available\n>  IPs are now from a /29 block, and not a /28.\n> \n>  C)  Networking is totally broke due to this, and requires all these\n>  changes in order to reach any instances that are spun up.\n> \n>  This doesn't keep Nova from running, it just makes configuration a bit\n>  more difficult from the networking perspective.\n> \n> \n>  Apologies in advance if this is already a known issue, I couldn't find any references so I thought I'd submit a new bug...\n> \n>  cheers\n> \n> \n\n", 
            "date_created": "2011-02-08 05:55:58+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Nice, thanks for the clarification on this, Vish!  I'll be sure to fill out the entire range I plan to use per project to get past this ;)\n\ncheers", 
            "date_created": "2011-02-08 06:36:58.566716+00:00", 
            "author": "https://api.launchpad.net/1.0/~wayne-walls"
        }, 
        {
            "content": "Closing as Invalid, please reopen if I read the story wrong.", 
            "date_created": "2011-02-08 09:54:36.962211+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}