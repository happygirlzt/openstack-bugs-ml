{
    "status": "Confirmed", 
    "last_updated": "2016-07-12 14:27:49.907434+00:00", 
    "description": "Using a devstack setup, fairly latest!\n\n1) Create a cinder volume (used GlusterFS as the cinder backed) - cv1\n2) Attach cv1  to vm1 (vm1 is a nova VM in running state)\n3) Create 2 snapshots of vol1 using cinder snapshot-create ... cv1-snap1, cv1-snap2\n4) Stop the nova vm vm1 (Note that cinder still reports the volume cv1 as 'in-use')\n5) From cinder, delete cv1-snap1. Since cv1-snap1 is _Not_ the active file, nova tries to do a blockCommit and fails with excp below:\n\n2015-07-06 09:33:00.479 ERROR oslo_messaging.rpc.dispatcher [req-695dd8c5-2722-4cf2-ab0a-583b0dacd388 nova service] Exception during message handling: Requested operation is not valid: domain is not running\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 142, in inner\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return func(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 89, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     payload)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 72, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2954, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     snapshot_id, delete_info)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2024, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     base_file = delete_info['base_file']\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2017, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     \"snapshots.\") % ver\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2003, in _volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     # paths are maintained relative by qemu.\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 183, in doit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 141, in proxy_call\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 122, in execute\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(c, e, tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 80, in tworker\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib64/python2.7/site-packages/libvirt.py\", line 642, in blockCommit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainBlockCommit() failed', dom=self)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher libvirtError: Requested operation is not valid: domain is not running", 
    "tags": [
        "gluster", 
        "libvirt", 
        "volumes"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1471726", 
    "owner": "None", 
    "id": 1471726, 
    "index": 512, 
    "created": "2015-07-06 09:43:52.099664+00:00", 
    "title": "libvirt: blockCommit fails if domain is not running, for attached cinder volumes", 
    "comments": [
        {
            "content": "Using a devstack setup, fairly latest!\n\n1) Create a cinder volume (used GlusterFS as the cinder backed) - cv1\n2) Attach cv1  to vm1 (vm1 is a nova VM in running state)\n3) Create 2 snapshots of vol1 using cinder snapshot-create ... cv1-snap1, cv1-snap2\n4) Stop the nova vm vm1 (Note that cinder still reports the volume cv1 as 'in-use')\n5) From cinder, delete cv1-snap1. Since cv1-snap1 is _Not_ the active file, nova tries to do a blockCommit and fails with excp below:\n\n2015-07-06 09:33:00.479 ERROR oslo_messaging.rpc.dispatcher [req-695dd8c5-2722-4cf2-ab0a-583b0dacd388 nova service] Exception during message handling: Requested operation is not valid: domain is not running\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 142, in inner\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return func(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 89, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     payload)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 72, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2954, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     snapshot_id, delete_info)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2024, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     base_file = delete_info['base_file']\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2017, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     \"snapshots.\") % ver\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2003, in _volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     # paths are maintained relative by qemu.\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 183, in doit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 141, in proxy_call\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 122, in execute\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(c, e, tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 80, in tworker\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib64/python2.7/site-packages/libvirt.py\", line 642, in blockCommit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainBlockCommit() failed', dom=self)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher libvirtError: Requested operation is not valid: domain is not running", 
            "date_created": "2015-07-06 09:43:52.099664+00:00", 
            "author": "https://api.launchpad.net/1.0/~dpkshetty"
        }, 
        {
            "content": "This bug is similar to :\n\nhttps://bugs.launchpad.net/cinder/+bug/1444806 \n(test_volume_boot_pattern tempest test failure for glusterfs backend - Part 2)\n\nhttps://bugs.launchpad.net/nova/+bug/1465416 \n(os-assisted-volume-snapshots:delete doesn't work if instance is SHUTOFF )\n\nexcept that those are for blockRebase, and this bug covers blockCommit case.\n\nIn talking with folks on IRC it seemed a failing testcase for blockCommit was needed, hence I created this bug report", 
            "date_created": "2015-07-06 09:46:30.508931+00:00", 
            "author": "https://api.launchpad.net/1.0/~dpkshetty"
        }, 
        {
            "content": "Here are the steps used to re-create the fail:\n\n[stack@devstack-f21 ~]$ [admin] cinder list\n+--------------------------------------+--------+--------------+------+-------------+----------+--------------------------------------+\n|                  ID                  | Status | Display Name | Size | Volume Type | Bootable |             Attached to              |\n+--------------------------------------+--------+--------------+------+-------------+----------+--------------------------------------+\n| 1d7ce8ac-b440-44aa-80a7-932a938186a9 | in-use |     cv1      |  1   |  glusterfs  |  false   | f886d5e8-257e-47b0-8b51-155d8a927af5 |\n+--------------------------------------+--------+--------------+------+-------------+----------+--------------------------------------+\n\n[stack@devstack-f21 ~]$ [admin] cinder snapshot-list\n+--------------------------------------+--------------------------------------+-----------+--------------+------+\n|                  ID                  |              Volume ID               |   Status  | Display Name | Size |\n+--------------------------------------+--------------------------------------+-----------+--------------+------+\n| 22387337-8583-4d68-96a3-fa851056d0cd | 1d7ce8ac-b440-44aa-80a7-932a938186a9 | available |  cv1-snap2   |  1   |\n| ca7646b9-ca33-48e2-b27f-ea55010f7354 | 1d7ce8ac-b440-44aa-80a7-932a938186a9 | available |  cv1-snap1   |  1   |\n+--------------------------------------+--------------------------------------+-----------+--------------+------+\n\n[stack@devstack-f21 ~]$ [admin] nova list\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks                                               |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n| f886d5e8-257e-47b0-8b51-155d8a927af5 | vm1  | ACTIVE | -          | Running     | private=10.0.0.3, fdaf:7a10:7b10:0:f816:3eff:fe4b:69ae |\n+--------------------------------------+------+--------+------------+-------------+--------------------------------------------------------+\n\n[stack@devstack-f21 ~]$ [admin] nova stop vm1\nRequest to stop server vm1 has been accepted.\n\n[stack@devstack-f21 ~]$ [admin] nova list\n+--------------------------------------+------+---------+------------+-------------+--------------------------------------------------------+\n| ID                                   | Name | Status  | Task State | Power State | Networks                                               |\n+--------------------------------------+------+---------+------------+-------------+--------------------------------------------------------+\n| f886d5e8-257e-47b0-8b51-155d8a927af5 | vm1  | SHUTOFF | -          | Shutdown    | private=10.0.0.3, fdaf:7a10:7b10:0:f816:3eff:fe4b:69ae |\n+--------------------------------------+------+---------+------------+-------------+--------------------------------------------------------+\n\n[stack@devstack-f21 ~]$ [admin] cinder snapshot-delete cv1-snap1\n\n[stack@devstack-f21 ~]$ [admin] cinder snapshot-list\n+--------------------------------------+--------------------------------------+----------------+--------------+------+\n|                  ID                  |              Volume ID               |     Status     | Display Name | Size |\n+--------------------------------------+--------------------------------------+----------------+--------------+------+\n| 22387337-8583-4d68-96a3-fa851056d0cd | 1d7ce8ac-b440-44aa-80a7-932a938186a9 |   available    |  cv1-snap2   |  1   |\n| ca7646b9-ca33-48e2-b27f-ea55010f7354 | 1d7ce8ac-b440-44aa-80a7-932a938186a9 | error_deleting |  cv1-snap1   |  1   |\n+--------------------------------------+--------------------------------------+----------------+--------------+------+\n\nException from nova (n-cpu) screen:\n\n2015-07-06 09:33:00.479 ERROR oslo_messaging.rpc.dispatcher [req-695dd8c5-2722-4cf2-ab0a-583b0dacd388 nova service] Exception during message handling: Requested operation is not valid: domain is not running\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 142, in inner\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return func(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 89, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     payload)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 72, in wrapped\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 2954, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     snapshot_id, delete_info)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2024, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     base_file = delete_info['base_file']\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 119, in __exit__\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2017, in volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     \"snapshots.\") % ver\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2003, in _volume_snapshot_delete\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     # paths are maintained relative by qemu.\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 183, in doit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 141, in proxy_call\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 122, in execute\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     six.reraise(c, e, tb)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/site-packages/eventlet/tpool.py\", line 80, in tworker\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/lib64/python2.7/site-packages/libvirt.py\", line 642, in blockCommit\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainBlockCommit() failed', dom=self)\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher libvirtError: Requested operation is not valid: domain is not running\n2015-07-06 09:33:00.479 TRACE oslo_messaging.rpc.dispatcher \n\n", 
            "date_created": "2015-07-06 09:48:43.774944+00:00", 
            "author": "https://api.launchpad.net/1.0/~dpkshetty"
        }, 
        {
            "content": "I have removed the \"nova\" tag because there is no subteam which watches this tag.", 
            "date_created": "2015-11-26 14:06:39.002471+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "To clarify, the volume should stay in-use when a VM is shutoff.\n\nCertainly seems like libvirt driver needs to check instance if instance is running before making the above call. Probably need to make sure we lock on the instance for the duration of the operation to make sure we don't hit races where the VM turns on half way through, etc.\n\nAnyways, assuming this still reproduces, it's worth a look still.", 
            "date_created": "2016-07-12 14:27:49.454947+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }
    ]
}