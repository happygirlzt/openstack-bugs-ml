{
    "status": "Invalid", 
    "last_updated": "2014-11-27 09:52:58.370881+00:00", 
    "description": "In the list instance usage audit logs XML response, the element <10-150-10-15>  in <log></log>  is against the XML schema.\nhttp://www.w3schools.com/xml/xml_elements.asp\nXML Naming Rules\nXML elements must follow these naming rules:\n\nNames can contain letters, numbers, and other characters\nNames cannot start with a number or punctuation character\nNames cannot start with the letters xml (or XML, or Xml, etc)\nNames cannot contain spaces\n\nSo if the hostname of the instance begin with number, punctuation character, etc,  the list usage audio logs response will be against the rule. \nWe either don't use host name as the element name or add a prefix before the host name for the tag. \n\n\n22:04:48 ======================================================================\n22:04:48 FAIL: tempest.api.compute.admin.test_instance_usage_audit_log.InstanceUsageAuditLogTestXML.test_list_instance_usage_audit_logs[gate]\n22:04:48 tempest.api.compute.admin.test_instance_usage_audit_log.InstanceUsageAuditLogTestXML.test_list_instance_usage_audit_logs[gate]\n22:04:48 ----------------------------------------------------------------------\n22:04:48 _StringException: Empty attachments:\n22:04:48   stderr\n22:04:48   stdout\n22:04:48 \n22:04:48 pythonlogging:'': {{{\n22:04:48 2013-12-05 07:31:08,331 Request: GET http://127.0.0.1:8774/v2/08aefd9fa58347028eec8e5969cdc26a/os-instance_usage_audit_log\n22:04:48 2013-12-05 07:31:08,332 Request Headers: {'Content-Type': 'application/xml', 'Accept': 'application/xml', 'X-Auth-Token': '<Token omitted>'}\n22:04:48 2013-12-05 07:31:08,791 Response Status: 200\n22:04:48 2013-12-05 07:31:08,792 Nova request id: req-d858e0ec-6047-4ecc-a81b-c5bcf99f3f87\n22:04:48 2013-12-05 07:31:08,792 Response Headers: {'content-length': '646', 'content-location': u'http://127.0.0.1:8774/v2/08aefd9fa58347028eec8e5969cdc26a/os-instance_usage_audit_log', 'date': 'Thu, 05 Dec 2013 13:31:08 GMT', 'content-type': 'application/xml', 'connection': 'close'}\n22:04:48 2013-12-05 07:31:08,792 Response Body: <instance_usage_audit_logs><total_errors>0</total_errors><total_instances>0</total_instances><log><10-150-10-15><instances>0</instances><message>Instance usage audit ran for host 10-150-10-15, 0 instances in 0.0541520118713 seconds.</message><errors>0</errors><state>DONE</state></10-150-10-15></log><num_hosts_running>0</num_hosts_running><num_hosts_done>1</num_hosts_done><num_hosts_not_run>0</num_hosts_not_run><hosts_not_run/><overall_status>ALL hosts done. 0 errors.</overall_status><period_ending>2013-12-05 13:00:00</period_ending><period_beginning>2013-12-05 12:00:00</period_beginning><num_hosts>1</num_hosts></instance_usage_audit_logs>\n22:04:48 }}}\n22:04:48 \n22:04:48 Traceback (most recent call last):\n22:04:48   File \"tempest/api/compute/admin/test_instance_usage_audit_log.py\", line 37, in test_list_instance_usage_audit_logs\n22:04:48     resp, body = self.adm_client.list_instance_usage_audit_logs()\n22:04:48   File \"tempest/services/compute/xml/instance_usage_audit_log_client.py\", line 34, in list_instance_usage_audit_logs\n22:04:48     instance_usage_audit_logs = xml_to_json(etree.fromstring(body))\n22:04:48   File \"lxml.etree.pyx\", line 2754, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54631)\n22:04:48   File \"parser.pxi\", line 1578, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82748)\n22:04:48   File \"parser.pxi\", line 1457, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:81546)\n22:04:48   File \"parser.pxi\", line 965, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:78216)\n22:04:48   File \"parser.pxi\", line 569, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:74472)\n22:04:48   File \"parser.pxi\", line 650, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:75363)\n22:04:48   File \"parser.pxi\", line 590, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74696)\n22:04:48 XMLSyntaxError: StartTag: invalid element name, line 1, column 71\n22:04:48 \n22:04:48 \n22:04:48 ======================================================================\n22:04:48 FAIL: process-returncode\n22:04:48 process-returncode\n22:04:48 ----------------------------------------------------------------------\n22:04:48 _StringException: Binary content:\n22:04:48   traceback (test/plain; charset=\"utf8\")\n22:04:48", 
    "tags": [
        "api", 
        "testing"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1258376", 
    "owner": "None", 
    "id": 1258376, 
    "index": 4368, 
    "created": "2013-12-06 03:53:01.028206+00:00", 
    "title": "Tempest test_list_instance_usage_audit_logs fails if the hostname of the instance begins with a number", 
    "comments": [
        {
            "content": "In the list instance usage audit logs XML response, the element <10-150-10-15>  in <log></log>  is against the XML schema.\nhttp://www.w3schools.com/xml/xml_elements.asp\nXML Naming Rules\nXML elements must follow these naming rules:\n\nNames can contain letters, numbers, and other characters\nNames cannot start with a number or punctuation character\nNames cannot start with the letters xml (or XML, or Xml, etc)\nNames cannot contain spaces\n\nSo if the hostname of the instance begin with number, punctuation character, etc,  the list usage audio logs response will be against the rule. \nWe either don't use host name as the element name or add a prefix before the host name for the tag. \n\n\n22:04:48 ======================================================================\n22:04:48 FAIL: tempest.api.compute.admin.test_instance_usage_audit_log.InstanceUsageAuditLogTestXML.test_list_instance_usage_audit_logs[gate]\n22:04:48 tempest.api.compute.admin.test_instance_usage_audit_log.InstanceUsageAuditLogTestXML.test_list_instance_usage_audit_logs[gate]\n22:04:48 ----------------------------------------------------------------------\n22:04:48 _StringException: Empty attachments:\n22:04:48   stderr\n22:04:48   stdout\n22:04:48 \n22:04:48 pythonlogging:'': {{{\n22:04:48 2013-12-05 07:31:08,331 Request: GET http://127.0.0.1:8774/v2/08aefd9fa58347028eec8e5969cdc26a/os-instance_usage_audit_log\n22:04:48 2013-12-05 07:31:08,332 Request Headers: {'Content-Type': 'application/xml', 'Accept': 'application/xml', 'X-Auth-Token': '<Token omitted>'}\n22:04:48 2013-12-05 07:31:08,791 Response Status: 200\n22:04:48 2013-12-05 07:31:08,792 Nova request id: req-d858e0ec-6047-4ecc-a81b-c5bcf99f3f87\n22:04:48 2013-12-05 07:31:08,792 Response Headers: {'content-length': '646', 'content-location': u'http://127.0.0.1:8774/v2/08aefd9fa58347028eec8e5969cdc26a/os-instance_usage_audit_log', 'date': 'Thu, 05 Dec 2013 13:31:08 GMT', 'content-type': 'application/xml', 'connection': 'close'}\n22:04:48 2013-12-05 07:31:08,792 Response Body: <instance_usage_audit_logs><total_errors>0</total_errors><total_instances>0</total_instances><log><10-150-10-15><instances>0</instances><message>Instance usage audit ran for host 10-150-10-15, 0 instances in 0.0541520118713 seconds.</message><errors>0</errors><state>DONE</state></10-150-10-15></log><num_hosts_running>0</num_hosts_running><num_hosts_done>1</num_hosts_done><num_hosts_not_run>0</num_hosts_not_run><hosts_not_run/><overall_status>ALL hosts done. 0 errors.</overall_status><period_ending>2013-12-05 13:00:00</period_ending><period_beginning>2013-12-05 12:00:00</period_beginning><num_hosts>1</num_hosts></instance_usage_audit_logs>\n22:04:48 }}}\n22:04:48 \n22:04:48 Traceback (most recent call last):\n22:04:48   File \"tempest/api/compute/admin/test_instance_usage_audit_log.py\", line 37, in test_list_instance_usage_audit_logs\n22:04:48     resp, body = self.adm_client.list_instance_usage_audit_logs()\n22:04:48   File \"tempest/services/compute/xml/instance_usage_audit_log_client.py\", line 34, in list_instance_usage_audit_logs\n22:04:48     instance_usage_audit_logs = xml_to_json(etree.fromstring(body))\n22:04:48   File \"lxml.etree.pyx\", line 2754, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54631)\n22:04:48   File \"parser.pxi\", line 1578, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82748)\n22:04:48   File \"parser.pxi\", line 1457, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:81546)\n22:04:48   File \"parser.pxi\", line 965, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:78216)\n22:04:48   File \"parser.pxi\", line 569, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:74472)\n22:04:48   File \"parser.pxi\", line 650, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:75363)\n22:04:48   File \"parser.pxi\", line 590, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74696)\n22:04:48 XMLSyntaxError: StartTag: invalid element name, line 1, column 71\n22:04:48 \n22:04:48 \n22:04:48 ======================================================================\n22:04:48 FAIL: process-returncode\n22:04:48 process-returncode\n22:04:48 ----------------------------------------------------------------------\n22:04:48 _StringException: Binary content:\n22:04:48   traceback (test/plain; charset=\"utf8\")\n22:04:48", 
            "date_created": "2013-12-06 03:53:01.028206+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhaoxinyu"
        }, 
        {
            "content": "One correction: it is not the hostname of instance but hostname of the compute node. ", 
            "date_created": "2013-12-09 19:59:43.206766+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhaoxinyu"
        }, 
        {
            "content": "Is this failing in the community check/gate queues or in your own internal out-of-tree tempest run?", 
            "date_created": "2014-01-27 23:49:36.906603+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Hmm, maybe we need to escape the name somehow, not sure how to fix this in a backwards compatible way.\n\nI would like to know the answer to mriedem's question, so lets call this incomplete.", 
            "date_created": "2014-02-07 18:40:04.014930+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "To mriedem\nIt is on our own test cloud and that's why we were able to have nodes named by numbers, which community test slaves wouldn't come across. \n", 
            "date_created": "2014-05-10 03:50:59.091669+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhaoxinyu"
        }, 
        {
            "content": "this sounds like its related to tempest", 
            "date_created": "2014-11-07 09:50:40.953689+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Now its kinda invalid.\n\nAs Nova XML support is not valid for K,  Tempest has removed the XML testing support - https://review.openstack.org/#/c/136792/\n\nML thread - http://lists.openstack.org/pipermail/openstack-dev/2014-November/051384.html ", 
            "date_created": "2014-11-27 09:52:45.567728+00:00", 
            "author": "https://api.launchpad.net/1.0/~ghanshyammann"
        }
    ]
}