{
    "status": "Invalid", 
    "last_updated": "2014-09-17 12:59:34.220822+00:00", 
    "description": "Sometimes this error appears in n-cpu, making the builds fail:\n\nERROR nova.virt.xenapi.vm_utils [req-1 demo demo] [instance-1] Failed to fetch glance image\nTRACE nova.virt.xenapi.vm_utils [instance-1] Traceback (most recent call last):\nTRACE nova.virt.xenapi.vm_utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.virt.xenapi.vm_utils [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.virt.xenapi.vm_utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.virt.xenapi.vm_utils [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.virt.xenapi.vm_utils [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.virt.xenapi.vm_utils [instance-1] \nERROR nova.utils [req-1 demo demo] [instance-1] Failed to spawn, rolling back\nTRACE nova.utils [instance-1] Traceback (most recent call last):\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 497, in spawn\nTRACE nova.utils [instance-1]     vdis = create_disks_step(undo_mgr, disk_image_type, image_meta)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 153, in inner\nTRACE nova.utils [instance-1]     rv = f(*args, **kwargs)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 377, in create_disks_step\nTRACE nova.utils [instance-1]     block_device_info=block_device_info)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 348, in _create_disks\nTRACE nova.utils [instance-1]     block_device_info=block_device_info)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 540, in get_vdis_for_instance\nTRACE nova.utils [instance-1]     context, session, instance, name_label, image, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1119, in _create_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1062, in _create_cached_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1142, in _fetch_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.utils [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.utils [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.utils [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.utils [instance-1] \nERROR nova.compute.manager [req-1 demo demo] [instance-1] Instance failed to spawn\nTRACE nova.compute.manager [instance-1] Traceback (most recent call last):\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/compute/manager.py\", line 1286, in _spawn\nTRACE nova.compute.manager [instance-1]     block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/driver.py\", line 180, in spawn\nTRACE nova.compute.manager [instance-1]     admin_password, network_info, block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 514, in spawn\nTRACE nova.compute.manager [instance-1]     undo_mgr.rollback_and_reraise(msg=msg, instance=instance)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/utils.py\", line 981, in rollback_and_reraise\nTRACE nova.compute.manager [instance-1]     self._rollback()\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 497, in spawn\nTRACE nova.compute.manager [instance-1]     vdis = create_disks_step(undo_mgr, disk_image_type, image_meta)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 153, in inner\nTRACE nova.compute.manager [instance-1]     rv = f(*args, **kwargs)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 377, in create_disks_step\nTRACE nova.compute.manager [instance-1]     block_device_info=block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 348, in _create_disks\nTRACE nova.compute.manager [instance-1]     block_device_info=block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 540, in get_vdis_for_instance\nTRACE nova.compute.manager [instance-1]     context, session, instance, name_label, image, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1119, in _create_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1062, in _create_cached_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1142, in _fetch_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.compute.manager [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.compute.manager [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.compute.manager [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.compute.manager [instance-1]", 
    "tags": [
        "xenserver"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1218251", 
    "owner": "None", 
    "id": 1218251, 
    "index": 5855, 
    "created": "2013-08-29 09:07:07.627012+00:00", 
    "title": "xenapi: permission denied on block device", 
    "comments": [
        {
            "content": "Sometimes this error appears in n-cpu, making the builds fail:\n\nERROR nova.virt.xenapi.vm_utils [req-1 demo demo] [instance-1] Failed to fetch glance image\nTRACE nova.virt.xenapi.vm_utils [instance-1] Traceback (most recent call last):\nTRACE nova.virt.xenapi.vm_utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.virt.xenapi.vm_utils [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.virt.xenapi.vm_utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.virt.xenapi.vm_utils [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.virt.xenapi.vm_utils [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.virt.xenapi.vm_utils [instance-1] \nERROR nova.utils [req-1 demo demo] [instance-1] Failed to spawn, rolling back\nTRACE nova.utils [instance-1] Traceback (most recent call last):\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 497, in spawn\nTRACE nova.utils [instance-1]     vdis = create_disks_step(undo_mgr, disk_image_type, image_meta)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 153, in inner\nTRACE nova.utils [instance-1]     rv = f(*args, **kwargs)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 377, in create_disks_step\nTRACE nova.utils [instance-1]     block_device_info=block_device_info)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 348, in _create_disks\nTRACE nova.utils [instance-1]     block_device_info=block_device_info)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 540, in get_vdis_for_instance\nTRACE nova.utils [instance-1]     context, session, instance, name_label, image, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1119, in _create_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1062, in _create_cached_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1142, in _fetch_image\nTRACE nova.utils [instance-1]     image_id, image_type)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.utils [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.utils [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.utils [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.utils [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.utils [instance-1] \nERROR nova.compute.manager [req-1 demo demo] [instance-1] Instance failed to spawn\nTRACE nova.compute.manager [instance-1] Traceback (most recent call last):\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/compute/manager.py\", line 1286, in _spawn\nTRACE nova.compute.manager [instance-1]     block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/driver.py\", line 180, in spawn\nTRACE nova.compute.manager [instance-1]     admin_password, network_info, block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 514, in spawn\nTRACE nova.compute.manager [instance-1]     undo_mgr.rollback_and_reraise(msg=msg, instance=instance)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/utils.py\", line 981, in rollback_and_reraise\nTRACE nova.compute.manager [instance-1]     self._rollback()\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 497, in spawn\nTRACE nova.compute.manager [instance-1]     vdis = create_disks_step(undo_mgr, disk_image_type, image_meta)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 153, in inner\nTRACE nova.compute.manager [instance-1]     rv = f(*args, **kwargs)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 377, in create_disks_step\nTRACE nova.compute.manager [instance-1]     block_device_info=block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vmops.py\", line 348, in _create_disks\nTRACE nova.compute.manager [instance-1]     block_device_info=block_device_info)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 540, in get_vdis_for_instance\nTRACE nova.compute.manager [instance-1]     context, session, instance, name_label, image, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1119, in _create_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1062, in _create_cached_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1142, in _fetch_image\nTRACE nova.compute.manager [instance-1]     image_id, image_type)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 1344, in _fetch_disk_image\nTRACE nova.compute.manager [instance-1]     session, image.stream_to, image_type, virtual_size, dev)\nTRACE nova.compute.manager [instance-1]   File \"/opt/stack/nova/nova/virt/xenapi/vm_utils.py\", line 2011, in _stream_disk\nTRACE nova.compute.manager [instance-1]     with open(dev_path, 'wb') as f:\nTRACE nova.compute.manager [instance-1] IOError: [Errno 13] Permission denied: '/dev/xvdd'\nTRACE nova.compute.manager [instance-1]", 
            "date_created": "2013-08-29 09:07:07.627012+00:00", 
            "author": "https://api.launchpad.net/1.0/~mate-lakat"
        }, 
        {
            "content": "Added this rule, will see if it helps:\n\n $ cat /etc/udev/rules.d/50-udev.rules\n KERNEL==\"xvd[a-z]\", GROUP=\"stack\", MODE=\"0660\"", 
            "date_created": "2013-08-29 09:14:36.907272+00:00", 
            "author": "https://api.launchpad.net/1.0/~mate-lakat"
        }, 
        {
            "content": "Can you specify the type of image used?\n\nI assume this is with a RAW or similar?", 
            "date_created": "2013-09-04 11:33:09.856016+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "It was a 3 part image.", 
            "date_created": "2013-09-04 14:06:49.760787+00:00", 
            "author": "https://api.launchpad.net/1.0/~mate-lakat"
        }, 
        {
            "content": "Seems like an environment issue.\n\n@mate-lakat did your fix work?", 
            "date_created": "2014-03-07 17:22:15.553677+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }
    ]
}