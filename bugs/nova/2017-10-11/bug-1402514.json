{
    "status": "Opinion", 
    "last_updated": "2016-05-18 15:09:29.791952+00:00", 
    "description": "Nova client command supports --all-tenants (http://docs.openstack.org/cli-reference/content/novaclient_commands.html) but Nova API service doesn't support it even for Admin.\nHere is an example:\n\nstack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc-user  # user: demo\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-create\n+------------+-----------+----------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+----------+---------+\n| 192.0.2.49 | - | - | ext-net |\n+------------+-----------+----------+---------+\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\n+------------+-----------+------------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+------------+---------+\n| 192.0.2.46 | - | 172.16.0.6 | ext-net |\n| 192.0.2.49 | - | - | ext-net |\n+------------+-----------+------------+---------+\nstack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc  # admin\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\n+------------+-----------+----------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+----------+---------+\n| 192.0.2.48 | - | - | ext-net |\n+------------+-----------+----------+---------+\n\nThis impacts Congress Nova Driver to populate Floating IPs (https://bugs.launchpad.net/congress/+bug/1376462).", 
    "tags": [
        "api"
    ], 
    "importance": "Wishlist", 
    "heat": 24, 
    "link": "https://bugs.launchpad.net/nova/+bug/1402514", 
    "owner": "https://api.launchpad.net/1.0/~notartom", 
    "id": 1402514, 
    "index": 1647, 
    "created": "2014-12-15 07:08:20.715929+00:00", 
    "title": "Nova API os-floating-ips doesn't support all_tenants", 
    "comments": [
        {
            "content": "Nova client command supports --all-tenants (http://docs.openstack.org/cli-reference/content/novaclient_commands.html) but Nova API service doesn't support it even for Admin.\nHere is an example:\n\nstack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc-user  # user: demo\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-create\n+------------+-----------+----------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+----------+---------+\n| 192.0.2.49 | - | - | ext-net |\n+------------+-----------+----------+---------+\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\n+------------+-----------+------------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+------------+---------+\n| 192.0.2.46 | - | 172.16.0.6 | ext-net |\n| 192.0.2.49 | - | - | ext-net |\n+------------+-----------+------------+---------+\nstack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc  # admin\nstack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\n+------------+-----------+----------+---------+\n| Ip | Server Id | Fixed Ip | Pool |\n+------------+-----------+----------+---------+\n| 192.0.2.48 | - | - | ext-net |\n+------------+-----------+----------+---------+\n\nThis impacts Congress Nova Driver to populate Floating IPs (https://bugs.launchpad.net/congress/+bug/1376462).", 
            "date_created": "2014-12-15 07:08:20.715929+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhenzan-zhou"
        }, 
        {
            "content": "Hi,\nCan you please provide more information on how to reproduce this bug as I am unable to reproduce it on my side.\nBelow is my log how I tried to reproduce the bug. I tried reproducing with \"remotes/origin/stable/icehouse\" and \"master\" branches.\n\n1) I created two tenants REMEMBER and TISS and created two users rem and tiss under these tenants respectively.\n\n2) I logged in as \"rem\" user and created a floating ip and after listing with --all-tenants option, it listed the created floating ip\n\n3) I logged in as \"tiss\" user and created a floating ip and after listing with --all-tenants option, its showing the floating ip that is created only under this particular user. \n\nIt is not showing all tenants floating ip list\n\n4) Where as with admin , its showing an empty list with --all-tenants\n\n\n======================================================================\n\n\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc rem REMEMBER\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-create \n+-------------+-----------+----------+--------+\n| Ip          | Server Id | Fixed Ip | Pool   |\n+-------------+-----------+----------+--------+\n| 172.24.4.10 | -         | -        | public |\n+-------------+-----------+----------+--------+\n\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \n+-------------+-----------+----------+--------+\n| Ip          | Server Id | Fixed Ip | Pool   |\n+-------------+-----------+----------+--------+\n| 172.24.4.10 | -         | -        | public |\n+-------------+-----------+----------+--------+\n\n\n=====================================================================\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc tiss TISS\n\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-create \n+------------+-----------+----------+--------+\n| Ip         | Server Id | Fixed Ip | Pool   |\n+------------+-----------+----------+--------+\n| 172.24.4.9 | -         | -        | public |\n+------------+-----------+----------+--------+\n\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \n+------------+-----------+----------+--------+\n| Ip         | Server Id | Fixed Ip | Pool   |\n+------------+-----------+----------+--------+\n| 172.24.4.9 | -         | -        | public |\n+------------+-----------+----------+--------+\n\n\n==================================================================\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc admin admin \nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ \nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ \nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \n+----+-----------+----------+------+\n| Ip | Server Id | Fixed Ip | Pool |\n+----+-----------+----------+------+\n+----+-----------+----------+------+\n\n", 
            "date_created": "2015-01-06 07:05:09.666267+00:00", 
            "author": "https://api.launchpad.net/1.0/~c-sireesha"
        }, 
        {
            "content": "Hi, \r\n\r\nYour logs show that you has already reproduced the bug. \r\nFor non admin users, it's ok to only show floating ips he created. But  for admin, we hope to get all floating ips.\r\n\r\nBR\r\nZhou Zhenzan\r\n\r\n-----Original Message-----\r\nFrom: <email address hidden> [mailto:<email address hidden>] On Behalf Of sireesha chintada\r\nSent: Tuesday, January 6, 2015 3:05 PM\r\nTo: Zhou, Zhenzan\r\nSubject: [Bug 1402514] Re: Nova API os-floating-ips doesn't support all_tenants\r\n\r\nHi,\r\nCan you please provide more information on how to reproduce this bug as I am unable to reproduce it on my side.\r\nBelow is my log how I tried to reproduce the bug. I tried reproducing with \"remotes/origin/stable/icehouse\" and \"master\" branches.\r\n\r\n1) I created two tenants REMEMBER and TISS and created two users rem and tiss under these tenants respectively.\r\n\r\n2) I logged in as \"rem\" user and created a floating ip and after listing with --all-tenants option, it listed the created floating ip\r\n\r\n3) I logged in as \"tiss\" user and created a floating ip and after listing with --all-tenants option, its showing the floating ip that is created only under this particular user.\r\n\r\nIt is not showing all tenants floating ip list\r\n\r\n4) Where as with admin , its showing an empty list with --all-tenants\r\n\r\n\r\n======================================================================\r\n\r\n\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc rem REMEMBER ubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-create \r\n+-------------+-----------+----------+--------+\r\n| Ip          | Server Id | Fixed Ip | Pool   |\r\n+-------------+-----------+----------+--------+\r\n| 172.24.4.10 | -         | -        | public |\r\n+-------------+-----------+----------+--------+\r\n\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \r\n+-------------+-----------+----------+--------+\r\n| Ip          | Server Id | Fixed Ip | Pool   |\r\n+-------------+-----------+----------+--------+\r\n| 172.24.4.10 | -         | -        | public |\r\n+-------------+-----------+----------+--------+\r\n\r\n\r\n=====================================================================\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc tiss TISS\r\n\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-create \r\n+------------+-----------+----------+--------+\r\n| Ip         | Server Id | Fixed Ip | Pool   |\r\n+------------+-----------+----------+--------+\r\n| 172.24.4.9 | -         | -        | public |\r\n+------------+-----------+----------+--------+\r\n\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \r\n+------------+-----------+----------+--------+\r\n| Ip         | Server Id | Fixed Ip | Pool   |\r\n+------------+-----------+----------+--------+\r\n| 172.24.4.9 | -         | -        | public |\r\n+------------+-----------+----------+--------+\r\n\r\n\r\n==================================================================\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ source openrc admin admin ubuntu@ubuntu-ThinkCentre-M92p:~/devstack$\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$\r\nubuntu@ubuntu-ThinkCentre-M92p:~/devstack$ nova floating-ip-list --all-tenants \r\n+----+-----------+----------+------+\r\n| Ip | Server Id | Fixed Ip | Pool |\r\n+----+-----------+----------+------+\r\n+----+-----------+----------+------+\r\n\r\n--\r\nYou received this bug notification because you are subscribed to the bug report.\r\nhttps://bugs.launchpad.net/bugs/1402514\r\n\r\nTitle:\r\n  Nova API os-floating-ips doesn't support all_tenants\r\n\r\nStatus in OpenStack Compute (Nova):\r\n  New\r\n\r\nBug description:\r\n  Nova client command supports --all-tenants (http://docs.openstack.org/cli-reference/content/novaclient_commands.html) but Nova API service doesn't support it even for Admin.\r\n  Here is an example:\r\n\r\n  stack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc-user  # user: demo\r\n  stack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-create\r\n  +------------+-----------+----------+---------+\r\n  | Ip | Server Id | Fixed Ip | Pool |\r\n  +------------+-----------+----------+---------+\r\n  | 192.0.2.49 | - | - | ext-net |\r\n  +------------+-----------+----------+---------+\r\n  stack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\r\n  +------------+-----------+------------+---------+\r\n  | Ip | Server Id | Fixed Ip | Pool |\r\n  +------------+-----------+------------+---------+\r\n  | 192.0.2.46 | - | 172.16.0.6 | ext-net |\r\n  | 192.0.2.49 | - | - | ext-net |\r\n  +------------+-----------+------------+---------+\r\n  stack@stack-cnt11:~/workspace/python-congressclient$ . ../tripleo-incubator/overcloudrc  # admin\r\n  stack@stack-cnt11:~/workspace/python-congressclient$ nova floating-ip-list  --all-tenants\r\n  +------------+-----------+----------+---------+\r\n  | Ip | Server Id | Fixed Ip | Pool |\r\n  +------------+-----------+----------+---------+\r\n  | 192.0.2.48 | - | - | ext-net |\r\n  +------------+-----------+----------+---------+\r\n\r\n  This impacts Congress Nova Driver to populate Floating IPs\r\n  (https://bugs.launchpad.net/congress/+bug/1376462).\r\n\r\nTo manage notifications about this bug go to:\r\nhttps://bugs.launchpad.net/nova/+bug/1402514/+subscriptions\r\n", 
            "date_created": "2015-01-06 07:25:58+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhenzan-zhou"
        }, 
        {
            "content": "This sounds like a new API microversion", 
            "date_created": "2015-01-10 22:39:52.945914+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "To add to what Joe said:\n\nThis bug actually has a pretty long history. There was a bug filed [1] for Ceilometer to get floating IPs from all tenants. The all_tenants feature was merged into python-novaclient [2] and nova [3].\n\nThen there was some discussion about those changes on the mailing lists [4], and eventually the all_tenants feature was reverted out of nova [5] but apparently never reverted out of python-novaclient.\n\nSo this bug is actually an API change that should go through the nova-specs process.\n\n[1] https://bugs.launchpad.net/nova/+bug/1262124\n[2] https://review.openstack.org/#/c/83660\n[3] https://review.openstack.org/#/c/81429\n[4] http://lists.openstack.org/pipermail/openstack-dev/2014-June/037304.html\n[5] https://review.openstack.org/#/c/99938", 
            "date_created": "2015-02-04 21:37:18.704335+00:00", 
            "author": "https://api.launchpad.net/1.0/~notartom"
        }, 
        {
            "content": "Once the feature freeze is lifted I'll submit a fix/feature that support all_tenants.", 
            "date_created": "2015-02-20 15:36:30.597114+00:00", 
            "author": "https://api.launchpad.net/1.0/~notartom"
        }, 
        {
            "content": "This makes the ceilometer pollster unusable ...", 
            "date_created": "2015-12-22 00:49:11.512296+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-hill-ubisoft"
        }, 
        {
            "content": "This wishlist bug has been open a year without any activity. I'm going\nto move it to \"Opinion / Wishlist\", which is an easily-obtainable queue\nof older requests that have come on. If you decide to work on this\nconsider using a blueprint [1] (maybe with a spec [2]). I'll recommend to \nread [3] if not yet done. \n\nReferences:\n[1] https://blueprints.launchpad.net/nova/\n[2] https://github.com/openstack/nova-specs\n[3] https://wiki.openstack.org/wiki/Blueprints", 
            "date_created": "2016-05-18 15:09:28.365848+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ]
}