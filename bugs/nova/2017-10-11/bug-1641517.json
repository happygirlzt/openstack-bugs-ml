{
    "status": "Expired", 
    "last_updated": "2017-08-27 04:18:33.499238+00:00", 
    "description": "I have a environment of Newton in ubuntu16.04, every component that i install is ok ,\nthen i build a vm with spice proxy,the configurations in nova.conf like :\n\n[spice]\nenabled = True\nagent_enabled = True\nserver_listen = 0.0.0.0\nserver_proxyclient_address = $my_ip\nhtml5proxy_base_url = http://$my_ip:6082/spice_auto.html\n\nof course the console is also ok ,but when i want transfer some doc to vm from client usb, vm can't find the usb device\nthere is nothing about usb in vm.xml :\n\n<domain type='kvm' id='19'>\n  <name>instance-00000010</name>\n  <uuid>e465443f-32b6-4cb7-9e17-2aec45bac79f</uuid>\n  <metadata>\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\n      <nova:package version=\"14.0.1\"/>\n      <nova:name>ccc</nova:name>\n      <nova:creationTime>2016-11-11 09:23:24</nova:creationTime>\n      <nova:flavor name=\"micro\">\n        <nova:memory>256</nova:memory>\n        <nova:disk>1</nova:disk>\n        <nova:swap>0</nova:swap>\n        <nova:ephemeral>0</nova:ephemeral>\n        <nova:vcpus>1</nova:vcpus>\n      </nova:flavor>\n      <nova:owner>\n        <nova:user uuid=\"bca1c2494f9c4680931e7000500ce785\">admin</nova:user>\n        <nova:project uuid=\"8375cad45b8945838d86f4ebe5622bac\">admin</nova:project>\n      </nova:owner>\n      <nova:root type=\"image\" uuid=\"f45bcd7f-c774-425a-8aff-b14a4a065497\"/>\n    </nova:instance>\n  </metadata>\n  <memory unit='KiB'>262144</memory>\n  <currentMemory unit='KiB'>262144</currentMemory>\n  <vcpu placement='static'>1</vcpu>\n  <cputune>\n    <shares>1024</shares>\n  </cputune>\n  <resource>\n    <partition>/machine</partition>\n  </resource>\n  <sysinfo type='smbios'>\n    <system>\n      <entry name='manufacturer'>OpenStack Foundation</entry>\n      <entry name='product'>OpenStack Nova</entry>\n      <entry name='version'>14.0.1</entry>\n      <entry name='serial'>6a0225ac-4f57-329c-e89c-60965806fac3</entry>\n      <entry name='uuid'>e465443f-32b6-4cb7-9e17-2aec45bac79f</entry>\n      <entry name='family'>Virtual Machine</entry>\n    </system>\n  </sysinfo>\n  <os>\n    <type arch='x86_64' machine='pc-i440fx-xenial'>hvm</type>\n    <boot dev='hd'/>\n    <smbios mode='sysinfo'/>\n  </os>\n  <features>\n    <acpi/>\n    <apic/>\n  </features>\n  <cpu mode='host-model'>\n    <model fallback='allow'/>\n    <topology sockets='1' cores='1' threads='1'/>\n  </cpu>\n  <clock offset='utc'>\n    <timer name='pit' tickpolicy='delay'/>\n    <timer name='rtc' tickpolicy='catchup'/>\n    <timer name='hpet' present='no'/>\n  </clock>\n  <on_poweroff>destroy</on_poweroff>\n  <on_reboot>restart</on_reboot>\n  <on_crash>destroy</on_crash>\n  <devices>\n    <emulator>/usr/bin/kvm-spice</emulator>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='qcow2' cache='none'/>\n      <source file='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/disk'/>\n      <backingStore type='file' index='1'>\n        <format type='raw'/>\n        <source file='/var/lib/nova/instances/_base/69a052e8d9d9ac900d307dd36f4d5e5dc79e1365'/>\n        <backingStore/>\n      </backingStore>\n      <target dev='vda' bus='virtio'/>\n      <alias name='virtio-disk0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>\n    </disk>\n    <controller type='usb' index='0'>\n      <alias name='usb'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n    </controller>\n    <controller type='pci' index='0' model='pci-root'>\n      <alias name='pci.0'/>\n    </controller>\n    <controller type='virtio-serial' index='0'>\n      <alias name='virtio-serial0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n    </controller>\n    <interface type='bridge'>\n      <mac address='fa:16:3e:e2:56:4c'/>\n      <source bridge='brqc47a5070-9e'/>\n      <target dev='tap73ffa97f-f3'/>\n      <model type='virtio'/>\n      <alias name='net0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n    </interface>\n    <serial type='file'>\n      <source path='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/console.log'/>\n      <target port='0'/>\n      <alias name='serial0'/>\n    </serial>\n    <serial type='pty'>\n      <source path='/dev/pts/1'/>\n      <target port='1'/>\n      <alias name='serial1'/>\n    </serial>\n    <console type='file'>\n      <source path='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/console.log'/>\n      <target type='serial' port='0'/>\n      <alias name='serial0'/>\n    </console>\n    <channel type='pty'>\n      <source path='/dev/pts/2'/>\n      <target type='virtio' name='com.redhat.spice.0' state='disconnected'/>\n      <alias name='channel0'/>\n      <address type='virtio-serial' controller='0' bus='0' port='1'/>\n    </channel>\n    <input type='mouse' bus='ps2'/>\n    <input type='keyboard' bus='ps2'/>\n    <graphics type='spice' port='5900' autoport='yes' listen='0.0.0.0' keymap='en-us'>\n      <listen type='address' address='0.0.0.0'/>\n    </graphics>\n    <video>\n      <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'/>\n      <alias name='video0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\n    </video>\n    <memballoon model='virtio'>\n      <stats period='10'/>\n      <alias name='balloon0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>\n    </memballoon>\n  </devices>\n  <seclabel type='dynamic' model='apparmor' relabel='yes'>\n    <label>libvirt-e465443f-32b6-4cb7-9e17-2aec45bac79f</label>\n    <imagelabel>libvirt-e465443f-32b6-4cb7-9e17-2aec45bac79f</imagelabel>\n  </seclabel>\n</domain>", 
    "tags": [
        "openstack-version.newton"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1641517", 
    "owner": "None", 
    "id": 1641517, 
    "index": 6530, 
    "created": "2016-11-14 07:02:17.149616+00:00", 
    "title": "spice can't support usb redirection", 
    "comments": [
        {
            "content": "I have a environment of Newton in ubuntu16.04, every component that i install is ok ,\nthen i build a vm with spice proxy,the configurations in nova.conf like :\n\n[spice]\nenabled = True\nagent_enabled = True\nserver_listen = 0.0.0.0\nserver_proxyclient_address = $my_ip\nhtml5proxy_base_url = http://$my_ip:6082/spice_auto.html\n\nof course the console is also ok ,but when i want transfer some doc to vm from client usb, vm can't find the usb device\nthere is nothing about usb in vm.xml :\n\n<domain type='kvm' id='19'>\n  <name>instance-00000010</name>\n  <uuid>e465443f-32b6-4cb7-9e17-2aec45bac79f</uuid>\n  <metadata>\n    <nova:instance xmlns:nova=\"http://openstack.org/xmlns/libvirt/nova/1.0\">\n      <nova:package version=\"14.0.1\"/>\n      <nova:name>ccc</nova:name>\n      <nova:creationTime>2016-11-11 09:23:24</nova:creationTime>\n      <nova:flavor name=\"micro\">\n        <nova:memory>256</nova:memory>\n        <nova:disk>1</nova:disk>\n        <nova:swap>0</nova:swap>\n        <nova:ephemeral>0</nova:ephemeral>\n        <nova:vcpus>1</nova:vcpus>\n      </nova:flavor>\n      <nova:owner>\n        <nova:user uuid=\"bca1c2494f9c4680931e7000500ce785\">admin</nova:user>\n        <nova:project uuid=\"8375cad45b8945838d86f4ebe5622bac\">admin</nova:project>\n      </nova:owner>\n      <nova:root type=\"image\" uuid=\"f45bcd7f-c774-425a-8aff-b14a4a065497\"/>\n    </nova:instance>\n  </metadata>\n  <memory unit='KiB'>262144</memory>\n  <currentMemory unit='KiB'>262144</currentMemory>\n  <vcpu placement='static'>1</vcpu>\n  <cputune>\n    <shares>1024</shares>\n  </cputune>\n  <resource>\n    <partition>/machine</partition>\n  </resource>\n  <sysinfo type='smbios'>\n    <system>\n      <entry name='manufacturer'>OpenStack Foundation</entry>\n      <entry name='product'>OpenStack Nova</entry>\n      <entry name='version'>14.0.1</entry>\n      <entry name='serial'>6a0225ac-4f57-329c-e89c-60965806fac3</entry>\n      <entry name='uuid'>e465443f-32b6-4cb7-9e17-2aec45bac79f</entry>\n      <entry name='family'>Virtual Machine</entry>\n    </system>\n  </sysinfo>\n  <os>\n    <type arch='x86_64' machine='pc-i440fx-xenial'>hvm</type>\n    <boot dev='hd'/>\n    <smbios mode='sysinfo'/>\n  </os>\n  <features>\n    <acpi/>\n    <apic/>\n  </features>\n  <cpu mode='host-model'>\n    <model fallback='allow'/>\n    <topology sockets='1' cores='1' threads='1'/>\n  </cpu>\n  <clock offset='utc'>\n    <timer name='pit' tickpolicy='delay'/>\n    <timer name='rtc' tickpolicy='catchup'/>\n    <timer name='hpet' present='no'/>\n  </clock>\n  <on_poweroff>destroy</on_poweroff>\n  <on_reboot>restart</on_reboot>\n  <on_crash>destroy</on_crash>\n  <devices>\n    <emulator>/usr/bin/kvm-spice</emulator>\n    <disk type='file' device='disk'>\n      <driver name='qemu' type='qcow2' cache='none'/>\n      <source file='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/disk'/>\n      <backingStore type='file' index='1'>\n        <format type='raw'/>\n        <source file='/var/lib/nova/instances/_base/69a052e8d9d9ac900d307dd36f4d5e5dc79e1365'/>\n        <backingStore/>\n      </backingStore>\n      <target dev='vda' bus='virtio'/>\n      <alias name='virtio-disk0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>\n    </disk>\n    <controller type='usb' index='0'>\n      <alias name='usb'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n    </controller>\n    <controller type='pci' index='0' model='pci-root'>\n      <alias name='pci.0'/>\n    </controller>\n    <controller type='virtio-serial' index='0'>\n      <alias name='virtio-serial0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n    </controller>\n    <interface type='bridge'>\n      <mac address='fa:16:3e:e2:56:4c'/>\n      <source bridge='brqc47a5070-9e'/>\n      <target dev='tap73ffa97f-f3'/>\n      <model type='virtio'/>\n      <alias name='net0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n    </interface>\n    <serial type='file'>\n      <source path='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/console.log'/>\n      <target port='0'/>\n      <alias name='serial0'/>\n    </serial>\n    <serial type='pty'>\n      <source path='/dev/pts/1'/>\n      <target port='1'/>\n      <alias name='serial1'/>\n    </serial>\n    <console type='file'>\n      <source path='/var/lib/nova/instances/e465443f-32b6-4cb7-9e17-2aec45bac79f/console.log'/>\n      <target type='serial' port='0'/>\n      <alias name='serial0'/>\n    </console>\n    <channel type='pty'>\n      <source path='/dev/pts/2'/>\n      <target type='virtio' name='com.redhat.spice.0' state='disconnected'/>\n      <alias name='channel0'/>\n      <address type='virtio-serial' controller='0' bus='0' port='1'/>\n    </channel>\n    <input type='mouse' bus='ps2'/>\n    <input type='keyboard' bus='ps2'/>\n    <graphics type='spice' port='5900' autoport='yes' listen='0.0.0.0' keymap='en-us'>\n      <listen type='address' address='0.0.0.0'/>\n    </graphics>\n    <video>\n      <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'/>\n      <alias name='video0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\n    </video>\n    <memballoon model='virtio'>\n      <stats period='10'/>\n      <alias name='balloon0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>\n    </memballoon>\n  </devices>\n  <seclabel type='dynamic' model='apparmor' relabel='yes'>\n    <label>libvirt-e465443f-32b6-4cb7-9e17-2aec45bac79f</label>\n    <imagelabel>libvirt-e465443f-32b6-4cb7-9e17-2aec45bac79f</imagelabel>\n  </seclabel>\n</domain>", 
            "date_created": "2016-11-14 07:02:17.149616+00:00", 
            "author": "https://api.launchpad.net/1.0/~jeery"
        }, 
        {
            "content": "Fix proposed to branch: stable/newton\nReview: https://review.openstack.org/397635", 
            "date_created": "2016-11-15 09:57:34.290010+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Do you see warnings in the nova-compute logs when creating the guest?\n\nWhat do you have set for the use_usb_tablet and pointer_model config options?\n\nWhat is the libvirt.virt_type value in your nova.conf?\n\nSee the config docs for more information on those options:\n\nhttp://docs.openstack.org/developer/nova/sample_config.html", 
            "date_created": "2016-11-16 16:43:52.162266+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "sorry ,i think i didn't describe it clearly, the virt_type is kvm, and a parameter usbredir_channels is added in nova.conf after spice section, my total nova.conf like this:\n\n[DEFAULT]\ndhcpbridge_flagfile=/etc/nova/nova.conf\ndhcpbridge=/usr/bin/nova-dhcpbridge\nlog-dir=/var/log/nova\nstate_path=/var/lib/nova\nforce_dhcp_release=True\nverbose=True\nec2_private_dns_show_ip=True\nenabled_apis=osapi_compute,metadata\n\ntransport_url = rabbit://openstack:RABBIT_PASS@newtu\nauth_strategy = keystone\nmy_ip=192.168.178.24\nuse_neutron = True\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\n\n[vnc]\nenabled = False\nvncserver_listen = 0.0.0.0\nvncserver_proxyclient_address = $my_ip\nnovncproxy_base_url = http://$my_ip:6080/vnc_auto.html\n\n[spice]\nenabled = True\nagent_enabled = True\nserver_listen = 0.0.0.0\nserver_proxyclient_address = $my_ip\nhtml5proxy_base_url = http://$my_ip:6082/spice_auto.html\nusbredir_channels = 4\n\n[database]\nconnection = mysql+pymysql://nova:NOVA_DBPASS@newtu/nova\n\n[api_database]\nconnection = mysql+pymysql://nova:NOVA_DBPASS@newtu/nova_api\n\n[oslo_concurrency]\nlock_path=/var/lock/nova/tmp\n\n[libvirt]\nuse_virtio_for_bridges=True\n\n[wsgi]\napi_paste_config=/etc/nova/api-paste.ini\n\n[keystone_authtoken]\nauth_uri = http://newtu:5000\nauth_url = http://newtu:35357\nmemcached_servers = newtu:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = nova\npassword = nova\n\n[glance]\napi_servers = http://newtu:9292\n\n[neutron]\nurl = http://newtu:9696\nauth_url = http://newtu:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = neutron\nservice_metadata_proxy = True\nmetadata_proxy_shared_secret = METADATA_SECRET\n\n[cinder]\nos_region_name = RegionOne \n\nthen, in the VM's XML i can find usb channels :\n\n    <redirdev bus='usb' type='spicevmc'>\n      <alias name='redir0'/>\n    </redirdev>\n    <redirdev bus='usb' type='spicevmc'>\n      <alias name='redir1'/>\n    </redirdev>\n    <redirdev bus='usb' type='spicevmc'>\n      <alias name='redir2'/>\n    </redirdev>\n    <redirdev bus='usb' type='spicevmc'>\n      <alias name='redir3'/>\n    </redirdev>", 
            "date_created": "2016-11-21 02:17:28.789774+00:00", 
            "author": "https://api.launchpad.net/1.0/~jeery"
        }, 
        {
            "content": "Change abandoned by Lee Yarwood (<email address hidden>) on branch: stable/newton\nReview: https://review.openstack.org/397635\nReason: Abandoning this review given it is not suitable for stable/newton and has not been touched for a few weeks.", 
            "date_created": "2016-12-12 16:24:23.963582+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Automatically discovered version newton in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 16:03:43.687504+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2017-08-27 04:18:29.750627+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }
    ]
}