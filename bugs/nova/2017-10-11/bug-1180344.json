{
    "status": "Fix Released", 
    "last_updated": "2014-03-21 11:19:28.920557+00:00", 
    "description": "the api can work well against english parameter\n\nbut when send non-english parameters to the api, the api doesn't work\nhttp://127.0.0.1:8774/v2/4856cc519c5543c4b70e6b4cceab9cb1/servers\n\nBody\n\n{\"server\": {\"min_count\": 1, \"flavorRef\": \"1\", \"name\": \"\u6982\u5ff5\", \"imageRef\": \"10bab10c-1304-47db-b5b0-24c735eddc70\", \"max_count\": 1}}\n\nResponse\n\n\u00a0\u00a0\u00a0\u00a0<computeFault code=\"500\" xmlns=\"http://docs.openstack.org/compute/api/v1.1\">\n\u00a0\u00a0\u00a0\u00a0<message>The server has either erred or is incapable of performing the requested operation.</message>\n\u00a0\u00a0\u00a0\u00a0</computeFault>\n\nin /var/log/nova/api.log, can see\nERROR [nova.api.openstack] Caught error: 'ascii' codec can't decode byte 0xe4 in position 55: ordinal not in range(128)\nTraceback (most recent call last):\n  File \"/opt/stack-havana/nova/nova/api/openstack/__init__.py\", line 81, in __call__\n    return req.get_response(self.application)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1053, in get_response\n    application, catch_exc_info=False)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1022, in call_application\n    app_iter = application(self.environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/opt/stack-havana/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 451, in __call__\n    return self.app(env, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n    response = self.app(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 159, in __call__\n    return resp(environ, start_response)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 147, in __call__\n    resp = self.call_func(req, *args, **self.kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 208, in call_func\n    return self.func(req, *args, **kwargs)\n  File \"/opt/stack-havana/nova/nova/api/openstack/wsgi.py\", line 899, in __call__\n    content_type, body, accept)\n  File \"/opt/stack-havana/nova/nova/api/openstack/wsgi.py\", line 919, in _process_stack\n    LOG.debug(_(\"Action: '%(action)s', body: %(body)s\") % locals())\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe4 in position 55: ordinal not in range(128)", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1180344", 
    "owner": "https://api.launchpad.net/1.0/~kanaderohan", 
    "id": 1180344, 
    "index": 3658, 
    "created": "2013-05-15 11:07:56.442583+00:00", 
    "title": "the api doesn't work when send non-english parameters to the api", 
    "comments": [
        {
            "content": "the api can work well against english parameter\nPOST http://9.125.13.210:8774/v2/27bd80c020a747b0a012e30641a3facc/servers/c7a3971c-e6fc-4d76-9cbe-e1107decce9c/action\n\n{\n    \"rebuild\" : {\n        \"imageRef\" : \"736fc9f2-fd62-4730-a5fb-1199535c8406\",\n        \"name\" : \"test123\",\n        \"adminPass\" : \"123\",\n        \"accessIPv4\" : \"1.2.3.4\",\n        \"accessIPv6\" : \"fe80::100\",\n        \"metadata\" : {\n            \"meta var\" : \"meta val\"\n        },\n        \"personality\" : [\n            {\n                \"path\" : \"/etc/banner.txt\",\n                \"contents\" : \"ICAgICAgDQoiQSBjbG91ZCBkb2VzIG5vdCBrbm93IHdoeSBp dCBtb3ZlcyBpbiBqdXN0IHN1Y2ggYSBkaXJlY3Rpb24gYW5k IGF0IHN1Y2ggYSBzcGVlZC4uLkl0IGZlZWxzIGFuIGltcHVs c2lvbi4uLnRoaXMgaXMgdGhlIHBsYWNlIHRvIGdvIG5vdy4g QnV0IHRoZSBza3kga25vd3MgdGhlIHJlYXNvbnMgYW5kIHRo ZSBwYXR0ZXJucyBiZWhpbmQgYWxsIGNsb3VkcywgYW5kIHlv dSB3aWxsIGtub3csIHRvbywgd2hlbiB5b3UgbGlmdCB5b3Vy c2VsZiBoaWdoIGVub3VnaCB0byBzZWUgYmV5b25kIGhvcml6 b25zLiINCg0KLVJpY2hhcmQgQmFjaA==\"\n            }\n        ]\n    }\n}\n\nResponse\n\n  <?xml version='1.0' encoding='UTF-8'?>\n    <server xmlns:OS-DCF=\"http://docs.openstack.org/compute/ext/disk_config/api/v1.1\" xmlns:atom=\"http://www.w3.org/2005/Atom\" xmlns=\"http://docs.openstack.org/compute/api/v1.1\" status=\"REBUILD\" updated=\"2013-04-17T07:35:41Z\" hostId=\"30492f3545767207f30e7ff8b8e24eedf443a7a5c022faec79a4b6e6\" name=\"test123\" created=\"2013-04-12T15:08:16Z\" userId=\"6b6ed46d9e1c42db921f821bd3e884bb\" tenantId=\"27bd80c020a747b0a012e30641a3facc\" accessIPv4=\"1.2.3.4\" accessIPv6=\"fe80::100\" progress=\"0\" id=\"c7a3971c-e6fc-4d76-9cbe-e1107decce9c\" adminPass=\"123\" OS-DCF:diskConfig=\"MANUAL\">\n    <image id=\"736fc9f2-fd62-4730-a5fb-1199535c8406\">\n    <atom:link href=\"http://9.125.13.210:8774/27bd80c020a747b0a012e30641a3facc/images/736fc9f2-fd62-4730-a5fb-1199535c8406\" rel=\"bookmark\"/>\n    </image>\n    <flavor id=\"2\">\n    <atom:link href=\"http://9.125.13.210:8774/27bd80c020a747b0a012e30641a3facc/flavors/2\" rel=\"bookmark\"/>\n    </flavor>\n    <metadata>\n    <meta key=\"meta var\">meta val</meta>\n    </metadata>\n    <addresses>\n    <network id=\"updated_name3\">\n    <ip version=\"4\" addr=\"10.0.3.162\"/>\n    </network>\n    <network id=\"updated_name1\"/>\n    <network id=\"\u901a\u20ac\u3400\u1820\ua007\u0f10\u0628\u0629\u32a3\"/>\n    <network id=\"\u6d4b\u8bd5\"/>\n    <network id=\"\u4e2d\u56fd\"/>\n    <network id=\"updated_name\"/>\n    <network id=\"network1\">\n    <ip version=\"4\" addr=\"10.0.1.12\"/>\n    </network>\n    </addresses>\n    <atom:link href=\"http://9.125.13.210:8774/v2/27bd80c020a747b0a012e30641a3facc/servers/c7a3971c-e6fc-4d76-9cbe-e1107decce9c\" rel=\"self\"/>\n    <atom:link href=\"http://9.125.13.210:8774/27bd80c020a747b0a012e30641a3facc/servers/c7a3971c-e6fc-4d76-9cbe-e1107decce9c\" rel=\"bookmark\"/>\n    </server>\n\n\nbut when send non-english parameters to the api, the api doesn't work\nPOST http://9.125.13.210:8774/v2/27bd80c020a747b0a012e30641a3facc/servers/c7a3971c-e6fc-4d76-9cbe-e1107decce9c/action\n{\n    \"rebuild\" : {\n        \"imageRef\" : \"736fc9f2-fd62-4730-a5fb-1199535c8406\",\n        \"name\" : \"test\u901a\u20ac\u3400\u1820\ua007\u0f10\u0628\u0629\u32a3\",\n        \"adminPass\" : \"\u901a\u20ac\u3400\u1820\ua007\u0f10\u0628\u0629\u32a3\",\n        \"accessIPv4\" : \"1.2.3.4\",\n        \"accessIPv6\" : \"fe80::100\",\n        \"metadata\" : {\n            \"meta var\" : \"meta val\"\n        },\n        \"personality\" : [\n            {\n                \"path\" : \"/etc/banner.txt\",\n                \"contents\" : \"ICAgICAgDQoiQSBjbG91ZCBkb2VzIG5vdCBrbm93IHdoeSBp dCBtb3ZlcyBpbiBqdXN0IHN1Y2ggYSBkaXJlY3Rpb24gYW5k IGF0IHN1Y2ggYSBzcGVlZC4uLkl0IGZlZWxzIGFuIGltcHVs c2lvbi4uLnRoaXMgaXMgdGhlIHBsYWNlIHRvIGdvIG5vdy4g QnV0IHRoZSBza3kga25vd3MgdGhlIHJlYXNvbnMgYW5kIHRo ZSBwYXR0ZXJucyBiZWhpbmQgYWxsIGNsb3VkcywgYW5kIHlv dSB3aWxsIGtub3csIHRvbywgd2hlbiB5b3UgbGlmdCB5b3Vy c2VsZiBoaWdoIGVub3VnaCB0byBzZWUgYmV5b25kIGhvcml6 b25zLiINCg0KLVJpY2hhcmQgQmFjaA==\"\n            }\n        ]\n    }\n}\n\nResponse\n\n    <computeFault code=\"500\" xmlns=\"http://docs.openstack.org/compute/api/v1.1\">\n    <message>The server has either erred or is incapable of performing the requested operation.</message>\n    </computeFault>", 
            "date_created": "2013-05-15 11:07:56.442583+00:00", 
            "author": "https://api.launchpad.net/1.0/~juvjuv660"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/29520", 
            "date_created": "2013-05-17 11:43:11.768062+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/29520\nCommitted: http://github.com/openstack/nova/commit/781815b3b27cc3fcbf153db57deb9bd82ae1d8d3\nSubmitter: Jenkins\nBranch:    master\n\ncommit 781815b3b27cc3fcbf153db57deb9bd82ae1d8d3\nAuthor: Rohan Rhishikesh Kanade <email address hidden>\nDate:   Fri May 17 04:15:26 2013 -0700\n\n    Fixes encoding issues for nova api req body.\n    \n    * Ensure utf-8 encoding for POST/PUT body for api requests\n    * As per https://wiki.openstack.org/wiki/Encoding.\n    \n    Fixes bug #1180344\n    \n    Change-Id: Iea0f16b0c024795fb3aee1cd38bb54ee9da6d90d\n", 
            "date_created": "2013-05-29 09:15:55.740275+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/48197", 
            "date_created": "2013-09-25 08:03:18.267952+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "We also need this to be fixed in stable/grizzly", 
            "date_created": "2013-09-25 08:05:00.056499+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanzhf"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/50855", 
            "date_created": "2013-10-10 08:06:36.842166+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}