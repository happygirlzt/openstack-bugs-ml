{
    "status": "Fix Released", 
    "last_updated": "2013-10-17 11:41:59.871341+00:00", 
    "description": "2013-04-03 19:45:56.433 7807 TRACE nova.compute.manager [instance: db05a638-846f-41cc-b013-e2e352e707d0] KeyError: u'u\\'hostname\\'\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3071, in pre_live_migration\\n    migrate_data)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3201, in pre_live_migration\\n    % locals())\\n\\nKeyError: u\\'hostname\\'\\n'\n2013-04-03 19:45:56.433 7807 TRACE nova.compute.manager [instance: db05a638-846f-41cc-b013-e2e352e707d0] \n2013-04-03 19:45:58.036 ERROR nova.openstack.common.rpc.amqp [req-8a1d4d7f-8bff-4e57-b57c-dc4698f5c25c 6787bedca8804cd7b204748d0240235c 4251d38a5827440299d71e3b3d78350b] Exception during message handling\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3115, in live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit__\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3108, in live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     block_migration, disk, dest, migrate_data)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/rpcapi.py\", line 408, in pre_live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     version='2.21')\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/proxy.py\", line 80, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return rpc.call(context, self._get_topic(topic), msg, timeout)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/__init__.py\", line 140, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return _get_impl().call(CONF, context, topic, msg, timeout)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 610, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rpc_amqp.get_connection_pool(conf, Connection))\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 613, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rv = list(rv)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 562, in __iter__\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     raise result\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp KeyError: u'u\\'hostname\\'\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3071, in pre_live_migration\\n    migrate_data)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3201, in pre_live_migration\\n    % locals())\\n\\nKeyError: u\\'hostname\\'\\n'\n\n\nhttps://github.com/openstack/nova/blob/2ee1c3d9f5342a135d422afcc7ea45264d232d2c/nova/virt/libvirt/driver.py#L3206", 
    "tags": [
        "low-hanging-fruit"
    ], 
    "importance": "Medium", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1164072", 
    "owner": "https://api.launchpad.net/1.0/~mikal", 
    "id": 1164072, 
    "index": 3338, 
    "created": "2013-04-03 18:07:52.581748+00:00", 
    "title": "libvirt livemigration warning logger refernces a not defined local variable", 
    "comments": [
        {
            "content": "2013-04-03 19:45:56.433 7807 TRACE nova.compute.manager [instance: db05a638-846f-41cc-b013-e2e352e707d0] KeyError: u'u\\'hostname\\'\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3071, in pre_live_migration\\n    migrate_data)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3201, in pre_live_migration\\n    % locals())\\n\\nKeyError: u\\'hostname\\'\\n'\n2013-04-03 19:45:56.433 7807 TRACE nova.compute.manager [instance: db05a638-846f-41cc-b013-e2e352e707d0] \n2013-04-03 19:45:58.036 ERROR nova.openstack.common.rpc.amqp [req-8a1d4d7f-8bff-4e57-b57c-dc4698f5c25c 6787bedca8804cd7b204748d0240235c 4251d38a5827440299d71e3b3d78350b] Exception during message handling\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3115, in live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     block_migration, migrate_data)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.7/contextlib.py\", line 24, in __exit__\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3108, in live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     block_migration, disk, dest, migrate_data)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/compute/rpcapi.py\", line 408, in pre_live_migration\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     version='2.21')\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/proxy.py\", line 80, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return rpc.call(context, self._get_topic(topic), msg, timeout)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/__init__.py\", line 140, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     return _get_impl().call(CONF, context, topic, msg, timeout)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/impl_qpid.py\", line 610, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rpc_amqp.get_connection_pool(conf, Connection))\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 613, in call\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     rv = list(rv)\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 562, in __iter__\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp     raise result\n2013-04-03 19:45:58.036 7807 TRACE nova.openstack.common.rpc.amqp KeyError: u'u\\'hostname\\'\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\\n    rval = self.proxy.dispatch(ctxt, version, method, **args)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\\n    return getattr(proxyobj, method)(ctxt, **kwargs)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3071, in pre_live_migration\\n    migrate_data)\\n\\n  File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 3201, in pre_live_migration\\n    % locals())\\n\\nKeyError: u\\'hostname\\'\\n'\n\n\nhttps://github.com/openstack/nova/blob/2ee1c3d9f5342a135d422afcc7ea45264d232d2c/nova/virt/libvirt/driver.py#L3206", 
            "date_created": "2013-04-03 18:07:52.581748+00:00", 
            "author": "https://api.launchpad.net/1.0/~afazekas"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/26150", 
            "date_created": "2013-04-04 22:03:37.140271+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/26150\nCommitted: http://github.com/openstack/nova/commit/676b16bfe5ff41eb28d782c888c17dae6bdff76a\nSubmitter: Jenkins\nBranch:    master\n\ncommit 676b16bfe5ff41eb28d782c888c17dae6bdff76a\nAuthor: Michael Still <email address hidden>\nDate:   Fri Apr 5 08:57:35 2013 +1100\n\n    Fix error message in pre_live_migration.\n    \n    We are using locals() to reference a variable which doesn't exist\n    in this error message. Also rename the instance variable while I\n    am here to be more consistent with other uses.\n    \n    Resolves bug 1164072.\n    \n    Change-Id: I96f5e2a81ac2e97181c3e87df83e19b381f4bcd2\n", 
            "date_created": "2013-04-10 20:10:16.158089+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/grizzly\nReview: https://review.openstack.org/26877", 
            "date_created": "2013-04-12 17:56:50.865369+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/26877\nCommitted: http://github.com/openstack/nova/commit/a3cc7bc231d4da8469e163ccf276a5b95217bb15\nSubmitter: Jenkins\nBranch:    stable/grizzly\n\ncommit a3cc7bc231d4da8469e163ccf276a5b95217bb15\nAuthor: Michael Still <email address hidden>\nDate:   Fri Apr 5 08:57:35 2013 +1100\n\n    Fix error message in pre_live_migration.\n    \n    We are using locals() to reference a variable which doesn't exist\n    in this error message. Also rename the instance variable while I\n    am here to be more consistent with other uses.\n    \n    Resolves bug 1164072.\n    \n    Change-Id: I96f5e2a81ac2e97181c3e87df83e19b381f4bcd2\n    (cherry picked from commit 676b16bfe5ff41eb28d782c888c17dae6bdff76a)\n", 
            "date_created": "2013-04-27 14:30:53.123078+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}