{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 09:00:06.176852+00:00", 
    "description": "ssatya@devstack:~$ nova boot --image 1e95fe6b-cec6-4420-97d1-1e7bc8c81c49 --flavor 1  testdummay\n+--------------------------------------+-----------------------------------------------------------+\n| Property                             | Value                                                     |\n+--------------------------------------+-----------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                    |\n| OS-EXT-AZ:availability_zone          | nova                                                      |\n| OS-EXT-STS:power_state               | 0                                                         |\n| OS-EXT-STS:task_state                | networking                                                |\n| OS-EXT-STS:vm_state                  | building                                                  |\n| OS-SRV-USG:launched_at               | -                                                         |\n| OS-SRV-USG:terminated_at             | -                                                         |\n| accessIPv4                           |                                                           |\n| accessIPv6                           |                                                           |\n| adminPass                            | fK8SPGtHLUds                                              |\n| config_drive                         |                                                           |\n| created                              | 2014-03-07T14:33:49Z                                      |\n| flavor                               | m1.tiny (1)                                               |\n| hostId                               | 2c1ae30aa2a235d9c0c8b04aae3f4199cd98356e44a03b5c8f878adb  |\n| id                                   | eae503d9-c6f7-4e3e-9adc-0b8b6803c90e                      |\n| image                                | debian-2.6.32-i686 (1e95fe6b-cec6-4420-97d1-1e7bc8c81c49) |\n| key_name                             | -                                                         |\n| metadata                             | {}                                                        |\n| name                                 | testdummay                                                |\n| os-extended-volumes:volumes_attached | []                                                        |\n| progress                             | 0                                                         |\n| security_groups                      | default                                                   |\n| status                               | BUILD                                                     |\n| tenant_id                            | 209ab7e4f3744675924212805db3ad74                          |\n| updated                              | 2014-03-07T14:33:50Z                                      |\n| user_id                              | f3756a4910054883b84ee15acc15fbd1                          |\n+--------------------------------------+-----------------------------------------------------------+\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | BUILD  | spawning   | NOSTATE     |                  |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | ACTIVE | -          | Running     | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\nssatya@devstack:~$ nova stop testdummay\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+---------+------------+-------------+------------------+\n| ID                                   | Name       | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------------+---------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | SHUTOFF | -          | Shutdown    | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR   | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+---------+------------+-------------+------------------+\nssatya@devstack:~$ nova delete testdummay\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | ERROR  | deleting   | Shutdown    | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+", 
    "tags": [
        "network"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1289397", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1289397, 
    "index": 6087, 
    "created": "2014-03-07 15:06:39.664827+00:00", 
    "title": "nova  instance delete fails if dhcp_release fails", 
    "comments": [
        {
            "content": "ssatya@devstack:~$ nova boot --image 1e95fe6b-cec6-4420-97d1-1e7bc8c81c49 --flavor 1  testdummay\n+--------------------------------------+-----------------------------------------------------------+\n| Property                             | Value                                                     |\n+--------------------------------------+-----------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                    |\n| OS-EXT-AZ:availability_zone          | nova                                                      |\n| OS-EXT-STS:power_state               | 0                                                         |\n| OS-EXT-STS:task_state                | networking                                                |\n| OS-EXT-STS:vm_state                  | building                                                  |\n| OS-SRV-USG:launched_at               | -                                                         |\n| OS-SRV-USG:terminated_at             | -                                                         |\n| accessIPv4                           |                                                           |\n| accessIPv6                           |                                                           |\n| adminPass                            | fK8SPGtHLUds                                              |\n| config_drive                         |                                                           |\n| created                              | 2014-03-07T14:33:49Z                                      |\n| flavor                               | m1.tiny (1)                                               |\n| hostId                               | 2c1ae30aa2a235d9c0c8b04aae3f4199cd98356e44a03b5c8f878adb  |\n| id                                   | eae503d9-c6f7-4e3e-9adc-0b8b6803c90e                      |\n| image                                | debian-2.6.32-i686 (1e95fe6b-cec6-4420-97d1-1e7bc8c81c49) |\n| key_name                             | -                                                         |\n| metadata                             | {}                                                        |\n| name                                 | testdummay                                                |\n| os-extended-volumes:volumes_attached | []                                                        |\n| progress                             | 0                                                         |\n| security_groups                      | default                                                   |\n| status                               | BUILD                                                     |\n| tenant_id                            | 209ab7e4f3744675924212805db3ad74                          |\n| updated                              | 2014-03-07T14:33:50Z                                      |\n| user_id                              | f3756a4910054883b84ee15acc15fbd1                          |\n+--------------------------------------+-----------------------------------------------------------+\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | BUILD  | spawning   | NOSTATE     |                  |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | ACTIVE | -          | Running     | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\nssatya@devstack:~$ nova stop testdummay\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+---------+------------+-------------+------------------+\n| ID                                   | Name       | Status  | Task State | Power State | Networks         |\n+--------------------------------------+------------+---------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | SHUTOFF | -          | Shutdown    | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR   | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+---------+------------+-------------+------------------+\nssatya@devstack:~$ nova delete testdummay\nssatya@devstack:~$ nova list\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| ID                                   | Name       | Status | Task State | Power State | Networks         |\n+--------------------------------------+------------+--------+------------+-------------+------------------+\n| eae503d9-c6f7-4e3e-9adc-0b8b6803c90e | testdummay | ERROR  | deleting   | Shutdown    | private=10.0.0.3 |\n| d1e982c4-85c2-422d-b046-1643bd81e674 | testvm1    | ERROR  | deleting   | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+------------+--------+------------+-------------+------------------+", 
            "date_created": "2014-03-07 15:06:39.664827+00:00", 
            "author": "https://api.launchpad.net/1.0/~svnsatya"
        }, 
        {
            "content": "Hi Satya,\n\nI am not getting how this is related to the vmdk driver.\nPlease provide some more details like exceptions or error messages.\n\nThanks,\nVipin", 
            "date_created": "2014-03-10 07:14:05.423194+00:00", 
            "author": "https://api.launchpad.net/1.0/~vbala"
        }, 
        {
            "content": "issue is not related to vmdk. issue related to nova only.", 
            "date_created": "2014-03-10 07:46:18.998828+00:00", 
            "author": "https://api.launchpad.net/1.0/~svnsatya"
        }, 
        {
            "content": "I was not able to repro this.   Please try again and attach logs if you have failures\n\n[~/devstack] \u2794 glance image-list\n+--------------------------------------+--------------------+-------------+------------------+-----------+--------+\n| ID                                   | Name               | Disk Format | Container Format | Size      | Status |\n+--------------------------------------+--------------------+-------------+------------------+-----------+--------+\n| 96ede0b8-8a22-4c67-aba7-f7efa3828818 | debian-2.6.32-i686 | vmdk        | bare             | 298288412 | active |\n+--------------------------------------+--------------------+-------------+------------------+-----------+--------+\n[~/devstack] \u2794 nova boot --image debian-2.6.32-i686  --flavor 1 testdummy\n+--------------------------------------+-----------------------------------------------------------+\n| Property                             | Value                                                     |\n+--------------------------------------+-----------------------------------------------------------+\n| OS-DCF:diskConfig                    | MANUAL                                                    |\n| OS-EXT-AZ:availability_zone          | nova                                                      |\n| OS-EXT-STS:power_state               | 0                                                         |\n| OS-EXT-STS:task_state                | scheduling                                                |\n| OS-EXT-STS:vm_state                  | building                                                  |\n| OS-SRV-USG:launched_at               | -                                                         |\n| OS-SRV-USG:terminated_at             | -                                                         |\n| accessIPv4                           |                                                           |\n| accessIPv6                           |                                                           |\n| adminPass                            | DXf6C2dN5d96                                              |\n| config_drive                         |                                                           |\n| created                              | 2014-03-12T20:40:37Z                                      |\n| flavor                               | m1.tiny (1)                                               |\n| hostId                               |                                                           |\n| id                                   | 074877ac-ea17-4281-87ca-5cad987a3c2f                      |\n| image                                | debian-2.6.32-i686 (96ede0b8-8a22-4c67-aba7-f7efa3828818) |\n| key_name                             | -                                                         |\n| metadata                             | {}                                                        |\n| name                                 | testdummy                                                 |\n| os-extended-volumes:volumes_attached | []                                                        |\n| progress                             | 0                                                         |\n| security_groups                      | default                                                   |\n| status                               | BUILD                                                     |\n| tenant_id                            | d8ee70c6605b4c9a88beba13e6f16cba                          |\n| updated                              | 2014-03-12T20:40:38Z                                      |\n| user_id                              | 342809bc4309432fabba583d016fcbed                          |\n+--------------------------------------+-----------------------------------------------------------+\n[~/devstack] \u2794 nova list\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n| ID                                   | Name      | Status | Task State | Power State | Networks |\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n| 074877ac-ea17-4281-87ca-5cad987a3c2f | testdummy | BUILD  | spawning   | NOSTATE     |          |\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n[~/devstack] \u2794 nova list\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n| ID                                   | Name      | Status | Task State | Power State | Networks |\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n| 074877ac-ea17-4281-87ca-5cad987a3c2f | testdummy | BUILD  | spawning   | NOSTATE     |          |\n+--------------------------------------+-----------+--------+------------+-------------+----------+\n[~/devstack] \u2794 nova list\n+--------------------------------------+-----------+--------+------------+-------------+------------------+\n| ID                                   | Name      | Status | Task State | Power State | Networks         |\n+--------------------------------------+-----------+--------+------------+-------------+------------------+\n| 074877ac-ea17-4281-87ca-5cad987a3c2f | testdummy | ACTIVE | -          | Running     | private=10.0.0.2 |\n+--------------------------------------+-----------+--------+------------+-------------+------------------+\n[~/devstack] \u2794 nova stop testdummy\n[~/devstack] \u2794 nova list\n+--------------------------------------+-----------+---------+------------+-------------+------------------+\n| ID                                   | Name      | Status  | Task State | Power State | Networks         |\n+--------------------------------------+-----------+---------+------------+-------------+------------------+\n| 074877ac-ea17-4281-87ca-5cad987a3c2f | testdummy | SHUTOFF | -          | Shutdown    | private=10.0.0.2 |\n+--------------------------------------+-----------+---------+------------+-------------+------------------+\n[~/devstack] \u2794 nova delete testdummy\n[~/devstack] \u2794 \n[~/devstack] \u2794 nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\n[~/devstack] \u2794 \n", 
            "date_created": "2014-03-12 20:45:37.019677+00:00", 
            "author": "https://api.launchpad.net/1.0/~tjones-i"
        }, 
        {
            "content": "Please try with demo user. See attached log for reference\n", 
            "date_created": "2014-03-13 11:48:46.083018+00:00", 
            "author": "https://api.launchpad.net/1.0/~svnsatya"
        }, 
        {
            "content": "Hi,\nThis looks like a networking issue:\n\n[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m    timeout=timeout)\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 390, in send\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m    return self._send(target, ctxt, message, wait_for_reply, timeout)\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 383, in _send\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m    raise result\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00mRemoteError: Remote error: ProcessExecutionError Unexpected error while running command.\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00mCommand: sudo nova-rootwrap /etc/nova/rootwrap.conf dhcp_release br100 10.0.0.3 fa:16:3e:62:ab:ae\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00mExit code: 1\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00mStdout: ''\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00mStderr: 'cannot setup interface: No such device\\n'\n\u001b[01;31m2014-03-13 16:47:01.517 TRACE oslo.messaging._executors.base \u001b[01;35m\u001b[00m[u'Traceback (most recent call last):\\n', u'  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_executors/base.py\", line 36, in _dispatch\\n    incoming.reply(self.callback(incoming.ctxt, incoming.message))\\n', u'  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in __call__\\n    return self._dispatch(endpoint, method, ctxt, args)\\n', u'  File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 104, in _dispatch\\n    result = getattr(endpoint, method)(ctxt, **new_args)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 564, in deallocate_for_instance\\n    instance=instance)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 1526, in deallocate_fixed_ip\\n    instance=instance)\\n', u'  File \"/opt/stack/nova/nova/network/manager.py\", line 963, in deallocate_fixed_ip\\n    self.driver.release_dhcp(dev, address, vif.address)\\n', u'  File \"/opt/stack/nova/nova/network/linux_net.py\", line 993, in release_dhcp\\n    utils.execute(\\'dhcp_release\\', dev, address, mac_address, run_as_root=True)\\n', u'  File \"/opt/stack/nova/nova/utils.py\", line 164, in execute\\n    return processutils.execute(*cmd, **kwargs)\\n', u'  File \"/opt/stack/nova/nova/openstack/common/processutils.py\", line 193, in execute\\n    cmd=\\' \\'.join(cmd))\\n', u\"ProcessExecutionError: Unexpected error while running command.\\nCommand: sudo nova-rootwrap /etc/nova/rootwrap.conf dhcp_release br100 10.0.0.3 fa:16:3e:62:ab:ae\\nExit code: 1\\nStdout: ''\\nStderr: 'cannot setup interface: No such device\\\\n'\\n\"].\n\nIt is not related to the vmware driver.\nThanks\nGary\n", 
            "date_created": "2014-06-05 06:45:25.307166+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "https://review.openstack.org/98060", 
            "date_created": "2014-06-05 12:04:43.341753+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "We use milestones only at the very end of the milestone to track bugs that should block the release of the milestone. Please use tags not milestones to track bugs, try things like: my_bug_topic_milestone_name", 
            "date_created": "2014-06-10 11:23:05.774187+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/98060\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=a516ae71d57eda013f7cb9428f945dfea08ead3e\nSubmitter: Jenkins\nBranch:    master\n\ncommit a516ae71d57eda013f7cb9428f945dfea08ead3e\nAuthor: Gary Kotton <email address hidden>\nDate:   Thu Jun 5 01:35:32 2014 -0700\n\n    Network: enable instance deletion when dhcp release fails\n    \n    In the event that the 'dhcp_release' fails we should continue\n    with the deletion of the instance.\n    \n    This will no longer the leave the instance in ERROR state.\n    \n    Change-Id: Ie8259180a9df12865940907c728a8d9da3c9fda0\n    Closes-bug: #1289397\n", 
            "date_created": "2014-09-18 00:49:45.096083+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}