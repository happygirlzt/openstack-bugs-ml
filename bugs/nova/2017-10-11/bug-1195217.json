{
    "status": "Invalid", 
    "last_updated": "2013-07-01 10:09:57.421419+00:00", 
    "description": "a resize failed because the credentials on the Hyper-V host were incorrect.  The message that shows up in the \"nova show\" command has no relevance to the actual problem.  The same message was also seen because the nova.conf option allow_resize_to_same_host=True was not set on either the compute node or the controller node (it has to be set on both nodes apparently).\n\nThe nova show command shows the following after the resize fails:\nnova show Ivt_May23_2\n+-------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                                                  |\n+-------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                                                  |\n| updated                             | 2013-05-23T16:35:28Z                                                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | cn4                                                                                                                                                    |\n| key_name                            | None                                                                                                                                                   |\n| image                               | quantal-server-cloudimg-amd64-disk1 (4e07b1ab-2beb-423a-9ce9-25ae54ad8971)                                                                             |\n| network1 network                    | 10.0.1.4                                                                                                                                               |\n| hostId                              | b05b4a40886f1b4b5c0c1fd1a73f074560c390f1303813142669ff88                                                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000012                                                                                                                                      |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | cn4                                                                                                                                                    |\n| flavor                              | m1.small (2)                                                                                                                                           |\n| id                                  | 5259d8b7-aa97-4a54-9c4e-be3a5292e5e3                                                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                                                |\n| user_id                             | cec041a865b949ba911d686b0afdaf0f                                                                                                                       |\n| name                                | Ivt_May23_2                                                                                                                                            |\n| created                             | 2013-05-23T16:34:22Z                                                                                                                                   |\n| tenant_id                           | 28478f1010e34ec7bd4f7ffd84e3b3c3                                                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                                                 |\n| metadata                            | {}                                                                                                                                                     |\n| accessIPv4                          |                                                                                                                                                        |\n| accessIPv6                          |                                                                                                                                                        |\n| fault                               | {u'message': u'WindowsError', u'code': 500, u'details': u'[Error 123] The filename, directory name, or volume label syntax is incorrect: u\\'\\\\\\\\\\\\\\\\\\' |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\compute\\\\manager.py\", line 228, in decorated_function                                                                                             |\n|                                     |     return function(self, context, *args, **kwargs)                                                                                                    |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\compute\\\\manager.py\", line 2481, in resize_instance                                                                                               |\n|                                     |     block_device_info)                                                                                                                                 |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\driver.py\", line 169, in migrate_disk_and_power_off                                                                                 |\n|                                     |     block_device_info)                                                                                                                                 |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 111, in migrate_disk_and_power_off                                                                           |\n|                                     |     self._migrate_disk_files(instance_name, disk_files, dest)                                                                                          |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 84, in _migrate_disk_files                                                                                   |\n|                                     |     dest_path)                                                                                                                                         |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\contextlib.py\", line 24, in __exit__                             |\n|                                     |     self.gen.next()                                                                                                                                    |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 69, in _migrate_disk_files                                                                                   |\n|                                     |     instance_name, dest, remove_dir=True)                                                                                                              |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 119, in get_instance_dir                                                                                        |\n|                                     |     create_dir, remove_dir)                                                                                                                            |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 107, in _get_instances_sub_dir                                                                                  |\n|                                     |     self._check_create_dir(path)                                                                                                                       |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 93, in _check_create_dir                                                                                        |\n|                                     |     self.makedirs(path)                                                                                                                                |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 52, in makedirs                                                                                                 |\n|                                     |     os.makedirs(path)                                                                                                                                  |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 157, in makedirs                                    |\n|                                     |     mkdir(name, mode)                                                                                                                                  |\n|                                     | ', u'created': u'2013-05-23T16:35:28Z'}                                                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                                                   |\n| config_drive                        |                                                                                                                                                        |\n+-------------------------------------+---------------------------------------------------------------------------------------------------------\n\nThe messaging presented needs to better represent the problem.", 
    "tags": [
        "hyper-v"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1195217", 
    "owner": "https://api.launchpad.net/1.0/~jiataotj", 
    "id": 1195217, 
    "index": 3800, 
    "created": "2013-06-27 09:30:35.383021+00:00", 
    "title": "Better messaging needed when resize of a vm fails on a Hyper-V host", 
    "comments": [
        {
            "content": "a resize failed because the credentials on the Hyper-V host were incorrect.  The message that shows up in the \"nova show\" command has no relevance to the actual problem.  The same message was also seen because the nova.conf option allow_resize_to_same_host=True was not set on either the compute node or the controller node (it has to be set on both nodes apparently).\n\nThe nova show command shows the following after the resize fails:\nnova show Ivt_May23_2\n+-------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                                                  |\n+-------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                                                  |\n| updated                             | 2013-05-23T16:35:28Z                                                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | cn4                                                                                                                                                    |\n| key_name                            | None                                                                                                                                                   |\n| image                               | quantal-server-cloudimg-amd64-disk1 (4e07b1ab-2beb-423a-9ce9-25ae54ad8971)                                                                             |\n| network1 network                    | 10.0.1.4                                                                                                                                               |\n| hostId                              | b05b4a40886f1b4b5c0c1fd1a73f074560c390f1303813142669ff88                                                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000012                                                                                                                                      |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | cn4                                                                                                                                                    |\n| flavor                              | m1.small (2)                                                                                                                                           |\n| id                                  | 5259d8b7-aa97-4a54-9c4e-be3a5292e5e3                                                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                                                |\n| user_id                             | cec041a865b949ba911d686b0afdaf0f                                                                                                                       |\n| name                                | Ivt_May23_2                                                                                                                                            |\n| created                             | 2013-05-23T16:34:22Z                                                                                                                                   |\n| tenant_id                           | 28478f1010e34ec7bd4f7ffd84e3b3c3                                                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                                                 |\n| metadata                            | {}                                                                                                                                                     |\n| accessIPv4                          |                                                                                                                                                        |\n| accessIPv6                          |                                                                                                                                                        |\n| fault                               | {u'message': u'WindowsError', u'code': 500, u'details': u'[Error 123] The filename, directory name, or volume label syntax is incorrect: u\\'\\\\\\\\\\\\\\\\\\' |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\compute\\\\manager.py\", line 228, in decorated_function                                                                                             |\n|                                     |     return function(self, context, *args, **kwargs)                                                                                                    |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\compute\\\\manager.py\", line 2481, in resize_instance                                                                                               |\n|                                     |     block_device_info)                                                                                                                                 |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\driver.py\", line 169, in migrate_disk_and_power_off                                                                                 |\n|                                     |     block_device_info)                                                                                                                                 |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 111, in migrate_disk_and_power_off                                                                           |\n|                                     |     self._migrate_disk_files(instance_name, disk_files, dest)                                                                                          |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 84, in _migrate_disk_files                                                                                   |\n|                                     |     dest_path)                                                                                                                                         |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\contextlib.py\", line 24, in __exit__                             |\n|                                     |     self.gen.next()                                                                                                                                    |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\migrationops.py\", line 69, in _migrate_disk_files                                                                                   |\n|                                     |     instance_name, dest, remove_dir=True)                                                                                                              |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 119, in get_instance_dir                                                                                        |\n|                                     |     create_dir, remove_dir)                                                                                                                            |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 107, in _get_instances_sub_dir                                                                                  |\n|                                     |     self._check_create_dir(path)                                                                                                                       |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 93, in _check_create_dir                                                                                        |\n|                                     |     self.makedirs(path)                                                                                                                                |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\site-packages\\                                                   |\n|                                     | ova\\\\virt\\\\hyperv\\\\pathutils.py\", line 52, in makedirs                                                                                                 |\n|                                     |     os.makedirs(path)                                                                                                                                  |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 150, in makedirs                                    |\n|                                     |     makedirs(head, mode)                                                                                                                               |\n|                                     |   File \"C:\\\\Program Files (x86)\\\\Hyper-V Agent\\\\Python27\\\\lib\\\\os.py\", line 157, in makedirs                                    |\n|                                     |     mkdir(name, mode)                                                                                                                                  |\n|                                     | ', u'created': u'2013-05-23T16:35:28Z'}                                                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                                                   |\n| config_drive                        |                                                                                                                                                        |\n+-------------------------------------+---------------------------------------------------------------------------------------------------------\n\nThe messaging presented needs to better represent the problem.", 
            "date_created": "2013-06-27 09:30:35.383021+00:00", 
            "author": "https://api.launchpad.net/1.0/~juvjuv660"
        }, 
        {
            "content": "The issue occurs when scheduler do migration on a remote target without right credentials configuration. we can add accurate alert information for the scenario to notify user to right config credentials to enable remote migration", 
            "date_created": "2013-07-01 04:06:54.133573+00:00", 
            "author": "https://api.launchpad.net/1.0/~jiataotj"
        }, 
        {
            "content": "After investigation, when Openstack try to create remote path for instance resizing without right remote target host access credentials configuration, WindowsError [Error 123] is raised from https://github.com/openstack/nova/blob/master/nova/virt/hyperv/migrationops.py#L125\n\nThe exception will be caught by:\nhttps://github.com/openstack/nova/blob/master/nova/compute/manager.py#L2528\n\nThen the fault will be updated into db by:\nhttps://github.com/openstack/nova/blob/master/nova/compute/manager.py#L2554\n\nIt works as design, except that nova/compute/manager.py are common code path for different HyperVisor, adding specific error information for HyperV will impact other HyperVisor's resizing operation and confuse Openstack users.\nSo I think we should invalid this bug.", 
            "date_created": "2013-07-01 10:09:30.922160+00:00", 
            "author": "https://api.launchpad.net/1.0/~jiataotj"
        }
    ]
}