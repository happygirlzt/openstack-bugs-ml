{
    "status": "Invalid", 
    "last_updated": "2011-06-10 08:51:29.537394+00:00", 
    "description": "I had asked the same question when I was using Bexar version. But I didn't get it solved. I tried the newest version of cactus, but I failed too. Could anyone help me? I will paste version info and related logs below.\n\nBTW, I installed all in one machine.\n\n---------------------------------------------------------------\nVersion of nova-compute:  2011.2~bzr930-0ubuntu0ppa1~maverick1\n---------------------------------------------------------------\n\n\n---------------------------------------------------------------------\neuca-describe-instances:\n\nRESERVATION     r-80iakhmt      IRT     default\nINSTANCE        i-00000001      ami-43878e18    10.0.0.2        10.0.0.2        running mykey (IRT, ubuntu7)    0               m1.tiny 2011-04-01T02:05:19Z    nova\n---------------------------------------------------------------------\n\n\n-----------------------------------------------------------------------\nnova.conf:\n\n--sql_connection=mysql://root:nova@ubuntu7/nova\n--s3_host=ubuntu7\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu7\n--fixed_range=192.168.2.64/26\n--network_size=64\n--lock_path=/var/lib/nova/tmp\n---------------------------------------------------------------------\n\n---------------------------------------------------------------------\nnova-compute.log:\n\n2011-04-01 11:02:07,566 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.pyc'> from (pid=6662) __get_backe\nnd /usr/lib/pymodules/python2.6/nova/utils.py:427\n2011-04-01 11:02:07,653 DEBUG nova.virt.libvirt_conn [-] Connecting to libvirt: qemu:///system from (pid=6662) _get_connection /usr/lib/pymodules/python2.6/nova/virt/libvirt_con\nn.py:248\n2011-04-01 11:02:08,136 INFO nova.virt.libvirt_conn [-] Compute_service record created for ubuntu7\n2011-04-01 11:02:08,139 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:02:08,186 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute.ubuntu7 from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:02:08,226 INFO nova.rpc [-] Created 'compute_fanout' fanout exchange with 'compute' routing key\n2011-04-01 11:02:08,226 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:05:19,994 DEBUG nova.rpc [-] received {'_context_request_id': 'FM0PYJP-UO1VRGMHOLGD', '_context_read_deleted': False, 'args': {'instance_id': 1, 'injected_files':\nNone, 'availability_zone': None}, '_context_is_admin': True, '_context_timestamp': '2011-04-01T02:05:19Z', '_context_user': 'anne', 'method': 'run_instance', '_context_project':\n 'IRT', '_context_remote_address': '192.168.32.202'} from (pid=6662) _receive /usr/lib/pymodules/python2.6/nova/rpc.py:167\n2011-04-01 11:05:19,994 DEBUG nova.rpc [-] unpacked context: {'timestamp': '2011-04-01T02:05:19Z', 'remote_address': '192.168.32.202', 'project': 'IRT', 'is_admin': True, 'user'\n: 'anne', 'request_id': 'FM0PYJP-UO1VRGMHOLGD', 'read_deleted': False} from (pid=6662) _unpack_context /usr/lib/pymodules/python2.6/nova/rpc.py:331\n2011-04-01 11:05:20,050 AUDIT nova.compute.manager [FM0PYJP-UO1VRGMHOLGD anne IRT] instance 1: starting...\n2011-04-01 11:05:20,195 DEBUG nova.rpc [-] Making asynchronous call on network ... from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:350\n2011-04-01 11:05:20,196 DEBUG nova.rpc [-] MSG_ID is 6437cf6b126f47438423453fe573a783 from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:353\n2011-04-01 11:05:20,518 DEBUG nova.rpc [-] Making asynchronous call on network.ubuntu7 ... from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:350\n2011-04-01 11:05:20,518 DEBUG nova.rpc [-] MSG_ID is 5992d3c83f894779a4f61429bd94a8d2 from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:353\n2011-04-01 11:05:20,911 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: starting toXML method from (pid=6662) to_xml /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:941\n2011-04-01 11:05:21,033 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: finished toXML method from (pid=6662) to_xml /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:985\n2011-04-01 11:05:21,084 INFO nova [-] called setup_basic_filtering in nwfilter\n2011-04-01 11:05:21,084 INFO nova [-] ensuring static filters\n2011-04-01 11:05:21,187 INFO nova [-] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0x4757390>\n2011-04-01 11:05:21,188 INFO nova [-] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0x47575d0>\n2011-04-01 11:05:21,194 DEBUG nova.utils [-] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,194 DEBUG nova.utils [-] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:599\n2011-04-01 11:05:21,200 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-save -t filter from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,262 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,276 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-save -t nat from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,296 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,339 DEBUG nova.utils [-] Running cmd (subprocess): mkdir -p /var/lib/nova/instances/instance-00000001/ from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,361 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-04-01 11:05:21,432 DEBUG nova.utils [-] Attempting to grab semaphore \"59a07b31\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,450 DEBUG nova.utils [-] Running cmd (subprocess): cp /var/lib/nova/instances/_base/59a07b31 /var/lib/nova/instances/instance-00000001/kernel from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,487 DEBUG nova.utils [-] Attempting to grab semaphore \"456ef2cb\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,506 DEBUG nova.utils [-] Running cmd (subprocess): cp /var/lib/nova/instances/_base/456ef2cb /var/lib/nova/instances/instance-00000001/ramdisk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,546 DEBUG nova.utils [-] Attempting to grab semaphore \"43878e18_sm\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,598 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/var/lib/nova/instances/_base/43878e18_sm /var/lib/nova/instances/instance-00000001/disk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,902 INFO nova.virt.libvirt_conn [-] instance instance-00000001: injecting key into image 1132957208\n2011-04-01 11:05:21,914 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -c /dev/nbd15 /var/lib/nova/instances/instance-00000001/disk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:22,944 DEBUG nova.utils [-] Running cmd (subprocess): sudo tune2fs -c 0 -i 0 /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,556 DEBUG nova.utils [-] Running cmd (subprocess): sudo mount /dev/nbd15 /tmp/tmpWcAFXb from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,617 DEBUG nova.utils [-] Running cmd (subprocess): sudo mkdir -p /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,627 DEBUG nova.utils [-] Running cmd (subprocess): sudo chown root /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,644 DEBUG nova.utils [-] Running cmd (subprocess): sudo chmod 700 /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,657 DEBUG nova.utils [-] Running cmd (subprocess): sudo tee -a /tmp/tmpWcAFXb/root/.ssh/authorized_keys from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,682 DEBUG nova.utils [-] Running cmd (subprocess): sudo umount /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:25,084 DEBUG nova.utils [-] Running cmd (subprocess): rmdir /tmp/tmpWcAFXb from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:25,121 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:27,122 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: is running from (pid=6662) spawn /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:570\n2011-04-01 11:05:27,315 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: booted from (pid=6662) _wait_for_boot /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:581\n-----------------------------------------------------------------------------------------\n\n\n-----------------------------------------------------------------------------------------\nlog of euca-get-output: \n\n\nttylinux 12.1\n > http:\\/\\/ttylinux.org\\/\n > hostname: ttylinux_host\n\nload Kernel Module: acpiphp  [  OK  ]\nload Kernel Module: e1000  [  OK  ]\nload Kernel Module: ne2k-pci  [  OK  ]\n[    0.981490] ACPI: PCI Interrupt Link [LNKC] enabled at IRQ 11\nload Kernel Module: 8139cp  [  OK  ]\nload Kernel Module: pcnet32  [  OK  ]\nload Kernel Module: mii  [  OK  ]\nload Kernel Module: ip_tables  [  OK  ]\nfile systems checked  [  OK  ]\nmounting local file systems  [  OK  ]\nsetting up system clock [utc] Fri Apr  1 02:05:31 UTC 2011  [  OK  ]\nstty: \\/dev\\/console\nstty: \\/dev\\/console\ninitializing random number generator  [WATING].. [  OK  ]\nstty: \\/dev\\/console\nstartup klogd  [  OK  ]\nstartup syslogd  [  OK  ]\nstty: \\/dev\\/console\nstty: \\/dev\\/console\nbringing up loopback interface lo  [  OK  ]\nstty: \\/dev\\/console\nudhcpc (v1.17.2) started\nSending discover...\nSending select for 192.168.32.191...\nLease of 192.168.32.191 obtained, lease time 86400\nstarting DHCP forEthernet interface eth0  [  OK  ]\ncloud-setup: checking http:\\/\\/169.254.169.254\\/2009-04-04\\/meta-data\\/instance-id\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 1\\/30: up 2.05. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 2\\/30: up 6.08. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 3\\/30: up 9.09. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 4\\/30: up 13.12. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 5\\/30: up 16.13. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 6\\/30: up 20.16. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 7\\/30: up 23.16. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 8\\/30: up 27.19. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 9\\/30: up 30.20. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 10\\/30: up 34.23. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 11\\/30: up 37.24. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 12\\/30: up 41.26. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 13\\/30: up 44.27. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 14\\/30: up 48.30. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 15\\/30: up 51.31. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 16\\/30: up 55.34. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 17\\/30: up 58.35. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 18\\/30: up 62.38. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 19\\/30: up 65.39. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 20\\/30: up 69.42. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 21\\/30: up 72.43. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 22\\/30: up 76.46. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 23\\/30: up 79.47. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 24\\/30: up 83.50. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 25\\/30: up 86.51. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 26\\/30: up 90.54. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 27\\/30: up 93.55. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 28\\/30: up 97.58. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 29\\/30: up 100.59. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 30\\/30: up 104.62. request failed\ncloud-setup: after 30 fails, debugging\ncloud-setup: running debug (30 tries reached)\n############ debug start ##############\n### \\/etc\\/rc.d\\/init.d\\/sshd start\nstty: \\/dev\\/console\ngenerating DSS host key  [WATING].. [  OK  ]\ngenerating RSA host key  [WATING].. [  OK  ]\nstartup dropbear  [  OK  ]\n### ifconfig -a\neth0      Link encap:Ethernet  HWaddr 02:16:3E:23:50:01\n          inet addr:192.168.32.191  Bcast:192.168.32.255  Mask:255.255.255.0\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:32 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:98 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:2532 (2.4 KiB)  TX bytes:4900 (4.7 KiB)\n          Interrupt:11 Base address:0xc000\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\n          RX packets:60 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:5280 (5.1 KiB)  TX bytes:5280 (5.1 KiB)\n\n### route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n192.168.32.0    0.0.0.0         255.255.255.0   U     0      0        0 eth0\n0.0.0.0         192.168.32.254  0.0.0.0         UG    0      0        0 eth0\n### cat \\/etc\\/resolv.conf\ncat: can't open '\\/etc\\/resolv.conf': No such file or directory\n### ping -c 5 192.168.32.254\nPING 192.168.32.254 (192.168.32.254): 56 data bytes\n\n--- 192.168.32.254 ping statistics ---\n5 packets transmitted, 0 packets received, 100% packet loss\n\\/etc\\/rc.d\\/init.d\\/cloud-functions: line 41: \\/etc\\/resolv.conf: No such file or directory\n### pinging nameservers\n### uname -a\nLinux ttylinux_host 2.6.35-22-virtual #35-Ubuntu SMP Sat Oct 16 23:19:29 UTC 2010 x86_64 GNU\\/Linux\n### lsmod\nModule                  Size  Used by\nip_tables              18737  0\nx_tables               24391  1 ip_tables\npcnet32                36585  0\n8139cp                 20333  0\nmii                     5261  2 pcnet32,8139cp\nne2k_pci                7802  0\n8390                    9897  1 ne2k_pci\ne1000                 110274  0\nacpiphp                18752  0\n### dmesg | tail\n<6>[    0.969912] ne2k-pci.c:v1.03 9\\/22\\/2003 D. Becker\\/P. Gortmaker\n<6>[    0.981222] 8139cp: 8139cp: 10\\/100 PCI Ethernet driver v1.3 (Mar 22, 2004)\n<4>[    0.981490] ACPI: PCI Interrupt Link [LNKC] enabled at IRQ 11\n<6>[    0.982525] 8139cp 0000:00:03.0: PCI INT A -> Link[LNKC] -> GSI 11 (level, high) -> IRQ 11\n<6>[    0.986202] 8139cp 0000:00:03.0: eth0: RTL-8139C+ at 0xffffc900001dc000, 02:16:3e:23:50:01, IRQ 11\n<7>[    0.986240] 8139cp 0000:00:03.0: setting latency timer to 64\n<6>[    0.995496] pcnet32: pcnet32.c:v1.35 21.Apr.2008 <email address hidden>\n<6>[    1.014356] ip_tables: (C) 2000-2006 Netfilter Core Team\n<6>[    1.495942] eth0: link up, 100Mbps, full-duplex, lpa 0x05E1\n<7>[   12.190079] eth0: no IPv6 routers present\n### tail -n 25 \\/var\\/log\\/messages\nApr  1 02:05:31 ttylinux_host syslog.info syslogd started: BusyBox v1.17.2\nApr  1 02:05:31 ttylinux_host user.info kernel: [    1.495942] eth0: link up, 100Mbps, full-duplex, lpa 0x05E1\nApr  1 02:05:42 ttylinux_host user.debug kernel: [   12.190079] eth0: no IPv6 routers present\nApr  1 02:07:17 ttylinux_host authpriv.info dropbear[267]: Running in background\n############ debug end   ##############\ncloud-setup: failed to read iid from metadata. tried 30\nstty: \\/dev\\/console\nsshd is already running.\nstty: \\/dev\\/console\nstartup inetd  [  OK  ]\nstty: \\/dev\\/console\nstartup crond  [  OK  ]\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-userdata: failed to read instance id\n===== cloud-final: system completely up in 125.36 seconds ====\nwget: can't connect to remote host (169.254.169.254): No route to host\nwget: can't connect to remote host (169.254.169.254): No route to host\nwget: can't connect to remote host (169.254.169.254): No route to host\n  instance-id:\n  public-ipv4:\n  local-ipv4 :\n=> First-Boot Sequence:\nsetting shared object cache [running ldconfig]  [  OK  ]\n-----------------------------------------------------------------------------------------\n\n\n----------------------------------------------------------------------------------------\n# iptables-save:\n\n# Generated by iptables-save v1.4.4 on Fri Apr  1 11:11:14 2011\n*nat\n:PREROUTING ACCEPT [236:77554]\n:OUTPUT ACCEPT [9:540]\n:POSTROUTING ACCEPT [11:1424]\n:nova-compute-OUTPUT - [0:0]\n:nova-compute-POSTROUTING - [0:0]\n:nova-compute-PREROUTING - [0:0]\n:nova-compute-floating-snat - [0:0]\n:nova-compute-snat - [0:0]\n:nova-network-OUTPUT - [0:0]\n:nova-network-POSTROUTING - [0:0]\n:nova-network-PREROUTING - [0:0]\n:nova-network-floating-snat - [0:0]\n:nova-network-snat - [0:0]\n:nova-postrouting-bottom - [0:0]\n-A PREROUTING -j nova-compute-PREROUTING\n-A PREROUTING -j nova-network-PREROUTING\n-A OUTPUT -j nova-compute-OUTPUT\n-A OUTPUT -j nova-network-OUTPUT\n-A POSTROUTING -j nova-compute-POSTROUTING\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p tcp -j MASQUERADE --to-ports 1024-65535\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p udp -j MASQUERADE --to-ports 1024-65535\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -j MASQUERADE\n-A POSTROUTING -j nova-network-POSTROUTING\n-A POSTROUTING -j nova-postrouting-bottom\n-A nova-compute-snat -j nova-compute-floating-snat\n-A nova-network-POSTROUTING -s 10.0.0.0/8 -d 10.128.0.0/24 -j ACCEPT\n-A nova-network-POSTROUTING -s 10.0.0.0/8 -d 10.0.0.0/8 -j ACCEPT\n-A nova-network-PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 192.168.32.202:8773\n-A nova-network-snat -j nova-network-floating-snat\n-A nova-network-snat -s 10.0.0.0/8 -j SNAT --to-source 192.168.32.202\n-A nova-postrouting-bottom -j nova-compute-snat\n-A nova-postrouting-bottom -j nova-network-snat\nCOMMIT\n# Completed on Fri Apr  1 11:11:14 2011\n# Generated by iptables-save v1.4.4 on Fri Apr  1 11:11:14 2011\n*filter\n:INPUT ACCEPT [127695:10670335]\n:FORWARD ACCEPT [4:1776]\n:OUTPUT ACCEPT [127613:10823851]\n:nova-compute-FORWARD - [0:0]\n:nova-compute-INPUT - [0:0]\n:nova-compute-OUTPUT - [0:0]\n:nova-compute-inst-1 - [0:0]\n:nova-compute-local - [0:0]\n:nova-compute-sg-fallback - [0:0]\n:nova-filter-top - [0:0]\n:nova-network-FORWARD - [0:0]\n:nova-network-INPUT - [0:0]\n:nova-network-OUTPUT - [0:0]\n:nova-network-local - [0:0]\n-A INPUT -j nova-compute-INPUT\n-A INPUT -i virbr0 -p udp -m udp --dport 53 -j ACCEPT\n-A INPUT -i virbr0 -p tcp -m tcp --dport 53 -j ACCEPT\n-A INPUT -i virbr0 -p udp -m udp --dport 67 -j ACCEPT\n-A INPUT -i virbr0 -p tcp -m tcp --dport 67 -j ACCEPT\n-A INPUT -j nova-network-INPUT\n-A FORWARD -j nova-filter-top\n-A FORWARD -j nova-compute-FORWARD\n-A FORWARD -d 192.168.122.0/24 -o virbr0 -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A FORWARD -s 192.168.122.0/24 -i virbr0 -j ACCEPT\n-A FORWARD -i virbr0 -o virbr0 -j ACCEPT\n-A FORWARD -o virbr0 -j REJECT --reject-with icmp-port-unreachable\n-A FORWARD -i virbr0 -j REJECT --reject-with icmp-port-unreachable\n-A FORWARD -j nova-network-FORWARD\n-A OUTPUT -j nova-filter-top\n-A OUTPUT -j nova-compute-OUTPUT\n-A OUTPUT -j nova-network-OUTPUT\n-A nova-compute-inst-1 -m state --state INVALID -j DROP\n-A nova-compute-inst-1 -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A nova-compute-inst-1 -s 10.0.0.1/32 -p udp -m udp --sport 67 --dport 68 -j ACCEPT\n-A nova-compute-inst-1 -s 10.0.0.0/28 -j ACCEPT\n-A nova-compute-inst-1 -p icmp -j ACCEPT\n-A nova-compute-inst-1 -p tcp -m tcp --dport 22 -j ACCEPT\n-A nova-compute-inst-1 -j nova-compute-sg-fallback\n-A nova-compute-local -d 10.0.0.2/32 -j nova-compute-inst-1\n-A nova-compute-sg-fallback -j DROP\n-A nova-filter-top -j nova-compute-local\n-A nova-filter-top -j nova-network-local\nCOMMIT\n# Completed on Fri Apr  1 11:11:14 2011\n----------------------------------------------------------------------------", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/746909", 
    "owner": "None", 
    "id": 746909, 
    "index": 2092, 
    "created": "2011-04-01 02:12:36.287262+00:00", 
    "title": "Cannot ping or ssh instance when network manager is FlatManager", 
    "comments": [
        {
            "content": "I had asked the same question when I was using Bexar version. But I didn't get it solved. I tried the newest version of cactus, but I failed too. Could anyone help me? I will paste version info and related logs below.\n\nBTW, I installed all in one machine.\n\n---------------------------------------------------------------\nVersion of nova-compute:  2011.2~bzr930-0ubuntu0ppa1~maverick1\n---------------------------------------------------------------\n\n\n---------------------------------------------------------------------\neuca-describe-instances:\n\nRESERVATION     r-80iakhmt      IRT     default\nINSTANCE        i-00000001      ami-43878e18    10.0.0.2        10.0.0.2        running mykey (IRT, ubuntu7)    0               m1.tiny 2011-04-01T02:05:19Z    nova\n---------------------------------------------------------------------\n\n\n-----------------------------------------------------------------------\nnova.conf:\n\n--sql_connection=mysql://root:nova@ubuntu7/nova\n--s3_host=ubuntu7\n--rabbit_host=192.168.32.202\n--cc_host=192.168.32.202\n--ec2_url=http://192.168.32.202:8773/services/Cloud\n\n--daemonize=1\n\n--dhcpbridge_flagfile=/etc/nova/nova.conf\n--dhcpbridge=/usr/bin/nova-dhcpbridge\n\n--FAKE_subdomain=ec2\n\n--ca_path=/var/lib/nova/CA\n--keys_path=/var/lib/nova/keys\n--networks_path=/var/lib/nova/networks\n--instances_path=/var/lib/nova/instances\n--images_path=/var/lib/nova/images\n--buckets_path=/var/lib/nova/buckets\n\n--libvirt_type=kvm\n\n--network_manager=nova.network.manager.FlatManager\n\n--vlan_interface=eth0\n\n--logdir=/var/log/nova\n--verbose\n--volume_group=ubuntu7\n--fixed_range=192.168.2.64/26\n--network_size=64\n--lock_path=/var/lib/nova/tmp\n---------------------------------------------------------------------\n\n---------------------------------------------------------------------\nnova-compute.log:\n\n2011-04-01 11:02:07,566 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.api' from '/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/api.pyc'> from (pid=6662) __get_backe\nnd /usr/lib/pymodules/python2.6/nova/utils.py:427\n2011-04-01 11:02:07,653 DEBUG nova.virt.libvirt_conn [-] Connecting to libvirt: qemu:///system from (pid=6662) _get_connection /usr/lib/pymodules/python2.6/nova/virt/libvirt_con\nn.py:248\n2011-04-01 11:02:08,136 INFO nova.virt.libvirt_conn [-] Compute_service record created for ubuntu7\n2011-04-01 11:02:08,139 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:02:08,186 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute.ubuntu7 from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:02:08,226 INFO nova.rpc [-] Created 'compute_fanout' fanout exchange with 'compute' routing key\n2011-04-01 11:02:08,226 DEBUG nova.rpc [-] Initing the Adapter Consumer for compute from (pid=6662) __init__ /usr/lib/pymodules/python2.6/nova/rpc.py:148\n2011-04-01 11:05:19,994 DEBUG nova.rpc [-] received {'_context_request_id': 'FM0PYJP-UO1VRGMHOLGD', '_context_read_deleted': False, 'args': {'instance_id': 1, 'injected_files':\nNone, 'availability_zone': None}, '_context_is_admin': True, '_context_timestamp': '2011-04-01T02:05:19Z', '_context_user': 'anne', 'method': 'run_instance', '_context_project':\n 'IRT', '_context_remote_address': '192.168.32.202'} from (pid=6662) _receive /usr/lib/pymodules/python2.6/nova/rpc.py:167\n2011-04-01 11:05:19,994 DEBUG nova.rpc [-] unpacked context: {'timestamp': '2011-04-01T02:05:19Z', 'remote_address': '192.168.32.202', 'project': 'IRT', 'is_admin': True, 'user'\n: 'anne', 'request_id': 'FM0PYJP-UO1VRGMHOLGD', 'read_deleted': False} from (pid=6662) _unpack_context /usr/lib/pymodules/python2.6/nova/rpc.py:331\n2011-04-01 11:05:20,050 AUDIT nova.compute.manager [FM0PYJP-UO1VRGMHOLGD anne IRT] instance 1: starting...\n2011-04-01 11:05:20,195 DEBUG nova.rpc [-] Making asynchronous call on network ... from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:350\n2011-04-01 11:05:20,196 DEBUG nova.rpc [-] MSG_ID is 6437cf6b126f47438423453fe573a783 from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:353\n2011-04-01 11:05:20,518 DEBUG nova.rpc [-] Making asynchronous call on network.ubuntu7 ... from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:350\n2011-04-01 11:05:20,518 DEBUG nova.rpc [-] MSG_ID is 5992d3c83f894779a4f61429bd94a8d2 from (pid=6662) call /usr/lib/pymodules/python2.6/nova/rpc.py:353\n2011-04-01 11:05:20,911 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: starting toXML method from (pid=6662) to_xml /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:941\n2011-04-01 11:05:21,033 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: finished toXML method from (pid=6662) to_xml /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:985\n2011-04-01 11:05:21,084 INFO nova [-] called setup_basic_filtering in nwfilter\n2011-04-01 11:05:21,084 INFO nova [-] ensuring static filters\n2011-04-01 11:05:21,187 INFO nova [-] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0x4757390>\n2011-04-01 11:05:21,188 INFO nova [-] <nova.db.sqlalchemy.models.SecurityGroupIngressRule object at 0x47575d0>\n2011-04-01 11:05:21,194 DEBUG nova.utils [-] Attempting to grab semaphore \"iptables\" for method \"apply\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,194 DEBUG nova.utils [-] Attempting to grab file lock \"iptables\" for method \"apply\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:599\n2011-04-01 11:05:21,200 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-save -t filter from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,262 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,276 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-save -t nat from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,296 DEBUG nova.utils [-] Running cmd (subprocess): sudo iptables-restore from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,339 DEBUG nova.utils [-] Running cmd (subprocess): mkdir -p /var/lib/nova/instances/instance-00000001/ from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,361 INFO nova.virt.libvirt_conn [-] instance instance-00000001: Creating image\n2011-04-01 11:05:21,432 DEBUG nova.utils [-] Attempting to grab semaphore \"59a07b31\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,450 DEBUG nova.utils [-] Running cmd (subprocess): cp /var/lib/nova/instances/_base/59a07b31 /var/lib/nova/instances/instance-00000001/kernel from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,487 DEBUG nova.utils [-] Attempting to grab semaphore \"456ef2cb\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,506 DEBUG nova.utils [-] Running cmd (subprocess): cp /var/lib/nova/instances/_base/456ef2cb /var/lib/nova/instances/instance-00000001/ramdisk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,546 DEBUG nova.utils [-] Attempting to grab semaphore \"43878e18_sm\" for method \"call_if_not_exists\"... from (pid=6662) inner /usr/lib/pymodules/python2.6/nova/utils.py:594\n2011-04-01 11:05:21,598 DEBUG nova.utils [-] Running cmd (subprocess): qemu-img create -f qcow2 -o cluster_size=2M,backing_file=/var/lib/nova/instances/_base/43878e18_sm /var/lib/nova/instances/instance-00000001/disk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:21,902 INFO nova.virt.libvirt_conn [-] instance instance-00000001: injecting key into image 1132957208\n2011-04-01 11:05:21,914 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -c /dev/nbd15 /var/lib/nova/instances/instance-00000001/disk from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:22,944 DEBUG nova.utils [-] Running cmd (subprocess): sudo tune2fs -c 0 -i 0 /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,556 DEBUG nova.utils [-] Running cmd (subprocess): sudo mount /dev/nbd15 /tmp/tmpWcAFXb from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,617 DEBUG nova.utils [-] Running cmd (subprocess): sudo mkdir -p /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,627 DEBUG nova.utils [-] Running cmd (subprocess): sudo chown root /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,644 DEBUG nova.utils [-] Running cmd (subprocess): sudo chmod 700 /tmp/tmpWcAFXb/root/.ssh from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,657 DEBUG nova.utils [-] Running cmd (subprocess): sudo tee -a /tmp/tmpWcAFXb/root/.ssh/authorized_keys from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:24,682 DEBUG nova.utils [-] Running cmd (subprocess): sudo umount /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:25,084 DEBUG nova.utils [-] Running cmd (subprocess): rmdir /tmp/tmpWcAFXb from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:25,121 DEBUG nova.utils [-] Running cmd (subprocess): sudo qemu-nbd -d /dev/nbd15 from (pid=6662) execute /usr/lib/pymodules/python2.6/nova/utils.py:150\n2011-04-01 11:05:27,122 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: is running from (pid=6662) spawn /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:570\n2011-04-01 11:05:27,315 DEBUG nova.virt.libvirt_conn [-] instance instance-00000001: booted from (pid=6662) _wait_for_boot /usr/lib/pymodules/python2.6/nova/virt/libvirt_conn.py:581\n-----------------------------------------------------------------------------------------\n\n\n-----------------------------------------------------------------------------------------\nlog of euca-get-output: \n\n\nttylinux 12.1\n > http:\\/\\/ttylinux.org\\/\n > hostname: ttylinux_host\n\nload Kernel Module: acpiphp  [  OK  ]\nload Kernel Module: e1000  [  OK  ]\nload Kernel Module: ne2k-pci  [  OK  ]\n[    0.981490] ACPI: PCI Interrupt Link [LNKC] enabled at IRQ 11\nload Kernel Module: 8139cp  [  OK  ]\nload Kernel Module: pcnet32  [  OK  ]\nload Kernel Module: mii  [  OK  ]\nload Kernel Module: ip_tables  [  OK  ]\nfile systems checked  [  OK  ]\nmounting local file systems  [  OK  ]\nsetting up system clock [utc] Fri Apr  1 02:05:31 UTC 2011  [  OK  ]\nstty: \\/dev\\/console\nstty: \\/dev\\/console\ninitializing random number generator  [WATING].. [  OK  ]\nstty: \\/dev\\/console\nstartup klogd  [  OK  ]\nstartup syslogd  [  OK  ]\nstty: \\/dev\\/console\nstty: \\/dev\\/console\nbringing up loopback interface lo  [  OK  ]\nstty: \\/dev\\/console\nudhcpc (v1.17.2) started\nSending discover...\nSending select for 192.168.32.191...\nLease of 192.168.32.191 obtained, lease time 86400\nstarting DHCP forEthernet interface eth0  [  OK  ]\ncloud-setup: checking http:\\/\\/169.254.169.254\\/2009-04-04\\/meta-data\\/instance-id\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 1\\/30: up 2.05. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 2\\/30: up 6.08. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 3\\/30: up 9.09. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 4\\/30: up 13.12. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 5\\/30: up 16.13. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 6\\/30: up 20.16. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 7\\/30: up 23.16. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 8\\/30: up 27.19. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 9\\/30: up 30.20. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 10\\/30: up 34.23. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 11\\/30: up 37.24. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 12\\/30: up 41.26. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 13\\/30: up 44.27. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 14\\/30: up 48.30. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 15\\/30: up 51.31. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 16\\/30: up 55.34. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 17\\/30: up 58.35. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 18\\/30: up 62.38. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 19\\/30: up 65.39. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 20\\/30: up 69.42. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 21\\/30: up 72.43. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 22\\/30: up 76.46. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 23\\/30: up 79.47. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 24\\/30: up 83.50. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 25\\/30: up 86.51. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 26\\/30: up 90.54. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 27\\/30: up 93.55. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 28\\/30: up 97.58. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 29\\/30: up 100.59. request failed\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-setup: failed 30\\/30: up 104.62. request failed\ncloud-setup: after 30 fails, debugging\ncloud-setup: running debug (30 tries reached)\n############ debug start ##############\n### \\/etc\\/rc.d\\/init.d\\/sshd start\nstty: \\/dev\\/console\ngenerating DSS host key  [WATING].. [  OK  ]\ngenerating RSA host key  [WATING].. [  OK  ]\nstartup dropbear  [  OK  ]\n### ifconfig -a\neth0      Link encap:Ethernet  HWaddr 02:16:3E:23:50:01\n          inet addr:192.168.32.191  Bcast:192.168.32.255  Mask:255.255.255.0\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:32 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:98 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:2532 (2.4 KiB)  TX bytes:4900 (4.7 KiB)\n          Interrupt:11 Base address:0xc000\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\n          RX packets:60 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:5280 (5.1 KiB)  TX bytes:5280 (5.1 KiB)\n\n### route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n192.168.32.0    0.0.0.0         255.255.255.0   U     0      0        0 eth0\n0.0.0.0         192.168.32.254  0.0.0.0         UG    0      0        0 eth0\n### cat \\/etc\\/resolv.conf\ncat: can't open '\\/etc\\/resolv.conf': No such file or directory\n### ping -c 5 192.168.32.254\nPING 192.168.32.254 (192.168.32.254): 56 data bytes\n\n--- 192.168.32.254 ping statistics ---\n5 packets transmitted, 0 packets received, 100% packet loss\n\\/etc\\/rc.d\\/init.d\\/cloud-functions: line 41: \\/etc\\/resolv.conf: No such file or directory\n### pinging nameservers\n### uname -a\nLinux ttylinux_host 2.6.35-22-virtual #35-Ubuntu SMP Sat Oct 16 23:19:29 UTC 2010 x86_64 GNU\\/Linux\n### lsmod\nModule                  Size  Used by\nip_tables              18737  0\nx_tables               24391  1 ip_tables\npcnet32                36585  0\n8139cp                 20333  0\nmii                     5261  2 pcnet32,8139cp\nne2k_pci                7802  0\n8390                    9897  1 ne2k_pci\ne1000                 110274  0\nacpiphp                18752  0\n### dmesg | tail\n<6>[    0.969912] ne2k-pci.c:v1.03 9\\/22\\/2003 D. Becker\\/P. Gortmaker\n<6>[    0.981222] 8139cp: 8139cp: 10\\/100 PCI Ethernet driver v1.3 (Mar 22, 2004)\n<4>[    0.981490] ACPI: PCI Interrupt Link [LNKC] enabled at IRQ 11\n<6>[    0.982525] 8139cp 0000:00:03.0: PCI INT A -> Link[LNKC] -> GSI 11 (level, high) -> IRQ 11\n<6>[    0.986202] 8139cp 0000:00:03.0: eth0: RTL-8139C+ at 0xffffc900001dc000, 02:16:3e:23:50:01, IRQ 11\n<7>[    0.986240] 8139cp 0000:00:03.0: setting latency timer to 64\n<6>[    0.995496] pcnet32: pcnet32.c:v1.35 21.Apr.2008 <email address hidden>\n<6>[    1.014356] ip_tables: (C) 2000-2006 Netfilter Core Team\n<6>[    1.495942] eth0: link up, 100Mbps, full-duplex, lpa 0x05E1\n<7>[   12.190079] eth0: no IPv6 routers present\n### tail -n 25 \\/var\\/log\\/messages\nApr  1 02:05:31 ttylinux_host syslog.info syslogd started: BusyBox v1.17.2\nApr  1 02:05:31 ttylinux_host user.info kernel: [    1.495942] eth0: link up, 100Mbps, full-duplex, lpa 0x05E1\nApr  1 02:05:42 ttylinux_host user.debug kernel: [   12.190079] eth0: no IPv6 routers present\nApr  1 02:07:17 ttylinux_host authpriv.info dropbear[267]: Running in background\n############ debug end   ##############\ncloud-setup: failed to read iid from metadata. tried 30\nstty: \\/dev\\/console\nsshd is already running.\nstty: \\/dev\\/console\nstartup inetd  [  OK  ]\nstty: \\/dev\\/console\nstartup crond  [  OK  ]\nwget: can't connect to remote host (169.254.169.254): No route to host\ncloud-userdata: failed to read instance id\n===== cloud-final: system completely up in 125.36 seconds ====\nwget: can't connect to remote host (169.254.169.254): No route to host\nwget: can't connect to remote host (169.254.169.254): No route to host\nwget: can't connect to remote host (169.254.169.254): No route to host\n  instance-id:\n  public-ipv4:\n  local-ipv4 :\n=> First-Boot Sequence:\nsetting shared object cache [running ldconfig]  [  OK  ]\n-----------------------------------------------------------------------------------------\n\n\n----------------------------------------------------------------------------------------\n# iptables-save:\n\n# Generated by iptables-save v1.4.4 on Fri Apr  1 11:11:14 2011\n*nat\n:PREROUTING ACCEPT [236:77554]\n:OUTPUT ACCEPT [9:540]\n:POSTROUTING ACCEPT [11:1424]\n:nova-compute-OUTPUT - [0:0]\n:nova-compute-POSTROUTING - [0:0]\n:nova-compute-PREROUTING - [0:0]\n:nova-compute-floating-snat - [0:0]\n:nova-compute-snat - [0:0]\n:nova-network-OUTPUT - [0:0]\n:nova-network-POSTROUTING - [0:0]\n:nova-network-PREROUTING - [0:0]\n:nova-network-floating-snat - [0:0]\n:nova-network-snat - [0:0]\n:nova-postrouting-bottom - [0:0]\n-A PREROUTING -j nova-compute-PREROUTING\n-A PREROUTING -j nova-network-PREROUTING\n-A OUTPUT -j nova-compute-OUTPUT\n-A OUTPUT -j nova-network-OUTPUT\n-A POSTROUTING -j nova-compute-POSTROUTING\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p tcp -j MASQUERADE --to-ports 1024-65535\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -p udp -j MASQUERADE --to-ports 1024-65535\n-A POSTROUTING -s 192.168.122.0/24 ! -d 192.168.122.0/24 -j MASQUERADE\n-A POSTROUTING -j nova-network-POSTROUTING\n-A POSTROUTING -j nova-postrouting-bottom\n-A nova-compute-snat -j nova-compute-floating-snat\n-A nova-network-POSTROUTING -s 10.0.0.0/8 -d 10.128.0.0/24 -j ACCEPT\n-A nova-network-POSTROUTING -s 10.0.0.0/8 -d 10.0.0.0/8 -j ACCEPT\n-A nova-network-PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 192.168.32.202:8773\n-A nova-network-snat -j nova-network-floating-snat\n-A nova-network-snat -s 10.0.0.0/8 -j SNAT --to-source 192.168.32.202\n-A nova-postrouting-bottom -j nova-compute-snat\n-A nova-postrouting-bottom -j nova-network-snat\nCOMMIT\n# Completed on Fri Apr  1 11:11:14 2011\n# Generated by iptables-save v1.4.4 on Fri Apr  1 11:11:14 2011\n*filter\n:INPUT ACCEPT [127695:10670335]\n:FORWARD ACCEPT [4:1776]\n:OUTPUT ACCEPT [127613:10823851]\n:nova-compute-FORWARD - [0:0]\n:nova-compute-INPUT - [0:0]\n:nova-compute-OUTPUT - [0:0]\n:nova-compute-inst-1 - [0:0]\n:nova-compute-local - [0:0]\n:nova-compute-sg-fallback - [0:0]\n:nova-filter-top - [0:0]\n:nova-network-FORWARD - [0:0]\n:nova-network-INPUT - [0:0]\n:nova-network-OUTPUT - [0:0]\n:nova-network-local - [0:0]\n-A INPUT -j nova-compute-INPUT\n-A INPUT -i virbr0 -p udp -m udp --dport 53 -j ACCEPT\n-A INPUT -i virbr0 -p tcp -m tcp --dport 53 -j ACCEPT\n-A INPUT -i virbr0 -p udp -m udp --dport 67 -j ACCEPT\n-A INPUT -i virbr0 -p tcp -m tcp --dport 67 -j ACCEPT\n-A INPUT -j nova-network-INPUT\n-A FORWARD -j nova-filter-top\n-A FORWARD -j nova-compute-FORWARD\n-A FORWARD -d 192.168.122.0/24 -o virbr0 -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A FORWARD -s 192.168.122.0/24 -i virbr0 -j ACCEPT\n-A FORWARD -i virbr0 -o virbr0 -j ACCEPT\n-A FORWARD -o virbr0 -j REJECT --reject-with icmp-port-unreachable\n-A FORWARD -i virbr0 -j REJECT --reject-with icmp-port-unreachable\n-A FORWARD -j nova-network-FORWARD\n-A OUTPUT -j nova-filter-top\n-A OUTPUT -j nova-compute-OUTPUT\n-A OUTPUT -j nova-network-OUTPUT\n-A nova-compute-inst-1 -m state --state INVALID -j DROP\n-A nova-compute-inst-1 -m state --state RELATED,ESTABLISHED -j ACCEPT\n-A nova-compute-inst-1 -s 10.0.0.1/32 -p udp -m udp --sport 67 --dport 68 -j ACCEPT\n-A nova-compute-inst-1 -s 10.0.0.0/28 -j ACCEPT\n-A nova-compute-inst-1 -p icmp -j ACCEPT\n-A nova-compute-inst-1 -p tcp -m tcp --dport 22 -j ACCEPT\n-A nova-compute-inst-1 -j nova-compute-sg-fallback\n-A nova-compute-local -d 10.0.0.2/32 -j nova-compute-inst-1\n-A nova-compute-sg-fallback -j DROP\n-A nova-filter-top -j nova-compute-local\n-A nova-filter-top -j nova-network-local\nCOMMIT\n# Completed on Fri Apr  1 11:11:14 2011\n----------------------------------------------------------------------------", 
            "date_created": "2011-04-01 02:12:36.287262+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "In FlatManager you need to explicitly route 169.254.169.254 to the API server, something like:\r\niptables -t nat -A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination <NOVA-API-SERVER-IP>:8773\r\nDid you do that ?", 
            "date_created": "2011-04-01 12:37:30.548294+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "There is \"-A nova-network-PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 192.168.32.202:8773\" in iptables, so I think I have done it.", 
            "date_created": "2011-04-01 15:34:03.338635+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Might be a duplicate of bug 719798 ", 
            "date_created": "2011-04-04 09:49:27.719344+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "In addition, I got the image from here \"wget http://smoser.brickies.net/ubuntu/ttylinux-uec/ttylinux-uec-amd64-12.1_2.6.35-22_1.tar.gz\".\n\nI have tried with the version in ppa:nova-core/release, and it failed too. Could anybody help me?", 
            "date_created": "2011-06-10 08:48:43.286854+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }
    ]
}