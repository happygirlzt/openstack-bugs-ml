{
    "status": "Won't Fix", 
    "last_updated": "2017-10-11 09:19:04.255698+00:00", 
    "description": "nova version: mitaka\n\nI imported into Openstack a Linux Centos machine. The instance does not have support for VirtIO. I had to import the boot disk as hda (decorating the glance image with hw_disk_bus='ide'). Now I have this instance with two volumes attached, but when I try to boot the following XML is generated.\n\n<disk type='network' device='disk'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<driver name='qemu' type='raw' cache='writeback'/>\n\u00a0\u00a0[..CUT...]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<target dev='hda' bus='ide'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<serial>c3841ee3-3f9a-457e-b504-d35e367a1193</serial>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<address type='drive' controller='0' bus='0' target='0' unit='0'/>\n\u00a0\u00a0\u00a0\u00a0</disk>\n\u00a0\u00a0\u00a0\u00a0<disk type='network' device='disk'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<driver name='qemu' type='raw' cache='writeback'/>\n\u00a0\u00a0[..CUT...]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<target dev='vda' bus='ide'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<serial>63e05c59-8de1-4908-a3dd-3f2261c82ea9</serial>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<address type='drive' controller='0' bus='0' target='0' unit='0'/>\n\u00a0\u00a0\u00a0\u00a0</disk>\n\nThis is because the two cinder volumes attached appear as /dev/hda and /dev/sda, and this creates a duplicate disk in the XML.\n\nThe machine does not boot, and in the nova-compute.log I find a stacktrace.\n\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     incoming.message))\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 185, in _dispatch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 110, in wrapped\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     payload)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 89, in wrapped\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 359, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance=instance)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 328, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 409, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 387, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 375, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2606, in start_instance\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._power_on(context, instance)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2579, in _power_on\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     block_device_info)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2623, in power_on\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._hard_reboot(context, instance, network_info, block_device_info)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2514, in _hard_reboot\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     vifs_already_plugged=True)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4926, in _create_domain_and_network\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     xml, pause=pause, power_on=power_on)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4857, in _create_domain\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     guest.launch(pause=pause)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 142, in launch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._encoded_xml, errors='ignore')\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 137, in launch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return self._domain.createWithFlags(flags)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(c, e, tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 1065, in createWithFlags\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher libvirtError: internal error: process exited while connecting to monitor: [..CUT..] Duplicate ID 'drive-ide0-0-0' for drive\n\nIn liberty the two disked attached where marked as /dev/sda /dev/hdb, and everything was working. In mitaka I see this behavior where the two attachments are marked as /dev/sda and /dev/hda and the VM is not booting.", 
    "tags": [
        "openstack-version.liberty"
    ], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1686999", 
    "owner": "None", 
    "id": 1686999, 
    "index": 6825, 
    "created": "2017-04-28 11:10:15.985424+00:00", 
    "title": "Instance with two attached volumes fails to start with error: Duplicate ID 'drive-ide0-0-0' for drive", 
    "comments": [
        {
            "content": "  \nI imported into Openstack a Linux Centos machine. The instance does not have support for VirtIO. I had to import the boot disk as hda. Now I have this instance with two volumes attached, but when I try to boot the following XML is generated.\n\n<disk type='network' device='disk'>\n      <driver name='qemu' type='raw' cache='writeback'/>\n  [..CUT...]\n      <target dev='hda' bus='ide'/>\n      <serial>c3841ee3-3f9a-457e-b504-d35e367a1193</serial>\n      <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n    </disk>\n    <disk type='network' device='disk'>\n      <driver name='qemu' type='raw' cache='writeback'/>\n  [..CUT...]\n      <target dev='vda' bus='ide'/>\n      <serial>63e05c59-8de1-4908-a3dd-3f2261c82ea9</serial>\n      <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n    </disk>\n\nThe machine does not boot, and in the nova-compute.log I find a stacktrace.\n\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 138, in _dispatch_and_reply\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     incoming.message))\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 185, in _dispatch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 127, in _do_dispatch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 110, in wrapped\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     payload)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 89, in wrapped\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 359, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance=instance)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 328, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 409, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 387, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 375, in decorated_function\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2606, in start_instance\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._power_on(context, instance)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2579, in _power_on\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     block_device_info)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2623, in power_on\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._hard_reboot(context, instance, network_info, block_device_info)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2514, in _hard_reboot\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     vifs_already_plugged=True)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4926, in _create_domain_and_network\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     xml, pause=pause, power_on=power_on)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4857, in _create_domain\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     guest.launch(pause=pause)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 142, in launch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self._encoded_xml, errors='ignore')\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     self.force_reraise()\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 137, in launch\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     return self._domain.createWithFlags(flags)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     rv = execute(f, *args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     six.reraise(c, e, tb)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     rv = meth(*args, **kwargs)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 1065, in createWithFlags\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2017-04-28 12:56:35.356 43378 ERROR oslo_messaging.rpc.dispatcher libvirtError: internal error: process exited while connecting to monitor: [..CUT..] Duplicate ID 'drive-ide0-0-0' for drive\n\nIn liberty the two disked attached where marked as /dev/sda /dev/hdb, and everything was working. In mitaka I see this behavior where the two attachments are marked as /dev/sda and /dev/hda and the VM is not booting.", 
            "date_created": "2017-04-28 11:10:15.985424+00:00", 
            "author": "https://api.launchpad.net/1.0/~zioproto"
        }, 
        {
            "content": "As a workaround to start the VM I did the following\n\n1) I got a snapshot of the volume that was attached as /dev/hda\n2) Using the snapshot I created a new volume \n3) I attached also this third volume to the instance, and this attachment was marked by nova as /dev/hdb.\n4) I now detached the volume that was marked as /dev/hda\n5) Now you have two volumes attached marked as /dev/hdb and /dev/sda\n\nthe machine now boots correctly.", 
            "date_created": "2017-04-28 11:29:11.625915+00:00", 
            "author": "https://api.launchpad.net/1.0/~zioproto"
        }, 
        {
            "content": "Automatically discovered version liberty in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 15:57:45.046673+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I think this is one of those edge cases that the work around you provided is the right way through. The decorating on images is meant to be part of the original image build process, and doesn't magically fix things.", 
            "date_created": "2017-07-28 12:17:59.961750+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "I wonder who could control disk address in xml file....\n\nwhile i edit xml by force, openstack roll back it.\n\n\ni solved issue by using Saverio Proto's work-around...\n\nbut it is very annoying situation when it occur to me\n\npatch is needed...", 
            "date_created": "2017-10-11 09:19:03.520001+00:00", 
            "author": "https://api.launchpad.net/1.0/~plumage"
        }
    ]
}