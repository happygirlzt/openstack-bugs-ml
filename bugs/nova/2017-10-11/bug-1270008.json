{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 09:07:28.658949+00:00", 
    "description": "I am using stable havana nova.\nI got this exception while I delete my kvm instance, but the qemu process of this instance become to 'defunct' status by some unknown reason(may be a qemu/kvm bug), and then the periodic task stopped unexpectly everytime, then the resources of this compute node will never be reported, because of this exception below, I think we should handle this exception while running periodic task.\n2014-01-16 15:53:28.421 47954 ERROR nova.openstack.common.periodic_task [-] Error during ComputeManager.update_available_resource: cannot get CPU affinity of process 62279: No such process\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task Traceback (most recent call last):\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/periodic_task.py\", line 180, in run_periodic_tasks\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     task(self, context)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 5617, in update_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rt.update_available_resource(context)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     return f(*args, **kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/compute/resource_tracker.py\", line 281, in update_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     resources = self.driver.get_available_resource(self.nodename)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4275, in get_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     stats = self.host_state.get_host_stats(refresh=True)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5350, in get_host_stats\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     self.update_status()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5386, in update_status\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     data[\"vcpus_used\"] = self.driver.get_vcpu_used()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3949, in get_vcpu_used\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     vcpus = dom.vcpus()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rv = execute(f,*args,**kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rv = meth(*args,**kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2222, in vcpus\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task libvirtError: cannot get CPU affinity of process 62279: No such process\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task\n\nand the exception while I delete this instance:\n2014-01-16 15:13:26.640 47954 ERROR nova.openstack.common.rpc.amqp [req-03ed9463-0740-4423-bf1e-2334ed29ee5c 9537af4d80e546409b670673f9a81388 3179fc9d69d747b4a06f27a6d2334050] Exception during message handling\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 400, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 90, in wrapped\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 73, in wrapped\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 290, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     pass\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 276, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 341, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 318, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 305, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2128, in terminate_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     do_terminate_instance(instance, bdms, clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2120, in do_terminate_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     reservations=reservations)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 105, in inner\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = f(*args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2091, in _delete_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     user_id=user_id)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2063, in _delete_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     clean_shutdown=clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1984, in _shutdown_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     requested_networks)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1974, in _shutdown_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     context=context, clean_shutdown=clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 883, in destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     self._destroy(instance)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 838, in _destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     instance=instance)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 810, in _destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     virt_dom.destroy()\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = execute(f,*args,**kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = meth(*args,**kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 760, in destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     if ret == -1: raise libvirtError ('virDomainDestroy() failed', dom=self)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp libvirtError: Failed to terminate process 61945 with SIGKILL: Device or resource busy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp", 
    "tags": [
        "havana-backport-potential", 
        "in-stable-havana"
    ], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1270008", 
    "owner": "https://api.launchpad.net/1.0/~hzwangpan", 
    "id": 1270008, 
    "index": 3765, 
    "created": "2014-01-17 02:08:56.189190+00:00", 
    "title": "periodic tasks will be invalid if a qemu process becomes to defunct status", 
    "comments": [
        {
            "content": "I got this exception while I delete my kvm instance, but the qemu process of this instance become to 'defunct' status by some unknown reason(may be a qemu/kvm bug), and then the periodic task stopped unexpectly everytime, then the resources of tgus compute node will never be reported, because of this exception below, I think we should handle this exception while running periodic task.\n2014-01-16 15:53:28.421 47954 ERROR nova.openstack.common.periodic_task [-] Error during ComputeManager.update_available_resource: cannot get CPU affinity of process 62279: No such process\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task Traceback (most recent call last):\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/periodic_task.py\", line 180, in run_periodic_tasks\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     task(self, context)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 5617, in update_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rt.update_available_resource(context)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     return f(*args, **kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/compute/resource_tracker.py\", line 281, in update_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     resources = self.driver.get_available_resource(self.nodename)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 4275, in get_available_resource\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     stats = self.host_state.get_host_stats(refresh=True)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5350, in get_host_stats\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     self.update_status()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5386, in update_status\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     data[\"vcpus_used\"] = self.driver.get_vcpu_used()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 3949, in get_vcpu_used\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     vcpus = dom.vcpus()\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rv = execute(f,*args,**kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     rv = meth(*args,**kwargs)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 2222, in vcpus\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task     if ret == -1: raise libvirtError ('virDomainGetVcpus() failed', dom=self)\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task libvirtError: cannot get CPU affinity of process 62279: No such process\n2014-01-16 15:53:28.421 47954 TRACE nova.openstack.common.periodic_task\n\nand the exception while I delete this instance:\n2014-01-16 15:13:26.640 47954 ERROR nova.openstack.common.rpc.amqp [req-03ed9463-0740-4423-bf1e-2334ed29ee5c 9537af4d80e546409b670673f9a81388 3179fc9d69d747b4a06f27a6d2334050] Exception during message handling\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 400, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 90, in wrapped\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 73, in wrapped\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 290, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     pass\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 276, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 341, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 318, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 305, in decorated_function\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2128, in terminate_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     do_terminate_instance(instance, bdms, clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/lockutils.py\", line 246, in inner\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2120, in do_terminate_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     reservations=reservations)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 105, in inner\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = f(*args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2091, in _delete_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     user_id=user_id)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2063, in _delete_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     clean_shutdown=clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1984, in _shutdown_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     requested_networks)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1974, in _shutdown_instance\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     context=context, clean_shutdown=clean_shutdown)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 883, in destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     self._destroy(instance)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 838, in _destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     instance=instance)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 810, in _destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     virt_dom.destroy()\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = execute(f,*args,**kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     rv = meth(*args,**kwargs)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 760, in destroy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp     if ret == -1: raise libvirtError ('virDomainDestroy() failed', dom=self)\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp libvirtError: Failed to terminate process 61945 with SIGKILL: Device or resource busy\n2014-01-16 15:13:26.640 47954 TRACE nova.openstack.common.rpc.amqp", 
            "date_created": "2014-01-17 02:08:56.189190+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzwangpan"
        }, 
        {
            "content": "the fix commit is here:\nhttps://review.openstack.org/#/c/67361/", 
            "date_created": "2014-01-17 05:51:17.541631+00:00", 
            "author": "https://api.launchpad.net/1.0/~hzwangpan"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/67361\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=844df860c38ac38550b8d1739fd53131cd7fd864\nSubmitter: Jenkins\nBranch:    master\n\ncommit 844df860c38ac38550b8d1739fd53131cd7fd864\nAuthor: Wangpan <email address hidden>\nDate:   Fri Jan 17 10:35:12 2014 +0800\n\n    libvirt: handle exception while get vcpu info\n    \n    If an exception is raised while get a libvirt domain's vcpu info,\n    the update_available_resource periodic task will be failed, which\n    will result in the resource of this compute node will never be\n    reported.\n    \n    This patch add an exception handling to avoid this situation.\n    Closes-bug: #1270008\n    \n    Change-Id: I69109402416989fdaa421f8dbc72953bd067c407\n", 
            "date_created": "2014-01-26 06:37:34.407060+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/72129", 
            "date_created": "2014-02-09 02:16:17.015732+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/72129\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=83926a0022bbb0b3a68e0a91f7aa0acb1b9cc969\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 83926a0022bbb0b3a68e0a91f7aa0acb1b9cc969\nAuthor: Wangpan <email address hidden>\nDate:   Fri Jan 17 10:35:12 2014 +0800\n\n    libvirt: handle exception while get vcpu info\n    \n    If an exception is raised while get a libvirt domain's vcpu info,\n    the update_available_resource periodic task will be failed, which\n    will result in the resource of this compute node will never be\n    reported.\n    \n    This patch add an exception handling to avoid this situation.\n    Closes-bug: #1270008\n    \n    Change-Id: I69109402416989fdaa421f8dbc72953bd067c407\n    (cherry picked from commit 844df860c38ac38550b8d1739fd53131cd7fd864)\n", 
            "date_created": "2014-03-03 08:30:44.964360+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}