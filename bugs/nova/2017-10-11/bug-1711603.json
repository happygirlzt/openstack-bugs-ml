{
    "status": "Incomplete", 
    "last_updated": "2017-08-22 01:51:48.711254+00:00", 
    "description": "I have deployed Openstack Base bundle cs:~openstack-charmers-next/bundle/openstack-base-xenial-ocata-0 which deploys ceph as storage backend.\nhttps://jujucharms.com/u/openstack-charmers-next/openstack-base-xenial-ocata/\n\nI am unable to launch instance using ceph volume as a boot volume. Launching instance from glance image is also failing. Getting below errors in nova-compute.log:\n\n\n2017-08-18 12:24:02.691 1708784 ERROR nova.virt.libvirt.driver [req-72b3771b-209c-415f-b14c-4e885a72f0b8 ef1fea1a88c744ecb96d08bb56fdc412 5a41e5c16d2c4299b23d26b87ff994aa - - -] [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Failed to start libvirt guest\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [req-72b3771b-209c-415f-b14c-4e885a72f0b8 ef1fea1a88c744ecb96d08bb56fdc412 5a41e5c16d2c4299b23d26b87ff994aa - - -] [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Instance failed to spawn\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Traceback (most recent call last):\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2124, in _build_resources\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     yield resources\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1930, in _build_and_run_instance\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     block_device_info=block_device_info)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2698, in spawn\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     destroy_disks_on_failure=True)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5114, in _create_domain_and_network\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     destroy_disks_on_failure)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self.force_reraise()\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(self.type_, self.value, self.tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5086, in _create_domain_and_network\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     post_xml_callback=post_xml_callback)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5004, in _create_domain\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     guest.launch(pause=pause)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 145, in launch\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self._encoded_xml, errors='ignore')\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self.force_reraise()\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(self.type_, self.value, self.tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 140, in launch\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     return self._domain.createWithFlags(flags)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     rv = execute(f, *args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(c, e, tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     rv = meth(*args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 1065, in createWithFlags\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] libvirtError: internal error: process exited while connecting to monitor: nfig -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-16-instance-00000011/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -drive 'file=rbd:cinder-ceph/volume-2c04ab2b-9e9e-46c8-8995-a33cf1008331:id=cinder-ceph:key=AQA9P5VZMy4BDxAA1U8ELcourkvQE4MgaJPjbw==:auth_supported=cephx\\;none:mon_host=172.16.10.6\\:6789\\;172.16.10.9\\:6789\\;172.16.10.11\\:6789,format=raw,if=none,id=drive-virtio-disk0,serial=2c04ab2b-9e9e-46c8-8995-a33cf1008331,cache=none' -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x3,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=27,id=hostnet0,vhost=on,vhostfd=29 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:f4:e2:46,bus=pci.0,addr=0x2 -add-fd set=2,fd=31 -chardev pty,id=charserial0,logfile=/dev/fdset/2,logap\n\nHowever I am able to launch instance when volume creation step is skipped.\nI tried disabling firewall on all nodes of ceph and openstack. But no luck.\n\nCan someone help?", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1711603", 
    "owner": "https://api.launchpad.net/1.0/~mymzbe", 
    "id": 1711603, 
    "index": 6990, 
    "created": "2017-08-18 12:24:22.726679+00:00", 
    "title": "Unable to Launch instance using ceph boot volume ", 
    "comments": [
        {
            "content": "I have deployed Openstack Base bundle cs:~openstack-charmers-next/bundle/openstack-base-xenial-ocata-0 which deploys ceph as storage backend.\nhttps://jujucharms.com/u/openstack-charmers-next/openstack-base-xenial-ocata/\n\nI am unable to launch instance using ceph volume as a boot volume. Launching instance from glance image is also failing. Getting below errors in nova-compute.log:\n\n\n2017-08-18 12:24:02.691 1708784 ERROR nova.virt.libvirt.driver [req-72b3771b-209c-415f-b14c-4e885a72f0b8 ef1fea1a88c744ecb96d08bb56fdc412 5a41e5c16d2c4299b23d26b87ff994aa - - -] [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Failed to start libvirt guest\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [req-72b3771b-209c-415f-b14c-4e885a72f0b8 ef1fea1a88c744ecb96d08bb56fdc412 5a41e5c16d2c4299b23d26b87ff994aa - - -] [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Instance failed to spawn\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] Traceback (most recent call last):\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2124, in _build_resources\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     yield resources\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1930, in _build_and_run_instance\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     block_device_info=block_device_info)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2698, in spawn\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     destroy_disks_on_failure=True)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5114, in _create_domain_and_network\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     destroy_disks_on_failure)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self.force_reraise()\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(self.type_, self.value, self.tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5086, in _create_domain_and_network\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     post_xml_callback=post_xml_callback)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 5004, in _create_domain\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     guest.launch(pause=pause)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 145, in launch\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self._encoded_xml, errors='ignore')\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     self.force_reraise()\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(self.type_, self.value, self.tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 140, in launch\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     return self._domain.createWithFlags(flags)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     rv = execute(f, *args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     six.reraise(c, e, tb)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     rv = meth(*args, **kwargs)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 1065, in createWithFlags\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0]     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2017-08-18 12:24:03.015 1708784 ERROR nova.compute.manager [instance: 0ff1f63d-e25f-4c75-97a5-05f02f1e6aa0] libvirtError: internal error: process exited while connecting to monitor: nfig -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-16-instance-00000011/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -drive 'file=rbd:cinder-ceph/volume-2c04ab2b-9e9e-46c8-8995-a33cf1008331:id=cinder-ceph:key=AQA9P5VZMy4BDxAA1U8ELcourkvQE4MgaJPjbw==:auth_supported=cephx\\;none:mon_host=172.16.10.6\\:6789\\;172.16.10.9\\:6789\\;172.16.10.11\\:6789,format=raw,if=none,id=drive-virtio-disk0,serial=2c04ab2b-9e9e-46c8-8995-a33cf1008331,cache=none' -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x3,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=27,id=hostnet0,vhost=on,vhostfd=29 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=fa:16:3e:f4:e2:46,bus=pci.0,addr=0x2 -add-fd set=2,fd=31 -chardev pty,id=charserial0,logfile=/dev/fdset/2,logap\n\nHowever I am able to launch instance when volume creation step is skipped.\nI tried disabling firewall on all nodes of ceph and openstack. But no luck.\n\nCan someone help?", 
            "date_created": "2017-08-18 12:24:22.726679+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranitad"
        }, 
        {
            "content": "does the apparmor being checked?", 
            "date_created": "2017-08-18 15:15:11.964083+00:00", 
            "author": "https://api.launchpad.net/1.0/~mymzbe"
        }, 
        {
            "content": "apparmor is enabled on all nodes. \nShould I disable apparmor on all systems?", 
            "date_created": "2017-08-18 17:30:31.909025+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranitad"
        }, 
        {
            "content": "You can try to disable it. Do the compute node able to mount ceph storage? ", 
            "date_created": "2017-08-18 18:32:02.430207+00:00", 
            "author": "https://api.launchpad.net/1.0/~mymzbe"
        }, 
        {
            "content": "Disabling apparmor on all nodes doesn't helped.\n\nGetting below errors when I tried to attach ceph volume to the  ephemeral instace.\n\n2017-08-21 13:02:15.445 170460 ERROR nova.compute.manager [instance: e699e55d-87b6-4f78-9e82-c3607b9e049f]\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server [req-737e10cf-f65d-48b7-977e-f49f882816b9 ef1fea1a88c744ecb96d08bb56fdc412 5a41e5c16d2c4299b23d26b87ff994aa - - -] Exception during message handling\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 155, in _process_incoming\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 222, in dispatch\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 192, in _do_dispatch\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 216, in decorated_function\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 204, in decorated_function\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4777, in attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     do_attach_volume(context, instance, driver_bdm)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 274, in inner\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     return f(*args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4775, in do_attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     bdm.destroy()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4772, in do_attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     return self._attach_volume(context, instance, driver_bdm)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4795, in _attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.volume_api.unreserve_volume(context, bdm.volume_id)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4787, in _attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     do_check_attach=False, do_driver_attach=True)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 48, in wrapped\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     ret_val = method(obj, context, *args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 282, in attach\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     connector)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 273, in attach\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     device_type=self['device_type'], encryption=encryption)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1243, in attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self._disconnect_volume(connection_info, disk_dev)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1232, in attach_volume\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     guest.attach_device(conf, persistent=True, live=live)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 309, in attach_device\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     rv = execute(f, *args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     six.reraise(c, e, tb)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     rv = meth(*args, **kwargs)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-08-21 13:02:15.570 170460 ERROR oslo_messaging.rpc.server\n", 
            "date_created": "2017-08-21 12:06:24.849822+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranitad"
        }, 
        {
            "content": "Also, I am unable to mount ceph storage on compute.", 
            "date_created": "2017-08-21 12:15:03.196856+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranitad"
        }, 
        {
            "content": "root@vm0:~# sudo mount -t ceph 192.168.0.1:6789:/ /mnt/\nmount error 110 = Connection timed out\n", 
            "date_created": "2017-08-21 12:16:14.693498+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranitad"
        }, 
        {
            "content": "Does the ceph server 192.168.0.1 is listening on 6789? On the 192.168.0.1, check listening port, 'netstat -nutlp | grep 6789'.\n\nSeems like nova unable to provision the requested ceph disk.", 
            "date_created": "2017-08-22 01:51:48.190784+00:00", 
            "author": "https://api.launchpad.net/1.0/~mymzbe"
        }
    ]
}