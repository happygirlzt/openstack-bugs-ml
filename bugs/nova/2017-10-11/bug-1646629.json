{
    "status": "Fix Released", 
    "last_updated": "2016-12-15 17:34:49.977317+00:00", 
    "description": "Currently, the docs target can't be run with python 3.x and fail with a trace like this:\n\nTraceback (most recent call last):classification                                                                                                                                                                                                                                          \n  File \"setup.py\", line 29, in <module>\n    pbr=True)\n  File \"/usr/lib/python3.5/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/pbr/builddoc.py\", line 196, in run\n    self._sphinx_run()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/pbr/builddoc.py\", line 150, in _sphinx_run\n    app.build(force_all=self.all_files)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/application.py\", line 261, in build\n    self.builder.build_all()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/builders/__init__.py\", line 211, in build_all\n    self.build(None, summary='all source files', method='all')\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/builders/__init__.py\", line 265, in build\n    self.doctreedir, self.app))\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 547, in update\n    self._read_serial(docnames, app)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 567, in _read_serial\n    self.read_doc(docname, app)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 720, in read_doc\n    pub.publish()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/core.py\", line 217, in publish\n    self.settings)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/io.py\", line 46, in read\n    self.parse()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/readers/__init__.py\", line 78, in parse\n    self.parser.parse(self.input, document)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/__init__.py\", line 172, in parse\n    self.statemachine.run(inputlines, document, inliner=self.inliner)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 170, in run\n    input_source=document['source'])\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2961, in text\n    self.section(title.lstrip(), source, style, lineno + 1, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 327, in section\n    self.new_subsection(title, lineno, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 395, in new_subsection\n    node=section_node, match_titles=True)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 282, in nested_parse\n    node=node, match_titles=match_titles)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2726, in underline\n    self.section(title, source, style, lineno - 1, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 327, in section\n    self.new_subsection(title, lineno, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 395, in new_subsection\n    node=section_node, match_titles=True)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 282, in nested_parse\n    node=node, match_titles=match_titles)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2299, in explicit_markup\n    nodelist, blank_finish = self.explicit_construct(match)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2311, in explicit_construct\n    return method(self, expmatch)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2054, in directive\n    directive_class, match, type_name, option_presets)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2103, in run_directive\n    result = directive_instance.run()\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 153, in run\n    return self._build_markup(matrix)\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 298, in _build_markup\n    self._build_summary(matrix, content)\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 341, in _build_summary\n    impls.sort()\nAttributeError: 'dict_keys' object has no attribute 'sort'\nERROR: InvocationError: '/home/ubuntu/nova/.tox/docs/bin/python setup.py build_sphinx'\n________________________________________________________________________________________________________________________________________ summary _________________________________________________________________________________________________________________________________________\nERROR:   docs: commands failed", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1646629", 
    "owner": "https://api.launchpad.net/1.0/~melwitt", 
    "id": 1646629, 
    "index": 857, 
    "created": "2016-12-01 22:04:07.621191+00:00", 
    "title": "tox -edocs fails when tox picks python 3.x", 
    "comments": [
        {
            "content": "Currently, the docs target can't be run with python 3.x and fail with a trace like this:\n\nTraceback (most recent call last):classification                                                                                                                                                                                                                                          \n  File \"setup.py\", line 29, in <module>\n    pbr=True)\n  File \"/usr/lib/python3.5/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/pbr/builddoc.py\", line 196, in run\n    self._sphinx_run()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/pbr/builddoc.py\", line 150, in _sphinx_run\n    app.build(force_all=self.all_files)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/application.py\", line 261, in build\n    self.builder.build_all()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/builders/__init__.py\", line 211, in build_all\n    self.build(None, summary='all source files', method='all')\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/builders/__init__.py\", line 265, in build\n    self.doctreedir, self.app))\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 547, in update\n    self._read_serial(docnames, app)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 567, in _read_serial\n    self.read_doc(docname, app)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/environment.py\", line 720, in read_doc\n    pub.publish()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/core.py\", line 217, in publish\n    self.settings)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/sphinx/io.py\", line 46, in read\n    self.parse()\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/readers/__init__.py\", line 78, in parse\n    self.parser.parse(self.input, document)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/__init__.py\", line 172, in parse\n    self.statemachine.run(inputlines, document, inliner=self.inliner)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 170, in run\n    input_source=document['source'])\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2961, in text\n    self.section(title.lstrip(), source, style, lineno + 1, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 327, in section\n    self.new_subsection(title, lineno, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 395, in new_subsection\n    node=section_node, match_titles=True)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 282, in nested_parse\n    node=node, match_titles=match_titles)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2726, in underline\n    self.section(title, source, style, lineno - 1, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 327, in section\n    self.new_subsection(title, lineno, messages)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 395, in new_subsection\n    node=section_node, match_titles=True)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 282, in nested_parse\n    node=node, match_titles=match_titles)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 195, in run\n    results = StateMachineWS.run(self, input_lines, input_offset)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 239, in run\n    context, state, transitions)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/statemachine.py\", line 460, in check_line\n    return method(match, context, next_state)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2299, in explicit_markup\n    nodelist, blank_finish = self.explicit_construct(match)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2311, in explicit_construct\n    return method(self, expmatch)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2054, in directive\n    directive_class, match, type_name, option_presets)\n  File \"/home/ubuntu/nova/.tox/docs/lib/python3.5/site-packages/docutils/parsers/rst/states.py\", line 2103, in run_directive\n    result = directive_instance.run()\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 153, in run\n    return self._build_markup(matrix)\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 298, in _build_markup\n    self._build_summary(matrix, content)\n  File \"/home/ubuntu/nova/doc/ext/feature_matrix.py\", line 341, in _build_summary\n    impls.sort()\nAttributeError: 'dict_keys' object has no attribute 'sort'\nERROR: InvocationError: '/home/ubuntu/nova/.tox/docs/bin/python setup.py build_sphinx'\n________________________________________________________________________________________________________________________________________ summary _________________________________________________________________________________________________________________________________________\nERROR:   docs: commands failed", 
            "date_created": "2016-12-01 22:04:07.621191+00:00", 
            "author": "https://api.launchpad.net/1.0/~melwitt"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/405665", 
            "date_created": "2016-12-02 07:47:04.120013+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/405665\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=b05e996ae55233235fa6feb73ddfb9f3c86958d2\nSubmitter: Jenkins\nBranch:    master\n\ncommit b05e996ae55233235fa6feb73ddfb9f3c86958d2\nAuthor: melanie witt <email address hidden>\nDate:   Thu Dec 1 22:04:48 2016 +0000\n\n    Always use python2.7 for docs target\n    \n    The docs testenv doesn't work with python 3.x on our codebase.\n    If someone is on a platform that defaults to python => python3,\n    building docs will fail for them.\n    \n    Closes-Bug: #1646629\n    \n    Change-Id: I56f3933e89e6fe9e181517325e2d7af5110c5656\n", 
            "date_created": "2016-12-02 16:27:10.232344+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:34:49.504342+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}