{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 10:52:40.368552+00:00", 
    "description": "Running the latest devstack, 'nova image-create' fails. The following is seen in the n-cpu log:\n\n2012-11-07 14:56:34 23496 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/openstack/common/rpc/amqp.py\", line 276, in _process_data\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 175, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     pass\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 161, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 202, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 190, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 1291, in snapshot_instance\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.driver.snapshot(context, instance, image_id)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 822, in snapshot\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     source_format = libvirt_utils.get_disk_type(disk_path)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/libvirt/utils.py\", line 420, in get_disk_type\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return images.qemu_img_info(path)['file format']\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp TypeError: 'QemuImgInfo' object has no attribute '__getitem__'", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1076114", 
    "owner": "https://api.launchpad.net/1.0/~russellb", 
    "id": 1076114, 
    "index": 873, 
    "created": "2012-11-07 19:59:49.249346+00:00", 
    "title": "image create fails with QemuImgInfo error", 
    "comments": [
        {
            "content": "Running the latest devstack, 'nova image-create' fails. The following is seen in the n-cpu log:\n\n2012-11-07 14:56:34 23496 ERROR nova.openstack.common.rpc.amqp [-] Exception during message handling\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/openstack/common/rpc/amqp.py\", line 276, in _process_data\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/openstack/common/rpc/dispatcher.py\", line 145, in dispatch\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 175, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     pass\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 161, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 202, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     kwargs['instance']['uuid'], e, sys.exc_info())\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 190, in decorated_function\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/compute/manager.py\", line 1291, in snapshot_instance\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.driver.snapshot(context, instance, image_id)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 117, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/exception.py\", line 92, in wrapped\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return f(*args, **kw)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 822, in snapshot\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     source_format = libvirt_utils.get_disk_type(disk_path)\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/libvirt/utils.py\", line 420, in get_disk_type\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp     return images.qemu_img_info(path)['file format']\n2012-11-07 14:56:34 23496 TRACE nova.openstack.common.rpc.amqp TypeError: 'QemuImgInfo' object has no attribute '__getitem__'", 
            "date_created": "2012-11-07 19:59:49.249346+00:00", 
            "author": "https://api.launchpad.net/1.0/~david-kranz"
        }, 
        {
            "content": "Likely culprit: https://github.com/openstack/nova/commit/b04213f5dc75b507ee5bc7fe16af7f7b8a3b0c3a", 
            "date_created": "2012-11-08 18:00:20.525703+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/15655", 
            "date_created": "2012-11-08 18:49:23.143820+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/15655\nCommitted: http://github.com/openstack/nova/commit/528add2df39c2381cc7992a5026d283eea8816fa\nSubmitter: Jenkins\nBranch:    master\n\ncommit 528add2df39c2381cc7992a5026d283eea8816fa\nAuthor: Joshua Harlow <email address hidden>\nDate:   Thu Nov 8 10:47:41 2012 -0800\n\n    Another case of dictionary access\n    \n    Fixes bug 1076114 which was using the old dictionary\n    access for getting the qemu image info 'file format'\n    attribute which now should be through direct attribute\n    access to 'file_format' instead.\n    \n    Change-Id: Id4c12b43b389b2fd2300d02743db17cf48b38e8f\n", 
            "date_created": "2012-11-09 15:15:59.765944+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}