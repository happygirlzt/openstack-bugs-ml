{
    "status": "Won't Fix", 
    "last_updated": "2011-07-26 09:17:08.524068+00:00", 
    "description": "Project quotas in nova could be stored and retrieved even if the project doesn't exist. Indeed, nova database has no restrictions, and the quotas' table could store quotas for projects with arbitrary names even if there are no such projects in the projects' table.\n\nFor example, let us see quotas for nonexistent \"fgh\" project, set \"cores\" quota, verify that it is stored, and check that there is still no \"fgh\" project.\n\n# nova-manage project quota fgh\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 20\nram: 51200\nfloating_ips: 10\n\n# nova-manage project quota fgh cores 16\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 16\nram: 51200\nfloating_ips: 10\n\n# nova-manage project quota fgh\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 16\nram: 51200\nfloating_ips: 10\n\n# nova-manage project list\n1234\naproject", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/815857", 
    "owner": "None", 
    "id": 815857, 
    "index": 5122, 
    "created": "2011-07-25 12:35:43.912733+00:00", 
    "title": "quotas for nonexistent projects", 
    "comments": [
        {
            "content": "Project quotas in nova could be stored and retrieved even if the project doesn't exist. Indeed, nova database has no restrictions, and the quotas' table could store quotas for projects with arbitrary names even if there are no such projects in the projects' table.\n\nFor example, let us see quotas for nonexistent \"fgh\" project, set \"cores\" quota, verify that it is stored, and check that there is still no \"fgh\" project.\n\n# nova-manage project quota fgh\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 20\nram: 51200\nfloating_ips: 10\n\n# nova-manage project quota fgh cores 16\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 16\nram: 51200\nfloating_ips: 10\n\n# nova-manage project quota fgh\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 16\nram: 51200\nfloating_ips: 10\n\n# nova-manage project list\n1234\naproject", 
            "date_created": "2011-07-25 12:35:43.912733+00:00", 
            "author": "https://api.launchpad.net/1.0/~aababilov"
        }, 
        {
            "content": "Currently these quotas are determined by the default flags regardless of the\nproject name and if there are quotas for the project then the defaults are\noverwritten and returned.\n\n-Craig Vyvial\n\nOn Mon, Jul 25, 2011 at 7:35 AM, Alessio Ababilov <\n<email address hidden>> wrote:\n\n> Public bug reported:\n>\n> Project quotas in nova could be stored and retrieved even if the project\n> doesn't exist. Indeed, nova database has no restrictions, and the\n> quotas' table could store quotas for projects with arbitrary names even\n> if there are no such projects in the projects' table.\n>\n> For example, let us see quotas for nonexistent \"fgh\" project, set\n> \"cores\" quota, verify that it is stored, and check that there is still\n> no \"fgh\" project.\n>\n> # nova-manage project quota fgh\n> metadata_items: 128\n> instances: 10\n> injected_file_content_bytes: 10240\n> injected_files: 5\n> volumes: 10\n> gigabytes: 1000\n> cores: 20\n> ram: 51200\n> floating_ips: 10\n>\n> # nova-manage project quota fgh cores 16\n> metadata_items: 128\n> instances: 10\n> injected_file_content_bytes: 10240\n> injected_files: 5\n> volumes: 10\n> gigabytes: 1000\n> cores: 16\n> ram: 51200\n> floating_ips: 10\n>\n> # nova-manage project quota fgh\n> metadata_items: 128\n> instances: 10\n> injected_file_content_bytes: 10240\n> injected_files: 5\n> volumes: 10\n> gigabytes: 1000\n> cores: 16\n> ram: 51200\n> floating_ips: 10\n>\n> # nova-manage project list\n> 1234\n> aproject\n>\n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n>\n> --\n> You received this bug notification because you are subscribed to\n> OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/815857\n>\n> Title:\n>  quotas for nonexistent projects\n>\n> Status in OpenStack Compute (Nova):\n>  New\n>\n> Bug description:\n>  Project quotas in nova could be stored and retrieved even if the\n>  project doesn't exist. Indeed, nova database has no restrictions, and\n>  the quotas' table could store quotas for projects with arbitrary names\n>  even if there are no such projects in the projects' table.\n>\n>  For example, let us see quotas for nonexistent \"fgh\" project, set\n>  \"cores\" quota, verify that it is stored, and check that there is still\n>  no \"fgh\" project.\n>\n>  # nova-manage project quota fgh\n>  metadata_items: 128\n>  instances: 10\n>  injected_file_content_bytes: 10240\n>  injected_files: 5\n>  volumes: 10\n>  gigabytes: 1000\n>  cores: 20\n>  ram: 51200\n>  floating_ips: 10\n>\n>  # nova-manage project quota fgh cores 16\n>  metadata_items: 128\n>  instances: 10\n>  injected_file_content_bytes: 10240\n>  injected_files: 5\n>  volumes: 10\n>  gigabytes: 1000\n>  cores: 16\n>  ram: 51200\n>  floating_ips: 10\n>\n>  # nova-manage project quota fgh\n>  metadata_items: 128\n>  instances: 10\n>  injected_file_content_bytes: 10240\n>  injected_files: 5\n>  volumes: 10\n>  gigabytes: 1000\n>  cores: 16\n>  ram: 51200\n>  floating_ips: 10\n>\n>  # nova-manage project list\n>  1234\n>  aproject\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/815857/+subscriptions\n>\n", 
            "date_created": "2011-07-25 14:28:42+00:00", 
            "author": "https://api.launchpad.net/1.0/~cp16net"
        }, 
        {
            "content": "From Vish:\r\nI'm not sure if there is a fixable bug at this point.  Projects are moving into keystone, so there won't be any useful way for nova to verify whether a project exists before creating a quota for it.  As long as we are maintaining quotas in nova, this will be the case.  It may be that quotas eventually move into keystone as well, at which point some more robust verification could be done.\r\n", 
            "date_created": "2011-07-26 09:17:06.612873+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}