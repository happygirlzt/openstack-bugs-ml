{
    "status": "Invalid", 
    "last_updated": "2016-06-02 02:11:57.724342+00:00", 
    "description": "Attempt to resize instance from bigger flavor to smaller fails, but no user notification in cli happened:\n\nroot@node-7:~# nova resize --poll a4 1\n\nServer resizing... 100% complete\n\nwhile nova-compute.log has trace:\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 137, in _dispatch_and_reply\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 180, in _dispatch\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 126, in _do_dispatch\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 88, in wrapped\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     payload)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 71, in wrapped\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 298, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     pass\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 284, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 348, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 272, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     migration.instance_uuid, exc_info=True)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 259, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 326, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 314, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3795, in resize_instance\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     self.instance_events.clear_events_for_instance(instance)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/contextlib.py\", line 35, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     self.gen.throw(type, value, traceback)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 6123, in _error_out_instance_on_exception\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     raise error.inner_exception\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher ResizeError: Resize error: Unable to resize disk down.\n\nUser should be notified about such fail.", 
    "tags": [
        "error-handling", 
        "resize"
    ], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/1455460", 
    "owner": "None", 
    "id": 1455460, 
    "index": 5538, 
    "created": "2015-05-15 11:30:42.725466+00:00", 
    "title": "resize server fails silently", 
    "comments": [
        {
            "content": "Attempt to resize instance from bigger flavor to smaller fails, but no user notification in cli happened:\n\nroot@node-7:~# nova resize --poll a4 1\n\nServer resizing... 100% complete\n\nwhile nova-compute.log has trace:\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 137, in _dispatch_and_reply\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 180, in _dispatch\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 126, in _do_dispatch\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 88, in wrapped\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     payload)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 71, in wrapped\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 298, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     pass\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 284, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 348, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 272, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     migration.instance_uuid, exc_info=True)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 259, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 326, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 314, in decorated_function\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 3795, in resize_instance\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     self.instance_events.clear_events_for_instance(instance)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/contextlib.py\", line 35, in __exit__\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     self.gen.throw(type, value, traceback)\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 6123, in _error_out_instance_on_exception\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher     raise error.inner_exception\n2015-05-15 09:39:45.968 32005 TRACE oslo.messaging.rpc.dispatcher ResizeError: Resize error: Unable to resize disk down.\n\nUser should be notified about such fail.", 
            "date_created": "2015-05-15 11:30:42.725466+00:00", 
            "author": "https://api.launchpad.net/1.0/~tdurakov"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/184495", 
            "date_created": "2015-05-20 13:51:03.012376+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Matt Riedemann (<email address hidden>) on branch: master\nReview: https://review.openstack.org/195088\nReason: I'm considering this abandoned, if there is still intent to work on it I think we should have a blueprint like Andrew pointed out and plan that for Newton.", 
            "date_created": "2016-03-02 01:32:09.674895+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "I reproduced this bug stable/mitaka version.\n\n[stack@SBCJSlot5Rack2Centos7 root]$ openstack server resize --wait 0428ffdd-d8fe-4eb0-9cca-562d099f6868--flavor 1\nComplete\n\n2016-06-01 11:45:31.659 INFO nova.compute.manager [req-185643b2-94d6-4c0a-9b60-049b7db0a133 admin admin] [instance: 0428ffdd-d8fe-4eb0-9cca-562d099f6868] Setting instance back to ACTIVE after: Instance rollback performed due to: Resize error: Unable to resize disk down.\n\nI think this disk down could be detected earlier in nova-conductor or nova-api.", 
            "date_created": "2016-06-01 04:17:27.343461+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "I'm proposing to move this issue to Invalid state. Nova is designed to be as much non blocking as possible. So it accepts request and than check possibility to resize in background. While all this information is available over instance-actions. Also, it's worth to mention that xen could resize down so it's not possible to check this on API side.", 
            "date_created": "2016-06-01 13:16:18.296241+00:00", 
            "author": "https://api.launchpad.net/1.0/~tdurakov"
        }, 
        {
            "content": "Ok.", 
            "date_created": "2016-06-02 02:11:56.555253+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }
    ]
}