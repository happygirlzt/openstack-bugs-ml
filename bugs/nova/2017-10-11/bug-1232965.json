{
    "status": "Won't Fix", 
    "last_updated": "2017-03-24 11:30:11.251235+00:00", 
    "description": "OS : RHEL6.4\nOpenStack version : Havana\n\nIf setting \"firewall_driver = neutron.agent.firewall.NoopFirewallDriver\" in vi /etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini, some functions of Nova are lost.\n\n[root@oxianghui v2_0]# nova list\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-7c2bc0a7-e413-48e9-9865-d743d5ab0497)\n\nThe error log:\n\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack Traceback (most recent call last):\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/__init__.py\", line 112, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1296, in send\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1260, in call_application\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/keystoneclient/middleware/auth_token.py\", line 539, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 130, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 195, in call_func\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 912, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     content_type, body, accept)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     request, action_args)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 885, in post_process_extensions\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     **action_args)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/security_groups.py\", line 583, in detail\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     self._extend_servers(req, list(resp_obj.obj['servers']))\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/security_groups.py\", line 533, in _extend_servers\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     .get_instances_security_groups_bindings(context))\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/network/security_group/neutron_driver.py\", line 288, in get_instances_security_groups_bindings\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     security_groups = neutron.list_security_groups().get('security_groups')\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 108, in with_params\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     ret = self.function(instance, *args, **kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 468, in list_security_groups\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     security_groups = self.list('security_groups',\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1199, in list\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     headers=headers, params=params)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1212, in _pagination\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     linkrel = 'previous'\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1185, in get\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.retry_request(\"DELETE\", action, body=body,\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1170, in retry_request\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     \"\"\"\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1113, in do_request\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     httplib.CREATED,\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1083, in _handle_fault_response\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     except Exception:\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 88, in exception_handler_v20\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     message=message)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack NeutronClientException: 404 Not Found\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack The resource could not be found.\n\nThe root cause is that the extension of security groups is not loaded if setting \"firewall_driver = neutron.agent.firewall.NoopFirewallDriver\" in neutron, the python-neutronclient will raise an exception as \"Not Found\".\nNova have referred the function \"list_security_groups\"  of neutron in some functions. \nI think Nova should be independent with Neutron as a OpenStack module.", 
    "tags": [
        "network", 
        "neutron"
    ], 
    "importance": "Undecided", 
    "heat": 20, 
    "link": "https://bugs.launchpad.net/nova/+bug/1232965", 
    "owner": "None", 
    "id": 1232965, 
    "index": 4133, 
    "created": "2013-09-30 02:21:32.231263+00:00", 
    "title": "Can't use nova when configuring neutron.agent.firewall.NoopFirewallDriver in neutron plugins", 
    "comments": [
        {
            "content": "OS : RHEL6.4\nOpenStack version : Havana\n\nIf setting \"firewall_driver = neutron.agent.firewall.NoopFirewallDriver\" in vi /etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini, some functions of Nova are lost.\n\n[root@oxianghui v2_0]# nova list\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-7c2bc0a7-e413-48e9-9865-d743d5ab0497)\n\nThe error log:\n\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack Traceback (most recent call last):\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/__init__.py\", line 112, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return req.get_response(self.application)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1296, in send\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     application, catch_exc_info=False)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/request.py\", line 1260, in call_application\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/keystoneclient/middleware/auth_token.py\", line 539, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.app(env, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/routes/middleware.py\", line 131, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 144, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return resp(environ, start_response)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 130, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/webob/dec.py\", line 195, in call_func\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 912, in __call__\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     content_type, body, accept)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 997, in _process_stack\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     request, action_args)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/wsgi.py\", line 885, in post_process_extensions\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     **action_args)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/security_groups.py\", line 583, in detail\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     self._extend_servers(req, list(resp_obj.obj['servers']))\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/api/openstack/compute/contrib/security_groups.py\", line 533, in _extend_servers\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     .get_instances_security_groups_bindings(context))\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/nova/network/security_group/neutron_driver.py\", line 288, in get_instances_security_groups_bindings\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     security_groups = neutron.list_security_groups().get('security_groups')\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 108, in with_params\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     ret = self.function(instance, *args, **kwargs)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 468, in list_security_groups\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     security_groups = self.list('security_groups',\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1199, in list\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     headers=headers, params=params)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1212, in _pagination\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     linkrel = 'previous'\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1185, in get\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     return self.retry_request(\"DELETE\", action, body=body,\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1170, in retry_request\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     \"\"\"\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1113, in do_request\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     httplib.CREATED,\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 1083, in _handle_fault_response\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     except Exception:\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack   File \"/usr/lib/python2.6/site-packages/neutronclient/v2_0/client.py\", line 88, in exception_handler_v20\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack     message=message)\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack NeutronClientException: 404 Not Found\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack\n2013-09-29 07:23:08.200 7666 TRACE nova.api.openstack The resource could not be found.\n\nThe root cause is that the extension of security groups is not loaded if setting \"firewall_driver = neutron.agent.firewall.NoopFirewallDriver\" in neutron, the python-neutronclient will raise an exception as \"Not Found\".\nNova have referred the function \"list_security_groups\"  of neutron in some functions. \nI think Nova should be independent with Neutron as a OpenStack module.", 
            "date_created": "2013-09-30 02:21:32.231263+00:00", 
            "author": "https://api.launchpad.net/1.0/~xianghui"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/48879", 
            "date_created": "2013-09-30 02:39:36.780257+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "In this situation :   nova list /boot/ show will fail due to getting  NeutronClientException raised by neturon client.", 
            "date_created": "2013-10-18 09:10:29.274930+00:00", 
            "author": "https://api.launchpad.net/1.0/~glongwave"
        }, 
        {
            "content": "The neutronclient patch was abandoned and the nova patch is here: https://review.openstack.org/#/c/52597/", 
            "date_created": "2013-11-05 01:00:59.567823+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "After talk with Akihiro Motoki\t\n1) create instance with security_group.2)then set firewall to disable it . 3) run command nova show/list. \nThis is not valid test Scenario.\n\nWe should always enable or disable neutron security_groups.", 
            "date_created": "2013-11-18 04:03:06.016241+00:00", 
            "author": "https://api.launchpad.net/1.0/~glongwave"
        }, 
        {
            "content": "The RHEL/Centos/Fedora install guide currently leads you to this bug:\n\n\"Regardless of which firewall driver you chose when you configure the network and compute nodes, set this driver as the No-Op firewall. The difference is that this is a Nova firewall, and because Neutron handles the Firewall, you must tell Nova not to use one.\"\n\nhttp://docs.openstack.org/havana/install-guide/install/apt/content/install-neutron.dedicated-controller-node.html\n\nLooks like a show stopper to me.", 
            "date_created": "2013-11-21 13:28:40.718295+00:00", 
            "author": "https://api.launchpad.net/1.0/~sheldonh"
        }, 
        {
            "content": "It's a bug in the install guide: http://docs.openstack.org/havana/install-guide/install/apt/content/install-neutron.install-plug-in-controller.ovs.gre.html#comment-1132665540", 
            "date_created": "2013-11-21 14:04:00.087224+00:00", 
            "author": "https://api.launchpad.net/1.0/~sheldonh"
        }, 
        {
            "content": "Thanks Sheldon for your effort, I think this bug should be reset to valid to give an obvious indication in the install guide, \nor users and operator may feel frustrated about the security group.", 
            "date_created": "2013-11-22 02:49:44.523767+00:00", 
            "author": "https://api.launchpad.net/1.0/~xianghui"
        }, 
        {
            "content": "https://review.openstack.org/#/c/57842/", 
            "date_created": "2013-11-22 07:16:33.024462+00:00", 
            "author": "https://api.launchpad.net/1.0/~xianghui"
        }, 
        {
            "content": "https://review.openstack.org/#/c/58212/", 
            "date_created": "2013-11-26 08:31:50.439037+00:00", 
            "author": "https://api.launchpad.net/1.0/~xianghui"
        }, 
        {
            "content": "The last real action on this bug was 3 years ago, closing", 
            "date_created": "2016-04-18 15:27:25.047296+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "This issue was fixed in the openstack/openstack-manuals 15.0.0 release.", 
            "date_created": "2017-03-24 11:30:10.335099+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}