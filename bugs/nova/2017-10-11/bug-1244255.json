{
    "status": "Invalid", 
    "last_updated": "2014-04-17 11:34:39.610705+00:00", 
    "description": "Tempest test ServerAddressesTestXML failed on a change that does not involve any code modification.\n\nhttps://review.openstack.org/53633\n\n2013-10-24 14:04:29.188 | ======================================================================\n2013-10-24 14:04:29.189 | FAIL: setUpClass (tempest.api.compute.servers.test_server_addresses.ServerAddressesTestXML)\n2013-10-24 14:04:29.189 | setUpClass (tempest.api.compute.servers.test_server_addresses.ServerAddressesTestXML)\n2013-10-24 14:04:29.189 | ----------------------------------------------------------------------\n2013-10-24 14:04:29.189 | _StringException: Traceback (most recent call last):\n2013-10-24 14:04:29.189 |   File \"tempest/api/compute/servers/test_server_addresses.py\", line 31, in setUpClass\n2013-10-24 14:04:29.189 |     resp, cls.server = cls.create_server(wait_until='ACTIVE')\n2013-10-24 14:04:29.189 |   File \"tempest/api/compute/base.py\", line 143, in create_server\n2013-10-24 14:04:29.190 |     server['id'], kwargs['wait_until'])\n2013-10-24 14:04:29.190 |   File \"tempest/services/compute/xml/servers_client.py\", line 356, in wait_for_server_status\n2013-10-24 14:04:29.190 |     return waiters.wait_for_server_status(self, server_id, status)\n2013-10-24 14:04:29.190 |   File \"tempest/common/waiters.py\", line 71, in wait_for_server_status\n2013-10-24 14:04:29.190 |     raise exceptions.BuildErrorException(server_id=server_id)\n2013-10-24 14:04:29.190 | BuildErrorException: Server e21d695e-4f15-4215-bc62-8ea645645a26 failed to build and is in ERROR status\n\n\n\nFrom n-cpu.log (http://logs.openstack.org/33/53633/1/check/check-tempest-devstack-vm-neutron/4dd98e5/logs/screen-n-cpu.txt.gz#_2013-10-24_13_58_07_532):\n\n Error: Unexpected vif_type=binding_failed\n Traceback (most recent call last):\n     set_access_ip=set_access_ip)\n   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1413, in _spawn\n     LOG.exception(_('Instance failed to spawn'), instance=instance)\n   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1410, in _spawn\n     block_device_info)\n   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 2084, in spawn\n     write_to_disk=True)\n   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 3064, in to_xml\n     disk_info, rescue, block_device_info)\n   File \"/opt/stack/new/nova/nova/virt/libvirt/driver.py\", line 2951, in get_guest_config\n     inst_type)\n   File \"/opt/stack/new/nova/nova/virt/libvirt/vif.py\", line 380, in get_config\n     _(\"Unexpected vif_type=%s\") % vif_type)\n NovaException: Unexpected vif_type=binding_failed\n TRACE nova.compute.manager [instance: e21d695e-4f15-4215-bc62-8ea645645a26]", 
    "tags": [
        "ovs"
    ], 
    "importance": "Undecided", 
    "heat": 50, 
    "link": "https://bugs.launchpad.net/nova/+bug/1244255", 
    "owner": "None", 
    "id": 1244255, 
    "index": 4230, 
    "created": "2013-10-24 14:29:05.398245+00:00", 
    "title": "binding_failed because of l2 agent assumed down", 
    "comments": [
        {
            "content": "Tempest test ServerAddressesTestXML failed on a change that does not involve any code modification.\n\nhttps://review.openstack.org/53633\n\n2013-10-24 14:04:29.188 | ======================================================================\n2013-10-24 14:04:29.189 | FAIL: setUpClass (tempest.api.compute.servers.test_server_addresses.ServerAddressesTestXML)\n2013-10-24 14:04:29.189 | setUpClass (tempest.api.compute.servers.test_server_addresses.ServerAddressesTestXML)\n2013-10-24 14:04:29.189 | ----------------------------------------------------------------------\n2013-10-24 14:04:29.189 | _StringException: Traceback (most recent call last):\n2013-10-24 14:04:29.189 |   File \"tempest/api/compute/servers/test_server_addresses.py\", line 31, in setUpClass\n2013-10-24 14:04:29.189 |     resp, cls.server = cls.create_server(wait_until='ACTIVE')\n2013-10-24 14:04:29.189 |   File \"tempest/api/compute/base.py\", line 143, in create_server\n2013-10-24 14:04:29.190 |     server['id'], kwargs['wait_until'])\n2013-10-24 14:04:29.190 |   File \"tempest/services/compute/xml/servers_client.py\", line 356, in wait_for_server_status\n2013-10-24 14:04:29.190 |     return waiters.wait_for_server_status(self, server_id, status)\n2013-10-24 14:04:29.190 |   File \"tempest/common/waiters.py\", line 71, in wait_for_server_status\n2013-10-24 14:04:29.190 |     raise exceptions.BuildErrorException(server_id=server_id)\n2013-10-24 14:04:29.190 | BuildErrorException: Server e21d695e-4f15-4215-bc62-8ea645645a26 failed to build and is in ERROR status", 
            "date_created": "2013-10-24 14:29:05.398245+00:00", 
            "author": "https://api.launchpad.net/1.0/~stanislaw-pitucha"
        }, 
        {
            "content": "Here is the stacktrace causing it http://logs.openstack.org/33/53633/1/check/check-tempest-devstack-vm-neutron/4dd98e5/logs/screen-n-cpu.txt.gz#_2013-10-24_13_58_07_532", 
            "date_created": "2013-10-24 15:01:00.917781+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "logstash query:\n\nmessage:\"NovaException: Unexpected vif_type=binding_failed\" AND filename:\"logs/screen-n-cpu.txt\"", 
            "date_created": "2013-10-24 15:14:58.582956+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "ML2 returns an invalid VUF type:\n\n2013-10-24 13:54:39.818 2507 DEBUG amqp [-] using channel_id: 1 __init__ /usr/local/lib/python2.7/dist-packages/amqp/channel.py:71\n2013-10-24 13:54:39.818 2507 DEBUG amqp [-] Channel open _open_ok /usr/local/lib/python2.7/dist-packages/amqp/channel.py:429\n2013-10-24 13:54:40.465 2507 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'dae0d2c2c71c4e0c96f029ea4cd61431', u'_context_read_deleted': u'no', u'_reply_q': u'reply_5b9f8ea5199a44b09b37f73f7d526862', u'_context_tenant_id': None, u'args': {u'host': u'devstack-precise-hpcloud-az2-604954', u'router_ids': None}, u'namespace': None, u'_unique_id': u'5b0bc46ec657447ea6e3ad6929023dda', u'_context_is_admin': True, u'version': u'1.0', u'_context_project_id': None, u'_context_timestamp': u'2013-10-24 13:54:40.462146', u'_context_user_id': None, u'method': u'sync_routers'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.466 2507 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-10-24 13:54:40.462146', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.514 2507 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'5c9a0a48c86843e78aaf4d933a84bfe2', u'_context_read_deleted': u'no', u'_reply_q': u'reply_31ffaf94bfb8479193dc79ba87a2e593', u'_context_tenant_id': None, u'args': {u'device': u'a50f879f-daf8-4fe1-896f-01fa50e44631', u'agent_id': u'ovse6aec7996c40'}, u'namespace': None, u'_unique_id': u'6e8309527d65440d99664222ee7dd14b', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-10-24 13:54:37.631879', u'_context_user_id': None, u'method': u'get_device_details'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.514 2507 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-10-24 13:54:37.631879', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.515 2507 DEBUG neutron.db.l3_rpc_base [-] Checking router: a5ba89d8-af0e-4de1-af94-2f299cdd6200 for host: devstack-precise-hpcloud-az2-604954 _ensure_host_set_on_ports /opt/stack/new/neutron/neutron/db/l3_rpc_base.py:70\n2013-10-24 13:54:40.534 2507 DEBUG neutron.plugins.ml2.managers [-] Attempting to bind port db786ea8-ef93-4f5a-8e0e-862b2299f605 on host devstack-precise-hpcloud-az2-604954 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:440\n2013-10-24 13:54:40.534 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Attempting to bind port db786ea8-ef93-4f5a-8e0e-862b2299f605 on network c117c209-dc08-46ef-b1ff-9a907572a31f bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:57\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Checking agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 10, 24, 13, 54, 38), 'alive': True, 'topic': u'N/A', 'host': u'devstack-precise-hpcloud-az2-604954', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 10, 24, 13, 54, 38), 'started_at': datetime.datetime(2013, 10, 24, 13, 54, 38), 'id': u'b69e5ca2-e0cd-4364-b22b-5bc81162eacf', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'10.7.249.221', u'bridge_mappings': {}, u'l2_population': False, u'devices': 0}} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:59\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_openvswitch [-] Checking segment: {'segmentation_id': None, 'physical_network': None, 'id': u'610be237-d9ae-493c-9e2d-1bcb10c1cae1', 'network_type': u'local'} for mappings: {} with tunnel_types: [] check_segment_for_agent /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_openvswitch.py:48\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Bound using segment: {'segmentation_id': None, 'physical_network': None, 'id': u'610be237-d9ae-493c-9e2d-1bcb10c1cae1', 'network_type': u'local'} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:66\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.managers [-] Bound port: db786ea8-ef93-4f5a-8e0e-862b2299f605, host: devstack-precise-hpcloud-az2-604954, driver: openvswitch, vif_type: ovs, cap_port_filter: True, segment: 610be237-d9ae-493c-9e2d-1bcb10c1cae1 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:455\n2013-10-24 13:54:40.540 2507 DEBUG neutron.plugins.ml2.rpc [-] Device a50f879f-daf8-4fe1-896f-01fa50e44631 details requested by agent ovse6aec7996c40 get_device_details /opt/stack/new/neutron/neutron/plugins/ml2/rpc.py:88\n2013-10-24 13:54:40.551 2507 WARNING neutron.plugins.ml2.rpc [-] Device a50f879f-daf8-4fe1-896f-01fa50e44631 requested by agent ovse6aec7996c40 on network aa0f00a7-a77f-41c5-a150-291275593282 not bound, vif_type: binding_failed\n", 
            "date_created": "2013-10-24 16:18:39.050026+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "nova-compute traceback may be caused by neutron error \nlog info\nhttp://logs.openstack.org/33/53633/1/check/check-tempest-devstack-vm-neutron/4dd98e5/logs/screen-q-svc.txt.gz#_2013-10-24_13_54_40_551", 
            "date_created": "2013-10-24 16:18:55.365504+00:00", 
            "author": "https://api.launchpad.net/1.0/~heut2008"
        }, 
        {
            "content": "2013-10-24 13:54:39.818 2507 DEBUG amqp [-] using channel_id: 1 __init__ /usr/local/lib/python2.7/dist-packages/amqp/channel.py:71\n2013-10-24 13:54:39.818 2507 DEBUG amqp [-] Channel open _open_ok /usr/local/lib/python2.7/dist-packages/amqp/channel.py:429\n2013-10-24 13:54:40.465 2507 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'dae0d2c2c71c4e0c96f029ea4cd61431', u'_context_read_deleted': u'no', u'_reply_q': u'reply_5b9f8ea5199a44b09b37f73f7d526862', u'_context_tenant_id': None, u'args': {u'host': u'devstack-precise-hpcloud-az2-604954', u'router_ids': None}, u'namespace': None, u'_unique_id': u'5b0bc46ec657447ea6e3ad6929023dda', u'_context_is_admin': True, u'version': u'1.0', u'_context_project_id': None, u'_context_timestamp': u'2013-10-24 13:54:40.462146', u'_context_user_id': None, u'method': u'sync_routers'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.466 2507 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-10-24 13:54:40.462146', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.514 2507 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'5c9a0a48c86843e78aaf4d933a84bfe2', u'_context_read_deleted': u'no', u'_reply_q': u'reply_31ffaf94bfb8479193dc79ba87a2e593', u'_context_tenant_id': None, u'args': {u'device': u'a50f879f-daf8-4fe1-896f-01fa50e44631', u'agent_id': u'ovse6aec7996c40'}, u'namespace': None, u'_unique_id': u'6e8309527d65440d99664222ee7dd14b', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-10-24 13:54:37.631879', u'_context_user_id': None, u'method': u'get_device_details'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.514 2507 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-10-24 13:54:37.631879', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-10-24 13:54:40.515 2507 DEBUG neutron.db.l3_rpc_base [-] Checking router: a5ba89d8-af0e-4de1-af94-2f299cdd6200 for host: devstack-precise-hpcloud-az2-604954 _ensure_host_set_on_ports /opt/stack/new/neutron/neutron/db/l3_rpc_base.py:70\n2013-10-24 13:54:40.534 2507 DEBUG neutron.plugins.ml2.managers [-] Attempting to bind port db786ea8-ef93-4f5a-8e0e-862b2299f605 on host devstack-precise-hpcloud-az2-604954 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:440\n2013-10-24 13:54:40.534 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Attempting to bind port db786ea8-ef93-4f5a-8e0e-862b2299f605 on network c117c209-dc08-46ef-b1ff-9a907572a31f bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:57\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Checking agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 10, 24, 13, 54, 38), 'alive': True, 'topic': u'N/A', 'host': u'devstack-precise-hpcloud-az2-604954', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 10, 24, 13, 54, 38), 'started_at': datetime.datetime(2013, 10, 24, 13, 54, 38), 'id': u'b69e5ca2-e0cd-4364-b22b-5bc81162eacf', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'10.7.249.221', u'bridge_mappings': {}, u'l2_population': False, u'devices': 0}} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:59\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_openvswitch [-] Checking segment: {'segmentation_id': None, 'physical_network': None, 'id': u'610be237-d9ae-493c-9e2d-1bcb10c1cae1', 'network_type': u'local'} for mappings: {} with tunnel_types: [] check_segment_for_agent /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_openvswitch.py:48\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Bound using segment: {'segmentation_id': None, 'physical_network': None, 'id': u'610be237-d9ae-493c-9e2d-1bcb10c1cae1', 'network_type': u'local'} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:66\n2013-10-24 13:54:40.537 2507 DEBUG neutron.plugins.ml2.managers [-] Bound port: db786ea8-ef93-4f5a-8e0e-862b2299f605, host: devstack-precise-hpcloud-az2-604954, driver: openvswitch, vif_type: ovs, cap_port_filter: True, segment: 610be237-d9ae-493c-9e2d-1bcb10c1cae1 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:455\n2013-10-24 13:54:40.540 2507 DEBUG neutron.plugins.ml2.rpc [-] Device a50f879f-daf8-4fe1-896f-01fa50e44631 details requested by agent ovse6aec7996c40 get_device_details /opt/stack/new/neutron/neutron/plugins/ml2/rpc.py:88\n2013-10-24 13:54:40.551 2507 WARNING neutron.plugins.ml2.rpc [-] Device a50f879f-daf8-4fe1-896f-01fa50e44631 requested by agent ovse6aec7996c40 on network aa0f00a7-a77f-41c5-a150-291275593282 not bound, vif_type: binding_failed\n", 
            "date_created": "2013-10-24 16:24:37.155908+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "This happens also on VolumesActionsTestXML:\n\nhttp://logs.openstack.org/50/54850/12/check/check-tempest-devstack-vm-neutron-isolated/393bbc1/logs/screen-n-cpu.txt.gz", 
            "date_created": "2013-11-01 22:02:48.703805+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "This is caused by the server erroneously assuming the l2 agent is down. See the traces where binding fails because the agent is marked down, but then is assumed back on line.\n\nThis is due to poor settings of report and timeout intervals.\n\n\n2013-11-01 21:13:35.261 2769 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Checking agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 11, 1, 21, 13, 30), 'alive': False, 'topic': u'N/A', 'host': u'devstack-precise-hpcloud-az1-631654', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'started_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'id': u'3acf236a-589a-4f51-be43-9b6f19d0ba70', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'10.5.153.104', u'bridge_mappings': {}, u'l2_population': False, u'devices': 14}} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:59\n2013-11-01 21:13:35.268 2769 WARNING neutron.plugins.ml2.drivers.mech_agent [-] Attempting to bind with dead agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 11, 1, 21, 13, 30), 'alive': False, 'topic': u'N/A', 'host': u'devstack-precise-hpcloud-az1-631654', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'started_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'id': u'3acf236a-589a-4f51-be43-9b6f19d0ba70', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'10.5.153.104', u'bridge_mappings': {}, u'l2_population': False, u'devices': 14}}\n2013-11-01 21:13:35.268 2769 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Attempting to bind port f5129205-db1b-46e5-bef5-e9a1abb114c5 on network 692d1116-107a-4c04-be6a-7fff7b47334e bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:57\n2013-11-01 21:13:35.271 2769 WARNING neutron.plugins.ml2.managers [-] Failed to bind port f5129205-db1b-46e5-bef5-e9a1abb114c5 on host devstack-precise-hpcloud-az1-631654\n2013-11-01 21:13:35.287 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_read_deleted': u'no', u'_context_tenant_id': None, u'args': {u'agent_state': {u'agent_state': {u'topic': u'l3_agent', u'binary': u'neutron-l3-agent', u'host': u'devstack-precise-hpcloud-az1-631654', u'agent_type': u'L3 agent', u'configurations': {u'router_id': u'', u'gateway_external_network_id': u'', u'handle_internal_only_routers': True, u'use_namespaces': True, u'routers': 4, u'interfaces': 4, u'floating_ips': 0, u'interface_driver': u'neutron.agent.linux.interface.OVSInterfaceDriver', u'ex_gw_ports': 4}}}, u'time': u'2013-11-01T21:13:34.989761'}, u'namespace': None, u'_unique_id': u'989343937ab34d1190b68be196187860', u'_context_is_admin': True, u'version': u'1.0', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.202105', u'_context_user_id': None, u'method': u'report_state'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.287 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.202105', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.288 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'396f5a60840f474cb71158699f79138d', u'_context_read_deleted': u'no', u'_reply_q': u'reply_926525fdb4a343479eebbe6367d863cc', u'_context_tenant_id': None, u'args': {u'devices': [u'ad5058d2-fc8f-4250-a6d1-f41ae7b0c5f1', u'c7926ee9-4f82-4a94-8c67-6c8fa255549b']}, u'namespace': None, u'_unique_id': u'84eda351118c4c8386360899de40e442', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.577872', u'_context_user_id': None, u'method': u'security_group_rules_for_devices'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.288 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.577872', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.289 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'72368fedbe4f42348206ad8e1d40adb0', u'_context_read_deleted': u'no', u'_reply_q': u'reply_926525fdb4a343479eebbe6367d863cc', u'_context_tenant_id': None, u'args': {u'devices': [u'ad5058d2-fc8f-4250-a6d1-f41ae7b0c5f1', u'c7926ee9-4f82-4a94-8c67-6c8fa255549b']}, u'namespace': None, u'_unique_id': u'22a222f31d6e4f86a8136d0290fe7d15', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.577872', u'_context_user_id': None, u'method': u'security_group_rules_for_devices'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.289 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.577872', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.290 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_context_read_deleted': u'no', u'_context_tenant_id': None, u'args': {u'agent_state': {u'agent_state': {u'topic': u'lbaas_process_on_host_agent', u'binary': u'neutron-loadbalancer-agent', u'host': u'devstack-precise-hpcloud-az1-631654', u'agent_type': u'Loadbalancer agent', u'configurations': {u'device_driver': u'neutron.services.loadbalancer.drivers.haproxy.namespace_driver.HaproxyNSDriver', u'interface_driver': u'neutron.agent.linux.interface.OVSInterfaceDriver', u'devices': 0}}}, u'time': u'2013-11-01T21:13:35.052944'}, u'namespace': None, u'_unique_id': u'76c20d1c697c4713914740cc4aa1ba05', u'_context_is_admin': True, u'version': u'1.0', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.790815', u'_context_user_id': None, u'method': u'report_state'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.290 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.790815', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.290 2769 DEBUG neutron.openstack.common.rpc.amqp [-] Making asynchronous fanout cast... fanout_cast /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:568\n2013-11-01 21:13:35.291 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is b478346c3d9546abba37ce7ea3fe6219. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.295 2769 DEBUG neutron.plugins.ml2.db [-] get_port_and_sgs() called for port_id ad5058d2-fc8f-4250-a6d1-f41ae7b0c5f1 get_port_and_sgs /opt/stack/new/neutron/neutron/plugins/ml2/db.py:99\n2013-11-01 21:13:35.316 2769 DEBUG neutron.plugins.ml2.db [-] get_port_and_sgs() called for port_id ad5058d2-fc8f-4250-a6d1-f41ae7b0c5f1 get_port_and_sgs /opt/stack/new/neutron/neutron/plugins/ml2/db.py:99\n2013-11-01 21:13:35.348 2769 DEBUG neutron.plugins.ml2.db [-] get_port_and_sgs() called for port_id c7926ee9-4f82-4a94-8c67-6c8fa255549b get_port_and_sgs /opt/stack/new/neutron/neutron/plugins/ml2/db.py:99\n2013-11-01 21:13:35.369 2769 DEBUG neutron.plugins.ml2.db [-] get_port_and_sgs() called for port_id c7926ee9-4f82-4a94-8c67-6c8fa255549b get_port_and_sgs /opt/stack/new/neutron/neutron/plugins/ml2/db.py:99\n2013-11-01 21:13:35.396 2769 DEBUG neutron.api.v2.base [-] Policy rule:get_port:allowed_address_pairs not found. Assuming no authZ check is defined for allowed_address_pairs _is_visible /opt/stack/new/neutron/neutron/api/v2/base.py:143\n2013-11-01 21:13:35.397 2769 DEBUG neutron.api.v2.base [-] Policy rule:get_port:fixed_ips not found. Assuming no authZ check is defined for fixed_ips _is_visible /opt/stack/new/neutron/neutron/api/v2/base.py:143\n2013-11-01 21:13:35.397 2769 DEBUG neutron.api.v2.base [-] Policy rule:get_port:mac_address not found. Assuming no authZ check is defined for mac_address _is_visible /opt/stack/new/neutron/neutron/api/v2/base.py:143\n2013-11-01 21:13:35.397 2769 DEBUG neutron.openstack.common.rpc.amqp [-] Sending port.create.end on notifications.info notify /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:598\n2013-11-01 21:13:35.398 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is 281fe87a3c79401e8b142a54bb238d65. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.524 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is 502d6df574bf4dbbb9ac72bfca027b91. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.525 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is eb2a3fbf82734a9aab30e127270462f3. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.568 2769 DEBUG neutron.scheduler.dhcp_agent_scheduler [-] Network 692d1116-107a-4c04-be6a-7fff7b47334e is scheduled to be hosted by DHCP agent <neutron.db.agents_db.Agent[object at 40a92d0] {id=u'acd1a6c3-45f4-47a4-9fe2-a95b780c536d', agent_type=u'DHCP agent', binary=u'neutron-dhcp-agent', topic=u'dhcp_agent', host=u'devstack-precise-hpcloud-az1-631654', admin_state_up=True, created_at=datetime.datetime(2013, 11, 1, 21, 5, 42), started_at=datetime.datetime(2013, 11, 1, 21, 5, 42), heartbeat_timestamp=datetime.datetime(2013, 11, 1, 21, 13, 34), description=None, configurations=u'{\"subnets\": 1, \"use_namespaces\": true, \"dhcp_lease_duration\": 86400, \"dhcp_driver\": \"neutron.agent.linux.dhcp.Dnsmasq\", \"networks\": 1, \"ports\": 3}'}> _schedule_bind_network /opt/stack/new/neutron/neutron/scheduler/dhcp_agent_scheduler.py:45\n2013-11-01 21:13:35.576 2769 DEBUG neutron.openstack.common.rpc.amqp [-] Making asynchronous cast on dhcp_agent.devstack-precise-hpcloud-az1-631654... cast /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:559\n2013-11-01 21:13:35.577 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is 832bb636d7924b149374ac6ce1f80c2d. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.577 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is 05a812f3baf244a7a7a6b69c5a248d18. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.578 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is e18db00a74274c578d513d524b6d6259. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.585 2769 DEBUG neutron.openstack.common.rpc.amqp [-] Making asynchronous cast on dhcp_agent.devstack-precise-hpcloud-az1-631654... cast /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:559\n2013-11-01 21:13:35.586 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is bc6c6107047d433d928fc364eb354011. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.594 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'f571dbd86b394c598c4f768ab4212dc8', u'_context_read_deleted': u'no', u'_reply_q': u'reply_98817249593d45a38b11774e09dfa0b8', u'_context_tenant_id': None, u'args': {u'network_id': u'692d1116-107a-4c04-be6a-7fff7b47334e', u'host': u'devstack-precise-hpcloud-az1-631654'}, u'namespace': None, u'_unique_id': u'a229534358e14f9a99b393cc30583e11', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.176674', u'_context_user_id': None, u'method': u'get_network_info'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.594 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.176674', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.595 2769 DEBUG neutron.db.dhcp_rpc_base [-] Network 692d1116-107a-4c04-be6a-7fff7b47334e requested from devstack-precise-hpcloud-az1-631654 get_network_info /opt/stack/new/neutron/neutron/db/dhcp_rpc_base.py:83\n2013-11-01 21:13:35.605 2769 INFO neutron.wsgi [-] 127.0.0.1 - - [01/Nov/2013 21:13:35] \"POST /v2.0/ports.json HTTP/1.1\" 201 795 0.731305\n\n2013-11-01 21:13:35.654 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is ff0cf35df55d47b0a696409f1b9023d0. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.659 2769 DEBUG neutron.openstack.common.rpc.amqp [-] UNIQUE_ID is 1bd497dbc74947c79a9be04a40618cf8. _add_unique_id /opt/stack/new/neutron/neutron/openstack/common/rpc/amqp.py:339\n2013-11-01 21:13:35.667 2769 DEBUG neutron.openstack.common.rpc.amqp [-] received {u'_context_roles': [u'admin'], u'_msg_id': u'c02c2f861a4a47af9af800c33e97a19f', u'_context_read_deleted': u'no', u'_reply_q': u'reply_98817249593d45a38b11774e09dfa0b8', u'_context_tenant_id': None, u'args': {u'host': u'devstack-precise-hpcloud-az1-631654', u'port': {u'port': {u'name': u'', u'admin_state_up': True, u'network_id': u'692d1116-107a-4c04-be6a-7fff7b47334e', u'tenant_id': u'd688c2c8a7c94558a7d5422c9561299e', u'fixed_ips': [{u'subnet_id': u'5106254a-da9a-488a-8ca1-502cbc8864d8'}], u'device_id': u'dhcpcc527bee-52e2-5453-b8c5-f00e8fb0e29b-692d1116-107a-4c04-be6a-7fff7b47334e'}}}, u'namespace': None, u'_unique_id': u'a3a72e593ced4386ba3db530a408e567', u'_context_is_admin': True, u'version': u'1.1', u'_context_project_id': None, u'_context_timestamp': u'2013-11-01 21:05:42.176674', u'_context_user_id': None, u'method': u'create_dhcp_port'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.667 2769 DEBUG neutron.openstack.common.rpc.amqp [-] unpacked context: {'user_id': None, 'roles': [u'admin'], 'tenant_id': None, 'is_admin': True, 'timestamp': u'2013-11-01 21:05:42.176674', 'project_id': None, 'read_deleted': u'no'} _safe_log /opt/stack/new/neutron/neutron/openstack/common/rpc/common.py:276\n2013-11-01 21:13:35.668 2769 DEBUG neutron.db.dhcp_rpc_base [-] Create dhcp port {u'port': {u'name': u'', u'admin_state_up': True, u'network_id': u'692d1116-107a-4c04-be6a-7fff7b47334e', u'tenant_id': u'd688c2c8a7c94558a7d5422c9561299e', u'fixed_ips': [{u'subnet_id': u'5106254a-da9a-488a-8ca1-502cbc8864d8'}], u'device_id': u'dhcpcc527bee-52e2-5453-b8c5-f00e8fb0e29b-692d1116-107a-4c04-be6a-7fff7b47334e'}} from devstack-precise-hpcloud-az1-631654. create_dhcp_port /opt/stack/new/neutron/neutron/db/dhcp_rpc_base.py:225\n2013-11-01 21:13:35.689 2769 DEBUG neutron.db.db_base_plugin_v2 [-] Generated mac for network 692d1116-107a-4c04-be6a-7fff7b47334e is fa:16:3e:fa:2c:21 _generate_mac /opt/stack/new/neutron/neutron/db/db_base_plugin_v2.py:302\n2013-11-01 21:13:35.705 2769 DEBUG neutron.db.db_base_plugin_v2 [-] Allocated IP - 10.100.0.3 from 10.100.0.3 to 10.100.0.254 _generate_ip /opt/stack/new/neutron/neutron/db/db_base_plugin_v2.py:473\n2013-11-01 21:13:35.705 2769 DEBUG neutron.db.db_base_plugin_v2 [-] Allocated IP 10.100.0.3 (692d1116-107a-4c04-be6a-7fff7b47334e/5106254a-da9a-488a-8ca1-502cbc8864d8/febede91-527e-42d6-923e-b358642f9839) create_port /opt/stack/new/neutron/neutron/db/db_base_plugin_v2.py:1360\n2013-11-01 21:13:35.750 2769 DEBUG neutron.plugins.ml2.managers [-] Attempting to bind port febede91-527e-42d6-923e-b358642f9839 on host devstack-precise-hpcloud-az1-631654 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:440\n2013-11-01 21:13:35.751 2769 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Attempting to bind port febede91-527e-42d6-923e-b358642f9839 on network 692d1116-107a-4c04-be6a-7fff7b47334e bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:57\n2013-11-01 21:13:35.755 2769 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Checking agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 11, 1, 21, 13, 35), 'alive': True, 'topic': u'N/A', 'host': u'devstack-precise-hpcloud-az1-631654', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'started_at': datetime.datetime(2013, 11, 1, 21, 5, 42), 'id': u'3acf236a-589a-4f51-be43-9b6f19d0ba70', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'10.5.153.104', u'bridge_mappings': {}, u'l2_population': False, u'devices': 14}} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:59\n2013-11-01 21:13:35.755 2769 DEBUG neutron.plugins.ml2.drivers.mech_openvswitch [-] Checking segment: {'segmentation_id': None, 'physical_network': None, 'id': u'd3f1c48d-8e8f-4a2b-91fe-7fc777138bb4', 'network_type': u'local'} for mappings: {} with tunnel_types: [] check_segment_for_agent /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_openvswitch.py:48\n2013-11-01 21:13:35.755 2769 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] Bound using segment: {'segmentation_id': None, 'physical_network': None, 'id': u'd3f1c48d-8e8f-4a2b-91fe-7fc777138bb4', 'network_type': u'local'} bind_port /opt/stack/new/neutron/neutron/plugins/ml2/drivers/mech_agent.py:66\n2013-11-01 21:13:35.756 2769 DEBUG neutron.plugins.ml2.managers [-] Bound port: febede91-527e-42d6-923e-b358642f9839, host: devstack-precise-hpcloud-az1-631654, driver: openvswitch, vif_type: ovs, cap_port_filter: True, segment: d3f1c48d-8e8f-4a2b-91fe-7fc777138bb4 bind_port /opt/stack/new/neutron/neutron/plugins/ml2/managers.py:455\n2013-11-01 21:13:35.758 2769 INFO neutron.wsgi [-] (2769) accepted ('127.0.0.1', 36993)", 
            "date_created": "2013-11-01 22:45:25.111088+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/55000", 
            "date_created": "2013-11-01 22:56:06.629517+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Hi Armando Migliaccio,\n\nI found your code patch did not fixed this error. I have changed \"agent_down_time\" to 2000 in Controller node and Compute Node,  then boot instance still get such error message. Please see my env log:\n\nhttp://paste.openstack.org/show/50468/", 
            "date_created": "2013-11-05 10:08:54.107526+00:00", 
            "author": "https://api.launchpad.net/1.0/~dzyu"
        }, 
        {
            "content": "", 
            "date_created": "2013-11-06 05:55:06.176395+00:00", 
            "author": "https://api.launchpad.net/1.0/~dzyu"
        }, 
        {
            "content": "Hi Armando,\n\nPlease see the whole log message, I have synced the time", 
            "date_created": "2013-11-06 06:00:27.172068+00:00", 
            "author": "https://api.launchpad.net/1.0/~dzyu"
        }, 
        {
            "content": "I just run \"nova boot\" to get the new log message, not the previous log message.", 
            "date_created": "2013-11-06 06:18:59.973976+00:00", 
            "author": "https://api.launchpad.net/1.0/~dzyu"
        }, 
        {
            "content": "Hi Dazhao,\n\nThe reason binding failed in your most recent neutron server log is not that the L2 agent appears dead as before. Instead, its because the L2 agent does not have a mapping for the physical_network 'physnet1'. See the log:\n\n\n2013-11-05 23:51:55.750 16413 DEBUG neutron.plugins.ml2.managers [-] NT-19C6DA8 Attempting to bind port 51904944-ab70-4cd4-893a-7a78b056523b on host wanghliu-10-7-0-153.sce.cn.ibm.com bind_port /usr/lib/python2.6/site-packages/neutron/plugins/ml2/managers.py:440\n2013-11-05 23:51:55.751 16413 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] NT-53163AF Attempting to bind port 51904944-ab70-4cd4-893a-7a78b056523b on network 2b5d5943-f201-4dda-922a-679dcb4aa503 bind_port /usr/lib/python2.6/site-packages/neutron/plugins/ml2/drivers/mech_agent.py:57\n2013-11-05 23:51:55.754 16413 DEBUG neutron.plugins.ml2.drivers.mech_agent [-] NT-C9C8378 Checking agent: {'binary': u'neutron-openvswitch-agent', 'description': None, 'admin_state_up': True, 'heartbeat_timestamp': datetime.datetime(2013, 11, 6, 5, 51, 52), 'alive': True, 'topic': u'N/A', 'host': u'wanghliu-10-7-0-153.sce.cn.ibm.com', 'agent_type': u'Open vSwitch agent', 'created_at': datetime.datetime(2013, 11, 4, 5, 29, 54), 'started_at': datetime.datetime(2013, 11, 6, 5, 48, 56), 'id': u'b7045650-d7e4-43cb-b10d-f725877c73e9', 'configurations': {u'tunnel_types': [], u'tunneling_ip': u'', u'bridge_mappings': {}, u'l2_population': False, u'devices': 0}} bind_port /usr/lib/python2.6/site-packages/neutron/plugins/ml2/drivers/mech_agent.py:59\n\n<<<Note that bridge_mappings in the line above is an empty list.>>>\n\n2013-11-05 23:51:55.755 16413 DEBUG neutron.plugins.ml2.drivers.mech_openvswitch [-] NT-9EF951A Checking segment: {'segmentation_id': 1001L, 'physical_network': u'physnet1', 'id': u'b04b63b4-80db-4a22-80db-463ff4262897', 'network_type': u'vlan'} for mappings: {} with tunnel_types: [] check_segment_for_agent /usr/lib/python2.6/site-packages/neutron/plugins/ml2/drivers/mech_openvswitch.py:48\n\n<<<And that network_type is 'vlan' and physical_network is 'physnet1' in the line above, and this is the only network segment available to bind.>>>\n\n2013-11-05 23:51:55.755 16413 WARNING neutron.plugins.ml2.managers [-] NT-C2C97DA Failed to bind port 51904944-ab70-4cd4-893a-7a78b056523b on host wanghliu-10-7-0-153.sce.cn.ibm.com\n\n\nThe port cannot be bound because the L2 agent on the node does not have connectivity to the needed physical network. Most likely, bridge_mappings needs to be properly configured for the L2 agent on the compute node.\n\nIf so, I think Armando's tuning did address the issue, although I agree with him that a better liveness algorithm really is needed.", 
            "date_created": "2013-11-13 17:36:24.443196+00:00", 
            "author": "https://api.launchpad.net/1.0/~rkukura"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/55000\nCommitted: http://github.com/openstack/neutron/commit/291048aba2fcaec8afee3011fb4c12c6ca0ebbba\nSubmitter: Jenkins\nBranch:    master\n\ncommit 291048aba2fcaec8afee3011fb4c12c6ca0ebbba\nAuthor: armando-migliaccio <email address hidden>\nDate:   Fri Nov 1 15:47:22 2013 -0700\n\n    Tune up report and downtime intervals for l2 agent\n    \n    If the neutron server erroneously thinks than the l2 agent is down\n    it will fail to bind a port, which can lead to VM's spawn errors.\n    However, the issue is only transient because the agent effectively\n    is only 'late' in reporting back.\n    \n    Best solution would be an alpha-count algorithm (so that we can detect\n    persistent failures more reliably), but for now let's be more tolerant\n    assuming that the agent is down by waiting at least twice the report\n    interval plus a tiny teeny bit.\n    \n    Change-Id: I544135ce1f6b7eaefb34ac44af8f5844d92ddd95\n    Close-bug: #1244255\n", 
            "date_created": "2013-11-14 17:53:26.603601+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/56506", 
            "date_created": "2013-11-15 03:19:41.450979+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "No new occurances since the 15th, http://logstash.openstack.org/#eyJmaWVsZHMiOiBbXSwgInNlYXJjaCI6ICJtZXNzYWdlOlwiTm92YUV4Y2VwdGlvbjogVW5leHBlY3RlZCB2aWZfdHlwZT1iaW5kaW5nX2ZhaWxlZFwiIEFORCBmaWxlbmFtZTpcImxvZ3Mvc2NyZWVuLW4tY3B1LnR4dFwiXG4iLCAidGltZWZyYW1lIjogIjYwNDgwMCIsICJncmFwaG1vZGUiOiAiY291bnQiLCAib2Zmc2V0IjogMH0=", 
            "date_created": "2013-11-18 19:36:27.378753+00:00", 
            "author": "https://api.launchpad.net/1.0/~anteaya"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/57478", 
            "date_created": "2013-11-20 16:12:12.367540+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/57478\nCommitted: http://github.com/openstack/neutron/commit/ea25bc0051621d61f321735b5e8c5a771fe449af\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit ea25bc0051621d61f321735b5e8c5a771fe449af\nAuthor: armando-migliaccio <email address hidden>\nDate:   Fri Nov 1 15:47:22 2013 -0700\n\n    Tune up report and downtime intervals for l2 agent\n    \n    If the neutron server erroneously thinks that the l2 agent is down\n    it will fail to bind a port, which can lead to VM's spawn errors.\n    However, the issue is only transient because the agent effectively\n    is only 'late' in reporting back.\n    \n    Best solution would be an alpha-count algorithm (so that we can detect\n    persistent failures more reliably), but for now let's be more tolerant\n    assuming that the agent is down by waiting at least twice the report\n    interval plus a tiny teeny bit.\n    \n    (cherry picked from commit 291048aba2fcaec8afee3011fb4c12c6ca0ebbba)\n    \n    Close-bug: #1244255\n    \n    Change-Id: I544135ce1f6b7eaefb34ac44af8f5844d92ddd95\n", 
            "date_created": "2013-11-22 14:40:57.418790+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This doesn't appear to be fixed according to http://status.openstack.org/elastic-recheck/", 
            "date_created": "2013-11-23 01:53:06.211851+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Hitting this outside the gate on TripleO I think. Instances are failing to come up as 'binding_failed' early on, but later on work fine, leading me to believe that there is just a race between l2 agent and compute trying to consume the l2 agent... but I'm still wrapping my head around l2 agent.", 
            "date_created": "2013-11-23 01:54:03.602362+00:00", 
            "author": "https://api.launchpad.net/1.0/~clint-fewbar"
        }, 
        {
            "content": "Can you confirm that the the bind fails because the agent is considered transiently down?\n\nBinding failures may occur for all sorts of reasons, without knowing when/where this occurs it's difficult to see whether we need to track a different bug.", 
            "date_created": "2013-12-03 11:07:51.798959+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "So, I don't know why the vif_type=binding_failed happens.  I don't get any WARNING about trying to bind with a dead agent, so it is not reaching that part of the code. So my best guest is that this is happening because the host has no agents just yet:\n\nhttps://git.openstack.org/cgit/openstack/neutron/tree/neutron/plugins/ml2/drivers/mech_agent.py#n59\n\nA few minutes later all works fine, so I'm guessing we're just scheduling things to nova-compute before it definitely has a neutron agent to bind things to.", 
            "date_created": "2013-12-10 22:48:33.694724+00:00", 
            "author": "https://api.launchpad.net/1.0/~clint-fewbar"
        }, 
        {
            "content": "I've added nova as I'm having a hard time reading through nova and figuring out where it signals to the scheduler that it is available to have things scheduled to it. That should probably be _after_ it has an l2 agent. _OR_ the scheduler needs to become neutron-aware so that the scheduler can retry.", 
            "date_created": "2013-12-11 04:47:28.058836+00:00", 
            "author": "https://api.launchpad.net/1.0/~clint-fewbar"
        }, 
        {
            "content": "From Dec. 05 until now the only patch to hit this bug in logstash is https://review.openstack.org/#/c/59787/.\n\nAll 522 hits during that time period (logstash current compete history) occur when running tests on this patch.\n\nWhile the source of the bug still needs to be addressed, perhaps patch 59787 might yield some clues, I don't think that this is a gate blocking bug, at least for any patch other than 59787, it seems to have block that patch quite effectively.", 
            "date_created": "2013-12-18 01:56:35.958112+00:00", 
            "author": "https://api.launchpad.net/1.0/~anteaya"
        }, 
        {
            "content": "This isn't a gate issue anymore, but this bug is hit when setting the api_workers to 4. And that shouldn't cause things to break so easily so I think high priority is still correct https://review.openstack.org/#/c/59787/.", 
            "date_created": "2013-12-19 00:47:22.264436+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Is there a commit hash or gerrit change-id we can look for to ensure we have this fix?", 
            "date_created": "2014-03-24 21:46:43.647328+00:00", 
            "author": "https://api.launchpad.net/1.0/~clint-fewbar"
        }, 
        {
            "content": "Eugene Nikanorov pointed to the Change-Id of the fix:\nhttps://review.openstack.org/#/q/I544135ce1f6b7eaefb34ac44af8f5844d92ddd95,n,z\n\nThe fix was merged 3 month ago but we observe the same symptom right now in our CI devstack. We increased the agent_down_time to 60 at the moment. We'll have to wait to see if that helped.", 
            "date_created": "2014-03-26 09:22:21.438716+00:00", 
            "author": "https://api.launchpad.net/1.0/~dmitrymex"
        }
    ]
}