{
    "status": "Invalid", 
    "last_updated": "2011-11-04 18:03:53.963755+00:00", 
    "description": "most of services fail with\n\n2011-08-18 03:43:32,997 DEBUG nova.utils [-] backend <module 'nova.db.sqlalchemy.api' from '/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/api.pyc'> from (pid=29211) __get_backend /mnt/share/d-cloud-Vlad/nova/utils.py:445\n2011-08-18 03:43:32,998 INFO nova.db.sqlalchemy [-] Using mysql/eventlet db_pool.\n2011-08-18 03:43:32,998 CRITICAL nova [-] sql_min_pool_size\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/bin/nova-compute\", line 48, in <module>\n(nova): TRACE:     service.serve()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/service.py\", line 365, in serve\n(nova): TRACE:     x.start()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/service.py\", line 138, in start\n(nova): TRACE:     self.manager.init_host()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/compute/manager.py\", line 153, in init_host\n(nova): TRACE:     instances = self.db.instance_get_all_by_host(context, self.host)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/api.py\", line 517, in instance_get_all_by_host\n(nova): TRACE:     return IMPL.instance_get_all_by_host(context, host)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/api.py\", line 99, in wrapper\n(nova): TRACE:     return f(*args, **kwargs)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/api.py\", line 1316, in instance_get_all_by_host\n(nova): TRACE:     session = get_session()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/session.py\", line 53, in get_session\n(nova): TRACE:     _ENGINE = get_engine()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/session.py\", line 81, in get_engine\n(nova): TRACE:     \"min_size\": FLAGS.sql_min_pool_size,\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/flags.py\", line 144, in __getattr__\n(nova): TRACE:     val = gflags.FlagValues.__getattr__(self, name)\n(nova): TRACE:   File \"/usr/lib/pymodules/python2.7/gflags.py\", line 810, in __getattr__\n(nova): TRACE:     raise AttributeError(name)\n(nova): TRACE: AttributeError: sql_min_pool_size\n(nova): TRACE:\n\ndue to new code in sqlalchemy/session.py:\n\nimport nova.exception\nimport nova.flags\nimport nova.log\n\nFLAGS = nova.flags.FLAGS\nLOG = nova.log.getLogger(\"nova.db.sqlalchemy\")", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/828449", 
    "owner": "https://api.launchpad.net/1.0/~vladimir.p", 
    "id": 828449, 
    "index": 2511, 
    "created": "2011-08-18 01:06:41.116719+00:00", 
    "title": "Unable to start services in dev env (non-setup using setup.py)", 
    "comments": [
        {
            "content": "most of services fail with \n\n\n2011-08-18 03:51:42,481 CRITICAL nova [-] name 'flags' is not defined\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/bin/nova-compute\", line 48, in <module>\n(nova): TRACE:     service.serve()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/service.py\", line 365, in serve\n(nova): TRACE:     x.start()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/service.py\", line 138, in start\n(nova): TRACE:     self.manager.init_host()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/compute/manager.py\", line 153, in init_host\n(nova): TRACE:     instances = self.db.instance_get_all_by_host(context, self.host)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/api.py\", line 517, in instance_get_all_by_host\n(nova): TRACE:     return IMPL.instance_get_all_by_host(context, host)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/utils.py\", line 449, in __getattr__\n(nova): TRACE:     backend = self.__get_backend()\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/utils.py\", line 444, in __get_backend\n(nova): TRACE:     self.__backend = __import__(name, None, None, fromlist)\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/api.py\", line 31, in <module>\n(nova): TRACE:     from nova.db.sqlalchemy import models\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/models.py\", line 29, in <module>\n(nova): TRACE:     from nova.db.sqlalchemy.session import get_session\n(nova): TRACE:   File \"/mnt/share/d-cloud-Vlad/nova/db/sqlalchemy/session.py\", line 35, in <module>\n(nova): TRACE:     FLAGS = flags.FLAGS\n(nova): TRACE: NameError: name 'flags' is not defined\n(nova): TRACE:\n\ndue to new code in sqlalchemy/session.py:\n\n\nimport nova.exception\nimport nova.flags\nimport nova.log\n\nFLAGS = nova.flags.FLAGS\nLOG = nova.log.getLogger(\"nova.db.sqlalchemy\")", 
            "date_created": "2011-08-18 01:06:41.116719+00:00", 
            "author": "https://api.launchpad.net/1.0/~vladimir.p"
        }, 
        {
            "content": "ok, just reproduced it:\n- created a completely new tree with old version of the code.\n- verified that everything is working.\n- upgraded the tree to new version and most of services failed to start reporting this issue.\n\nHowever, it seems like the problem was related to previously existing *.pyc files and additional restart cleared it.\n\nClosing this issue as this seems to be an operator error :-)\n", 
            "date_created": "2011-08-18 17:00:38.140032+00:00", 
            "author": "https://api.launchpad.net/1.0/~vladimir.p"
        }
    ]
}