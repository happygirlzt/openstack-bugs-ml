{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 08:56:54.645744+00:00", 
    "description": "(latest havana code - libvirt driver)\n\n1. launch a nova vm\n2. see that the instance is deployed on the compute node\n3. restart the compute node\n\nget the following exception:\n\n2013-10-22 05:46:53.711 30742 INFO nova.openstack.common.rpc.common [req-57056535-4ecd-488a-a75e-ff83341afb98 None None] Connected to AMQP server on 192.168.10.111:5672\n2013-10-22 05:46:53.737 30742 AUDIT nova.service [-] Starting compute node (version 2013.2)\n2013-10-22 05:46:53.814 30742 ERROR nova.openstack.common.threadgroup [-] 'NoneType' object has no attribute 'network_info'\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     x.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/service.py\", line 65, in run_service\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     service.start()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 154, in start\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     self.manager.init_host()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 786, in init_host\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     self._init_instance(context, instance)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 664, in _init_instance\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     net_info = compute_utils.get_nw_info_for_instance(instance)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/utils.py\", line 349, in get_nw_info_for_instance\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return instance.info_cache.network_info\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup AttributeError: 'NoneType' object has no attribute 'network_info'\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1243291", 
    "owner": "https://api.launchpad.net/1.0/~cbehrens", 
    "id": 1243291, 
    "index": 5939, 
    "created": "2013-10-22 16:31:29.768645+00:00", 
    "title": "Restarting nova compute has an exception", 
    "comments": [
        {
            "content": "(latest havana code - libvirt driver)\n\n1. launch a nova vm\n2. see that the instance is deployed on the compute node\n3. restart the compute node\n\nget the following exception:\n\n2013-10-22 05:46:53.711 30742 INFO nova.openstack.common.rpc.common [req-57056535-4ecd-488a-a75e-ff83341afb98 None None] Connected to AMQP server on 192.168.10.111:5672\n2013-10-22 05:46:53.737 30742 AUDIT nova.service [-] Starting compute node (version 2013.2)\n2013-10-22 05:46:53.814 30742 ERROR nova.openstack.common.threadgroup [-] 'NoneType' object has no attribute 'network_info'\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup Traceback (most recent call last):\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/threadgroup.py\", line 117, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     x.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/threadgroup.py\", line 49, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self.thread.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 168, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self._exit_event.wait()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return hubs.get_hub().switch()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 187, in switch\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return self.greenlet.switch()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 194, in main\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     result = function(*args, **kwargs)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/service.py\", line 65, in run_service\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     service.start()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 154, in start\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     self.manager.init_host()\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 786, in init_host\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     self._init_instance(context, instance)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 664, in _init_instance\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     net_info = compute_utils.get_nw_info_for_instance(instance)\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup   File \"/usr/lib/python2.7/dist-packages/nova/compute/utils.py\", line 349, in get_nw_info_for_instance\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup     return instance.info_cache.network_info\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup AttributeError: 'NoneType' object has no attribute 'network_info'\n2013-10-22 05:46:53.814 30742 TRACE nova.openstack.common.threadgroup", 
            "date_created": "2013-10-22 16:31:29.768645+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/53174", 
            "date_created": "2013-10-22 17:18:56.480888+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/53174\nCommitted: http://github.com/openstack/nova/commit/a907c2f06b65dca7c2c0ea6119fe649864c6de11\nSubmitter: Jenkins\nBranch:    master\n\ncommit a907c2f06b65dca7c2c0ea6119fe649864c6de11\nAuthor: Chris Behrens <email address hidden>\nDate:   Tue Oct 22 17:14:51 2013 +0000\n\n    Fix getting nwinfo for Instance obj\n    \n    This fixes the get_nw_info_for_instance() method in nova/compute/utils.\n    \n    If an instance object has no 'info_cache' (means we lack an entry in the\n    instance_info_caches table for the instance), don't try to access the\n    'network_info' attribute.  Just return a network model with empty\n    networking information like the dict version of an instance would do.\n    \n    Change-Id: Ib1f49f10cefeefc55a87fea69b6fbc772c978dca\n    Closes-bug: 1243291\n", 
            "date_created": "2013-10-24 00:18:55.371219+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/havana\nReview: https://review.openstack.org/54556", 
            "date_created": "2013-10-30 15:02:10.875016+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/54556\nCommitted: http://github.com/openstack/nova/commit/847c564c34282b77990fc612dccd84283d0aa274\nSubmitter: Jenkins\nBranch:    stable/havana\n\ncommit 847c564c34282b77990fc612dccd84283d0aa274\nAuthor: Chris Behrens <email address hidden>\nDate:   Tue Oct 22 17:14:51 2013 +0000\n\n    Fix getting nwinfo for Instance obj\n    \n    This fixes the get_nw_info_for_instance() method in nova/compute/utils.\n    \n    If an instance object has no 'info_cache' (means we lack an entry in the\n    instance_info_caches table for the instance), don't try to access the\n    'network_info' attribute.  Just return a network model with empty\n    networking information like the dict version of an instance would do.\n    \n    Change-Id: Ib1f49f10cefeefc55a87fea69b6fbc772c978dca\n    Closes-bug: 1243291\n    (cherry picked from commit a907c2f06b65dca7c2c0ea6119fe649864c6de11)\n", 
            "date_created": "2013-10-30 17:42:02.978809+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}