{
    "status": "Invalid", 
    "last_updated": "2016-12-30 16:54:26.511351+00:00", 
    "description": "On attempting to execute nova boot, I get an sqalchemy error.   For example, the following command:  \n\nnova boot --image ebc4576e-aebd-4852-a8ea-47eb238d06f5 --flavor m1.medium --availability-zone nova \"Cirros1\"\n\nGet this error:  ERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.ProgrammingError'> (HTTP 500) (Request-ID: req-3e168cb1-0930-453e-8b4c-b2fbbcf4a34e)\n\nOther nova operations (e.g. list services, images, ) work fine, so the API is up and running at least partially.  \n\nThe environment is as follows: nova-* version 13.1.2, python client version 3.3.1.  \n\nController is running on Ubuntu 16.04 VM with MariaDB and RabbitMQ.  Compute node is a separate machine with Ubuntu 16.04 \n\nFull trace from nova-api.log below.   Thanks for your help!  \n\n2016-12-28 11:05:24.930 4195 INFO nova.osapi_compute.wsgi.server [req-bfcd2a52-a075-4cb0-ad8e-c3692080a6d6 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681 HTTP/1.1\" status: 404 len: 264 time: 0.3224659\n2016-12-28 11:05:24.959 4195 INFO nova.osapi_compute.wsgi.server [req-8371ba5f-eff1-4ead-9343-4d1040d4ea8e 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/ HTTP/1.1\" status: 200 len: 572 time: 0.0242190\n2016-12-28 11:05:26.108 4195 INFO nova.osapi_compute.wsgi.server [req-3e4d7666-81e6-4edb-b12d-5775ba134f2e 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/images/ebc4576e-aebd-4852-a8ea-47eb238d06f5 HTTP/1.1\" status: 200 len: 877 time: 0.7298751\n2016-12-28 11:05:26.162 4195 INFO nova.api.openstack.wsgi [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Flavor m1.medium could not be found.\n2016-12-28 11:05:26.174 4195 INFO nova.osapi_compute.wsgi.server [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors/m1.medium HTTP/1.1\" status: 404 len: 300 time: 0.0593221\n2016-12-28 11:05:26.240 4195 INFO nova.osapi_compute.wsgi.server [req-8fa4ad89-aabe-4077-a2c1-89e3f975abe7 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors?is_public=None HTTP/1.1\" status: 200 len: 1407 time: 0.0610151\n2016-12-28 11:05:26.308 4195 INFO nova.osapi_compute.wsgi.server [req-b8ad7ea8-10f6-4745-9eab-253e1849aa68 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors/3 HTTP/1.1\" status: 200 len: 619 time: 0.0634990\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] Unexpected exception in API method\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 629, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 154, in inner\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1563, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1176, in _create_instance\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     instance_group, check_server_group_quota, filter_properties)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1034, in _provision_instances\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     quotas.rollback()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 976, in _provision_instances\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     req_spec.create()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 223, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return fn(self, *args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line 432, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     db_spec = self._create_in_db(self._context, updates)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 709, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return fn(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line 403, in _create_in_db\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     db_spec.save(context.session)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 48, in save\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     session.flush()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2027, in flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self._flush(objects)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2145, in _flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     transaction.rollback(_capture_exception=True)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2109, in _flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     flush_context.execute()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     rec.execute(self)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     uow\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 174, in save_obj\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     mapper, table, insert)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 800, in _emit_insert_statements\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     execute(statement, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     context)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     context)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     cursor.execute(statement, parameters)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 158, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     result = self._query(query)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 308, in _query\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     conn.query(q)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 820, in query\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1002, in _read_query_result\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     result.read()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1285, in read\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     first_packet = self.connection._read_packet()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 966, in _read_packet\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     packet.check_error()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 394, in check_error\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 120, in raise_mysql_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     _check_mysql_exception(errinfo)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 112, in _check_mysql_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     raise errorclass(errno, errorvalue)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions ProgrammingError: (pymysql.err.ProgrammingError) (1146, u\"Table 'nova.request_specs' doesn't exist\") [SQL: u'INSERT INTO request_specs (created_at, updated_at, instance_uuid, spec) VALUES (%(created_at)s, %(updated_at)s, %(instance_uuid)s, %(spec)s)'] [parameters: {'instance_uuid': 'ebd32190-0ab4-438b-aaf7-b9c827ba7121', 'created_at': datetime.datetime(2016, 12, 28, 16, 5, 27, 105058), 'spec': '{\"nova_object.version\": \"1.5\", \"nova_object.changes\": [\"instance_uuid\", \"retry\", \"num_instances\", \"pci_requests\", \"limits\", \"availability_zone\", \"force_nodes\", \"image\", \"instance_group\", \"force_hosts\", \"numa_topology\", \"flavor\", \"project_id\", \"scheduler_hints\", \"ignore_hosts\"], \"nova_object.name\": \"RequestSpec\", \"nova_object.data\": {\"instance_uuid\": \"ebd32190-0ab4-438b-aaf7-b9c827ba7121\", \"retry\": null, \"num_instances\": 1, \"pci_requests\": {\"nova_object.version\": \"1.1\", \"nova_object.changes\": [\"requests\"], \"nova_object.name\": \"InstancePCIRequests\", \"nova_object.data\": {\"requests\": []}, \"nova_object.namespace\": \"nova\"}, \"limits\": {\"nova_object.version\": \"1.0\", \"nova_object.changes\": [\"vcpu\", \"memory_mb\", \"numa_topology\", \"disk_gb\"], \"nova_object.name\": \"SchedulerLimits\", \"nova_object.data\": {\"vcpu\": null, \"memory_mb\": null, \"disk_gb\": null, \"numa_topology\": null}, \"nova_object.namespace\": \"nova\"}, \"availability_zone\": \"nova\", \"force_nodes\": null, \"image\": {\"nova_object.version\": \"1.8\", \"nova_object.changes\": [\"status\", \"name\", \"container_format\", \"created_at\", \"disk_format\", \"updated_at\", \"id\", \"owner\", \"min_ram\", \"checksum\", \"min_disk\", \"properties\", \"size\"], \"nova_object.name\": \"ImageMeta\", \"nova_object.data\": {\"status\": \"active\", \"created_at\": \"2016-12-22T21:42:42Z\", \"name\": \"CirrosTest\", \"container_format\": \"bare\", \"min_ram\": 0, \"disk_format\": \"qcow2\", \"updated_at\": \"2016-12-23T01:02:29Z\", \"id\": \"ebc4576e-aebd-4852-a8ea-47eb238d06f5\", \"min_disk\": 0, \"checksum\": \"133eae9fb1c98f45894a4e60d8736619\", \"owner\": \"00520eb6df384f7eb6f41c5186347681\", \"properties\": {\"nova_object.version\": \"1.12\", \"nova_object.name\": \"ImageMetaProps\", \"nova_object.data\": {}, \"nova_object.namespace\": \"nova\"}, \"size\": 13200896}, \"nova_object.namespace\": \"nova\"}, \"instance_group\": null, \"force_hosts\": null, \"numa_topology\": null, \"ignore_hosts\": null, \"flavor\": {\"nova_object.version\": \"1.1\", \"nova_object.name\": \"Flavor\", \"nova_object.data\": {\"disabled\": false, \"root_gb\": 40, \"name\": \"m1.medium\", \"flavorid\": \"3\", \"deleted\": false, \"created_at\": null, \"ephemeral_gb\": 0, \"updated_at\": null, \"memory_mb\": 4096, \"vcpus\": 2, \"extra_specs\": {}, \"swap\": 0, \"rxtx_factor\": 1.0, \"is_public\": true, \"deleted_at\": null, \"vcpu_weight\": 0, \"id\": 1}, \"nova_object.namespace\": \"nova\"}, \"project_id\": \"00520eb6df384f7eb6f41c5186347681\", \"scheduler_hints\": {}}, \"nova_object.namespace\": \"nova\"}', 'updated_at': None}]\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions \n2016-12-28 11:05:27.149 4195 INFO nova.api.openstack.wsgi [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.ProgrammingError'>\n2016-12-28 11:05:27.153 4195 INFO nova.osapi_compute.wsgi.server [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"POST /v2/00520eb6df384f7eb6f41c5186347681/servers HTTP/1.1\" status: 500 len: 436 time: 0.8414090", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1652952", 
    "owner": "None", 
    "id": 1652952, 
    "index": 6596, 
    "created": "2016-12-28 16:08:09.633074+00:00", 
    "title": "nova api returns error on boot", 
    "comments": [
        {
            "content": "On attempting to execute nova boot, I get an sqalchemy error.   For example, the following command:  \n\nnova boot --image ebc4576e-aebd-4852-a8ea-47eb238d06f5 --flavor m1.medium --availability-zone nova \"Cirros1\"\n\nGet this error:  ERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.ProgrammingError'> (HTTP 500) (Request-ID: req-3e168cb1-0930-453e-8b4c-b2fbbcf4a34e)\n\nOther nova operations (e.g. list services, images, ) work fine, so the API is up and running at least partially.  \n\nThe environment is as follows: nova-* version 13.1.2, python client version 3.3.1.  \n\nController is running on Ubuntu 16.04 VM with MariaDB and RabbitMQ.  Compute node is a separate machine with Ubuntu 16.04 \n\nFull trace from nova-api.log below.   Thanks for your help!  \n\n2016-12-28 11:05:24.930 4195 INFO nova.osapi_compute.wsgi.server [req-bfcd2a52-a075-4cb0-ad8e-c3692080a6d6 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681 HTTP/1.1\" status: 404 len: 264 time: 0.3224659\n2016-12-28 11:05:24.959 4195 INFO nova.osapi_compute.wsgi.server [req-8371ba5f-eff1-4ead-9343-4d1040d4ea8e 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/ HTTP/1.1\" status: 200 len: 572 time: 0.0242190\n2016-12-28 11:05:26.108 4195 INFO nova.osapi_compute.wsgi.server [req-3e4d7666-81e6-4edb-b12d-5775ba134f2e 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/images/ebc4576e-aebd-4852-a8ea-47eb238d06f5 HTTP/1.1\" status: 200 len: 877 time: 0.7298751\n2016-12-28 11:05:26.162 4195 INFO nova.api.openstack.wsgi [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Flavor m1.medium could not be found.\n2016-12-28 11:05:26.174 4195 INFO nova.osapi_compute.wsgi.server [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors/m1.medium HTTP/1.1\" status: 404 len: 300 time: 0.0593221\n2016-12-28 11:05:26.240 4195 INFO nova.osapi_compute.wsgi.server [req-8fa4ad89-aabe-4077-a2c1-89e3f975abe7 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors?is_public=None HTTP/1.1\" status: 200 len: 1407 time: 0.0610151\n2016-12-28 11:05:26.308 4195 INFO nova.osapi_compute.wsgi.server [req-b8ad7ea8-10f6-4745-9eab-253e1849aa68 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/00520eb6df384f7eb6f41c5186347681/flavors/3 HTTP/1.1\" status: 200 len: 619 time: 0.0634990\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] Unexpected exception in API method\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\", line 629, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     **create_kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 154, in inner\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     rv = f(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1563, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     check_server_group_quota=check_server_group_quota)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1176, in _create_instance\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     instance_group, check_server_group_quota, filter_properties)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1034, in _provision_instances\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     quotas.rollback()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self.force_reraise()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     six.reraise(self.type_, self.value, self.tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 976, in _provision_instances\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     req_spec.create()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 223, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return fn(self, *args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line 432, in create\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     db_spec = self._create_in_db(self._context, updates)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 709, in wrapper\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return fn(*args, **kwargs)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line 403, in _create_in_db\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     db_spec.save(context.session)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 48, in save\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     session.flush()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2027, in flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self._flush(objects)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2145, in _flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     transaction.rollback(_capture_exception=True)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2109, in _flush\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     flush_context.execute()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     rec.execute(self)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     uow\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 174, in save_obj\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     mapper, table, insert)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 800, in _emit_insert_statements\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     execute(statement, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return meth(self, multiparams, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     return connection._execute_clauseelement(self, multiparams, params)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     compiled_sql, distilled_params\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     context)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337, in _handle_dbapi_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     context)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     cursor.execute(statement, parameters)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 158, in execute\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     result = self._query(query)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 308, in _query\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     conn.query(q)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 820, in query\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1002, in _read_query_result\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     result.read()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1285, in read\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     first_packet = self.connection._read_packet()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 966, in _read_packet\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     packet.check_error()\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 394, in check_error\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 120, in raise_mysql_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     _check_mysql_exception(errinfo)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 112, in _check_mysql_exception\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     raise errorclass(errno, errorvalue)\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions ProgrammingError: (pymysql.err.ProgrammingError) (1146, u\"Table 'nova.request_specs' doesn't exist\") [SQL: u'INSERT INTO request_specs (created_at, updated_at, instance_uuid, spec) VALUES (%(created_at)s, %(updated_at)s, %(instance_uuid)s, %(spec)s)'] [parameters: {'instance_uuid': 'ebd32190-0ab4-438b-aaf7-b9c827ba7121', 'created_at': datetime.datetime(2016, 12, 28, 16, 5, 27, 105058), 'spec': '{\"nova_object.version\": \"1.5\", \"nova_object.changes\": [\"instance_uuid\", \"retry\", \"num_instances\", \"pci_requests\", \"limits\", \"availability_zone\", \"force_nodes\", \"image\", \"instance_group\", \"force_hosts\", \"numa_topology\", \"flavor\", \"project_id\", \"scheduler_hints\", \"ignore_hosts\"], \"nova_object.name\": \"RequestSpec\", \"nova_object.data\": {\"instance_uuid\": \"ebd32190-0ab4-438b-aaf7-b9c827ba7121\", \"retry\": null, \"num_instances\": 1, \"pci_requests\": {\"nova_object.version\": \"1.1\", \"nova_object.changes\": [\"requests\"], \"nova_object.name\": \"InstancePCIRequests\", \"nova_object.data\": {\"requests\": []}, \"nova_object.namespace\": \"nova\"}, \"limits\": {\"nova_object.version\": \"1.0\", \"nova_object.changes\": [\"vcpu\", \"memory_mb\", \"numa_topology\", \"disk_gb\"], \"nova_object.name\": \"SchedulerLimits\", \"nova_object.data\": {\"vcpu\": null, \"memory_mb\": null, \"disk_gb\": null, \"numa_topology\": null}, \"nova_object.namespace\": \"nova\"}, \"availability_zone\": \"nova\", \"force_nodes\": null, \"image\": {\"nova_object.version\": \"1.8\", \"nova_object.changes\": [\"status\", \"name\", \"container_format\", \"created_at\", \"disk_format\", \"updated_at\", \"id\", \"owner\", \"min_ram\", \"checksum\", \"min_disk\", \"properties\", \"size\"], \"nova_object.name\": \"ImageMeta\", \"nova_object.data\": {\"status\": \"active\", \"created_at\": \"2016-12-22T21:42:42Z\", \"name\": \"CirrosTest\", \"container_format\": \"bare\", \"min_ram\": 0, \"disk_format\": \"qcow2\", \"updated_at\": \"2016-12-23T01:02:29Z\", \"id\": \"ebc4576e-aebd-4852-a8ea-47eb238d06f5\", \"min_disk\": 0, \"checksum\": \"133eae9fb1c98f45894a4e60d8736619\", \"owner\": \"00520eb6df384f7eb6f41c5186347681\", \"properties\": {\"nova_object.version\": \"1.12\", \"nova_object.name\": \"ImageMetaProps\", \"nova_object.data\": {}, \"nova_object.namespace\": \"nova\"}, \"size\": 13200896}, \"nova_object.namespace\": \"nova\"}, \"instance_group\": null, \"force_hosts\": null, \"numa_topology\": null, \"ignore_hosts\": null, \"flavor\": {\"nova_object.version\": \"1.1\", \"nova_object.name\": \"Flavor\", \"nova_object.data\": {\"disabled\": false, \"root_gb\": 40, \"name\": \"m1.medium\", \"flavorid\": \"3\", \"deleted\": false, \"created_at\": null, \"ephemeral_gb\": 0, \"updated_at\": null, \"memory_mb\": 4096, \"vcpus\": 2, \"extra_specs\": {}, \"swap\": 0, \"rxtx_factor\": 1.0, \"is_public\": true, \"deleted_at\": null, \"vcpu_weight\": 0, \"id\": 1}, \"nova_object.namespace\": \"nova\"}, \"project_id\": \"00520eb6df384f7eb6f41c5186347681\", \"scheduler_hints\": {}}, \"nova_object.namespace\": \"nova\"}', 'updated_at': None}]\n2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions \n2016-12-28 11:05:27.149 4195 INFO nova.api.openstack.wsgi [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.ProgrammingError'>\n2016-12-28 11:05:27.153 4195 INFO nova.osapi_compute.wsgi.server [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"POST /v2/00520eb6df384f7eb6f41c5186347681/servers HTTP/1.1\" status: 500 len: 436 time: 0.8414090", 
            "date_created": "2016-12-28 16:08:09.633074+00:00", 
            "author": "https://api.launchpad.net/1.0/~rezlev"
        }, 
        {
            "content": "The request_specs table doesn't exist in the nova_api database - have you run the database schema migrations for the nova_api database? Those are here:\n\nhttps://github.com/openstack/nova/tree/13.1.2/nova/db/sqlalchemy/api_migrations/migrate_repo/versions\n\nSo you need to create the nova_api database, configure the [api_database] connection information in nova.conf on your controller nodes, and then run the database schema migrations for the API database by running \"nova-manage api_db sync\".", 
            "date_created": "2016-12-29 20:19:42.381009+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "You can also refer to the Mitaka release notes:\n\nhttp://docs.openstack.org/releasenotes/nova/mitaka.html", 
            "date_created": "2016-12-29 20:20:18.375515+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Thank you!   It seems that I had a corrupted api database.   After a\nrebuild things worked.\n\n\n\nOn Thu, Dec 29, 2016 at 3:19 PM, Matt Riedemann <email address hidden> wrote:\n\n> The request_specs table doesn't exist in the nova_api database - have\n> you run the database schema migrations for the nova_api database? Those\n> are here:\n>\n> https://github.com/openstack/nova/tree/13.1.2/nova/db/\n> sqlalchemy/api_migrations/migrate_repo/versions\n>\n> So you need to create the nova_api database, configure the\n> [api_database] connection information in nova.conf on your controller\n> nodes, and then run the database schema migrations for the API database\n> by running \"nova-manage api_db sync\".\n>\n> --\n> You received this bug notification because you are subscribed to the bug\n> report.\n> https://bugs.launchpad.net/bugs/1652952\n>\n> Title:\n>   nova api returns error on boot\n>\n> Status in OpenStack Compute (nova):\n>   Invalid\n>\n> Bug description:\n>   On attempting to execute nova boot, I get an sqalchemy error.   For\n>   example, the following command:\n>\n>   nova boot --image ebc4576e-aebd-4852-a8ea-47eb238d06f5 --flavor\n>   m1.medium --availability-zone nova \"Cirros1\"\n>\n>   Get this error:  ERROR (ClientException): Unexpected API Error. Please\n> report this at http://bugs.launchpad.net/nova/ and attach the Nova API\n> log if possible.\n>   <class 'sqlalchemy.exc.ProgrammingError'> (HTTP 500) (Request-ID:\n> req-3e168cb1-0930-453e-8b4c-b2fbbcf4a34e)\n>\n>   Other nova operations (e.g. list services, images, ) work fine, so the\n>   API is up and running at least partially.\n>\n>   The environment is as follows: nova-* version 13.1.2, python client\n>   version 3.3.1.\n>\n>   Controller is running on Ubuntu 16.04 VM with MariaDB and RabbitMQ.\n>   Compute node is a separate machine with Ubuntu 16.04\n>\n>   Full trace from nova-api.log below.   Thanks for your help!\n>\n>   2016-12-28 11:05:24.930 4195 INFO nova.osapi_compute.wsgi.server\n> [req-bfcd2a52-a075-4cb0-ad8e-c3692080a6d6 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/\n> 00520eb6df384f7eb6f41c5186347681 HTTP/1.1\" status: 404 len: 264 time:\n> 0.3224659\n>   2016-12-28 11:05:24.959 4195 INFO nova.osapi_compute.wsgi.server\n> [req-8371ba5f-eff1-4ead-9343-4d1040d4ea8e 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/ HTTP/1.1\"\n> status: 200 len: 572 time: 0.0242190\n>   2016-12-28 11:05:26.108 4195 INFO nova.osapi_compute.wsgi.server\n> [req-3e4d7666-81e6-4edb-b12d-5775ba134f2e 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/\n> 00520eb6df384f7eb6f41c5186347681/images/ebc4576e-aebd-4852-a8ea-47eb238d06f5\n> HTTP/1.1\" status: 200 len: 877 time: 0.7298751\n>   2016-12-28 11:05:26.162 4195 INFO nova.api.openstack.wsgi\n> [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Flavor\n> m1.medium could not be found.\n>   2016-12-28 11:05:26.174 4195 INFO nova.osapi_compute.wsgi.server\n> [req-e500a326-20a9-4278-92c3-8c21661c5b75 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/\n> 00520eb6df384f7eb6f41c5186347681/flavors/m1.medium HTTP/1.1\" status: 404\n> len: 300 time: 0.0593221\n>   2016-12-28 11:05:26.240 4195 INFO nova.osapi_compute.wsgi.server\n> [req-8fa4ad89-aabe-4077-a2c1-89e3f975abe7 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/\n> 00520eb6df384f7eb6f41c5186347681/flavors?is_public=None HTTP/1.1\" status:\n> 200 len: 1407 time: 0.0610151\n>   2016-12-28 11:05:26.308 4195 INFO nova.osapi_compute.wsgi.server\n> [req-b8ad7ea8-10f6-4745-9eab-253e1849aa68 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"GET /v2/\n> 00520eb6df384f7eb6f41c5186347681/flavors/3 HTTP/1.1\" status: 200 len: 619\n> time: 0.0634990\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n> [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] Unexpected exception in API method\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n> Traceback (most recent call last):\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/api/openstack/extensions.py\", line\n> 478, in wrapped\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return f(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line\n> 73, in wrapper\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return func(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line\n> 73, in wrapper\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return func(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/api/validation/__init__.py\", line\n> 73, in wrapper\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return func(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/servers.py\",\n> line 629, in create\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  **create_kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/hooks.py\", line 154, in inner\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     rv\n> = f(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1563, in\n> create\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  check_server_group_quota=check_server_group_quota)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1176, in\n> _create_instance\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  instance_group, check_server_group_quota, filter_properties)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 1034, in\n> _provision_instances\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  quotas.rollback()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in\n> __exit__\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  self.force_reraise()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in\n> force_reraise\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  six.reraise(self.type_, self.value, self.tb)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 976, in\n> _provision_instances\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  req_spec.create()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line\n> 223, in wrapper\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return fn(self, *args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line\n> 432, in create\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  db_spec = self._create_in_db(self._context, updates)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\",\n> line 709, in wrapper\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return fn(*args, **kwargs)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/nova/objects/request_spec.py\", line\n> 403, in _create_in_db\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  db_spec.save(context.session)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/oslo_db/sqlalchemy/models.py\", line 48,\n> in save\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  session.flush()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2027,\n> in flush\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  self._flush(objects)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2145,\n> in _flush\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  transaction.rollback(_capture_exception=True)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line\n> 60, in __exit__\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  compat.reraise(exc_type, exc_value, exc_tb)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2109,\n> in _flush\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  flush_context.execute()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line\n> 373, in execute\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  rec.execute(self)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line\n> 532, in execute\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions     uow\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line\n> 174, in save_obj\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  mapper, table, insert)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line\n> 800, in _emit_insert_statements\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  execute(statement, params)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 914,\n> in execute\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return meth(self, multiparams, params)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 323,\n> in _execute_on_connection\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  return connection._execute_clauseelement(self, multiparams, params)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1010,\n> in _execute_clauseelement\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  compiled_sql, distilled_params\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1146,\n> in _execute_context\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  context)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1337,\n> in _handle_dbapi_exception\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  util.raise_from_cause(newraise, exc_info)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 200,\n> in raise_from_cause\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  reraise(type(exception), exception, tb=exc_tb)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1139,\n> in _execute_context\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  context)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line\n> 450, in do_execute\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  cursor.execute(statement, parameters)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 158, in\n> execute\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  result = self._query(query)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/cursors.py\", line 308, in _query\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  conn.query(q)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 820, in\n> query\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1002, in\n> _read_query_result\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  result.read()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 1285, in\n> read\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  first_packet = self.connection._read_packet()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 966, in\n> _read_packet\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  packet.check_error()\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/connections.py\", line 394, in\n> check_error\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  err.raise_mysql_exception(self._data)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 120, in\n> raise_mysql_exception\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  _check_mysql_exception(errinfo)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions   File\n> \"/usr/lib/python2.7/dist-packages/pymysql/err.py\", line 112, in\n> _check_mysql_exception\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>  raise errorclass(errno, errorvalue)\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n> ProgrammingError: (pymysql.err.ProgrammingError) (1146, u\"Table\n> 'nova.request_specs' doesn't exist\") [SQL: u'INSERT INTO request_specs\n> (created_at, updated_at, instance_uuid, spec) VALUES (%(created_at)s,\n> %(updated_at)s, %(instance_uuid)s, %(spec)s)'] [parameters:\n> {'instance_uuid': 'ebd32190-0ab4-438b-aaf7-b9c827ba7121', 'created_at':\n> datetime.datetime(2016, 12, 28, 16, 5, 27, 105058), 'spec':\n> '{\"nova_object.version\": \"1.5\", \"nova_object.changes\": [\"instance_uuid\",\n> \"retry\", \"num_instances\", \"pci_requests\", \"limits\", \"availability_zone\",\n> \"force_nodes\", \"image\", \"instance_group\", \"force_hosts\", \"numa_topology\",\n> \"flavor\", \"project_id\", \"scheduler_hints\", \"ignore_hosts\"], \"\n> nova_object.name\": \"RequestSpec\", \"nova_object.data\": {\"instance_uuid\":\n> \"ebd32190-0ab4-438b-aaf7-b9c827ba7121\", \"retry\": null, \"num_instances\":\n> 1, \"pci_requests\": {\"nova_object.version\": \"1.1\", \"nova_object.changes\":\n> [\"requests\"], \"nova_object.name\": \"InstancePCIRequests\",\n> \"nova_object.data\": {\"requests\": []}, \"nova_object.namespace\": \"nova\"},\n> \"limits\": {\"nova_object.version\": \"1.0\", \"nova_object.changes\": [\"vcpu\",\n> \"memory_mb\", \"numa_topology\", \"disk_gb\"], \"nova_object.name\":\n> \"SchedulerLimits\", \"nova_object.data\": {\"vcpu\": null, \"memory_mb\": null,\n> \"disk_gb\": null, \"numa_topology\": null}, \"nova_object.namespace\": \"nova\"},\n> \"availability_zone\": \"nova\", \"force_nodes\": null, \"image\":\n> {\"nova_object.version\": \"1.8\", \"nova_object.changes\": [\"status\", \"name\",\n> \"container_format\", \"created_at\", \"disk_format\", \"updated_at\", \"id\",\n> \"owner\", \"min_ram\", \"checksum\", \"min_disk\", \"properties\", \"size\"], \"\n> nova_object.name\": \"ImageMeta\", \"nova_object.data\": {\"status\": \"active\",\n> \"created_at\": \"2016-12-22T21:42:42Z\", \"name\": \"CirrosTest\",\n> \"container_format\": \"bare\", \"min_ram\": 0, \"disk_format\": \"qcow2\",\n> \"updated_at\": \"2016-12-23T01:02:29Z\", \"id\": \"ebc4576e-aebd-4852-a8ea-47eb238d06f5\",\n> \"min_disk\": 0, \"checksum\": \"133eae9fb1c98f45894a4e60d8736619\", \"owner\": \"\n> 00520eb6df384f7eb6f41c5186347681\", \"properties\": {\"nova_object.version\":\n> \"1.12\", \"nova_object.name\": \"ImageMetaProps\", \"nova_object.data\": {},\n> \"nova_object.namespace\": \"nova\"}, \"size\": 13200896},\n> \"nova_object.namespace\": \"nova\"}, \"instance_group\": null, \"force_hosts\":\n> null, \"numa_topology\": null, \"ignore_hosts\": null, \"flavor\":\n> {\"nova_object.version\": \"1.1\", \"nova_object.name\": \"Flavor\",\n> \"nova_object.data\": {\"disabled\": false, \"root_gb\": 40, \"name\": \"m1.medium\",\n> \"flavorid\": \"3\", \"deleted\": false, \"created_at\": null, \"ephemeral_gb\": 0,\n> \"updated_at\": null, \"memory_mb\": 4096, \"vcpus\": 2, \"extra_specs\": {},\n> \"swap\": 0, \"rxtx_factor\": 1.0, \"is_public\": true, \"deleted_at\": null,\n> \"vcpu_weight\": 0, \"id\": 1}, \"nova_object.namespace\": \"nova\"}, \"project_id\":\n> \"00520eb6df384f7eb6f41c5186347681\", \"scheduler_hints\": {}},\n> \"nova_object.namespace\": \"nova\"}', 'updated_at': None}]\n>   2016-12-28 11:05:27.141 4195 ERROR nova.api.openstack.extensions\n>   2016-12-28 11:05:27.149 4195 INFO nova.api.openstack.wsgi\n> [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] HTTP exception thrown: Unexpected\n> API Error. Please report this at http://bugs.launchpad.net/nova/ and\n> attach the Nova API log if possible.\n>   <class 'sqlalchemy.exc.ProgrammingError'>\n>   2016-12-28 11:05:27.153 4195 INFO nova.osapi_compute.wsgi.server\n> [req-489bfe3f-b2ee-404d-97fa-7cf64d3c9b98 3993d77f9aca46c69a1e8630899fb4d3\n> 00520eb6df384f7eb6f41c5186347681 - - -] 192.168.1.190 \"POST /v2/\n> 00520eb6df384f7eb6f41c5186347681/servers HTTP/1.1\" status: 500 len: 436\n> time: 0.8414090\n>\n> To manage notifications about this bug go to:\n> https://bugs.launchpad.net/nova/+bug/1652952/+subscriptions\n>\n", 
            "date_created": "2016-12-30 16:53:42+00:00", 
            "author": "https://api.launchpad.net/1.0/~rezlev"
        }
    ]
}