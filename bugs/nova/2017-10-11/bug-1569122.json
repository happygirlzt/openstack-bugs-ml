{
    "status": "Confirmed", 
    "last_updated": "2017-05-04 11:12:43.350193+00:00", 
    "description": "When I referred an image which is \"SAVING\" state by using 'nova' command,\nit returns 500 error.\n\n[How to reproduce]\n1. Create empty image\n$ glance image-create --name test --visibility public --disk-format ari\n\n+------------------+--------------------------------------+\n| Property         | Value                                |\n+------------------+--------------------------------------+\n| checksum         | None                                 |\n| container_format | None                                 |\n| created_at       | 2016-04-12T01:27:49Z                 |\n| disk_format      | ari                                  |\n| id               | 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b |\n| min_disk         | 0                                    |\n| min_ram          | 0                                    |\n| name             | test                                 |\n| owner            | 662765a438ed40a9bc85b82e9f2a2cab     |\n| protected        | False                                |\n| size             | None                                 |\n| status           | queued                               |\n| tags             | []                                   |\n| updated_at       | 2016-04-12T01:27:49Z                 |\n| virtual_size     | None                                 |\n| visibility       | public                               |\n+------------------+--------------------------------------+\n\n2. Confirm the image status.\n$ nova image-list\n+--------------------------------------+------+--------+--------+\n| ID                                   | Name | Status | Server |\n+--------------------------------------+------+--------+--------+\n| 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b | test | SAVING |        |\n+--------------------------------------+------+--------+--------+\n\n3. Execute 'nova image-show' or 'nova image-delete'\n(This is example of 'nova image-show')\n$ nova --debug image-show 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:5000/v2.0 -H \"Accept: application/json\" -H \"User-Agent: keystoneauth1/2.3.0 python-requests/2.9.1 CPython/2.7.6\"\nINFO (connectionpool:207) Starting new HTTP connection (1): 192.168.3.223\nDEBUG (connectionpool:387) \"GET /v2.0 HTTP/1.1\" 200 339\nDEBUG (session:277) RESP: [200] Content-Length: 339 Vary: X-Auth-Token Keep-Alive: timeout=5, max=100 Server: Apache/2.4.7 (Ubuntu) Connection: Keep-Alive Date: Tue, 12 Apr 2016\n01:28:44 GMT Content-Type: application/json x-openstack-request-id: req-bc96ffbe-fe92-4fbe-931e-51c071766609\nRESP BODY: {\"version\": {\"status\": \"stable\", \"updated\": \"2014-04-17T00:00:00Z\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.identity-v2.0+json\"\n}], \"id\": \"v2.0\", \"links\": [{\"href\": \"http://192.168.3.223:5000/v2.0/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}]}}\n\nDEBUG (v2:63) Making authentication request to http://192.168.3.223:5000/v2.0/tokens\nDEBUG (connectionpool:387) \"POST /v2.0/tokens HTTP/1.1\" 200 3569\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/662765a438ed40a9bc85b82e9f2a2cab -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-\nAuth-Token: {SHA1}d52cbbc7997c02255185fbf06a3c608866de4091\"\nINFO (connectionpool:207) Starting new HTTP connection (1): 192.168.3.223\nDEBUG (connectionpool:387) \"GET /v2.1/662765a438ed40a9bc85b82e9f2a2cab HTTP/1.1\" 404 52\nDEBUG (session:277) RESP: [404] Date: Tue, 12 Apr 2016 01:28:44 GMT Connection: keep-alive Content-Type: text/plain; charset=UTF-8 Content-Length: 52 X-Compute-Request-Id: req-3c\nc87b6b-21c1-4c75-ada3-2bb7a6441267\nRESP BODY: 404 Not Found\n\nThe resource could not be found.\n\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/ -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}d52cbbc7997c02\n255185fbf06a3c608866de4091\"\nDEBUG (connectionpool:387) \"GET /v2.1/ HTTP/1.1\" 200 387\nDEBUG (session:277) RESP: [200] Content-Length: 387 X-Compute-Request-Id: req-9d6fa002-6769-4c7b-b8a6-70a9e7b4a270 Vary: X-OpenStack-Nova-API-Version Connection: keep-alive X-Ope\nnstack-Nova-Api-Version: 2.1 Date: Tue, 12 Apr 2016 01:28:44 GMT Content-Type: application/json\nRESP BODY: {\"version\": {\"status\": \"CURRENT\", \"updated\": \"2013-07-23T11:33:21Z\", \"links\": [{\"href\": \"http://192.168.3.223:8774/v2.1/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}], \"min_version\": \"2.1\", \"version\": \"2.26\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2.1\"}], \"id\": \"v2.1\"}}\n\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/662765a438ed40a9bc85b82e9f2a2cab/images/6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-OpenStack-Nova-API-Version: 2.25\" -H \"X-Auth-Token: {SHA1}d52cbbc7997c02255185fbf06a3c608866de4091\"\nDEBUG (connectionpool:387) \"GET /v2.1/662765a438ed40a9bc85b82e9f2a2cab/images/6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b HTTP/1.1\" 500 198\nDEBUG (session:277) RESP: [500] Content-Length: 198 X-Compute-Request-Id: req-fd6835d9-50df-40a3-993f-1f71798966cc Vary: X-OpenStack-Nova-API-Version Connection: keep-alive X-Openstack-Nova-Api-Version: 2.25 Date: Tue, 12 Apr 2016 01:28:45 GMT Content-Type: application/json; charset=UTF-8\nRESP BODY: {\"computeFault\": {\"message\": \"Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<type 'exceptions.AttributeError'>\", \"code\": 500}}\n\nDEBUG (shell:1082) Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/shell.py\", line 1080, in main\n    OpenStackComputeShell().main(argv)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/shell.py\", line 1007, in main\n    args.func(self.cs, args)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 1304, in do_image_show\n    image = _find_image(cs, args.image)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 2139, in _find_image\n    return utils.find_resource(cs.images, image)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/utils.py\", line 294, in find_resource\n    return manager.get(tmp_id)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/images.py\", line 55, in get\n    return self._get(\"/images/%s\" % base.getid(image), \"image\")\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/base.py\", line 339, in _get\n    resp, body = self.api.client.get(url)\n  File \"/usr/local/lib/python2.7/dist-packages/keystoneauth1/adapter.py\", line 173, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/client.py\", line 94, in request\n    raise exceptions.from_response(resp, body, url, method)\nClientException: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\n$ \n\n[n-api.log]\n2016-04-12 10:28:45.824 ERROR nova.api.openstack.extensions [req-fd6835d9-50df-40a3-993f-1f71798966cc admin admin] Unexpected exception in API method\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/images.py\", line 87, in show\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     image = self._image_api.get(context, id)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/api.py\", line 93, in get\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     show_deleted=show_deleted)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 283, in show\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     include_locations=include_locations)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 513, in _translate_from_glance\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     include_locations=include_locations)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 597, in _extract_attributes\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     output[attr] = getattr(image, attr) or 0\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/glanceclient/openstack/common/apiclient/base.py\", line 490, in __getattr__\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     self.get()\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/glanceclient/openstack/common/apiclient/base.py\", line 512, in get\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     {'x_request_id': self.manager.client.last_request_id})\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions AttributeError: 'HTTPClient' object has no attribute 'last_request_id'\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions\n2016-04-12 10:28:45.826 INFO nova.api.openstack.wsgi [req-fd6835d9-50df-40a3-993f-1f71798966cc admin admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.", 
    "tags": [
        "glanceclient", 
        "nova"
    ], 
    "importance": "Low", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1569122", 
    "owner": "None", 
    "id": 1569122, 
    "index": 726, 
    "created": "2016-04-12 01:41:11.846426+00:00", 
    "title": "return 500 when referring an image with status 'SAVING'", 
    "comments": [
        {
            "content": "When I referred an image which is \"SAVING\" state by using 'nova' command,\nit returns 500 error.\n\n[How to reproduce]\n1. Create empty image\n$ glance image-create --name test --visibility public --disk-format ari\n\n+------------------+--------------------------------------+\n| Property         | Value                                |\n+------------------+--------------------------------------+\n| checksum         | None                                 |\n| container_format | None                                 |\n| created_at       | 2016-04-12T01:27:49Z                 |\n| disk_format      | ari                                  |\n| id               | 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b |\n| min_disk         | 0                                    |\n| min_ram          | 0                                    |\n| name             | test                                 |\n| owner            | 662765a438ed40a9bc85b82e9f2a2cab     |\n| protected        | False                                |\n| size             | None                                 |\n| status           | queued                               |\n| tags             | []                                   |\n| updated_at       | 2016-04-12T01:27:49Z                 |\n| virtual_size     | None                                 |\n| visibility       | public                               |\n+------------------+--------------------------------------+\n\n2. Confirm the image status.\n$ nova image-list\n+--------------------------------------+------+--------+--------+\n| ID                                   | Name | Status | Server |\n+--------------------------------------+------+--------+--------+\n| 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b | test | SAVING |        |\n+--------------------------------------+------+--------+--------+\n\n3. Execute 'nova image-show' or 'nova image-delete'\n(This is example of 'nova image-show')\n$ nova --debug image-show 6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:5000/v2.0 -H \"Accept: application/json\" -H \"User-Agent: keystoneauth1/2.3.0 python-requests/2.9.1 CPython/2.7.6\"\nINFO (connectionpool:207) Starting new HTTP connection (1): 192.168.3.223\nDEBUG (connectionpool:387) \"GET /v2.0 HTTP/1.1\" 200 339\nDEBUG (session:277) RESP: [200] Content-Length: 339 Vary: X-Auth-Token Keep-Alive: timeout=5, max=100 Server: Apache/2.4.7 (Ubuntu) Connection: Keep-Alive Date: Tue, 12 Apr 2016\n01:28:44 GMT Content-Type: application/json x-openstack-request-id: req-bc96ffbe-fe92-4fbe-931e-51c071766609\nRESP BODY: {\"version\": {\"status\": \"stable\", \"updated\": \"2014-04-17T00:00:00Z\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.identity-v2.0+json\"\n}], \"id\": \"v2.0\", \"links\": [{\"href\": \"http://192.168.3.223:5000/v2.0/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}]}}\n\nDEBUG (v2:63) Making authentication request to http://192.168.3.223:5000/v2.0/tokens\nDEBUG (connectionpool:387) \"POST /v2.0/tokens HTTP/1.1\" 200 3569\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/662765a438ed40a9bc85b82e9f2a2cab -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-\nAuth-Token: {SHA1}d52cbbc7997c02255185fbf06a3c608866de4091\"\nINFO (connectionpool:207) Starting new HTTP connection (1): 192.168.3.223\nDEBUG (connectionpool:387) \"GET /v2.1/662765a438ed40a9bc85b82e9f2a2cab HTTP/1.1\" 404 52\nDEBUG (session:277) RESP: [404] Date: Tue, 12 Apr 2016 01:28:44 GMT Connection: keep-alive Content-Type: text/plain; charset=UTF-8 Content-Length: 52 X-Compute-Request-Id: req-3c\nc87b6b-21c1-4c75-ada3-2bb7a6441267\nRESP BODY: 404 Not Found\n\nThe resource could not be found.\n\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/ -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: {SHA1}d52cbbc7997c02\n255185fbf06a3c608866de4091\"\nDEBUG (connectionpool:387) \"GET /v2.1/ HTTP/1.1\" 200 387\nDEBUG (session:277) RESP: [200] Content-Length: 387 X-Compute-Request-Id: req-9d6fa002-6769-4c7b-b8a6-70a9e7b4a270 Vary: X-OpenStack-Nova-API-Version Connection: keep-alive X-Ope\nnstack-Nova-Api-Version: 2.1 Date: Tue, 12 Apr 2016 01:28:44 GMT Content-Type: application/json\nRESP BODY: {\"version\": {\"status\": \"CURRENT\", \"updated\": \"2013-07-23T11:33:21Z\", \"links\": [{\"href\": \"http://192.168.3.223:8774/v2.1/\", \"rel\": \"self\"}, {\"href\": \"http://docs.openstack.org/\", \"type\": \"text/html\", \"rel\": \"describedby\"}], \"min_version\": \"2.1\", \"version\": \"2.26\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2.1\"}], \"id\": \"v2.1\"}}\n\nDEBUG (extension:157) found extension EntryPoint.parse('v2token = keystoneauth1.loading._plugins.identity.v2:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('admin_token = keystoneauth1.loading._plugins.admin_token:AdminToken')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcauthcode = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectAuthorizationCode')\nDEBUG (extension:157) found extension EntryPoint.parse('v2password = keystoneauth1.loading._plugins.identity.v2:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3password = keystoneauth1.loading._plugins.identity.v3:Password')\nDEBUG (extension:157) found extension EntryPoint.parse('v3oidcpassword = keystoneauth1.loading._plugins.identity.v3:OpenIDConnectPassword')\nDEBUG (extension:157) found extension EntryPoint.parse('token = keystoneauth1.loading._plugins.identity.generic:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('v3token = keystoneauth1.loading._plugins.identity.v3:Token')\nDEBUG (extension:157) found extension EntryPoint.parse('password = keystoneauth1.loading._plugins.identity.generic:Password')\nDEBUG (session:248) REQ: curl -g -i -X GET http://192.168.3.223:8774/v2.1/662765a438ed40a9bc85b82e9f2a2cab/images/6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-OpenStack-Nova-API-Version: 2.25\" -H \"X-Auth-Token: {SHA1}d52cbbc7997c02255185fbf06a3c608866de4091\"\nDEBUG (connectionpool:387) \"GET /v2.1/662765a438ed40a9bc85b82e9f2a2cab/images/6d1ce183-e6ed-4dd0-a799-2f1b5abc6b3b HTTP/1.1\" 500 198\nDEBUG (session:277) RESP: [500] Content-Length: 198 X-Compute-Request-Id: req-fd6835d9-50df-40a3-993f-1f71798966cc Vary: X-OpenStack-Nova-API-Version Connection: keep-alive X-Openstack-Nova-Api-Version: 2.25 Date: Tue, 12 Apr 2016 01:28:45 GMT Content-Type: application/json; charset=UTF-8\nRESP BODY: {\"computeFault\": {\"message\": \"Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\\n<type 'exceptions.AttributeError'>\", \"code\": 500}}\n\nDEBUG (shell:1082) Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/shell.py\", line 1080, in main\n    OpenStackComputeShell().main(argv)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/shell.py\", line 1007, in main\n    args.func(self.cs, args)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 1304, in do_image_show\n    image = _find_image(cs, args.image)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/shell.py\", line 2139, in _find_image\n    return utils.find_resource(cs.images, image)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/utils.py\", line 294, in find_resource\n    return manager.get(tmp_id)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/v2/images.py\", line 55, in get\n    return self._get(\"/images/%s\" % base.getid(image), \"image\")\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/base.py\", line 339, in _get\n    resp, body = self.api.client.get(url)\n  File \"/usr/local/lib/python2.7/dist-packages/keystoneauth1/adapter.py\", line 173, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/novaclient/client.py\", line 94, in request\n    raise exceptions.from_response(resp, body, url, method)\nClientException: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'> (HTTP 500) (Request-ID: req-fd6835d9-50df-40a3-993f-1f71798966cc)\n$ \n\n[n-api.log]\n2016-04-12 10:28:45.824 ERROR nova.api.openstack.extensions [req-fd6835d9-50df-40a3-993f-1f71798966cc admin admin] Unexpected exception in API method\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/images.py\", line 87, in show\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     image = self._image_api.get(context, id)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/api.py\", line 93, in get\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     show_deleted=show_deleted)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 283, in show\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     include_locations=include_locations)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 513, in _translate_from_glance\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     include_locations=include_locations)\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/image/glance.py\", line 597, in _extract_attributes\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     output[attr] = getattr(image, attr) or 0\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/glanceclient/openstack/common/apiclient/base.py\", line 490, in __getattr__\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     self.get()\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/glanceclient/openstack/common/apiclient/base.py\", line 512, in get\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions     {'x_request_id': self.manager.client.last_request_id})\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions AttributeError: 'HTTPClient' object has no attribute 'last_request_id'\n2016-04-12 10:28:45.824 TRACE nova.api.openstack.extensions\n2016-04-12 10:28:45.826 INFO nova.api.openstack.wsgi [req-fd6835d9-50df-40a3-993f-1f71798966cc admin admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.", 
            "date_created": "2016-04-12 01:41:11.846426+00:00", 
            "author": "https://api.launchpad.net/1.0/~y-furukawa-2"
        }, 
        {
            "content": "Per the n-api logs, it seems the problem is related to glanceclient rather than Nova.", 
            "date_created": "2016-04-12 20:32:16.521973+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "Hi,\n\nI think the bug is valid in nova itself\n", 
            "date_created": "2016-04-13 07:30:36.231716+00:00", 
            "author": "https://api.launchpad.net/1.0/~sirisha-1"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/305255", 
            "date_created": "2016-04-13 12:54:03.547950+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "That really looks weird. The glance wrapper in Nova can surely hide the exception, but that doesn't really fix the problem, right?\n\nAccepting the bug in Nova for the moment, but I'm not very sold to  that.", 
            "date_created": "2016-04-14 10:04:40.774515+00:00", 
            "author": "https://api.launchpad.net/1.0/~sylvain-bauza"
        }, 
        {
            "content": "Hi Sylvain Bauza,\n\nAs you have told yes its hiding the error not only of size attribute but of all attributes and also as you proposed earlier this is an glance client issue as per n-api logs.\n\nThe error is because of the below line in glanceclient/openstack/common/apiclient/base.py : line 512\n\nand if comment it everthing works fine even without any changes in nova.\n\nI am unable to understand why is that line present. Could you please help me out?\n\nThanks in advance\n\nRegards\nSirisha\n", 
            "date_created": "2016-04-15 05:17:17.113662+00:00", 
            "author": "https://api.launchpad.net/1.0/~sirisha-1"
        }, 
        {
            "content": " If the error is resolved at glance client end, as the image is in saving state the size attribute is not returned from glance at that point of time we will get size not found Attribute Error in stack trace so in that case we should return None and this changes should be made in nova.\n\nCorrect me if I am wrong", 
            "date_created": "2016-04-15 06:32:07.557091+00:00", 
            "author": "https://api.launchpad.net/1.0/~sirisha-1"
        }, 
        {
            "content": "Happens to me but on the different way, when i try to create a new server using a python script\n\nnew_server = nova.servers.create(name=\"TestServer\", image=images[0], flavor=flavors[0])\n\nOn the nova-api side this error happends.\n\n2016-05-02 13:46:28.334 29855 ERROR nova.api.openstack.extensions     {'x_request_id': self.manager.client.last_request_id})\n2016-05-02 13:46:28.334 29855 ERROR nova.api.openstack.extensions AttributeError: 'HTTPClient' object has no attribute 'last_request_id'\n2016-05-02 13:46:28.334 29855 ERROR nova.api.openstack.extensions \n2016-05-02 13:46:28.337 29855 INFO nova.api.openstack.wsgi [req-a4815023-0600-49ad-a7bb-af39f74d1016 99260c1b97004777ab2e90254f8fd883 b51978f114574d6e8136daf4b6456f82 - - -] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.AttributeError'>\n2016-05-02 13:46:28.339 29855 INFO nova.osapi_compute.wsgi.server [req-a4815023-0600-49ad-a7bb-af39f74d1016 99260c1b97004777ab2e90254f8fd883 b51978f114574d6e8136daf4b6456f82 - - -] 192.168.1.2 \"POST /v2/b51978f114574d6e8136daf4b6456f82/servers HTTP/1.1\" status: 500 len: 429 time: 0.0923460\n", 
            "date_created": "2016-05-02 10:48:25.123748+00:00", 
            "author": "https://api.launchpad.net/1.0/~wangoloj"
        }, 
        {
            "content": "Change abandoned by Michael Still (<email address hidden>) on branch: master\nReview: https://review.openstack.org/305255\nReason: This patch has been sitting unchanged for more than 12 weeks. I am therefore going to abandon it to keep the nova review queue sane. Please feel free to restore the change if you're still working on it.", 
            "date_created": "2016-10-27 07:34:52.722166+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Not reproducible any more", 
            "date_created": "2017-05-04 11:12:42.795872+00:00", 
            "author": "https://api.launchpad.net/1.0/~abhishek-kekane"
        }
    ]
}