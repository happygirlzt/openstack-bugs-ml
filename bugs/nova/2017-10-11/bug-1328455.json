{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:27:50.699031+00:00", 
    "description": "VM goes to error state in ESX while resizing due to Insufficient disk space on datastore.\n\nIdeal behaviour should bring the Instance back to Active state.\n\nResize try to clone VM, if datacenter has no free space for that flavor size then it will give error \"Insufficient disk space on datastore\".\n\nException move VM to error state. \n\nStack Trace:\n\n2014-06-10 09:27:57.013 26472 WARNING nova.virt.vmwareapi.vmops [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] Datacenter does not have a host / host does not have a datastore. Ignoring it.\n2014-06-10 09:27:57.647 26472 WARNING nova.virt.vmwareapi.driver [-] Task [CloneVM_Task] (returnval){\n\u00a0\u00a0\u00a0value = \"task-28954\"\n\u00a0\u00a0\u00a0_type = \"Task\"\n\u00a0} status: error Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:57.648 26472 ERROR nova.compute.manager [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] Setting instance vm_state to ERROR\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] Traceback (most recent call last):\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 5012, in _error_out_instance_on_exception\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     yield\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3041, in resize_instance\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     block_device_info)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 461, in migrate_disk_and_power_off\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     dest, instance_type)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/vmops.py\", line 1301, in migrate_disk_and_power_off\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     self._session._wait_for_task(instance['uuid'], vm_clone_task)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 932, in _wait_for_task\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     ret_val = done.wait()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     return hubs.get_hub().switch()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 177, in switch\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     return self.greenlet.switch()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] NovaException: Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]\n2014-06-10 09:27:58.173 26472 WARNING nova.virt.vmwareapi.driver [-] Task [CloneVM_Task] (returnval){\n\u00a0\u00a0\u00a0value = \"task-28954\"\n\u00a0\u00a0\u00a0_type = \"Task\"\n\u00a0} status: error Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:58.174 26472 WARNING nova.virt.vmwareapi.driver [-] In vmwareapi:_poll_task, Got this error Trying to re-send() an already-triggered event.\n2014-06-10 09:27:58.174 26472 ERROR nova.openstack.common.loopingcall [-] in fixed duration looping call\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall Traceback (most recent call last):\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/loopingcall.py\", line 78, in _inner\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     self.f(*self.args, **self.kw)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 989, in _poll_task\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     done.send_exception(excep)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 208, in send_exception\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     return self.send(None, args)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 150, in send\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     assert self._result is NOT_USED, 'Trying to re-send() an already-triggered event.'\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall AssertionError: Trying to re-send() an already-triggered event.\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall\n2014-06-10 09:27:58.623 26472 ERROR nova.openstack.common.rpc.amqp [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] Exception during message handling\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 357, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 93, in wrapped\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 76, in wrapped\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 247, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     pass\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 233, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 298, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 275, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 262, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3041, in resize_instance\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     block_device_info)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 461, in migrate_disk_and_power_off\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     dest, instance_type)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/vmops.py\", line 1301, in migrate_disk_and_power_off\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     self._session._wait_for_task(instance['uuid'], vm_clone_task)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 932, in _wait_for_task\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     ret_val = done.wait()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return hubs.get_hub().switch()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 177, in switch\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return self.greenlet.switch()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp NovaException: Insufficient disk space on datastore 'My ds'.", 
    "tags": [
        "compute", 
        "vmware"
    ], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1328455", 
    "owner": "https://api.launchpad.net/1.0/~garyk", 
    "id": 1328455, 
    "index": 3922, 
    "created": "2014-06-10 09:34:39.236286+00:00", 
    "title": "vmware: Instance going to error state while resizing", 
    "comments": [
        {
            "content": "VM goes to error state in ESX while resizing due to Insufficient disk space on datastore.\n\nIdeal behaviour should bring the Instance back to Active state.\n\nStack Trace:\n\n2014-06-10 09:27:57.013 26472 WARNING nova.virt.vmwareapi.vmops [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] Datacenter does not have a host / host does not have a datastore. Ignoring it.\n2014-06-10 09:27:57.647 26472 WARNING nova.virt.vmwareapi.driver [-] Task [CloneVM_Task] (returnval){\n   value = \"task-28954\"\n   _type = \"Task\"\n } status: error Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:57.648 26472 ERROR nova.compute.manager [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] Setting instance vm_state to ERROR\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] Traceback (most recent call last):\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 5012, in _error_out_instance_on_exception\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     yield\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3041, in resize_instance\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     block_device_info)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 461, in migrate_disk_and_power_off\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     dest, instance_type)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/vmops.py\", line 1301, in migrate_disk_and_power_off\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     self._session._wait_for_task(instance['uuid'], vm_clone_task)\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 932, in _wait_for_task\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     ret_val = done.wait()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     return hubs.get_hub().switch()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 177, in switch\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]     return self.greenlet.switch()\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e] NovaException: Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:57.648 26472 TRACE nova.compute.manager [instance: 995cb51e-d489-4247-8661-14f38f72ef4e]\n2014-06-10 09:27:58.173 26472 WARNING nova.virt.vmwareapi.driver [-] Task [CloneVM_Task] (returnval){\n   value = \"task-28954\"\n   _type = \"Task\"\n } status: error Insufficient disk space on datastore 'My ds'.\n2014-06-10 09:27:58.174 26472 WARNING nova.virt.vmwareapi.driver [-] In vmwareapi:_poll_task, Got this error Trying to re-send() an already-triggered event.\n2014-06-10 09:27:58.174 26472 ERROR nova.openstack.common.loopingcall [-] in fixed duration looping call\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall Traceback (most recent call last):\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/loopingcall.py\", line 78, in _inner\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     self.f(*self.args, **self.kw)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 989, in _poll_task\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     done.send_exception(excep)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 208, in send_exception\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     return self.send(None, args)\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 150, in send\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall     assert self._result is NOT_USED, 'Trying to re-send() an already-triggered event.'\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall AssertionError: Trying to re-send() an already-triggered event.\n2014-06-10 09:27:58.174 26472 TRACE nova.openstack.common.loopingcall\n2014-06-10 09:27:58.623 26472 ERROR nova.openstack.common.rpc.amqp [req-69ff7cf8-52a6-4eb9-a179-82ac29111de7 d90ae18dfd8e43caaa2fbcc00bd5a366 683577f7c17b405686885433f960bbf6] Exception during message handling\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 461, in _process_data\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     **args)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 172, in dispatch\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     result = getattr(proxyobj, method)(ctxt, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 357, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 93, in wrapped\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     payload)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 76, in wrapped\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 247, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     pass\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 233, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 298, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 275, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 262, in decorated_function\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3041, in resize_instance\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     block_device_info)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 461, in migrate_disk_and_power_off\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     dest, instance_type)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/vmops.py\", line 1301, in migrate_disk_and_power_off\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     self._session._wait_for_task(instance['uuid'], vm_clone_task)\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/virt/vmwareapi/driver.py\", line 932, in _wait_for_task\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     ret_val = done.wait()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/eventlet/event.py\", line 116, in wait\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return hubs.get_hub().switch()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/eventlet/hubs/hub.py\", line 177, in switch\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp     return self.greenlet.switch()\n2014-06-10 09:27:58.623 26472 TRACE nova.openstack.common.rpc.amqp NovaException: Insufficient disk space on datastore 'My ds'.", 
            "date_created": "2014-06-10 09:34:39.236286+00:00", 
            "author": "https://api.launchpad.net/1.0/~nileshkumar-govindbhai-patel"
        }, 
        {
            "content": "This is interesting since currently the resize operation in the vmware driver doesn't even resize the disk.  There is a patch under review for that: \nhttps://review.openstack.org/#/c/85804/", 
            "date_created": "2014-06-24 04:56:29.330242+00:00", 
            "author": "https://api.launchpad.net/1.0/~ericwb"
        }, 
        {
            "content": "In juno version of openstack the instance is going to available state after the resize process failed for the instance.Can you please try this in the juno version?", 
            "date_created": "2015-01-09 12:46:51.545905+00:00", 
            "author": "https://api.launchpad.net/1.0/~ravali-kandula"
        }, 
        {
            "content": "Setting back to Triaged.\r\n\r\n@ravali, Are you seeing this behavior using vmware? This bug applies to the vmware driver.", 
            "date_created": "2015-01-09 19:35:39.155100+00:00", 
            "author": "https://api.launchpad.net/1.0/~melwitt"
        }, 
        {
            "content": "This has been fixed in https://github.com/openstack/nova/commit/f3f1a53fe2bfe23229867c4a90f6456ac204181f\nWe now use the same instance to do the resize", 
            "date_created": "2015-03-30 15:03:46.942375+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }
    ]
}