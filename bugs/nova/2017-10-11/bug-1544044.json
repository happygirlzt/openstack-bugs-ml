{
    "status": "Confirmed", 
    "last_updated": "2017-09-12 22:21:54.302777+00:00", 
    "description": "https://review.openstack.org/245921\nDear bug triager. This bug was created since a commit was marked with DOCIMPACT.\nYour project \"openstack/nova\" is set up so that we directly report the documentation bugs against it. If this needs changing, the docimpact-group option needs to be added for the project. You can ask the OpenStack infra team (#openstack-infra on freenode) for help if you need to.\n\ncommit c9091d0871948377685feca0eb2e41d8ad38228a\nAuthor: Pawel Koniszewski <email address hidden>\nDate:   Mon Feb 8 08:59:52 2016 +0100\n\n    Add new API to force live migration to complete\n    \n    This change adds manual knob to force ongoing live migration to\n    complete. It is implemented as a new server-migrations API.\n    \n    DocImpact\n    ApiImpact\n    \n    Implements: blueprint pause-vm-during-live-migration\n    Change-Id: I034b4041414a797f65ede52db2963107f2ef7456\n", 
    "tags": [
        "admin-guide", 
        "doc"
    ], 
    "importance": "Low", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1544044", 
    "owner": "None", 
    "id": 1544044, 
    "index": 675, 
    "created": "2016-02-10 12:54:56.269365+00:00", 
    "title": "    Add new API to force live migration to complete", 
    "comments": [
        {
            "content": "https://review.openstack.org/245921\nDear bug triager. This bug was created since a commit was marked with DOCIMPACT.\nYour project \"openstack/nova\" is set up so that we directly report the documentation bugs against it. If this needs changing, the docimpact-group option needs to be added for the project. You can ask the OpenStack infra team (#openstack-infra on freenode) for help if you need to.\n\ncommit c9091d0871948377685feca0eb2e41d8ad38228a\nAuthor: Pawel Koniszewski <email address hidden>\nDate:   Mon Feb 8 08:59:52 2016 +0100\n\n    Add new API to force live migration to complete\n    \n    This change adds manual knob to force ongoing live migration to\n    complete. It is implemented as a new server-migrations API.\n    \n    DocImpact\n    ApiImpact\n    \n    Implements: blueprint pause-vm-during-live-migration\n    Change-Id: I034b4041414a797f65ede52db2963107f2ef7456\n", 
            "date_created": "2016-02-10 12:54:56.269365+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This requires microversion support, which we don't currently have. Marking as incomplete for that reason", 
            "date_created": "2016-02-11 17:35:49.914534+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "This probably needs to be cleaned up to be sent over to the openstack-manuals folks", 
            "date_created": "2016-03-03 13:35:01.919448+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "The official tag \"documentation\" got changed to \"doc\" to match it\nwith the bug reports which get generated by merged commits with a\n\"DocImpact\" in the commit message.", 
            "date_created": "2016-03-03 13:35:03.308187+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "I pinged Pawel (the change author) in IRC, to get more information here before routing the report to the manuals team.", 
            "date_created": "2016-03-14 10:20:20.845543+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "So, this is a new feature that added new API to force live migration to complete. It can be used on a VM that is being live migrated (task state MIGRATING) and right now it is supported only when libvirt is used as a virt driver. Basically it pauses a VM, so that it does not write to memory which means that live migration will end in a finite time because of no dirty pages. Two typical use cases for this feature are:\n\n* Live migration is stuck but you really need to move an instance to another host\n* Live migration is taking long time but it's a critical case and you need to finish it ASAP\n\nVM is automatically unpaused at the end of the process, even if the process fails. By default attached policy allows admins only to use this feature. \n\nNew API call is:\nPOST /servers/<instance_uuid>/migrations/<migration_id>/action\nBody: {'force_complete': null}\nThrough CLI: nova live-migration-force-complete <instance_uuid/name> <migration_id>\n\nMigration ID can be obtained by listing all in-progress live migrations for particular instance:\nGET /servers/<instance_uuid>/migrations\nThrough CLI: nova server-migration-list <instance_uuid/name>", 
            "date_created": "2016-03-14 13:13:53.629921+00:00", 
            "author": "https://api.launchpad.net/1.0/~pawel-koniszewski"
        }, 
        {
            "content": "Addition: \n    POST /servers/<instance_uuid>/migrations/<migration_id>/action\ndoesn't have a response body", 
            "date_created": "2016-03-14 13:30:00.270537+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "@Manuals-Team:\nSee comments #5 + #6. Feel free to contact us if more information is needed.", 
            "date_created": "2016-03-14 13:31:53.726206+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "Best suited: https://docs.openstack.org/admin-guide/compute-configuring-migrations.html or https://docs.openstack.org/admin-guide/compute-live-migration-usage.html", 
            "date_created": "2017-04-11 10:14:43.162347+00:00", 
            "author": "https://api.launchpad.net/1.0/~alexandra-settle"
        }
    ]
}