{
    "status": "Invalid", 
    "last_updated": "2016-05-20 06:45:55.771855+00:00", 
    "description": "\nWith the below pci whitelist in nova.conf , getting the below ERROr\n\n\npci_passthrough_whitelist = {\"address\":{\"domain\": \".*\",\"bus\": \"04\", \"slot\": \"00\",\"function\": \"[1-2]\"},\"physical_network\":\"physnet1\"}\npci_passthrough_whitelist ={\"address\":{\"domain\": \".*\",\"bus\": \"04\", \"slot\": \"00\",\"function\": \"[3-4]\"},\"physical_network\":\"physnet2\"}\n\n\n\n2016-05-20 02:37:30.100 ERROR nova.compute.manager [req-67cc2371-7005-4485-bbb0-b19d5075fd09 None None] Error updating resources for node stack.\n2016-05-20 02:37:30.100 TRACE nova.compute.manager Traceback (most recent call last):\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/manager.py\", line 6275, in update_available_resource_for_node\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     rt.update_available_resource(context)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 478, in update_available_resource\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._update_available_resource(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 271, in inner\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     return f(*args, **kwargs)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 499, in _update_available_resource\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_compute_node(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 377, in _init_compute_node\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._setup_pci_tracker(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 396, in _setup_pci_tracker\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.pci_tracker = pci_manager.PciDevTracker(context, node_id=n_id)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/manager.py\", line 58, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.dev_filter = whitelist.Whitelist(CONF.pci_passthrough_whitelist)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/whitelist.py\", line 78, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.specs = self._parse_white_list_from_config(whitelist_spec)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/whitelist.py\", line 59, in _parse_white_list_from_config\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     spec = devspec.PciDeviceSpec(ds)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 134, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_dev_details()\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 159, in _init_dev_details\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.address = PciAddress(self.address, pf)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 67, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_address_fields(pci_addr)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 80, in _init_address_fields\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     dbs, sep, func = pci_addr.partition('.')\n2016-05-20 02:37:30.100 TRACE nova.compute.manager AttributeError: 'dict' object has no attribute 'partition'", 
    "tags": [
        "pci", 
        "sriov"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1583915", 
    "owner": "None", 
    "id": 1583915, 
    "index": 6229, 
    "created": "2016-05-20 06:38:15.723685+00:00", 
    "title": "SRIOV : AttributeError: 'dict' object has no attribute 'partition'", 
    "comments": [
        {
            "content": "\nWith the below pci whitelist in nova.conf , getting the below ERROr\n\n\npci_passthrough_whitelist = {\"address\":{\"domain\": \".*\",\"bus\": \"04\", \"slot\": \"00\",\"function\": \"[1-2]\"},\"physical_network\":\"physnet1\"}\npci_passthrough_whitelist ={\"address\":{\"domain\": \".*\",\"bus\": \"04\", \"slot\": \"00\",\"function\": \"[3-4]\"},\"physical_network\":\"physnet2\"}\n\n\n\n2016-05-20 02:37:30.100 ERROR nova.compute.manager [req-67cc2371-7005-4485-bbb0-b19d5075fd09 None None] Error updating resources for node stack.\n2016-05-20 02:37:30.100 TRACE nova.compute.manager Traceback (most recent call last):\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/manager.py\", line 6275, in update_available_resource_for_node\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     rt.update_available_resource(context)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 478, in update_available_resource\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._update_available_resource(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 271, in inner\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     return f(*args, **kwargs)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 499, in _update_available_resource\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_compute_node(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 377, in _init_compute_node\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._setup_pci_tracker(context, resources)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/compute/resource_tracker.py\", line 396, in _setup_pci_tracker\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.pci_tracker = pci_manager.PciDevTracker(context, node_id=n_id)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/manager.py\", line 58, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.dev_filter = whitelist.Whitelist(CONF.pci_passthrough_whitelist)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/whitelist.py\", line 78, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.specs = self._parse_white_list_from_config(whitelist_spec)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/whitelist.py\", line 59, in _parse_white_list_from_config\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     spec = devspec.PciDeviceSpec(ds)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 134, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_dev_details()\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 159, in _init_dev_details\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self.address = PciAddress(self.address, pf)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 67, in __init__\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     self._init_address_fields(pci_addr)\n2016-05-20 02:37:30.100 TRACE nova.compute.manager   File \"/opt/stack/nova/nova/pci/devspec.py\", line 80, in _init_address_fields\n2016-05-20 02:37:30.100 TRACE nova.compute.manager     dbs, sep, func = pci_addr.partition('.')\n2016-05-20 02:37:30.100 TRACE nova.compute.manager AttributeError: 'dict' object has no attribute 'partition'", 
            "date_created": "2016-05-20 06:38:15.723685+00:00", 
            "author": "https://api.launchpad.net/1.0/~prabhm"
        }, 
        {
            "content": "https://review.openstack.org/#/c/199488/14/nova/pci/devspec.py\n\nThis patch set is not merged so i dont think whitelist will support ", 
            "date_created": "2016-05-20 06:45:55.241363+00:00", 
            "author": "https://api.launchpad.net/1.0/~prabhm"
        }
    ]
}