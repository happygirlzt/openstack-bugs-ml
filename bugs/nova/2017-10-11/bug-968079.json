{
    "status": "Invalid", 
    "last_updated": "2012-09-10 13:10:57.961049+00:00", 
    "description": "Hi,\n\nWhen I reboot a physical node and nothing is mounted/launched, I try to restart the LXC instances. \n\nBut it is impossible to recover the instances. Always, the following error occured:\n\n\n2012-03-29 10:58:13 ERROR nova.rpc.common [-] Exception during message handling\n(nova.rpc.common): TRACE: Traceback (most recent call last):\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py\", line 250, in _process_data\n(nova.rpc.common): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 112, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 156, in decorated_function\n(nova.rpc.common): TRACE:     function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 180, in decorated_function\n(nova.rpc.common): TRACE:     sys.exc_info())\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 174, in decorated_function\n(nova.rpc.common): TRACE:     return function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 882, in reboot_instance\n(nova.rpc.common): TRACE:     reboot_type)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 112, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 675, in reboot\n(nova.rpc.common): TRACE:     self._create_new_domain(xml)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 1412, in _create_new_domain\n(nova.rpc.common): TRACE:     domain.createWithFlags(launch_flags)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 547, in createWithFlags\n(nova.rpc.common): TRACE:     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n(nova.rpc.common): TRACE: libvirtError: internal error guest failed to start: 2012-03-29 08:58:13.117+0000: 2407: info : libvirt version: 0.9.9\n(nova.rpc.common): TRACE: 2012-03-29 08:58:13.117+0000: 2407: warning : lxcCapsInit:77 : Failed to get host power management capabilities\n(nova.rpc.common): TRACE: PATH=/bin:/sbin TERM=linux LIBVIRT_LXC_UUID=9c078204-01b3-4934-8ee8-620775b184a9 LIBVIRT_LXC_NAME=instance-0000003c /sbin/init\n(nova.rpc.common): TRACE:\n(nova.rpc.common): TRACE:\n\nSo OpenStack is not able to launch LXC dead instances as described in the recovery plan.\n\nBest regards.\nSam", 
    "tags": [
        "lxc"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/968079", 
    "owner": "None", 
    "id": 968079, 
    "index": 2733, 
    "created": "2012-03-29 09:01:54.723500+00:00", 
    "title": "LXC instances do not reboot after a physical crash", 
    "comments": [
        {
            "content": "Hi,\n\nWhen I reboot a physical node and nothing is mounted/launched, I try to restart the LXC instances. \n\nBut it is impossible to recover the instances. Always, the following error occured:\n\n\n2012-03-29 10:58:13 ERROR nova.rpc.common [-] Exception during message handling\n(nova.rpc.common): TRACE: Traceback (most recent call last):\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py\", line 250, in _process_data\n(nova.rpc.common): TRACE:     rval = node_func(context=ctxt, **node_args)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 112, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 156, in decorated_function\n(nova.rpc.common): TRACE:     function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 180, in decorated_function\n(nova.rpc.common): TRACE:     sys.exc_info())\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n(nova.rpc.common): TRACE:     self.gen.next()\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 174, in decorated_function\n(nova.rpc.common): TRACE:     return function(self, context, instance_uuid, *args, **kwargs)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 882, in reboot_instance\n(nova.rpc.common): TRACE:     reboot_type)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 112, in wrapped\n(nova.rpc.common): TRACE:     return f(*args, **kw)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 675, in reboot\n(nova.rpc.common): TRACE:     self._create_new_domain(xml)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/connection.py\", line 1412, in _create_new_domain\n(nova.rpc.common): TRACE:     domain.createWithFlags(launch_flags)\n(nova.rpc.common): TRACE:   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 547, in createWithFlags\n(nova.rpc.common): TRACE:     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n(nova.rpc.common): TRACE: libvirtError: internal error guest failed to start: 2012-03-29 08:58:13.117+0000: 2407: info : libvirt version: 0.9.9\n(nova.rpc.common): TRACE: 2012-03-29 08:58:13.117+0000: 2407: warning : lxcCapsInit:77 : Failed to get host power management capabilities\n(nova.rpc.common): TRACE: PATH=/bin:/sbin TERM=linux LIBVIRT_LXC_UUID=9c078204-01b3-4934-8ee8-620775b184a9 LIBVIRT_LXC_NAME=instance-0000003c /sbin/init\n(nova.rpc.common): TRACE:\n(nova.rpc.common): TRACE:\n\nSo OpenStack is not able to launch LXC dead instances as described in the recovery plan.\n\nBest regards.\nSam", 
            "date_created": "2012-03-29 09:01:54.723500+00:00", 
            "author": "https://api.launchpad.net/1.0/~samuel-hassine-s"
        }, 
        {
            "content": "\"When I reboot a physical node and nothing is mounted/launched, I try to restart the LXC instances.\"\n\nWhat do you mean by \"and nothing is mounted/launched\" ?\n\nWhat commands are you doing specifically \"to restart the LXC instances\" ?\n\n\"So OpenStack is not able to launch LXC dead instances as described in the recovery plan.\"\n\nWhat is \"the recovery plan\" you reference?", 
            "date_created": "2012-06-07 21:04:59.006745+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "We cannot solve the issue you reported without more information. Could you please provide the requested information ?", 
            "date_created": "2012-07-12 14:04:45.403271+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "This bug lacks the necessary information to effectively reproduce and fix it, therefore it has been closed. Feel free to reopen the bug by providing the requested information and set the bug status back to ''New''.", 
            "date_created": "2012-09-10 13:10:54.742231+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}