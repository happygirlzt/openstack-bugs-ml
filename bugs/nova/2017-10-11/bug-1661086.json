{
    "status": "Invalid", 
    "last_updated": "2017-07-28 12:46:34.608964+00:00", 
    "description": "I did a fresh restack/reclone this morning and can no longer boot up a cirros instance.\n\nNova client returns:\n\n| fault                                | {\"message\": \"Failure running os_vif plugin plug method: Failed to plug VIF VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7\", \"code\": 500, \"details\": \"  File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 1780, in _do_build_and_run_instance |\n\npip list:\nnova (15.0.0.0b4.dev77, /opt/stack/nova)\nos-vif (1.4.0)\n\nn-cpu.log shows:\n2017-02-01 11:13:32.880 DEBUG nova.network.os_vif_util [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Converted object VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43') from (pid=69603) nova_to_osvif_vif /opt/stack/nova/nova/network/os_vif_util.py:425\n2017-02-01 11:13:32.880 DEBUG os_vif [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Unplugging vif VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43') from (pid=69603) unplug /usr/local/lib/python2.7/dist-packages/os_vif/__init__.py:112\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: request[139935485013840]: (3, b'vif_plug_ovs.linux_net.delete_bridge', ('qbrd3377ad5-43', b'qvbd3377ad5-43'), {}) from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: Exception during request[139935485013840]: a bytes-like object is required, not 'str' from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: reply[139935485013840]: (5, 'builtins.TypeError', (\"a bytes-like object is required, not 'str'\",)) from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.882 ERROR os_vif [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Failed to unplug vif VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43')\n2017-02-01 11:13:32.882 TRACE os_vif Traceback (most recent call last):\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/os_vif/__init__.py\", line 113, in unplug\n2017-02-01 11:13:32.882 TRACE os_vif     plugin.unplug(vif, instance_info)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/vif_plug_ovs/ovs.py\", line 216, in unplug\n2017-02-01 11:13:32.882 TRACE os_vif     self._unplug_bridge(vif, instance_info)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/vif_plug_ovs/ovs.py\", line 192, in _unplug_bridge\n2017-02-01 11:13:32.882 TRACE os_vif     linux_net.delete_bridge(vif.bridge_name, v1_name)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_privsep/priv_context.py\", line 205, in _wrap\n2017-02-01 11:13:32.882 TRACE os_vif     return self.channel.remote_call(name, args, kwargs)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py\", line 186, in remote_call\n2017-02-01 11:13:32.882 TRACE os_vif     exc_type = importutils.import_class(result[1])\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/importutils.py\", line 30, in import_class\n2017-02-01 11:13:32.882 TRACE os_vif     __import__(mod_str)\n2017-02-01 11:13:32.882 TRACE os_vif ImportError: No module named builtins\n2017-02-01 11:13:32.882 TRACE os_vif\n\nFull n-cpu.log is attached.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1661086", 
    "owner": "None", 
    "id": 1661086, 
    "index": 6650, 
    "created": "2017-02-01 20:23:06.826956+00:00", 
    "title": "Failed to plug VIF VIFBridge", 
    "comments": [
        {
            "content": "I did a fresh restack/reclone this morning and can no longer boot up a cirros instance.\n\nNova client returns:\n\n| fault                                | {\"message\": \"Failure running os_vif plugin plug method: Failed to plug VIF VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7\", \"code\": 500, \"details\": \"  File \\\"/opt/stack/nova/nova/compute/manager.py\\\", line 1780, in _do_build_and_run_instance |\n\npip list:\nnova (15.0.0.0b4.dev77, /opt/stack/nova)\nos-vif (1.4.0)\n\nn-cpu.log shows:\n2017-02-01 11:13:32.880 DEBUG nova.network.os_vif_util [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Converted object VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43') from (pid=69603) nova_to_osvif_vif /opt/stack/nova/nova/network/os_vif_util.py:425\n2017-02-01 11:13:32.880 DEBUG os_vif [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Unplugging vif VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43') from (pid=69603) unplug /usr/local/lib/python2.7/dist-packages/os_vif/__init__.py:112\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: request[139935485013840]: (3, b'vif_plug_ovs.linux_net.delete_bridge', ('qbrd3377ad5-43', b'qvbd3377ad5-43'), {}) from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: Exception during request[139935485013840]: a bytes-like object is required, not 'str' from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.881 DEBUG oslo.privsep.daemon [-] privsep: reply[139935485013840]: (5, 'builtins.TypeError', (\"a bytes-like object is required, not 'str'\",)) from (pid=69603) out_of_band /usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py:194\n2017-02-01 11:13:32.882 ERROR os_vif [req-17c8b4e4-2197-4205-aed3-007d0f2837e4 admin admin] Failed to unplug vif VIFBridge(active=False,address=fa:16:3e:6f:0e:84,bridge_name='qbrd3377ad5-43',has_traffic_filtering=True,id=d3377ad5-4397-474c-b6dd-e29b9a52d277,network=Network(d2582e93-d6e5-43ac-be7b-fe3fc3c7e593),plugin='ovs',port_profile=VIFPortProfileBase,preserve_on_delete=False,vif_name='tapd3377ad5-43')\n2017-02-01 11:13:32.882 TRACE os_vif Traceback (most recent call last):\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/os_vif/__init__.py\", line 113, in unplug\n2017-02-01 11:13:32.882 TRACE os_vif     plugin.unplug(vif, instance_info)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/vif_plug_ovs/ovs.py\", line 216, in unplug\n2017-02-01 11:13:32.882 TRACE os_vif     self._unplug_bridge(vif, instance_info)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/vif_plug_ovs/ovs.py\", line 192, in _unplug_bridge\n2017-02-01 11:13:32.882 TRACE os_vif     linux_net.delete_bridge(vif.bridge_name, v1_name)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_privsep/priv_context.py\", line 205, in _wrap\n2017-02-01 11:13:32.882 TRACE os_vif     return self.channel.remote_call(name, args, kwargs)\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_privsep/daemon.py\", line 186, in remote_call\n2017-02-01 11:13:32.882 TRACE os_vif     exc_type = importutils.import_class(result[1])\n2017-02-01 11:13:32.882 TRACE os_vif   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/importutils.py\", line 30, in import_class\n2017-02-01 11:13:32.882 TRACE os_vif     __import__(mod_str)\n2017-02-01 11:13:32.882 TRACE os_vif ImportError: No module named builtins\n2017-02-01 11:13:32.882 TRACE os_vif\n\nFull n-cpu.log is attached.", 
            "date_created": "2017-02-01 20:23:06.826956+00:00", 
            "author": "https://api.launchpad.net/1.0/~johnsom"
        }, 
        {
            "content": "", 
            "date_created": "2017-02-01 20:23:23.363858+00:00", 
            "author": "https://api.launchpad.net/1.0/~johnsom"
        }, 
        {
            "content": "I expect this was an issue with a stale installation of dependencies. If this is still an issue, please reopen", 
            "date_created": "2017-07-28 12:46:34.107311+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}