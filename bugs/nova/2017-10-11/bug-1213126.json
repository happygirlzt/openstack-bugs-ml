{
    "status": "Invalid", 
    "last_updated": "2014-08-26 06:03:12.559560+00:00", 
    "description": "2013-08-16 10:06:05.315 ^[[01;31mERROR root [^[[00;36m-^[[01;31m] ^[[01;35m^[[01;31mOriginal exception being dropped: ['Traceback (most recent call last):\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1038, in attach_volume\\n    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\\n    if ret == -1: raise libvirtError (\\'virDomainAttachDeviceFlags() failed\\', dom=self)\\n', 'libvirtError: End of file while reading data: Input/output error\\n']^[[00m\n2013-08-16 10:06:05.316 ^[[01;31mERROR nova.compute.manager [^[[01;36mreq-db59ccfd-b546-40fd-8447-03d546725caa ^[[00;36madmin demo^[[01;31m] ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[01;31mFailed to attach volume 079b6295-8433-444f-bf8f-c013d65ae634 at /dev/vdc^[[00m\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00mTraceback (most recent call last):\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 3465, in _attach_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    mountpoint)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1051, in attach_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    disk_dev)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 992, in volume_driver_method\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    return method(connection_info, *args, **kwargs)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    return f(*args, **kwargs)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/volume.py\", line 308, in disconnect_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    devices = self.connection.get_all_block_devices()\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2666, in get_all_block_devices\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    for dom_id in self.list_instance_ids():\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 694, in list_instance_ids\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    if self._conn.numOfDomains() == 0:\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00mAttributeError: 'NoneType' object has no attribute 'numOfDomains'\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m", 
    "tags": [
        "volumes"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1213126", 
    "owner": "None", 
    "id": 1213126, 
    "index": 3975, 
    "created": "2013-08-16 14:53:51.528413+00:00", 
    "title": "attaching volume to instance fails with IO error", 
    "comments": [
        {
            "content": "2013-08-16 10:06:05.315 ^[[01;31mERROR root [^[[00;36m-^[[01;31m] ^[[01;35m^[[01;31mOriginal exception being dropped: ['Traceback (most recent call last):\\n', '  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1038, in attach_volume\\n    virt_dom.attachDeviceFlags(conf.to_xml(), flags)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 179, in doit\\n    result = proxy_call(self._autowrap, f, *args, **kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 139, in proxy_call\\n    rv = execute(f,*args,**kwargs)\\n', '  File \"/usr/local/lib/python2.7/dist-packages/eventlet/tpool.py\", line 77, in tworker\\n    rv = meth(*args,**kwargs)\\n', '  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 420, in attachDeviceFlags\\n    if ret == -1: raise libvirtError (\\'virDomainAttachDeviceFlags() failed\\', dom=self)\\n', 'libvirtError: End of file while reading data: Input/output error\\n']^[[00m\n2013-08-16 10:06:05.316 ^[[01;31mERROR nova.compute.manager [^[[01;36mreq-db59ccfd-b546-40fd-8447-03d546725caa ^[[00;36madmin demo^[[01;31m] ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[01;31mFailed to attach volume 079b6295-8433-444f-bf8f-c013d65ae634 at /dev/vdc^[[00m\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00mTraceback (most recent call last):\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 3465, in _attach_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    mountpoint)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1051, in attach_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    disk_dev)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 992, in volume_driver_method\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    return method(connection_info, *args, **kwargs)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/openstack/common/lockutils.py\", line 246, in inner\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    return f(*args, **kwargs)\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/volume.py\", line 308, in disconnect_volume\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    devices = self.connection.get_all_block_devices()\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2666, in get_all_block_devices\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    for dom_id in self.list_instance_ids():\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m  File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 694, in list_instance_ids\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m    if self._conn.numOfDomains() == 0:\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00mAttributeError: 'NoneType' object has no attribute 'numOfDomains'\n^[[01;31m2013-08-16 10:06:05.316 TRACE nova.compute.manager ^[[01;35m[instance: f1f87ce0-0833-4476-8f71-74870b5e7068] ^[[00m", 
            "date_created": "2013-08-16 14:53:51.528413+00:00", 
            "author": "https://api.launchpad.net/1.0/~ajeffrey"
        }, 
        {
            "content": "this bug was encountered with the latest devstack as of today and simply launching a uec based instance and trying to attach an iscsi backed volume. When that failed the volume was migrated to lvm iscsi and also failed. May be related to the 4k blocksize bug - not sure.", 
            "date_created": "2013-08-16 15:02:49.446266+00:00", 
            "author": "https://api.launchpad.net/1.0/~ajeffrey"
        }, 
        {
            "content": "status?", 
            "date_created": "2013-09-19 13:33:06.331670+00:00", 
            "author": "https://api.launchpad.net/1.0/~ajeffrey"
        }, 
        {
            "content": "[Triaging bugs here.]\n\nIt's been a long time this bug has been reported. A gentle note for next time, please report complete details: https://wiki.openstack.org/wiki/BugFilingRecommendations\n\n\nI just testd this and works fine for me:\n\nThat's the DevStack commit:\n\n  devstack]$ git log | head -5\n  commit c73176b5e2627c8c6189d1880528edd434f28d37\n  Merge: ddcde92 e1d004a\n  Author: Jenkins <email address hidden>\n  Date:   Mon Aug 25 23:59:56 2014 +0000\n\nAnd, that's the Nova commit:\n\n  nova]$ git log | head -5\n  commit cc01554c79ebdf36e44f75dd6ba7b13f6523bd46\n  Merge: 979ee4b 2f17815\n  Author: Jenkins <email address hidden>\n  Date:   Tue Aug 26 04:52:38 2014 +0000\n\n\nSuccessful test to attach a Cinder volume to a Nova instance\n---------------------------------------------------------------------\n\n1. Create a Cinder volume:\n\n  $ cinder create --display_name=test_volume 1\n\n2. List it:\n\n  $ cinder list\n  +--------------------------------------+-----------+-----------------+------+-------------+----------+-------------+\n  |                  ID                  |   Status  |   Display Name  | Size | Volume Type | Bootable | Attached to |\n  +--------------------------------------+-----------+-----------------+------+-------------+----------+-------------+\n  | 429ab0f8-bced-4cd6-bae6-b8aad8025eda | available | test_volume |  1   |     None    |  false   |             |\n  +--------------------------------------+-----------+-----------------+------+-------------+----------+-------------+\n\n3. Place the above ID in a variable:\n\n  $ VOLUME_ID=429ab0f8-bced-4cd6-bae6-b8aad8025eda\n\n4. Boot a Nova instance:\n\n  $ nova boot --image 2ca92611-a0ac-473d-a731-1898a1391d8a --flavor 1 cirrvm1\n\n5.  Ensure the instance is ACTIVE:\n\n  $ nova list\n  +--------------------------------------+---------+--------+------------+-------------+-------------------+\n  | ID                                   | Name    | Status | Task State | Power State | Networks          |\n  +--------------------------------------+---------+--------+------------+-------------+-------------------+\n  | 73763a4d-409f-4c52-89ee-3f911a517144 | cirrvm1 | ACTIVE | -          | Running     | public=172.24.4.3 |\n  +--------------------------------------+---------+--------+------------+-------------+-------------------+\n\n6. Attach the Cinder volume:\n\n  $ nova volume-attach cirrvm1 $VOLUME_ID\n  +----------+--------------------------------------+\n  | Property | Value                                |\n  +----------+--------------------------------------+\n  | device   | /dev/vdb                             |\n  | id       | 429ab0f8-bced-4cd6-bae6-b8aad8025eda |\n  | serverId | 73763a4d-409f-4c52-89ee-3f911a517144 |\n  | volumeId | 429ab0f8-bced-4cd6-bae6-b8aad8025eda |\n  +----------+--------------------------------------+\n\n7. List the volume attached:\n\n  $ nova volume-list\n  +--------------------------------------+--------+-----------------+------+-------------+--------------------------------------+\n  | ID                                   | Status | Display Name    | Size | Volume Type | Attached to                          |\n  +--------------------------------------+--------+-----------------+------+-------------+--------------------------------------+\n  | 429ab0f8-bced-4cd6-bae6-b8aad8025eda | in-use | test_volume     | 1    | None        | 73763a4d-409f-4c52-89ee-3f911a517144 |\n  +--------------------------------------+--------+-----------------+------+-------------+--------------------------------------+\n\n8.Optionally, you can also list if the block device is attached by trying:\n\n  $ sudo virsh list\n   Id    Name                           State\n  ----------------------------------------------------\n   2     instance-00000001              running\n\n  $ sudo virsh domblklist 2\n  Target     Source\n  ------------------------------------------------\n  vda        /home/kashyapc/src/openstack/data/nova/instances/73763a4d-409f-4c52-89ee-3f911a517144/disk\n  vdb        /dev/disk/by-path/ip-127.0.0.1:3260-iscsi-iqn.2010-10.org.openstack:volume-429ab0f8-bced-4cd6-bae6-b8aad8025eda-lun-1\n  hdd        /home/kashyapc/src/openstack/data/nova/instances/73763a4d-409f-4c52-89ee-3f911a517144/disk.config\n\n", 
            "date_created": "2014-08-26 06:01:27.456154+00:00", 
            "author": "https://api.launchpad.net/1.0/~kashyapc"
        }, 
        {
            "content": "Closing this bug per comment #3. \n\nPlease reopen it (with more verbose details) if you encounter it again.", 
            "date_created": "2014-08-26 06:03:03.772775+00:00", 
            "author": "https://api.launchpad.net/1.0/~kashyapc"
        }
    ]
}