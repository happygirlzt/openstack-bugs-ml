{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:24:42.240246+00:00", 
    "description": "When running multiple migrations concurrently, I see an error the repeats in the compute.log file.  The trace can be seen here:\n\nhttp://pastebin.com/XRr70jpU\n\nHere is the steps I followed to recreate this issue:\n\n(1).  Boot the instances\n\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE1\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE2\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE3\n\n[root@vs347 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | ACTIVE | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | ACTIVE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | ACTIVE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\nbvt-instance-00000029 - olyblade02\nbvt-instance-0000002a - olyblade02\nbvt-instance-0000002b - olyblade02\n\n(2). migrate the instances simultaneously\n\n[root@vs347 ~]# nova migrate MIGRATE1\n[root@vs347 ~]# nova migrate MIGRATE2\n[root@vs347 ~]# nova migrate MIGRATE3\n[root@vs347 ~]# \n\n* State as of 4:24 p.m.\n\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | RESIZE | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | RESIZE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | RESIZE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\n* Now they are in resize-verify state so do confirm\n\n[root@vs347 ~]# nova resize-confirm MIGRATE1\n[root@vs347 ~]# nova resize-confirm MIGRATE2\n[root@vs347 ~]# nova resize-confirm MIGRATE3\n[root@vs347 ~]#\n\n[root@vs347 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | ERROR  | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | ACTIVE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | ACTIVE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\n[root@vs347 ~]# nova show MIGRATE1\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                  |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                  |\n| updated                             | 2013-03-22T21:52:21Z                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | vs347.rch.kstart.ibm.com                                                                                               |\n| key_name                            | None                                                                                                                   |\n| image                               | Rhel6MasterFile (be8b6475-26d8-410f-aaa5-8b278d98c8f9)                                                                 |\n| hostId                              | a3883219ffb68903fc2ecc1e0a490f3f250fdf3773f446bcb398441c                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | bvt-instance-00000029                                                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | olyblade01.rch.stglabs.ibm.com                                                                                         |\n| flavor                              | m1.tiny (1)                                                                                                            |\n| demonet network                     | 172.0.0.2                                                                                                              |\n| id                                  | ccf6212b-bb8d-4826-97db-e18b4d4cb2b0                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                |\n| user_id                             | 3ccf55fd609b45319f24fe681338886d                                                                                       |\n| name                                | MIGRATE1                                                                                                               |\n| created                             | 2013-03-22T21:19:00Z                                                                                                   |\n| tenant_id                           | 67b1c37f4ca64283908c7077e9e59997                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                 |\n| metadata                            | {}                                                                                                                     |\n| accessIPv4                          |                                                                                                                        |\n| accessIPv6                          |                                                                                                                        |\n| fault                               | {u'message': u'KeyError', u'code': 500, u'details': u'\\'old_instance_type_memory_mb\\'                                  |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 229, in decorated_function                     |\n|                                     |     return function(self, context, *args, **kwargs)                                                                    |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1956, in confirm_resize                        |\n|                                     |     rt.confirm_resize(context, migration)                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 373, in confirm_resize                |\n|                                     |     self.update_available_resource(elevated)                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner                       |\n|                                     |     retval = f(*args, **kwargs)                                                                                        |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource     |\n|                                     |     self._update_usage_from_migrations(resources, migrations)                                                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 468, in _update_usage_from_migrations |\n|                                     |     migration)                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 428, in _update_usage_from_migration  |\n|                                     |     itype = instance_types.extract_instance_type(instance, \\'old_\\')                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 250, in extract_instance_type           |\n|                                     |     instance_type[key] = type_fn(sys_meta[type_key])                                                                   |\n|                                     | ', u'created': u'2013-03-22T21:52:21Z'}                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                   |\n| config_drive                        |                                                                                                                        |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+", 
    "tags": [], 
    "importance": "High", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1160489", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1160489, 
    "index": 1038, 
    "created": "2013-03-26 17:21:03.485177+00:00", 
    "title": "periodically seeing KeyError: 'old_instance_type_memory_mb' in compute.log", 
    "comments": [
        {
            "content": "When running multiple migrations concurrently, I see an error the repeats in the compute.log file.  The trace can be seen here:\n\nhttp://pastebin.com/XRr70jpU\n\nHere is the steps I followed to recreate this issue:\n\n(1).  Boot the instances\n\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE1\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE2\nnova boot --image be8b6475-26d8-410f-aaa5-8b278d98c8f9 --flavor 1 MIGRATE3\n\n[root@vs347 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | ACTIVE | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | ACTIVE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | ACTIVE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\nbvt-instance-00000029 - olyblade02\nbvt-instance-0000002a - olyblade02\nbvt-instance-0000002b - olyblade02\n\n(2). migrate the instances simultaneously\n\n[root@vs347 ~]# nova migrate MIGRATE1\n[root@vs347 ~]# nova migrate MIGRATE2\n[root@vs347 ~]# nova migrate MIGRATE3\n[root@vs347 ~]# \n\n* State as of 4:24 p.m.\n\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | RESIZE | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | RESIZE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | RESIZE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\n* Now they are in resize-verify state so do confirm\n\n[root@vs347 ~]# nova resize-confirm MIGRATE1\n[root@vs347 ~]# nova resize-confirm MIGRATE2\n[root@vs347 ~]# nova resize-confirm MIGRATE3\n[root@vs347 ~]#\n\n[root@vs347 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| ccf6212b-bb8d-4826-97db-e18b4d4cb2b0 | MIGRATE1 | ERROR  | demonet=172.0.0.2 |\n| 739a6d71-cc63-4a34-b14f-7aef6f635a31 | MIGRATE2 | ACTIVE | demonet=172.0.0.4 |\n| 11dabeb8-2799-40e1-a355-4d58f935a9c6 | MIGRATE3 | ACTIVE | demonet=172.0.0.3 |\n+--------------------------------------+----------+--------+-------------------+\n\n[root@vs347 ~]# nova show MIGRATE1\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                  |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                  |\n| updated                             | 2013-03-22T21:52:21Z                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | vs347.rch.kstart.ibm.com                                                                                               |\n| key_name                            | None                                                                                                                   |\n| image                               | Rhel6MasterFile (be8b6475-26d8-410f-aaa5-8b278d98c8f9)                                                                 |\n| hostId                              | a3883219ffb68903fc2ecc1e0a490f3f250fdf3773f446bcb398441c                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | bvt-instance-00000029                                                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | olyblade01.rch.stglabs.ibm.com                                                                                         |\n| flavor                              | m1.tiny (1)                                                                                                            |\n| demonet network                     | 172.0.0.2                                                                                                              |\n| id                                  | ccf6212b-bb8d-4826-97db-e18b4d4cb2b0                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                |\n| user_id                             | 3ccf55fd609b45319f24fe681338886d                                                                                       |\n| name                                | MIGRATE1                                                                                                               |\n| created                             | 2013-03-22T21:19:00Z                                                                                                   |\n| tenant_id                           | 67b1c37f4ca64283908c7077e9e59997                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                 |\n| metadata                            | {}                                                                                                                     |\n| accessIPv4                          |                                                                                                                        |\n| accessIPv6                          |                                                                                                                        |\n| fault                               | {u'message': u'KeyError', u'code': 500, u'details': u'\\'old_instance_type_memory_mb\\'                                  |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 229, in decorated_function                     |\n|                                     |     return function(self, context, *args, **kwargs)                                                                    |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1956, in confirm_resize                        |\n|                                     |     rt.confirm_resize(context, migration)                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 373, in confirm_resize                |\n|                                     |     self.update_available_resource(elevated)                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner                       |\n|                                     |     retval = f(*args, **kwargs)                                                                                        |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource     |\n|                                     |     self._update_usage_from_migrations(resources, migrations)                                                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 468, in _update_usage_from_migrations |\n|                                     |     migration)                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 428, in _update_usage_from_migration  |\n|                                     |     itype = instance_types.extract_instance_type(instance, \\'old_\\')                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 250, in extract_instance_type           |\n|                                     |     instance_type[key] = type_fn(sys_meta[type_key])                                                                   |\n|                                     | ', u'created': u'2013-03-22T21:52:21Z'}                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                   |\n| config_drive                        |                                                                                                                        |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+", 
            "date_created": "2013-03-26 17:21:03.485177+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "I am seeing this issue with periodic tasks as well - not just running multiple migrations", 
            "date_created": "2013-03-26 17:28:50.381731+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "Can you post an un-wrapped log trace?\n\nAlso, can you please confirm the exact version of grizzly you're working on? Ideally, a git hash...", 
            "date_created": "2013-03-26 17:29:40.846691+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "Here is the trace:\n\n2013-03-22 14:13:45.950 ERROR nova.compute.manager [req-9d363741-c3b1-4a1d-b87c-8084ceed2993 3ccf55fd609b45319f24fe681338886d 67b1c37f4ca64283908c7077e9e59997] [instance: 2fe0499d-7707-4447-879b-15093e7d1ee9] 'old_instance_type_memory_mb'. Setting instance vm_state to ERROR\n\n2013-03-22 14:13:46.411 ERROR nova.openstack.common.rpc.amqp [req-9d363741-c3b1-4a1d-b87c-8084ceed2993 3ccf55fd609b45319f24fe681338886d 67b1c37f4ca64283908c7077e9e59997] Exception during message handling\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp Traceback (most recent call last):\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/amqp.py\", line 393, in _process_data\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 120, in wrapped\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/exception.py\", line 97, in wrapped\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 265, in decorated_function\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 242, in decorated_function\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 229, in decorated_function\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 1956, in confirm_resize\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     rt.confirm_resize(context, migration)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 373, in confirm_resize\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     self.update_available_resource(elevated)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     retval = f(*args, **kwargs)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     self._update_usage_from_migrations(resources, migrations)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     migration)\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 426, in _update_usage_from_migration\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     itype = instance_types.extract_instance_type(instance, 'old_')\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 250, in extract_instance_type\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp     instance_type[key] = type_fn(sys_meta[type_key])\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp KeyError: 'old_instance_type_memory_mb'\n2013-03-22 14:13:46.411 11393 TRACE nova.openstack.common.rpc.amqp\n\nThe Grizzly version:\n\n35e2906530e8ded6643479f53df505e09d23f31b  ", 
            "date_created": "2013-03-26 18:04:15.294198+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "Thanks!\n\nThat git hash is not in my tree:\n\ndan@guaranine:/opt/stack/nova$ git show 35e2906530e8ded6643479f53df505e09d23f31b  \nfatal: bad object 35e2906530e8ded6643479f53df505e09d23f31b\n\nPerhaps you're on a modified copy? Can you figure out what hash in in the upstream tree you're branched from?", 
            "date_created": "2013-03-26 18:35:33.919040+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "I'm unable to reproduce this on current master with devstack and a bunch of poking. Are you able to reproduce it that way?", 
            "date_created": "2013-03-26 19:05:42.810478+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "commit b0998792222bd3aede65feeb32d1c2d6e6f8080b ", 
            "date_created": "2013-03-26 19:16:40.263398+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "Okay, I think I've repro'd it.", 
            "date_created": "2013-03-26 19:20:33.073000+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/25433", 
            "date_created": "2013-03-26 20:18:44.036501+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/25433\nCommitted: http://github.com/openstack/nova/commit/985d703d2731fe9ec968ef6698bbf39743ede32a\nSubmitter: Jenkins\nBranch:    master\n\ncommit 985d703d2731fe9ec968ef6698bbf39743ede32a\nAuthor: Dan Smith <email address hidden>\nDate:   Tue Mar 26 13:14:56 2013 -0700\n\n    Always store old instance_type during a migration\n    \n    Previously, we were trying to optimize for the migration (as opposed\n    to resize) case by not storing the old_ instance_type. However,\n    this is confusing to the vast amount of shared code that works on\n    migrations and resizes because the \"is old == new\" logic must be\n    replicated everywhere. To cut our losses and hopefully avoid other\n    hidden dragons, this patch removes the optimization and makes both\n    paths the same.\n    \n    Fixes bug #1160489\n    \n    Change-Id: I2ad7b02239baada5fd2174f5b61cdc90ec91e6f5\n", 
            "date_created": "2013-03-27 10:51:43.835304+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: milestone-proposed\nReview: https://review.openstack.org/25521", 
            "date_created": "2013-03-27 13:59:25.913691+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/25521\nCommitted: http://github.com/openstack/nova/commit/1fa7879071310fda7d8393716441dd02be38fc30\nSubmitter: Jenkins\nBranch:    milestone-proposed\n\ncommit 1fa7879071310fda7d8393716441dd02be38fc30\nAuthor: Dan Smith <email address hidden>\nDate:   Tue Mar 26 13:14:56 2013 -0700\n\n    Always store old instance_type during a migration\n    \n    Previously, we were trying to optimize for the migration (as opposed\n    to resize) case by not storing the old_ instance_type. However,\n    this is confusing to the vast amount of shared code that works on\n    migrations and resizes because the \"is old == new\" logic must be\n    replicated everywhere. To cut our losses and hopefully avoid other\n    hidden dragons, this patch removes the optimization and makes both\n    paths the same.\n    \n    Fixes bug #1160489\n    \n    Change-Id: I2ad7b02239baada5fd2174f5b61cdc90ec91e6f5\n    (cherry picked from commit 985d703d2731fe9ec968ef6698bbf39743ede32a)\n", 
            "date_created": "2013-03-27 17:28:47.956609+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}