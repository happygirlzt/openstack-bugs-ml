{
    "status": "Invalid", 
    "last_updated": "2013-05-26 09:52:50.547539+00:00", 
    "description": "In Grizzly multi-node configuration (packstack with edited answer file) if I add a flavor using the id of a deleted flavor I get the following error:\n\nERROR: Instance Type with ID 100 already exists. (HTTP 409) (Request-ID: req-df369a45-8a61-426b-a07c-bf8a2a689fe5)\n\nWhile in Grizzly installed with packstack --allinone, if I delete a flavor and then I add a new one with the same id, it works and in the database I have these two entries with the same flavorid:\n\n| 2013-04-25 07:51:11 | NULL       | 2013-04-25 07:52:11 | test        | 19 |         1 |     1 |    0 |        NULL | 100      |           1 |       1 |            0 |        0 |         1 |      19 |\n| 2013-04-25 07:52:33 | NULL       | NULL                              | test        | 20 |         1 |     1 |    0 |        NULL | 100      |           1 |       1 |            0 |        0 |         1 |       0 |\n\nTo reproduce just use install with packstack --allinone and run the following commands:\n> nova flavor-create test 100 1 1 1\n> nova flavor-delete test\n> nova flavor-create test 100 1 1 1\n\nI think we should have a consistent behavior with the output of an error in both the cases.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1172612", 
    "owner": "None", 
    "id": 1172612, 
    "index": 3601, 
    "created": "2013-04-25 08:22:53.751957+00:00", 
    "title": "nova flavor-create with deleted flavor id works in allinone config", 
    "comments": [
        {
            "content": "In Grizzly multi-node configuration (packstack with edited answer file) if I add a flavor using the id of a deleted flavor I get the following error:\n\nERROR: Instance Type with ID 100 already exists. (HTTP 409) (Request-ID: req-df369a45-8a61-426b-a07c-bf8a2a689fe5)\n\nWhile in Grizzly installed with packstack --allinone, if I delete a flavor and then I add a new one with the same id, it works and in the database I have these two entries with the same flavorid:\n\n| 2013-04-25 07:51:11 | NULL       | 2013-04-25 07:52:11 | test        | 19 |         1 |     1 |    0 |        NULL | 100      |           1 |       1 |            0 |        0 |         1 |      19 |\n| 2013-04-25 07:52:33 | NULL       | NULL                              | test        | 20 |         1 |     1 |    0 |        NULL | 100      |           1 |       1 |            0 |        0 |         1 |       0 |\n\nTo reproduce just use install with packstack --allinone and run the following commands:\n> nova flavor-create test 100 1 1 1\n> nova flavor-delete test\n> nova flavor-create test 100 1 1 1\n\nI think we should have a consistent behavior with the output of an error in both the cases.", 
            "date_created": "2013-04-25 08:22:53.751957+00:00", 
            "author": "https://api.launchpad.net/1.0/~szilli"
        }, 
        {
            "content": "What you see with the all-in-one setup is what is expected.\n\nCan you provide more information about what happens in the first case?  What flavors exist when your request is denied?  Can you show a list of flavors before you try to create one?", 
            "date_created": "2013-05-08 14:55:46.844697+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "I rerun the test with the same configuration after a fresh install of the latest packstack and now everything seems to work properly. \n\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-list\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         | True      | {}          |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         | True      | {}          |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         | True      | {}          |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         | True      | {}          |\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-create test 100 1 1 1\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID  | Name | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 100 | test | 1         | 1    | 0         |      | 1     | 1.0         | True      | {}          |\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-delete test\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-list\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 1  | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         | True      | {}          |\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 3  | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         | True      | {}          |\n| 4  | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         | True      | {}          |\n| 5  | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         | True      | {}          |\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-create test 100 1 1 1\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID  | Name | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 100 | test | 1         | 1    | 0         |      | 1     | 1.0         | True      | {}          |\n+-----+------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n[root@osgtest-1 ~(keystone_admin)]# nova flavor-list\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| ID  | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n| 1   | m1.tiny   | 512       | 0    | 0         |      | 1     | 1.0         | True      | {}          |\n| 100 | test      | 1         | 1    | 0         |      | 1     | 1.0         | True      | {}          |\n| 2   | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         | True      | {}          |\n| 3   | m1.medium | 4096      | 40   | 0         |      | 2     | 1.0         | True      | {}          |\n| 4   | m1.large  | 8192      | 80   | 0         |      | 4     | 1.0         | True      | {}          |\n| 5   | m1.xlarge | 16384     | 160  | 0         |      | 8     | 1.0         | True      | {}          |\n+-----+-----------+-----------+------+-----------+------+-------+-------------+-----------+-------------+\n\nI think this could be closed as invalid.\n\nCheers,\nStefano.", 
            "date_created": "2013-05-15 10:21:15.430564+00:00", 
            "author": "https://api.launchpad.net/1.0/~szilli"
        }
    ]
}