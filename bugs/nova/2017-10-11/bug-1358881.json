{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:47:04.072989+00:00", 
    "description": "the following two failures appeared after upgrading jsonschema to 2.4.0.  downgrading to 2.3.0 returned the tests to passing.\n\n======================================================================\nFAIL: nova.tests.test_api_validation.TcpUdpPortTestCase.test_validate_tcp_udp_port_fails\n----------------------------------------------------------------------\nTraceback (most recent call last):\n_StringException: Empty attachments:\n  pythonlogging:''\n  stderr\n  stdout\n\nTraceback (most recent call last):\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 602, in test_validate_tcp_udp_port_fails\n    expected_detail=detail)\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 31, in check_validation_error\n    self.assertEqual(ex.kwargs, expected_kwargs)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 321, in assertEqual\n    self.assertThat(observed, matcher, message)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 406, in assertThat\n    raise mismatch_error\nMismatchError: !=:\nreference = {'code': 400,\n 'detail': u'Invalid input for field/attribute foo. Value: 65536. 65536 is greater than the maximum of 65535'}\nactual    = {'code': 400,\n 'detail': 'Invalid input for field/attribute foo. Value: 65536. 65536.0 is greater than the maximum of 65535'}\n\n\n======================================================================\nFAIL: nova.tests.test_api_validation.IntegerRangeTestCase.test_validate_integer_range_fails\n----------------------------------------------------------------------\nTraceback (most recent call last):\n_StringException: Empty attachments:\n  stderr\n  stdout\n\npythonlogging:'': {{{\nINFO [migrate.versioning.api] 215 -> 216... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 216 -> 217... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 217 -> 218... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 218 -> 219... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 219 -> 220... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 220 -> 221... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 221 -> 222... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 222 -> 223... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 223 -> 224... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 224 -> 225... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 225 -> 226... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 226 -> 227... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 227 -> 228... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 228 -> 229... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 229 -> 230... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 230 -> 231... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 231 -> 232... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 232 -> 233... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 233 -> 234... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 234 -> 235... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 235 -> 236... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 236 -> 237... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 237 -> 238... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 238 -> 239... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 239 -> 240... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 240 -> 241... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 241 -> 242... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 242 -> 243... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 243 -> 244... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 244 -> 245... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 245 -> 246... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 246 -> 247... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 247 -> 248... \nINFO [248_add_expire_reservations_index] Skipped adding reservations_deleted_expire_idx because an equivalent index already exists.\nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 248 -> 249... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 249 -> 250... \nINFO [migrate.versioning.api] done\n}}}\n\nTraceback (most recent call last):\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 361, in test_validate_integer_range_fails\n    expected_detail=detail)\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 31, in check_validation_error\n    self.assertEqual(ex.kwargs, expected_kwargs)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 321, in assertEqual\n    self.assertThat(observed, matcher, message)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 406, in assertThat\n    raise mismatch_error\nMismatchError: !=:\nreference = {'code': 400,\n 'detail': u'Invalid input for field/attribute foo. Value: 0. 0 is less than the minimum of 1'}\nactual    = {'code': 400,\n 'detail': 'Invalid input for field/attribute foo. Value: 0. 0.0 is less than the minimum of 1'}", 
    "tags": [
        "api", 
        "in-stable-icehouse", 
        "testing"
    ], 
    "importance": "High", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1358881", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1358881, 
    "index": 1574, 
    "created": "2014-08-19 18:41:20.837750+00:00", 
    "title": "jjsonschema 2.3.0 -> 2.4.0 upgrade breaking nova.tests.test_api_validation tests", 
    "comments": [
        {
            "content": "the following two failures appeared after upgrading jsonschema to 2.4.0.  downgrading to 2.3.0 returned the tests to passing.\n\n======================================================================\nFAIL: nova.tests.test_api_validation.TcpUdpPortTestCase.test_validate_tcp_udp_port_fails\n----------------------------------------------------------------------\nTraceback (most recent call last):\n_StringException: Empty attachments:\n  pythonlogging:''\n  stderr\n  stdout\n\nTraceback (most recent call last):\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 602, in test_validate_tcp_udp_port_fails\n    expected_detail=detail)\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 31, in check_validation_error\n    self.assertEqual(ex.kwargs, expected_kwargs)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 321, in assertEqual\n    self.assertThat(observed, matcher, message)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 406, in assertThat\n    raise mismatch_error\nMismatchError: !=:\nreference = {'code': 400,\n 'detail': u'Invalid input for field/attribute foo. Value: 65536. 65536 is greater than the maximum of 65535'}\nactual    = {'code': 400,\n 'detail': 'Invalid input for field/attribute foo. Value: 65536. 65536.0 is greater than the maximum of 65535'}\n\n\n======================================================================\nFAIL: nova.tests.test_api_validation.IntegerRangeTestCase.test_validate_integer_range_fails\n----------------------------------------------------------------------\nTraceback (most recent call last):\n_StringException: Empty attachments:\n  stderr\n  stdout\n\npythonlogging:'': {{{\nINFO [migrate.versioning.api] 215 -> 216... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 216 -> 217... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 217 -> 218... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 218 -> 219... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 219 -> 220... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 220 -> 221... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 221 -> 222... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 222 -> 223... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 223 -> 224... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 224 -> 225... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 225 -> 226... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 226 -> 227... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 227 -> 228... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 228 -> 229... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 229 -> 230... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 230 -> 231... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 231 -> 232... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 232 -> 233... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 233 -> 234... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 234 -> 235... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 235 -> 236... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 236 -> 237... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 237 -> 238... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 238 -> 239... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 239 -> 240... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 240 -> 241... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 241 -> 242... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 242 -> 243... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 243 -> 244... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 244 -> 245... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 245 -> 246... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 246 -> 247... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 247 -> 248... \nINFO [248_add_expire_reservations_index] Skipped adding reservations_deleted_expire_idx because an equivalent index already exists.\nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 248 -> 249... \nINFO [migrate.versioning.api] done\nINFO [migrate.versioning.api] 249 -> 250... \nINFO [migrate.versioning.api] done\n}}}\n\nTraceback (most recent call last):\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 361, in test_validate_integer_range_fails\n    expected_detail=detail)\n  File \"/home/dev/Desktop/nova-test/nova/tests/test_api_validation.py\", line 31, in check_validation_error\n    self.assertEqual(ex.kwargs, expected_kwargs)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 321, in assertEqual\n    self.assertThat(observed, matcher, message)\n  File \"/home/dev/Desktop/nova-test/.venv/local/lib/python2.7/site-packages/testtools/testcase.py\", line 406, in assertThat\n    raise mismatch_error\nMismatchError: !=:\nreference = {'code': 400,\n 'detail': u'Invalid input for field/attribute foo. Value: 0. 0 is less than the minimum of 1'}\nactual    = {'code': 400,\n 'detail': 'Invalid input for field/attribute foo. Value: 0. 0.0 is less than the minimum of 1'}", 
            "date_created": "2014-08-19 18:41:20.837750+00:00", 
            "author": "https://api.launchpad.net/1.0/~coreywright"
        }, 
        {
            "content": "elastic-recheck query is here: https://review.openstack.org/#/c/115665/", 
            "date_created": "2014-08-20 14:43:30.741433+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/115672", 
            "date_created": "2014-08-20 14:57:30.358134+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/115672\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=630a7f369a76eaf7f942d8989a30f5dc7b09327e\nSubmitter: Jenkins\nBranch:    master\n\ncommit 630a7f369a76eaf7f942d8989a30f5dc7b09327e\nAuthor: Dan Smith <email address hidden>\nDate:   Wed Aug 20 07:56:54 2014 -0700\n\n    Fix expected error details from jsonschema\n    \n    The jsonschema 2.4.0 release slightly changed some of the error messages\n    that are provided when validation fails. This updates the unit tests to\n    expect the proper string and avoid failing as a result.\n    \n    Change-Id: Ic8e32140e49e394659e7ebbecb28afb704b23b7c\n    Closes-bug: #1358881\n", 
            "date_created": "2014-08-20 17:29:13.049938+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/115815", 
            "date_created": "2014-08-20 23:13:38.021640+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/115815\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=1106ef27e2d557c5693ef288c97b93fc27e80798\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit 1106ef27e2d557c5693ef288c97b93fc27e80798\nAuthor: Dan Smith <email address hidden>\nDate:   Wed Aug 20 07:56:54 2014 -0700\n\n    Fix expected error details from jsonschema\n    \n    The jsonschema 2.4.0 release slightly changed some of the error messages\n    that are provided when validation fails. This updates the unit tests to\n    expect the proper string and avoid failing as a result.\n    \n    Change-Id: Ic8e32140e49e394659e7ebbecb28afb704b23b7c\n    Closes-bug: #1358881\n", 
            "date_created": "2014-08-23 14:27:31.157256+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}