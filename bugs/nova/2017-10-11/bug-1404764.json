{
    "status": "Invalid", 
    "last_updated": "2014-12-23 00:49:05.756497+00:00", 
    "description": "A share storage live-migration failed at function of \" _post_live_migration() \" because  umount command failed, but the status of this instance is still migrating.\n\nLog is as follows:\n\n2014-12-19 16:45:32.741 6127 INFO nova.compute.manager [-] [instance: e9fab51d-8e13-416b-b2c9-211e04ba35b2] _post_live_migration() is started..\n2014-12-19 16:45:32.779 6127 INFO urllib3.connectionpool [-] Starting new HTTP connection (1): 10.47.158.165\n2014-12-19 16:45:32.845 6127 INFO nova.compute.manager [-] [instance: e9fab51d-8e13-416b-b2c9-211e04ba35b2] During sync_power_state the instance has a pending task. Skip.\n2014-12-19 16:45:33.041 6127 ERROR nova.openstack.common.loopingcall [-] in fixed duration looping call\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Traceback (most recent call last):\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/loopingcall.py\", line 78, in _inner\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     self.f(*self.args, **self.kw)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4987, in wait_for_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     migrate_data)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     payload)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     six.reraise(self.type_, self.value, self.tb)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return f(self, context, *args, **kw)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 369, in decorated_function\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     e, sys.exc_info())\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     six.reraise(self.type_, self.value, self.tb)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 356, in decorated_function\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return function(self, context, *args, **kwargs)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 4826, in _post_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     migrate_data)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5185, in post_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     self._umount_instance_sysdisk(instance)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2214, in _umount_instance_sysdisk\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     utils.execute('umount', mount_path, run_as_root=True)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/utils.py\", line 165, in execute\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return processutils.execute(*cmd, **kwargs)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/processutils.py\", line 195, in execute\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     cmd=sanitized_cmd)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall ProcessExecutionError: Unexpected error while running command.\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Command: sudo nova-rootwrap /etc/nova/rootwrap.conf umount /var/lib/nova/instances/e9fab51d-8e13-416b-b2c9-211e04ba35b2/sysdisk\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Exit code: 32\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Stdout: u''\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Stderr: u'umount: /var/lib/nova/instances/e9fab51d-8e13-416b-b2c9-211e04ba35b2/sysdisk: target is busy.\\n        (In some cases useful info about processes that use\\n         the device is found by lsof(8) or fuser(1))\\n'\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1404764", 
    "owner": "None", 
    "id": 1404764, 
    "index": 5338, 
    "created": "2014-12-22 01:03:57.085932+00:00", 
    "title": "share storage live migration  fails at _post_live_migration() function, but the status of this instance is still 'migrating'.", 
    "comments": [
        {
            "content": "A share storage live-migration failed at function of \" _post_live_migration() \" because  umount command failed, but the status of this instance is still migrating.\n\nLog is as follows:\n\n2014-12-19 16:45:32.741 6127 INFO nova.compute.manager [-] [instance: e9fab51d-8e13-416b-b2c9-211e04ba35b2] _post_live_migration() is started..\n2014-12-19 16:45:32.779 6127 INFO urllib3.connectionpool [-] Starting new HTTP connection (1): 10.47.158.165\n2014-12-19 16:45:32.845 6127 INFO nova.compute.manager [-] [instance: e9fab51d-8e13-416b-b2c9-211e04ba35b2] During sync_power_state the instance has a pending task. Skip.\n2014-12-19 16:45:33.041 6127 ERROR nova.openstack.common.loopingcall [-] in fixed duration looping call\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Traceback (most recent call last):\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/loopingcall.py\", line 78, in _inner\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     self.f(*self.args, **self.kw)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4987, in wait_for_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     migrate_data)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 88, in wrapped\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     payload)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     six.reraise(self.type_, self.value, self.tb)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/exception.py\", line 71, in wrapped\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return f(self, context, *args, **kw)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 369, in decorated_function\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     e, sys.exc_info())\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/excutils.py\", line 68, in __exit__\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     six.reraise(self.type_, self.value, self.tb)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 356, in decorated_function\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return function(self, context, *args, **kwargs)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 4826, in _post_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     migrate_data)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 5185, in post_live_migration\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     self._umount_instance_sysdisk(instance)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2214, in _umount_instance_sysdisk\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     utils.execute('umount', mount_path, run_as_root=True)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/utils.py\", line 165, in execute\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     return processutils.execute(*cmd, **kwargs)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall   File \"/usr/lib/python2.7/site-packages/nova/openstack/common/processutils.py\", line 195, in execute\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall     cmd=sanitized_cmd)\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall ProcessExecutionError: Unexpected error while running command.\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Command: sudo nova-rootwrap /etc/nova/rootwrap.conf umount /var/lib/nova/instances/e9fab51d-8e13-416b-b2c9-211e04ba35b2/sysdisk\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Exit code: 32\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Stdout: u''\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall Stderr: u'umount: /var/lib/nova/instances/e9fab51d-8e13-416b-b2c9-211e04ba35b2/sysdisk: target is busy.\\n        (In some cases useful info about processes that use\\n         the device is found by lsof(8) or fuser(1))\\n'\n2014-12-19 16:45:33.041 6127 TRACE nova.openstack.common.loopingcall", 
            "date_created": "2014-12-22 01:03:57.085932+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }, 
        {
            "content": "can you tell which version is nova you are using?\n\nI can not find _umount_instance_sysdisk even in the upstream nova code repository.", 
            "date_created": "2014-12-22 04:38:41.139683+00:00", 
            "author": "https://api.launchpad.net/1.0/~taget-9"
        }, 
        {
            "content": "It's invalid.", 
            "date_created": "2014-12-23 00:49:05.019249+00:00", 
            "author": "https://api.launchpad.net/1.0/~hanrong"
        }
    ]
}