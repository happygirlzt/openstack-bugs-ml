{
    "status": "Fix Released", 
    "last_updated": "2012-09-27 15:36:11.485098+00:00", 
    "description": "Most of the code base is using lxml.etree but there are a few places using xml.etree.ElementTree.  We should be using a single library for xml processing:\n\nvishvananda@firefly-2:~/cache/stack/nova (master)$ ack ElementTree\nnova/image/s3.py\n27:from xml.etree import ElementTree\n191:        manifest = ElementTree.fromstring(manifest)\n\nnova/tests/api/ec2/test_middleware.py\n30:from xml.etree import ElementTree\n111:        tree = ElementTree.fromstring(result.body)\n\nnova/tests/fakelibvirt.py\n17:from xml.etree import ElementTree\n19:    ParseError = ElementTree.ParseError\n144:        tree = ElementTree.fromstring(xml)\n166:            tree = ElementTree.fromstring(xml)\n304:        disk_info = _parse_disk_info(ElementTree.fromstring(xml))\n310:        disk_info = _parse_disk_info(ElementTree.fromstring(xml))\n407:        tree = ElementTree.fromstring(xml)\n744:        tree = ElementTree.fromstring(xml)\n\nnova/tests/test_fakelibvirt.py\n19:from xml.etree import ElementTree\n255:        ElementTree.fromstring(xml)\n263:        tree = ElementTree.fromstring(xml)\n285:        tree = ElementTree.fromstring(xml)\n301:        ElementTree.fromstring(conn.getCapabilities())\n\nnova/tests/test_libvirt.py\n26:from xml.etree import ElementTree\n154:        tree = ElementTree.fromstring(xml)\n193:        tree = ElementTree.fromstring(xml)\n216:        tree = ElementTree.fromstring(xml)\n231:        tree = ElementTree.fromstring(xml)\n253:        tree = ElementTree.fromstring(xml)\n725:        tree = ElementTree.fromstring(xml)\n747:        tree = ElementTree.fromstring(xml)\n788:            tree = ElementTree.fromstring(xml)\n804:        tree = ElementTree.fromstring(xml)\n817:        tree = ElementTree.fromstring(xml)\n830:        tree = ElementTree.fromstring(xml)\n929:            tree = ElementTree.fromstring(xml)\n1387:        tree = ElementTree.fromstring(xml)\n\nnova/tests/test_libvirt_vif.py\n17:from xml.etree import ElementTree\n103:        doc = ElementTree.fromstring(xml)\n119:        doc = ElementTree.fromstring(xml)\n137:        doc = ElementTree.fromstring(xml)\n163:        doc = ElementTree.fromstring(xml)\n\nnova/tests/test_vsa.py\n18:from xml.etree import ElementTree\n163:        elem = ElementTree.fromstring(user_data)\n\nnova/virt/libvirt/connection.py\n53:from xml.etree import ElementTree\n492:            doc = ElementTree.fromstring(xml)\n500:                        return ElementTree.tostring(node)\n550:        doc = ElementTree.fromstring(xml)\n630:        domain = ElementTree.fromstring(xml_desc)\n908:        tree = ElementTree.fromstring(xml)\n1463:                doc = ElementTree.fromstring(domain.XMLDesc(0))\n1486:            doc = ElementTree.fromstring(xml)\n1519:            doc = ElementTree.fromstring(xml)\n1677:        xml = ElementTree.fromstring(xml)\n2073:        doc = ElementTree.fromstring(xml)\n\nnova/volume/driver.py\n25:from xml.etree import ElementTree\n955:        result_xml = ElementTree.fromstring(out)\n981:        result_xml = ElementTree.fromstring(out)\n\nnova/volume/san.py\n33:from xml.etree import ElementTree\n454:        result_xml = ElementTree.fromstring(out)\n495:        _xml = ElementTree.tostring(cluster_xml)\n\nnova/vsa/utils.py\n19:from xml.etree import ElementTree\n27:    SubElement = ElementTree.SubElement\n29:    e_vsa = ElementTree.Element(\"vsa\")\n79:    _xml = ElementTree.tostring(e_vsa)", 
    "tags": [
        "low-hanging-fruit"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/953449", 
    "owner": "https://api.launchpad.net/1.0/~zulcss", 
    "id": 953449, 
    "index": 5366, 
    "created": "2012-03-12 21:41:47.654366+00:00", 
    "title": "Inconsistent use of xml libraries", 
    "comments": [
        {
            "content": "Most of the code base is using lxml.etree but there are a few places using xml.etree.ElementTree.  We should be using a single library for xml processing:\n\nvishvananda@firefly-2:~/cache/stack/nova (master)$ ack ElementTree\nnova/image/s3.py\n27:from xml.etree import ElementTree\n191:        manifest = ElementTree.fromstring(manifest)\n\nnova/tests/api/ec2/test_middleware.py\n30:from xml.etree import ElementTree\n111:        tree = ElementTree.fromstring(result.body)\n\nnova/tests/fakelibvirt.py\n17:from xml.etree import ElementTree\n19:    ParseError = ElementTree.ParseError\n144:        tree = ElementTree.fromstring(xml)\n166:            tree = ElementTree.fromstring(xml)\n304:        disk_info = _parse_disk_info(ElementTree.fromstring(xml))\n310:        disk_info = _parse_disk_info(ElementTree.fromstring(xml))\n407:        tree = ElementTree.fromstring(xml)\n744:        tree = ElementTree.fromstring(xml)\n\nnova/tests/test_fakelibvirt.py\n19:from xml.etree import ElementTree\n255:        ElementTree.fromstring(xml)\n263:        tree = ElementTree.fromstring(xml)\n285:        tree = ElementTree.fromstring(xml)\n301:        ElementTree.fromstring(conn.getCapabilities())\n\nnova/tests/test_libvirt.py\n26:from xml.etree import ElementTree\n154:        tree = ElementTree.fromstring(xml)\n193:        tree = ElementTree.fromstring(xml)\n216:        tree = ElementTree.fromstring(xml)\n231:        tree = ElementTree.fromstring(xml)\n253:        tree = ElementTree.fromstring(xml)\n725:        tree = ElementTree.fromstring(xml)\n747:        tree = ElementTree.fromstring(xml)\n788:            tree = ElementTree.fromstring(xml)\n804:        tree = ElementTree.fromstring(xml)\n817:        tree = ElementTree.fromstring(xml)\n830:        tree = ElementTree.fromstring(xml)\n929:            tree = ElementTree.fromstring(xml)\n1387:        tree = ElementTree.fromstring(xml)\n\nnova/tests/test_libvirt_vif.py\n17:from xml.etree import ElementTree\n103:        doc = ElementTree.fromstring(xml)\n119:        doc = ElementTree.fromstring(xml)\n137:        doc = ElementTree.fromstring(xml)\n163:        doc = ElementTree.fromstring(xml)\n\nnova/tests/test_vsa.py\n18:from xml.etree import ElementTree\n163:        elem = ElementTree.fromstring(user_data)\n\nnova/virt/libvirt/connection.py\n53:from xml.etree import ElementTree\n492:            doc = ElementTree.fromstring(xml)\n500:                        return ElementTree.tostring(node)\n550:        doc = ElementTree.fromstring(xml)\n630:        domain = ElementTree.fromstring(xml_desc)\n908:        tree = ElementTree.fromstring(xml)\n1463:                doc = ElementTree.fromstring(domain.XMLDesc(0))\n1486:            doc = ElementTree.fromstring(xml)\n1519:            doc = ElementTree.fromstring(xml)\n1677:        xml = ElementTree.fromstring(xml)\n2073:        doc = ElementTree.fromstring(xml)\n\nnova/volume/driver.py\n25:from xml.etree import ElementTree\n955:        result_xml = ElementTree.fromstring(out)\n981:        result_xml = ElementTree.fromstring(out)\n\nnova/volume/san.py\n33:from xml.etree import ElementTree\n454:        result_xml = ElementTree.fromstring(out)\n495:        _xml = ElementTree.tostring(cluster_xml)\n\nnova/vsa/utils.py\n19:from xml.etree import ElementTree\n27:    SubElement = ElementTree.SubElement\n29:    e_vsa = ElementTree.Element(\"vsa\")\n79:    _xml = ElementTree.tostring(e_vsa)", 
            "date_created": "2012-03-12 21:41:47.654366+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/5422", 
            "date_created": "2012-03-15 22:11:04.531257+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/6931", 
            "date_created": "2012-04-30 17:54:21.134405+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/6931\nCommitted: http://github.com/openstack/nova/commit/7a5c505a3bc22a1542791b6f32ceaf0f0ec17a63\nSubmitter: Jenkins\nBranch:    master\n\ncommit 7a5c505a3bc22a1542791b6f32ceaf0f0ec17a63\nAuthor: Chuck Short <email address hidden>\nDate:   Mon Apr 30 13:52:37 2012 -0400\n\n    Clean up ElementTree usage\n    \n    Use lxml in favor of ElementTree to\n    make things more consistent.\n    \n    Fixes LP: #953449\n    \n    Change-Id: I7f48528d7df47fe7207ca88bce196dea7535df0e\n    Signed-off-by: Chuck Short <email address hidden>\n", 
            "date_created": "2012-04-30 22:05:51.019007+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}