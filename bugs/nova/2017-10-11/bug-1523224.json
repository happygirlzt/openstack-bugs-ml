{
    "status": "Invalid", 
    "last_updated": "2015-12-09 23:16:24.448632+00:00", 
    "description": "damo@controller01:~$ dpkg -l | grep nova\nii  nova-api                            2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - API frontend\nii  nova-cert                           2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - certificate management\nii  nova-common                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - common files\nii  nova-conductor                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - conductor service\nii  nova-consoleauth                    2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                     2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - virtual machine scheduler\nii  python-nova                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute Python libraries\nii  python-novaclient                   2:2.30.1-1~cloud0                     all          client library for OpenStack Compute API\ndamo@controller01:~$\n\nInstalling OpenStack as per the OpenStack Documentation for Ubuntu and page http://docs.openstack.org/liberty/install-guide-ubuntu/nova-verify.html when the last command is executed the following occurs:\n\ndamo@controller01:~$ nova image-list\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-2294aff0-9d05-448c-80ae-daaa9d24785f)", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1523224", 
    "owner": "None", 
    "id": 1523224, 
    "index": 5882, 
    "created": "2015-12-06 12:17:51.043163+00:00", 
    "title": "nova.api unexpected exception glanceclient.exc.HTTPInternalServerError", 
    "comments": [
        {
            "content": "damo@controller01:~$ dpkg -l | grep nova\nii  nova-api                            2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - API frontend\nii  nova-cert                           2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - certificate management\nii  nova-common                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - common files\nii  nova-conductor                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - conductor service\nii  nova-consoleauth                    2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - Console Authenticator\nii  nova-novncproxy                     2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - NoVNC proxy\nii  nova-scheduler                      2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute - virtual machine scheduler\nii  python-nova                         2:12.0.0-0ubuntu2~cloud0              all          OpenStack Compute Python libraries\nii  python-novaclient                   2:2.30.1-1~cloud0                     all          client library for OpenStack Compute API\ndamo@controller01:~$\n\nInstalling OpenStack as per the OpenStack Documentation for Ubuntu and page http://docs.openstack.org/liberty/install-guide-ubuntu/nova-verify.html when the last command is executed the following occurs:\n\ndamo@controller01:~$ nova image-list\nERROR (ClientException): Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'glanceclient.exc.HTTPInternalServerError'> (HTTP 500) (Request-ID: req-2294aff0-9d05-448c-80ae-daaa9d24785f)", 
            "date_created": "2015-12-06 12:17:51.043163+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "", 
            "date_created": "2015-12-06 12:17:51.043163+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "please specify the details about your environment", 
            "date_created": "2015-12-06 13:48:22.642021+00:00", 
            "author": "https://api.launchpad.net/1.0/~xiaoxubeii"
        }, 
        {
            "content": "Everything is built as per the documentation on 14.04.LTS on virtualbox VM\n\nThe controller node uname -a is\ndamo@controller01:~$ uname -a\nLinux controller01 3.19.0-39-generic #44~14.04.1-Ubuntu SMP Wed Dec 2 10:00:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nThe admin-openrc.sh is as follows\ndamo@controller01:~$ cat admin-openrc.sh\nexport OS_PROJECT_DOMAIN_ID=default\nexport OS_USER_DOMAIN_ID=default\nexport OS_PROJECT_NAME=admin\nexport OS_TENANT_NAME=admin\nexport OS_USERNAME=admin\nexport OS_PASSWORD=XXXXXXXX\nexport OS_AUTH_URL=http://controller01:35357/v3\nexport OS_IDENTITY_API_VERSION=3\nexport OS_IMAGE_API_VERSION=2\n\nIt is a test environment so we can provide any information that is required.", 
            "date_created": "2015-12-06 15:41:18.279119+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "Do you see any errors in the glance API log?", 
            "date_created": "2015-12-07 05:40:41.219917+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Yes, I ran the command again this morning, here is the glance-api.log\n\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client [req-e9eaa5e9-cdf6-410c-b083-ee48bd82b381 d7a14efb7f94483b9e0474d7e7d0d326 2c43d3ebdf8b48a1975abe5932ef40f4 - - -] Registry client request GET /images/detail raised NotAuthenticated\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client Traceback (most recent call last):\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client   File \"/usr/lib/python2.7/dist-packages/glance/registry/client/v1/client.py\", line 121, in do_request\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client     **kwargs)\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 74, in wrapped\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client     return func(self, *args, **kwargs)\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 375, in do_request\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client     headers=copy.deepcopy(headers))\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 88, in wrapped\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client     return func(self, method, url, body, headers)\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 517, in _do_request\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client     raise exception.NotAuthenticated(res.read())\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client NotAuthenticated: Authentication required\n2015-12-07 08:27:02.775 2082 ERROR glance.registry.client.v1.client\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi [req-e9eaa5e9-cdf6-410c-b083-ee48bd82b381 d7a14efb7f94483b9e0474d7e7d0d326 2c43d3ebdf8b48a1975abe5932ef40f4 - - -] Caught error: Authentication required\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi Traceback (most recent call last):\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 879, in __call__\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     request, **action_args)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/wsgi.py\", line 907, in dispatch\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     return method(*args, **kwargs)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/api/v1/images.py\", line 366, in detail\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     images = registry.get_images_detail(req.context, **params)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/registry/client/v1/api.py\", line 155, in get_images_detail\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     return c.get_images_detailed(**kwargs)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/registry/client/v1/client.py\", line 150, in get_images_detailed\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     res = self.do_request(\"GET\", \"/images/detail\", params=params)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/registry/client/v1/client.py\", line 136, in do_request\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     'exc_name': exc_name})\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 195, in __exit__\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     six.reraise(self.type_, self.value, self.tb)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/registry/client/v1/client.py\", line 121, in do_request\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     **kwargs)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 74, in wrapped\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     return func(self, *args, **kwargs)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 375, in do_request\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     headers=copy.deepcopy(headers))\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 88, in wrapped\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     return func(self, method, url, body, headers)\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi   File \"/usr/lib/python2.7/dist-packages/glance/common/client.py\", line 517, in _do_request\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi     raise exception.NotAuthenticated(res.read())\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi NotAuthenticated: Authentication required\n2015-12-07 08:27:02.805 2082 ERROR glance.common.wsgi\n2015-12-07 08:27:02.842 2082 INFO eventlet.wsgi.server [req-e9eaa5e9-cdf6-410c-b083-ee48bd82b381 d7a14efb7f94483b9e0474d7e7d0d326 2c43d3ebdf8b48a1975abe5932ef40f4 - - -] 10.40.2.11 - - [07/Dec/2015 08:27:02] \"GET /v1/images/detail?is_public=none&limit=20 HTTP/1.1\" 500 454 0.688875", 
            "date_created": "2015-12-07 07:27:58.177605+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "looks like a config issue. \nPlease make sure the correct passwords exist in db and in config files for glance api.conf and registry.conf. Also do check nova. Can you do nova --debug list and paste the output.", 
            "date_created": "2015-12-08 00:00:52.828367+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }, 
        {
            "content": "It was an error in the glance-registry.conf. There was an issue during first testing and this warning was in the registry.log\n\n2015-12-08 09:18:17.501 3139 WARNING oslo_config.cfg [-] Option \"username\" from group \"keystone_authtoken\" is deprecated. Use option \"user-name\" from group \"keystone_authtoken\".\n\nSo this was changed, however changing this to user-name causes the original error. Putting the key back to username has fixed the problem.\n\ndamo@controller01:/etc/glance$ glance image-list\n+--------------------------------------+--------+\n| ID                                   | Name   |\n+--------------------------------------+--------+\n| e1ca2f31-a2c3-4dd9-b0ff-0eee9c532000 | cirros |\n+--------------------------------------+--------+\n\n", 
            "date_created": "2015-12-08 08:28:26.229180+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "nova image-list is also OK\n\ndamo@controller01:~$ nova image-list\n+--------------------------------------+--------+--------+--------+\n| ID                                   | Name   | Status | Server |\n+--------------------------------------+--------+--------+--------+\n| e1ca2f31-a2c3-4dd9-b0ff-0eee9c532000 | cirros | ACTIVE |        |\n+--------------------------------------+--------+--------+--------+\ndamo@controller01:~$\n", 
            "date_created": "2015-12-08 09:19:07.605199+00:00", 
            "author": "https://api.launchpad.net/1.0/~damian-mordrid"
        }, 
        {
            "content": "Cool.", 
            "date_created": "2015-12-09 23:16:23.988536+00:00", 
            "author": "https://api.launchpad.net/1.0/~aginwala-f"
        }
    ]
}