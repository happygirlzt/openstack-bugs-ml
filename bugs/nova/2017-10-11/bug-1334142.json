{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:37:47.763584+00:00", 
    "description": "http://logs.openstack.org/72/61972/27/gate/gate-tempest-dsvm-full/ed1ab55/logs/testr_results.html.gz\n\npythonlogging:'': {{{\n2014-06-25 06:45:11,596 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 202 POST http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers 0.295s\n2014-06-25 06:45:11,674 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.077s\n2014-06-25 06:45:12,977 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.300s\n2014-06-25 06:45:12,978 25675 INFO     [tempest.common.waiters] State transition \"BUILD/scheduling\" ==> \"BUILD/spawning\" after 1 second wait\n2014-06-25 06:45:14,150 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.171s\n2014-06-25 06:45:14,153 25675 INFO     [tempest.common.waiters] State transition \"BUILD/spawning\" ==> \"ERROR/None\" after 3 second wait\n2014-06-25 06:45:14,221 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 400 POST http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f/action 0.066s\n2014-06-25 06:45:14,404 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 204 DELETE http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.182s\n}}}\n\nTraceback (most recent call last):\n  File \"tempest/api/compute/servers/test_delete_server.py\", line 97, in test_delete_server_while_in_verify_resize_state\n    resp, server = self.create_test_server(wait_until='ACTIVE')\n  File \"tempest/api/compute/base.py\", line 247, in create_test_server\n    raise ex\nBadRequest: Bad request\nDetails: {'message': 'The server could not comply with the request since it is either malformed or otherwise incorrect.', 'code': '400'}", 
    "tags": [
        "in-stable-icehouse"
    ], 
    "importance": "High", 
    "heat": 30, 
    "link": "https://bugs.launchpad.net/nova/+bug/1334142", 
    "owner": "https://api.launchpad.net/1.0/~oomichi", 
    "id": 1334142, 
    "index": 1520, 
    "created": "2014-06-25 07:57:40.976168+00:00", 
    "title": "A server creation fails due to adding interface failure", 
    "comments": [
        {
            "content": "http://logs.openstack.org/72/61972/27/gate/gate-tempest-dsvm-full/ed1ab55/logs/testr_results.html.gz\n\npythonlogging:'': {{{\n2014-06-25 06:45:11,596 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 202 POST http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers 0.295s\n2014-06-25 06:45:11,674 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.077s\n2014-06-25 06:45:12,977 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.300s\n2014-06-25 06:45:12,978 25675 INFO     [tempest.common.waiters] State transition \"BUILD/scheduling\" ==> \"BUILD/spawning\" after 1 second wait\n2014-06-25 06:45:14,150 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 200 GET http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.171s\n2014-06-25 06:45:14,153 25675 INFO     [tempest.common.waiters] State transition \"BUILD/spawning\" ==> \"ERROR/None\" after 3 second wait\n2014-06-25 06:45:14,221 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 400 POST http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f/action 0.066s\n2014-06-25 06:45:14,404 25675 INFO     [tempest.common.rest_client] Request (DeleteServersTestXML:test_delete_server_while_in_verify_resize_state): 204 DELETE http://127.0.0.1:8774/v2/aedc849c2c1742b8b1077c85d609b127/servers/f9fb672b-f2e6-4303-b7d1-2c5aa324170f 0.182s\n}}}\n\nTraceback (most recent call last):\n  File \"tempest/api/compute/servers/test_delete_server.py\", line 97, in test_delete_server_while_in_verify_resize_state\n    resp, server = self.create_test_server(wait_until='ACTIVE')\n  File \"tempest/api/compute/base.py\", line 247, in create_test_server\n    raise ex\nBadRequest: Bad request\nDetails: {'message': 'The server could not comply with the request since it is either malformed or otherwise incorrect.', 'code': '400'}", 
            "date_created": "2014-06-25 07:57:40.976168+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "nova-network failed with the following log:\n\n2014-06-25 06:45:13.093 ERROR oslo.messaging.rpc.dispatcher [req-96792db6-1f4b-4582-a5a0-4b921af6f02d DeleteServersTestXML-119298985 DeleteServersTestXML-772603528] Exception during message handling: Failed\nto add interface: Dump was interrupted and may be inconsistent.\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 134, in _dispatch_and_reply\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 177, in _dispatch\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 123, in _do_dispatch\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/floating_ips.py\", line 118, in allocate_for_instance\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     **kwargs)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/manager.py\", line 525, in allocate_for_instance\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     requested_networks=requested_networks)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/manager.py\", line 213, in _allocate_fixed_ips\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     vpn=vpn, address=address)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/manager.py\", line 945, in allocate_fixed_ip\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     exc_info=True)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/manager.py\", line 927, in allocate_fixed_ip\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     self._setup_network_on_host(context, network)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/manager.py\", line 1746, in _setup_network_on_host\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     self.l3driver.initialize_gateway(network)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/l3.py\", line 104, in initialize_gateway\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     gateway=(network_ref['gateway'] is not None))\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/linux_net.py\", line 1380, in plug\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     return _get_interface_driver().plug(network, mac_address, gateway)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/linux_net.py\", line 1428, in plug\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     network, gateway)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/openstack/common/lockutils.py\", line 249, in inner\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher   File \"/opt/stack/new/nova/nova/network/linux_net.py\", line 1571, in ensure_bridge\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher     raise exception.NovaException(msg)\n2014-06-25 06:45:13.093 22817 TRACE oslo.messaging.rpc.dispatcher NovaException: Failed to add interface: Dump was interrupted and may be inconsistent.", 
            "date_created": "2014-06-25 09:45:26.429717+00:00", 
            "author": "https://api.launchpad.net/1.0/~oomichi"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/102477", 
            "date_created": "2014-06-25 09:48:49.445243+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/102477\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=c250696ba12ead71e741cf8f608ce5212b0cc7bb\nSubmitter: Jenkins\nBranch:    master\n\ncommit c250696ba12ead71e741cf8f608ce5212b0cc7bb\nAuthor: Ken'ichi Ohmichi <email address hidden>\nDate:   Wed Jun 25 18:15:39 2014 +0900\n\n    Move the error check for \"brctl addif\"\n    \n    The git commit 873aad92944f8840e772d65eda4b3320d65a9ce7[1] has moved\n    \"brctl addif\" command, but the commit did not move its error check.\n    \n    Now the error check sees the result of \"ip addr show dev <interface>\n    scope global\" command wrongly, and the command outputs \"Dump was\n    interrupted and may be inconsistent\" sometimes because of a kernel change.\n    As the result, gate failures happen sometimes.\n    \n    This patch moves the error check to right place.\n    \n    [1]: https://github.com/openstack/nova/commit/873aad92944f8840e772d65eda4b3320d\n    \n    Change-Id: I92ee96e3aa34f7cd154a8ce4b33852b96cabe8c9\n    Closes-Bug: #1334142\n", 
            "date_created": "2014-06-25 15:58:43.779464+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This error is still happening (now with a proper error message): https://bugs.launchpad.net/nova/+bug/1368344", 
            "date_created": "2014-09-11 16:56:35.230137+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "So the error above is because this has not been backported yet.", 
            "date_created": "2014-09-11 17:15:39.282360+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Fix proposed to branch: stable/icehouse\nReview: https://review.openstack.org/120843", 
            "date_created": "2014-09-11 17:16:34.113426+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/120843\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=311ab5777d02bd8a2277afd26cfbeae005b225cb\nSubmitter: Jenkins\nBranch:    stable/icehouse\n\ncommit 311ab5777d02bd8a2277afd26cfbeae005b225cb\nAuthor: Ken'ichi Ohmichi <email address hidden>\nDate:   Wed Jun 25 18:15:39 2014 +0900\n\n    Move the error check for \"brctl addif\"\n    \n    The git commit 873aad92944f8840e772d65eda4b3320d65a9ce7[1] has moved\n    \"brctl addif\" command, but the commit did not move its error check.\n    \n    Now the error check sees the result of \"ip addr show dev <interface>\n    scope global\" command wrongly, and the command outputs \"Dump was\n    interrupted and may be inconsistent\" sometimes because of a kernel change.\n    As the result, gate failures happen sometimes.\n    \n    This patch moves the error check to right place.\n    \n    [1]: https://github.com/openstack/nova/commit/873aad92944f8840e772d65eda4b3320d\n    \n    Change-Id: I92ee96e3aa34f7cd154a8ce4b33852b96cabe8c9\n    Closes-Bug: #1334142\n    (cherry picked from commit c250696ba12ead71e741cf8f608ce5212b0cc7bb)\n", 
            "date_created": "2014-09-13 18:18:17.145024+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}