{
    "status": "Invalid", 
    "last_updated": "2013-06-05 21:05:11.365781+00:00", 
    "description": "current implementation of nova/compute/utils.py will not update the exception message thrown from exception class.\n\nHere are steps taken to produce the defect:\n\n1. Created a fake glance image:\nglance image-create --name=Fake_Image --is-public=true --container-format=ovf --min-ram=4000 --disk-format=raw < /mnt/download/test2.raw\n(test2.raw is only a txt file, not an image file).\n2. The image Fake_Image shown:\nubuntu@osee0221:/mnt/download$ nova image-list\n+--------------------------------------+---------------------------------+--------+--------+\n| ID                                   | Name                            | Status | Server |\n+--------------------------------------+---------------------------------+--------+--------+\n| f474b249-e7fb-45de-adad-c5338fa53c53 | cirros-0.3.1-x86_64-uec         | ACTIVE |        |\n| 4664b408-ad40-4fba-9d71-20c217189090 | cirros-0.3.1-x86_64-uec-kernel  | ACTIVE |        |\n| bec25ebd-6543-4599-a8bf-c97b7ad3a649 | cirros-0.3.1-x86_64-uec-ramdisk | ACTIVE |        |\n| 97bcfabc-5fab-4dd0-9d55-233613c0fdea | Fake_Image\t                 | ACTIVE |        |\n+--------------------------------------+---------------------------------+--------+--------+\nubuntu@osee0221:/mnt/download$\n\n3. Now boot that Fake_Image:\nubuntu@osee0221:/mnt/download$ nova boot --flavor 3 --image Fake_Image 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-EXT-STS:task_state               | scheduling                           |\n| image                               | Fake_Image                  |\n| OS-EXT-STS:vm_state                 | building                             |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                    |\n| flavor                              | m1.medium                            |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68 |\n| security_groups                     | [{u'name': u'default'}]              |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255     |\n| OS-DCF:diskConfig                   | MANUAL                               |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| progress                            | 0                                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-AZ:availability_zone         | nova                                 |\n| config_drive                        |                                      |\n| status                              | BUILD                                |\n| updated                             | 2013-05-15T22:38:28Z                 |\n| hostId                              |                                      |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| key_name                            | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea |\n| adminPass                           | cs4ULhBnb545                         |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0     |\n| created                             | 2013-05-15T22:38:28Z                 |\n| metadata                            | {}                                   |\n+-------------------------------------+--------------------------------------+\n\n4. see the servers: (in Error state)\nubuntu@osee0221:/mnt/download$ nova list\n+--------------------------------------+--------------------------------------+--------+------------------+\n| ID                                   | Name                                 | Status | Networks         |\n+--------------------------------------+--------------------------------------+--------+------------------+\n| 16c7fc43-8cab-48e4-be63-03c9305807d8 | 4664b408-ad40-4fba-9d71-20c217189090 | ACTIVE | private=10.0.0.2 |\n| bcae969f-ece0-4c20-8738-354fb3a7cf68 | 97bcfabc-5fab-4dd0-9d55-233613c0fdea | ERROR  | private=10.0.0.3 |\n+--------------------------------------+--------------------------------------+--------+------------------+\n\n\n5. See detail about that server:\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------------------------------+\n| Property                            | Value                                                                              |\n+-------------------------------------+------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                              |\n| updated                             | 2013-05-15T22:38:50Z                                                               |\n| OS-EXT-STS:task_state               | None                                                                               |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                                           |\n| key_name                            | None                                                                               |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea)                         |\n| private network                     | 10.0.0.3                                                                           |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4                           |\n| OS-EXT-STS:vm_state                 | error                                                                              |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                                                 |\n| flavor                              | m1.medium (3)                                                                      |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                                               |\n| security_groups                     | [{u'name': u'default'}]                                                            |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                                                   |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                                               |\n| created                             | 2013-05-15T22:38:28Z                                                               |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                                                   |\n| OS-DCF:diskConfig                   | MANUAL                                                                             |\n| metadata                            | {}                                                                                 |\n| accessIPv4                          |                                                                                    |\n| accessIPv6                          |                                                                                    |\n| fault                               | {u'message': u'NoValidHost', u'code': 500, u'details': u'No valid host was found.  |\n|                                     | ', u'created': u'2013-05-15T22:38:50Z'}                                            |\n| OS-EXT-STS:power_state              | 0                                                                                  |\n| OS-EXT-AZ:availability_zone         | nova                                                                               |\n| config_drive                        |                                                                                    |\n+-------------------------------------+------------------------------------------------------------------------------------+\nubuntu@osee0221:/mnt/download$\n\n6. reset the server to be active:\nubuntu@osee0221:/mnt/download$ nova reset-state --active 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n\n\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------+\n| Property                            | Value                                                      |\n+-------------------------------------+------------------------------------------------------------+\n| status                              | ACTIVE                                                     |\n| updated                             | 2013-05-15T22:52:44Z                                       |\n| OS-EXT-STS:task_state               | None                                                       |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                   |\n| key_name                            | None                                                       |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea) |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4   |\n| OS-EXT-STS:vm_state                 | active                                                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                          |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                         |\n| flavor                              | m1.medium (3)                                              |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                       |\n| security_groups                     | [{u'name': u'default'}]                                    |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                           |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                       |\n| created                             | 2013-05-15T22:38:28Z                                       |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                           |\n| OS-DCF:diskConfig                   | MANUAL                                                     |\n| metadata                            | {}                                                         |\n| accessIPv4                          |                                                            |\n| accessIPv6                          |                                                            |\n| progress                            | 0                                                          |\n| OS-EXT-STS:power_state              | 0                                                          |\n| OS-EXT-AZ:availability_zone         | nova                                                       |\n| config_drive                        |                                                            |\n+-------------------------------------+------------------------------------------------------------+\n\n7. Try to resize it to flavor 1 (will put the server status back to error, with hope that there will be a new fault msg)\nubuntu@osee0221:/mnt/download$ nova resize 97bcfabc-5fab-4dd0-9d55-233613c0fdea 1\n\n8. Now it has the same fault msg:(created at same time, nothing change in the fault msg)\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------------------------------+\n| Property                            | Value                                                                              |\n+-------------------------------------+------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                              |\n| updated                             | 2013-05-15T22:56:01Z                                                               |\n| OS-EXT-STS:task_state               | None                                                                               |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                                           |\n| key_name                            | None                                                                               |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea)                         |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4                           |\n| OS-EXT-STS:vm_state                 | error                                                                              |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                                                 |\n| flavor                              | m1.medium (3)                                                                      |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                                               |\n| security_groups                     | [{u'name': u'default'}]                                                            |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                                                   |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                                               |\n| created                             | 2013-05-15T22:38:28Z                                                               |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                                                   |\n| OS-DCF:diskConfig                   | MANUAL                                                                             |\n| metadata                            | {}                                                                                 |\n| accessIPv4                          |                                                                                    |\n| accessIPv6                          |                                                                                    |\n| fault                               | {u'message': u'NoValidHost', u'code': 500, u'details': u'No valid host was found.  |\n|                                     | ', u'created': u'2013-05-15T22:38:50Z'}                                            |\n| OS-EXT-STS:power_state              | 0                                                                                  |\n| OS-EXT-AZ:availability_zone         | nova                                                                               |\n| config_drive                        |                                                                                    |\n+-------------------------------------+------------------------------------------------------------------------------------+\nubuntu@osee0221:/mnt/download$\n\nProblem: \nThe fault message in step 7 and step 5 are exactly same", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1180618", 
    "owner": "https://api.launchpad.net/1.0/~phongdly", 
    "id": 1180618, 
    "index": 3660, 
    "created": "2013-05-16 01:13:43.112526+00:00", 
    "title": "fault['message'] needs to be updated with exception message", 
    "comments": [
        {
            "content": "current implementation of nova/compute/utils.py will not update the exception message thrown from exception class.\n\nHere are steps taken to produce the defect:\n\n1. Created a fake glance image:\nglance image-create --name=Fake_Image --is-public=true --container-format=ovf --min-ram=4000 --disk-format=raw < /mnt/download/test2.raw\n(test2.raw is only a txt file, not an image file).\n2. The image Fake_Image shown:\nubuntu@osee0221:/mnt/download$ nova image-list\n+--------------------------------------+---------------------------------+--------+--------+\n| ID                                   | Name                            | Status | Server |\n+--------------------------------------+---------------------------------+--------+--------+\n| f474b249-e7fb-45de-adad-c5338fa53c53 | cirros-0.3.1-x86_64-uec         | ACTIVE |        |\n| 4664b408-ad40-4fba-9d71-20c217189090 | cirros-0.3.1-x86_64-uec-kernel  | ACTIVE |        |\n| bec25ebd-6543-4599-a8bf-c97b7ad3a649 | cirros-0.3.1-x86_64-uec-ramdisk | ACTIVE |        |\n| 97bcfabc-5fab-4dd0-9d55-233613c0fdea | Fake_Image\t                 | ACTIVE |        |\n+--------------------------------------+---------------------------------+--------+--------+\nubuntu@osee0221:/mnt/download$\n\n3. Now boot that Fake_Image:\nubuntu@osee0221:/mnt/download$ nova boot --flavor 3 --image Fake_Image 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+--------------------------------------+\n| Property                            | Value                                |\n+-------------------------------------+--------------------------------------+\n| OS-EXT-STS:task_state               | scheduling                           |\n| image                               | Fake_Image                  |\n| OS-EXT-STS:vm_state                 | building                             |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                    |\n| flavor                              | m1.medium                            |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68 |\n| security_groups                     | [{u'name': u'default'}]              |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255     |\n| OS-DCF:diskConfig                   | MANUAL                               |\n| accessIPv4                          |                                      |\n| accessIPv6                          |                                      |\n| progress                            | 0                                    |\n| OS-EXT-STS:power_state              | 0                                    |\n| OS-EXT-AZ:availability_zone         | nova                                 |\n| config_drive                        |                                      |\n| status                              | BUILD                                |\n| updated                             | 2013-05-15T22:38:28Z                 |\n| hostId                              |                                      |\n| OS-EXT-SRV-ATTR:host                | None                                 |\n| key_name                            | None                                 |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | None                                 |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea |\n| adminPass                           | cs4ULhBnb545                         |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0     |\n| created                             | 2013-05-15T22:38:28Z                 |\n| metadata                            | {}                                   |\n+-------------------------------------+--------------------------------------+\n\n4. see the servers: (in Error state)\nubuntu@osee0221:/mnt/download$ nova list\n+--------------------------------------+--------------------------------------+--------+------------------+\n| ID                                   | Name                                 | Status | Networks         |\n+--------------------------------------+--------------------------------------+--------+------------------+\n| 16c7fc43-8cab-48e4-be63-03c9305807d8 | 4664b408-ad40-4fba-9d71-20c217189090 | ACTIVE | private=10.0.0.2 |\n| bcae969f-ece0-4c20-8738-354fb3a7cf68 | 97bcfabc-5fab-4dd0-9d55-233613c0fdea | ERROR  | private=10.0.0.3 |\n+--------------------------------------+--------------------------------------+--------+------------------+\n\n\n5. See detail about that server:\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------------------------------+\n| Property                            | Value                                                                              |\n+-------------------------------------+------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                              |\n| updated                             | 2013-05-15T22:38:50Z                                                               |\n| OS-EXT-STS:task_state               | None                                                                               |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                                           |\n| key_name                            | None                                                                               |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea)                         |\n| private network                     | 10.0.0.3                                                                           |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4                           |\n| OS-EXT-STS:vm_state                 | error                                                                              |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                                                 |\n| flavor                              | m1.medium (3)                                                                      |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                                               |\n| security_groups                     | [{u'name': u'default'}]                                                            |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                                                   |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                                               |\n| created                             | 2013-05-15T22:38:28Z                                                               |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                                                   |\n| OS-DCF:diskConfig                   | MANUAL                                                                             |\n| metadata                            | {}                                                                                 |\n| accessIPv4                          |                                                                                    |\n| accessIPv6                          |                                                                                    |\n| fault                               | {u'message': u'NoValidHost', u'code': 500, u'details': u'No valid host was found.  |\n|                                     | ', u'created': u'2013-05-15T22:38:50Z'}                                            |\n| OS-EXT-STS:power_state              | 0                                                                                  |\n| OS-EXT-AZ:availability_zone         | nova                                                                               |\n| config_drive                        |                                                                                    |\n+-------------------------------------+------------------------------------------------------------------------------------+\nubuntu@osee0221:/mnt/download$\n\n6. reset the server to be active:\nubuntu@osee0221:/mnt/download$ nova reset-state --active 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n\n\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------+\n| Property                            | Value                                                      |\n+-------------------------------------+------------------------------------------------------------+\n| status                              | ACTIVE                                                     |\n| updated                             | 2013-05-15T22:52:44Z                                       |\n| OS-EXT-STS:task_state               | None                                                       |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                   |\n| key_name                            | None                                                       |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea) |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4   |\n| OS-EXT-STS:vm_state                 | active                                                     |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                          |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                         |\n| flavor                              | m1.medium (3)                                              |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                       |\n| security_groups                     | [{u'name': u'default'}]                                    |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                           |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                       |\n| created                             | 2013-05-15T22:38:28Z                                       |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                           |\n| OS-DCF:diskConfig                   | MANUAL                                                     |\n| metadata                            | {}                                                         |\n| accessIPv4                          |                                                            |\n| accessIPv6                          |                                                            |\n| progress                            | 0                                                          |\n| OS-EXT-STS:power_state              | 0                                                          |\n| OS-EXT-AZ:availability_zone         | nova                                                       |\n| config_drive                        |                                                            |\n+-------------------------------------+------------------------------------------------------------+\n\n7. Try to resize it to flavor 1 (will put the server status back to error, with hope that there will be a new fault msg)\nubuntu@osee0221:/mnt/download$ nova resize 97bcfabc-5fab-4dd0-9d55-233613c0fdea 1\n\n8. Now it has the same fault msg:(created at same time, nothing change in the fault msg)\nubuntu@osee0221:/mnt/download$ nova show 97bcfabc-5fab-4dd0-9d55-233613c0fdea\n+-------------------------------------+------------------------------------------------------------------------------------+\n| Property                            | Value                                                                              |\n+-------------------------------------+------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                              |\n| updated                             | 2013-05-15T22:56:01Z                                                               |\n| OS-EXT-STS:task_state               | None                                                                               |\n| OS-EXT-SRV-ATTR:host                | osee0221                                                                           |\n| key_name                            | None                                                                               |\n| image                               | Fake_Image (97bcfabc-5fab-4dd0-9d55-233613c0fdea)                         |\n| hostId                              | f1e0c4e312540e8877e6b0d61e86db7887451ea877f901f359da7ad4                           |\n| OS-EXT-STS:vm_state                 | error                                                                              |\n| OS-EXT-SRV-ATTR:instance_name       | instance-00000002                                                                  |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | osee0221.novalocal                                                                 |\n| flavor                              | m1.medium (3)                                                                      |\n| id                                  | bcae969f-ece0-4c20-8738-354fb3a7cf68                                               |\n| security_groups                     | [{u'name': u'default'}]                                                            |\n| user_id                             | 8a6aac216f3241bba8b6cfda77778255                                                   |\n| name                                | 97bcfabc-5fab-4dd0-9d55-233613c0fdea                                               |\n| created                             | 2013-05-15T22:38:28Z                                                               |\n| tenant_id                           | 97ba217a35a14b5aa09fefe9c95610c0                                                   |\n| OS-DCF:diskConfig                   | MANUAL                                                                             |\n| metadata                            | {}                                                                                 |\n| accessIPv4                          |                                                                                    |\n| accessIPv6                          |                                                                                    |\n| fault                               | {u'message': u'NoValidHost', u'code': 500, u'details': u'No valid host was found.  |\n|                                     | ', u'created': u'2013-05-15T22:38:50Z'}                                            |\n| OS-EXT-STS:power_state              | 0                                                                                  |\n| OS-EXT-AZ:availability_zone         | nova                                                                               |\n| config_drive                        |                                                                                    |\n+-------------------------------------+------------------------------------------------------------------------------------+\nubuntu@osee0221:/mnt/download$\n\nProblem: \nThe fault message in step 7 and step 5 are exactly same", 
            "date_created": "2013-05-16 01:13:43.112526+00:00", 
            "author": "https://api.launchpad.net/1.0/~phongdly"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/29333", 
            "date_created": "2013-05-16 01:36:36.836627+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "I don't think this bug is valid. Isn't the problem just that you're failing to schedule both times and ending up with the same error message?", 
            "date_created": "2013-06-05 20:27:47.301141+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "sorry for the unclear examples above, I should have used two different invalid tests to prove the fault's message is not updated with  detail message thrown by the exception class, but with only the exception class name in some cases.", 
            "date_created": "2013-06-05 21:05:10.826816+00:00", 
            "author": "https://api.launchpad.net/1.0/~phongdly"
        }
    ]
}