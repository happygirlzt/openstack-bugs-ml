{
    "status": "Invalid", 
    "last_updated": "2016-04-08 07:41:59.333674+00:00", 
    "description": "Description\n===========\n\nWe have an old script which was requesting http://<nova-ip>:8774/v3 and received a 300 multiple choices, the response body looks like this though:\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2/v3\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.op\u2502enstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1/v3\", \"rel\": \"self\"}]}]}\n\nThis actually will work with anything after /, e.g., http://<nova-ip>:8774/asd\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2/asd\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.o\u2502penstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1/asd\", \"rel\": \"self\"}]}]}\n\nSteps to reproduce\n==================\nA chronological list of steps which will bring off the\nissue you noticed:\n* I upgraded Kilo to Liberty\n* then I made a request to http://<nova-ip>:8774/v3\n* then I saw a response body like above\n\nExample code:\n\n    import requests\n\n    r = requests.get('http://<nova-ip>:8774/v3')\n    print(r.status_code)\n    print(r.content)\n\nAlternatively,\n\n    curl -i http://<nova-ip>:8774/v3\n\nExpected result\n===============\n\nI would have expected to see a response like:\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.op\u2502enstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1\", \"rel\": \"self\"}]}]}\n\nE.g., http://127.0.0.1:8774/v2.1 instead of http://127.0.0.1:8774/v2.1/v3\n\nActual result\n=============\n\nAs described above\n\nEnvironment\n===========\n1. Version: 3f217a441af6595cb2a240ab72133aff133504b6 (stable/liberty)\n\n2. Which hypervisor did you use?\n    Unrelated\n\n2. Which storage type did you use?\n    Unrelated\n\n3. Which networking type did you use?\n    Unrelated", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1567620", 
    "owner": "None", 
    "id": 1567620, 
    "index": 6145, 
    "created": "2016-04-07 19:08:45.148313+00:00", 
    "title": "Scripts requesting v3 get multiple choices with bad URLs", 
    "comments": [
        {
            "content": "Description\n===========\n\nWe have an old script which was requesting http://<nova-ip>:8774/v3 and received a 300 multiple choices, the response body looks like this though:\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2/v3\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.op\u2502enstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1/v3\", \"rel\": \"self\"}]}]}\n\nThis actually will work with anything after /, e.g., http://<nova-ip>:8774/asd\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2/asd\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.o\u2502penstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1/asd\", \"rel\": \"self\"}]}]}\n\nSteps to reproduce\n==================\nA chronological list of steps which will bring off the\nissue you noticed:\n* I upgraded Kilo to Liberty\n* then I made a request to http://<nova-ip>:8774/v3\n* then I saw a response body like above\n\nExample code:\n\n    import requests\n\n    r = requests.get('http://<nova-ip>:8774/v3')\n    print(r.status_code)\n    print(r.content)\n\nAlternatively,\n\n    curl -i http://<nova-ip>:8774/v3\n\nExpected result\n===============\n\nI would have expected to see a response like:\n\n{\"choices\": [{\"status\": \"SUPPORTED\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.openstack.compute+json;version=2\"}], \"id\": \"v2.0\", \"l\u2502inks\": [{\"href\": \"http://127.0.0.1:8774/v2\", \"rel\": \"self\"}]}, {\"status\": \"CURRENT\", \"media-types\": [{\"base\": \"application/json\", \"type\": \"application/vnd.op\u2502enstack.compute+json;version=2.1\"}], \"id\": \"v2.1\", \"links\": [{\"href\": \"http://127.0.0.1:8774/v2.1\", \"rel\": \"self\"}]}]}\n\nE.g., http://127.0.0.1:8774/v2.1 instead of http://127.0.0.1:8774/v2.1/v3\n\nActual result\n=============\n\nAs described above\n\nEnvironment\n===========\n1. Version: 3f217a441af6595cb2a240ab72133aff133504b6 (stable/liberty)\n\n2. Which hypervisor did you use?\n    Unrelated\n\n2. Which storage type did you use?\n    Unrelated\n\n3. Which networking type did you use?\n    Unrelated", 
            "date_created": "2016-04-07 19:08:45.148313+00:00", 
            "author": "https://api.launchpad.net/1.0/~icordasc"
        }, 
        {
            "content": "It seems that you've created a report for the same  issue twice, I'm closing this one and not the one at https://bugs.launchpad.net/nova/+bug/1567621 because someone has declared themselves as being affected for that one.", 
            "date_created": "2016-04-08 07:41:11.130043+00:00", 
            "author": "https://api.launchpad.net/1.0/~cihand"
        }
    ]
}