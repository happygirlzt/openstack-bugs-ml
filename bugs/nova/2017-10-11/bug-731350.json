{
    "status": "Fix Released", 
    "last_updated": "2011-04-21 07:19:32.144244+00:00", 
    "description": "Nova Revision: 762\nGlance Revision: 81\n\nI get a KeyError: 'type' exception when trying to create an image with the most recent trunk PPA packages of Nova and Glance:\n\n2011-03-08 14:22:43,221 ERROR nova.api.openstack [-] Caught error: 'type'\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/__init__.py\", line 53, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/wsgi.py\", line 322, in __call__\n(nova.api.openstack): TRACE:     result = method(**arg_dict)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/servers.py\", line 157, in create\n(nova.api.openstack): TRACE:     req, image_id)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/servers.py\", line 454, in _get_kernel_ramdisk_from_image\n(nova.api.openstack): TRACE:     if image['type'] != 'machine':\n(nova.api.openstack): TRACE: KeyError: 'type'\n(nova.api.openstack): TRACE:\n\n---\n\nGlance now appears to return image objects that use image['[properties']['type'] instead of image['type'].\n\n\nUploading a hotfix shortly...", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/731350", 
    "owner": "https://api.launchpad.net/1.0/~dan-prince", 
    "id": 731350, 
    "index": 2053, 
    "created": "2011-03-08 14:47:03.512707+00:00", 
    "title": "KeyError: 'type' when creating servers with OS API w/ Glance", 
    "comments": [
        {
            "content": "Nova Revision: 762\nGlance Revision: 81\n\nI get a KeyError: 'type' exception when trying to create an image with the most recent trunk PPA packages of Nova and Glance:\n\n2011-03-08 14:22:43,221 ERROR nova.api.openstack [-] Caught error: 'type'\n(nova.api.openstack): TRACE: Traceback (most recent call last):\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/__init__.py\", line 53, in __call__\n(nova.api.openstack): TRACE:     return req.get_response(self.application)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 919, in get_response\n(nova.api.openstack): TRACE:     application, catch_exc_info=False)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/request.py\", line 887, in call_application\n(nova.api.openstack): TRACE:     app_iter = application(self.environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/routes/middleware.py\", line 131, in __call__\n(nova.api.openstack): TRACE:     response = self.app(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 159, in __call__\n(nova.api.openstack): TRACE:     return resp(environ, start_response)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 147, in __call__\n(nova.api.openstack): TRACE:     resp = self.call_func(req, *args, **self.kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/webob/dec.py\", line 208, in call_func\n(nova.api.openstack): TRACE:     return self.func(req, *args, **kwargs)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/wsgi.py\", line 322, in __call__\n(nova.api.openstack): TRACE:     result = method(**arg_dict)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/servers.py\", line 157, in create\n(nova.api.openstack): TRACE:     req, image_id)\n(nova.api.openstack): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/openstack/servers.py\", line 454, in _get_kernel_ramdisk_from_image\n(nova.api.openstack): TRACE:     if image['type'] != 'machine':\n(nova.api.openstack): TRACE: KeyError: 'type'\n(nova.api.openstack): TRACE:\n\n---\n\nGlance now appears to return image objects that use image['[properties']['type'] instead of image['type'].\n\n\nUploading a hotfix shortly...", 
            "date_created": "2011-03-08 14:47:03.512707+00:00", 
            "author": "https://api.launchpad.net/1.0/~dan-prince"
        }, 
        {
            "content": "Looks like this was fixed in #731470.\n\nMarking as fixed.", 
            "date_created": "2011-03-09 02:22:56.808997+00:00", 
            "author": "https://api.launchpad.net/1.0/~dan-prince"
        }
    ]
}