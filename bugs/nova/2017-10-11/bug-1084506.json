{
    "status": "Invalid", 
    "last_updated": "2013-01-22 11:13:00.147388+00:00", 
    "description": "I am using Folsom stable and my network_api_class is set to: nova.network.quantumv2.api.API\n\nWhen I run nova-api, I get the following stacktrace:\n\n2012-11-29 04:15:04 CRITICAL nova [-] cannot import name network\n2012-11-29 04:15:04 TRACE nova Traceback (most recent call last):\n2012-11-29 04:15:04 TRACE nova   File \"/usr/bin/nova-api\", line 50, in <module>\n2012-11-29 04:15:04 TRACE nova     server = service.WSGIService(api)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 577, in __init__\n2012-11-29 04:15:04 TRACE nova     self.app = self.loader.load_app(name)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/wsgi.py\", line 372, in load_app\n2012-11-29 04:15:04 TRACE nova     return deploy.loadapp(\"config:%s\" % self.config_path, name=name)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 247, in loadapp\n2012-11-29 04:15:04 TRACE nova     return loadobj(APP, uri, name=name, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 272, in loadobj\n2012-11-29 04:15:04 TRACE nova     return context.create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 710, in create\n2012-11-29 04:15:04 TRACE nova     return self.object_type.invoke(self)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 144, in invoke\n2012-11-29 04:15:04 TRACE nova     **context.local_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/util.py\", line 56, in fix_call\n2012-11-29 04:15:04 TRACE nova     val = callable(*args, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/urlmap.py\", line 25, in urlmap_factory\n2012-11-29 04:15:04 TRACE nova     app = loader.get_app(app_name, global_conf=global_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 350, in get_app\n2012-11-29 04:15:04 TRACE nova     name=name, global_conf=global_conf).create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 710, in create\n2012-11-29 04:15:04 TRACE nova     return self.object_type.invoke(self)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 144, in invoke\n2012-11-29 04:15:04 TRACE nova     **context.local_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/util.py\", line 56, in fix_call\n2012-11-29 04:15:04 TRACE nova     val = callable(*args, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/auth.py\", line 49, in pipeline_factory\n2012-11-29 04:15:04 TRACE nova     filters = [loader.get_filter(n) for n in pipeline[:-1]]\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 354, in get_filter\n2012-11-29 04:15:04 TRACE nova     name=name, global_conf=global_conf).create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 366, in filter_context\n2012-11-29 04:15:04 TRACE nova     FILTER, name=name, global_conf=global_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 458, in get_context\n2012-11-29 04:15:04 TRACE nova     section)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 517, in _context_from_explicit\n2012-11-29 04:15:04 TRACE nova     value = import_string(found_expr)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 22, in import_string\n2012-11-29 04:15:04 TRACE nova     return pkg_resources.EntryPoint.parse(\"x=\" + s).load(False)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/pkg_resources.py\", line 2017, in load\n2012-11-29 04:15:04 TRACE nova     entry = __import__(self.module_name, globals(),globals(), ['__name__'])\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py\", line 30, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.api.ec2 import apirequest\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/apirequest.py\", line 27, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.api.ec2 import ec2utils\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 25, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.network import model as network_model\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/__init__.py\", line 26, in <module>\n2012-11-29 04:15:04 TRACE nova     nova.flags.FLAGS.network_api_class)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 30, in import_class\n2012-11-29 04:15:04 TRACE nova     __import__(mod_str)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/quantumv2/api.py\", line 53, in <module>\n2012-11-29 04:15:04 TRACE nova     flags.DECLARE('default_floating_pool', 'nova.network.manager')\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/flags.py\", line 52, in DECLARE\n2012-11-29 04:15:04 TRACE nova     __import__(module_string, globals(), locals())\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 56, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.compute import api as compute_api\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/__init__.py\", line 25, in <module>\n2012-11-29 04:15:04 TRACE nova     nova.flags.FLAGS.compute_api_class)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 30, in import_class\n2012-11-29 04:15:04 TRACE nova     __import__(mod_str)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 43, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova import network\n2012-11-29 04:15:04 TRACE nova ImportError: cannot import name network\n2012-11-29 04:15:04 TRACE nova \n\nIt looks like the culprit is this fella:\n\nflags.DECLARE('default_floating_pool', 'nova.network.manager')\n\nat this line:\n\nhttps://github.com/openstack/nova/blob/stable/folsom/nova/network/quantumv2/api.py#L53\n\nIf I comment it out, nova-api loads fine, but then I have troubles down the road. \n\nI wonder if there's a circular dependency; I managed to solve this by importing the network api explicitly like so: \n\nfrom nova.network.api import API as network_api\n\nin:\n\nnova/compute/api.py\nnova/notifications.py\n\nA snippet of my nova.conf looks like below:\n\n[DEFAULT]\nauth_strategy=keystone\nuse_syslog=True\ndebug=True\nverbose=True\nrabbit_host=localhost\nrabbit_password=guest\nsql_max_retries=5\nsql_retry_interval=60\nsql_connection=mysql://nova:nova@localhost/nova\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nlock_path=/var/lock/nova\nrootwrap_config=/etc/nova/rootwrap.conf\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=localhost:9292\nnetwork_api_class=nova.network.quantumv2.api.API\nquantum_admin_tenant_name=os_service\nquantum_admin_username=os_quantum\nquantum_admin_password=dummy\nquantum_admin_auth_url=http://localhost:35357/v2.0/\nquantum_auth_strategy=keystone\nquantum_url=http://quantum-dev:9696/\ndefault_floating_pool=nova\nallow_resize_to_same_host=True\nvolume_api_class=nova.volume.cinder.API\nenabled_apis=ec2,osapi_compute,metadata\napi_rate_limit=False\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\napi_paste_config=/etc/nova/api-paste.ini\n\nMaybe I am barking at the wrong tree as I also found this page:\n\nhttp://cloudistic.me/blog/openstack-folsom-backporting-quantum-floating-ips-to-nova-on-ubuntu-12-04/\n\nand the author does not seem to have any complain.\n\nHints?\n\nMany thanks,\nArmando", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1084506", 
    "owner": "None", 
    "id": 1084506, 
    "index": 3236, 
    "created": "2012-11-29 12:26:58.488979+00:00", 
    "title": "Import failure in nova-api with flag network_api_class=nova.network.quantumv2.api.API", 
    "comments": [
        {
            "content": "I am using Folsom stable and my network_api_class is set to: nova.network.quantumv2.api.API\n\nWhen I run nova-api, I get the following stacktrace:\n\n2012-11-29 04:15:04 CRITICAL nova [-] cannot import name network\n2012-11-29 04:15:04 TRACE nova Traceback (most recent call last):\n2012-11-29 04:15:04 TRACE nova   File \"/usr/bin/nova-api\", line 50, in <module>\n2012-11-29 04:15:04 TRACE nova     server = service.WSGIService(api)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 577, in __init__\n2012-11-29 04:15:04 TRACE nova     self.app = self.loader.load_app(name)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/wsgi.py\", line 372, in load_app\n2012-11-29 04:15:04 TRACE nova     return deploy.loadapp(\"config:%s\" % self.config_path, name=name)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 247, in loadapp\n2012-11-29 04:15:04 TRACE nova     return loadobj(APP, uri, name=name, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 272, in loadobj\n2012-11-29 04:15:04 TRACE nova     return context.create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 710, in create\n2012-11-29 04:15:04 TRACE nova     return self.object_type.invoke(self)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 144, in invoke\n2012-11-29 04:15:04 TRACE nova     **context.local_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/util.py\", line 56, in fix_call\n2012-11-29 04:15:04 TRACE nova     val = callable(*args, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/urlmap.py\", line 25, in urlmap_factory\n2012-11-29 04:15:04 TRACE nova     app = loader.get_app(app_name, global_conf=global_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 350, in get_app\n2012-11-29 04:15:04 TRACE nova     name=name, global_conf=global_conf).create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 710, in create\n2012-11-29 04:15:04 TRACE nova     return self.object_type.invoke(self)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 144, in invoke\n2012-11-29 04:15:04 TRACE nova     **context.local_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/util.py\", line 56, in fix_call\n2012-11-29 04:15:04 TRACE nova     val = callable(*args, **kw)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/auth.py\", line 49, in pipeline_factory\n2012-11-29 04:15:04 TRACE nova     filters = [loader.get_filter(n) for n in pipeline[:-1]]\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 354, in get_filter\n2012-11-29 04:15:04 TRACE nova     name=name, global_conf=global_conf).create()\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 366, in filter_context\n2012-11-29 04:15:04 TRACE nova     FILTER, name=name, global_conf=global_conf)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 458, in get_context\n2012-11-29 04:15:04 TRACE nova     section)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 517, in _context_from_explicit\n2012-11-29 04:15:04 TRACE nova     value = import_string(found_expr)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py\", line 22, in import_string\n2012-11-29 04:15:04 TRACE nova     return pkg_resources.EntryPoint.parse(\"x=\" + s).load(False)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/local/lib/python2.7/dist-packages/pkg_resources.py\", line 2017, in load\n2012-11-29 04:15:04 TRACE nova     entry = __import__(self.module_name, globals(),globals(), ['__name__'])\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/__init__.py\", line 30, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.api.ec2 import apirequest\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/apirequest.py\", line 27, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.api.ec2 import ec2utils\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/api/ec2/ec2utils.py\", line 25, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.network import model as network_model\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/__init__.py\", line 26, in <module>\n2012-11-29 04:15:04 TRACE nova     nova.flags.FLAGS.network_api_class)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 30, in import_class\n2012-11-29 04:15:04 TRACE nova     __import__(mod_str)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/quantumv2/api.py\", line 53, in <module>\n2012-11-29 04:15:04 TRACE nova     flags.DECLARE('default_floating_pool', 'nova.network.manager')\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/flags.py\", line 52, in DECLARE\n2012-11-29 04:15:04 TRACE nova     __import__(module_string, globals(), locals())\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/network/manager.py\", line 56, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova.compute import api as compute_api\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/__init__.py\", line 25, in <module>\n2012-11-29 04:15:04 TRACE nova     nova.flags.FLAGS.compute_api_class)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/importutils.py\", line 30, in import_class\n2012-11-29 04:15:04 TRACE nova     __import__(mod_str)\n2012-11-29 04:15:04 TRACE nova   File \"/usr/lib/python2.7/dist-packages/nova/compute/api.py\", line 43, in <module>\n2012-11-29 04:15:04 TRACE nova     from nova import network\n2012-11-29 04:15:04 TRACE nova ImportError: cannot import name network\n2012-11-29 04:15:04 TRACE nova \n\nIt looks like the culprit is this fella:\n\nflags.DECLARE('default_floating_pool', 'nova.network.manager')\n\nat this line:\n\nhttps://github.com/openstack/nova/blob/stable/folsom/nova/network/quantumv2/api.py#L53\n\nIf I comment it out, nova-api loads fine, but then I have troubles down the road. \n\nI wonder if there's a circular dependency; I managed to solve this by importing the network api explicitly like so: \n\nfrom nova.network.api import API as network_api\n\nin:\n\nnova/compute/api.py\nnova/notifications.py\n\nA snippet of my nova.conf looks like below:\n\n[DEFAULT]\nauth_strategy=keystone\nuse_syslog=True\ndebug=True\nverbose=True\nrabbit_host=localhost\nrabbit_password=guest\nsql_max_retries=5\nsql_retry_interval=60\nsql_connection=mysql://nova:nova@localhost/nova\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nlock_path=/var/lock/nova\nrootwrap_config=/etc/nova/rootwrap.conf\nimage_service=nova.image.glance.GlanceImageService\nglance_api_servers=localhost:9292\nnetwork_api_class=nova.network.quantumv2.api.API\nquantum_admin_tenant_name=os_service\nquantum_admin_username=os_quantum\nquantum_admin_password=dummy\nquantum_admin_auth_url=http://localhost:35357/v2.0/\nquantum_auth_strategy=keystone\nquantum_url=http://quantum-dev:9696/\ndefault_floating_pool=nova\nallow_resize_to_same_host=True\nvolume_api_class=nova.volume.cinder.API\nenabled_apis=ec2,osapi_compute,metadata\napi_rate_limit=False\nosapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions\napi_paste_config=/etc/nova/api-paste.ini\n\nMaybe I am barking at the wrong tree as I also found this page:\n\nhttp://cloudistic.me/blog/openstack-folsom-backporting-quantum-floating-ips-to-nova-on-ubuntu-12-04/\n\nand the author does not seem to have any complain.\n\nHints?\n\nMany thanks,\nArmando", 
            "date_created": "2012-11-29 12:26:58.488979+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }, 
        {
            "content": "I think I am a week late, I found new changes to my folsom stable ;)", 
            "date_created": "2012-11-29 18:36:41.004329+00:00", 
            "author": "https://api.launchpad.net/1.0/~armando-migliaccio"
        }
    ]
}