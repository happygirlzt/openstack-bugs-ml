{
    "status": "Confirmed", 
    "last_updated": "2016-08-30 13:46:55.993908+00:00", 
    "description": "I am using devstack development environment with n-cell enabled in localrc.       \nWhen I call API  to list all cells a cell with name \"child\" is explored.\nAgain when I try to \"cell-show\" this cell \"child\" call is failed with an error response 500.\nfollowing is the operations followed - \n\n Setting in /etc/nova/nova.conf\n         \n        [cells]\n        name = region\n        cell_type = api\n        enable = True\n         \n         \n\n\n\nWhen API call to get cells -\n\nREQUEST -          \n        curl -i 'http://10.0.9.40:8774/v2/dcab4e3fc2734bad97c43d46bb77d076/os-cells' -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token:<token>\"\n\nRESPONSE - \n        HTTP/1.1 200 OK\n        Content-Type: application/json\n        Content-Length: 111\n        X-Compute-Request-Id: req-e83c337a-a7d9-47e5-a472-72cd41126f21\n        Date: Thu, 24 Apr 2014 04:12:34 GMT\n         \n        {\"cells\": [{\"username\": \"guest\", \"rpc_host\": \"10.0.9.40\", \"type\": \"child\", \"name\": \"child\", \"rpc_port\": 5672}]}\n         \n         \n         \nDuring particular cell show (using cell name as \"child\")-\n         \nREQUEST -\n        curl -i 'http://10.0.9.40:8774/v2/dcab4e3fc2734bad97c43d46bb77d076/os-cells/child' -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: <token>\"\n         \nRESPONSE - \n        HTTP/1.1 500 Internal Server Error\n        Content-Length: 128\n        Content-Type: application/json; charset=UTF-8\n        X-Compute-Request-Id: req-ba2503bd-3948-4cce-8ee6-543aa597497b\n        Date: Thu, 24 Apr 2014 04:10:33 GMT\n         \n        {\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n         \n\n\nNote: when using cell name as \"api\" or \"region\" 404 is returned.\n     \n     \n     \n     \nnova-api logs during show call is traced as below -\n     \n    2014-04-24 11:15:20.219 DEBUG keystoneclient.middleware.auth_token [-] Authenticating user token from (pid=705) __call__ /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:603                                                                                                                    \n    2014-04-24 11:15:20.220 DEBUG keystoneclient.middleware.auth_token [-] Removing headers from request environment: X-Identity-Status,X-Domain-Id,X-Domain-Name,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-User-Id,X-User-Name,X-User-Domain-Id,X-User-Domain-Name,X-Roles,X-Service-Catalog,X-User,X-Tenant-Id,X-Tenant-Name,X-Tenant,X-Role from (pid=705) _remove_auth_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:662                                                                                                                                                          \n    2014-04-24 11:15:20.232 DEBUG keystoneclient.middleware.auth_token [-] Storing token in cache from (pid=705) _cache_put /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:1121                                                                                                                    \n    2014-04-24 11:15:20.233 DEBUG keystoneclient.middleware.auth_token [-] Received request from user: 6cf0c59310fb4b189fc157b19d0e1026 with project_id : 2c3857a83f454b7cb073891ef47acd11 and roles: heat_stack_owner,admin  from (pid=705) _build_user_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:910                                                                                                                                              \n    2014-04-24 11:15:20.238 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Matched GET /2c3857a83f454b7cb073891ef47acd11/os-cells/child from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n    2014-04-24 11:15:20.239 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Route path: '/{project_id}/os-cells/:(id)', defaults: {'action': u'show', 'controller': <nova.api.openstack.wsgi.Resource object at 0x38e8490>} from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102                                                                                                                                                \n    2014-04-24 11:15:20.239 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Match dict: {'action': u'show', 'controller': <nova.api.openstack.wsgi.Resource object at 0x38e8490>, 'project_id': u'2c3857a83f454b7cb073891ef47acd11', 'id': u'child'} from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103                                                                                                                      \n    2014-04-24 11:15:20.240 DEBUG nova.api.openstack.wsgi [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Calling method '<bound method Controller.show of <nova.api.openstack.compute.contrib.cells.Controller object at 0x3789c10>>' (Content-type='None', Accept='application/json') from (pid=705) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:945                                                                                                                \n    2014-04-24 11:15:20.253 ERROR nova.api.openstack [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Caught error: Circular reference detected\n    Traceback (most recent call last):\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n        incoming.message))\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 67, in reply\n        self._send_reply(conn, reply, failure, log_failure=log_failure)\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 61, in _send_reply\n        conn.direct_send(self.reply_q, rpc_common.serialize_msg(msg))\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/common.py\", line 317, in serialize_msg\n        _MESSAGE_KEY: jsonutils.dumps(raw_msg)}\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/openstack/common/jsonutils.py\", line 164, in dumps\n        return json.dumps(value, default=default, **kwargs)\n     \n      File \"/usr/lib/python2.7/json/__init__.py\", line 238, in dumps\n        **kw).encode(obj)\n     \n      File \"/usr/lib/python2.7/json/encoder.py\", line 201, in encode\n        chunks = self.iterencode(o, _one_shot=True)\n     \n      File \"/usr/lib/python2.7/json/encoder.py\", line 264, in iterencode\n        return _iterencode(o, 0)\n     \n    ValueError: Circular reference detected\n     \n    2014-04-24 11:15:20.253 TRACE nova.api.openstack Traceback (most recent call last):\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return req.get_response(self.application)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     application, catch_exc_info=False)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 616, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self.app(env, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     response = self.app(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 917, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     content_type, body, accept)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1070, in dispatch\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return method(req=request, **action_args)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/common.py\", line 602, in inner\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return function(*args, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/cells.py\", line 264, in show\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     cell = self.cells_rpcapi.cell_get(context, id)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/cells/rpcapi.py\", line 450, in cell_get\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return cctxt.call(ctxt, 'cell_get', cell_name=cell_name)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 150, in call\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     wait_for_reply=True, timeout=timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     timeout=timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self._send(target, ctxt, message, wait_for_reply, timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     raise result\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack ValueError: Circular reference detected\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack Traceback (most recent call last):\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     incoming.message))\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 67, in reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     self._send_reply(conn, reply, failure, log_failure=log_failure)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 61, in _send_reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     conn.direct_send(self.reply_q, rpc_common.serialize_msg(msg))\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/common.py\", line 317, in serialize_msg\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     _MESSAGE_KEY: jsonutils.dumps(raw_msg)}\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/openstack/common/jsonutils.py\", line 164, in dumps\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return json.dumps(value, default=default, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/__init__.py\", line 238, in dumps\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     **kw).encode(obj)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/encoder.py\", line 201, in encode\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     chunks = self.iterencode(o, _one_shot=True)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/encoder.py\", line 264, in iterencode\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return _iterencode(o, 0)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack ValueError: Circular reference detected\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.259 INFO nova.api.openstack [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] http://10.0.9.40:8774/v2/2c3857a83f454b7cb073891ef47acd11/os-cells/child returned with HTTP 500\n    2014-04-24 11:15:20.259 DEBUG nova.api.openstack.wsgi [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=705) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1215\n    2014-04-24 11:15:20.260 INFO nova.osapi_compute.wsgi.server [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] 10.0.9.40 \"GET /v2/2c3857a83f454b7cb073891ef47acd11/os-cells/child HTTP/1.1\" status: 500 len: 335 time: 0.0411668", 
    "tags": [
        "cells", 
        "compute"
    ], 
    "importance": "Undecided", 
    "heat": 46, 
    "link": "https://bugs.launchpad.net/nova/+bug/1312002", 
    "owner": "None", 
    "id": 1312002, 
    "index": 4795, 
    "created": "2014-04-24 06:21:53.911819+00:00", 
    "title": "nova cell-show <cell name> causes ValueError: Circular reference detected", 
    "comments": [
        {
            "content": "I am using devstack development environment with n-cell enabled in localrc.       \nWhen I call API  to list all cells a cell with name \"child\" is explored.\nAgain when I try to \"cell-show\" this cell \"child\" call is failed with an error response 500.\nfollowing is the operations followed - \n\n Setting in /etc/nova/nova.conf\n         \n        [cells]\n        name = region\n        cell_type = api\n        enable = True\n         \n         \n\n\n\nWhen API call to get cells -\n\nREQUEST -          \n        curl -i 'http://10.0.9.40:8774/v2/dcab4e3fc2734bad97c43d46bb77d076/os-cells' -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token:<token>\"\n\nRESPONSE - \n        HTTP/1.1 200 OK\n        Content-Type: application/json\n        Content-Length: 111\n        X-Compute-Request-Id: req-e83c337a-a7d9-47e5-a472-72cd41126f21\n        Date: Thu, 24 Apr 2014 04:12:34 GMT\n         \n        {\"cells\": [{\"username\": \"guest\", \"rpc_host\": \"10.0.9.40\", \"type\": \"child\", \"name\": \"child\", \"rpc_port\": 5672}]}\n         \n         \n         \nDuring particular cell show (using cell name as \"child\")-\n         \nREQUEST -\n        curl -i 'http://10.0.9.40:8774/v2/dcab4e3fc2734bad97c43d46bb77d076/os-cells/child' -X GET -H \"X-Auth-Project-Id: demo\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: <token>\"\n         \nRESPONSE - \n        HTTP/1.1 500 Internal Server Error\n        Content-Length: 128\n        Content-Type: application/json; charset=UTF-8\n        X-Compute-Request-Id: req-ba2503bd-3948-4cce-8ee6-543aa597497b\n        Date: Thu, 24 Apr 2014 04:10:33 GMT\n         \n        {\"computeFault\": {\"message\": \"The server has either erred or is incapable of performing the requested operation.\", \"code\": 500}}\n         \n\n\nNote: when using cell name as \"api\" or \"region\" 404 is returned.\n     \n     \n     \n     \nnova-api logs during show call is traced as below -\n     \n    2014-04-24 11:15:20.219 DEBUG keystoneclient.middleware.auth_token [-] Authenticating user token from (pid=705) __call__ /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:603                                                                                                                    \n    2014-04-24 11:15:20.220 DEBUG keystoneclient.middleware.auth_token [-] Removing headers from request environment: X-Identity-Status,X-Domain-Id,X-Domain-Name,X-Project-Id,X-Project-Name,X-Project-Domain-Id,X-Project-Domain-Name,X-User-Id,X-User-Name,X-User-Domain-Id,X-User-Domain-Name,X-Roles,X-Service-Catalog,X-User,X-Tenant-Id,X-Tenant-Name,X-Tenant,X-Role from (pid=705) _remove_auth_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:662                                                                                                                                                          \n    2014-04-24 11:15:20.232 DEBUG keystoneclient.middleware.auth_token [-] Storing token in cache from (pid=705) _cache_put /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:1121                                                                                                                    \n    2014-04-24 11:15:20.233 DEBUG keystoneclient.middleware.auth_token [-] Received request from user: 6cf0c59310fb4b189fc157b19d0e1026 with project_id : 2c3857a83f454b7cb073891ef47acd11 and roles: heat_stack_owner,admin  from (pid=705) _build_user_headers /opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py:910                                                                                                                                              \n    2014-04-24 11:15:20.238 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Matched GET /2c3857a83f454b7cb073891ef47acd11/os-cells/child from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:100\n    2014-04-24 11:15:20.239 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Route path: '/{project_id}/os-cells/:(id)', defaults: {'action': u'show', 'controller': <nova.api.openstack.wsgi.Resource object at 0x38e8490>} from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:102                                                                                                                                                \n    2014-04-24 11:15:20.239 DEBUG routes.middleware [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Match dict: {'action': u'show', 'controller': <nova.api.openstack.wsgi.Resource object at 0x38e8490>, 'project_id': u'2c3857a83f454b7cb073891ef47acd11', 'id': u'child'} from (pid=705) __call__ /usr/lib/python2.7/dist-packages/routes/middleware.py:103                                                                                                                      \n    2014-04-24 11:15:20.240 DEBUG nova.api.openstack.wsgi [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Calling method '<bound method Controller.show of <nova.api.openstack.compute.contrib.cells.Controller object at 0x3789c10>>' (Content-type='None', Accept='application/json') from (pid=705) _process_stack /opt/stack/nova/nova/api/openstack/wsgi.py:945                                                                                                                \n    2014-04-24 11:15:20.253 ERROR nova.api.openstack [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Caught error: Circular reference detected\n    Traceback (most recent call last):\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n        incoming.message))\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 67, in reply\n        self._send_reply(conn, reply, failure, log_failure=log_failure)\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 61, in _send_reply\n        conn.direct_send(self.reply_q, rpc_common.serialize_msg(msg))\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/common.py\", line 317, in serialize_msg\n        _MESSAGE_KEY: jsonutils.dumps(raw_msg)}\n     \n      File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/openstack/common/jsonutils.py\", line 164, in dumps\n        return json.dumps(value, default=default, **kwargs)\n     \n      File \"/usr/lib/python2.7/json/__init__.py\", line 238, in dumps\n        **kw).encode(obj)\n     \n      File \"/usr/lib/python2.7/json/encoder.py\", line 201, in encode\n        chunks = self.iterencode(o, _one_shot=True)\n     \n      File \"/usr/lib/python2.7/json/encoder.py\", line 264, in iterencode\n        return _iterencode(o, 0)\n     \n    ValueError: Circular reference detected\n     \n    2014-04-24 11:15:20.253 TRACE nova.api.openstack Traceback (most recent call last):\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/__init__.py\", line 125, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return req.get_response(self.application)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1320, in send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     application, catch_exc_info=False)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/request.py\", line 1284, in call_application\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/python-keystoneclient/keystoneclient/middleware/auth_token.py\", line 616, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self.app(env, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     response = self.app(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return resp(environ, start_response)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 917, in __call__\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     content_type, body, accept)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1070, in dispatch\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return method(req=request, **action_args)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/common.py\", line 602, in inner\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return function(*args, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/api/openstack/compute/contrib/cells.py\", line 264, in show\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     cell = self.cells_rpcapi.cell_get(context, id)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/opt/stack/nova/nova/cells/rpcapi.py\", line 450, in cell_get\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return cctxt.call(ctxt, 'cell_get', cell_name=cell_name)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/client.py\", line 150, in call\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     wait_for_reply=True, timeout=timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/transport.py\", line 90, in _send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     timeout=timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 412, in send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return self._send(target, ctxt, message, wait_for_reply, timeout)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 405, in _send\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     raise result\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack ValueError: Circular reference detected\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack Traceback (most recent call last):\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     incoming.message))\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 67, in reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     self._send_reply(conn, reply, failure, log_failure=log_failure)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/amqpdriver.py\", line 61, in _send_reply\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     conn.direct_send(self.reply_q, rpc_common.serialize_msg(msg))\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/_drivers/common.py\", line 317, in serialize_msg\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     _MESSAGE_KEY: jsonutils.dumps(raw_msg)}\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/local/lib/python2.7/dist-packages/oslo/messaging/openstack/common/jsonutils.py\", line 164, in dumps\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return json.dumps(value, default=default, **kwargs)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/__init__.py\", line 238, in dumps\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     **kw).encode(obj)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/encoder.py\", line 201, in encode\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     chunks = self.iterencode(o, _one_shot=True)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack   File \"/usr/lib/python2.7/json/encoder.py\", line 264, in iterencode\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack     return _iterencode(o, 0)\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack ValueError: Circular reference detected\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.253 TRACE nova.api.openstack\n    2014-04-24 11:15:20.259 INFO nova.api.openstack [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] http://10.0.9.40:8774/v2/2c3857a83f454b7cb073891ef47acd11/os-cells/child returned with HTTP 500\n    2014-04-24 11:15:20.259 DEBUG nova.api.openstack.wsgi [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] Returning 500 to user: The server has either erred or is incapable of performing the requested operation. from (pid=705) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1215\n    2014-04-24 11:15:20.260 INFO nova.osapi_compute.wsgi.server [req-3ddd31fe-cd31-4c81-b960-81c753566b4a admin demo] 10.0.9.40 \"GET /v2/2c3857a83f454b7cb073891ef47acd11/os-cells/child HTTP/1.1\" status: 500 len: 335 time: 0.0411668", 
            "date_created": "2014-04-24 06:21:53.911819+00:00", 
            "author": "https://api.launchpad.net/1.0/~raiesmh08"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/106991", 
            "date_created": "2014-07-15 10:50:04.847024+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by Sean Dague (<email address hidden>) on branch: master\nReview: https://review.openstack.org/106991\nReason: This review is > 4 weeks without comment, and failed Jenkins the last time it was checked. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.", 
            "date_created": "2014-12-08 16:44:20.621509+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This is back, but doesn't seem to be related strictly to cells any more:\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiVmFsdWVFcnJvcjogQ2lyY3VsYXIgcmVmZXJlbmNlIGRldGVjdGVkXCIgQU5EIHRhZ3M6XCJjb25zb2xlXCIiLCJmaWVsZHMiOltdLCJvZmZzZXQiOjAsInRpbWVmcmFtZSI6IjE3MjgwMCIsImdyYXBobW9kZSI6ImNvdW50IiwidGltZSI6eyJ1c2VyX2ludGVydmFsIjowfSwic3RhbXAiOjE0MTg3NTQzMTI2MjgsIm1vZGUiOiIiLCJhbmFseXplX2ZpZWxkIjoiIn0=", 
            "date_created": "2014-12-16 18:27:10.405880+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "\nThis is an automated cleanup. This bug report has been closed because it\nis older than 18 months and there is no open code change to fix this.\nAfter this time it is unlikely that the circumstances which lead to\nthe observed issue can be reproduced.\n\nIf you can reproduce the bug, please:\n* reopen the bug report (set to status \"New\")\n* AND add the detailed steps to reproduce the issue (if applicable)\n* AND leave a comment \"CONFIRMED FOR: <RELEASE_NAME>\"\n  Only still supported release names are valid (LIBERTY, MITAKA, OCATA, NEWTON).\n  Valid example: CONFIRMED FOR: LIBERTY\n", 
            "date_created": "2016-07-05 09:48:09.261325+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }, 
        {
            "content": "The bug has been reproduced several times by different people: https://bugs.launchpad.net/nova/+bug/1611447", 
            "date_created": "2016-08-30 13:02:38.882260+00:00", 
            "author": "https://api.launchpad.net/1.0/~ababich"
        }, 
        {
            "content": "CONFIRMED FOR: MITAKA", 
            "date_created": "2016-08-30 13:04:39.098150+00:00", 
            "author": "https://api.launchpad.net/1.0/~ababich"
        }
    ]
}