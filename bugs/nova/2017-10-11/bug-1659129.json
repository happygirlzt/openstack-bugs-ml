{
    "status": "Invalid", 
    "last_updated": "2017-03-10 08:28:07.321259+00:00", 
    "description": "When I tried to list all servers, n-api throws exception complaining about \"Unknow database exception\". I am using master branch TOT version. \n\nnicira@htb-1n-eng-dhcp8:~/devstack$ openstack server list\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'oslo_db.exception.DBNonExistentDatabase'> (HTTP 500) (Request-ID: req-4c779421-1c75-4e0a-b46f-ca2fe4995c25)\n\n\nn-api log:\n2017-01-24 19:51:27.176 DEBUG nova.compute.api [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] Searching by: {'deleted': False, 'project_id': u'c1c62ff8a14348108d4519c65c3db3e1'} from (pid=9385) get_all /opt/stack/nova/nova/compute/api.py:2331\n2017-01-24 19:51:27.194 ERROR nova.api.openstack.extensions [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] Unexpected exception in API method\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 209, in detail\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 344, in _get_servers\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 2416, in get_all\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 2493, in _get_instances_by_filters\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     expected_attrs=fields, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/instance.py\", line 1220, in get_by_filters\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     use_slave=use_slave, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 235, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     with reader_mode.using(context):\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.gen.next()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 944, in _transaction_scope\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     allow_async=self._allow_async) as resource:\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.gen.next()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 558, in _session\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     bind=self.connection, mode=self.mode)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 317, in _create_session2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._start()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 403, in _start\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     engine_args, maker_args)2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 427, in _setup_for_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sql_connection=sql_connection, **engine_kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     test_conn = _test_connection(engine, max_retries, retry_interval)2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return engine.connect()2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self._connection_cls(self, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     if connection is not None else engine.raw_connection()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     e, dialect, self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return fn()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 480, in checkout\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     rec = pool._do_get()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._dec_overflow()2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1057, in _do_get2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self._create_connection()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return _ConnectionRecord(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 449, in __init__2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.connection = self.__connect()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 607, in __connect2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/__init__.py\", line 90, in Connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 688, in __init__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.connect()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 906, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._request_authentication()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1114, in _request_authentication\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 981, in _read_packet\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     packet.check_error()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 393, in check_error\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions DBNonExistentDatabase: (pymysql.err.InternalError) (1049, u\"Unknown database 'nova_cell0'\")\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions\n2017-01-24 19:51:27.202 INFO nova.api.openstack.wsgi [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/1659129", 
    "owner": "None", 
    "id": 1659129, 
    "index": 6636, 
    "created": "2017-01-24 22:30:11.306091+00:00", 
    "title": "n-api throws exception when listing servers", 
    "comments": [
        {
            "content": "When I tried to list all servers, n-api throws exception complaining about \"Unknow database exception\". I am using master branch TOT version. \n\nnicira@htb-1n-eng-dhcp8:~/devstack$ openstack server list\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'oslo_db.exception.DBNonExistentDatabase'> (HTTP 500) (Request-ID: req-4c779421-1c75-4e0a-b46f-ca2fe4995c25)\n\n\nn-api log:\n2017-01-24 19:51:27.176 DEBUG nova.compute.api [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] Searching by: {'deleted': False, 'project_id': u'c1c62ff8a14348108d4519c65c3db3e1'} from (pid=9385) get_all /opt/stack/nova/nova/compute/api.py:2331\n2017-01-24 19:51:27.194 ERROR nova.api.openstack.extensions [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] Unexpected exception in API method\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions Traceback (most recent call last):\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 209, in detail\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/servers.py\", line 344, in _get_servers\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 2416, in get_all\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 2493, in _get_instances_by_filters\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     expected_attrs=fields, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/objects/instance.py\", line 1220, in get_by_filters\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     use_slave=use_slave, sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/opt/stack/nova/nova/db/sqlalchemy/api.py\", line 235, in wrapper\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     with reader_mode.using(context):\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.gen.next()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 944, in _transaction_scope\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     allow_async=self._allow_async) as resource:\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.gen.next()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 558, in _session\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     bind=self.connection, mode=self.mode)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 317, in _create_session2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._start()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 403, in _start\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     engine_args, maker_args)2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/enginefacade.py\", line 427, in _setup_for_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     sql_connection=sql_connection, **engine_kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     test_conn = _test_connection(engine, max_retries, retry_interval)2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return engine.connect()2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self._connection_cls(self, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     if connection is not None else engine.raw_connection()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     e, dialect, self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb, cause=cause)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return fn()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 480, in checkout\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     rec = pool._do_get()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._dec_overflow()2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 1057, in _do_get2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self._create_connection()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return _ConnectionRecord(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 449, in __init__2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.connection = self.__connect()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/pool.py\", line 607, in __connect2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/__init__.py\", line 90, in Connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 688, in __init__\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self.connect()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 906, in connect\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     self._request_authentication()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 1114, in _request_authentication\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 981, in _read_packet\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     packet.check_error()\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/connections.py\", line 393, in check_error\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions DBNonExistentDatabase: (pymysql.err.InternalError) (1049, u\"Unknown database 'nova_cell0'\")\n2017-01-24 19:51:27.194 TRACE nova.api.openstack.extensions\n2017-01-24 19:51:27.202 INFO nova.api.openstack.wsgi [req-4c779421-1c75-4e0a-b46f-ca2fe4995c25 demo demo] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.", 
            "date_created": "2017-01-24 22:30:11.306091+00:00", 
            "author": "https://api.launchpad.net/1.0/~liutong"
        }, 
        {
            "content": "The stack trace says \"Unknown database 'nova_cell0'\". Latest version of Nova now requires to create a  nova_cell0 DB. Please create it, and/or look how DevStack is setting this up.", 
            "date_created": "2017-01-27 11:28:42.652736+00:00", 
            "author": "https://api.launchpad.net/1.0/~jordan-pittier"
        }, 
        {
            "content": "maybe you could delete some information in nova_api database,as follows:\n\nmysql> select * from cell_mappings;\n+---------------------+------------+----+--------------------------------------+-------+---------------+------------------------------------------------------------------+\n| created_at          | updated_at | id | uuid                                 | name  | transport_url | database_connection                                              |\n+---------------------+------------+----+--------------------------------------+-------+---------------+------------------------------------------------------------------+\n| 2017-03-09 06:46:36 | NULL       |  1 | 00000000-0000-0000-0000-000000000000 | cell0 | none:///      | mysql+pymysql://root:stackdb@192.168.0.7/nova_cell0?charset=utf8 |\n+---------------------+------------+----+--------------------------------------+-------+---------------+------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nmysql> delete from cell_mappings where id=1;\nQuery OK, 1 row affected (0.01 sec)\n\nthen restart openstack-nova-api\n", 
            "date_created": "2017-03-10 08:28:06.441448+00:00", 
            "author": "https://api.launchpad.net/1.0/~wangyuwei"
        }
    ]
}