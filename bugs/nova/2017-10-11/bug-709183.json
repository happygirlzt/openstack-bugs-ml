{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:55:39.154086+00:00", 
    "description": "Attempting to go from Austin to Bexar, yields:\n\nroot@umltest:~# nova-manage db sync\n2011-01-28 11:29:36,011 INFO migrate.versioning.api [-] 0 -> 1... \n2011-01-28 11:29:36,042 INFO nova.root [-] Table('auth_tokens', MetaData(Engine(sqlite:////var/lib/nova/nova.sqlite)), Column('created_at', DateTime(timezone=False), table=<auth_tokens>), Column('updated_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted', Boolean(create_constraint=True, name=None), table=<auth_tokens>), Column('token_hash', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>, primary_key=True, nullable=False), Column('user_id', Integer(), table=<auth_tokens>), Column('server_manageent_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('storage_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('cdn_management_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), schema=None)\n2011-01-28 11:29:36,043 ERROR nova.root [-] Exception while creating table\n(nova.root): TRACE: Traceback (most recent call last):\n(nova.root): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n(nova.root): TRACE:     table.create()\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n(nova.root): TRACE:     bind.create(self, checkfirst=checkfirst)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n(nova.root): TRACE:     connection=connection, **kwargs)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n(nova.root): TRACE:     **kwargs).traverse_single(element)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n(nova.root): TRACE:     return meth(obj, **kw)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n(nova.root): TRACE:     self.connection.execute(schema.CreateTable(table))\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n(nova.root): TRACE:     params)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n(nova.root): TRACE:     return self.__execute_context(context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n(nova.root): TRACE:     context.parameters[0], context=context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n(nova.root): TRACE:     context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n(nova.root): TRACE:     context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n(nova.root): TRACE:     cursor.execute(statement, parameters)\n(nova.root): TRACE: OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n(nova.root): TRACE: \nTraceback (most recent call last):\n  File \"/usr/bin/nova-manage\", line 694, in <module>\n    main()\n  File \"/usr/bin/nova-manage\", line 686, in main\n    fn(*argv)\n  File \"/usr/bin/nova-manage\", line 565, in sync\n    return migration.db_sync(version)\n  File \"/usr/lib/pymodules/python2.6/nova/db/migration.py\", line 33, in db_sync\n    return IMPL.db_sync(version=version)\n  File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migration.py\", line 33, in db_sync\n    return versioning_api.upgrade(FLAGS.sql_connection, repo_path, version)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 185, in upgrade\n    return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n  File \"<string>\", line 2, in _migrate\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/util/__init__.py\", line 160, in with_engine\n    return f(*a, **kw)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 364, in _migrate\n    schema.runchange(ver, change, changeset.step)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/schema.py\", line 83, in runchange\n    change.run(self.engine, step)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/script/py.py\", line 140, in run\n    script_func(engine)\n  File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n    table.create()\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n    bind.create(self, checkfirst=checkfirst)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n    connection=connection, **kwargs)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n    self.connection.execute(schema.CreateTable(table))\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n    params)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n    return self.__execute_context(context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n\n\nI'm guessing this is because migrate can't tell that it's already at schema version 1.", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/709183", 
    "owner": "https://api.launchpad.net/1.0/~termie", 
    "id": 709183, 
    "index": 342, 
    "created": "2011-01-28 11:32:12.683350+00:00", 
    "title": "Upgrades from Austin fail", 
    "comments": [
        {
            "content": "Attempting to go from Austin to Bexar, yields:\n\nroot@umltest:~# nova-manage db sync\n2011-01-28 11:29:36,011 INFO migrate.versioning.api [-] 0 -> 1... \n2011-01-28 11:29:36,042 INFO nova.root [-] Table('auth_tokens', MetaData(Engine(sqlite:////var/lib/nova/nova.sqlite)), Column('created_at', DateTime(timezone=False), table=<auth_tokens>), Column('updated_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted', Boolean(create_constraint=True, name=None), table=<auth_tokens>), Column('token_hash', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>, primary_key=True, nullable=False), Column('user_id', Integer(), table=<auth_tokens>), Column('server_manageent_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('storage_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('cdn_management_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), schema=None)\n2011-01-28 11:29:36,043 ERROR nova.root [-] Exception while creating table\n(nova.root): TRACE: Traceback (most recent call last):\n(nova.root): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n(nova.root): TRACE:     table.create()\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n(nova.root): TRACE:     bind.create(self, checkfirst=checkfirst)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n(nova.root): TRACE:     connection=connection, **kwargs)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n(nova.root): TRACE:     **kwargs).traverse_single(element)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n(nova.root): TRACE:     return meth(obj, **kw)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n(nova.root): TRACE:     self.connection.execute(schema.CreateTable(table))\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n(nova.root): TRACE:     params)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n(nova.root): TRACE:     return self.__execute_context(context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n(nova.root): TRACE:     context.parameters[0], context=context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n(nova.root): TRACE:     context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n(nova.root): TRACE:     context)\n(nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n(nova.root): TRACE:     cursor.execute(statement, parameters)\n(nova.root): TRACE: OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n(nova.root): TRACE: \nTraceback (most recent call last):\n  File \"/usr/bin/nova-manage\", line 694, in <module>\n    main()\n  File \"/usr/bin/nova-manage\", line 686, in main\n    fn(*argv)\n  File \"/usr/bin/nova-manage\", line 565, in sync\n    return migration.db_sync(version)\n  File \"/usr/lib/pymodules/python2.6/nova/db/migration.py\", line 33, in db_sync\n    return IMPL.db_sync(version=version)\n  File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migration.py\", line 33, in db_sync\n    return versioning_api.upgrade(FLAGS.sql_connection, repo_path, version)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 185, in upgrade\n    return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n  File \"<string>\", line 2, in _migrate\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/util/__init__.py\", line 160, in with_engine\n    return f(*a, **kw)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 364, in _migrate\n    schema.runchange(ver, change, changeset.step)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/schema.py\", line 83, in runchange\n    change.run(self.engine, step)\n  File \"/usr/lib/pymodules/python2.6/migrate/versioning/script/py.py\", line 140, in run\n    script_func(engine)\n  File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n    table.create()\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n    bind.create(self, checkfirst=checkfirst)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n    connection=connection, **kwargs)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n    **kwargs).traverse_single(element)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n    return meth(obj, **kw)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n    self.connection.execute(schema.CreateTable(table))\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n    params)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n    return self.__execute_context(context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n    context.parameters[0], context=context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n    context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n    context)\n  File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n\n\nI'm guessing this is because migrate can't tell that it's already at schema version 1.", 
            "date_created": "2011-01-28 11:32:12.683350+00:00", 
            "author": "https://api.launchpad.net/1.0/~soren"
        }, 
        {
            "content": "This really should be Critical, not High, IMHO.\n\nCheers,\njay\n\nOn Fri, Jan 28, 2011 at 7:11 AM, Thierry Carrez <email address hidden> wrote:\n> ** Changed in: nova\n> \u00a0 Importance: Undecided => High\n>\n> ** Changed in: nova\n> \u00a0 \u00a0 \u00a0 Status: New => Confirmed\n>\n> ** Changed in: nova\n> \u00a0 \u00a0Milestone: None => bexar-rc\n>\n> --\n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/709183\n>\n> Title:\n> \u00a0Upgrades from Austin fail\n>\n", 
            "date_created": "2011-01-28 14:21:28+00:00", 
            "author": "https://api.launchpad.net/1.0/~jaypipes"
        }, 
        {
            "content": "It's High because you can workaround it... But I agree it's definitely RC material (because it's a painful workaround, and needs to be fixed before release rather than after)", 
            "date_created": "2011-01-28 19:38:18.994358+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "This is going to be a common problem for anyone using austin.  We should create an upgrade script in tools/.  \n\nThe problem is the schema exists but there is no obvious way for nova to know this.  There is a way in sqlalchemy to \"fake\" upgrade and have it only update the schema version.  \n\nFor people running random versions from trunk along the way, this isn't really an option.  But we really should go out of our way to provide an official upgrade path using the method describe above, or similar.\n\nDevin\n\n\nOn Jan 28, 2011, at 11:38 AM, Thierry Carrez wrote:\n\n> It's High because you can workaround it... But I agree it's definitely\n> RC material (because it's a painful workaround, and needs to be fixed\n> before release rather than after)\n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/709183\n> \n> Title:\n>  Upgrades from Austin fail\n> \n> Status in OpenStack Compute (Nova):\n>  Confirmed\n> \n> Bug description:\n>  Attempting to go from Austin to Bexar, yields:\n> \n>  root@umltest:~# nova-manage db sync\n>  2011-01-28 11:29:36,011 INFO migrate.versioning.api [-] 0 -> 1... \n>  2011-01-28 11:29:36,042 INFO nova.root [-] Table('auth_tokens', MetaData(Engine(sqlite:////var/lib/nova/nova.sqlite)), Column('created_at', DateTime(timezone=False), table=<auth_tokens>), Column('updated_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted', Boolean(create_constraint=True, name=None), table=<auth_tokens>), Column('token_hash', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>, primary_key=True, nullable=False), Column('user_id', Integer(), table=<auth_tokens>), Column('server_manageent_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('storage_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('cdn_management_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), schema=None)\n>  2011-01-28 11:29:36,043 ERROR nova.root [-] Exception while creating table\n>  (nova.root): TRACE: Traceback (most recent call last):\n>  (nova.root): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>  (nova.root): TRACE:     table.create()\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>  (nova.root): TRACE:     bind.create(self, checkfirst=checkfirst)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>  (nova.root): TRACE:     connection=connection, **kwargs)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>  (nova.root): TRACE:     **kwargs).traverse_single(element)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>  (nova.root): TRACE:     return meth(obj, **kw)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>  (nova.root): TRACE:     self.connection.execute(schema.CreateTable(table))\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>  (nova.root): TRACE:     params)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>  (nova.root): TRACE:     return self.__execute_context(context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>  (nova.root): TRACE:     context.parameters[0], context=context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>  (nova.root): TRACE:     context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>  (nova.root): TRACE:     context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>  (nova.root): TRACE:     cursor.execute(statement, parameters)\n>  (nova.root): TRACE: OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n>  (nova.root): TRACE: \n>  Traceback (most recent call last):\n>    File \"/usr/bin/nova-manage\", line 694, in <module>\n>      main()\n>    File \"/usr/bin/nova-manage\", line 686, in main\n>      fn(*argv)\n>    File \"/usr/bin/nova-manage\", line 565, in sync\n>      return migration.db_sync(version)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/migration.py\", line 33, in db_sync\n>      return IMPL.db_sync(version=version)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migration.py\", line 33, in db_sync\n>      return versioning_api.upgrade(FLAGS.sql_connection, repo_path, version)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 185, in upgrade\n>      return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n>    File \"<string>\", line 2, in _migrate\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/util/__init__.py\", line 160, in with_engine\n>      return f(*a, **kw)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 364, in _migrate\n>      schema.runchange(ver, change, changeset.step)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/schema.py\", line 83, in runchange\n>      change.run(self.engine, step)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/script/py.py\", line 140, in run\n>      script_func(engine)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>      table.create()\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>      bind.create(self, checkfirst=checkfirst)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>      connection=connection, **kwargs)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>      **kwargs).traverse_single(element)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>      return meth(obj, **kw)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>      self.connection.execute(schema.CreateTable(table))\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>      params)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>      return self.__execute_context(context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>      context.parameters[0], context=context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>      context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>      context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>      cursor.execute(statement, parameters)\n>  sqlalchemy.exc.OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n> \n> \n>  I'm guessing this is because migrate can't tell that it's already at schema version 1.\n> \n> \n\n", 
            "date_created": "2011-01-28 19:57:06+00:00", 
            "author": "https://api.launchpad.net/1.0/~devcamcar"
        }, 
        {
            "content": "There is already a migration script in.  This is just a bug in the migration script.\n\n\nOn Jan 28, 2011, at 11:57 AM, Devin Carlen wrote:\n\n> This is going to be a common problem for anyone using austin.  We should\n> create an upgrade script in tools/.\n> \n> The problem is the schema exists but there is no obvious way for nova to\n> know this.  There is a way in sqlalchemy to \"fake\" upgrade and have it\n> only update the schema version.\n> \n> For people running random versions from trunk along the way, this isn't\n> really an option.  But we really should go out of our way to provide an\n> official upgrade path using the method describe above, or similar.\n> \n> Devin\n> \n> \n> On Jan 28, 2011, at 11:38 AM, Thierry Carrez wrote:\n> \n>> It's High because you can workaround it... But I agree it's definitely\n>> RC material (because it's a painful workaround, and needs to be fixed\n>> before release rather than after)\n>> \n>> -- \n>> You received this bug notification because you are a member of Nova Bug\n>> Team, which is subscribed to OpenStack Compute (nova).\n>> https://bugs.launchpad.net/bugs/709183\n>> \n>> Title:\n>> Upgrades from Austin fail\n>> \n>> Status in OpenStack Compute (Nova):\n>> Confirmed\n>> \n>> Bug description:\n>> Attempting to go from Austin to Bexar, yields:\n>> \n>> root@umltest:~# nova-manage db sync\n>> 2011-01-28 11:29:36,011 INFO migrate.versioning.api [-] 0 -> 1... \n>> 2011-01-28 11:29:36,042 INFO nova.root [-] Table('auth_tokens', MetaData(Engine(sqlite:////var/lib/nova/nova.sqlite)), Column('created_at', DateTime(timezone=False), table=<auth_tokens>), Column('updated_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted', Boolean(create_constraint=True, name=None), table=<auth_tokens>), Column('token_hash', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>, primary_key=True, nullable=False), Column('user_id', Integer(), table=<auth_tokens>), Column('server_manageent_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('storage_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('cdn_management_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), schema=None)\n>> 2011-01-28 11:29:36,043 ERROR nova.root [-] Exception while creating table\n>> (nova.root): TRACE: Traceback (most recent call last):\n>> (nova.root): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>> (nova.root): TRACE:     table.create()\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>> (nova.root): TRACE:     bind.create(self, checkfirst=checkfirst)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>> (nova.root): TRACE:     connection=connection, **kwargs)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>> (nova.root): TRACE:     **kwargs).traverse_single(element)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>> (nova.root): TRACE:     return meth(obj, **kw)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>> (nova.root): TRACE:     self.connection.execute(schema.CreateTable(table))\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>> (nova.root): TRACE:     params)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>> (nova.root): TRACE:     return self.__execute_context(context)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>> (nova.root): TRACE:     context.parameters[0], context=context)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>> (nova.root): TRACE:     context)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>> (nova.root): TRACE:     context)\n>> (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>> (nova.root): TRACE:     cursor.execute(statement, parameters)\n>> (nova.root): TRACE: OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n>> (nova.root): TRACE: \n>> Traceback (most recent call last):\n>>   File \"/usr/bin/nova-manage\", line 694, in <module>\n>>     main()\n>>   File \"/usr/bin/nova-manage\", line 686, in main\n>>     fn(*argv)\n>>   File \"/usr/bin/nova-manage\", line 565, in sync\n>>     return migration.db_sync(version)\n>>   File \"/usr/lib/pymodules/python2.6/nova/db/migration.py\", line 33, in db_sync\n>>     return IMPL.db_sync(version=version)\n>>   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migration.py\", line 33, in db_sync\n>>     return versioning_api.upgrade(FLAGS.sql_connection, repo_path, version)\n>>   File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 185, in upgrade\n>>     return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n>>   File \"<string>\", line 2, in _migrate\n>>   File \"/usr/lib/pymodules/python2.6/migrate/versioning/util/__init__.py\", line 160, in with_engine\n>>     return f(*a, **kw)\n>>   File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 364, in _migrate\n>>     schema.runchange(ver, change, changeset.step)\n>>   File \"/usr/lib/pymodules/python2.6/migrate/versioning/schema.py\", line 83, in runchange\n>>     change.run(self.engine, step)\n>>   File \"/usr/lib/pymodules/python2.6/migrate/versioning/script/py.py\", line 140, in run\n>>     script_func(engine)\n>>   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>>     table.create()\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>>     bind.create(self, checkfirst=checkfirst)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>>     connection=connection, **kwargs)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>>     **kwargs).traverse_single(element)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>>     return meth(obj, **kw)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>>     self.connection.execute(schema.CreateTable(table))\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>>     params)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>>     return self.__execute_context(context)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>>     context.parameters[0], context=context)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>>     context)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>>     context)\n>>   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>>     cursor.execute(statement, parameters)\n>> sqlalchemy.exc.OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n>> \n>> \n>> I'm guessing this is because migrate can't tell that it's already at schema version 1.\n>> \n>> \n> \n> -- \n> You received this bug notification because you are a member of Nova Bug\n> Team, which is subscribed to OpenStack Compute (nova).\n> https://bugs.launchpad.net/bugs/709183\n> \n> Title:\n>  Upgrades from Austin fail\n> \n> Status in OpenStack Compute (Nova):\n>  Confirmed\n> \n> Bug description:\n>  Attempting to go from Austin to Bexar, yields:\n> \n>  root@umltest:~# nova-manage db sync\n>  2011-01-28 11:29:36,011 INFO migrate.versioning.api [-] 0 -> 1... \n>  2011-01-28 11:29:36,042 INFO nova.root [-] Table('auth_tokens', MetaData(Engine(sqlite:////var/lib/nova/nova.sqlite)), Column('created_at', DateTime(timezone=False), table=<auth_tokens>), Column('updated_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted_at', DateTime(timezone=False), table=<auth_tokens>), Column('deleted', Boolean(create_constraint=True, name=None), table=<auth_tokens>), Column('token_hash', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>, primary_key=True, nullable=False), Column('user_id', Integer(), table=<auth_tokens>), Column('server_manageent_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('storage_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), Column('cdn_management_url', String(length=255, convert_unicode=False, assert_unicode=None, unicode_error=None, _warn_on_bytestring=False), table=<auth_tokens>), schema=None)\n>  2011-01-28 11:29:36,043 ERROR nova.root [-] Exception while creating table\n>  (nova.root): TRACE: Traceback (most recent call last):\n>  (nova.root): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>  (nova.root): TRACE:     table.create()\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>  (nova.root): TRACE:     bind.create(self, checkfirst=checkfirst)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>  (nova.root): TRACE:     connection=connection, **kwargs)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>  (nova.root): TRACE:     **kwargs).traverse_single(element)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>  (nova.root): TRACE:     return meth(obj, **kw)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>  (nova.root): TRACE:     self.connection.execute(schema.CreateTable(table))\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>  (nova.root): TRACE:     params)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>  (nova.root): TRACE:     return self.__execute_context(context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>  (nova.root): TRACE:     context.parameters[0], context=context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>  (nova.root): TRACE:     context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>  (nova.root): TRACE:     context)\n>  (nova.root): TRACE:   File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>  (nova.root): TRACE:     cursor.execute(statement, parameters)\n>  (nova.root): TRACE: OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n>  (nova.root): TRACE: \n>  Traceback (most recent call last):\n>    File \"/usr/bin/nova-manage\", line 694, in <module>\n>      main()\n>    File \"/usr/bin/nova-manage\", line 686, in main\n>      fn(*argv)\n>    File \"/usr/bin/nova-manage\", line 565, in sync\n>      return migration.db_sync(version)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/migration.py\", line 33, in db_sync\n>      return IMPL.db_sync(version=version)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migration.py\", line 33, in db_sync\n>      return versioning_api.upgrade(FLAGS.sql_connection, repo_path, version)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 185, in upgrade\n>      return _migrate(url, repository, version, upgrade=True, err=err, **opts)\n>    File \"<string>\", line 2, in _migrate\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/util/__init__.py\", line 160, in with_engine\n>      return f(*a, **kw)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/api.py\", line 364, in _migrate\n>      schema.runchange(ver, change, changeset.step)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/schema.py\", line 83, in runchange\n>      change.run(self.engine, step)\n>    File \"/usr/lib/pymodules/python2.6/migrate/versioning/script/py.py\", line 140, in run\n>      script_func(engine)\n>    File \"/usr/lib/pymodules/python2.6/nova/db/sqlalchemy/migrate_repo/versions/001_austin.py\", line 532, in upgrade\n>      table.create()\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/schema.py\", line 439, in create\n>      bind.create(self, checkfirst=checkfirst)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1647, in create\n>      connection=connection, **kwargs)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1682, in _run_visitor\n>      **kwargs).traverse_single(element)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/sql/visitors.py\", line 77, in traverse_single\n>      return meth(obj, **kw)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/ddl.py\", line 58, in visit_table\n>      self.connection.execute(schema.CreateTable(table))\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1157, in execute\n>      params)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1210, in _execute_ddl\n>      return self.__execute_context(context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1268, in __execute_context\n>      context.parameters[0], context=context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1367, in _cursor_execute\n>      context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/base.py\", line 1360, in _cursor_execute\n>      context)\n>    File \"/usr/lib/python2.6/dist-packages/sqlalchemy/engine/default.py\", line 288, in do_execute\n>      cursor.execute(statement, parameters)\n>  sqlalchemy.exc.OperationalError: (OperationalError) table auth_tokens already exists u'\\nCREATE TABLE auth_tokens (\\n\\tcreated_at DATETIME, \\n\\tupdated_at DATETIME, \\n\\tdeleted_at DATETIME, \\n\\tdeleted BOOLEAN, \\n\\ttoken_hash VARCHAR(255) NOT NULL, \\n\\tuser_id INTEGER, \\n\\tserver_manageent_url VARCHAR(255), \\n\\tstorage_url VARCHAR(255), \\n\\tcdn_management_url VARCHAR(255), \\n\\tPRIMARY KEY (token_hash), \\n\\tCHECK (deleted IN (0, 1))\\n)\\n\\n' ()\n> \n> \n>  I'm guessing this is because migrate can't tell that it's already at schema version 1.\n> \n> \n\n", 
            "date_created": "2011-01-28 20:28:37+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Fix proposed: https://code.launchpad.net/~termie/nova/austin_migration/+merge/47952", 
            "date_created": "2011-01-31 01:17:22.547045+00:00", 
            "author": "https://api.launchpad.net/1.0/~termie"
        }
    ]
}