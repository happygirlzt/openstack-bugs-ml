{
    "status": "Fix Released", 
    "last_updated": "2014-10-16 08:40:39.677290+00:00", 
    "description": "by setting nova.conf:\ncompute_driver = fake.FakeDriver\n\n\nI got  this error on conductor when nova-compute  update_available_resource :\n2014-02-26 08:48:04.631 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: (DataError) invalid input syntax for integer: \"1.0\"\nLINE 1: ...6T07:48:04.627618'::timestamp, hypervisor_version='1.0' WHER...\n                                                             ^\n 'UPDATE compute_nodes SET updated_at=%(updated_at)s, hypervisor_version=%(hypervisor_version)s WHERE compute_nodes.id = %(compute_nodes_id)s' {'hypervisor_version': u'1.0', 'updated_at': datetime.datetime(2014, 2, 26, 7, 48, 4, 627618), 'compute_nodes_id': 1}\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/conductor/manager.py\", line 466, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     result = self.db.compute_node_update(context, node['id'], values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/api.py\", line 228, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return IMPL.compute_node_update(context, compute_id, values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 110, in wrapper\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 166, in wrapped\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 614, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     compute_ref.update(values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 456, in __exit__\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self.commit()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 368, in commit\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self._prepare_impl()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 347, in _prepare_impl\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self.session.flush()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/openstack/common/db/sqlalchemy/session.py\", line 616, in _wrap\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     raise exception.DBError(e)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher DBError: (DataError) invalid input syntax for integer: \"1.0\"\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher LINE 1: ...6T07:48:04.627618'::timestamp, hypervisor_version='1.0' WHER...\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher                                                              ^\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher  'UPDATE compute_nodes SET updated_at=%(updated_at)s, hypervisor_version=%(hypervisor_version)s WHERE compute_nodes.id = %(compute_nodes_id)s' {'hypervisor_version': u'1.0', 'updated_at': datetime.datetime(2014, \n2, 26, 7, 48, 4, 627618), 'compute_nodes_id': 1}", 
    "tags": [], 
    "importance": "Low", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/1285035", 
    "owner": "https://api.launchpad.net/1.0/~jogo", 
    "id": 1285035, 
    "index": 6068, 
    "created": "2014-02-26 08:50:41.622382+00:00", 
    "title": "compute FakeDriver : DBerror invalid input syntax for integer: '1.0'", 
    "comments": [
        {
            "content": "by setting nova.conf:\ncompute_driver = fake.FakeDriver\n\n\nI got  this error on conductor when nova-compute  update_available_resource :\n2014-02-26 08:48:04.631 ERROR oslo.messaging.rpc.dispatcher [-] Exception during message handling: (DataError) invalid input syntax for integer: \"1.0\"\nLINE 1: ...6T07:48:04.627618'::timestamp, hypervisor_version='1.0' WHER...\n                                                             ^\n 'UPDATE compute_nodes SET updated_at=%(updated_at)s, hypervisor_version=%(hypervisor_version)s WHERE compute_nodes.id = %(compute_nodes_id)s' {'hypervisor_version': u'1.0', 'updated_at': datetime.datetime(2014, 2, 26, 7, 48, 4, 627618), 'compute_nodes_id': 1}\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher Traceback (most recent call last):\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 133, in _dispatch_and_reply\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     incoming.message))\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 176, in _dispatch\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return self._do_dispatch(endpoint, method, ctxt, args)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/oslo.messaging/oslo/messaging/rpc/dispatcher.py\", line 122, in _do_dispatch\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     result = getattr(endpoint, method)(ctxt, **new_args)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/conductor/manager.py\", line 466, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     result = self.db.compute_node_update(context, node['id'], values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/api.py\", line 228, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return IMPL.compute_node_update(context, compute_id, values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 110, in wrapper\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 166, in wrapped\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     return f(*args, **kwargs)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/db/sqlalchemy/api.py\", line 614, in compute_node_update\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     compute_ref.update(values)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 456, in __exit__\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self.commit()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 368, in commit\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self._prepare_impl()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 347, in _prepare_impl\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     self.session.flush()\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher   File \"/home/croisets/stack/nova/nova/openstack/common/db/sqlalchemy/session.py\", line 616, in _wrap\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher     raise exception.DBError(e)\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher DBError: (DataError) invalid input syntax for integer: \"1.0\"\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher LINE 1: ...6T07:48:04.627618'::timestamp, hypervisor_version='1.0' WHER...\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher                                                              ^\n2014-02-26 08:48:04.631 TRACE oslo.messaging.rpc.dispatcher  'UPDATE compute_nodes SET updated_at=%(updated_at)s, hypervisor_version=%(hypervisor_version)s WHERE compute_nodes.id = %(compute_nodes_id)s' {'hypervisor_version': u'1.0', 'updated_at': datetime.datetime(2014, \n2, 26, 7, 48, 4, 627618), 'compute_nodes_id': 1}", 
            "date_created": "2014-02-26 08:50:41.622382+00:00", 
            "author": "https://api.launchpad.net/1.0/~swann-w"
        }, 
        {
            "content": "precision : with postgresql backend", 
            "date_created": "2014-02-26 11:04:59.983747+00:00", 
            "author": "https://api.launchpad.net/1.0/~swann-w"
        }, 
        {
            "content": "we don't gate on postgres + fake virt and hypervisor_version should be an int", 
            "date_created": "2014-02-26 16:54:05.877293+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/76582", 
            "date_created": "2014-02-26 17:02:14.620880+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/76582\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=026583e60e9ec2b83049e8ceee16f182560d2562\nSubmitter: Jenkins\nBranch:    master\n\ncommit 026583e60e9ec2b83049e8ceee16f182560d2562\nAuthor: Joe Gordon <email address hidden>\nDate:   Wed Feb 26 14:34:10 2014 -0800\n\n    Make hypervisor_version an int in fakeVirt driver\n    \n    This is a follow up to 9e770e62135fe9c2c8ac0121a5a79245b25a7847, which\n    missed the change in a duplicate copy of host_status.\n    \n    Add regression test to test_virt_drivers.\n    \n    This requires changes to the API samples, because they were wrong. virt\n    drivers use convert_version_to_int which converts a version string to a\n    4 digit number (\"1.0\" becomes to 1000)\n    \n    Change-Id: I28ce23509e3c9feae183a49a8fc5bf3c7c601295\n    Closes-Bug: #1285035\n", 
            "date_created": "2014-07-22 05:27:59.169746+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}