{
    "status": "Won't Fix", 
    "last_updated": "2012-05-30 15:35:34.505330+00:00", 
    "description": "Using: python-boto-2.0-1.fc16.noarch\n\nThis unit test fails:\n\n\n======================================================================\nERROR: test_authorize_revoke_security_group_cidr (nova.tests.test_api.ApiEc2TestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/rbryant/src/openstack/nova/nova/tests/test_api.py\", line 399, in test_authorize_revoke_security_group_cidr\n    group.authorize('icmp', 1, 0, '0.0.0.0/0')\n  File \"/usr/lib/python2.7/site-packages/boto/ec2/securitygroup.py\", line 162, in authorize\n    cidr_ip)\n  File \"/usr/lib/python2.7/site-packages/boto/ec2/connection.py\", line 1889, in authorize_security_group\n    params, verb='POST')\n  File \"/usr/lib/python2.7/site-packages/boto/connection.py\", line 718, in get_status\n    raise self.ResponseError(response.status, response.reason, body)\nEC2ResponseError: EC2ResponseError: 400 Bad Request\n<?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>UnknownError</Code><Message>An unknown error has occurred. Please try your request again.</Message></Error></Errors><RequestID>req-a1b9761a-2681-40f1-a54e-d08568c0e03f</RequestID></Response>\n-------------------- >> begin captured logging << --------------------\n\n... snip ...\n\n\nnova.api.ec2.cloud: AUDIT: Create Security Group didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2: ERROR: Unexpected error raised: 'NoneType' object does not support item assignment\n(nova.api.ec2): TRACE: Traceback (most recent call last):\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/__init__.py\", line 582, in __call__\n(nova.api.ec2): TRACE:     result = api_request.invoke(context)\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/apirequest.py\", line 81, in invoke\n(nova.api.ec2): TRACE:     result = method(context, **args)\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/cloud.py\", line 723, in authorize_security_group_ingress\n(nova.api.ec2): TRACE:     values_for_rule['parent_group_id'] = security_group.id\n(nova.api.ec2): TRACE: TypeError: 'NoneType' object does not support item assignment\n(nova.api.ec2): TRACE: \nnova.api.ec2: ERROR: Environment: {\"SCRIPT_NAME\": \"\", \"REQUEST_METHOD\": \"POST\", \"HTTP_HOST\": \"127.0.0.1:8773\", \"PATH_INFO\": \"/services/Cloud/\", \"QUERY_STRING\": \"\", \"HTTP_ACCEPT\": \"text/html\", \"HTTP_USER_AGENT\": \"Boto/2.0 (linux2)\", \"SERVER_NAME\": \"localhost\", \"SERVER_PROTOCOL\": \"HTTP/1.0\", \"wsgi.url_scheme\": \"http\", \"SERVER_PORT\": \"80\", \"CONTENT_TYPE\": \"application/x-www-form-urlencoded; charset=UTF-8\"}\nnova.api.ec2: ERROR: UnknownError: An unknown error has occurred. Please try your request again.\nboto: ERROR: 400 Bad Request\nboto: ERROR: <?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>UnknownError</Code><Message>An unknown error has occurred. Please try your request again.</Message></Error></Errors><RequestID>req-a1b9761a-2681-40f1-a54e-d08568c0e03f</RequestID></Response>\n--------------------- >> end captured logging << ---------------------\n\n\nThe commit where this started failing was:\n\n\n$ git bisect bad\nc2de5c61b25dccb6d355640e6c8c9eedd94fdef4 is the first bad commit\ncommit c2de5c61b25dccb6d355640e6c8c9eedd94fdef4\nAuthor: Greg Althaus <email address hidden>\nDate:   Fri Mar 16 06:41:54 2012 -0700\n\n    Tweak security port validation for ICMP\n    \n    Horizon allows for ICMP to be type:code.\n    Type and code can be from -1 to 255.\n    \n    API refers to both EC2 and Nova APIs\n    \n    This patch attempts to resolve:\n    1. API code throws exceptations when 0 is passed for either field\n    2. API code validates type:code like from->to range.  type and code\n       are independent\n    3. Update unit tests for this new set of operations.\n    \n    A side effect is that the following are allowed type:code.\n    -1:X\n    X:-1\n    \n    The code assumes that -1 is a wildcard for the field.\n    \n    bug 956967\n    \n    Change-Id: Ieb6989815afc6986b72e0efc7611c2cc353ab5d8", 
    "tags": [], 
    "importance": "Wishlist", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/972491", 
    "owner": "https://api.launchpad.net/1.0/~russellb", 
    "id": 972491, 
    "index": 1233, 
    "created": "2012-04-03 14:31:21.214514+00:00", 
    "title": "Unit test broken with older python-boto", 
    "comments": [
        {
            "content": "Using: python-boto-2.0-1.fc16.noarch\n\nThis unit test fails:\n\n\n======================================================================\nERROR: test_authorize_revoke_security_group_cidr (nova.tests.test_api.ApiEc2TestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/rbryant/src/openstack/nova/nova/tests/test_api.py\", line 399, in test_authorize_revoke_security_group_cidr\n    group.authorize('icmp', 1, 0, '0.0.0.0/0')\n  File \"/usr/lib/python2.7/site-packages/boto/ec2/securitygroup.py\", line 162, in authorize\n    cidr_ip)\n  File \"/usr/lib/python2.7/site-packages/boto/ec2/connection.py\", line 1889, in authorize_security_group\n    params, verb='POST')\n  File \"/usr/lib/python2.7/site-packages/boto/connection.py\", line 718, in get_status\n    raise self.ResponseError(response.status, response.reason, body)\nEC2ResponseError: EC2ResponseError: 400 Bad Request\n<?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>UnknownError</Code><Message>An unknown error has occurred. Please try your request again.</Message></Error></Errors><RequestID>req-a1b9761a-2681-40f1-a54e-d08568c0e03f</RequestID></Response>\n-------------------- >> begin captured logging << --------------------\n\n... snip ...\n\n\nnova.api.ec2.cloud: AUDIT: Create Security Group didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2.cloud: AUDIT: Authorize security group ingress didtrsd\nnova.api.ec2: ERROR: Unexpected error raised: 'NoneType' object does not support item assignment\n(nova.api.ec2): TRACE: Traceback (most recent call last):\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/__init__.py\", line 582, in __call__\n(nova.api.ec2): TRACE:     result = api_request.invoke(context)\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/apirequest.py\", line 81, in invoke\n(nova.api.ec2): TRACE:     result = method(context, **args)\n(nova.api.ec2): TRACE:   File \"/home/rbryant/src/openstack/nova/nova/api/ec2/cloud.py\", line 723, in authorize_security_group_ingress\n(nova.api.ec2): TRACE:     values_for_rule['parent_group_id'] = security_group.id\n(nova.api.ec2): TRACE: TypeError: 'NoneType' object does not support item assignment\n(nova.api.ec2): TRACE: \nnova.api.ec2: ERROR: Environment: {\"SCRIPT_NAME\": \"\", \"REQUEST_METHOD\": \"POST\", \"HTTP_HOST\": \"127.0.0.1:8773\", \"PATH_INFO\": \"/services/Cloud/\", \"QUERY_STRING\": \"\", \"HTTP_ACCEPT\": \"text/html\", \"HTTP_USER_AGENT\": \"Boto/2.0 (linux2)\", \"SERVER_NAME\": \"localhost\", \"SERVER_PROTOCOL\": \"HTTP/1.0\", \"wsgi.url_scheme\": \"http\", \"SERVER_PORT\": \"80\", \"CONTENT_TYPE\": \"application/x-www-form-urlencoded; charset=UTF-8\"}\nnova.api.ec2: ERROR: UnknownError: An unknown error has occurred. Please try your request again.\nboto: ERROR: 400 Bad Request\nboto: ERROR: <?xml version=\"1.0\"?>\n<Response><Errors><Error><Code>UnknownError</Code><Message>An unknown error has occurred. Please try your request again.</Message></Error></Errors><RequestID>req-a1b9761a-2681-40f1-a54e-d08568c0e03f</RequestID></Response>\n--------------------- >> end captured logging << ---------------------\n\n\nThe commit where this started failing was:\n\n\n$ git bisect bad\nc2de5c61b25dccb6d355640e6c8c9eedd94fdef4 is the first bad commit\ncommit c2de5c61b25dccb6d355640e6c8c9eedd94fdef4\nAuthor: Greg Althaus <email address hidden>\nDate:   Fri Mar 16 06:41:54 2012 -0700\n\n    Tweak security port validation for ICMP\n    \n    Horizon allows for ICMP to be type:code.\n    Type and code can be from -1 to 255.\n    \n    API refers to both EC2 and Nova APIs\n    \n    This patch attempts to resolve:\n    1. API code throws exceptations when 0 is passed for either field\n    2. API code validates type:code like from->to range.  type and code\n       are independent\n    3. Update unit tests for this new set of operations.\n    \n    A side effect is that the following are allowed type:code.\n    -1:X\n    X:-1\n    \n    The code assumes that -1 is a wildcard for the field.\n    \n    bug 956967\n    \n    Change-Id: Ieb6989815afc6986b72e0efc7611c2cc353ab5d8", 
            "date_created": "2012-04-03 14:31:21.214514+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "The problem here is a python-boto bug that is fixed in later versions.  It should be sending from_port: 1 and to_port 0.  However, it fails to send to_port at all.\n\nI'm going to submit a patch that makes the exception raised make it more obvious what the problem is.", 
            "date_created": "2012-04-03 15:17:18.821741+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/6179", 
            "date_created": "2012-04-03 18:53:11.476524+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}