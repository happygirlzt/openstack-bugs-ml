{
    "status": "Fix Released", 
    "last_updated": "2011-11-27 06:13:01.596229+00:00", 
    "description": "Starting from a clean system:\n\n# service rabbitmq-server stop && rm -R /var/lib/rabbitmq/mnesia/* && service rabbitmq-server start\nStopping rabbitmq-server: rabbitmq-server.\nStarting rabbitmq-server: SUCCESS\nrabbitmq-server.\n\nAnd then starting nova-compute, nova-api, and nova-objectstore, I get this:\n\n~ $ euca-run-instances $machine --kernel $kernel --ramdisk $ramdisk\nAMQPChannelException: (406, u\"PRECONDITION_FAILED - cannot redeclare exchange 'nova' in vhost '/' with different type, durable or autodelete value\", (40, 10), 'Channel.exchange_declare')", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/609791", 
    "owner": "https://api.launchpad.net/1.0/~ewanmellor", 
    "id": 609791, 
    "index": 1904, 
    "created": "2010-07-25 16:26:52.464539+00:00", 
    "title": "AMQPChannelException when running instance", 
    "comments": [
        {
            "content": "Starting from a clean system:\n\n# service rabbitmq-server stop && rm -R /var/lib/rabbitmq/mnesia/* && service rabbitmq-server start\nStopping rabbitmq-server: rabbitmq-server.\nStarting rabbitmq-server: SUCCESS\nrabbitmq-server.\n\nAnd then starting nova-compute, nova-api, and nova-objectstore, I get this:\n\n~ $ euca-run-instances $machine --kernel $kernel --ramdisk $ramdisk\nAMQPChannelException: (406, u\"PRECONDITION_FAILED - cannot redeclare exchange 'nova' in vhost '/' with different type, durable or autodelete value\", (40, 10), 'Channel.exchange_declare')", 
            "date_created": "2010-07-25 16:26:52.464539+00:00", 
            "author": "https://api.launchpad.net/1.0/~ewanmellor"
        }, 
        {
            "content": "# service rabbitmq-server stop && rm -R /var/lib/rabbitmq/mnesia/* && service rabbitmq-server start\r\nStopping rabbitmq-server: rabbitmq-server.\r\nStarting rabbitmq-server: SUCCESS\r\nAnd then\r\n# start nova-compute\r\n nova-compute start/running, process 4012\r\n#tail -50 nova-compute.log\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\r\n(nova): TRACE:     return self._exit_event.wait()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\r\n(nova): TRACE:     return hubs.get_hub().switch()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\r\n(nova): TRACE:     return self.greenlet.switch()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\r\n(nova): TRACE:     result = function(*args, **kwargs)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 77, in run_server\r\n(nova): TRACE:     server.start()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 161, in start\r\n(nova): TRACE:     self.conn.create_consumer(self.topic, self, fanout=True)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 494, in create_consumer\r\n(nova): TRACE:     self.declare_fanout_consumer(topic, ProxyCallback(proxy))\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 457, in declare_fanout_consumer\r\n(nova): TRACE:     self.declare_consumer(FanoutConsumer, topic, callback)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 394, in declare_consumer\r\n(nova): TRACE:     self.consumer_num.next())\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 210, in __init__\r\n(nova): TRACE:     **options)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 61, in __init__\r\n(nova): TRACE:     self.reconnect(channel)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py\", line 68, in reconnect\r\n(nova): TRACE:     self.queue.declare()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/kombu/entity.py\", line 359, in declare\r\n(nova): TRACE:     return (self.name and self.exchange.declare(nowait),\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/kombu/entity.py\", line 151, in declare\r\n(nova): TRACE:     nowait=nowait)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/kombu/syn.py\", line 14, in blocking\r\n(nova): TRACE:     return __sync_current(fun, *args, **kwargs)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/kombu/syn.py\", line 40, in __eblocking__\r\n(nova): TRACE:     return spawn(fun, *args, **kwargs).wait()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\r\n(nova): TRACE:     return self._exit_event.wait()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\r\n(nova): TRACE:     return hubs.get_hub().switch()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\r\n(nova): TRACE:     return self.greenlet.switch()\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\r\n(nova): TRACE:     result = function(*args, **kwargs)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/channel.py\", line 843, in exchange_declare\r\n(nova): TRACE:     (40, 11),    # Channel.exchange_declare_ok\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/abstract_channel.py\", line 97, in wait\r\n(nova): TRACE:     return self.dispatch_method(method_sig, args, content)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/abstract_channel.py\", line 115, in dispatch_method\r\n(nova): TRACE:     return amqp_method(self, args)\r\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/amqplib/client_0_8/channel.py\", line 273, in _close\r\n(nova): TRACE:     (class_id, method_id))\r\n(nova): TRACE: AMQPChannelException: (406, u\"PRECONDITION_FAILED - cannot redeclare exchange 'compute_fanout' in vhost '/' with different type, durable, internal or autodelete value\", (40, 10), 'Channel.exchange_declare')\r\n(nova): TRACE:\r\nWhy does it come out again? How to solve it? big thx.", 
            "date_created": "2011-11-27 06:12:58.601270+00:00", 
            "author": "https://api.launchpad.net/1.0/~hngydxwxl"
        }
    ]
}