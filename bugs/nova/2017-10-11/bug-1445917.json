{
    "status": "Invalid", 
    "last_updated": "2015-05-29 01:11:28.919654+00:00", 
    "description": "http://logs.openstack.org/82/169782/1/gate/gate-grenade-dsvm-ironic-sideways/d82f6a1/logs/new/screen-n-cpu.txt.gz?level=TRACE#_2015-04-19_08_36_06_412\n\n2015-04-19 08:36:06.209 26279 ERROR nova.virt.ironic.driver [-] Error preparing deploy for instance 85a4a66e-24b0-48a4-ada6-1d29edee7adb on baremetal node f75b4bf9-6e6d-44fb-b4e8-ece394357440.\n2015-04-19 08:36:06.412 26279 ERROR nova.compute.manager [-] [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] Instance failed to spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] Traceback (most recent call last):\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2261, in _build_resources\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     yield resources\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2131, in _build_and_run_instance\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     block_device_info=block_device_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 645, in spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self._cleanup_deploy(context, node, instance, network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     six.reraise(self.type_, self.value, self.tb)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 637, in spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self._plug_vifs(node, instance, network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 900, in _plug_vifs\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     network_info_str = str(network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 467, in __str__\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     return self._sync_wrapper(fn, *args, **kwargs)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 450, in _sync_wrapper\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 482, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self[:] = self._gt.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 173, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     return self._exit_event.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/event.py\", line 125, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     current.throw(*self._exc)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 212, in main\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     result = function(*args, **kwargs)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1661, in _allocate_network_async\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     dhcp_options=dhcp_options)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/neutronv2/api.py\", line 300, in allocate_for_instance\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     instance=instance.uuid)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] PortNotUsable: Port b16075c4-af7a-4795-a26e-8d5eb0b39f49 not usable for instance 85a4a66e-24b0-48a4-ada6-1d29edee7adb.\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] \n\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiSW5zdGFuY2UgZmFpbGVkIHRvIHNwYXduXCIgQU5EIG1lc3NhZ2U6XCJhbGxvY2F0ZV9mb3JfaW5zdGFuY2VcIiBBTkQgbWVzc2FnZTpcIlBvcnROb3RVc2FibGVcIiBBTkQgdGFnczpcInNjcmVlbi1uLWNwdS50eHRcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTQyOTQ0ODM3NjAxN30=\n\n29 hits since 4/17.  This is only on ironic grenade jobs and only on stable/juno.", 
    "tags": [
        "ironic"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1445917", 
    "owner": "None", 
    "id": 1445917, 
    "index": 5513, 
    "created": "2015-04-19 13:04:15.253074+00:00", 
    "title": "(juno) gate-grenade-dsvm-ironic-sideways failing with NoValidHost due to PortNotUsable", 
    "comments": [
        {
            "content": "http://logs.openstack.org/82/169782/1/gate/gate-grenade-dsvm-ironic-sideways/d82f6a1/logs/new/screen-n-cpu.txt.gz?level=TRACE#_2015-04-19_08_36_06_412\n\n2015-04-19 08:36:06.209 26279 ERROR nova.virt.ironic.driver [-] Error preparing deploy for instance 85a4a66e-24b0-48a4-ada6-1d29edee7adb on baremetal node f75b4bf9-6e6d-44fb-b4e8-ece394357440.\n2015-04-19 08:36:06.412 26279 ERROR nova.compute.manager [-] [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] Instance failed to spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] Traceback (most recent call last):\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2261, in _build_resources\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     yield resources\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 2131, in _build_and_run_instance\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     block_device_info=block_device_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 645, in spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self._cleanup_deploy(context, node, instance, network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/openstack/common/excutils.py\", line 82, in __exit__\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     six.reraise(self.type_, self.value, self.tb)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 637, in spawn\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self._plug_vifs(node, instance, network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/virt/ironic/driver.py\", line 900, in _plug_vifs\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     network_info_str = str(network_info)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 467, in __str__\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     return self._sync_wrapper(fn, *args, **kwargs)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 450, in _sync_wrapper\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/model.py\", line 482, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     self[:] = self._gt.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 173, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     return self._exit_event.wait()\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/event.py\", line 125, in wait\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     current.throw(*self._exc)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/usr/local/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 212, in main\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     result = function(*args, **kwargs)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/compute/manager.py\", line 1661, in _allocate_network_async\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     dhcp_options=dhcp_options)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]   File \"/opt/stack/new/nova/nova/network/neutronv2/api.py\", line 300, in allocate_for_instance\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb]     instance=instance.uuid)\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] PortNotUsable: Port b16075c4-af7a-4795-a26e-8d5eb0b39f49 not usable for instance 85a4a66e-24b0-48a4-ada6-1d29edee7adb.\n2015-04-19 08:36:06.412 26279 TRACE nova.compute.manager [instance: 85a4a66e-24b0-48a4-ada6-1d29edee7adb] \n\n\nhttp://logstash.openstack.org/#eyJzZWFyY2giOiJtZXNzYWdlOlwiSW5zdGFuY2UgZmFpbGVkIHRvIHNwYXduXCIgQU5EIG1lc3NhZ2U6XCJhbGxvY2F0ZV9mb3JfaW5zdGFuY2VcIiBBTkQgbWVzc2FnZTpcIlBvcnROb3RVc2FibGVcIiBBTkQgdGFnczpcInNjcmVlbi1uLWNwdS50eHRcIiIsImZpZWxkcyI6W10sIm9mZnNldCI6MCwidGltZWZyYW1lIjoiNjA0ODAwIiwiZ3JhcGhtb2RlIjoiY291bnQiLCJ0aW1lIjp7InVzZXJfaW50ZXJ2YWwiOjB9LCJzdGFtcCI6MTQyOTQ0ODM3NjAxN30=\n\n29 hits since 4/17.  This is only on ironic grenade jobs and only on stable/juno.", 
            "date_created": "2015-04-19 13:04:15.253074+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This backport was merged to stable/juno nova on 4/16, wondering if it's causing problems:\n\nhttps://review.openstack.org/#/c/173226/", 
            "date_created": "2015-04-19 13:07:56.381159+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "e-r query: https://review.openstack.org/#/c/175210/", 
            "date_created": "2015-04-19 13:15:40.729420+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "This is the breaking change: https://review.openstack.org/#/c/162886/", 
            "date_created": "2015-04-19 15:38:09.857688+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Revert: https://review.openstack.org/#/c/175219/", 
            "date_created": "2015-04-19 15:47:03.147536+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/175458", 
            "date_created": "2015-04-20 15:37:55.814896+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/175219\nCommitted: https://git.openstack.org/cgit/openstack/tempest/commit/?id=92b63aa8211b6a54f47c3ec2f1c77abf15017be8\nSubmitter: Jenkins\nBranch:    master\n\ncommit 92b63aa8211b6a54f47c3ec2f1c77abf15017be8\nAuthor: Matt Riedemann <email address hidden>\nDate:   Sun Apr 19 15:45:38 2015 +0000\n\n    Revert \"Test creation of server attached to created port\"\n    \n    This reverts commit 2b34ec3ff444e6e6ec7b3e52832ecd6e8ca20552\n    \n    This breaks gate-grenade-dsvm-ironic-sideways on\n    stable/juno because the requested port's mac address is not\n    in the list of available mac addresses from the ironic\n    driver.\n    \n    It's also unclear how useful this is given we already have\n    the test_preserve_preexisting_port test which is\n    essentially testing the same scenario, except it's not\n    run on stable/icehouse or stable/juno since preserving\n    pre-existing ports in nova wasn't fixed until Kilo.\n    \n    Change-Id: I24403c1ae734b2137ddee5c3bf5a1594cf5375d8\n    Closes-Bug: #1445917\n", 
            "date_created": "2015-04-20 18:58:47.087937+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/175458\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=a4705d8aff9c3d25e8c5b615b7464a1b4488038b\nSubmitter: Jenkins\nBranch:    master\n\ncommit a4705d8aff9c3d25e8c5b615b7464a1b4488038b\nAuthor: Matt Riedemann <email address hidden>\nDate:   Mon Apr 20 08:12:26 2015 -0700\n\n    neutron: log hypervisor_macs before raising PortNotUsable\n    \n    Knowing what the requested port's mac address is and the set of\n    available hypervisor macs are is useful information when the request\n    fails, so log those at debug level.\n    \n    Related-Bug: #1445917\n    \n    Change-Id: Ib7980376fcef9d52d22c9663aa00df6968794711\n", 
            "date_created": "2015-05-29 01:11:28.361252+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}