{
    "status": "Fix Released", 
    "last_updated": "2014-03-22 23:20:44.923074+00:00", 
    "description": "Currently, OpenStack supports  fake virt driver for performance test or POC, for more details please refer to below link: \n\nhttps://review.openstack.org/#/c/31876/\n\nI have installed & configured  such an environment which is multi compute nodes with fake virt driver, the main change is that  update compute driver to fake virt driver in nova.conf  '[DEFAULT]' section on compute node.\n\n compute_driver = nova.virt.fake.FakeDriver\n\n\ndevstack@devstack:~/devstack$ nova service-list\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n| Binary           | Host       | Zone     | Status  | State | Updated_at                 | Disabled Reason |\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n| nova-conductor   | devstack   | internal | enabled | up    | 2013-09-10T00:12:43.000000 | None            |\n| nova-compute     | devstack   | nova     | enabled | down  | 2013-09-09T23:38:02.000000 | None            |    \n| nova-cert        | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-scheduler   | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-network     | devstack   | internal | enabled | up    | 2013-09-10T00:12:39.000000 | None            |\n| nova-consoleauth | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-compute     | 1_xhu_node | nova     | enabled | up    | 2013-09-10T00:12:37.000000 | None            |      >>>> fake compute node\n| nova-compute     | 2_xhu_node | nova     | enabled | up    | 2013-09-10T00:12:36.000000 | None            |     >>>> fake compute node\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n\nI tested  some instance actions, such as boot, stop, start, delete, resize, cold migrate,suspend and resume, all of them work well, but the live migrate failed due to following  error:\n\n\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp     network_info)\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/fake.py\", line 360, in ensure_filtering_rules_for_instance\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp     raise NotImplementedError('This method is supported only by libvirt.')\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp NotImplementedError: This method is supported only by libvirt.\n\nGo through the source code in fake.py, i see the function \"ensure_filtering_rules_for_instance\"  is not implemented, so  i think this is a issue here for live migration,  the fake virt driver should support live migrate action  to match  the hole instance life cycle and  this action also is an useful case for POC and performance test.", 
    "tags": [
        "driver", 
        "fake", 
        "virt"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1223090", 
    "owner": "https://api.launchpad.net/1.0/~jake-liu", 
    "id": 1223090, 
    "index": 5867, 
    "created": "2013-09-10 00:29:30.420905+00:00", 
    "title": "The fake compute driver dosen't support live migration", 
    "comments": [
        {
            "content": "Currently, OpenStack supports  fake virt driver for performance test or POC, for more details please refer to below link: \n\nhttps://review.openstack.org/#/c/31876/\n\nI have installed & configured  such an environment which is multi compute nodes with fake virt driver, the main change is that  update compute driver to fake virt driver in nova.conf  '[DEFAULT]' section on compute node.\n\n compute_driver = nova.virt.fake.FakeDriver\n\n\ndevstack@devstack:~/devstack$ nova service-list\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n| Binary           | Host       | Zone     | Status  | State | Updated_at                 | Disabled Reason |\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n| nova-conductor   | devstack   | internal | enabled | up    | 2013-09-10T00:12:43.000000 | None            |\n| nova-compute     | devstack   | nova     | enabled | down  | 2013-09-09T23:38:02.000000 | None            |    \n| nova-cert        | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-scheduler   | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-network     | devstack   | internal | enabled | up    | 2013-09-10T00:12:39.000000 | None            |\n| nova-consoleauth | devstack   | internal | enabled | up    | 2013-09-10T00:12:41.000000 | None            |\n| nova-compute     | 1_xhu_node | nova     | enabled | up    | 2013-09-10T00:12:37.000000 | None            |      >>>> fake compute node\n| nova-compute     | 2_xhu_node | nova     | enabled | up    | 2013-09-10T00:12:36.000000 | None            |     >>>> fake compute node\n+------------------+------------+----------+---------+-------+----------------------------+-----------------+\n\nI tested  some instance actions, such as boot, stop, start, delete, resize, cold migrate,suspend and resume, all of them work well, but the live migrate failed due to following  error:\n\n\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp     network_info)\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp   File \"/opt/stack/nova/nova/virt/fake.py\", line 360, in ensure_filtering_rules_for_instance\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp     raise NotImplementedError('This method is supported only by libvirt.')\n2013-09-10 08:16:49.084 TRACE nova.openstack.common.rpc.amqp NotImplementedError: This method is supported only by libvirt.\n\nGo through the source code in fake.py, i see the function \"ensure_filtering_rules_for_instance\"  is not implemented, so  i think this is a issue here for live migration,  the fake virt driver should support live migrate action  to match  the hole instance life cycle and  this action also is an useful case for POC and performance test.", 
            "date_created": "2013-09-10 00:29:30.420905+00:00", 
            "author": "https://api.launchpad.net/1.0/~xlhuxa"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/45882", 
            "date_created": "2013-09-10 14:05:21.330574+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/45882\nCommitted: http://github.com/openstack/nova/commit/3e16f222995290ccbdcec2f4e8b302ebe47b809b\nSubmitter: Jenkins\nBranch:    master\n\ncommit 3e16f222995290ccbdcec2f4e8b302ebe47b809b\nAuthor: Jake Liu <email address hidden>\nDate:   Tue Sep 10 10:02:56 2013 -0400\n\n    Enable fake driver can live migration\n    \n    Now two methods of virt/fake.py does not implemented\n    1) ensure_filtering_rules_for_instance\n    2) unfilter_instance\n    \n    Also the method live_migration does not call\n    post_live_migration_at_destination, this will cause compute\n    driver has no chance to update task state for the VM in DB.\n    \n    Fix bug 1223090\n    \n    Change-Id: I2fe552faa5f73b47b97e8fefc5c4de04d6785f8c\n", 
            "date_created": "2013-09-19 20:44:28.872285+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}