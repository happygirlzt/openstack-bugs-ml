{
    "status": "Fix Released", 
    "last_updated": "2015-12-03 21:35:32.148683+00:00", 
    "description": "Some negative tempest test cases fail when nova is ran by Apache(NOVA_USE_MOD_WSGI=True).\nFor example:\n2015-09-08 09:30:29.696 | tempest.api.compute.admin.test_hosts_negative.HostsAdminNegativeTestJSON.test_update_host_with_invalid_maintenance_mode[id-ab1e230e-5e22-41a9-8699-82b9947915d4,negative]\n2015-09-08 09:30:29.697 | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n2015-09-08 09:30:29.697 | \n2015-09-08 09:30:29.697 | Captured traceback:\n2015-09-08 09:30:29.697 | ~~~~~~~~~~~~~~~~~~~\n2015-09-08 09:30:29.697 |     Traceback (most recent call last):\n2015-09-08 09:30:29.697 |       File \"tempest/api/compute/admin/test_hosts_negative.py\", line 95, in test_update_host_with_invalid_maintenance_mode\n2015-09-08 09:30:29.697 |         maintenance_mode='invalid')\n2015-09-08 09:30:29.697 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 422, in assertRaises\n2015-09-08 09:30:29.697 |         self.assertThat(our_callable, matcher)\n2015-09-08 09:30:29.697 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 433, in assertThat\n2015-09-08 09:30:29.698 |         mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 483, in _matchHelper\n2015-09-08 09:30:29.698 |         mismatch = matcher.match(matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n2015-09-08 09:30:29.698 |         mismatch = self.exception_matcher.match(exc_info)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n2015-09-08 09:30:29.698 |         mismatch = matcher.match(matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 414, in match\n2015-09-08 09:30:29.698 |         reraise(*matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n2015-09-08 09:30:29.698 |         result = matchee()\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 969, in __call__\n2015-09-08 09:30:29.699 |         return self._callable_object(*self._args, **self._kwargs)\n2015-09-08 09:30:29.699 |       File \"tempest/services/compute/json/hosts_client.py\", line 54, in update_host\n2015-09-08 09:30:29.699 |         resp, body = self.put(\"os-hosts/%s\" % hostname, request_body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 319, in put\n2015-09-08 09:30:29.699 |         return self.request('PUT', url, extra_headers, headers, body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 643, in request\n2015-09-08 09:30:29.699 |         resp, resp_body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 680, in _error_checker\n2015-09-08 09:30:29.699 |         raise exceptions.UnexpectedContentType(str(resp.status))\n2015-09-08 09:30:29.699 |     tempest_lib.exceptions.UnexpectedContentType: Unexpected content type provided\n2015-09-08 09:30:29.699 |     Details: 500\n\nRoot cause of this - nova doesn't attach textual phrase after error code in status line of HTTP response.\nBut there is a strict rule about constructing status line for HTTP:\n'...Status-Line, consisting of the protocol version followed by a numeric status code and its associated textual phrase, with each element separated by SP characters' (http://www.faqs.org/rfcs/rfc2616.html)", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1496055", 
    "owner": "https://api.launchpad.net/1.0/~mhorban", 
    "id": 1496055, 
    "index": 579, 
    "created": "2015-09-15 16:54:26.748127+00:00", 
    "title": "Status-line of HTTP responce is wrong", 
    "comments": [
        {
            "content": "Some negative tempest test cases fail when nova is ran by Apache(NOVA_USE_MOD_WSGI=True).\nFor example:\n2015-09-08 09:30:29.696 | tempest.api.compute.admin.test_hosts_negative.HostsAdminNegativeTestJSON.test_update_host_with_invalid_maintenance_mode[id-ab1e230e-5e22-41a9-8699-82b9947915d4,negative]\n2015-09-08 09:30:29.697 | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n2015-09-08 09:30:29.697 | \n2015-09-08 09:30:29.697 | Captured traceback:\n2015-09-08 09:30:29.697 | ~~~~~~~~~~~~~~~~~~~\n2015-09-08 09:30:29.697 |     Traceback (most recent call last):\n2015-09-08 09:30:29.697 |       File \"tempest/api/compute/admin/test_hosts_negative.py\", line 95, in test_update_host_with_invalid_maintenance_mode\n2015-09-08 09:30:29.697 |         maintenance_mode='invalid')\n2015-09-08 09:30:29.697 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 422, in assertRaises\n2015-09-08 09:30:29.697 |         self.assertThat(our_callable, matcher)\n2015-09-08 09:30:29.697 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 433, in assertThat\n2015-09-08 09:30:29.698 |         mismatch_error = self._matchHelper(matchee, matcher, message, verbose)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 483, in _matchHelper\n2015-09-08 09:30:29.698 |         mismatch = matcher.match(matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 108, in match\n2015-09-08 09:30:29.698 |         mismatch = self.exception_matcher.match(exc_info)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_higherorder.py\", line 62, in match\n2015-09-08 09:30:29.698 |         mismatch = matcher.match(matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 414, in match\n2015-09-08 09:30:29.698 |         reraise(*matchee)\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/matchers/_exception.py\", line 101, in match\n2015-09-08 09:30:29.698 |         result = matchee()\n2015-09-08 09:30:29.698 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/testtools/testcase.py\", line 969, in __call__\n2015-09-08 09:30:29.699 |         return self._callable_object(*self._args, **self._kwargs)\n2015-09-08 09:30:29.699 |       File \"tempest/services/compute/json/hosts_client.py\", line 54, in update_host\n2015-09-08 09:30:29.699 |         resp, body = self.put(\"os-hosts/%s\" % hostname, request_body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 319, in put\n2015-09-08 09:30:29.699 |         return self.request('PUT', url, extra_headers, headers, body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 643, in request\n2015-09-08 09:30:29.699 |         resp, resp_body)\n2015-09-08 09:30:29.699 |       File \"/opt/stack/new/tempest/.tox/full/local/lib/python2.7/site-packages/tempest_lib/common/rest_client.py\", line 680, in _error_checker\n2015-09-08 09:30:29.699 |         raise exceptions.UnexpectedContentType(str(resp.status))\n2015-09-08 09:30:29.699 |     tempest_lib.exceptions.UnexpectedContentType: Unexpected content type provided\n2015-09-08 09:30:29.699 |     Details: 500\n\nRoot cause of this - nova doesn't attach textual phrase after error code in status line of HTTP response.\nBut there is a strict rule about constructing status line for HTTP:\n'...Status-Line, consisting of the protocol version followed by a numeric status code and its associated textual phrase, with each element separated by SP characters' (http://www.faqs.org/rfcs/rfc2616.html)", 
            "date_created": "2015-09-15 16:54:26.748127+00:00", 
            "author": "https://api.launchpad.net/1.0/~mhorban"
        }, 
        {
            "content": "Fix proposed in https://review.openstack.org/#/c/223235/", 
            "date_created": "2015-09-15 16:55:42.824541+00:00", 
            "author": "https://api.launchpad.net/1.0/~mhorban"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/231438", 
            "date_created": "2015-10-06 11:54:50.435566+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/231438\nCommitted: https://git.openstack.org/cgit/openstack/cinder/commit/?id=17802086f6c4ac846cdf5d9bfe8d4eb4908cc8ff\nSubmitter: Jenkins\nBranch:    master\n\ncommit 17802086f6c4ac846cdf5d9bfe8d4eb4908cc8ff\nAuthor: Ivan Kolodyazhny <email address hidden>\nDate:   Tue Oct 6 14:52:53 2015 +0300\n\n    Fix Status-Line in HTTP response\n    \n    There is a strict rule about constructing status line for HTTP:\n    '...Status-Line, consisting of the protocol version followed by a\n    numeric status code and its associated textual phrase, with each\n    element separated by SP characters'\n    (http://www.faqs.org/rfcs/rfc2616.html)\n    \n    This patch coerces filling associated textual phrase.\n    \n    Also removed unused code from cinder/tests/unit/test_exception.py\n    \n    Change-Id: Ia9099fb5020cee02bfee2cd0e8e111845918c36c\n    Closes-Bug: #1496055\n    Co-Authored-By: Marian Horban <email address hidden>\n", 
            "date_created": "2015-10-13 14:14:49.210104+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/223235\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=dbda82afd8ac0ae4373ea35d990e124bbac91eef\nSubmitter: Jenkins\nBranch:    master\n\ncommit dbda82afd8ac0ae4373ea35d990e124bbac91eef\nAuthor: Marian Horban <email address hidden>\nDate:   Mon Sep 14 13:43:36 2015 -0400\n\n    Fix Status-Line in HTTP response\n    \n    There is a strict rule about constructing status line for HTTP:\n    '...Status-Line, consisting of the protocol version followed by a\n    numeric status code and its associated textual phrase, with each\n    element separated by SP characters'\n    (http://www.faqs.org/rfcs/rfc2616.html)\n    \n    This patch ensures an associated textual phrase for a status code\n    is always written in the HTTP response.\n    \n    Closes-Bug: #1496055\n    Change-Id: I68d4c41d0c04871eb032d23d7b16aa2bf2c0bb73\n", 
            "date_created": "2015-10-15 13:57:12.160518+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 13.0.0.0b1 development milestone.", 
            "date_created": "2015-12-02 16:17:44.233140+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "This issue was fixed in the openstack/cinder 8.0.0.0b1 development milestone.", 
            "date_created": "2015-12-03 15:21:27.082258+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}