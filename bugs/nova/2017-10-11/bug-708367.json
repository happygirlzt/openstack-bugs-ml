{
    "status": "Fix Released", 
    "last_updated": "2011-02-07 13:53:46.366467+00:00", 
    "description": "I tried to run an instance with this command:\n\n$ euca-run-instances ami-akhlldt4 --kernel ami-lc2uk0wz --ramdisk ami-fscox004 -t m1.tiny                                                                      \nUnknownError: An unknown error has occurred. Please try your request again.\n\n\nIn the nova-api.log I found this:\n\n\n2011-01-26 14:35:58,612 AUDIT nova.api [RMZSEMOEW88X71B073KO admin default-project] Authenticated Request For admin:default-project)\n2011-01-26 14:35:58,613 DEBUG nova.api [-] action: RunInstances from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:211\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: ImageId         val: ami-akhlldt4 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: KernelId                val: ami-lc2uk0wz from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: RamdiskId               val: ami-fscox004 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: MaxCount                val: 1 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,614 DEBUG nova.api [-] arg: MinCount                val: 1 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,614 DEBUG nova.api [-] arg: InstanceType            val: m1.tiny from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,723 ERROR nova.api [RMZSEMOEW88X71B073KO admin default-project] Unexpected error raised: imageId\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py\", line 315, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/apirequest.py\", line 127, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/cloud.py\", line 798, in run_instances\n(nova.api): TRACE:     'AvailabilityZone'))\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/api.py\", line 104, in create\n(nova.api): TRACE:     image = self.image_service.show(context, image_id)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/image/s3.py\", line 89, in show\n(nova.api): TRACE:     result = [i for i in result if i['imageId'] == image_id]\n(nova.api): TRACE: KeyError: 'imageId'\n(nova.api): TRACE:", 
    "tags": [], 
    "importance": "Critical", 
    "heat": 12, 
    "link": "https://bugs.launchpad.net/nova/+bug/708367", 
    "owner": "https://api.launchpad.net/1.0/~xtoddx", 
    "id": 708367, 
    "index": 10, 
    "created": "2011-01-26 22:40:59.722749+00:00", 
    "title": "euca-run-instances fails due to KeyError for imageId", 
    "comments": [
        {
            "content": "I tried to run an instance with this command:\n\n$ euca-run-instances ami-akhlldt4 --kernel ami-lc2uk0wz --ramdisk ami-fscox004 -t m1.tiny                                                                      \nUnknownError: An unknown error has occurred. Please try your request again.\n\n\nIn the nova-api.log I found this:\n\n\n2011-01-26 14:35:58,612 AUDIT nova.api [RMZSEMOEW88X71B073KO admin default-project] Authenticated Request For admin:default-project)\n2011-01-26 14:35:58,613 DEBUG nova.api [-] action: RunInstances from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:211\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: ImageId         val: ami-akhlldt4 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: KernelId                val: ami-lc2uk0wz from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: RamdiskId               val: ami-fscox004 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,613 DEBUG nova.api [-] arg: MaxCount                val: 1 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,614 DEBUG nova.api [-] arg: MinCount                val: 1 from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,614 DEBUG nova.api [-] arg: InstanceType            val: m1.tiny from MainProcess (pid=12011) __call__ /usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py:213\n2011-01-26 14:35:58,723 ERROR nova.api [RMZSEMOEW88X71B073KO admin default-project] Unexpected error raised: imageId\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/__init__.py\", line 315, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/apirequest.py\", line 127, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/api/ec2/cloud.py\", line 798, in run_instances\n(nova.api): TRACE:     'AvailabilityZone'))\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/compute/api.py\", line 104, in create\n(nova.api): TRACE:     image = self.image_service.show(context, image_id)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.6/nova/image/s3.py\", line 89, in show\n(nova.api): TRACE:     result = [i for i in result if i['imageId'] == image_id]\n(nova.api): TRACE: KeyError: 'imageId'\n(nova.api): TRACE:", 
            "date_created": "2011-01-26 22:40:59.722749+00:00", 
            "author": "https://api.launchpad.net/1.0/~rlucio"
        }, 
        {
            "content": "dhcp-75-98-85-29:openstack-nova-trunk rlucio$ bzr diff\n=== modified file 'nova/image/s3.py'\n--- nova/image/s3.py\t2011-01-25 21:06:05 +0000\n+++ nova/image/s3.py\t2011-01-26 22:50:10 +0000\n@@ -86,7 +86,7 @@\n         if FLAGS.connection_type == 'fake':\n             return {'imageId': 'bar'}\n         result = self.index(context)\n-        result = [i for i in result if i['imageId'] == image_id]\n+        result = [i for i in result if i['id'] == image_id]\n         if not result:\n             raise exception.NotFound(_('Image %s could not be found')\n                                      % image_id)\n\n", 
            "date_created": "2011-01-26 22:51:32.858155+00:00", 
            "author": "https://api.launchpad.net/1.0/~rlucio"
        }
    ]
}