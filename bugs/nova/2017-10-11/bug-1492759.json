{
    "status": "Expired", 
    "last_updated": "2016-04-13 18:19:49.927156+00:00", 
    "description": "Openstack Kilo on Centos 7\n\nI cannot create a stack. heat-engine failed regardless of template what used for.\n \nError message: ERROR: Property error: : resources.pgpool.properties.flavor: : 'OpenStackComputeShell' object has no attribute '_discover_extensions\n\nheat-engine log:\n--------------------\n2015-09-06 15:34:08.242 19788 DEBUG oslo_messaging._drivers.amqp [-] unpacked context: {u'username': None, u'user_id': u'665b2e5b102a413c90433933aade392b', u'region_name': None, u'roles': [u'user', u'heat_stack_owner'], u'user_identity': u'- daddy', u'tenant_id': u'b408e8f5cb56432a96767c83583ea051', u'auth_token': u'***', u'auth_token_info': {u'token': {u'methods': [u'password'], u'roles': [{u'id': u'0698f895b3544a20ac511c6e287691d4', u'name': u'user'}, {u'id': u'2061bd7e4e9d4da4a3dc2afff69a823e', u'name': u'heat_stack_owner'}], u'expires_at': u'2015-09-06T14:34:08.136737Z', u'project': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'b408e8f5cb56432a96767c83583ea051', u'name': u'daddy'}, u'catalog': [{u'endpoints': [{u'url': u'http://172.17.1.1:9292', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'5dce804bafb34b159ec1b4385460a481'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a5728528ead84649bd561f9841011ff4'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e205b5ba78e0479fb391d90f4958a8a0'}], u'type': u'image', u'id': u'0a0dd8432bd64f88b2c1ffd3d5d23b78', u'name': u'glance'}, {u'endpoints': [{u'url': u'http://172.17.1.1:9696', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'15831ae42aa143cb94f0d3adc1b353fb'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'74bf11a2b9334256bf9abdc618556e2b'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd326b2c9fa614cad8586c79ab76a66a0'}], u'type': u'network', u'id': u'0e75266a6c284a289edb11b1c627c53f', u'name': u'neutron'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'083e629299bb429ba6ad1bf03451e8db'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'3942023115194893bb6762d02e47524a'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b6f4f8a8bc33444b862cd3d9360c67e2'}], u'type': u'compute', u'id': u'2a259406aeef4667873d06ef361a1c44', u'name': u'nova'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'919bab67f54b4973807dcefb37fc22aa'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'ce0963a3cfba44deb818f7d0551d8bdf'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e98842d6a18840f7a1d0595957eaa4d6'}], u'type': u'volume', u'id': u'5e3afcf192bb4ad8ad9bfd589b0641b9', u'name': u'cinder'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8000/v1', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4385c791314e4f8a926411b9f4707513'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a1ed10e71e3d4c81b4f3e175f4c29e3f'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd6d2e7dc54fc4abbb99d93f95d795340'}], u'type': u'cloudformation', u'id': u'7a80a5d594414d6fb07f5332bca1d0e1', u'name': u'heat-cfn'}, {u'endpoints': [{u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'0fef9f451d9b42bcaeea6addda1c3870'}, {u'url': u'http://172.17.1.1:35357/v2.0', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b8827b4d091a4b21b8ca197300070f45'}, {u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'f91d6fe537ea410bb72c826ed8bb730a'}], u'type': u'identity', u'id': u'803567b682f5466fab27613b572183ab', u'name': u'keystone'}, {u'endpoints': [{u'url': u'http://172.17.3.1:8080', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'1b64994b6df548049a455a91d69c3864'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'53a57a170f554b878597c7d00ff3f76a'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'af153a5b6e984c819377a7053c9dbbc8'}], u'type': u'object-store', u'id': u'c05ea9aa79164f2caf431da213d50aaf', u'name': u'swift'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8777', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4df98868da4e481689d562e683088546'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'585c8964d53c4c2aa422a8d342a2ed1b'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'6af3265d11c642dcada0b3bd6a533eda'}], u'type': u'metering', u'id': u'c7b3e9e397cd4009b7eb1a4224e90802', u'name': u'ceilometer'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'34030aa1a9924150af35d20bf6357b18'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'7af88786da514c6792f6c2fac5e0f7d6'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'eb5e2e98467242c69ece98b43abad0a2'}], u'type': u'orchestration', u'id': u'd4ef7d4bfd6143f99a022520748e4c4a', u'name': u'heat'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'39cbdd96720d481097c6cb8b24598fbc'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'698cc14c5f5545e680747d1e4d1f25ab'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd692b27d55124c9d912032b8b5792c8c'}], u'type': u'volumev2', u'id': u'ece29c610df14eaabffe5443ad6765cc', u'name': u'cinderv2'}], u'extras': {}, u'user': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'665b2e5b102a413c90433933aade392b', u'name': u'daddy'}, u'audit_ids': [u'e0BrTSXpQWSAEswpTW5gpQ'], u'issued_at': u'2015-09-06T13:34:08.137155Z'}}, u'show_deleted': False, u'auth_url': u'http://172.17.1.1:5000/v2.0', u'user': None, u'request_id': u'req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011', u'tenant': u'daddy', u'is_admin': False, u'password': None, u'aws_creds': None, u'trust_id': None, u'trustor_user_id': None} unpack_context /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:203\n2015-09-06 15:34:08.247 19788 INFO heat.engine.service [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Creating stack pg\n2015-09-06 15:34:08.286 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.template.HOTemplate20141016 object at 0x41f4d90> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32\n2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.parameters.HOTParameters object at 0x2e08ad0> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33\n2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44\n2015-09-06 15:34:08.288 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] ['OS::project_id', u'dns', 'OS::stack_id', u'zone', u'pgmaster_fix', u'image_id', u'key', u'volsize', u'pgslave1_fix', u'cidr', u'public_network', u'pgpool_fix'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45\n2015-09-06 15:34:08.336 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitConditionHandle \"pgmaster_waithandle\"\n2015-09-06 15:34:08.337 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating SecurityGroup \"sec_group_postgres\"\n2015-09-06 15:34:08.341 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Net \"postgres_network\"\n2015-09-06 15:34:08.342 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Router \"router\"\n2015-09-06 15:34:08.343 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating CinderVolume \"cinder_volume\"\n2015-09-06 15:34:08.344 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Subnet \"postgres_subnet\"\n2015-09-06 15:34:08.345 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgslave1_port\"\n2015-09-06 15:34:08.347 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgpool_port\"\n2015-09-06 15:34:08.348 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating RouterInterface \"router-interface\"\n2015-09-06 15:34:08.349 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIP \"pgpool_floating\"\n2015-09-06 15:34:08.359 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] \nREQ: curl -i http://172.17.1.1:9696/v2.0/networks.json?fields=id&name=external -X GET -H \"User-Agent: python-neutronclient\" -H \"X-Auth-Token: 4cef1e38403e46ab86532aeb38dbd8d6\"\n http_log_req /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:131\n2015-09-06 15:34:08.426 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] RESP:200 {'date': 'Sun, 06 Sep 2015 13:34:08 GMT', 'connection': 'keep-alive', 'content-type': 'application/json; charset=UTF-8', 'content-length': '62', 'x-openstack-request-id': 'req-6c98a7ec-2cdb-441a-abcc-18abeebb333c'} {\"networks\": [{\"id\": \"ebf5cd8c-aacd-406e-80e0-8e81d381e5c7\"}]}\n http_log_resp /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:140\n2015-09-06 15:34:08.427 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIPAssociation \"pgpool_floating_ip_assoc\"\n2015-09-06 15:34:08.429 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitCondition \"pgmaster_waitcond\"\n2015-09-06 15:34:08.430 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Server \"pgslave1\"\n2015-09-06 15:34:08.446 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] curl -g -i -X GET -H 'Accept-Encoding: gzip, deflate' -H 'Accept: */*' -H 'User-Agent: python-glanceclient' -H 'Connection: keep-alive' -H 'X-Auth-Token: {SHA1}44936731f6e5b70c5228d21aabc62afd866a78ca' -H 'Content-Type: application/octet-stream' http://172.17.1.1:9292/v1/images/detail?limit=20&name=Centos+7 log_curl_request /usr/lib/python2.7/site-packages/glanceclient/common/http.py:186\n2015-09-06 15:34:08.659 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] \nHTTP/1.1 200 OK\ndate: Sun, 06 Sep 2015 13:34:08 GMT\nconnection: keep-alive\ncontent-type: application/json; charset=UTF-8\ncontent-length: 499\nx-openstack-request-id: req-req-8a14ebcf-d30b-4299-9894-0bf77aeeb7f5\n\n{\"images\": [{\"status\": \"active\", \"deleted_at\": null, \"name\": \"Centos 7\", \"deleted\": false, \"container_format\": \"bare\", \"created_at\": \"2015-09-04T07:42:59.000000\", \"disk_format\": \"qcow2\", \"updated_at\": \"2015-09-04T07:43:30.000000\", \"min_disk\": 0, \"protected\": false, \"id\": \"b28cef81-51f1-40fb-b126-8687eb46a7c1\", \"min_ram\": 0, \"checksum\": \"9eca98f4b3ad7e6dd4390a9d181381c9\", \"owner\": \"8c09606877414da2bbdd6193cc5c51ae\", \"is_public\": true, \"virtual_size\": null, \"properties\": {}, \"size\": 1004994560}]}\n log_http_response /usr/lib/python2.7/site-packages/glanceclient/common/http.py:200\n2015-09-06 15:34:08.661 19788 INFO heat.engine.stack [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions'\n2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging.rpc.dispatcher [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Expected exception during message handling (Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions') _dispatch_and_reply /usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py:145\n2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Pool creating new connection create /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:92\n2015-09-06 15:34:08.665 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connecting to AMQP server on 172.17.1.1:5672\n2015-09-06 15:34:08.686 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connected to AMQP server on 172.17.1.1:5672\n2015-09-06 15:34:08.689 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is caffa70ef55542bb84eae0c7b0ec4d9a. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n2015-09-06 15:34:08.692 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is 8859adbc2f5c4d648cc337c52e286e8e. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n--------------------\n\nAs I understand heat-engine try to call novaclient's shell method '_discover_extensions', which is not exists.\n\nReproduce steps:\n--------------------\n\n1. Install latest Openstack Kilo on Centos 7\n2. create stack\n\n\nExpected result:\n-------------------\ncreate stack successfully\n\nActual result:\n----------------\nstack create failed due to inconsistency between heat-engine and novaclient \n\n\nNova versions:\n----------------\nopenstack-nova-api-2015.1.1-1.el7.noarch\nopenstack-nova-common-2015.1.1-1.el7.noarch\npython-nova-2015.1.1-1.el7.noarch\nopenstack-nova-scheduler-2015.1.1-1.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-novncproxy-2015.1.1-1.el7.noarch\nopenstack-nova-conductor-2015.1.1-1.el7.noarch\nopenstack-nova-console-2015.1.1-1.el7.noarch\nopenstack-nova-cert-2015.1.1-1.el7.noarch\n\nheat versions:\n-----------------\nopenstack-heat-api-cfn-2015.1.1-1.el7.noarch\npython-heatclient-0.6.0-1.el7.noarch\nopenstack-heat-common-2015.1.1-1.el7.noarch\nopenstack-heat-api-2015.1.1-1.el7.noarch\nopenstack-heat-engine-2015.1.1-1.el7.noarch", 
    "tags": [
        "heat", 
        "novaclient"
    ], 
    "importance": "Undecided", 
    "heat": 16, 
    "link": "https://bugs.launchpad.net/nova/+bug/1492759", 
    "owner": "None", 
    "id": 1492759, 
    "index": 5749, 
    "created": "2015-09-06 13:43:59.861178+00:00", 
    "title": "heat-engine refers to a non-existent novaclient's method", 
    "comments": [
        {
            "content": "Openstack Kilo on Centos 7\n\nI cannot create a stack. heat-engine failed regardless of template what used for.\n \nError message: ERROR: Property error: : resources.pgpool.properties.flavor: : 'OpenStackComputeShell' object has no attribute '_discover_extensions\n\nheat-engine log:\n--------------------\n2015-09-06 15:34:08.242 19788 DEBUG oslo_messaging._drivers.amqp [-] unpacked context: {u'username': None, u'user_id': u'665b2e5b102a413c90433933aade392b', u'region_name': None, u'roles': [u'user', u'heat_stack_owner'], u'user_identity': u'- daddy', u'tenant_id': u'b408e8f5cb56432a96767c83583ea051', u'auth_token': u'***', u'auth_token_info': {u'token': {u'methods': [u'password'], u'roles': [{u'id': u'0698f895b3544a20ac511c6e287691d4', u'name': u'user'}, {u'id': u'2061bd7e4e9d4da4a3dc2afff69a823e', u'name': u'heat_stack_owner'}], u'expires_at': u'2015-09-06T14:34:08.136737Z', u'project': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'b408e8f5cb56432a96767c83583ea051', u'name': u'daddy'}, u'catalog': [{u'endpoints': [{u'url': u'http://172.17.1.1:9292', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'5dce804bafb34b159ec1b4385460a481'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a5728528ead84649bd561f9841011ff4'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e205b5ba78e0479fb391d90f4958a8a0'}], u'type': u'image', u'id': u'0a0dd8432bd64f88b2c1ffd3d5d23b78', u'name': u'glance'}, {u'endpoints': [{u'url': u'http://172.17.1.1:9696', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'15831ae42aa143cb94f0d3adc1b353fb'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'74bf11a2b9334256bf9abdc618556e2b'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd326b2c9fa614cad8586c79ab76a66a0'}], u'type': u'network', u'id': u'0e75266a6c284a289edb11b1c627c53f', u'name': u'neutron'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'083e629299bb429ba6ad1bf03451e8db'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'3942023115194893bb6762d02e47524a'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b6f4f8a8bc33444b862cd3d9360c67e2'}], u'type': u'compute', u'id': u'2a259406aeef4667873d06ef361a1c44', u'name': u'nova'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'919bab67f54b4973807dcefb37fc22aa'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'ce0963a3cfba44deb818f7d0551d8bdf'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e98842d6a18840f7a1d0595957eaa4d6'}], u'type': u'volume', u'id': u'5e3afcf192bb4ad8ad9bfd589b0641b9', u'name': u'cinder'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8000/v1', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4385c791314e4f8a926411b9f4707513'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a1ed10e71e3d4c81b4f3e175f4c29e3f'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd6d2e7dc54fc4abbb99d93f95d795340'}], u'type': u'cloudformation', u'id': u'7a80a5d594414d6fb07f5332bca1d0e1', u'name': u'heat-cfn'}, {u'endpoints': [{u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'0fef9f451d9b42bcaeea6addda1c3870'}, {u'url': u'http://172.17.1.1:35357/v2.0', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b8827b4d091a4b21b8ca197300070f45'}, {u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'f91d6fe537ea410bb72c826ed8bb730a'}], u'type': u'identity', u'id': u'803567b682f5466fab27613b572183ab', u'name': u'keystone'}, {u'endpoints': [{u'url': u'http://172.17.3.1:8080', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'1b64994b6df548049a455a91d69c3864'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'53a57a170f554b878597c7d00ff3f76a'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'af153a5b6e984c819377a7053c9dbbc8'}], u'type': u'object-store', u'id': u'c05ea9aa79164f2caf431da213d50aaf', u'name': u'swift'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8777', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4df98868da4e481689d562e683088546'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'585c8964d53c4c2aa422a8d342a2ed1b'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'6af3265d11c642dcada0b3bd6a533eda'}], u'type': u'metering', u'id': u'c7b3e9e397cd4009b7eb1a4224e90802', u'name': u'ceilometer'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'34030aa1a9924150af35d20bf6357b18'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'7af88786da514c6792f6c2fac5e0f7d6'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'eb5e2e98467242c69ece98b43abad0a2'}], u'type': u'orchestration', u'id': u'd4ef7d4bfd6143f99a022520748e4c4a', u'name': u'heat'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'39cbdd96720d481097c6cb8b24598fbc'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'698cc14c5f5545e680747d1e4d1f25ab'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd692b27d55124c9d912032b8b5792c8c'}], u'type': u'volumev2', u'id': u'ece29c610df14eaabffe5443ad6765cc', u'name': u'cinderv2'}], u'extras': {}, u'user': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'665b2e5b102a413c90433933aade392b', u'name': u'daddy'}, u'audit_ids': [u'e0BrTSXpQWSAEswpTW5gpQ'], u'issued_at': u'2015-09-06T13:34:08.137155Z'}}, u'show_deleted': False, u'auth_url': u'http://172.17.1.1:5000/v2.0', u'user': None, u'request_id': u'req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011', u'tenant': u'daddy', u'is_admin': False, u'password': None, u'aws_creds': None, u'trust_id': None, u'trustor_user_id': None} unpack_context /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:203\n2015-09-06 15:34:08.247 19788 INFO heat.engine.service [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Creating stack pg\n2015-09-06 15:34:08.286 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.template.HOTemplate20141016 object at 0x41f4d90> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32\n2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.parameters.HOTParameters object at 0x2e08ad0> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33\n2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44\n2015-09-06 15:34:08.288 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] ['OS::project_id', u'dns', 'OS::stack_id', u'zone', u'pgmaster_fix', u'image_id', u'key', u'volsize', u'pgslave1_fix', u'cidr', u'public_network', u'pgpool_fix'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45\n2015-09-06 15:34:08.336 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitConditionHandle \"pgmaster_waithandle\"\n2015-09-06 15:34:08.337 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating SecurityGroup \"sec_group_postgres\"\n2015-09-06 15:34:08.341 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Net \"postgres_network\"\n2015-09-06 15:34:08.342 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Router \"router\"\n2015-09-06 15:34:08.343 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating CinderVolume \"cinder_volume\"\n2015-09-06 15:34:08.344 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Subnet \"postgres_subnet\"\n2015-09-06 15:34:08.345 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgslave1_port\"\n2015-09-06 15:34:08.347 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgpool_port\"\n2015-09-06 15:34:08.348 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating RouterInterface \"router-interface\"\n2015-09-06 15:34:08.349 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIP \"pgpool_floating\"\n2015-09-06 15:34:08.359 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] \nREQ: curl -i http://172.17.1.1:9696/v2.0/networks.json?fields=id&name=external -X GET -H \"User-Agent: python-neutronclient\" -H \"X-Auth-Token: 4cef1e38403e46ab86532aeb38dbd8d6\"\n http_log_req /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:131\n2015-09-06 15:34:08.426 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] RESP:200 {'date': 'Sun, 06 Sep 2015 13:34:08 GMT', 'connection': 'keep-alive', 'content-type': 'application/json; charset=UTF-8', 'content-length': '62', 'x-openstack-request-id': 'req-6c98a7ec-2cdb-441a-abcc-18abeebb333c'} {\"networks\": [{\"id\": \"ebf5cd8c-aacd-406e-80e0-8e81d381e5c7\"}]}\n http_log_resp /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:140\n2015-09-06 15:34:08.427 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIPAssociation \"pgpool_floating_ip_assoc\"\n2015-09-06 15:34:08.429 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitCondition \"pgmaster_waitcond\"\n2015-09-06 15:34:08.430 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Server \"pgslave1\"\n2015-09-06 15:34:08.446 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] curl -g -i -X GET -H 'Accept-Encoding: gzip, deflate' -H 'Accept: */*' -H 'User-Agent: python-glanceclient' -H 'Connection: keep-alive' -H 'X-Auth-Token: {SHA1}44936731f6e5b70c5228d21aabc62afd866a78ca' -H 'Content-Type: application/octet-stream' http://172.17.1.1:9292/v1/images/detail?limit=20&name=Centos+7 log_curl_request /usr/lib/python2.7/site-packages/glanceclient/common/http.py:186\n2015-09-06 15:34:08.659 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] \nHTTP/1.1 200 OK\ndate: Sun, 06 Sep 2015 13:34:08 GMT\nconnection: keep-alive\ncontent-type: application/json; charset=UTF-8\ncontent-length: 499\nx-openstack-request-id: req-req-8a14ebcf-d30b-4299-9894-0bf77aeeb7f5\n\n{\"images\": [{\"status\": \"active\", \"deleted_at\": null, \"name\": \"Centos 7\", \"deleted\": false, \"container_format\": \"bare\", \"created_at\": \"2015-09-04T07:42:59.000000\", \"disk_format\": \"qcow2\", \"updated_at\": \"2015-09-04T07:43:30.000000\", \"min_disk\": 0, \"protected\": false, \"id\": \"b28cef81-51f1-40fb-b126-8687eb46a7c1\", \"min_ram\": 0, \"checksum\": \"9eca98f4b3ad7e6dd4390a9d181381c9\", \"owner\": \"8c09606877414da2bbdd6193cc5c51ae\", \"is_public\": true, \"virtual_size\": null, \"properties\": {}, \"size\": 1004994560}]}\n log_http_response /usr/lib/python2.7/site-packages/glanceclient/common/http.py:200\n2015-09-06 15:34:08.661 19788 INFO heat.engine.stack [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions'\n2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging.rpc.dispatcher [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Expected exception during message handling (Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions') _dispatch_and_reply /usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py:145\n2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Pool creating new connection create /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:92\n2015-09-06 15:34:08.665 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connecting to AMQP server on 172.17.1.1:5672\n2015-09-06 15:34:08.686 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connected to AMQP server on 172.17.1.1:5672\n2015-09-06 15:34:08.689 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is caffa70ef55542bb84eae0c7b0ec4d9a. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n2015-09-06 15:34:08.692 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is 8859adbc2f5c4d648cc337c52e286e8e. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n--------------------\n\nAs I understand heat-engine try to call novaclient's shell method '_discover_extensions', which is not exists.\n\nReproduce steps:\n--------------------\n\n1. Install latest Openstack Kilo on Centos 7\n2. create stack\n\n\nExpected result:\n-------------------\ncreate stack successfully\n\nActual result:\n----------------\nstack create failed due to inconsistency between heat-engine and novaclient \n\n\nNova versions:\n----------------\nopenstack-nova-api-2015.1.1-1.el7.noarch\nopenstack-nova-common-2015.1.1-1.el7.noarch\npython-nova-2015.1.1-1.el7.noarch\nopenstack-nova-scheduler-2015.1.1-1.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-novncproxy-2015.1.1-1.el7.noarch\nopenstack-nova-conductor-2015.1.1-1.el7.noarch\nopenstack-nova-console-2015.1.1-1.el7.noarch\nopenstack-nova-cert-2015.1.1-1.el7.noarch\n\nheat versions:\n-----------------\nopenstack-heat-api-cfn-2015.1.1-1.el7.noarch\npython-heatclient-0.6.0-1.el7.noarch\nopenstack-heat-common-2015.1.1-1.el7.noarch\nopenstack-heat-api-2015.1.1-1.el7.noarch\nopenstack-heat-engine-2015.1.1-1.el7.noarch", 
            "date_created": "2015-09-06 13:43:59.861178+00:00", 
            "author": "https://api.launchpad.net/1.0/~kollarl-f"
        }, 
        {
            "content": "FYI. Not an issue from the nova side - https://review.openstack.org/#/c/171067/", 
            "date_created": "2015-09-06 22:05:49.957414+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "You would need to backport commit fc8dbf8752b2b3c8acdce001250cdeb1fa115a5a to support this nova client version.", 
            "date_created": "2015-09-07 01:14:27.089996+00:00", 
            "author": "https://api.launchpad.net/1.0/~asalkeld"
        }, 
        {
            "content": "You say you're using python-novaclient-2.23.0, which definitely has the old shell _discover_extensions function\nAre you sure you haven't installed a new python-novaclient from pip or git? There hasn't even been a novaclient release since _discover_extensions was removed. (last release 2.28.1 still has a _discover_extensions)", 
            "date_created": "2015-09-07 02:26:03.398562+00:00", 
            "author": "https://api.launchpad.net/1.0/~steve-stevebaker"
        }, 
        {
            "content": "\nyes, I found a newer novaclient. \n>> \n# nova --version  \n# 2.28.0 \n<< \n\nSo I uninstall python-novaclient: 'pip uninstall python-novaclient' then reinstall python-novaclient from openstack-kilo repo. \nNow I have the 'official' novaclient: \n>> \n# nova --version  \n# 2.23.0 \n<< \n\nnovaclient now has '_discover_extension' method: \n>> \n# grep _discover_extension /usr/lib/python2.7/site-packages/novaclient/ -r \n# /usr/lib/python2.7/site-packages/novaclient/shell.py:    def _discover_extensions(self, version): \n<< \n\nUnfortunately the error still same: \n\"ERROR: Property error: : resources.pgpool.properties.flavor: : 'OpenStackComputeShell' object has no attribute '_discover_extensions'\" \n\nheat-engine log: \n>> \n2015-09-07 08:04:37.487 19789 DEBUG heat.engine.parameter_groups [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] <heat.engine.hot.template.HOTemplate20141016 object at 0x422d890> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32 \n2015-09-07 08:04:37.488 19789 DEBUG heat.engine.parameter_groups [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] <heat.engine.hot.parameters.HOTParameters object at 0x42b9810> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33 \n2015-09-07 08:04:37.488 19789 DEBUG heat.engine.parameter_groups [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44 \n2015-09-07 08:04:37.489 19789 DEBUG heat.engine.parameter_groups [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] ['OS::project_id', u'dns', 'OS::stack_id', u'zone', u'pgmaster_fix', u'image_id', u'key', u'volsize', u'pgslave1_fix', u'cidr', u'public_network', u'pgpool_fix'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45 \n2015-09-07 08:04:37.533 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating HeatWaitConditionHandle \"pgpool_waithandle\" \n2015-09-07 08:04:37.535 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating HeatWaitConditionHandle \"pgmaster_waithandle\" \n2015-09-07 08:04:37.535 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating HeatWaitCondition \"pgmaster_waitcond\" \n2015-09-07 08:04:37.536 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating CinderVolume \"cinder_volume\" \n2015-09-07 08:04:37.537 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Net \"postgres_network\" \n2015-09-07 08:04:37.538 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating SecurityGroup \"sec_group_postgres\" \n2015-09-07 08:04:37.542 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Subnet \"postgres_subnet\" \n2015-09-07 08:04:37.543 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Port \"pgslave1_port\" \n2015-09-07 08:04:37.545 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Port \"pgpool_port\" \n2015-09-07 08:04:37.546 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Port \"pgmaster_port\" \n2015-09-07 08:04:37.547 19789 INFO heat.engine.resource [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Validating Server \"pgpool\" \n2015-09-07 08:04:37.566 19789 DEBUG glanceclient.common.http [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] curl -g -i -X GET -H 'Accept-Encoding: gzip, deflate' -H 'Accept: */*' -H 'User-Agent: python-glanceclient' -H 'Connection: keep-alive' -H 'X-Auth-Token: {SHA1}d69737caf68c5ac8030a50bf919ff718538ed5f9' -H 'Content-Type: application/octet-stream' http://172.17.1.1:9292/v1/images/detail?limit=20&name=Centos+7 log_curl_request /usr/lib/python2.7/site-packages/glanceclient/common/http.py:186 \n2015-09-07 08:04:37.882 19789 DEBUG glanceclient.common.http [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy]  \nHTTP/1.1 200 OK \ndate: Mon, 07 Sep 2015 06:04:37 GMT \nconnection: keep-alive \ncontent-type: application/json; charset=UTF-8 \ncontent-length: 499 \nx-openstack-request-id: req-req-550a9f1c-a4c4-47cb-a461-fafbe0b3575d \n\n{\"images\": [{\"status\": \"active\", \"deleted_at\": null, \"name\": \"Centos 7\", \"deleted\": false, \"container_format\": \"bare\", \"created_at\": \"2015-09-04T07:42:59.000000\", \"disk_format\": \"qcow2\", \"updated_at\": \"2015-09-04T07:43:30.000000\", \"min_disk\": 0, \"protected\": false, \"id\": \"b28cef81-51f1-40fb-b126-8687eb46a7c1\", \"min_ram\": 0, \"checksum\": \"9eca98f4b3ad7e6dd4390a9d181381c9\", \"owner\": \"8c09606877414da2bbdd6193cc5c51ae\", \"is_public\": true, \"virtual_size\": null, \"properties\": {}, \"size\": 1004994560}]} \n log_http_response /usr/lib/python2.7/site-packages/glanceclient/common/http.py:200 \n2015-09-07 08:04:37.885 19789 INFO heat.engine.stack [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Property error: resources.pgpool.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions' \n2015-09-07 08:04:37.885 19789 DEBUG oslo_messaging.rpc.dispatcher [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Expected exception during message handling (Property error: resources.pgpool.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions') _dispatch_and_reply /usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py:145 \n2015-09-07 08:04:37.886 19789 DEBUG oslo_messaging._drivers.amqp [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Pool creating new connection create /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:92 \n2015-09-07 08:04:37.888 19789 INFO oslo_messaging._drivers.impl_rabbit [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Connecting to AMQP server on 172.17.1.1:5672 \n2015-09-07 08:04:37.908 19789 INFO oslo_messaging._drivers.impl_rabbit [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] Connected to AMQP server on 172.17.1.1:5672 \n2015-09-07 08:04:37.911 19789 DEBUG oslo_messaging._drivers.amqp [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] UNIQUE_ID is edad6d6a1c2e4b70ab8a3d79d4c34dee. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258 \n2015-09-07 08:04:37.914 19789 DEBUG oslo_messaging._drivers.amqp [req-59b2c35e-7ca6-42de-ad28-f0b54c5868e6 - daddy] UNIQUE_ID is 7318c1ba9485498da27354a93ab676f7. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258 \n2015-09-07 08:05:26.439 19787 INFO heat.engine.service [req-b697ddbf-7091-4b43-b712-748e3834cde6 - -] Service 69d445e6-f47c-40af-8c24-be80e2083236 is updated \n2015-09-07 08:05:26.443 19786 INFO heat.engine.service [req-4874967f-08aa-4c99-bfa9-6d45b57a3d72 - -] Service aa7c6e13-f51c-44eb-9c58-b5aadd531de6 is updated \n\n<< \n\n>>> Steve Baker <email address hidden> 9/7/2015 04:26 AM >>>\nYou say you're using python-novaclient-2.23.0, which definitely has the old shell _discover_extensions function\nAre you sure you haven't installed a new python-novaclient from pip or git? There hasn't even been a novaclient release since _discover_extensions was removed. (last release 2.28.1 still has a _discover_extensions)\n\n--\nYou received this bug notification because you are subscribed to the bug\nreport.\nhttps://bugs.launchpad.net/bugs/1492759\n\nTitle:\n  heat-engine refers to a non-existent novaclient's method\n\nStatus in heat:\n  New\nStatus in OpenStack Compute (nova):\n  Incomplete\n\nBug description:\n  Openstack Kilo on Centos 7\n\n  I cannot create a stack. heat-engine failed regardless of template what used for.\n  \n  Error message: ERROR: Property error: : resources.pgpool.properties.flavor: : 'OpenStackComputeShell' object has no attribute '_discover_extensions\n\n  heat-engine log:\n  --------------------\n  2015-09-06 15:34:08.242 19788 DEBUG oslo_messaging._drivers.amqp [-] unpacked context: {u'username': None, u'user_id': u'665b2e5b102a413c90433933aade392b', u'region_name': None, u'roles': [u'user', u'heat_stack_owner'], u'user_identity': u'- daddy', u'tenant_id': u'b408e8f5cb56432a96767c83583ea051', u'auth_token': u'***', u'auth_token_info': {u'token': {u'methods': [u'password'], u'roles': [{u'id': u'0698f895b3544a20ac511c6e287691d4', u'name': u'user'}, {u'id': u'2061bd7e4e9d4da4a3dc2afff69a823e', u'name': u'heat_stack_owner'}], u'expires_at': u'2015-09-06T14:34:08.136737Z', u'project': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'b408e8f5cb56432a96767c83583ea051', u'name': u'daddy'}, u'catalog': [{u'endpoints': [{u'url': u'http://172.17.1.1:9292', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'5dce804bafb34b159ec1b4385460a481'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a5728528ead84649bd561f9841011ff4'}, {u'url': u'http://172.17.1.1:9292', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e205b5ba78e0479fb391d90f4958a8a0'}], u'type': u'image', u'id': u'0a0dd8432bd64f88b2c1ffd3d5d23b78', u'name': u'glance'}, {u'endpoints': [{u'url': u'http://172.17.1.1:9696', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'15831ae42aa143cb94f0d3adc1b353fb'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'74bf11a2b9334256bf9abdc618556e2b'}, {u'url': u'http://172.17.1.1:9696', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd326b2c9fa614cad8586c79ab76a66a0'}], u'type': u'network', u'id': u'0e75266a6c284a289edb11b1c627c53f', u'name': u'neutron'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'083e629299bb429ba6ad1bf03451e8db'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'3942023115194893bb6762d02e47524a'}, {u'url': u'http://172.17.1.1:8774/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b6f4f8a8bc33444b862cd3d9360c67e2'}], u'type': u'compute', u'id': u'2a259406aeef4667873d06ef361a1c44', u'name': u'nova'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'919bab67f54b4973807dcefb37fc22aa'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'ce0963a3cfba44deb818f7d0551d8bdf'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'e98842d6a18840f7a1d0595957eaa4d6'}], u'type': u'volume', u'id': u'5e3afcf192bb4ad8ad9bfd589b0641b9', u'name': u'cinder'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8000/v1', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4385c791314e4f8a926411b9f4707513'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'a1ed10e71e3d4c81b4f3e175f4c29e3f'}, {u'url': u'http://172.17.1.1:8000/v1', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd6d2e7dc54fc4abbb99d93f95d795340'}], u'type': u'cloudformation', u'id': u'7a80a5d594414d6fb07f5332bca1d0e1', u'name': u'heat-cfn'}, {u'endpoints': [{u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'0fef9f451d9b42bcaeea6addda1c3870'}, {u'url': u'http://172.17.1.1:35357/v2.0', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'b8827b4d091a4b21b8ca197300070f45'}, {u'url': u'http://172.17.1.1:5000/v2.0', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'f91d6fe537ea410bb72c826ed8bb730a'}], u'type': u'identity', u'id': u'803567b682f5466fab27613b572183ab', u'name': u'keystone'}, {u'endpoints': [{u'url': u'http://172.17.3.1:8080', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'1b64994b6df548049a455a91d69c3864'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'53a57a170f554b878597c7d00ff3f76a'}, {u'url': u'http://172.17.3.1:8080/v1/AUTH_b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'af153a5b6e984c819377a7053c9dbbc8'}], u'type': u'object-store', u'id': u'c05ea9aa79164f2caf431da213d50aaf', u'name': u'swift'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8777', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'4df98868da4e481689d562e683088546'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'585c8964d53c4c2aa422a8d342a2ed1b'}, {u'url': u'http://172.17.1.1:8777', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'6af3265d11c642dcada0b3bd6a533eda'}], u'type': u'metering', u'id': u'c7b3e9e397cd4009b7eb1a4224e90802', u'name': u'ceilometer'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'34030aa1a9924150af35d20bf6357b18'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'7af88786da514c6792f6c2fac5e0f7d6'}, {u'url': u'http://172.17.1.1:8004/v1/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'eb5e2e98467242c69ece98b43abad0a2'}], u'type': u'orchestration', u'id': u'd4ef7d4bfd6143f99a022520748e4c4a', u'name': u'heat'}, {u'endpoints': [{u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'internal', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'39cbdd96720d481097c6cb8b24598fbc'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'public', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'698cc14c5f5545e680747d1e4d1f25ab'}, {u'url': u'http://172.17.1.1:8776/v2/b408e8f5cb56432a96767c83583ea051', u'interface': u'admin', u'region': u'CEURegion', u'region_id': u'CEURegion', u'id': u'd692b27d55124c9d912032b8b5792c8c'}], u'type': u'volumev2', u'id': u'ece29c610df14eaabffe5443ad6765cc', u'name': u'cinderv2'}], u'extras': {}, u'user': {u'domain': {u'id': u'default', u'name': u'Default'}, u'id': u'665b2e5b102a413c90433933aade392b', u'name': u'daddy'}, u'audit_ids': [u'e0BrTSXpQWSAEswpTW5gpQ'], u'issued_at': u'2015-09-06T13:34:08.137155Z'}}, u'show_deleted': False, u'auth_url': u'http://172.17.1.1:5000/v2.0', u'user': None, u'request_id': u'req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011', u'tenant': u'daddy', u'is_admin': False, u'password': None, u'aws_creds': None, u'trust_id': None, u'trustor_user_id': None} unpack_context /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:203\n  2015-09-06 15:34:08.247 19788 INFO heat.engine.service [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Creating stack pg\n  2015-09-06 15:34:08.286 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.template.HOTemplate20141016 object at 0x41f4d90> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32\n  2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] <heat.engine.hot.parameters.HOTParameters object at 0x2e08ad0> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33\n  2015-09-06 15:34:08.287 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44\n  2015-09-06 15:34:08.288 19788 DEBUG heat.engine.parameter_groups [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] ['OS::project_id', u'dns', 'OS::stack_id', u'zone', u'pgmaster_fix', u'image_id', u'key', u'volsize', u'pgslave1_fix', u'cidr', u'public_network', u'pgpool_fix'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45\n  2015-09-06 15:34:08.336 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitConditionHandle \"pgmaster_waithandle\"\n  2015-09-06 15:34:08.337 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating SecurityGroup \"sec_group_postgres\"\n  2015-09-06 15:34:08.341 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Net \"postgres_network\"\n  2015-09-06 15:34:08.342 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Router \"router\"\n  2015-09-06 15:34:08.343 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating CinderVolume \"cinder_volume\"\n  2015-09-06 15:34:08.344 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Subnet \"postgres_subnet\"\n  2015-09-06 15:34:08.345 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgslave1_port\"\n  2015-09-06 15:34:08.347 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Port \"pgpool_port\"\n  2015-09-06 15:34:08.348 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating RouterInterface \"router-interface\"\n  2015-09-06 15:34:08.349 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIP \"pgpool_floating\"\n  2015-09-06 15:34:08.359 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy]\n  REQ: curl -i http://172.17.1.1:9696/v2.0/networks.json?fields=id&name=external -X GET -H \"User-Agent: python-neutronclient\" -H \"X-Auth-Token: 4cef1e38403e46ab86532aeb38dbd8d6\"\n   http_log_req /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:131\n  2015-09-06 15:34:08.426 19788 DEBUG neutronclient.client [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] RESP:200 {'date': 'Sun, 06 Sep 2015 13:34:08 GMT', 'connection': 'keep-alive', 'content-type': 'application/json; charset=UTF-8', 'content-length': '62', 'x-openstack-request-id': 'req-6c98a7ec-2cdb-441a-abcc-18abeebb333c'} {\"networks\": [{\"id\": \"ebf5cd8c-aacd-406e-80e0-8e81d381e5c7\"}]}\n   http_log_resp /usr/lib/python2.7/site-packages/neutronclient/common/utils.py:140\n  2015-09-06 15:34:08.427 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating FloatingIPAssociation \"pgpool_floating_ip_assoc\"\n  2015-09-06 15:34:08.429 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating HeatWaitCondition \"pgmaster_waitcond\"\n  2015-09-06 15:34:08.430 19788 INFO heat.engine.resource [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Validating Server \"pgslave1\"\n  2015-09-06 15:34:08.446 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] curl -g -i -X GET -H 'Accept-Encoding: gzip, deflate' -H 'Accept: */*' -H 'User-Agent: python-glanceclient' -H 'Connection: keep-alive' -H 'X-Auth-Token: {SHA1}44936731f6e5b70c5228d21aabc62afd866a78ca' -H 'Content-Type: application/octet-stream' http://172.17.1.1:9292/v1/images/detail?limit=20&name=Centos+7 log_curl_request /usr/lib/python2.7/site-packages/glanceclient/common/http.py:186\n  2015-09-06 15:34:08.659 19788 DEBUG glanceclient.common.http [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy]\n  HTTP/1.1 200 OK\n  date: Sun, 06 Sep 2015 13:34:08 GMT\n  connection: keep-alive\n  content-type: application/json; charset=UTF-8\n  content-length: 499\n  x-openstack-request-id: req-req-8a14ebcf-d30b-4299-9894-0bf77aeeb7f5\n\n  {\"images\": [{\"status\": \"active\", \"deleted_at\": null, \"name\": \"Centos 7\", \"deleted\": false, \"container_format\": \"bare\", \"created_at\": \"2015-09-04T07:42:59.000000\", \"disk_format\": \"qcow2\", \"updated_at\": \"2015-09-04T07:43:30.000000\", \"min_disk\": 0, \"protected\": false, \"id\": \"b28cef81-51f1-40fb-b126-8687eb46a7c1\", \"min_ram\": 0, \"checksum\": \"9eca98f4b3ad7e6dd4390a9d181381c9\", \"owner\": \"8c09606877414da2bbdd6193cc5c51ae\", \"is_public\": true, \"virtual_size\": null, \"properties\": {}, \"size\": 1004994560}]}\n   log_http_response /usr/lib/python2.7/site-packages/glanceclient/common/http.py:200\n  2015-09-06 15:34:08.661 19788 INFO heat.engine.stack [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions'\n  2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging.rpc.dispatcher [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Expected exception during message handling (Property error: resources.pgslave1.properties.flavor: 'OpenStackComputeShell' object has no attribute '_discover_extensions') _dispatch_and_reply /usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py:145\n  2015-09-06 15:34:08.662 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Pool creating new connection create /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:92\n  2015-09-06 15:34:08.665 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connecting to AMQP server on 172.17.1.1:5672\n  2015-09-06 15:34:08.686 19788 INFO oslo_messaging._drivers.impl_rabbit [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] Connected to AMQP server on 172.17.1.1:5672\n  2015-09-06 15:34:08.689 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is caffa70ef55542bb84eae0c7b0ec4d9a. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n  2015-09-06 15:34:08.692 19788 DEBUG oslo_messaging._drivers.amqp [req-8a8e6280-4061-4cd1-9ed2-f8c95ea43011 - daddy] UNIQUE_ID is 8859adbc2f5c4d648cc337c52e286e8e. _add_unique_id /usr/lib/python2.7/site-packages/oslo_messaging/_drivers/amqp.py:258\n  --------------------\n\n  As I understand heat-engine try to call novaclient's shell method\n  '_discover_extensions', which is not exists.\n\n  Reproduce steps:\n  --------------------\n\n  1. Install latest Openstack Kilo on Centos 7\n  2. create stack\n\n \n  Expected result:\n  -------------------\n  create stack successfully\n\n  Actual result:\n  ----------------\n  stack create failed due to inconsistency between heat-engine and novaclient\n\n \n  Nova versions:\n  ----------------\n  openstack-nova-api-2015.1.1-1.el7.noarch\n  openstack-nova-common-2015.1.1-1.el7.noarch\n  python-nova-2015.1.1-1.el7.noarch\n  openstack-nova-scheduler-2015.1.1-1.el7.noarch\n  python-novaclient-2.23.0-1.el7.noarch\n  openstack-nova-novncproxy-2015.1.1-1.el7.noarch\n  openstack-nova-conductor-2015.1.1-1.el7.noarch\n  openstack-nova-console-2015.1.1-1.el7.noarch\n  openstack-nova-cert-2015.1.1-1.el7.noarch\n\n  heat versions:\n  -----------------\n  openstack-heat-api-cfn-2015.1.1-1.el7.noarch\n  python-heatclient-0.6.0-1.el7.noarch\n  openstack-heat-common-2015.1.1-1.el7.noarch\n  openstack-heat-api-2015.1.1-1.el7.noarch\n  openstack-heat-engine-2015.1.1-1.el7.noarch\n\nTo manage notifications about this bug go to:\nhttps://bugs.launchpad.net/heat/+bug/1492759/+subscriptions\n", 
            "date_created": "2015-09-07 06:07:16+00:00", 
            "author": "https://api.launchpad.net/1.0/~kollarl-f"
        }, 
        {
            "content": "kilo version require novaclient >=2.22.0, <2.24.0\n\nhttps://github.com/openstack/heat/blob/stable/kilo/requirements.txt#L36\n\nIn 2.24.0 version, novaclient has _discover_extensions\n\nhttps://github.com/openstack/python-novaclient/blob/2.24.0/novaclient/shell.py#L465-L475\n\nBetter restart heat-engine after reinstall novaclient.", 
            "date_created": "2015-09-14 09:30:52.082039+00:00", 
            "author": "https://api.launchpad.net/1.0/~ethanlynn"
        }, 
        {
            "content": "This looks like a node specific dependency issue", 
            "date_created": "2015-09-15 23:00:50.418376+00:00", 
            "author": "https://api.launchpad.net/1.0/~steve-stevebaker"
        }, 
        {
            "content": "[Expired for OpenStack Compute (nova) because there has been no activity for 60 days.]", 
            "date_created": "2015-11-15 04:17:37.708420+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }, 
        {
            "content": "Hi, I'm currently experiencing the same issue. Does anyone have a solution for this yet? \n\nThis is what I have:\n\nOpenstack Kilo on Centos 7\n\n# nova --version\n3.3.0\n\n# rpm -qa | grep nova\nopenstack-nova-conductor-2015.1.1-1.el7.noarch\npython-novaclient-2.23.0-1.el7.noarch\nopenstack-nova-scheduler-2015.1.1-1.el7.noarch\nopenstack-nova-api-2015.1.1-1.el7.noarch\nopenstack-nova-console-2015.1.1-1.el7.noarch\nopenstack-nova-novncproxy-2015.1.1-1.el7.noarch\npython-nova-2015.1.1-1.el7.noarch\nopenstack-nova-compute-2015.1.1-1.el7.noarch\nopenstack-nova-cert-2015.1.1-1.el7.noarch\nopenstack-nova-common-2015.1.1-1.el7.noarch\n\n# rpm -qa | grep heat\nopenstack-heat-api-2015.1.1-1.el7.noarch\nopenstack-heat-engine-2015.1.1-1.el7.noarch\nopenstack-heat-common-2015.1.1-1.el7.noarch\npython-heatclient-0.6.0-1.el7.noarch\nopenstack-heat-api-cfn-2015.1.1-1.el7.noarch\n", 
            "date_created": "2016-03-03 05:45:56.774080+00:00", 
            "author": "https://api.launchpad.net/1.0/~ricky-yunata"
        }, 
        {
            "content": "Hi ryunata,\n\nThis is what I have:\n\nOpenstack Kilo on Ubuntu Server 14.04\n\n# nova --version\n2.24.0\n\n# aptitude versions python-novaclient\ni   1:2.22.0-0ubuntu2~cloud0\n\nSolution to my issue:\n\n# pip install python-novaclient==2.24\n\nRegards,\n\nIgor", 
            "date_created": "2016-03-14 13:57:01.863160+00:00", 
            "author": "https://api.launchpad.net/1.0/~igoravila"
        }, 
        {
            "content": "Hi Igor, \n\nThanks for your comment. I tried upgrading it to novaclient 2.24 but it does not have any effect. When I tried to deploy the heat template, I received the same error \"ERROR: Property error: : resources.server.properties.flavor: : 'OpenStackComputeShell' object has no attribute '_discover_extensions'\"\n\nThis is because I have upgraded the keystone to V3. I tried to run heat template on my other openstack environment with keystone V2 and it works. ", 
            "date_created": "2016-03-23 04:21:00.290818+00:00", 
            "author": "https://api.launchpad.net/1.0/~ricky-yunata"
        }, 
        {
            "content": "What should I do? I Have tested several fixes and so far any worked.\n\nceilometer in version 2015.1.2 of OpenStack Kilo works.\n\nceilometer in version 2015.1.3 of OpenStack Kilo does not work.\n\nIf I install LBaaS, ceilometer does not work.\n\nNeed help. I need ceilometer, heat and LBaaS in Kilo.\n\nIs It possible to downgrade the keystone?", 
            "date_created": "2016-04-13 18:19:49.307076+00:00", 
            "author": "https://api.launchpad.net/1.0/~igoravila"
        }
    ]
}