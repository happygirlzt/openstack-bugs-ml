{
    "status": "Fix Released", 
    "last_updated": "2016-01-21 23:18:51.596024+00:00", 
    "description": "\u2018AttributeError\u2019 exception is getting raised while unshelving instance which is booted from volume\n\nSteps to reproduce:\n------------------------\n1.\tCreate bootable volume\n2.\tCreate instance from bootable volume\n3.\tShelve instance\n4.\tTry to unshelve instance\n\nError log on n-cpu service:\n---------------------------------------\n\n2015-03-24 23:32:13.646 ERROR nova.compute.manager [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] Instance failed to spawn\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] Traceback (most recent call last):\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _unshelve_instance\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     block_device_info=block_device_info)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2342, in spawn\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     block_device_info)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 622, in get_disk_info\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     instance=instance)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 232, in get_disk_bus_for_device_type\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     disk_bus = image_meta.get('properties', {}).get(key)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] AttributeError: 'NoneType' object has no attribute 'get'\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]\n2015-03-24 23:32:13.649 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a\" released by \"do_unshelve_instance\" :: held 1.182s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:456\n2015-03-24 23:32:13.650 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is 9c227430eaf34c64b94f36661ef2ec8f from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.650 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is 7329362a2cab48968ce31760bcac8628. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.696 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is d2388c787036413a9bcf95f55e38027b from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.696 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is c466ff4a11574ff3a1032e85f3d9bd87. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.746 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is 0367b08fd7dd428ab8ef494bb42f1499 from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.746 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is b7395e5e66da4a47ba4132568713d4c4. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.789 DEBUG nova.openstack.common.periodic_task [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Running periodic task ComputeManager._poll_volume_usage from (pid=11271) run_periodic_tasks /opt/stack/nova/nova/openstack/common/periodic_task.py:219\n2015-03-24 23:32:13.789 DEBUG nova.openstack.common.loopingcall [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Dynamic looping call <bound method Service.periodic_tasks of <nova.service.Service object at 0x7f3fad97c450>> sleeping for 3.00 seconds from (pid=11271) _inner /opt/stack/nova/nova/openstack/common/loopingcall.py:132\n2015-03-24 23:32:13.845 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"compute_resources\" acquired by \"update_usage\" :: waited 0.000s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:444\n2015-03-24 23:32:13.845 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"compute_resources\" released by \"update_usage\" :: held 0.000s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:456\n2015-03-24 23:32:13.848 ERROR oslo_messaging.rpc.dispatcher [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Exception during message handling: 'NoneType' object has no attribute 'get'\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     payload)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 310, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 286, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 360, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 338, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 326, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4321, in unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     do_unshelve_instance()\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 445, in inner\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return f(*args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4320, in do_unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     filter_properties, node)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4372, in _unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     instance=instance)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     block_device_info=block_device_info)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2342, in spawn\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     block_device_info)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 622, in get_disk_info\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     instance=instance)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 232, in get_disk_bus_for_device_type\n\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     disk_bus = image_meta.get('properties', {}).get(key)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher AttributeError: 'NoneType' object has no attribute 'get'\n\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher\n2015-03-24 23:32:16.788 DEBUG nova.openstack.common.periodic_task [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Running periodic task ComputeManager._poll_rescued_instances from (pid=11271) run_periodic_tasks /opt/stack/nova/nova/openstack/common/periodic_task.py:219", 
    "tags": [
        "in-stable-kilo"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1436187", 
    "owner": "https://api.launchpad.net/1.0/~pranali-deore", 
    "id": 1436187, 
    "index": 372, 
    "created": "2015-03-25 06:43:10.863561+00:00", 
    "title": "'AttributeError' is getting raised while unshelving instance booted from volume", 
    "comments": [
        {
            "content": "\u2018AttributeError\u2019 exception is getting raised while unshelving instance which is booted from volume\n\nSteps to reproduce:\n------------------------\n1.\tCreate bootable volume\n2.\tCreate instance from bootable volume\n3.\tShelve instance\n4.\tTry to unshelve instance\n\n\nError log on n-cpu service:\n---------------------------------------\n\n2015-03-24 23:32:13.646 ERROR nova.compute.manager [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] Instance failed to spawn\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] Traceback (most recent call last):\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _unshelve_instance\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     block_device_info=block_device_info)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2342, in spawn\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     block_device_info)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 622, in get_disk_info\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     instance=instance)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 232, in get_disk_bus_for_device_type\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]     disk_bus = image_meta.get('properties', {}).get(key)\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a] AttributeError: 'NoneType' object has no attribute 'get'\n2015-03-24 23:32:13.646 TRACE nova.compute.manager [instance: 183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a]\n2015-03-24 23:32:13.649 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"183c8ba3-3074-47aa-bc0c-bd9cea9c6d2a\" released by \"do_unshelve_instance\" :: held 1.182s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:456\n2015-03-24 23:32:13.650 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is 9c227430eaf34c64b94f36661ef2ec8f from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.650 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is 7329362a2cab48968ce31760bcac8628. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.696 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is d2388c787036413a9bcf95f55e38027b from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.696 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is c466ff4a11574ff3a1032e85f3d9bd87. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.746 DEBUG oslo_messaging._drivers.amqpdriver [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] MSG_ID is 0367b08fd7dd428ab8ef494bb42f1499 from (pid=11271) _send /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py:310\n2015-03-24 23:32:13.746 DEBUG oslo_messaging._drivers.amqp [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] UNIQUE_ID is b7395e5e66da4a47ba4132568713d4c4. from (pid=11271) _add_unique_id /usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqp.py:226\n2015-03-24 23:32:13.789 DEBUG nova.openstack.common.periodic_task [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Running periodic task ComputeManager._poll_volume_usage from (pid=11271) run_periodic_tasks /opt/stack/nova/nova/openstack/common/periodic_task.py:219\n2015-03-24 23:32:13.789 DEBUG nova.openstack.common.loopingcall [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Dynamic looping call <bound method Service.periodic_tasks of <nova.service.Service object at 0x7f3fad97c450>> sleeping for 3.00 seconds from (pid=11271) _inner /opt/stack/nova/nova/openstack/common/loopingcall.py:132\n2015-03-24 23:32:13.845 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"compute_resources\" acquired by \"update_usage\" :: waited 0.000s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:444\n2015-03-24 23:32:13.845 DEBUG oslo_concurrency.lockutils [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Lock \"compute_resources\" released by \"update_usage\" :: held 0.000s from (pid=11271) inner /usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py:456\n2015-03-24 23:32:13.848 ERROR oslo_messaging.rpc.dispatcher [req-da05280c-be61-4705-a0c9-08ccf3c1d245 demo demo] Exception during message handling: 'NoneType' object has no attribute 'get'\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher Traceback (most recent call last):\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 142, in _dispatch_and_reply\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     executor_callback))\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 186, in _dispatch\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     executor_callback)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 130, in _do_dispatch\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     result = func(ctxt, **new_args)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 88, in wrapped\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     payload)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/exception.py\", line 71, in wrapped\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return f(self, context, *args, **kw)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 310, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     LOG.warning(msg, e, instance_uuid=instance_uuid)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 286, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 360, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 338, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     kwargs['instance'], e, sys.exc_info())\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 326, in decorated_function\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return function(self, context, *args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4321, in unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     do_unshelve_instance()\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 445, in inner\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     return f(*args, **kwargs)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4320, in do_unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     filter_properties, node)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4372, in _unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     instance=instance)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     six.reraise(self.type_, self.value, self.tb)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/compute/manager.py\", line 4368, in _unshelve_instance\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     block_device_info=block_device_info)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 2342, in spawn\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     block_device_info)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 622, in get_disk_info\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     instance=instance)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher   File \"/opt/stack/nova/nova/virt/libvirt/blockinfo.py\", line 232, in get_disk_bus_for_device_type\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher     disk_bus = image_meta.get('properties', {}).get(key)\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher AttributeError: 'NoneType' object has no attribute 'get'\n2015-03-24 23:32:13.848 TRACE oslo_messaging.rpc.dispatcher\n2015-03-24 23:32:16.788 DEBUG nova.openstack.common.periodic_task [req-db2bb34f-1f3d-4ac0-99d0-f6fe78f8393d None None] Running periodic task ComputeManager._poll_rescued_instances from (pid=11271) run_periodic_tasks /opt/stack/nova/nova/openstack/common/periodic_task.py:219", 
            "date_created": "2015-03-25 06:43:10.863561+00:00", 
            "author": "https://api.launchpad.net/1.0/~abhijeet-malawade"
        }, 
        {
            "content": "IMO unshelve of instance booted from volume is broken because of merged patch : https://review.openstack.org/#/c/143055/11", 
            "date_created": "2015-03-25 12:29:05.046431+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranali-deore"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/170031", 
            "date_created": "2015-04-02 07:43:20.379630+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Hi HeHa,\n\nI have already submitted a patch to fix this issue.\nPlease refer: https://review.openstack.org/170031 ", 
            "date_created": "2015-05-15 12:03:17.035079+00:00", 
            "author": "https://api.launchpad.net/1.0/~pranali-deore"
        }, 
        {
            "content": "I think the priority should be set to High here because unshelving is not working for volume backed instances.", 
            "date_created": "2015-07-22 18:15:48.258221+00:00", 
            "author": "https://api.launchpad.net/1.0/~tpatil"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/170031\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=95ca590303c531697e8f4e38a1ce1f5bcf0fd0ba\nSubmitter: Jenkins\nBranch:    master\n\ncommit 95ca590303c531697e8f4e38a1ce1f5bcf0fd0ba\nAuthor: PranaliDeore <email address hidden>\nDate:   Tue Mar 31 07:26:35 2015 -0700\n\n    Unshelving volume backed instance fails\n    \n    Unshelving volume backed instance is failing with\n    'AttributeError' due to change\n    I2173d9bddf894cbf7e56bb091421b6569766e9dc. In this change,\n    it is assumed that in all cases, image_meta will not be\n    none, but incase of unshelving volume backed instance,\n    image_meta is passed as None.\n    \n    Made provision to get volume_image_metadata of volume and\n    passed it as image_meta to spawn() method.\n    \n    Change-Id: Ic023853dbd787f0f29877d6135adb7299a87abdb\n    Closes-Bug: #1436187\n", 
            "date_created": "2015-08-14 02:49:35.179309+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/kilo\nReview: https://review.openstack.org/215008", 
            "date_created": "2015-08-20 08:27:52.804505+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/215008\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=e16fcfa9d2eae03ad4b14ee8dbbc0064c1c86656\nSubmitter: Jenkins\nBranch:    stable/kilo\n\ncommit e16fcfa9d2eae03ad4b14ee8dbbc0064c1c86656\nAuthor: PranaliDeore <email address hidden>\nDate:   Tue Mar 31 07:26:35 2015 -0700\n\n    Unshelving volume backed instance fails\n    \n    Unshelving volume backed instance is failing with\n    'AttributeError' due to change\n    I2173d9bddf894cbf7e56bb091421b6569766e9dc. In this change,\n    it is assumed that in all cases, image_meta will not be\n    none, but incase of unshelving volume backed instance,\n    image_meta is passed as None.\n    \n    Made provision to get volume_image_metadata of volume and\n    passed it as image_meta to spawn() method.\n    \n    Change-Id: Ic023853dbd787f0f29877d6135adb7299a87abdb\n    Closes-Bug: #1436187\n    (cherry picked from commit 95ca590303c531697e8f4e38a1ce1f5bcf0fd0ba)\n", 
            "date_created": "2015-09-14 14:06:34.204555+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}