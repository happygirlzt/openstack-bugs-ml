{
    "status": "Invalid", 
    "last_updated": "2017-08-10 05:41:13.232424+00:00", 
    "description": "Aug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] Unexpected exception in API method: MessagingTimeout: Timed out waiting for a reply to message ID d5abd16bee8846eaa764440df982bfab\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions Traceback (most recent call last):\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 336, in wrapped\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 108, in wrapper\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/remote_consoles.py\", line 82, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 192, in wrapped\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 182, in inner\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 3599, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     instance=instance, console_type=console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/rpcapi.py\", line 614, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     instance=instance, console_type=console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py\", line 169, in call\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     retry=self.retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/transport.py\", line 123, in _send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 578, in send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     retry=retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 567, in _send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     result = self._waiter.wait(msg_id, timeout)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 459, in wait\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     message = self.waiters.get(msg_id, timeout=timeout)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 347, in get\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     'to message ID %s' % msg_id)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions MessagingTimeout: Timed out waiting for a reply to message ID d5abd16bee8846eaa764440df982bfab\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions \nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: INFO nova.api.openstack.wsgi [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'>: HTTPInternalServerError: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'>\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: DEBUG nova.api.openstack.wsgi [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'> {{(pid=8810) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1029}}\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: [pid: 8810|app: 0|req: 14/25] 192.168.22.81 () {64 vars in 1382 bytes} [Thu Aug 10 10:07:12 2017] POST /compute/v2.1/servers/cd49a0d1-2ae8-4f24-94ef-06eeef42a39c/action => generated 216 bytes in 60219 msecs (HTTP/1.1 500) 9 headers in 391 bytes (1 switches on core 0)", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1709747", 
    "owner": "None", 
    "id": 1709747, 
    "index": 6979, 
    "created": "2017-08-10 02:13:00.045059+00:00", 
    "title": "500 error MessagingTimeout from API when getting SPICE console", 
    "comments": [
        {
            "content": "Aug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] Unexpected exception in API method: MessagingTimeout: Timed out waiting for a reply to message ID d5abd16bee8846eaa764440df982bfab\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions Traceback (most recent call last):\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/extensions.py\", line 336, in wrapped\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/validation/__init__.py\", line 108, in wrapper\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/api/openstack/compute/remote_consoles.py\", line 82, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 192, in wrapped\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return function(self, context, instance, *args, **kwargs)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 182, in inner\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     return f(self, context, instance, *args, **kw)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/api.py\", line 3599, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     instance=instance, console_type=console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/opt/stack/nova/nova/compute/rpcapi.py\", line 614, in get_spice_console\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     instance=instance, console_type=console_type)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py\", line 169, in call\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     retry=self.retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/transport.py\", line 123, in _send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 578, in send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     retry=retry)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 567, in _send\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     result = self._waiter.wait(msg_id, timeout)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 459, in wait\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     message = self.waiters.get(msg_id, timeout=timeout)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 347, in get\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions     'to message ID %s' % msg_id)\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions MessagingTimeout: Timed out waiting for a reply to message ID d5abd16bee8846eaa764440df982bfab\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: ERROR nova.api.openstack.extensions \nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: INFO nova.api.openstack.wsgi [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'>: HTTPInternalServerError: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'>\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: DEBUG nova.api.openstack.wsgi [None req-03396686-9700-4323-b7e5-1054fcc167d2 alt_demo admin] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: <class 'oslo_messaging.exceptions.MessagingTimeout'> {{(pid=8810) __call__ /opt/stack/nova/nova/api/openstack/wsgi.py:1029}}\nAug 10 10:08:12 ubuntudbs <email address hidden>[8770]: [pid: 8810|app: 0|req: 14/25] 192.168.22.81 () {64 vars in 1382 bytes} [Thu Aug 10 10:07:12 2017] POST /compute/v2.1/servers/cd49a0d1-2ae8-4f24-94ef-06eeef42a39c/action => generated 216 bytes in 60219 msecs (HTTP/1.1 500) 9 headers in 391 bytes (1 switches on core 0)", 
            "date_created": "2017-08-10 02:13:00.045059+00:00", 
            "author": "https://api.launchpad.net/1.0/~guoshuaijie"
        }, 
        {
            "content": "This isn't really a valid bug. There is obviously an RPC message timeout when the nova-api service is calling the nova-compute service to get a SPICE console for a given instance, but you'd have to do some debugging on why the rpc timeout is happening. Is there some failure or errors in the compute logs? Can you increase the rpc timeout and see if that makes a difference?", 
            "date_created": "2017-08-10 02:28:26.005381+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Is a spice console even properly configured and enabled on the compute service for the instance?", 
            "date_created": "2017-08-10 02:28:45.125558+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Alternatively, do you see any issues in the nova-consoleauth logs?", 
            "date_created": "2017-08-10 02:31:37.657569+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "thanks for your replying,I think I find the cause.\nyesterday,I uninstalled my iptables for testing,.maybe that's why this happened.\nthanks a lot.", 
            "date_created": "2017-08-10 05:41:12.251924+00:00", 
            "author": "https://api.launchpad.net/1.0/~guoshuaijie"
        }
    ]
}