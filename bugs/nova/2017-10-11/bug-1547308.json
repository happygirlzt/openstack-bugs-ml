{
    "status": "Won't Fix", 
    "last_updated": "2016-02-19 20:25:21.172018+00:00", 
    "description": "Version:\nKilo\n\nWhen I was trying to build instance indicating server group on my child cell, I used the following command:\nnova boot --flavor m1.tiny --image cirros-0.3.4-x86_64 --nic net-id=59c9203b-61a4-44a7-9ccf-76894e270092 test1 --hint target_cell='api_cell!child_cell' --\n\nhint group=d37a1bcc-51fb-47de-81f3-113b96c5368f\n\nBut build failed because child cell can't find the group server id. Here are logs in nova-conductor.log:\n\n2016-02-19 11:00:49.174 21735 ERROR nova.scheduler.utils [req-3334943a-e6c8-4674-91bd-b86428ecf7ca 0e01d65358f843958b5ea1b9fa13e1c8 \n\n9f999506968d4c77ba32a00502f2836b - - -] [instance: 8d8e6381-ad27-4686-9723-157ffd953b55] Error from last host: zte-VirtualBox (node zte-VirtualBox): \n\n[u'Traceback (most recent call last):\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2218, in _do_build_and_run_instance\\n    \n\nfilter_properties)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2360, in _build_and_run_instance\\n    \n\ninstance_uuid=instance.uuid, reason=six.text_type(e))\\n', u'RescheduledException: Build of instance 8d8e6381-ad27-4686-9723-157ffd953b55 was re-scheduled: \n\nInstance group d37a1bcc-51fb-47de-81f3-113b96c5368f could not be found.\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/conductor/manager.py\", line 422, in _object_dispatch\\n    return getattr(target, method)(*args, **kwargs)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/objects/base.py\", line 163, in wrapper\\n    result = fn(cls, context, *args, **kwargs)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/objects/instance_group.py\", line 80, in get_by_uuid\\n    db_inst = db.instance_group_get(context, uuid)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/db/api.py\", line 809, in instance_group_get\\n    return IMPL.instance_group_get(context, group_uuid)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/db/sqlalchemy/api.py\", line 6186, in instance_group_get\\n    raise exception.InstanceGroupNotFound(group_uuid=group_uuid)\n\n\\n\\nInstanceGroupNotFound: Instance group d37a1bcc-51fb-47de-81f3-113b96c5368f could not be found.\\n\\n']\n\nIn API cell nova database:\nMariaDB [nova]> select * from instance_groups;\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n| created_at          | updated_at | deleted_at | deleted | id | user_id                          | project_id                       | uuid                  \n\n               | name   |\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n| 2016-01-26 09:06:06 | NULL       | NULL       |       0 |  1 | 0e01d65358f843958b5ea1b9fa13e1c8 | 9f999506968d4c77ba32a00502f2836b | d37a1bcc-51fb-47de-\n\n81f3-113b96c5368f | group1 |\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n1 row in set (0.00 sec)\n\n\nIn Child cell nova database:\nMariaDB [nova]> select * from instance_groups;\nEmpty set (0.00 sec)\n\n\nThere is no this instance_group in child cell database.This is the caustion of above error.", 
    "tags": [
        "cells"
    ], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1547308", 
    "owner": "None", 
    "id": 1547308, 
    "index": 684, 
    "created": "2016-02-19 03:06:33.033829+00:00", 
    "title": "can not find server group on child cell when building instance on it", 
    "comments": [
        {
            "content": "Version:\nKilo\n\nWhen I was trying to build instance indicating server group on my child cell, I used the following command:\nnova boot --flavor m1.tiny --image cirros-0.3.4-x86_64 --nic net-id=59c9203b-61a4-44a7-9ccf-76894e270092 test1 --hint target_cell='api_cell!child_cell' --\n\nhint group=d37a1bcc-51fb-47de-81f3-113b96c5368f\n\nBut build failed because child cell can't find the group server id. Here are logs in nova-conductor.log:\n\n2016-02-19 11:00:49.174 21735 ERROR nova.scheduler.utils [req-3334943a-e6c8-4674-91bd-b86428ecf7ca 0e01d65358f843958b5ea1b9fa13e1c8 \n\n9f999506968d4c77ba32a00502f2836b - - -] [instance: 8d8e6381-ad27-4686-9723-157ffd953b55] Error from last host: zte-VirtualBox (node zte-VirtualBox): \n\n[u'Traceback (most recent call last):\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2218, in _do_build_and_run_instance\\n    \n\nfilter_properties)\\n', u'  File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 2360, in _build_and_run_instance\\n    \n\ninstance_uuid=instance.uuid, reason=six.text_type(e))\\n', u'RescheduledException: Build of instance 8d8e6381-ad27-4686-9723-157ffd953b55 was re-scheduled: \n\nInstance group d37a1bcc-51fb-47de-81f3-113b96c5368f could not be found.\\nTraceback (most recent call last):\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/conductor/manager.py\", line 422, in _object_dispatch\\n    return getattr(target, method)(*args, **kwargs)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/objects/base.py\", line 163, in wrapper\\n    result = fn(cls, context, *args, **kwargs)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/objects/instance_group.py\", line 80, in get_by_uuid\\n    db_inst = db.instance_group_get(context, uuid)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/db/api.py\", line 809, in instance_group_get\\n    return IMPL.instance_group_get(context, group_uuid)\\n\\n  File \"/usr/lib/python2.7/dist-\n\npackages/nova/db/sqlalchemy/api.py\", line 6186, in instance_group_get\\n    raise exception.InstanceGroupNotFound(group_uuid=group_uuid)\n\n\\n\\nInstanceGroupNotFound: Instance group d37a1bcc-51fb-47de-81f3-113b96c5368f could not be found.\\n\\n']\n\nIn API cell nova database:\nMariaDB [nova]> select * from instance_groups;\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n| created_at          | updated_at | deleted_at | deleted | id | user_id                          | project_id                       | uuid                  \n\n               | name   |\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n| 2016-01-26 09:06:06 | NULL       | NULL       |       0 |  1 | 0e01d65358f843958b5ea1b9fa13e1c8 | 9f999506968d4c77ba32a00502f2836b | d37a1bcc-51fb-47de-\n\n81f3-113b96c5368f | group1 |\n+---------------------+------------+------------+---------+----+----------------------------------+----------------------------------+---------------------\n\n-----------------+--------+\n1 row in set (0.00 sec)\n\n\nIn Child cell nova database:\nMariaDB [nova]> select * from instance_groups;\nEmpty set (0.00 sec)\n\n\nThere is no this instance_group in child cell database.This is the caustion of above error.", 
            "date_created": "2016-02-19 03:06:33.033829+00:00", 
            "author": "https://api.launchpad.net/1.0/~li-kun130"
        }, 
        {
            "content": "Cells v1 is frozen on function. Server groups was never implemented for cells. ", 
            "date_created": "2016-02-19 20:25:20.073227+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}