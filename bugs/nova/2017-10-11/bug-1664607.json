{
    "status": "Fix Released", 
    "last_updated": "2017-06-16 17:36:31.868599+00:00", 
    "description": "https://review.openstack.org/#/c/431800/ merged yesterday which unskips test_stamp_pattern which uses cells v1. The test uses security groups which cells v1 doesn't support, so it breaks the cells v1 job and blocks nova's gate.\n\nhttp://logs.openstack.org/57/433257/2/check/gate-tempest-dsvm-cells-ubuntu-xenial/1732de2/logs/screen-n-cell-child.txt.gz#_2017-02-13_22_55_18_192\n\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Couldn't communicate with cell 'child'\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler Traceback (most recent call last):\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 178, in _build_instances\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     image, security_groups, block_device_mapping)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 109, in _create_instances_here\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     num_instances, i)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1539, in create_db_entry_for_new_instance\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     instance.create()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return fn(self, *args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/objects/instance.py\", line 550, in create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     db_inst = db.instance_create(self._context, updates)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/api.py\", line 715, in instance_create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return IMPL.instance_create(context, values)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 180, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(*args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 151, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     ectxt.value = e.inner_exc\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     self.force_reraise()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     six.reraise(self.type_, self.value, self.tb)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 139, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(*args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 251, in wrapped\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(context, *args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1815, in instance_create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     instance_ref.security_groups = _get_sec_group_models(security_groups)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1810, in _get_sec_group_models\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     context, security_groups))\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 4364, in _security_group_get_by_names\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     project_id=context.project_id, security_group_id=group_name)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler SecurityGroupNotFoundForProject: Security group tempest-TestStampPattern-662835790 not found for project eda710d52d7140dc9bc1081995cb1315.\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler \n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Couldn't communicate with any cells\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Error scheduling instances ['8cd170c4-17bc-48e1-ab38-6195803ea270']\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler Traceback (most recent call last):\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 226, in _schedule_build_to_cells\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     method_kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 195, in _build_instances\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     raise exception.NoCellsAvailable()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler NoCellsAvailable: No cells available matching scheduling criteria.\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler", 
    "tags": [
        "cellsv1"
    ], 
    "importance": "Critical", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1664607", 
    "owner": "https://api.launchpad.net/1.0/~mriedem", 
    "id": 1664607, 
    "index": 287, 
    "created": "2017-02-14 15:20:20.946949+00:00", 
    "title": "test_stamp_pattern failing cells v1 job", 
    "comments": [
        {
            "content": "https://review.openstack.org/#/c/431800/ merged yesterday which unskips test_stamp_pattern which uses cells v1. The test uses security groups which cells v1 doesn't support, so it breaks the cells v1 job and blocks nova's gate.\n\nhttp://logs.openstack.org/57/433257/2/check/gate-tempest-dsvm-cells-ubuntu-xenial/1732de2/logs/screen-n-cell-child.txt.gz#_2017-02-13_22_55_18_192\n\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Couldn't communicate with cell 'child'\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler Traceback (most recent call last):\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 178, in _build_instances\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     image, security_groups, block_device_mapping)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 109, in _create_instances_here\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     num_instances, i)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/compute/api.py\", line 1539, in create_db_entry_for_new_instance\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     instance.create()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_versionedobjects/base.py\", line 226, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return fn(self, *args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/objects/instance.py\", line 550, in create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     db_inst = db.instance_create(self._context, updates)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/api.py\", line 715, in instance_create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return IMPL.instance_create(context, values)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 180, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(*args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 151, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     ectxt.value = e.inner_exc\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     self.force_reraise()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     six.reraise(self.type_, self.value, self.tb)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/usr/local/lib/python2.7/dist-packages/oslo_db/api.py\", line 139, in wrapper\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(*args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 251, in wrapped\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     return f(context, *args, **kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1815, in instance_create\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     instance_ref.security_groups = _get_sec_group_models(security_groups)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 1810, in _get_sec_group_models\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     context, security_groups))\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/db/sqlalchemy/api.py\", line 4364, in _security_group_get_by_names\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     project_id=context.project_id, security_group_id=group_name)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler SecurityGroupNotFoundForProject: Security group tempest-TestStampPattern-662835790 not found for project eda710d52d7140dc9bc1081995cb1315.\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler \n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Couldn't communicate with any cells\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler [req-d4aaa51d-7595-4881-9fa4-2e52425fec26 tempest-TestStampPattern-1688631461 tempest-TestStampPattern-1688631461] Error scheduling instances ['8cd170c4-17bc-48e1-ab38-6195803ea270']\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler Traceback (most recent call last):\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 226, in _schedule_build_to_cells\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     method_kwargs)\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler   File \"/opt/stack/new/nova/nova/cells/scheduler.py\", line 195, in _build_instances\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler     raise exception.NoCellsAvailable()\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler NoCellsAvailable: No cells available matching scheduling criteria.\n2017-02-13 22:55:18.192 25510 ERROR nova.cells.scheduler", 
            "date_created": "2017-02-14 15:20:20.946949+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/433707", 
            "date_created": "2017-02-14 15:26:30.436166+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/ocata\nReview: https://review.openstack.org/433815", 
            "date_created": "2017-02-14 17:39:53.113441+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/newton\nReview: https://review.openstack.org/433816", 
            "date_created": "2017-02-14 17:40:37.797154+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/mitaka\nReview: https://review.openstack.org/433825", 
            "date_created": "2017-02-14 17:49:37.658252+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "http://logstash.openstack.org/#dashboard/file/logstash.json?query=message%3A%5C%22TestStampPattern%5C%22%20AND%20message%3A%5C%22SecurityGroupNotFoundForProject%5C%22%20AND%20tags%3A%5C%22screen-n-cell-child.txt%5C%22&from=7d", 
            "date_created": "2017-02-14 20:45:58.890014+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/433815\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=18fb0a17298dce2b361cc47f16d0d1500484f0d1\nSubmitter: Jenkins\nBranch:    stable/ocata\n\ncommit 18fb0a17298dce2b361cc47f16d0d1500484f0d1\nAuthor: Matt Riedemann <email address hidden>\nDate:   Tue Feb 14 10:25:24 2017 -0500\n\n    Skip test_stamp_pattern in cells v1 job\n    \n    test_stamp_pattern was recently unskipped:\n    \n    I2c13099595d8ee8099e02e3f06096078c7d27c34\n    \n    It uses security groups which cells v1 does\n    not support, so we have to skip this test in\n    the cells v1 job.\n    \n    Change-Id: Id7e8351026ca86694fc9814002b96260f6ba10f9\n    Closes-Bug: #1664607\n    (cherry picked from commit d12535839817c4385986ccaffe52b5903d3088ca)\n", 
            "date_created": "2017-02-15 00:21:28.828309+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/433816\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=db075faf2a767cf3f62768e85a79c3cff200d3cb\nSubmitter: Jenkins\nBranch:    stable/newton\n\ncommit db075faf2a767cf3f62768e85a79c3cff200d3cb\nAuthor: Matt Riedemann <email address hidden>\nDate:   Tue Feb 14 10:25:24 2017 -0500\n\n    Skip test_stamp_pattern in cells v1 job\n    \n    test_stamp_pattern was recently unskipped:\n    \n    I2c13099595d8ee8099e02e3f06096078c7d27c34\n    \n    It uses security groups which cells v1 does\n    not support, so we have to skip this test in\n    the cells v1 job.\n    \n    Change-Id: Id7e8351026ca86694fc9814002b96260f6ba10f9\n    Closes-Bug: #1664607\n    (cherry picked from commit d12535839817c4385986ccaffe52b5903d3088ca)\n    (cherry picked from commit 18fb0a17298dce2b361cc47f16d0d1500484f0d1)\n", 
            "date_created": "2017-02-15 00:43:51.513168+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/433707\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=d12535839817c4385986ccaffe52b5903d3088ca\nSubmitter: Jenkins\nBranch:    master\n\ncommit d12535839817c4385986ccaffe52b5903d3088ca\nAuthor: Matt Riedemann <email address hidden>\nDate:   Tue Feb 14 10:25:24 2017 -0500\n\n    Skip test_stamp_pattern in cells v1 job\n    \n    test_stamp_pattern was recently unskipped:\n    \n    I2c13099595d8ee8099e02e3f06096078c7d27c34\n    \n    It uses security groups which cells v1 does\n    not support, so we have to skip this test in\n    the cells v1 job.\n    \n    Change-Id: Id7e8351026ca86694fc9814002b96260f6ba10f9\n    Closes-Bug: #1664607\n", 
            "date_created": "2017-02-15 01:47:58.208824+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0rc2 release candidate.", 
            "date_created": "2017-02-17 04:57:58.164746+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/433825\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=fb1b9f224d6f05674667a7ddf7c8ba77f4f257aa\nSubmitter: Jenkins\nBranch:    stable/mitaka\n\ncommit fb1b9f224d6f05674667a7ddf7c8ba77f4f257aa\nAuthor: Matt Riedemann <email address hidden>\nDate:   Tue Feb 14 10:25:24 2017 -0500\n\n    Skip test_stamp_pattern in cells v1 job\n    \n    test_stamp_pattern was recently unskipped:\n    \n    I2c13099595d8ee8099e02e3f06096078c7d27c34\n    \n    It uses security groups which cells v1 does\n    not support, so we have to skip this test in\n    the cells v1 job.\n    \n    Conflicts:\n            devstack/tempest-dsvm-cells-rc\n    \n    NOTE(mriedem): The conflict is due to not having\n    b113cb13e95b4d9305f093342ad4d34378aee8bb in mitaka.\n    \n    Change-Id: Id7e8351026ca86694fc9814002b96260f6ba10f9\n    Closes-Bug: #1664607\n    (cherry picked from commit d12535839817c4385986ccaffe52b5903d3088ca)\n    (cherry picked from commit 18fb0a17298dce2b361cc47f16d0d1500484f0d1)\n    (cherry picked from commit db075faf2a767cf3f62768e85a79c3cff200d3cb)\n", 
            "date_created": "2017-02-17 16:02:08.106540+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.4 release.", 
            "date_created": "2017-02-27 20:28:50.195728+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 13.1.3 release.", 
            "date_created": "2017-02-28 16:00:01.614521+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 16.0.0.0b1 development milestone.", 
            "date_created": "2017-04-14 09:23:55.017114+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}