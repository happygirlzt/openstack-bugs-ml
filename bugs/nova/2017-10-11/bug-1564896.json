{
    "status": "Invalid", 
    "last_updated": "2016-07-13 13:20:41.187074+00:00", 
    "description": "This bug  happen in my environment with these steps on liberty release:\n\n1.  Create a instance by using centos 7 image.  and boot it. every thing work well so far\n2.  Create 10G volume and attach it to this instance  onto  /dev/vda\n\u00a0\u00a0\u00a0\u00a0Note: The volume is LVM based on loop device.\n3.   Format it and mount it,  try to create file under it,  work well.\n4.  Restart  compute node with \"systemctl restart\"\n5.   When it is up,  start all openstack services.  and go to dashboard to start this instance,  it say the install it running, but open the close to it, and found it fail to boot with the following log on screen:\n\n****Boot Failed, Not a bootable disk*****\n\nand  the output from \"nova show <this instance>\" are as\n[root@controller ~(keystone_admin)]# nova show bb5e9b52-0439-42a0-ac53-75a1ed25e7a8\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                     |\n| OS-EXT-AZ:availability_zone          | Nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | compute001                                               |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | compute001                                               |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000051                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2016-03-30T03:53:31.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         |                                                          |\n| created                              | 2016-03-30T03:51:14Z                                     |\n| flavor                               | C1M1D20 (447288ec-4b9c-4a00-9001-8b68e7dc4ee0)           |\n| hostId                               | 375e5133fd870cec7008e67b2ffa1af6551267a593a6825c7a1bcf95 |\n| id                                   | bb5e9b52-0439-42a0-ac53-75a1ed25e7a8                     |\n| image                                | Attempt to boot from volume - no image supplied          |\n| key_name                             | ceshi                                                    |\n| metadata                             | {}                                                       |\n| name                                 | ceph1                                                    |\n| os-extended-volumes:volumes_attached | [{\"id\": \"059e67a5-6229-4a36-8d8a-545b02a9c160\"}]         |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| stacknet network                     | 192.168.30.127, 192.168.199.67                           |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | 8fc7a18927dc433aa4136a3be3548068                         |\n| updated                              | 2016-04-01T12:27:59Z                                     |\n| user_id                              | 284beeb5bc9245098246b733cb8371d7                         |\n+--------------------------------------+----------------------------------------------------------+\n\nThe highlight here is value of image\uff1a  \u201cAttempt to boot from volume - no image supplied \u201d\n\nand the use virsh dumpxml to show the disk is lost. only keep the attached volume here, but it is that this is volume is not a bootable volume.\n\n<disk type='block' device='disk'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<driver name='qemu' type='raw' cache='none'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<source dev='/dev/disk/by-path/ip-192.168.200.30:3260-iscsi-iqn.2010-10.org.openstack:volume-059e67a5-6229-4a36-8d8a-545b02a9c160-lun-0'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<backingStore/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<target dev='vda' bus='virtio'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<serial>059e67a5-6229-4a36-8d8a-545b02a9c160</serial>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<alias name='virtio-disk0'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n\u00a0\u00a0\u00a0\u00a0</disk>\n\u00a0\u00a0\u00a0\u00a0<controller type='usb' index='0'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<alias name='usb'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n\u00a0\u00a0\u00a0\u00a0</controller>\n\u00a0\u00a0\u00a0\u00a0<controller type='pci' index='0' model='pci-root'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<alias name='pci.0'/>\n\u00a0\u00a0\u00a0\u00a0</controller>\n\u00a0\u00a0\u00a0\u00a0<interface type='bridge'>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<mac address='fa:16:3e:33:d1:24'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<source bridge='qbr932ceb9b-bb'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<target dev='tap932ceb9b-bb'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<model type='virtio'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<alias name='net0'/>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n\u00a0\u00a0\u00a0\u00a0</interface>\n\nThe issue here is this cause the configuration for disk crash, and lose the item for hard disk, the lead to the boot failure.\n\nAppend my environment info:\n\n1. Host OS:  Centos 7.2\n2. Openstack: RDO\u3000release\nopenstack-cinder-7.0.1-1.el7.noarch\nopenstack-nova-novncproxy-12.0.0-3.94d6b69git.el7.noarch\nopenstack-utils-2014.2-1.el7.noarch\nopenstack-nova-compute-12.0.0-3.94d6b69git.el7.noarch\nopenstack-swift-proxy-2.5.0-1.el7.noarch\nopenstack-packstack-puppet-7.0.0-0.7.dev1661.gaf13b7e.el7.noarch\nopenstack-nova-common-12.0.0-3.94d6b69git.el7.noarch\nopenstack-neutron-ml2-7.0.0-2.el7.noarch\ncentos-release-openstack-liberty-1-4.el7.noarch\npython-openstackclient-1.7.1-1.el7.noarch\nopenstack-glance-11.0.1-1.el7.noarch\nopenstack-neutron-common-7.0.0-2.el7.noarch\npython2-django-openstack-auth-2.0.1-1.el7.noarch\nopenstack-swift-plugin-swift3-1.7-4.el7.noarch\nopenstack-selinux-0.6.41-1.el7.noarch\nopenstack-nova-scheduler-12.0.0-3.94d6b69git.el7.noarch\nopenstack-swift-account-2.5.0-1.el7.noarch\nopenstack-nova-cert-12.0.0-3.94d6b69git.el7.noarch\nopenstack-swift-container-2.5.0-1.el7.noarch\nopenstack-packstack-7.0.0-0.7.dev1661.gaf13b7e.el7.noarch\nopenstack-nova-api-12.0.0-3.94d6b69git.el7.noarch\nopenstack-nova-conductor-12.0.0-3.94d6b69git.el7.noarch\nopenstack-neutron-openvswitch-7.0.0-2.el7.noarch\nopenstack-dashboard-8.0.0-1.el7.noarch\nopenstack-keystone-8.0.1-1.el7.noarch\nopenstack-swift-2.5.0-1.el7.noarch\nopenstack-puppet-modules-7.0.0-1.el7.noarch\nopenstack-neutron-7.0.0-2.el7.noarch\nopenstack-nova-console-12.0.0-3.94d6b69git.el7.noarch\nopenstack-swift-object-2.5.0-1.el7.noarch\n\nNote, Other instance without volume attached work well.\n\nB.R", 
    "tags": [
        "volumes"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1564896", 
    "owner": "None", 
    "id": 1564896, 
    "index": 6133, 
    "created": "2016-04-01 13:08:42.806692+00:00", 
    "title": "Boot Failed, Not a bootable disk", 
    "comments": [
        {
            "content": "This bug  happen in my environment with these steps on liberty release:\n\n1.  Create a instance by using centos 7 image.  and boot it. every thing work well so far\n2.  Create 10G volume and attach it to this instance  onto  /dev/vda\n3.   Format it and mount it,  try to create file under it,  work well.\n4.  Restart  compute node with \"systemctl restart\"\n5.   When it is up,  start all openstack services.  and go to dashboard to start this instance,  it say the install it running, but open the close to it, and found it fail to boot with the following log on screen:\n\n****Boot Failed, Not a bootable disk*****\n\nand  the output from now show <this instance> are as\n[root@controller ~(keystone_admin)]# nova show bb5e9b52-0439-42a0-ac53-75a1ed25e7a8\n+--------------------------------------+----------------------------------------------------------+\n| Property                             | Value                                                    |\n+--------------------------------------+----------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                     |\n| OS-EXT-AZ:availability_zone          | Nova                                                     |\n| OS-EXT-SRV-ATTR:host                 | compute001                                               |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | compute001                                               |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000051                                        |\n| OS-EXT-STS:power_state               | 1                                                        |\n| OS-EXT-STS:task_state                | -                                                        |\n| OS-EXT-STS:vm_state                  | active                                                   |\n| OS-SRV-USG:launched_at               | 2016-03-30T03:53:31.000000                               |\n| OS-SRV-USG:terminated_at             | -                                                        |\n| accessIPv4                           |                                                          |\n| accessIPv6                           |                                                          |\n| config_drive                         |                                                          |\n| created                              | 2016-03-30T03:51:14Z                                     |\n| flavor                               | C1M1D20 (447288ec-4b9c-4a00-9001-8b68e7dc4ee0)           |\n| hostId                               | 375e5133fd870cec7008e67b2ffa1af6551267a593a6825c7a1bcf95 |\n| id                                   | bb5e9b52-0439-42a0-ac53-75a1ed25e7a8                     |\n| image                                | Attempt to boot from volume - no image supplied          |\n| key_name                             | ceshi                                                    |\n| metadata                             | {}                                                       |\n| name                                 | ceph1                                                    |\n| os-extended-volumes:volumes_attached | [{\"id\": \"059e67a5-6229-4a36-8d8a-545b02a9c160\"}]         |\n| progress                             | 0                                                        |\n| security_groups                      | default                                                  |\n| stacknet network                     | 192.168.30.127, 192.168.199.67                           |\n| status                               | ACTIVE                                                   |\n| tenant_id                            | 8fc7a18927dc433aa4136a3be3548068                         |\n| updated                              | 2016-04-01T12:27:59Z                                     |\n| user_id                              | 284beeb5bc9245098246b733cb8371d7                         |\n+--------------------------------------+----------------------------------------------------------+\n\nThe highlight here is value of image\uff1a  \u201cAttempt to boot from volume - no image supplied \u201d\n\nand the use virsh dumpxml to show the disk is lost. only keep the attached volume here, but it is that this is volume is not a bootable volume.\n\n<disk type='block' device='disk'>\n      <driver name='qemu' type='raw' cache='none'/>\n      <source dev='/dev/disk/by-path/ip-192.168.200.30:3260-iscsi-iqn.2010-10.org.openstack:volume-059e67a5-6229-4a36-8d8a-545b02a9c160-lun-0'/>\n      <backingStore/>\n      <target dev='vda' bus='virtio'/>\n      <serial>059e67a5-6229-4a36-8d8a-545b02a9c160</serial>\n      <alias name='virtio-disk0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n    </disk>\n    <controller type='usb' index='0'>\n      <alias name='usb'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n    </controller>\n    <controller type='pci' index='0' model='pci-root'>\n      <alias name='pci.0'/>\n    </controller>\n    <interface type='bridge'>\n      <mac address='fa:16:3e:33:d1:24'/>\n      <source bridge='qbr932ceb9b-bb'/>\n      <target dev='tap932ceb9b-bb'/>\n      <model type='virtio'/>\n      <alias name='net0'/>\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n    </interface>\n\n\nThe issue here is this cause the configuration for disk crash, and lose the item for hard disk, the lead to the boot failure.\n\n\nB.R", 
            "date_created": "2016-04-01 13:08:42.806692+00:00", 
            "author": "https://api.launchpad.net/1.0/~gao-brian"
        }, 
        {
            "content": "I couldn't reproduce the bug. I followed below steps on devstack:\n\n1. Created an instance using Centos image.\n2. Created a cinder volume and attached it to the instance.\n3. Restarted the compute node.\n4. Restarted openstack services. \n5. Started the instance using nova start. Instance changed from ShutDown state to Active state.\n6. Tried nova show and image id was as expected. (centos image id).", 
            "date_created": "2016-05-16 22:17:39.894866+00:00", 
            "author": "https://api.launchpad.net/1.0/~sujitha-neti"
        }, 
        {
            "content": "This was not reproducable. Can we have an upstream reproduce case (a set of commands to run on devstack) to expose this. ", 
            "date_created": "2016-06-02 16:25:00.404160+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "\nThis bug lacks the necessary information to effectively reproduce and\nfix it, therefore it has been closed. Feel free to reopen the bug by\nproviding the requested information and set the bug status back to \"New\".\n", 
            "date_created": "2016-07-13 13:20:40.683378+00:00", 
            "author": "https://api.launchpad.net/1.0/~mzoeller"
        }
    ]
}