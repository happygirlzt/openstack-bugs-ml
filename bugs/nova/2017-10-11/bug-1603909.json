{
    "status": "In Progress", 
    "last_updated": "2017-07-14 09:59:01.913384+00:00", 
    "description": "Description\n===========\nWhen launching many instances (100 to 200) in parallel on a physical small-medium scale cluster (20-30 compute nodes), Nova sees timeouts from Neutron and fails to clean the ports. This leads to Nova instances having multiple ports instead of one. \n\nA similar issue [1] was reported long time ago but seems like the fix [2] from Nova was never added. \n\n[1] https://bugs.launchpad.net/neutron/+bug/1160442\n[2] https://bugs.launchpad.net/neutron/+bug/1160442/comments/28\n\nSteps to reproduce\n==================\n\nLaunch 200+ VMs in parallel. \n\nExpected result\n===============\n\nAll instances should have port each\n\nActual result\n=============\n\nRandomly some instances have multiple ports allocated. \n\nEnvironment\n===========\n\n3 Controllers, 20 computes\n20 computes are not co-located, means there is some latency between the controllers and computes as well as computes and computes.\n\nKVM hypervisor\n\nNova versions:\nopenstack-nova-common-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-console-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-conductor-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-compute-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-novncproxy-2015.1.2-18.2.el7ost.noarch\npython-nova-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-api-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-cert-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-scheduler-2015.1.2-18.2.el7ost.noarch\npython-novaclient-2.23.0-2.el7ost.noarch\n\n\nNetworking:\nOpenStack Neutron with PLUMgrid plugin (similar results seen on non-PLUMgrid install).\n\nLogs & Configs\n==============\n\nnova.conf is attached\n\nnova-compute logs\n-----------------\n\n2016-07-18 07:41:24.972 36869 ERROR nova.compute.manager [-] Instance failed network setup after 1 attempt(s)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager Traceback (most recent call last):\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1808, in _allocate_network_async\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     dhcp_options=dhcp_options)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 577, in allocate_for_instance\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     self._delete_ports(neutron, instance, created_port_ids)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     six.reraise(self.type_, self.value, self.tb)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 569, in allocate_for_instance\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     security_group_ids, available_macs, dhcp_opts)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 304, in _create_port\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     port_id = port_client.create_port(port_req_body)['port']['id']\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 544, in create_port\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.post(self.ports_path, body=body)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 298, in post\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     headers=headers, params=params)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 200, in do_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     content_type=self.content_type())\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 306, in do_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.request(url, method, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 294, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     resp = super(SessionClient, self).request(*args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/adapter.py\", line 95, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.session.request(url, method, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/utils.py\", line 318, in inner\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return func(*args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 382, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     resp = send(**kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 423, in _send_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     raise exceptions.RequestTimeout(msg)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager RequestTimeout: Request to http://11.1.2.50:9696/v2.0/ports.json timed out (HTTP 408)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager \n2016-07-18 07:41:24.977 36869 ERROR nova.compute.manager [req-76499ba7-5324-4b32-8ec7-b5ceb82e612e 8f2cda8f705849e7a81b6b885ca831f5 7fddfc9832a74ac5844211ef810b5093 - - -] [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] Instance failed to spawn\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] Traceback (most recent call last):\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2486, in _build_resources\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     yield resources\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2358, in _build_and_run_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     block_device_info=block_device_info)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2505, in spawn\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     write_to_disk=True)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4353, in _get_guest_xml\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     network_info_str = str(network_info)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 480, in __str__\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self._sync_wrapper(fn, *args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 463, in _sync_wrapper\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 495, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self[:] = self._gt.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 175, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self._exit_event.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/event.py\", line 121, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return hubs.get_hub().switch()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 294, in switch\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.greenlet.switch()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 214, in main\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     result = function(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1808, in _allocate_network_async\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     dhcp_options=dhcp_options)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 577, in allocate_for_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self._delete_ports(neutron, instance, created_port_ids)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     six.reraise(self.type_, self.value, self.tb)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 569, in allocate_for_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     security_group_ids, available_macs, dhcp_opts)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 304, in _create_port\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     port_id = port_client.create_port(port_req_body)['port']['id']\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 544, in create_port\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.post(self.ports_path, body=body)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 298, in post\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     headers=headers, params=params)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 200, in do_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     content_type=self.content_type())\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 306, in do_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.request(url, method, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 294, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     resp = super(SessionClient, self).request(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/adapter.py\", line 95, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.session.request(url, method, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/utils.py\", line 318, in inner\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return func(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 382, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     resp = send(**kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 423, in _send_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     raise exceptions.RequestTimeout(msg)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] RequestTimeout: Request to http://11.1.2.50:9696/v2.0/ports.json timed out (HTTP 408)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] \n2016-07-18 07:41:25.469 36869 ERROR nova.network.neutronv2.api [req-76499ba7-5324-4b32-8ec7-b5ceb82e612e 8f2cda8f705849e7a81b6b885ca831f5 7fddfc9832a74ac5844211ef810b5093 - - -] Unable to clear device ID for port 'None'\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api Traceback (most recent call last):\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 366, in _unbind_ports\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     port_client.update_port(port_id, port_req_body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 549, in update_port\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 302, in put\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 270, in retry_request\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 211, in do_request\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 185, in _handle_fault_response\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 83, in exception_handler_v20\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     message=message)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api NeutronClientException: 404 Not Found\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api \n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api The resource could not be found.", 
    "tags": [
        "neutron", 
        "openstack-version.kilo"
    ], 
    "importance": "High", 
    "heat": 28, 
    "link": "https://bugs.launchpad.net/nova/+bug/1603909", 
    "owner": "https://api.launchpad.net/1.0/~yyuanyuee", 
    "id": 1603909, 
    "index": 1949, 
    "created": "2016-07-18 09:09:35.750653+00:00", 
    "title": "Nova unable to delete dangling ports on timeout/failure; leads to multiple ports per VM instead of one", 
    "comments": [
        {
            "content": "Description\n===========\nWhen launching many instances (100 to 200) in parallel on a physical small-medium scale cluster (20-30 compute nodes), Nova sees timeouts from Neutron and fails to clean the ports. This leads to Nova instances having multiple ports instead of one. \n\nA similar issue [1] was reported long time ago but seems like the fix [2] from Nova was never added. \n\n[1] https://bugs.launchpad.net/neutron/+bug/1160442\n[2] https://bugs.launchpad.net/neutron/+bug/1160442/comments/28\n\nSteps to reproduce\n==================\n\nLaunch 200+ VMs in parallel. \n\nExpected result\n===============\n\nAll instances should have port each\n\nActual result\n=============\n\nRandomly some instances have multiple ports allocated. \n\nEnvironment\n===========\n\n3 Controllers, 20 computes\n20 computes are not co-located, means there is some latency between the controllers and computes as well as computes and computes.\n\nKVM hypervisor\n\nNova versions:\nopenstack-nova-common-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-console-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-conductor-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-compute-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-novncproxy-2015.1.2-18.2.el7ost.noarch\npython-nova-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-api-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-cert-2015.1.2-18.2.el7ost.noarch\nopenstack-nova-scheduler-2015.1.2-18.2.el7ost.noarch\npython-novaclient-2.23.0-2.el7ost.noarch\n\n\nNetworking:\nOpenStack Neutron with PLUMgrid plugin (similar results seen on non-PLUMgrid install).\n\nLogs & Configs\n==============\n\nnova.conf is attached\n\nnova-compute logs\n-----------------\n\n2016-07-18 07:41:24.972 36869 ERROR nova.compute.manager [-] Instance failed network setup after 1 attempt(s)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager Traceback (most recent call last):\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1808, in _allocate_network_async\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     dhcp_options=dhcp_options)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 577, in allocate_for_instance\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     self._delete_ports(neutron, instance, created_port_ids)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     six.reraise(self.type_, self.value, self.tb)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 569, in allocate_for_instance\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     security_group_ids, available_macs, dhcp_opts)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 304, in _create_port\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     port_id = port_client.create_port(port_req_body)['port']['id']\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 544, in create_port\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.post(self.ports_path, body=body)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 298, in post\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     headers=headers, params=params)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 200, in do_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     content_type=self.content_type())\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 306, in do_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.request(url, method, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 294, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     resp = super(SessionClient, self).request(*args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/adapter.py\", line 95, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return self.session.request(url, method, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/utils.py\", line 318, in inner\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     return func(*args, **kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 382, in request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     resp = send(**kwargs)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 423, in _send_request\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager     raise exceptions.RequestTimeout(msg)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager RequestTimeout: Request to http://11.1.2.50:9696/v2.0/ports.json timed out (HTTP 408)\n2016-07-18 07:41:24.972 36869 TRACE nova.compute.manager \n2016-07-18 07:41:24.977 36869 ERROR nova.compute.manager [req-76499ba7-5324-4b32-8ec7-b5ceb82e612e 8f2cda8f705849e7a81b6b885ca831f5 7fddfc9832a74ac5844211ef810b5093 - - -] [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] Instance failed to spawn\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] Traceback (most recent call last):\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2486, in _build_resources\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     yield resources\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2358, in _build_and_run_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     block_device_info=block_device_info)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 2505, in spawn\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     write_to_disk=True)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4353, in _get_guest_xml\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     network_info_str = str(network_info)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 480, in __str__\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self._sync_wrapper(fn, *args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 463, in _sync_wrapper\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/model.py\", line 495, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self[:] = self._gt.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 175, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self._exit_event.wait()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/event.py\", line 121, in wait\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return hubs.get_hub().switch()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py\", line 294, in switch\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.greenlet.switch()\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/eventlet/greenthread.py\", line 214, in main\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     result = function(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1808, in _allocate_network_async\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     dhcp_options=dhcp_options)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 577, in allocate_for_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     self._delete_ports(neutron, instance, created_port_ids)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 85, in __exit__\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     six.reraise(self.type_, self.value, self.tb)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 569, in allocate_for_instance\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     security_group_ids, available_macs, dhcp_opts)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 304, in _create_port\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     port_id = port_client.create_port(port_req_body)['port']['id']\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 544, in create_port\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.post(self.ports_path, body=body)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 298, in post\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     headers=headers, params=params)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 200, in do_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     content_type=self.content_type())\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 306, in do_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.request(url, method, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/neutronclient/client.py\", line 294, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     resp = super(SessionClient, self).request(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/adapter.py\", line 95, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return self.session.request(url, method, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/utils.py\", line 318, in inner\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     return func(*args, **kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 382, in request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     resp = send(**kwargs)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]   File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 423, in _send_request\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6]     raise exceptions.RequestTimeout(msg)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] RequestTimeout: Request to http://11.1.2.50:9696/v2.0/ports.json timed out (HTTP 408)\n2016-07-18 07:41:24.977 36869 TRACE nova.compute.manager [instance: 866caeb1-0f39-43e3-b08e-bec33c7253e6] \n2016-07-18 07:41:25.469 36869 ERROR nova.network.neutronv2.api [req-76499ba7-5324-4b32-8ec7-b5ceb82e612e 8f2cda8f705849e7a81b6b885ca831f5 7fddfc9832a74ac5844211ef810b5093 - - -] Unable to clear device ID for port 'None'\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api Traceback (most recent call last):\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py\", line 366, in _unbind_ports\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     port_client.update_port(port_id, port_req_body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 102, in with_params\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     ret = self.function(instance, *args, **kwargs)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 549, in update_port\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     return self.put(self.port_path % (port), body=body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 302, in put\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 270, in retry_request\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     headers=headers, params=params)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 211, in do_request\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     self._handle_fault_response(status_code, replybody)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 185, in _handle_fault_response\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     exception_handler_v20(status_code, des_error_body)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api   File \"/usr/lib/python2.7/site-packages/neutronclient/v2_0/client.py\", line 83, in exception_handler_v20\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api     message=message)\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api NeutronClientException: 404 Not Found\n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api \n2016-07-18 07:41:25.469 36869 TRACE nova.network.neutronv2.api The resource could not be found.", 
            "date_created": "2016-07-18 09:09:35.750653+00:00", 
            "author": "https://api.launchpad.net/1.0/~fawadkhaliq"
        }, 
        {
            "content": "", 
            "date_created": "2016-07-18 09:09:35.750653+00:00", 
            "author": "https://api.launchpad.net/1.0/~fawadkhaliq"
        }, 
        {
            "content": "There is retry logic in nova compute manager (https://github.com/openstack/nova/blob/master/nova/compute/manager.py#L1357)\nand situation is possible\nin which neutron created port but nova did not know about that (timeout for example).\n\nI see two possible solutions:\n- rollback port allocation on the server side (neutron) if the server can't respond to client i.e. client is disconnected,\n- while retrying nova can first get the port for instance and use it if one exists.\n\nNumber of retries is according to CONF.network_allocate_retries param,\nso as a workaround, you can set it to zero and recreate failed instances.", 
            "date_created": "2016-07-19 11:05:08.261790+00:00", 
            "author": "https://api.launchpad.net/1.0/~avolkov"
        }, 
        {
            "content": "I am curious if this has got worse recently, or better. We have recently reduced what happens during create (no port binding), so timeouts should be less likely now.\n\nAnyways, its still possible I presume.\n\nI guess we should list_ports to find out what ports to delete, because for the timeouts nova never gets the port_uuid, so it doesn't know which port to delete.", 
            "date_created": "2016-07-25 14:48:09.481025+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "Added https://review.openstack.org/347183 with an idea on how we can fix this problem. The patch needs a lot of work still before it is ready to merge.", 
            "date_created": "2016-07-26 08:26:14.836686+00:00", 
            "author": "https://api.launchpad.net/1.0/~johngarbutt"
        }, 
        {
            "content": "Change abandoned by Sean Dague (<email address hidden>) on branch: master\nReview: https://review.openstack.org/374965\nReason: This review is > 6 weeks without comment, and failed Jenkins the last time it was checked. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.", 
            "date_created": "2016-12-09 21:06:49.419014+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Related fix proposed to branch: master\nReview: https://review.openstack.org/431545", 
            "date_created": "2017-02-09 13:52:21.584045+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/431545\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=15280bde1d4b3927a5b5912677c9576f96b2ed51\nSubmitter: Jenkins\nBranch:    master\n\ncommit 15280bde1d4b3927a5b5912677c9576f96b2ed51\nAuthor: John Garbutt <email address hidden>\nDate:   Thu Feb 9 13:48:33 2017 +0000\n\n    Add device_id when creating ports\n    \n    Currently, when nova is creating ports, we don't update the device_id\n    until we bind the port much later in the process. It's better to set the\n    device_id when we create the port for a variety of reasons, such as it\n    stops other instances trying to use the port we just created.\n    \n    The real reason it is changed here is because in a few edge cases Nova\n    still fails to correctly clean up ports we created. By adding the\n    device_id we should be able to more easily track down the cause of the\n    leaking ports, and it may help fix the issue too.\n    \n    Change-Id: Ie697ad6520622d6f01f06b19b143d5f8ac21e053\n    Related-Bug: 1603909\n", 
            "date_created": "2017-02-28 16:38:00.585221+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Automatically discovered version kilo in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 15:56:01.535716+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/483280", 
            "date_created": "2017-07-13 09:33:13.726991+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Change abandoned by yuanyue (yyuanyuee@163.com) on branch: master\nReview: https://review.openstack.org/483280", 
            "date_created": "2017-07-13 11:51:15.917746+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/483888", 
            "date_created": "2017-07-14 09:59:01.514176+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}