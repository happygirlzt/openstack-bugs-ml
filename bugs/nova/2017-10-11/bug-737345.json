{
    "status": "Invalid", 
    "last_updated": "2011-08-12 17:49:34.522164+00:00", 
    "description": "When I tried to add key with euca-add-keypair in redhat6, I got UnknownError. I paste the error log and related info below.\n\nnova-api.log:\n\n2011-03-18 14:26:07,874 nova.api: ERROR [991LMA1G2AVU9RYJ1-2W anne IRT] Unexpected error raised: Unexpected error while running command.\nCommand: ssh-keygen -q -b 1024 -N \"\" -f /tmp/tmpv74M0I/temp\nExit code: 1\nStdout: 'Saving the key failed: /tmp/tmpv74M0I/temp.\\n'\nStderr: 'open /tmp/tmpv74M0I/temp failed: Permission denied.\\r\\n'\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/__init__.py\", line 317, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/apirequest.py\", line 128, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 304, in create_key_pair\n(nova.api): TRACE:     data = _gen_key(context, context.user.id, key_name)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 66, in _gen_key\n(nova.api): TRACE:     private_key, public_key, fingerprint = crypto.generate_key_pair()\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/crypto.py\", line 108, in generate_key_pair\n(nova.api): TRACE:     utils.execute('ssh-keygen -q -b %d -N \"\" -f %s' % (bits, keyfile))\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 147, in execute\n(nova.api): TRACE:     cmd=cmd)\n(nova.api): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.api): TRACE: Command: ssh-keygen -q -b 1024 -N \"\" -f /tmp/tmpv74M0I/temp\n(nova.api): TRACE: Exit code: 1\n(nova.api): TRACE: Stdout: 'Saving the key failed: /tmp/tmpv74M0I/temp.\\n'\n(nova.api): TRACE: Stderr: 'open /tmp/tmpv74M0I/temp failed: Permission denied.\\r\\n'\n(nova.api): TRACE:\n\nThe version of nova-api is 2011.1.1.\n\nBTW I installed nova according to the instructions from below.\nhttp://wiki.openstack.org/NovaInstall/RHEL6Notes", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/737345", 
    "owner": "https://api.launchpad.net/1.0/~ilyaalekseyev", 
    "id": 737345, 
    "index": 2068, 
    "created": "2011-03-18 05:34:33.258088+00:00", 
    "title": "API returns UnknownError when executing euca-add-keypair in RHEL6", 
    "comments": [
        {
            "content": "When I tried to add key with euca-add-keypair in redhat6, I got UnknownError. I paste the error log and related info below.\n\nnova-api.log:\n\n2011-03-18 14:26:07,874 nova.api: ERROR [991LMA1G2AVU9RYJ1-2W anne IRT] Unexpected error raised: Unexpected error while running command.\nCommand: ssh-keygen -q -b 1024 -N \"\" -f /tmp/tmpv74M0I/temp\nExit code: 1\nStdout: 'Saving the key failed: /tmp/tmpv74M0I/temp.\\n'\nStderr: 'open /tmp/tmpv74M0I/temp failed: Permission denied.\\r\\n'\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/__init__.py\", line 317, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/apirequest.py\", line 128, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 304, in create_key_pair\n(nova.api): TRACE:     data = _gen_key(context, context.user.id, key_name)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 66, in _gen_key\n(nova.api): TRACE:     private_key, public_key, fingerprint = crypto.generate_key_pair()\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/crypto.py\", line 108, in generate_key_pair\n(nova.api): TRACE:     utils.execute('ssh-keygen -q -b %d -N \"\" -f %s' % (bits, keyfile))\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 147, in execute\n(nova.api): TRACE:     cmd=cmd)\n(nova.api): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.api): TRACE: Command: ssh-keygen -q -b 1024 -N \"\" -f /tmp/tmpv74M0I/temp\n(nova.api): TRACE: Exit code: 1\n(nova.api): TRACE: Stdout: 'Saving the key failed: /tmp/tmpv74M0I/temp.\\n'\n(nova.api): TRACE: Stderr: 'open /tmp/tmpv74M0I/temp failed: Permission denied.\\r\\n'\n(nova.api): TRACE:\n\nThe version of nova-api is 2011.1.1.\n\nBTW I installed nova according to the instructions from below.\nhttp://wiki.openstack.org/NovaInstall/RHEL6Notes", 
            "date_created": "2011-03-18 05:34:33.258088+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Guan, thank you much for your report.\nThere was incompletness on wiki instructions. Andrey Brindeyev just corrected it. You should disable SELinux in /etc/sysconfig/selinux and reboot your system.\nPlease let us know if it solve your problem.", 
            "date_created": "2011-03-18 14:34:53.382503+00:00", 
            "author": "https://api.launchpad.net/1.0/~ilyaalekseyev"
        }, 
        {
            "content": "After I disabled SELinux in /etc/sysconfig/selinux and rebooted system just as Ilya Alekseyev said, the error disappeared.\n\nThank you, Ilya Alekseyev.", 
            "date_created": "2011-03-22 02:01:02.163908+00:00", 
            "author": "https://api.launchpad.net/1.0/~guanxiaohua2k6"
        }, 
        {
            "content": "Hi there, I got the same error after installing openstack ,\nI did follow the instructions form http://wiki.openstack.org/NovaInstall/RHEL6Notes, and the selinux was disabled. The installed nova-api version is\n\nName       : openstack-nova-api\nArch       : noarch\nVersion    : 2011.2\nRelease    : 10.el6\nSize       : 13 k\nRepo       : installed\nFrom repo  : openstack\n\nAgain, I could not add a new keypair,  the error messages in nova-api.log are:\n\nUnexpected error raised: Unexpected error while running command.Command: ssh-keygen -q -b 1024 -N  -f /tmp/tmpMtQ3UI/tempExit code: 1\nStdout: 'Saving the key failed: /tmp/tmpMtQ3UI/temp.\\n'Stderr: 'open /tmp/tmpMtQ3UI/temp failed: Permission denied.\\r\\n'\n(nova.api): TRACE: Traceback (most recent call last):(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/__init__.py\", line 321, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/apirequest.py\", line 150, in invoke(nova.api): TRACE:     result = method(context, **args)(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 315, in create_key_pair\n(nova.api): TRACE:     data = _gen_key(context, context.user_id, key_name)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/api/ec2/cloud.py\", line 68, in _gen_key\n(nova.api): TRACE:     private_key, public_key, fingerprint = crypto.generate_key_pair()\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/crypto.py\", line 110, in generate_key_pair\n(nova.api): TRACE:     '-f', keyfile)\n(nova.api): TRACE:   File \"/usr/lib/python2.6/site-packages/nova/utils.py\", line 173, in execute\n(nova.api): TRACE:     cmd=' '.join(cmd))\n(nova.api): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.api): TRACE: Command: ssh-keygen -q -b 1024 -N  -f /tmp/tmpMtQ3UI/temp\n(nova.api): TRACE: Exit code: 1\n(nova.api): TRACE: Stdout: 'Saving the key failed: /tmp/tmpMtQ3UI/temp.\\n'\n(nova.api): TRACE: Stderr: 'open /tmp/tmpMtQ3UI/temp failed: Permission denied.\\r\\n'\n\n\ncan anyone advise how to solve this issue?\n", 
            "date_created": "2011-08-12 17:49:33.229251+00:00", 
            "author": "https://api.launchpad.net/1.0/~dyw"
        }
    ]
}