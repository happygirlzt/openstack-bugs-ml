{
    "status": "Invalid", 
    "last_updated": "2012-12-13 11:18:41.103878+00:00", 
    "description": "I am running nova-compute and nova-network on an Ubuntu precise with xen-xcp hypervision.\n\nPrior to running xen-xcp the installation was using kvm and successfully booting instances. After switch to xen-xcp launching instances fail.\n\nI am able to launch xen instances following the guide on:\nhttp://hyper-choi.blogspot.com.au/2012/03/openstack-xcp-install-configuration.html\n\nThe glance image is an AMI stored in raw format in a bare container (works on node when running KVM).\n\nHere is a log extract from nova-compute:\n\n2012-10-11 13:50:59 DEBUG nova.virt.xenapi.vm_utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] Created VDI OpaqueRef:aca09fce-bf5e-11e0-0d5d-baeca7127d8f (instance-00000058, 232718336, False) on OpaqueRef:1c23dae5-602f-4596-8def-eca69a924c08. from (pid=8258) create_vdi /usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py:341\n2012-10-11 13:50:59 ERROR nova.virt.xenapi.vm_utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] instance 88: Failed to fetch glance image\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils Traceback (most recent call last):\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 875, in _fetch_image_glance_disk\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     with vdi_attached_here(session, vdi_ref, read_only=False) as dev:\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return self.gen.next()\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 1479, in vdi_attached_here\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     this_vm_ref = get_this_vm_ref(session)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 1519, in get_this_vm_ref\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return session.call_xenapi(\"VM.get_by_uuid\", get_this_vm_uuid())\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi_conn.py\", line 575, in call_xenapi\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return tpool.execute(f, *args)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     rv = meth(*args,**kwargs)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 235, in __call__\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return self.__send(self.__name, args)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 139, in xenapi_request\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     result = _parse_result(getattr(self, methodname)(*full_params))\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 209, in _parse_result\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     raise Failure(result['ErrorDescription'])\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils Failure: ['UUID_INVALID', 'VM', '00000000-0000-0000-0000-000000000000']\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils\n2012-10-11 13:50:59 ERROR nova.utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] Instance 4e4ed1b1-6d33-4bf3-84e2-9dca6774fd61: Failed to spawn, rolling back.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1065371", 
    "owner": "None", 
    "id": 1065371, 
    "index": 3144, 
    "created": "2012-10-11 04:08:03.915202+00:00", 
    "title": "nova-compute running xcp-xen fails to launch instance", 
    "comments": [
        {
            "content": "I am running nova-compute and nova-network on an Ubuntu precise with xen-xcp hypervision.\n\nPrior to running xen-xcp the installation was using kvm and successfully booting instances. After switch to xen-xcp launching instances fail.\n\nI am able to launch xen instances following the guide on:\nhttp://hyper-choi.blogspot.com.au/2012/03/openstack-xcp-install-configuration.html\n\nThe glance image is an AMI stored in raw format in a bare container (works on node when running KVM).\n\nHere is a log extract from nova-compute:\n\n2012-10-11 13:50:59 DEBUG nova.virt.xenapi.vm_utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] Created VDI OpaqueRef:aca09fce-bf5e-11e0-0d5d-baeca7127d8f (instance-00000058, 232718336, False) on OpaqueRef:1c23dae5-602f-4596-8def-eca69a924c08. from (pid=8258) create_vdi /usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py:341\n2012-10-11 13:50:59 ERROR nova.virt.xenapi.vm_utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] instance 88: Failed to fetch glance image\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils Traceback (most recent call last):\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 875, in _fetch_image_glance_disk\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     with vdi_attached_here(session, vdi_ref, read_only=False) as dev:\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return self.gen.next()\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 1479, in vdi_attached_here\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     this_vm_ref = get_this_vm_ref(session)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi/vm_utils.py\", line 1519, in get_this_vm_ref\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return session.call_xenapi(\"VM.get_by_uuid\", get_this_vm_uuid())\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/nova/virt/xenapi_conn.py\", line 575, in call_xenapi\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return tpool.execute(f, *args)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     rv = meth(*args,**kwargs)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 235, in __call__\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     return self.__send(self.__name, args)\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 139, in xenapi_request\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     result = _parse_result(getattr(self, methodname)(*full_params))\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils   File \"/usr/lib/python2.7/dist-packages/XenAPI.py\", line 209, in _parse_result\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils     raise Failure(result['ErrorDescription'])\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils Failure: ['UUID_INVALID', 'VM', '00000000-0000-0000-0000-000000000000']\n2012-10-11 13:50:59 TRACE nova.virt.xenapi.vm_utils\n2012-10-11 13:50:59 ERROR nova.utils [req-098008f5-9ac9-4305-8bc8-6df4e6489d8a 89a83a5abd1842079bccbc877479ddd8 f04baaabb96f41d38cf8061d9d0b2d7c] Instance 4e4ed1b1-6d33-4bf3-84e2-9dca6774fd61: Failed to spawn, rolling back.", 
            "date_created": "2012-10-11 04:08:03.915202+00:00", 
            "author": "https://api.launchpad.net/1.0/~daniel-lo8mzs0dn9hjjn8z3"
        }, 
        {
            "content": "did you see this in the log snippet? \"Failed to fetch glance image\"", 
            "date_created": "2012-11-08 01:32:55.880200+00:00", 
            "author": "https://api.launchpad.net/1.0/~dims-v"
        }, 
        {
            "content": "Closing as Invalid based on comment 1. Feel free to reopen if you can confirm the problem was not in Glance but Nova.", 
            "date_created": "2012-12-13 11:18:38.720238+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}