{
    "status": "Fix Released", 
    "last_updated": "2016-12-19 12:01:51.952798+00:00", 
    "description": "Tried to migrate all vms as part of upgrading controllers going from OSP9 to OSP10.\nSuccessfully migrated all vms from computes of the same version.\nUpgraded one compute node.\nThen tried to migrate all vms from the other machine to the upgraded one with:\nnova host-servers-migrate overcloud-compute-0.localdomain\n\nThis resulted in error:\nGrepping for errors the /var/log/nova/nova-compute.log file on a target compute:\n\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server [req-5bbd4371-dd07-443c-884f-02937064bb8f 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return [device for device in pci_devices if\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [req-10021f30-ac47-495d-83b6-2fe54d4ab647 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] Setting instance vm_state to ERROR\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] Traceback (most recent call last):\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     disk_info, image_meta)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     old_instance_type)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     self.force_reraise()\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     block_device_info, power_on)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     block_device_info=block_device_info)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     context)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     return [device for device in pci_devices if\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] \n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server [req-10021f30-ac47-495d-83b6-2fe54d4ab647 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return [device for device in pci_devices if\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [req-7ecfc3ee-2b17-4582-9788-f81a90de21e8 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: e9797290-6333-485f-a1c4-965355b11874] Setting instance vm_state to ERROR\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] Traceback (most recent call last):\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     disk_info, image_meta)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     old_instance_type)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     self.force_reraise()\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     block_device_info, power_on)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     block_device_info=block_device_info)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     context)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     if pci_devices is None:\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] \n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server [req-7ecfc3ee-2b17-4582-9788-f81a90de21e8 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     if pci_devices is None:\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [req-81456147-61d3-4d1e-ac49-6becc999f201 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] Setting instance vm_state to ERROR\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] Traceback (most recent call last):\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     disk_info, image_meta)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     old_instance_type)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     self.force_reraise()\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     block_device_info, power_on)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     block_device_info=block_device_info)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     context)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     if pci_devices is None:\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] \n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server [req-81456147-61d3-4d1e-ac49-6becc999f201 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     if pci_devices is None:\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1648887", 
    "owner": "https://api.launchpad.net/1.0/~danms", 
    "id": 1648887, 
    "index": 2011, 
    "created": "2016-12-09 21:14:31.355871+00:00", 
    "title": "nova host-servers-migrate [hostname] fails ", 
    "comments": [
        {
            "content": "Tried to migrate all vms as part of upgrading controllers going from OSP9 to OSP10.\nSuccessfully migrated all vms from computes of the same version.\nUpgraded one compute node.\nThen tried to migrate all vms from the other machine to the upgraded one with:\nnova host-servers-migrate overcloud-compute-0.localdomain\n\nThis resulted in error:\nGrepping for errors the /var/log/nova/nova-compute.log file on a target compute:\n\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server [req-5bbd4371-dd07-443c-884f-02937064bb8f 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server     return [device for device in pci_devices if\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:21.693 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [req-10021f30-ac47-495d-83b6-2fe54d4ab647 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] Setting instance vm_state to ERROR\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] Traceback (most recent call last):\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     disk_info, image_meta)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     old_instance_type)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     self.force_reraise()\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     block_device_info, power_on)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     block_device_info=block_device_info)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     context)\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef]     return [device for device in pci_devices if\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:22.845 31237 ERROR nova.compute.manager [instance: a6a47318-dab5-4680-8bc3-be48c15568ef] \n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server [req-10021f30-ac47-495d-83b6-2fe54d4ab647 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server     return [device for device in pci_devices if\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 18:44:23.317 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [req-7ecfc3ee-2b17-4582-9788-f81a90de21e8 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: e9797290-6333-485f-a1c4-965355b11874] Setting instance vm_state to ERROR\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] Traceback (most recent call last):\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     disk_info, image_meta)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     old_instance_type)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     self.force_reraise()\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     block_device_info, power_on)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     block_device_info=block_device_info)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     context)\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874]     if pci_devices is None:\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:19.571 31237 ERROR nova.compute.manager [instance: e9797290-6333-485f-a1c4-965355b11874] \n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server [req-7ecfc3ee-2b17-4582-9788-f81a90de21e8 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server     if pci_devices is None:\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:20.019 31237 ERROR oslo_messaging.rpc.server \n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [req-81456147-61d3-4d1e-ac49-6becc999f201 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] Setting instance vm_state to ERROR\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] Traceback (most recent call last):\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     disk_info, image_meta)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     old_instance_type)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     self.force_reraise()\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     block_device_info, power_on)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     block_device_info=block_device_info)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     context)\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4]     if pci_devices is None:\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:20.609 31237 ERROR nova.compute.manager [instance: 748520c6-6504-4c8e-9db1-cad2981715c4] \n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server [req-81456147-61d3-4d1e-ac49-6becc999f201 929ce5e2752e4705bcc6d32e303230a9 2a99364bbb3c496290fcf71066bdfbfb - - -] Exception during message handling\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 188, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     LOG.warning(msg, e, instance=instance)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 157, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/utils.py\", line 613, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 145, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     migration.instance_uuid, exc_info=True)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 122, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 216, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 204, in decorated_function\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3960, in finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self._set_instance_obj_error_state(context, instance)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3948, in finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     disk_info, image_meta)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3913, in _finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     old_instance_type)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 3908, in _finish_resize\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     block_device_info, power_on)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 7259, in finish_migration\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     block_device_info=block_device_info)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4652, in _get_guest_xml\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     context)\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py\", line 4418, in _get_guest_config\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     pci_devs = pci_manager.get_instance_pci_devs(instance, 'all')\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/site-packages/nova/pci/manager.py\", line 339, in get_instance_pci_devs\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server     if pci_devices is None:\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server TypeError: 'NoneType' object is not iterable\n2016-12-09 20:47:21.122 31237 ERROR oslo_messaging.rpc.server", 
            "date_created": "2016-12-09 21:14:31.355871+00:00", 
            "author": "https://api.launchpad.net/1.0/~sashac88"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/409338", 
            "date_created": "2016-12-09 21:18:43.634010+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/409338\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=15564eb355657fcf2594d5060cb36f25e28bc0c9\nSubmitter: Jenkins\nBranch:    master\n\ncommit 15564eb355657fcf2594d5060cb36f25e28bc0c9\nAuthor: Dan Smith <email address hidden>\nDate:   Fri Dec 9 13:23:44 2016 -0800\n\n    Fix crashing during guest config with pci_devices=None\n    \n    The Instance.pci_devices field is nullable, but the get_instance_pci_devs()\n    function does not account for that. If it is passed an instance (from an\n    older deployment) with no pci_devices, it will crash trying to iterate\n    None as a list.\n    \n    Change-Id: I3d535e01ac31db7804347c3938c0d88a28ba67f5\n    Closes-Bug: #1648887\n", 
            "date_created": "2016-12-12 14:21:28.651518+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: stable/newton\nReview: https://review.openstack.org/409821", 
            "date_created": "2016-12-12 15:07:27.050332+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/409821\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=9642cd339f1f520569dfea49495fec79ad7a8195\nSubmitter: Jenkins\nBranch:    stable/newton\n\ncommit 9642cd339f1f520569dfea49495fec79ad7a8195\nAuthor: Dan Smith <email address hidden>\nDate:   Fri Dec 9 13:23:44 2016 -0800\n\n    Fix crashing during guest config with pci_devices=None\n    \n    The Instance.pci_devices field is nullable, but the get_instance_pci_devs()\n    function does not account for that. If it is passed an instance (from an\n    older deployment) with no pci_devices, it will crash trying to iterate\n    None as a list.\n    \n    Change-Id: I3d535e01ac31db7804347c3938c0d88a28ba67f5\n    Closes-Bug: #1648887\n    (cherry picked from commit 15564eb355657fcf2594d5060cb36f25e28bc0c9)\n", 
            "date_created": "2016-12-12 19:14:11.195919+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 15.0.0.0b2 development milestone.", 
            "date_created": "2016-12-15 17:34:08.897492+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 14.0.3 release.", 
            "date_created": "2016-12-19 12:01:50.646777+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}