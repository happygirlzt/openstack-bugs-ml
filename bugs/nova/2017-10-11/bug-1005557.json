{
    "status": "Invalid", 
    "last_updated": "2012-06-07 20:39:00.369074+00:00", 
    "description": "I install openstack essex with source code on CentOS 6.2. I run keystone, glance-api, glance-registry, nova-api, nova-network, nova-scheduler, nova-cert, nova-objectstore and nova-compute on my control node and only nova-compute on a compute node. \n\nI can suspend and pause a instance on control node with command \"nova suspend servername\" and \"nova pause servername\". But I can only pause a instance on my compute node. If I use command \"nova suspend servername\" to suspend a instance on compute node I will get a error message as below:\n\n49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: decorating: |<function suspend_instance at 0x166a0c8>|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x1489e90>| |<nova.rpc.amqp.RpcContext object at 0x2f43f90>| |fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc|\n2012-05-28 22:05:15 DEBUG nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] instance fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc: getting locked state from (pid=8250) get_lock /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:1597\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: locked: |False|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: admin: |True|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: executing: |<function suspend_instance at 0x166a0c8>|\n2012-05-28 22:05:15 AUDIT nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] instance fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc: suspending\nlibvir: QEMU error : internal error unable to send file handle 'migrate': No file descriptor supplied via SCM_RIGHTS\n2012-05-28 22:05:15 ERROR nova.rpc.amqp [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Exception during message handling\n2012-05-28 22:05:15 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py\", line 252, in _process_data\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 153, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     function(self, context, instance_uuid, *args, **kwargs)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     sys.exc_info())\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 171, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 1538, in suspend_instance\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     self.driver.suspend(instance_ref)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 798, in suspend\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     dom.managedSave(0)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 656, in managedSave\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     if ret == -1: raise libvirtError ('virDomainManagedSave() failed', dom=self)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp libvirtError: internal error unable to send file handle 'migrate': No file descriptor supplied via SCM_RIGHTS\n2012-05-28 22:05:15 TRACE nova.rpc.amqp \n2012-05-28 22:05:15 TRACE nova.rpc.amqp", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1005557", 
    "owner": "None", 
    "id": 1005557, 
    "index": 2845, 
    "created": "2012-05-28 14:34:45.734062+00:00", 
    "title": "Can not suspend instance on compute node", 
    "comments": [
        {
            "content": "I install openstack essex with source code on CentOS 6.2. I run keystone, glance-api, glance-registry, nova-api, nova-network, nova-scheduler, nova-cert, nova-objectstore and nova-compute on my control node and only nova-compute on a compute node. \n\nI can suspend and pause a instance on control node with command \"nova suspend servername\" and \"nova pause servername\". But I can only pause a instance on my compute node. If I use command \"nova suspend servername\" to suspend a instance on compute node I will get a error message as below:\n\n49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: decorating: |<function suspend_instance at 0x166a0c8>|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: arguments: |<nova.compute.manager.ComputeManager object at 0x1489e90>| |<nova.rpc.amqp.RpcContext object at 0x2f43f90>| |fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc|\n2012-05-28 22:05:15 DEBUG nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] instance fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc: getting locked state from (pid=8250) get_lock /usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py:1597\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: locked: |False|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: admin: |True|\n2012-05-28 22:05:15 INFO nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] check_instance_lock: executing: |<function suspend_instance at 0x166a0c8>|\n2012-05-28 22:05:15 AUDIT nova.compute.manager [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] instance fcda5d00-a8f9-4b6f-abcd-c89bd97b33cc: suspending\nlibvir: QEMU error : internal error unable to send file handle 'migrate': No file descriptor supplied via SCM_RIGHTS\n2012-05-28 22:05:15 ERROR nova.rpc.amqp [req-a3b22aff-4248-4a3a-a845-cb9e9db0b37e 47761c18057d4be9b741aa31076cb127 49d1ed911a224bf2b480c7b6742d7b22] Exception during message handling\n2012-05-28 22:05:15 TRACE nova.rpc.amqp Traceback (most recent call last):\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/rpc/amqp.py\", line 252, in _process_data\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     rval = node_func(context=ctxt, **node_args)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 153, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     function(self, context, instance_uuid, *args, **kwargs)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 177, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     sys.exc_info())\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/contextlib.py\", line 23, in __exit__\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     self.gen.next()\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 171, in decorated_function\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return function(self, context, instance_uuid, *args, **kwargs)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/compute/manager.py\", line 1538, in suspend_instance\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     self.driver.suspend(instance_ref)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/exception.py\", line 114, in wrapped\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     return f(*args, **kw)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib/python2.6/site-packages/nova-2012.1-py2.6.egg/nova/virt/libvirt/connection.py\", line 798, in suspend\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     dom.managedSave(0)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp   File \"/usr/lib64/python2.6/site-packages/libvirt.py\", line 656, in managedSave\n2012-05-28 22:05:15 TRACE nova.rpc.amqp     if ret == -1: raise libvirtError ('virDomainManagedSave() failed', dom=self)\n2012-05-28 22:05:15 TRACE nova.rpc.amqp libvirtError: internal error unable to send file handle 'migrate': No file descriptor supplied via SCM_RIGHTS\n2012-05-28 22:05:15 TRACE nova.rpc.amqp \n2012-05-28 22:05:15 TRACE nova.rpc.amqp", 
            "date_created": "2012-05-28 14:34:45.734062+00:00", 
            "author": "https://api.launchpad.net/1.0/~jiangy"
        }, 
        {
            "content": "This looks more like a libvirt bug not a nova bug. Due to the following error message:\r\n\r\ninternal error unable to send file handle 'migrate': No file descriptor supplied via SCM_RIGHTS\r\n\r\nchuck", 
            "date_created": "2012-06-07 20:38:57.848672+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }
    ]
}