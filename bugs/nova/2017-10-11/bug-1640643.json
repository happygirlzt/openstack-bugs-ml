{
    "status": "Confirmed", 
    "last_updated": "2017-06-23 16:31:17.254775+00:00", 
    "description": "When attach interface after creating a VM, error ossurs.\n\n$ nova interface-attach --net-id <net_id> 9b93ba8d-bb9e-45df-86aa-20eb43d9c219\n\nnova-compute.log:\n2016-11-04 16:23:11.845 18507 WARNING nova.compute.manager [req-ceeb5495-aff5-48d9-ba6b-7b452f2810c7 1bcb57c137e6457983b164dd986803f6 9fd78db620d54297b256edf4eae36a51 - - -] [instance: 9b93ba8d-bb9e-45df-86aa-20eb43d9c219] attach interface failed , try to deallocate port d813ecdd-fb1c-4d29-ad1e-29fba6ff309b, reason: Invalid input received: vif type unbound not supported\n...\n2016-11-04 16:23:13.220 18507 ERROR oslo_messaging.rpc.dispatcher [req-ceeb5495-aff5-48d9-ba6b-7b452f2810c7 1bcb57c137e6457983b164dd986803f6 9fd78db620d54297b256edf4eae36a51 - - -] Exception during message handling: Failed to attach network adapter device to 9b93ba8d-bb9e-45df-86aa-20eb43d9c219", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1640643", 
    "owner": "None", 
    "id": 1640643, 
    "index": 6518, 
    "created": "2016-11-10 01:16:37.279545+00:00", 
    "title": "Cannot attach interface", 
    "comments": [
        {
            "content": "When attach interface after creating a VM, error ossurs in nova-compute.log:\n\n$ nova interface-attach --net-id <net_id> 9b93ba8d-bb9e-45df-86aa-20eb43d9c219\n...\n2016-11-04 16:23:11.845 18507 WARNING nova.compute.manager [req-ceeb5495-aff5-48d9-ba6b-7b452f2810c7 1bcb57c137e6457983b164dd986803f6 9fd78db620d54297b256edf4eae36a51 - - -] [instance: 9b93ba8d-bb9e-45df-86aa-20eb43d9c219] attach interface failed , try to deallocate port d813ecdd-fb1c-4d29-ad1e-29fba6ff309b, reason: Invalid input received: vif type unbound not supported\n...\n2016-11-04 16:23:13.220 18507 ERROR oslo_messaging.rpc.dispatcher [req-ceeb5495-aff5-48d9-ba6b-7b452f2810c7 1bcb57c137e6457983b164dd986803f6 9fd78db620d54297b256edf4eae36a51 - - -] Exception during message handling: Failed to attach network adapter device to 9b93ba8d-bb9e-45df-86aa-20eb43d9c219", 
            "date_created": "2016-11-10 01:16:37.279545+00:00", 
            "author": "https://api.launchpad.net/1.0/~takada-yuiko"
        }, 
        {
            "content": "2017-02-03 11:18:40.386 28590 DEBUG oslo_vmware.service [-] Invoking PropertyCollector.RetrievePropertiesEx with opID=oslo.vmware-617b5929-324e-4705-9e46-7070f5be7be8 request_handler /usr/lib/python2.7/site-packages/oslo_vmware/service.py:335\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [req-5edf7600-7e63-44ed-b79a-0c353114a804 - - - - -] [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e] Instance failed to spawn\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e] Traceback (most recent call last):\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 2078, in _build_resources\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     yield resources\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/compute/manager.py\", line 1920, in _build_and_run_instance\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     block_device_info=block_device_info)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/driver.py\", line 316, in spawn\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     admin_password, network_info, block_device_info)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py\", line 739, in spawn\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     metadata)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vmops.py\", line 281, in build_virtual_machine\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     network_info)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vif.py\", line 183, in get_vif_info\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     is_neutron, vif))\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vif.py\", line 169, in get_vif_dict\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     ref = get_network_ref(session, cluster, vif, is_neutron)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vif.py\", line 156, in get_network_ref\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     network_ref = _get_neutron_network(session, cluster, vif)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]   File \"/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vif.py\", line 145, in _get_neutron_network\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]     raise exception.InvalidInput(reason=reason)\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e] InvalidInput: Invalid input received: vif type other not supported\n2017-02-03 11:18:40.413 28590 ERROR nova.compute.manager [instance: 0ee9efa1-2481-49c7-89c3-32521e8bf81e]\n\nvif\n{\n    \"profile\": {}, \n    \"ovs_interfaceid\": null, \n    \"preserve_on_delete\": false, \n    \"network\": {\n        \"bridge\": null, \n        \"subnets\": [\n            {\n                \"ips\": [\n                    {\n                        \"meta\": {}, \n                        \"version\": 4, \n                        \"type\": \"fixed\", \n                        \"floating_ips\": [], \n                        \"address\": \"172.24.4.233\"\n                    }\n                ], \n                \"version\": 4, \n                \"meta\": {}, \n                \"dns\": [], \n                \"routes\": [], \n                \"cidr\": \"172.24.4.224/28\", \n                \"gateway\": {\n                    \"meta\": {}, \n                    \"version\": 4, \n                    \"type\": \"gateway\", \n                    \"address\": \"172.24.4.225\"\n                }\n            }\n        ], \n        \"meta\": {\n            \"injected\": false, \n            \"tenant_id\": \"76ce992f00eb4ce896d64bce79b124ab\", \n            \"mtu\": 1450\n        }, \n        \"id\": \"420b2fe5-f534-42c7-9709-d3ed9cd2dbd2\", \n        \"label\": \"public\"\n    }, \n    \"devname\": \"tapa0d96277-74\", \n    \"vnic_type\": \"normal\", \n    \"qbh_params\": null, \n    \"meta\": {}, \n    \"details\": {\n        \"port_filter\": true\n    }, \n    \"address\": \"fa:16:3e:57:f0:fb\", \n    \"active\": false, \n    \"type\": \"other\", \n    \"id\": \"a0d96277-7453-4543-9f97-86b9fd69f9ed\", \n    \"qbg_params\": null\n}\n\n\n/usr/lib/python2.7/site-packages/networking_vsphere/ml2/ovsvapp_mech_driver.py\n           portbindings.VIF_TYPE_OTHER,\n\n\n/usr/lib/python2.7/site-packages/nova/virt/vmwareapi/vif.py\ndef _get_neutron_network(session, cluster, vif):\n    if vif['type'] == model.VIF_TYPE_OVS:\n....\n    elif vif['type'] == model.VIF_TYPE_DVS:\n....\n    else:\n        reason = _('vif type %s not supported') % vif['type']\n        raise exception.InvalidInput(reason=reason)\n\nDo not VIF_TYPE_OTHER in _get_neutron_network", 
            "date_created": "2017-02-03 12:53:09.722228+00:00", 
            "author": "https://api.launchpad.net/1.0/~antonprk"
        }
    ]
}