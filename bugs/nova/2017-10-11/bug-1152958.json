{
    "status": "Fix Released", 
    "last_updated": "2013-04-04 11:18:02.299625+00:00", 
    "description": "1. Instance info:\nlzy@host:~$ nova list\n+--------------------------------------+------+--------+-----------------+\n| ID                                   | Name | Status | Networks        |\n+--------------------------------------+------+--------+-----------------+\n| 3a312912-e342-4fdf-af96-5a35df41e706 | xxx  | ACTIVE | private=9.9.0.3 |\n+--------------------------------------+------+--------+-----------------+\n\n2. fixed ip info query request:\ncurl -i \"http://10.10.0.1:8774/v2/948a39350b1a4973a484844f4ccd5cb7/os-fixed-ips/9.9.0.3.x\" -X GET -H \"X-Auth-Project-Id: admin\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: fedda46d59694bb8b25e4b93d13d6198\"\n\n3. HTTP response:\nHTTP/1.1 404 Not Found\nContent-Length: 79\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-d0d3eaf3-22c3-41c2-ad20-5eaa5b7d3c65\nDate: Sat, 09 Mar 2013 11:26:33 GMT\n\n{\"itemNotFound\": {\"message\": \"Fixed IP 9.9.0.3 has been deleted\", \"code\": 404}}\n\n4. Deleted fixed ip address in db:\nmysql> select * from fixed_ips where address = '9.9.0.3';\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n| created_at          | updated_at          | deleted_at          | deleted | id | address | network_id | allocated | leased | reserved | virtual_interface_id | host | instance_uuid                        |\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n| 2012-11-27 08:45:43 | 2012-11-27 08:47:26 | 2012-11-27 09:37:43 |       1 |  4 | 9.9.0.3 |          1 |         0 |      0 |        0 |                    1 | NULL | NULL                                 |\n| 2012-11-27 09:38:38 | 2013-03-05 01:32:47 | NULL                |       0 | 36 | 9.9.0.3 |          2 |         1 |      1 |        0 |                   10 | NULL | 3a312912-e342-4fdf-af96-5a35df41e706 |\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n2 rows in set (0.00 sec)\n\n5. Except fixed ip info result:\nHTTP/1.1 200 OK\nX-Compute-Request-Id: req-2b32430a-b0a7-4a6b-9076-76bc69311551\nContent-Type: application/json\nContent-Length: 113\nDate: Sat, 09 Mar 2013 11:28:01 GMT\n\n{\"fixed_ip\": {\"cidr\": \"9.9.0.0/24\", \"hostname\": \"lzy\", \"host\": \"dev-compute-ibm-folsom-1\", \"address\": \"9.9.0.3\"}}\n\n6. Analisys\nThe defect in os-fixed-ips api extension, it not take care the ips which marked 'deleted'.", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1152958", 
    "owner": "https://api.launchpad.net/1.0/~lzy-dev", 
    "id": 1152958, 
    "index": 1009, 
    "created": "2013-03-09 14:27:28.747244+00:00", 
    "title": "os-fixed-ips api does not take care deleted ip address", 
    "comments": [
        {
            "content": "1. Instance info:\nlzy@host:~$ nova list\n+--------------------------------------+------+--------+-----------------+\n| ID                                   | Name | Status | Networks        |\n+--------------------------------------+------+--------+-----------------+\n| 3a312912-e342-4fdf-af96-5a35df41e706 | xxx  | ACTIVE | private=9.9.0.3 |\n+--------------------------------------+------+--------+-----------------+\n\n2. fixed ip info query request:\ncurl -i \"http://10.10.0.1:8774/v2/948a39350b1a4973a484844f4ccd5cb7/os-fixed-ips/9.9.0.3.x\" -X GET -H \"X-Auth-Project-Id: admin\" -H \"User-Agent: python-novaclient\" -H \"Accept: application/json\" -H \"X-Auth-Token: fedda46d59694bb8b25e4b93d13d6198\"\n\n3. HTTP response:\nHTTP/1.1 404 Not Found\nContent-Length: 79\nContent-Type: application/json; charset=UTF-8\nX-Compute-Request-Id: req-d0d3eaf3-22c3-41c2-ad20-5eaa5b7d3c65\nDate: Sat, 09 Mar 2013 11:26:33 GMT\n\n{\"itemNotFound\": {\"message\": \"Fixed IP 9.9.0.3 has been deleted\", \"code\": 404}}\n\n\n4. Deleted fixed ip address in db:\nmysql> select * from fixed_ips where address = '9.9.0.3';\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n| created_at          | updated_at          | deleted_at          | deleted | id | address | network_id | allocated | leased | reserved | virtual_interface_id | host | instance_uuid                        |\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n| 2012-11-27 08:45:43 | 2012-11-27 08:47:26 | 2012-11-27 09:37:43 |       1 |  4 | 9.9.0.3 |          1 |         0 |      0 |        0 |                    1 | NULL | NULL                                 |\n| 2012-11-27 09:38:38 | 2013-03-05 01:32:47 | NULL                |       0 | 36 | 9.9.0.3 |          2 |         1 |      1 |        0 |                   10 | NULL | 3a312912-e342-4fdf-af96-5a35df41e706 |\n+---------------------+---------------------+---------------------+---------+----+---------+------------+-----------+--------+----------+----------------------+------+--------------------------------------+\n2 rows in set (0.00 sec)\n\n5. Except fixed ip info result:\nHTTP/1.1 200 OK\nX-Compute-Request-Id: req-2b32430a-b0a7-4a6b-9076-76bc69311551\nContent-Type: application/json\nContent-Length: 113\nDate: Sat, 09 Mar 2013 11:28:01 GMT\n\n{\"fixed_ip\": {\"cidr\": \"9.9.0.0/24\", \"hostname\": \"lzy\", \"host\": \"dev-compute-ibm-folsom-1\", \"address\": \"9.9.0.3\"}}\n\n6. Analisys\nThe defect in os-fixed-ips api extension, it not take case the ips which marked 'deleted'.", 
            "date_created": "2013-03-09 14:27:28.747244+00:00", 
            "author": "https://api.launchpad.net/1.0/~lzy-dev"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/23993", 
            "date_created": "2013-03-09 14:31:39.018186+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/23993\nCommitted: http://github.com/openstack/nova/commit/c8f7e66cc3253f86b88cd97b794f4654fab1bcb9\nSubmitter: Jenkins\nBranch:    master\n\ncommit c8f7e66cc3253f86b88cd97b794f4654fab1bcb9\nAuthor: Zhi Yan Liu <email address hidden>\nDate:   Tue Mar 12 12:37:30 2013 +0800\n\n    Skip deleted fixed ip address for os-fixed-ips extension\n    \n    Return the correct fixed ip address info when the address record(s)\n    marked 'deleted' in db.\n    \n    Fixes bug 1152958\n    \n    Change-Id: I58ba47427753a81cd43eb618cff199c45f83322c\n    Signed-off-by: Zhi Yan Liu <email address hidden>\n", 
            "date_created": "2013-03-13 16:50:03.855038+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}