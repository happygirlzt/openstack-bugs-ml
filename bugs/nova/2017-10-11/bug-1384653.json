{
    "status": "Fix Released", 
    "last_updated": "2015-04-30 09:23:27.396108+00:00", 
    "description": "Create encrypted volume type by using \"encryption-type-create\", the provider is \"LuksEncryptor\". Then attach the encrypted volume to vm, there is an exception raising in nova/volume/encryptor/__init__.py. \n\nThe error log:\n\n2014-10-23 02:03:04.115 ERROR nova.virt.libvirt.driver [req-5f4f611c-2c6f-4e2f-9a42-f9dad529054a admin demo] [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] Failed to attach volume at mountpoint: /dev/vdb\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] Traceback (most recent call last):\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1380, in attach_volume\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     encryption)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1327, in _get_volume_encryptor\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     **encryption)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/volume/encryptors/__init__.py\", line 41, in get_volume_encryptor\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     **kwargs)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/usr/local/lib/python2.7/dist-packages/oslo/utils/importutils.py\", line 38, in import_object\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     return import_class(import_str)(*args, **kwargs)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/usr/local/lib/python2.7/dist-packages/oslo/utils/importutils.py\", line 27, in import_class\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     __import__(mod_str)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] ValueError: Empty module name\n\nthe code should add full class name when user set encryption provider like \"LuksEncryptor\" or \"CryptsetupEncryptor\".", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1384653", 
    "owner": "https://api.launchpad.net/1.0/~wanghao749", 
    "id": 1384653, 
    "index": 164, 
    "created": "2014-10-23 10:03:51.215270+00:00", 
    "title": "attach encrypted volume, raise 'Empty module name' exception", 
    "comments": [
        {
            "content": "Create encrypted volume type by using \"encryption-type-create\", the provider is \"LuksEncryptor\". Then attach the encrypted volume to vm, there is an exception raising in nova/volume/encryptor/__init__.py. \n\nThe error log:\n\n2014-10-23 02:03:04.115 ERROR nova.virt.libvirt.driver [req-5f4f611c-2c6f-4e2f-9a42-f9dad529054a admin demo] [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] Failed to attach volume at mountpoint: /dev/vdb\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] Traceback (most recent call last):\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1380, in attach_volume\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     encryption)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/virt/libvirt/driver.py\", line 1327, in _get_volume_encryptor\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     **encryption)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/opt/stack/nova/nova/volume/encryptors/__init__.py\", line 41, in get_volume_encryptor\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     **kwargs)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/usr/local/lib/python2.7/dist-packages/oslo/utils/importutils.py\", line 38, in import_object\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     return import_class(import_str)(*args, **kwargs)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]   File \"/usr/local/lib/python2.7/dist-packages/oslo/utils/importutils.py\", line 27, in import_class\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d]     __import__(mod_str)\n2014-10-23 02:03:04.115 15313 TRACE nova.virt.libvirt.driver [instance: c2589f3a-3d20-44fc-bb37-88e65cb13b2d] ValueError: Empty module name\n\nthe code should add full class name when user set encryption provider like \"LuksEncryptor\" or \"CryptsetupEncryptor\".", 
            "date_created": "2014-10-23 10:03:51.215270+00:00", 
            "author": "https://api.launchpad.net/1.0/~wanghao749"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/130497", 
            "date_created": "2014-10-23 11:08:01.279457+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/130497\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=e54fb007a803b61dfcbc918d11e49eb616042f55\nSubmitter: Jenkins\nBranch:    master\n\ncommit e54fb007a803b61dfcbc918d11e49eb616042f55\nAuthor: wanghao <email address hidden>\nDate:   Thu Oct 23 19:02:48 2014 +0800\n\n    fix 'Empty module name' exception attaching volume\n    \n    Create encrypted volume type with 'LuksEncryptor'\n    provider, and attach the encrypted volume to volume.\n    Then nova raise the exception \"Empty module name\".\n    The code should add the full module name automatic.\n    \n    Change-Id: I641036fb5428154d73c2a1a0ed58171152b3900b\n    Closes-bug: #1384653\n", 
            "date_created": "2015-02-27 01:53:18.945671+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}