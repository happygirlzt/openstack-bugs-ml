{
    "status": "Invalid", 
    "last_updated": "2014-11-19 19:02:34.607836+00:00", 
    "description": "* When I do a resize-confirm on instances that have been migrated I get a unsubscriptable error.\n\n(1).  Boot multiple instances\n\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE1\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE2\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE3\n\nMIGRATE1:::vs33x-instance-00000053:::olyblade02\nMIGRATE2:::vs33x-instance-00000054:::olyblade02\nMIGRATE3:::vs33x-instance-00000055:::olyblade02\n\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | ACTIVE | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | ACTIVE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | ACTIVE | network1=10.0.1.6 |\n+--------------------------------------+----------+--------+-------------------+\n\n(2).  Migrate the instances\n\n* They all came back to verify_resize state:\n\n+--------------------------------------+----------+---------------+-------------------+\n| ID                                   | Name     | Status        | Networks          |\n+--------------------------------------+----------+---------------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | VERIFY_RESIZE | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | VERIFY_RESIZE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | VERIFY_RESIZE | network1=10.0.1.6 |\n+--------------------------------------+----------+---------------+-------------------+\n\n(3).  Resize-confirm\n\n* Attempt a resize-confirm on the instances\n\n- My instance went to ERROR\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | ERROR  | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | ACTIVE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | ACTIVE | network1=10.0.1.6 |\n+--------------------------------------+----------+--------+-------------------+\n\n[root@vs339 ~]# nova show MIGRATE1\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                  |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                  |\n| updated                             | 2013-04-09T16:20:47Z                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | vs339.rch.kstart.ibm.com                                                                                               |\n| key_name                            | None                                                                                                                   |\n| image                               | Rhel6MasterFile (9792609f-7b42-424b-9826-ae31c426f0bd)                                                                 |\n| network1 network                    | 10.0.1.4                                                                                                               |\n| hostId                              | d9d08dd10c89d762c75d081740e855c61bf3bf5c1083e4b73738dfdb                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | vs33x-instance-00000053                                                                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | olyblade01.rch.stglabs.ibm.com                                                                                         |\n| flavor                              | m1.tiny (1)                                                                                                            |\n| id                                  | 01761a76-1fe9-40ae-9f31-ebd019c7c8c6                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                |\n| user_id                             | 63233eadd9b1471c98b113d1b0af6c29                                                                                       |\n| name                                | MIGRATE1                                                                                                               |\n| created                             | 2013-04-09T15:37:45Z                                                                                                   |\n| tenant_id                           | b95d5e33d9b84a8e96787bcf6d91fc5c                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                 |\n| metadata                            | {}                                                                                                                     |\n| accessIPv4                          |                                                                                                                        |\n| accessIPv6                          |                                                                                                                        |\n| fault                               | {u'message': u'TypeError', u'code': 500, u'details': u'\\'NoneType\\' object is unsubscriptable                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 230, in decorated_function                     |\n|                                     |     return function(self, context, *args, **kwargs)                                                                    |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 2048, in confirm_resize                        |\n|                                     |     rt.confirm_resize(context, migration)                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 373, in confirm_resize                |\n|                                     |     self.update_available_resource(elevated)                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner                       |\n|                                     |     retval = f(*args, **kwargs)                                                                                        |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource     |\n|                                     |     self._update_usage_from_migrations(resources, migrations)                                                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations |\n|                                     |     migration)                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 426, in _update_usage_from_migration  |\n|                                     |     itype = instance_types.extract_instance_type(instance, \\'old_\\')                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type           |\n|                                     |     sys_meta = utils.metadata_to_dict(instance[\\'system_metadata\\'])                                                   |\n|                                     | ', u'created': u'2013-04-09T16:21:07Z'}                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                   |\n| config_drive                        |                                                                                                                        |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n\n\n- I hit the unsubscritable error:\n\n2013-04-09 11:18:20.971 1192 ERROR nova.manager [-] Error during ComputeManager.update_available_resource: 'NoneType' object is unsubscriptable\n2013-04-09 11:18:20.971 1192 TRACE nova.manager Traceback (most recent call last):\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/manager.py\", line 244, in periodic_tasks\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     task(self, context)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3862, in update_available_resource\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     rt.update_available_resource(context)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     retval = f(*args, **kwargs)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     self._update_usage_from_migrations(resources, migrations)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     migration)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 426, in _update_usage_from_migration\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     itype = instance_types.extract_instance_type(instance, 'old_')\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     sys_meta = utils.metadata_to_dict(instance['system_metadata'])\n2013-04-09 11:18:20.971 1192 TRACE nova.manager TypeError: 'NoneType' object is unsubscriptable\n2013-04-09 11:18:20.971 1192 TRACE nova.manager", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1166927", 
    "owner": "None", 
    "id": 1166927, 
    "index": 3580, 
    "created": "2013-04-09 17:49:05.428826+00:00", 
    "title": "Migrating multiple instances causes 'u'\\'NoneType\\' object is unsubscriptable ' Error", 
    "comments": [
        {
            "content": "* When I do a resize-confirm on instances that have been migrated I get a unsubscriptable error.\n\n(1).  Boot multiple instances\n\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE1\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE2\nnova boot --image 9792609f-7b42-424b-9826-ae31c426f0bd --flavor 1 MIGRATE3\n\nMIGRATE1:::vs33x-instance-00000053:::olyblade02\nMIGRATE2:::vs33x-instance-00000054:::olyblade02\nMIGRATE3:::vs33x-instance-00000055:::olyblade02\n\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | ACTIVE | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | ACTIVE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | ACTIVE | network1=10.0.1.6 |\n+--------------------------------------+----------+--------+-------------------+\n\n(2).  Migrate the instances\n\n* They all came back to verify_resize state:\n\n+--------------------------------------+----------+---------------+-------------------+\n| ID                                   | Name     | Status        | Networks          |\n+--------------------------------------+----------+---------------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | VERIFY_RESIZE | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | VERIFY_RESIZE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | VERIFY_RESIZE | network1=10.0.1.6 |\n+--------------------------------------+----------+---------------+-------------------+\n\n(3).  Resize-confirm\n\n* Attempt a resize-confirm on the instances\n\n- My instance went to ERROR\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 01761a76-1fe9-40ae-9f31-ebd019c7c8c6 | MIGRATE1 | ERROR  | network1=10.0.1.4 |\n| 3dfe852f-e0e5-4511-a16d-3ff7b3f278a2 | MIGRATE2 | ACTIVE | network1=10.0.1.3 |\n| d800eab4-f91e-48f9-b208-e5821f4da6b1 | MIGRATE3 | ACTIVE | network1=10.0.1.6 |\n+--------------------------------------+----------+--------+-------------------+\n\n[root@vs339 ~]# nova show MIGRATE1\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| Property                            | Value                                                                                                                  |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n| status                              | ERROR                                                                                                                  |\n| updated                             | 2013-04-09T16:20:47Z                                                                                                   |\n| OS-EXT-STS:task_state               | None                                                                                                                   |\n| OS-EXT-SRV-ATTR:host                | vs339.rch.kstart.ibm.com                                                                                               |\n| key_name                            | None                                                                                                                   |\n| image                               | Rhel6MasterFile (9792609f-7b42-424b-9826-ae31c426f0bd)                                                                 |\n| network1 network                    | 10.0.1.4                                                                                                               |\n| hostId                              | d9d08dd10c89d762c75d081740e855c61bf3bf5c1083e4b73738dfdb                                                               |\n| OS-EXT-STS:vm_state                 | error                                                                                                                  |\n| OS-EXT-SRV-ATTR:instance_name       | vs33x-instance-00000053                                                                                                |\n| OS-EXT-SRV-ATTR:hypervisor_hostname | olyblade01.rch.stglabs.ibm.com                                                                                         |\n| flavor                              | m1.tiny (1)                                                                                                            |\n| id                                  | 01761a76-1fe9-40ae-9f31-ebd019c7c8c6                                                                                   |\n| security_groups                     | [{u'name': u'default'}]                                                                                                |\n| user_id                             | 63233eadd9b1471c98b113d1b0af6c29                                                                                       |\n| name                                | MIGRATE1                                                                                                               |\n| created                             | 2013-04-09T15:37:45Z                                                                                                   |\n| tenant_id                           | b95d5e33d9b84a8e96787bcf6d91fc5c                                                                                       |\n| OS-DCF:diskConfig                   | MANUAL                                                                                                                 |\n| metadata                            | {}                                                                                                                     |\n| accessIPv4                          |                                                                                                                        |\n| accessIPv6                          |                                                                                                                        |\n| fault                               | {u'message': u'TypeError', u'code': 500, u'details': u'\\'NoneType\\' object is unsubscriptable                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 230, in decorated_function                     |\n|                                     |     return function(self, context, *args, **kwargs)                                                                    |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 2048, in confirm_resize                        |\n|                                     |     rt.confirm_resize(context, migration)                                                                              |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 373, in confirm_resize                |\n|                                     |     self.update_available_resource(elevated)                                                                           |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner                       |\n|                                     |     retval = f(*args, **kwargs)                                                                                        |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource     |\n|                                     |     self._update_usage_from_migrations(resources, migrations)                                                          |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations |\n|                                     |     migration)                                                                                                         |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 426, in _update_usage_from_migration  |\n|                                     |     itype = instance_types.extract_instance_type(instance, \\'old_\\')                                                   |\n|                                     |   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type           |\n|                                     |     sys_meta = utils.metadata_to_dict(instance[\\'system_metadata\\'])                                                   |\n|                                     | ', u'created': u'2013-04-09T16:21:07Z'}                                                                                |\n| OS-EXT-STS:power_state              | 1                                                                                                                      |\n| OS-EXT-AZ:availability_zone         | nova                                                                                                                   |\n| config_drive                        |                                                                                                                        |\n+-------------------------------------+------------------------------------------------------------------------------------------------------------------------+\n\n\n- I hit the unsubscritable error:\n\n2013-04-09 11:18:20.971 1192 ERROR nova.manager [-] Error during ComputeManager.update_available_resource: 'NoneType' object is unsubscriptable\n2013-04-09 11:18:20.971 1192 TRACE nova.manager Traceback (most recent call last):\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/manager.py\", line 244, in periodic_tasks\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     task(self, context)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3862, in update_available_resource\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     rt.update_available_resource(context)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     retval = f(*args, **kwargs)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     self._update_usage_from_migrations(resources, migrations)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     migration)\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 426, in _update_usage_from_migration\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     itype = instance_types.extract_instance_type(instance, 'old_')\n2013-04-09 11:18:20.971 1192 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type\n2013-04-09 11:18:20.971 1192 TRACE nova.manager     sys_meta = utils.metadata_to_dict(instance['system_metadata'])\n2013-04-09 11:18:20.971 1192 TRACE nova.manager TypeError: 'NoneType' object is unsubscriptable\n2013-04-09 11:18:20.971 1192 TRACE nova.manager", 
            "date_created": "2013-04-09 17:49:05.428826+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "* Mon Apr 08 2013 Rashed Ferdous <email address hidden> - 2013.1-201304081313.ibm.2\n- Source commit: 322591fb973dc6920dbed5aa1ce42db73a7ce311\n- sync oslo db/sqlalchemy module\n\nCommunity Code Level: 2df099a66d62bd22e2cf2f8c1c85975b3f3dda0b", 
            "date_created": "2013-04-09 17:58:02.847240+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "So you haven't reproduced this on actual upstream code, is that right? Assuming your modifications are based on 2df099a66d62bd22e2cf2f8c1c85975b3f3dda0b, there have been a lot of fixes against grizzly since that point. Could you please try to reproduce on top of the latest from upstream?", 
            "date_created": "2013-04-23 17:53:01.757126+00:00", 
            "author": "https://api.launchpad.net/1.0/~danms"
        }, 
        {
            "content": "(1).  Boot two instances one with flavor 1 and one with flavor 2\n\nnova boot --image fdfbb6d5-5ee1-4fc0-a4e2-b471a9f4813e --flavor 1 MIGRATE1\nnova boot --image fdfbb6d5-5ee1-4fc0-a4e2-b471a9f4813e --flavor 2 MIGRATE2\n\nMIGRATE1:::vs33x-instance-000000d4:::olyblade02\nMIGRATE2:::vs33x-instance-000000d5:::olyblade02\n\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 2ba77f32-8f7c-4b50-bfea-da0ed06395d9 | MIGRATE1 | ACTIVE | network1=10.0.1.3 |\n| d4abcf58-f322-467c-9f3b-df306dce80dc | MIGRATE2 | ACTIVE | network1=10.0.1.4 |\n+--------------------------------------+----------+--------+-------------------+\n\n(2).  Migrate the VM\n\n[root@vs339 ~]# nova migrate MIGRATE1\n[root@vs339 ~]# nova migrate MIGRATE2\n[root@vs339 ~]#\n\nState as of 12:00 p.m.:\n\n[root@vs339 ~]# nova list\n+--------------------------------------+----------+--------+-------------------+\n| ID                                   | Name     | Status | Networks          |\n+--------------------------------------+----------+--------+-------------------+\n| 2ba77f32-8f7c-4b50-bfea-da0ed06395d9 | MIGRATE1 | RESIZE | network1=10.0.1.3 |\n| d4abcf58-f322-467c-9f3b-df306dce80dc | MIGRATE2 | RESIZE | network1=10.0.1.4 |\n+--------------------------------------+----------+--------+-------------------+\n\n* hit the error\n\n2013-04-25 12:00:41.108 15684 ERROR nova.manager [-] Error during ComputeManager.update_available_resource: 'NoneType' object is unsubscriptable\n2013-04-25 12:00:41.108 15684 TRACE nova.manager Traceback (most recent call last):\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/manager.py\", line 244, in periodic_tasks\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     task(self, context)\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3900, in update_available_resource\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     rt.update_available_resource(context)\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     retval = f(*args, **kwargs)\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     self._update_usage_from_migrations(resources, migrations)\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     migration)\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 422, in _update_usage_from_migration\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     itype = instance_types.extract_instance_type(instance, 'new_')\n2013-04-25 12:00:41.108 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type\n2013-04-25 12:00:41.108 15684 TRACE nova.manager     sys_meta = utils.metadata_to_dict(instance['system_metadata'])\n2013-04-25 12:00:41.108 15684 TRACE nova.manager TypeError: 'NoneType' object is unsubscriptable\n2013-04-25 12:00:41.108 15684 TRACE nova.manager\n2013-04-25 12:01:47.683 15684 ERROR nova.manager [-] Error during ComputeManager.update_available_resource: 'NoneType' object is unsubscriptable\n2013-04-25 12:01:47.683 15684 TRACE nova.manager Traceback (most recent call last):\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/manager.py\", line 244, in periodic_tasks\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     task(self, context)\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3900, in update_available_resource\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     rt.update_available_resource(context)\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     retval = f(*args, **kwargs)\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     self._update_usage_from_migrations(resources, migrations)\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     migration)\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 422, in _update_usage_from_migration\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     itype = instance_types.extract_instance_type(instance, 'new_')\n2013-04-25 12:01:47.683 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type\n2013-04-25 12:01:47.683 15684 TRACE nova.manager     sys_meta = utils.metadata_to_dict(instance['system_metadata'])\n2013-04-25 12:01:47.683 15684 TRACE nova.manager TypeError: 'NoneType' object is unsubscriptable\n2013-04-25 12:01:47.683 15684 TRACE nova.manager\n2013-04-25 12:02:54.395 15684 ERROR nova.manager [-] Error during ComputeManager.update_available_resource: 'NoneType' object is unsubscriptable\n2013-04-25 12:02:54.395 15684 TRACE nova.manager Traceback (most recent call last):\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/manager.py\", line 244, in periodic_tasks\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     task(self, context)\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/manager.py\", line 3900, in update_available_resource\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     rt.update_available_resource(context)\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/openstack/common/lockutils.py\", line 242, in inner\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     retval = f(*args, **kwargs)\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 269, in update_available_resource\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     self._update_usage_from_migrations(resources, migrations)\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 466, in _update_usage_from_migrations\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     migration)\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/resource_tracker.py\", line 422, in _update_usage_from_migration\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     itype = instance_types.extract_instance_type(instance, 'new_')\n2013-04-25 12:02:54.395 15684 TRACE nova.manager   File \"/usr/lib/python2.6/site-packages/nova/compute/instance_types.py\", line 247, in extract_instance_type\n2013-04-25 12:02:54.395 15684 TRACE nova.manager     sys_meta = utils.metadata_to_dict(instance['system_metadata'])\n2013-04-25 12:02:54.395 15684 TRACE nova.manager TypeError: 'NoneType' object is unsubscriptable\n2013-04-25 12:02:54.395 15684 TRACE nova.manager\n\n* This was on rebase code:\n\n* Tue Apr 23 2013 Matt Riedemann <email address hidden> - 2013.1.0.1-201304231552.ibm.4\n- Source commit: c9a08424130810d560ece23167045b913f0fc8b4\n- Merge branch 'stable/grizzly' into osee-grizzly\n", 
            "date_created": "2013-04-25 17:05:12.737389+00:00", 
            "author": "https://api.launchpad.net/1.0/~jbelden"
        }, 
        {
            "content": "Is this still a problem?  What nova virt driver was being used?  Can this be reproduced with devstack?", 
            "date_created": "2014-03-22 23:23:58.629930+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ]
}