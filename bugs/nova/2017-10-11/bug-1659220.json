{
    "status": "Opinion", 
    "last_updated": "2017-07-28 12:51:13.448708+00:00", 
    "description": "Description\n===========\nYou have an instance and a volume and attach the volume against this instance everything works fine. But if you take a snapshot of this volume (detached) and try to attach again Horizon tells you everything was ok but the volume stays in the available state and isn't available in the instance.\n\nThe actual problem seems to come from libvirt as it doesn't create the required AppArmor rules in the /etc/apparmor.d/libvirt/libvirt-<UUID>.files\n\nSteps to reproduce\n==================\n* create an instance\n* create an volume\n* snapshot the volume\n* attach the volume\n\nExpected result\n===============\nVolume should be attached to the instance.\n\nActual result\n=============\nVolume stays available not attached.\n\nEnvironment\n===========\nUbuntu 16.04 with Newton via Cloud Archive.\n\n1. Exact version of OpenStack you are running. See the following\nii  nova-common                        2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute                       2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute-kvm                   2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute-libvirt               2:14.0.1-0ubuntu1~cloud0            all\nii  python-nova                        2:14.0.1-0ubuntu1~cloud0            all\nii  python-novaclient                  2:6.0.0-0ubuntu1~cloud0             all\n\n2. Which hypervisor did you use?\nii  libvirt-bin                        1.3.1-1ubuntu10.6                   amd64\nii  libvirt0:amd64                     1.3.1-1ubuntu10.6                   amd64\nii  python-libvirt                     1.3.1-1ubuntu1                      amd64\n\nii  ipxe-qemu                          1.0.0+git-20150424.a25a16d-1ubuntu1 all\nii  qemu-block-extra:amd64             1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-kvm                           1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-system-common                 1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-system-x86                    1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-utils                         1:2.5+dfsg-5ubuntu10.6              amd64\n\n2. Which storage type did you use?\nii  glusterfs-client                   3.7.6-1ubuntu1                      amd64\nii  glusterfs-common                   3.7.6-1ubuntu1                      amd64\n\n3. Which networking type did you use?\nii  neutron-common                     2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  neutron-linuxbridge-agent          2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  neutron-plugin-linuxbridge-agent   2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  python-neutron                     2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  python-neutron-fwaas               1:9.0.0-0ubuntu1~cloud0             all\nii  python-neutron-lib                 0.4.0-0ubuntu1~cloud0               all\nii  python-neutronclient               1:6.0.0-0ubuntu1~cloud0             all\n\nLogs & Configs\n==============\n\nkern.log\nJan 25 09:29:03 ext kernel: [6527389.763944] audit: type=1400 audit(1485332943.463:125): apparmor=\"DENIED\" operation=\"open\" profile=\"libvirt-c9c9ec47-f4e7-4065-9b45-947d1c9efcd3\" name=\"/var/lib/nova/mnt/974fd68b172ee6f649b9ada09de2edf4/volume-fb44d9f4-4247-44e1-98a9-14bde7582ab0\" pid=30968 comm=\"qemu-system-x86\" requested_mask=\"r\" denied_mask=\"r\" fsuid=113 ouid=113\nJan 25 09:29:03 ext kernel: [6527389.763999] audit: type=1400 audit(1485332943.463:126): apparmor=\"DENIED\" operation=\"open\" profile=\"libvirt-c9c9ec47-f4e7-4065-9b45-947d1c9efcd3\" name=\"/var/lib/nova/mnt/974fd68b172ee6f649b9ada09de2edf4/volume-fb44d9f4-4247-44e1-98a9-14bde7582ab0\" pid=30968 comm=\"qemu-system-x86\" requested_mask=\"r\" denied_mask=\"r\" fsuid=113 ouid=113\n\nlibvirt-bin:\nJan 25 09:39:57 m2r1 libvirtd[31600]: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n\nnova-compute:\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Failed to attach volume at mountpoint: /dev/vdb\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Driver failed to attach volume fb44d9f4-4247-44e1-98a9-14bde7582ab0 at /dev/vdb\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Failed to attach fb44d9f4-4247-44e1-98a9-14bde7582ab0 at /dev/vdb\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4680, in _attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     do_check_attach=False, do_driver_attach=True)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 49, in wrapped\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     ret_val = method(obj, context, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 283, in attach\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     connector)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] Exception during message handling\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 216, in decorated_function\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 204, in decorated_function\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4670, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     do_attach_volume(context, instance, driver_bdm)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 274, in inner\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return f(*args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4668, in do_attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     bdm.destroy()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4665, in do_attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return self._attach_volume(context, instance, driver_bdm)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4688, in _attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.volume_api.unreserve_volume(context, bdm.volume_id)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4680, in _attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     do_check_attach=False, do_driver_attach=True)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 49, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     ret_val = method(obj, context, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 283, in attach\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     connector)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(c, e, tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     rv = meth(*args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server", 
    "tags": [
        "openstack-version.newton"
    ], 
    "importance": "Wishlist", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1659220", 
    "owner": "None", 
    "id": 1659220, 
    "index": 1855, 
    "created": "2017-01-25 09:30:07.794090+00:00", 
    "title": "Attaching volume after taking snapshot fails silently", 
    "comments": [
        {
            "content": "Description\n===========\nYou have an instance and a volume and attach the volume against this instance everything works fine. But if you take a snapshot of this volume (detached) and try to attach again Horizon tells you everything was ok but the volume stays in the available state and isn't available in the instance.\n\nThe actual problem seems to come from libvirt as it doesn't create the required AppArmor rules in the /etc/apparmor.d/libvirt/libvirt-<UUID>.files\n\nSteps to reproduce\n==================\n* create an instance\n* create an volume\n* snapshot the volume\n* attach the volume\n\nExpected result\n===============\nVolume should be attached to the instance.\n\nActual result\n=============\nVolume stays available not attached.\n\nEnvironment\n===========\nUbuntu 16.04 with Newton via Cloud Archive.\n\n1. Exact version of OpenStack you are running. See the following\nii  nova-common                        2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute                       2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute-kvm                   2:14.0.1-0ubuntu1~cloud0            all\nii  nova-compute-libvirt               2:14.0.1-0ubuntu1~cloud0            all\nii  python-nova                        2:14.0.1-0ubuntu1~cloud0            all\nii  python-novaclient                  2:6.0.0-0ubuntu1~cloud0             all\n\n2. Which hypervisor did you use?\nii  libvirt-bin                        1.3.1-1ubuntu10.6                   amd64\nii  libvirt0:amd64                     1.3.1-1ubuntu10.6                   amd64\nii  python-libvirt                     1.3.1-1ubuntu1                      amd64\n\nii  ipxe-qemu                          1.0.0+git-20150424.a25a16d-1ubuntu1 all\nii  qemu-block-extra:amd64             1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-kvm                           1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-system-common                 1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-system-x86                    1:2.5+dfsg-5ubuntu10.6              amd64\nii  qemu-utils                         1:2.5+dfsg-5ubuntu10.6              amd64\n\n2. Which storage type did you use?\nii  glusterfs-client                   3.7.6-1ubuntu1                      amd64\nii  glusterfs-common                   3.7.6-1ubuntu1                      amd64\n\n3. Which networking type did you use?\nii  neutron-common                     2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  neutron-linuxbridge-agent          2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  neutron-plugin-linuxbridge-agent   2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  python-neutron                     2:9.0.0-0ubuntu1.16.10.2~cloud0     all\nii  python-neutron-fwaas               1:9.0.0-0ubuntu1~cloud0             all\nii  python-neutron-lib                 0.4.0-0ubuntu1~cloud0               all\nii  python-neutronclient               1:6.0.0-0ubuntu1~cloud0             all\n\nLogs & Configs\n==============\n\nkern.log\nJan 25 09:29:03 ext kernel: [6527389.763944] audit: type=1400 audit(1485332943.463:125): apparmor=\"DENIED\" operation=\"open\" profile=\"libvirt-c9c9ec47-f4e7-4065-9b45-947d1c9efcd3\" name=\"/var/lib/nova/mnt/974fd68b172ee6f649b9ada09de2edf4/volume-fb44d9f4-4247-44e1-98a9-14bde7582ab0\" pid=30968 comm=\"qemu-system-x86\" requested_mask=\"r\" denied_mask=\"r\" fsuid=113 ouid=113\nJan 25 09:29:03 ext kernel: [6527389.763999] audit: type=1400 audit(1485332943.463:126): apparmor=\"DENIED\" operation=\"open\" profile=\"libvirt-c9c9ec47-f4e7-4065-9b45-947d1c9efcd3\" name=\"/var/lib/nova/mnt/974fd68b172ee6f649b9ada09de2edf4/volume-fb44d9f4-4247-44e1-98a9-14bde7582ab0\" pid=30968 comm=\"qemu-system-x86\" requested_mask=\"r\" denied_mask=\"r\" fsuid=113 ouid=113\n\nlibvirt-bin:\nJan 25 09:39:57 m2r1 libvirtd[31600]: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n\nnova-compute:\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Failed to attach volume at mountpoint: /dev/vdb\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:57.287 4091 ERROR nova.virt.libvirt.driver [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Driver failed to attach volume fb44d9f4-4247-44e1-98a9-14bde7582ab0 at /dev/vdb\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:57.804 4091 ERROR nova.virt.block_device [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Failed to attach fb44d9f4-4247-44e1-98a9-14bde7582ab0 at /dev/vdb\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] Traceback (most recent call last):\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4680, in _attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     do_check_attach=False, do_driver_attach=True)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 49, in wrapped\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     ret_val = method(obj, context, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 283, in attach\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     connector)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self.force_reraise()\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     six.reraise(c, e, tb)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     rv = meth(*args, **kwargs)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3]     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:58.248 4091 ERROR nova.compute.manager [instance: c9c9ec47-f4e7-4065-9b45-947d1c9efcd3] \n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server [req-e164a413-2688-4906-93e1-814da66e4b87 78009cee2c13413db3f15ef242e9073c 6c8b3ce916864989ba15a76dfe88e0a9 - - -] Exception during message handling\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server Traceback (most recent call last):\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 133, in _process_incoming\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     res = self.dispatcher.dispatch(message)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 150, in dispatch\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return self._do_dispatch(endpoint, method, ctxt, args)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_messaging/rpc/dispatcher.py\", line 121, in _do_dispatch\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     result = func(ctxt, **new_args)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 75, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     function_name, call_dict, binary)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/exception_wrapper.py\", line 66, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return f(self, context, *args, **kw)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 216, in decorated_function\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     kwargs['instance'], e, sys.exc_info())\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 204, in decorated_function\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return function(self, context, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4670, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     do_attach_volume(context, instance, driver_bdm)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_concurrency/lockutils.py\", line 274, in inner\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return f(*args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4668, in do_attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     bdm.destroy()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4665, in do_attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     return self._attach_volume(context, instance, driver_bdm)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4688, in _attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.volume_api.unreserve_volume(context, bdm.volume_id)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 4680, in _attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     do_check_attach=False, do_driver_attach=True)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 49, in wrapped\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     ret_val = method(obj, context, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 283, in attach\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     connector)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/block_device.py\", line 274, in attach\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     device_type=self['device_type'], encryption=encryption)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1157, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self._disconnect_volume(connection_info, disk_dev)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 220, in __exit__\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self.force_reraise()\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/oslo_utils/excutils.py\", line 196, in force_reraise\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(self.type_, self.value, self.tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1146, in attach_volume\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     guest.attach_device(conf, persistent=True, live=live)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/guest.py\", line 295, in attach_device\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     self._domain.attachDeviceFlags(device_xml, flags=flags)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 186, in doit\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 144, in proxy_call\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     rv = execute(f, *args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 125, in execute\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     six.reraise(c, e, tb)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 83, in tworker\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     rv = meth(*args, **kwargs)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 560, in attachDeviceFlags\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server     if ret == -1: raise libvirtError ('virDomainAttachDeviceFlags() failed', dom=self)\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server libvirtError: internal error: unable to execute QEMU command 'device_add': Property 'virtio-blk-device.drive' can't find value 'drive-virtio-disk1'\n2017-01-25 09:39:58.492 4091 ERROR oslo_messaging.rpc.server", 
            "date_created": "2017-01-25 09:30:07.794090+00:00", 
            "author": "https://api.launchpad.net/1.0/~paul-seidler"
        }, 
        {
            "content": "It's 'silent' because the volume attach request is an RPC cast from nova-api to nova-compute, so the API returns a 202 since it's an asynchronous operation. The failure happens on the compute. There should be an associated fault with the instance after the attach fails, but only admins can see the faults since they contain exception information.", 
            "date_created": "2017-02-05 20:35:45.108153+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "We met the same problem last week. We found the problem was just libvirt. \n\nAction : Please check your libvirt conf (/etc/libvirt/qemu.conf). When we changed security_driver = \"selinux\" to  security_driver = \"none\", it became ok.\n\nIf you want selinux, maybe you need to config your selinux.", 
            "date_created": "2017-03-07 12:05:55.404259+00:00", 
            "author": "https://api.launchpad.net/1.0/~etscript"
        }, 
        {
            "content": "Indeed that fixes the problem. Still I don't consider this a solution as it disables confined guests.", 
            "date_created": "2017-03-10 09:19:18.725010+00:00", 
            "author": "https://api.launchpad.net/1.0/~paul-seidler"
        }, 
        {
            "content": "Automatically discovered version newton in description. If this is incorrect, please update the description to include 'nova version: ...'", 
            "date_created": "2017-06-27 15:56:28.073222+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Managing the AppArmor config is currently beyond scope for Nova, thus marking this as Opinion. It would be good if those rules from the distros were able to do this better.\n\nIf you wanted to put that in scope for Nova, that would require a Nova spec - https://specs.openstack.org/openstack/nova-specs/readme.html", 
            "date_created": "2017-07-28 12:51:12.957986+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}