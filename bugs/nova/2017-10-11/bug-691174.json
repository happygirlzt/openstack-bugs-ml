{
    "status": "Invalid", 
    "last_updated": "2011-02-09 09:59:17.205875+00:00", 
    "description": "I've replicated this on two different Rackspace cloud servers which started as 10.04 images that I manually upgraded to 10.10. \n\nUsing ttx's instructions at http://fnords.wordpress.com/2010/12/02/bleeding-edge-openstack-nova-on-maverick/, on a system where I had already installed Nova, running \n\n\nsudo apt-get install nova-api nova-objectstore nova-compute nova-scheduler nova-network euca2ools unzip\n\nstalls at \n\nInstalling new version of config file /etc/logrotate.d/nova-common ...\n\n\nand never completes.", 
    "tags": [
        "ubuntu"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/691174", 
    "owner": "None", 
    "id": 691174, 
    "index": 1971, 
    "created": "2010-12-16 16:47:57.249128+00:00", 
    "title": "On Ubuntu 10.10, upgrading a nova install stalls", 
    "comments": [
        {
            "content": "I've replicated this on two different Rackspace cloud servers which started as 10.04 images that I manually upgraded to 10.10. \n\nUsing ttx's instructions at http://fnords.wordpress.com/2010/12/02/bleeding-edge-openstack-nova-on-maverick/, on a system where I had already installed Nova, running \n\n\nsudo apt-get install nova-api nova-objectstore nova-compute nova-scheduler nova-network euca2ools unzip\n\nstalls at \n\nInstalling new version of config file /etc/logrotate.d/nova-common ...\n\n\nand never completes.", 
            "date_created": "2010-12-16 16:47:57.249128+00:00", 
            "author": "https://api.launchpad.net/1.0/~annegentle"
        }, 
        {
            "content": "Additional info: \n\nIn fact it didn't quite stall out all the way on the second test box I ran it on. Here's the remaining errors. I also see these errors when I try to run the VM at http://wiki.openstack.org/NovaVirtually\n\nInstalling new version of config file /etc/init.d/nova-scheduler ...\n * Starting nova scheduler nova-scheduler\nWARNING:root:Starting scheduler node\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/twistd.py\", line 279, in serve\n    twistd.runApp(options)\n  File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n    _SomeApplicationRunner(config).run()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 374, in run\n    self.application = self.createOrGetApplication()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 439, in createOrGetApplication\n    application = getApplication(self.config, passphrase)\n--- <exception caught here> ---\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 450, in getApplication\n    application = service.loadApplication(filename, style, passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 390, in loadApplication\n    application = sob.loadValueFromFile(filename, 'application', passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/persisted/sob.py\", line 210, in loadValueFromFile\n    exec fileObj in d, d\n  File \"/usr/bin/nova-scheduler\", line 48, in <module>\n    application = service.Service.create()\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/service.py\", line 127, in create\n    proxy=service_obj)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 149, in __init__\n    topic=topic)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 140, in __init__\n    super(TopicConsumer, self).__init__(connection=connection)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 86, in __init__\n    super(Consumer, self).__init__(*args, **kwargs)\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 230, in __init__\n    self.declare()\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 267, in declare\n    warn_if_exists=self.warn_if_exists)\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 221, in queue_declare\n    return self.channel.queue_declare(queue=queue,\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 169, in channel\n    self._channel_ref = weakref.ref(self.connection.get_channel())\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 150, in get_channel\n    return self.connection.channel()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 120, in connection\n    self._connection = self._establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 133, in _establish_connection\n    return self.create_backend().establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 183, in establish_connection\n    connect_timeout=conninfo.connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/connection.py\", line 125, in __init__\n    self.transport = create_transport(host, connect_timeout, ssl)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 220, in create_transport\n    return TCPTransport(host, connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 58, in __init__\n    self.sock.connect((host, port))\n  File \"<string>\", line 1, in connect\n    \nsocket.error: [Errno 111] Connection refused\n\nFailed to load application: [Errno 111] Connection refused\n\n   ...fail!\ninvoke-rc.d: initscript nova-scheduler, action \"start\" failed.\nSetting up nova-api (2011.1~bzr464-0ubuntu0ppa1~maverick1) ...\n * Starting nova api nova-api\n   ...done.\nSetting up nova-network (2011.1~bzr464-0ubuntu0ppa1~maverick1) ...\n * Starting nova network nova-network\nWARNING:root:Starting network node\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/twistd.py\", line 279, in serve\n    twistd.runApp(options)\n  File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n    _SomeApplicationRunner(config).run()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 374, in run\n    self.application = self.createOrGetApplication()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 439, in createOrGetApplication\n    application = getApplication(self.config, passphrase)\n--- <exception caught here> ---\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 450, in getApplication\n    application = service.loadApplication(filename, style, passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 390, in loadApplication\n    application = sob.loadValueFromFile(filename, 'application', passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/persisted/sob.py\", line 210, in loadValueFromFile\n    exec fileObj in d, d\n  File \"/usr/bin/nova-network\", line 48, in <module>\n    application = service.Service.create()  # pylint: disable-msg=C0103\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/service.py\", line 127, in create\n    proxy=service_obj)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 149, in __init__\n    topic=topic)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 140, in __init__\n    super(TopicConsumer, self).__init__(connection=connection)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 86, in __init__\n    super(Consumer, self).__init__(*args, **kwargs)\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 230, in __init__\n    self.declare()\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 267, in declare\n    warn_if_exists=self.warn_if_exists)\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 221, in queue_declare\n    return self.channel.queue_declare(queue=queue,\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 169, in channel\n    self._channel_ref = weakref.ref(self.connection.get_channel())\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 150, in get_channel\n    return self.connection.channel()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 120, in connection\n    self._connection = self._establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 133, in _establish_connection\n    return self.create_backend().establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 183, in establish_connection\n    connect_timeout=conninfo.connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/connection.py\", line 125, in __init__\n    self.transport = create_transport(host, connect_timeout, ssl)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 220, in create_transport\n    return TCPTransport(host, connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 58, in __init__\n    self.sock.connect((host, port))\n  File \"<string>\", line 1, in connect\n    \nsocket.error: [Errno 111] Connection refused\n\nFailed to load application: [Errno 111] Connection refused\n\n   ...fail!\ninvoke-rc.d: initscript nova-network, action \"start\" failed.\nSetting up nova-objectstore (2011.1~bzr464-0ubuntu0ppa1~maverick1) ...\n * Starting nova objectstore nova-objectstore\n   ...done.\nProcessing triggers for python-central ...\nSetting up cloud-utils (0.16ubuntu1) ...\nSetting up nova-compute (2011.1~bzr464-0ubuntu0ppa1~maverick1) ...\nAdding user `nova' to group `libvirtd' ...\nAdding user nova to group libvirtd\nDone.\n * Starting nova compute nova-compute\nWARNING:root:Starting compute node\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/twistd.py\", line 279, in serve\n    twistd.runApp(options)\n  File \"/usr/lib/python2.6/dist-packages/twisted/scripts/twistd.py\", line 23, in runApp\n    _SomeApplicationRunner(config).run()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 374, in run\n    self.application = self.createOrGetApplication()\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 439, in createOrGetApplication\n    application = getApplication(self.config, passphrase)\n--- <exception caught here> ---\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/app.py\", line 450, in getApplication\n    application = service.loadApplication(filename, style, passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/application/service.py\", line 390, in loadApplication\n    application = sob.loadValueFromFile(filename, 'application', passphrase)\n  File \"/usr/lib/python2.6/dist-packages/twisted/persisted/sob.py\", line 210, in loadValueFromFile\n    exec fileObj in d, d\n  File \"/usr/bin/nova-compute\", line 48, in <module>\n    application = service.Service.create()  # pylint: disable=C0103\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/service.py\", line 127, in create\n    proxy=service_obj)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 149, in __init__\n    topic=topic)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 140, in __init__\n    super(TopicConsumer, self).__init__(connection=connection)\n  File \"/usr/local/lib/python2.6/dist-packages/nova-2010.1-py2.6.egg/nova/rpc.py\", line 86, in __init__\n    super(Consumer, self).__init__(*args, **kwargs)\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 230, in __init__\n    self.declare()\n  File \"/usr/lib/pymodules/python2.6/carrot/messaging.py\", line 267, in declare\n    warn_if_exists=self.warn_if_exists)\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 221, in queue_declare\n    return self.channel.queue_declare(queue=queue,\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 169, in channel\n    self._channel_ref = weakref.ref(self.connection.get_channel())\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 150, in get_channel\n    return self.connection.channel()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 120, in connection\n    self._connection = self._establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/connection.py\", line 133, in _establish_connection\n    return self.create_backend().establish_connection()\n  File \"/usr/lib/pymodules/python2.6/carrot/backends/pyamqplib.py\", line 183, in establish_connection\n    connect_timeout=conninfo.connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/connection.py\", line 125, in __init__\n    self.transport = create_transport(host, connect_timeout, ssl)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 220, in create_transport\n    return TCPTransport(host, connect_timeout)\n  File \"/usr/lib/pymodules/python2.6/amqplib/client_0_8/transport.py\", line 58, in __init__\n    self.sock.connect((host, port))\n  File \"<string>\", line 1, in connect\n    \nsocket.error: [Errno 111] Connection refused\n\nFailed to load application: [Errno 111] Connection refused\n\n   ...fail!\ninvoke-rc.d: initscript nova-compute, action \"start\" failed.\nProcessing triggers for libc-bin ...\nldconfig deferred processing now taking place\nProcessing triggers for python-support ...\n", 
            "date_created": "2010-12-16 18:34:32.840660+00:00", 
            "author": "https://api.launchpad.net/1.0/~annegentle"
        }, 
        {
            "content": "Couldn't really reproduce that error...\r\n\r\nLooking at your logs, it appears you don't have rabbitmq-server installed (or running). If you just upgraded a redis-dependent Nova into a Rabbit-using one, you might have missed that prerequisite step ? If not, could you give me more details on what you started from and what you tried to go to ?", 
            "date_created": "2010-12-22 09:13:03.010948+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "I'm reasonably sure I fixed this yesterday. Can you check if it's still a\nproblem?\n\nSent from my phone. Please pardon my brevity.\n", 
            "date_created": "2010-12-22 09:31:56+00:00", 
            "author": "https://api.launchpad.net/1.0/~soren"
        }, 
        {
            "content": "@Anne, any chance you could retest that, like Soren asked ?", 
            "date_created": "2011-01-18 16:52:47.904780+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Closing as supposed fixed, without answer from OP. Please reopen if you can reproduce it.", 
            "date_created": "2011-02-09 09:59:14.283865+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}