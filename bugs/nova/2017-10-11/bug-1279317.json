{
    "status": "Fix Released", 
    "last_updated": "2014-05-01 16:42:14.603324+00:00", 
    "description": "gkotton@ubuntu:~/nova$ tox nova.tests.virt.xenapi.test_xenapi\npy26 create: /home/gkotton/nova/.tox/py26\nERROR: InterpreterNotFound: python2.6\npy27 develop-inst-nodeps: /home/gkotton/nova\npy27 runtests: commands[0] | python -m nova.openstack.common.lockutils python setup.py test --slowest --testr-args=nova.tests.virt.xenapi.test_xenapi\n[pbr] Excluding argparse: Python 2.6 only dependency\nrunning test\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests --list \nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmp349WwU\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpccaidD\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpMvMcYb\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpzJ2QHG\nRan 201 (+199) tests in 16.446s (+0.396s)\nPASSED (id=350)\nSlowest Tests\nTest id                                                                                                                  Runtime (s)\n-----------------------------------------------------------------------------------------------------------------------  -----------\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_agent_upgrade_fails_silently                              16.223\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_fails_agent_not_implemented                               16.222\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_fails_with_agent_bad_return                               16.034\nnova.tests.virt.xenapi.test_xenapi.XenAPIAggregateTestCase.test_add_aggregate_host_raise_err                              1.116\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_maintenance_mode                                                 0.297\nnova.tests.virt.xenapi.test_xenapi.XenAPIMigrateInstance.test_migrate_disk_and_power_off                                  0.277\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_vlanmanager                                                0.195\nnova.tests.virt.xenapi.test_xenapi.XenAPIAggregateTestCase.test_remote_master_non_empty_pool                              0.179\nnova.tests.virt.xenapi.test_xenapi.XenAPIMigrateInstance.test_migrate_disk_and_power_off_with_zero_gb_old_and_new_works   0.179\nnova.tests.virt.xenapi.test_xenapi.XenAPIDom0IptablesFirewallTestCase.test_static_filters                                 0.171\npy33 create: /home/gkotton/nova/.tox/py33\nERROR: InterpreterNotFound: python3.3", 
    "tags": [
        "xenserver"
    ], 
    "importance": "Wishlist", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1279317", 
    "owner": "https://api.launchpad.net/1.0/~johannes.erdfelt", 
    "id": 1279317, 
    "index": 1492, 
    "created": "2014-02-12 12:23:54.914186+00:00", 
    "title": "xen: agent tests take longer than 15 secs", 
    "comments": [
        {
            "content": "gkotton@ubuntu:~/nova$ tox nova.tests.virt.xenapi.test_xenapi\npy26 create: /home/gkotton/nova/.tox/py26\nERROR: InterpreterNotFound: python2.6\npy27 develop-inst-nodeps: /home/gkotton/nova\npy27 runtests: commands[0] | python -m nova.openstack.common.lockutils python setup.py test --slowest --testr-args=nova.tests.virt.xenapi.test_xenapi\n[pbr] Excluding argparse: Python 2.6 only dependency\nrunning test\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests --list \nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmp349WwU\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpccaidD\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpMvMcYb\nrunning=OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \\\nOS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \\\nOS_TEST_TIMEOUT=${OS_TEST_TIMEOUT:-160} \\\n${PYTHON:-python} -m subunit.run discover -t ./ ./nova/tests  --load-list /tmp/tmpzJ2QHG\nRan 201 (+199) tests in 16.446s (+0.396s)\nPASSED (id=350)\nSlowest Tests\nTest id                                                                                                                  Runtime (s)\n-----------------------------------------------------------------------------------------------------------------------  -----------\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_agent_upgrade_fails_silently                              16.223\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_fails_agent_not_implemented                               16.222\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_fails_with_agent_bad_return                               16.034\nnova.tests.virt.xenapi.test_xenapi.XenAPIAggregateTestCase.test_add_aggregate_host_raise_err                              1.116\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_maintenance_mode                                                 0.297\nnova.tests.virt.xenapi.test_xenapi.XenAPIMigrateInstance.test_migrate_disk_and_power_off                                  0.277\nnova.tests.virt.xenapi.test_xenapi.XenAPIVMTestCase.test_spawn_vlanmanager                                                0.195\nnova.tests.virt.xenapi.test_xenapi.XenAPIAggregateTestCase.test_remote_master_non_empty_pool                              0.179\nnova.tests.virt.xenapi.test_xenapi.XenAPIMigrateInstance.test_migrate_disk_and_power_off_with_zero_gb_old_and_new_works   0.179\nnova.tests.virt.xenapi.test_xenapi.XenAPIDom0IptablesFirewallTestCase.test_static_filters                                 0.171\npy33 create: /home/gkotton/nova/.tox/py33\nERROR: InterpreterNotFound: python3.3", 
            "date_created": "2014-02-12 12:23:54.914186+00:00", 
            "author": "https://api.launchpad.net/1.0/~garyk"
        }, 
        {
            "content": "Seen in gate too http://logs.openstack.org/70/71270/3/check/gate-nova-python27/a93143f/console.html", 
            "date_created": "2014-02-14 22:00:30.044412+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/80247", 
            "date_created": "2014-03-13 11:03:40.565193+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This particular problem was fixed yesterday:\n\nhttps://review.openstack.org/#/c/79743/\n\nSorry, I didn't see this bug open or I would have grabbed it.", 
            "date_created": "2014-03-13 14:49:15.454896+00:00", 
            "author": "https://api.launchpad.net/1.0/~johannes.erdfelt"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/80247\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=6def27b434a53aa8c1aca62640a6c072cc21209e\nSubmitter: Jenkins\nBranch:    master\n\ncommit 6def27b434a53aa8c1aca62640a6c072cc21209e\nAuthor: John Garbutt <email address hidden>\nDate:   Thu Mar 13 10:58:58 2014 +0000\n\n    xenapi: fixup agent tests\n    \n    The root cause of the slow agent tests was not mocking this method:\n    compute_utils.add_instance_fault_from_exc\n    \n    This cleans up the tests to share a bit more code, and ensures they\n    actually check that the appropriate exception is raised.\n    \n    This change adds a log message to report errors that could occur in\n    running systems that also helped identify this issue in the unit tests.\n    \n    test_spawn_fails_agent_not_implemented was a duplicate test and has been\n    removed.\n    \n    Change-Id: I6fd31520fffd5e888ce0c2b58af2715f0d929ce1\n    Closes-Bug: #1279317\n", 
            "date_created": "2014-05-01 16:42:13.458959+00:00", 
            "author": "https://api.launchpad.net/1.0/~openstack-gerrit"
        }
    ]
}