{
    "status": "Invalid", 
    "last_updated": "2015-11-23 21:04:51.315170+00:00", 
    "description": "Hypervisor status does not update immediately after 'nova delete', after about 1min the status is correct. But if we boot instance or live migrate on this hyperviosr, it make mistake. \nAlso, I notice that when running command 'nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 vm1' every one second, the vm will be on one host mostly, because the same reason. Furthermore, after many times 'boot' and 'delete' the hypervisor status becomes muddled.\nActually, after 'nova delete' the table compute_nodes will not be updated immediately, it also lasts until periodic task. \n\nBUT, those should be updated immediately.\n\nTest steps:\n1. environment, there is a 'vm1' on hypervisor 'ubuntu'\nzhgaoxa@ubuntu:~/src$ nova list\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks         |\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| a439e64e-0d1c-4c23-8cfd-6ab12dc9a209 | vm1  | ACTIVE | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+--------+------------+-------------+------------------+\nzhgaoxa@ubuntu:~/src$ nova show vm1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| status                               | ACTIVE                                                         |\n| updated                              | 2013-07-18T07:05:29Z                                           |\n| OS-EXT-STS:task_state                | None                                                           |\n| OS-EXT-SRV-ATTR:host                 | ubuntu                                                         |\n| key_name                             | None                                                           |\n| image                                | cirros-0.3.1-x86_64-uec (2898d4c0-40e7-4449-a21b-07264f32713d) |\n| private network                      | 10.0.0.2                                                       |\n| hostId                               | 3ed8295691f7c645346e3ebd2878c11aa9463c1386b3b1c38e3e42e6       |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000057                                              |\n| OS-SRV-USG:launched_at               | 2013-07-18T07:05:29.000000                                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | ubuntu                                                         |\n| flavor                               | m1.tiny (1)                                                    |\n| id                                   | a439e64e-0d1c-4c23-8cfd-6ab12dc9a209                           |\n| security_groups                      | [{u'name': u'default'}]                                        |\n| OS-SRV-USG:terminated_at             | None                                                           |\n| user_id                              | 2361015c303149f8aa5bca17fb5be92d                               |\n| name                                 | vm1                                                            |\n| created                              | 2013-07-18T07:05:25Z                                           |\n| tenant_id                            | cc05fb78cffb4c308ead93b731ca7357                               |\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| metadata                             | {}                                                             |\n| os-extended-volumes:volumes_attached | []                                                             |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| progress                             | 0                                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| config_drive                         |                                                                |\n+--------------------------------------+----------------------------------------------------------------+\n\n2. delete vm1 and watch the hypervior status. The value of property free_ram_mb/free_disk_gb/ vcpus_used / vcpus_used /memory_mb_used/running_vms are not correct until about 1min later periodic task run. \nzhgaoxa@ubuntu:~/src$ nova delete vm1 \nzhgaoxa@ubuntu:~/src$ watch 'nova hypervisor-show ubuntu'\nEvery 2.0s: nova hypervisor-show ubuntu                                                                                 Thu Jul 18 15:09:18 2013\n\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property             | Value                                                                                                                                               |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| hypervisor_hostname  | ubuntu                                                                                                                                              |\n| cpu_info             | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |\n| free_disk_gb         | 29                                                                                                                                                  |\n| hypervisor_version   | 1000000                                                                                                                                             |\n| disk_available_least | 25                                                                                                                                                  |\n| local_gb             | 30                                                                                                                                                  |\n| free_ram_mb          | 979                                                                                                                                                 |\n| id                   | 1                                                                                                                                                   |\n| vcpus_used           | 1                                                                                                                                                   |\n| hypervisor_type      | QEMU                                                                                                                                                |\n| local_gb_used        | 1                                                                                                                                                   |\n| memory_mb_used       | 1024                                                                                                                                                |\n| memory_mb            | 2003                                                                                                                                                |\n| current_workload     | 0                                                                                                                                                   |\n| vcpus                | 2                                                                                                                                                   |\n| running_vms          | 1                                                                                                                                                   |\n| service_id           | 2                                                                                                                                                   |\n| service_host         | ubuntu                                                                                                                                              |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n\n4. mysql> select * from compute_nodes;\nmysql> select * from compute_nodes;\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n| created_at          | updated_at          | deleted_at | id | service_id | vcpus | memory_mb | local_gb | vcpus_used | memory_mb_used | local_gb_used | hypervisor_type | hypervisor_version | cpu_info                                                                                                                                            | disk_available_least | free_ram_mb | free_disk_gb | current_workload | running_vms | hypervisor_hostname | deleted |\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n| 2013-07-17 05:55:55 | 2013-07-18 05:37:13 | NULL       |  1 |          2 |     2 |      2003 |       30 |          0 |            512 |             0 | QEMU            |            1000000 | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |                   25 |        1491 |           30 |                0 |           0 | ubuntu              |       0 |\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n1 row in set (0.00 sec)", 
    "tags": [
        "compute", 
        "libvirt"
    ], 
    "importance": "Medium", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1210436", 
    "owner": "https://api.launchpad.net/1.0/~mhorban", 
    "id": 1210436, 
    "index": 3521, 
    "created": "2013-08-09 08:25:05.520574+00:00", 
    "title": "hypervisor status does not update immediately after 'nova delete'", 
    "comments": [
        {
            "content": "Hypervisor status does not update immediately after 'nova delete', after about 1min the status is correct. But if we boot instance or live migrate on this hyperviosr, it make mistake. \nAlso, I notice that when running command 'nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 vm1' every one second, the vm will be on one host mostly, because the same reason. Furthermore, after many times 'boot' and 'delete' the hypervisor status becomes muddled.\nActually, after 'nova delete' the table compute_nodes will not be updated immediately, it also lasts until periodic task. \n\nBUT, those should be updated immediately.\n\nTest steps:\n1. environment, there is a 'vm1' on hypervisor 'ubuntu'\nzhgaoxa@ubuntu:~/src$ nova list\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks         |\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| a439e64e-0d1c-4c23-8cfd-6ab12dc9a209 | vm1  | ACTIVE | None       | Running     | private=10.0.0.2 |\n+--------------------------------------+------+--------+------------+-------------+------------------+\nzhgaoxa@ubuntu:~/src$ nova show vm1\n+--------------------------------------+----------------------------------------------------------------+\n| Property                             | Value                                                          |\n+--------------------------------------+----------------------------------------------------------------+\n| status                               | ACTIVE                                                         |\n| updated                              | 2013-07-18T07:05:29Z                                           |\n| OS-EXT-STS:task_state                | None                                                           |\n| OS-EXT-SRV-ATTR:host                 | ubuntu                                                         |\n| key_name                             | None                                                           |\n| image                                | cirros-0.3.1-x86_64-uec (2898d4c0-40e7-4449-a21b-07264f32713d) |\n| private network                      | 10.0.0.2                                                       |\n| hostId                               | 3ed8295691f7c645346e3ebd2878c11aa9463c1386b3b1c38e3e42e6       |\n| OS-EXT-STS:vm_state                  | active                                                         |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000057                                              |\n| OS-SRV-USG:launched_at               | 2013-07-18T07:05:29.000000                                     |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | ubuntu                                                         |\n| flavor                               | m1.tiny (1)                                                    |\n| id                                   | a439e64e-0d1c-4c23-8cfd-6ab12dc9a209                           |\n| security_groups                      | [{u'name': u'default'}]                                        |\n| OS-SRV-USG:terminated_at             | None                                                           |\n| user_id                              | 2361015c303149f8aa5bca17fb5be92d                               |\n| name                                 | vm1                                                            |\n| created                              | 2013-07-18T07:05:25Z                                           |\n| tenant_id                            | cc05fb78cffb4c308ead93b731ca7357                               |\n| OS-DCF:diskConfig                    | MANUAL                                                         |\n| metadata                             | {}                                                             |\n| os-extended-volumes:volumes_attached | []                                                             |\n| accessIPv4                           |                                                                |\n| accessIPv6                           |                                                                |\n| progress                             | 0                                                              |\n| OS-EXT-STS:power_state               | 1                                                              |\n| OS-EXT-AZ:availability_zone          | nova                                                           |\n| config_drive                         |                                                                |\n+--------------------------------------+----------------------------------------------------------------+\n\n2. delete vm1 and watch the hypervior status. The value of property free_ram_mb/free_disk_gb/ vcpus_used / vcpus_used /memory_mb_used/running_vms are not correct until about 1min later periodic task run. \nzhgaoxa@ubuntu:~/src$ nova delete vm1 \nzhgaoxa@ubuntu:~/src$ watch 'nova hypervisor-show ubuntu'\nEvery 2.0s: nova hypervisor-show ubuntu                                                                                 Thu Jul 18 15:09:18 2013\n\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property             | Value                                                                                                                                               |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| hypervisor_hostname  | ubuntu                                                                                                                                              |\n| cpu_info             | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |\n| free_disk_gb         | 29                                                                                                                                                  |\n| hypervisor_version   | 1000000                                                                                                                                             |\n| disk_available_least | 25                                                                                                                                                  |\n| local_gb             | 30                                                                                                                                                  |\n| free_ram_mb          | 979                                                                                                                                                 |\n| id                   | 1                                                                                                                                                   |\n| vcpus_used           | 1                                                                                                                                                   |\n| hypervisor_type      | QEMU                                                                                                                                                |\n| local_gb_used        | 1                                                                                                                                                   |\n| memory_mb_used       | 1024                                                                                                                                                |\n| memory_mb            | 2003                                                                                                                                                |\n| current_workload     | 0                                                                                                                                                   |\n| vcpus                | 2                                                                                                                                                   |\n| running_vms          | 1                                                                                                                                                   |\n| service_id           | 2                                                                                                                                                   |\n| service_host         | ubuntu                                                                                                                                              |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n\n4. mysql> select * from compute_nodes;\nmysql> select * from compute_nodes;\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n| created_at          | updated_at          | deleted_at | id | service_id | vcpus | memory_mb | local_gb | vcpus_used | memory_mb_used | local_gb_used | hypervisor_type | hypervisor_version | cpu_info                                                                                                                                            | disk_available_least | free_ram_mb | free_disk_gb | current_workload | running_vms | hypervisor_hostname | deleted |\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n| 2013-07-17 05:55:55 | 2013-07-18 05:37:13 | NULL       |  1 |          2 |     2 |      2003 |       30 |          0 |            512 |             0 | QEMU            |            1000000 | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |                   25 |        1491 |           30 |                0 |           0 | ubuntu              |       0 |\n+---------------------+---------------------+------------+----+------------+-------+-----------+----------+------------+----------------+---------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+-------------+--------------+------------------+-------------+---------------------+---------+\n1 row in set (0.00 sec)", 
            "date_created": "2013-08-09 08:25:05.520574+00:00", 
            "author": "https://api.launchpad.net/1.0/~gaozheng0123"
        }, 
        {
            "content": "This will show how boot instance error:\n1. zhgaoxa@ubuntu:~/src$ for i in {1..10};do nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 vm$i;done\n2. zhgaoxa@ubuntu:~/src$ nova list\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| ID                                   | Name | Status | Task State | Power State | Networks         |\n+--------------------------------------+------+--------+------------+-------------+------------------+\n| 19e24952-8ad1-43be-b63f-30d99048e5a5 | vm1  | ACTIVE | None       | Running     | private=10.0.0.2 |\n| 5c4a0391-193a-4761-92a5-3389e6fcb7c0 | vm10 | ERROR  | None       | NOSTATE     |                  |\n| 99afccff-fbcb-4997-bb67-b19524747b2b | vm2  | ACTIVE | None       | Running     | private=10.0.0.3 |\n| 80a352e8-956a-4813-8075-acdf3296f4e3 | vm3  | ACTIVE | None       | Running     | private=10.0.0.4 |\n| 07aa47da-7f6c-4f6a-907f-430b40562469 | vm4  | ACTIVE | None       | Running     | private=10.0.0.5 |\n| 5c72622f-44a2-45ea-9d03-4c07da27e8ff | vm5  | ACTIVE | None       | Running     | private=10.0.0.6 |\n| b491b24c-7eae-48dc-946d-32969c886699 | vm6  | ERROR  | None       | NOSTATE     |                  |\n| 51f01870-77af-46f3-bc66-ca20e5bec178 | vm7  | ERROR  | None       | NOSTATE     |                  |\n| 2bc26be6-4268-476d-bed0-e0fa26ee70f4 | vm8  | ERROR  | None       | NOSTATE     |                  |\n| 692f9d20-1d82-49e6-ad14-1e1a6c479516 | vm9  | ERROR  | None       | NOSTATE     |                  |\n+--------------------------------------+------+--------+------------+-------------+------------------+\n3. zhgaoxa@ubuntu:~/src$ nova hypervisor-show ubuntu       \n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property             | Value                                                                                                                                               |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| hypervisor_hostname  | ubuntu                                                                                                                                              |\n| cpu_info             | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |\n| free_disk_gb         | 25                                                                                                                                                  |\n| hypervisor_version   | 1000000                                                                                                                                             |\n| disk_available_least | 20                                                                                                                                                  |\n| local_gb             | 30                                                                                                                                                  |\n| free_ram_mb          | -1069                                                                                                                                         |\n| id                   | 1                                                                                                                                                   |\n| vcpus_used           | 5                                                                                                                                               |\n| hypervisor_type      | QEMU                                                                                                                                                |\n| local_gb_used        | 5                                                                                                                                                   |\n| memory_mb_used       | 3072                                                                                                                                                |\n| memory_mb            | 2003                                                                                                                                                |\n| current_workload     | 0                                                                                                                                                   |\n| vcpus                | 2                                                                                                                                                   |\n| running_vms          | 5                                                                                                |\n| service_id           | 2                                                                                                                                                   |\n| service_host         | ubuntu                                                                                                                                              |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n\nThis result is not the same as 'nova boot --image cirros-0.3.1-x86_64-uec --flavor 1 vm --num-instances 10' bellow:\nzhgaoxa@ubuntu:~/src$ nova list\n+--------------------------------------+-----------------------------------------+--------+------------+-------------+------------------+\n| ID                                   | Name                                    | Status | Task State | Power State | Networks         |\n+--------------------------------------+-----------------------------------------+--------+------------+-------------+------------------+\n| 0c40dd37-7619-4ed7-9728-ff70cafadbff | vm-0c40dd37-7619-4ed7-9728-ff70cafadbff | ERROR  | None       | NOSTATE     |                  |\n| 21d3c282-334f-4dac-bcd1-51b4059da83f | vm-21d3c282-334f-4dac-bcd1-51b4059da83f | ACTIVE | None       | Running     | private=10.0.0.2 |\n| 48b2d7f1-f35f-46ac-a1ce-b421f3fbf231 | vm-48b2d7f1-f35f-46ac-a1ce-b421f3fbf231 | ACTIVE | None       | Running     | private=10.0.0.3 |\n| 624d6ae6-d9b5-4e37-8e62-b1297a50ae5b | vm-624d6ae6-d9b5-4e37-8e62-b1297a50ae5b | ERROR  | None       | NOSTATE     |                  |\n| 82907f19-038d-432b-bd29-5f585ce0bf34 | vm-82907f19-038d-432b-bd29-5f585ce0bf34 | ACTIVE | None       | Running     | private=10.0.0.4 |\n| 89d70289-5100-4b63-8b61-fae98dcb0f63 | vm-89d70289-5100-4b63-8b61-fae98dcb0f63 | ERROR  | None       | NOSTATE     |                  |\n| c2e172fe-66c9-488f-b7cf-ee3d50105a8c | vm-c2e172fe-66c9-488f-b7cf-ee3d50105a8c | ACTIVE | None       | Running     | private=10.0.0.5 |\n| d13f6a04-d137-4d56-bbff-c474be809ac9 | vm-d13f6a04-d137-4d56-bbff-c474be809ac9 | ERROR  | None       | NOSTATE     |                  |\n| d4a1fff2-97eb-4c19-be77-4a61de00083c | vm-d4a1fff2-97eb-4c19-be77-4a61de00083c | ERROR  | None       | NOSTATE     |                  |\n| e6414f16-82d9-423a-83d7-ce708aed5695 | vm-e6414f16-82d9-423a-83d7-ce708aed5695 | ERROR  | None       | NOSTATE     |                  |\n+--------------------------------------+-----------------------------------------+--------+------------+-------------+------------------+\n\nzhgaoxa@ubuntu:~/src$ nova hypervisor-show ubuntu\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| Property             | Value                                                                                                                                               |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n| hypervisor_hostname  | ubuntu                                                                                                                                              |\n| cpu_info             | {\"vendor\": \"Intel\", \"model\": \"Conroe\", \"arch\": \"x86_64\", \"features\": [\"rdtscp\", \"ht\", \"vme\"], \"topology\": {\"cores\": 2, \"threads\": 1, \"sockets\": 1}} |\n| free_disk_gb         | 26                                                                                                                                                  |\n| hypervisor_version   | 1000000                                                                                                                                             |\n| disk_available_least | 21                                                                                                                                                  |\n| local_gb             | 30                                                                                                                                                  |\n| free_ram_mb          | -557                                                                                                                                                |\n| id                   | 1                                                                                                                                                   |\n| vcpus_used           | 4                                                                                                                                                   |\n| hypervisor_type      | QEMU                                                                                                                                                |\n| local_gb_used        | 4                                                                                                                                                   |\n| memory_mb_used       | 2560                                                                                                                                                |\n| memory_mb            | 2003                                                                                                                                                |\n| current_workload     | 0                                                                                                                                                   |\n| vcpus                | 2                                                                                                                                                   |\n| running_vms          | 4                                                                                                                                                   |\n| service_id           | 2                                                                                                                                                   |\n| service_host         | ubuntu                                                                                                                                              |\n+----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+\n\n", 
            "date_created": "2013-08-09 09:48:10.658389+00:00", 
            "author": "https://api.launchpad.net/1.0/~gaozheng0123"
        }, 
        {
            "content": "The delayed update in status can be a significant problem when it comes to scheduling rapidly created instances, as the bug reporter mentions.", 
            "date_created": "2013-10-08 19:50:46.449257+00:00", 
            "author": "https://api.launchpad.net/1.0/~melwitt"
        }, 
        {
            "content": "Hi zhgaoxa,\nI've been tried to reproduce the instance creation error with no 'luck'... I can see the delay between a deletion and the update, which in my case rounds 30 seconds, but the 10-vm creation simply takes longer or shorter but in the end all the instances finish up and running.\n\nI'm using the last code updates ('git pull' done recently for all repos). Can you still reproduce the issue? I'll be glad to help, any other information that can be provided will be appreciated.\n\nRegards.", 
            "date_created": "2014-02-19 20:53:50.824491+00:00", 
            "author": "https://api.launchpad.net/1.0/~andres-buraschi"
        }, 
        {
            "content": "I could be wrong, but this seems to be \"by design\". The Nova API is asynchronous by design, and requests aren't guaranteed to be handled immediately.  IRC log from conversation with dansmith included below.\n\nhttp://eavesdrop.openstack.org/irclogs/%23openstack-nova/%23openstack-nova.2015-11-23.log.html#t2015-11-23T20:47:54\n\n    <sfinucan> Does Nova have any concept of interrupt- or notification-driven tasks?\n    <sfinucan> I see `periodic_task` used extensively and I'm also aware of the 'notify_about_instance_usage' and related functions. The latter is polling-based though, while the former only seems to issue user-focused messages\n    <sfinucan> s/latter/former/ s/former/latter/\n    <dansmith> sfinucan: confusing\n    <sfinucan> Sorry\n    <dansmith> sfinucan: the notify there is to send a notification about a change, which happens when a thing happens, to notify someone like the deployer about a change\n    <dansmith> periodic tasks happen on a timer to poll for cleanups, etc\n    <sfinucan> dansmith: OK. So for something like VM creation/deletion, we seem to use periodic tasks\n    <dansmith> sfinucan: use more words\n    <sfinucan> OK :)\n    <dansmith> sfinucan: vm create/destroy happens because you asked for it via the api\n    <sfinucan> Why do we use periodic tasks to check if VM creation/deletion is done?\n    <dansmith> sfinucan: in case it fails in the middle and we need to clean it up\n    <sfinucan> dansmith: But this means there's a period of time between when a VM is finished being created/deleted and when the user is told it's finished, correct?\n    <sfinucan> Which causes bugs like this https://bugs.launchpad.net/nova/+bug/1210436\n    <dansmith> sfinucan: no\n    <sfinucan> dansmith: Oh?\n    <dansmith> sfinucan: there is a delay between you asking for it to be deleted and it being deleted, but that is not because of a periodic\n    <dansmith> sfinucan: that's because most API requests are async.. they return immediately and put something on the message queue to be processed\n    <dansmith> sfinucan: which is a very fundamental design point of nova (since I can feel \"why\" coming)\n    <sfinucan> dansmith: Hmm OK that's interesting. So we can say that as soon as the VM deletion request is received and completed by Nova, the DB should reflect the deletion?\n    <dansmith> sfinucan: as soon as it's completed by nova, yeah\n    <dansmith> sfinucan: which is not equal to \"received\"\n    <sfinucan> dansmith: OK, that's interesting :)\n    <sfinucan> I think the linked bug can be marked as invalid for this reason so I'll do just that. Thanks for the help, dansmith\n    <dansmith> sfinucan: yep, probably (having read only the title)\n", 
            "date_created": "2015-11-23 21:04:50.740528+00:00", 
            "author": "https://api.launchpad.net/1.0/~stephenfinucane"
        }
    ]
}