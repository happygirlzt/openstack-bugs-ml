{
    "status": "Invalid", 
    "last_updated": "2017-09-21 01:21:11.305189+00:00", 
    "description": "During creation of instance through CLI or dashboard, i am getting Unexpected error in logs. please find command and other related  openstack command outputs\n\n\n\nCommand and error\n____________________\n\n#openstack server create --flavor 73c42e28-0d38-4bc4-ad32-61b08474cdfa --image Roka-New --nic net-id=a973a522-3893-4f0a-a643-95cae029744a --security-group default --key-name mykey instance-1 --debug\n\nPOST call to compute for http://172.168.1.129:8774/v2/e6da88076d2847aca65e41b1d2093396/servers used request id req-c809d780-5615-4521-8647-bcbfe24b3f26\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-c809d780-5615-4521-8647-bcbfe24b3f26)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/site-packages/cliff/app.py\", line 400, in run_subcommand\n    result = cmd.run(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/osc_lib/command/command.py\", line 41, in run\n    return super(Command, self).run(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/cliff/display.py\", line 112, in run\n    column_names, data = self.take_action(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/openstackclient/compute/v2/server.py\", line 627, in take_action\n    server = compute_client.servers.create(*boot_args, **boot_kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/v2/servers.py\", line 1416, in create\n    **boot_kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/v2/servers.py\", line 779, in _boot\n    return_raw=return_raw, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/base.py\", line 361, in _create\n    resp, body = self.api.client.post(url, body=body)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 223, in post\n    return self.request(url, 'POST', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/client.py\", line 80, in request\n    raise exceptions.from_response(resp, body, url, method)\n\n\nother related command results\n_____________________________\n\n[root@controller ~]# . /home/admin-openrc\n\n[root@controller ~]# openstack flavor list\n+----+---------+-----+------+-----------+-------+-----------+\n| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |\n+----+---------+-----+------+-----------+-------+-----------+\n| 0  | m1.nano |  64 |    1 |         0 |     1 | True      |\n+----+---------+-----+------+-----------+-------+-----------+\n\n[root@controller log]# openstack project list\n+----------------------------------+----------+\n| ID                               | Name     |\n+----------------------------------+----------+\n| 2cf19b21164e432fb84cfed281481737 | service  |\n| 82df21eecb184130b15fbf337e3fcfbf | Roka2017 |\n| e6da88076d2847aca65e41b1d2093396 | demo     |\n| f045d9ebb6f64ef0bfa580b3bc7a312e | admin    |\n+----------------------------------+----------+\n\n[root@controller log]# openstack network list\n+--------------------------------------+----------+--------------------------------------+\n| ID                                   | Name     | Subnets                              |\n+--------------------------------------+----------+--------------------------------------+\n| 3cb5b804-f585-4455-92a4-360cefbb96f8 | outside  | d014432c-ec96-48c8-9a83-adb69d18d943 |\n| a973a522-3893-4f0a-a643-95cae029744a | demo-net | ec178c3e-8f99-428c-871c-3bb02c572d9d |\n+--------------------------------------+----------+--------------------------------------+\n\n[root@controller log]# openstack keypair list\n+-------+-------------------------------------------------+\n| Name  | Fingerprint                                     |\n+-------+-------------------------------------------------+\n| mykey | e9:74:b4:0b:bb:7f:68:5f:8d:ab:9e:ed:18:f5:7e:58 |\n+-------+-------------------------------------------------+\n\n[root@controller log]# openstack image list\n+--------------------------------------+----------+--------+\n| ID                                   | Name     | Status |\n+--------------------------------------+----------+--------+\n| c7f1f1b3-4ad8-4eb1-ac31-5e1171fa4593 | New-one  | active |\n| 3195c8b9-cddb-40cd-be63-e09117308a84 | RHEL7    | active |\n| fdbb6f71-e22f-4fb0-bdf6-3826a0a729c8 | Roka-New | active |\n+--------------------------------------+----------+--------+\n\n\n[root@controller ~]# . /home/demo-openrc\n[root@controller ~]# openstack flavor list\n\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+\n| ID                                   | Name      |  RAM | Disk | Ephemeral | VCPUs | Is Public |\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+\n| 0                                    | m1.nano   |   64 |    1 |         0 |     1 | True      |\n| 73c42e28-0d38-4bc4-ad32-61b08474cdfa | flavor-1G | 1024 |    1 |         0 |     1 | False     |\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1718190", 
    "owner": "None", 
    "id": 1718190, 
    "index": 7043, 
    "created": "2017-09-19 12:10:19.685268+00:00", 
    "title": "Instance could not be created/launched", 
    "comments": [
        {
            "content": "During creation of instance through CLI or dashboard, i am getting Unexpected error in logs. please find command and other related  openstack command outputs\n\n\n\nCommand and error\n____________________\n\n#openstack server create --flavor 73c42e28-0d38-4bc4-ad32-61b08474cdfa --image Roka-New --nic net-id=a973a522-3893-4f0a-a643-95cae029744a --security-group default --key-name mykey instance-1 --debug\n\nPOST call to compute for http://172.168.1.129:8774/v2/e6da88076d2847aca65e41b1d2093396/servers used request id req-c809d780-5615-4521-8647-bcbfe24b3f26\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<type 'exceptions.TypeError'> (HTTP 500) (Request-ID: req-c809d780-5615-4521-8647-bcbfe24b3f26)\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/site-packages/cliff/app.py\", line 400, in run_subcommand\n    result = cmd.run(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/osc_lib/command/command.py\", line 41, in run\n    return super(Command, self).run(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/cliff/display.py\", line 112, in run\n    column_names, data = self.take_action(parsed_args)\n  File \"/usr/lib/python2.7/site-packages/openstackclient/compute/v2/server.py\", line 627, in take_action\n    server = compute_client.servers.create(*boot_args, **boot_kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/v2/servers.py\", line 1416, in create\n    **boot_kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/v2/servers.py\", line 779, in _boot\n    return_raw=return_raw, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/base.py\", line 361, in _create\n    resp, body = self.api.client.post(url, body=body)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 223, in post\n    return self.request(url, 'POST', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/novaclient/client.py\", line 80, in request\n    raise exceptions.from_response(resp, body, url, method)\n\n\nother related command results\n_____________________________\n\n[root@controller ~]# . /home/admin-openrc\n\n[root@controller ~]# openstack flavor list\n+----+---------+-----+------+-----------+-------+-----------+\n| ID | Name    | RAM | Disk | Ephemeral | VCPUs | Is Public |\n+----+---------+-----+------+-----------+-------+-----------+\n| 0  | m1.nano |  64 |    1 |         0 |     1 | True      |\n+----+---------+-----+------+-----------+-------+-----------+\n\n[root@controller log]# openstack project list\n+----------------------------------+----------+\n| ID                               | Name     |\n+----------------------------------+----------+\n| 2cf19b21164e432fb84cfed281481737 | service  |\n| 82df21eecb184130b15fbf337e3fcfbf | Roka2017 |\n| e6da88076d2847aca65e41b1d2093396 | demo     |\n| f045d9ebb6f64ef0bfa580b3bc7a312e | admin    |\n+----------------------------------+----------+\n\n[root@controller log]# openstack network list\n+--------------------------------------+----------+--------------------------------------+\n| ID                                   | Name     | Subnets                              |\n+--------------------------------------+----------+--------------------------------------+\n| 3cb5b804-f585-4455-92a4-360cefbb96f8 | outside  | d014432c-ec96-48c8-9a83-adb69d18d943 |\n| a973a522-3893-4f0a-a643-95cae029744a | demo-net | ec178c3e-8f99-428c-871c-3bb02c572d9d |\n+--------------------------------------+----------+--------------------------------------+\n\n[root@controller log]# openstack keypair list\n+-------+-------------------------------------------------+\n| Name  | Fingerprint                                     |\n+-------+-------------------------------------------------+\n| mykey | e9:74:b4:0b:bb:7f:68:5f:8d:ab:9e:ed:18:f5:7e:58 |\n+-------+-------------------------------------------------+\n\n[root@controller log]# openstack image list\n+--------------------------------------+----------+--------+\n| ID                                   | Name     | Status |\n+--------------------------------------+----------+--------+\n| c7f1f1b3-4ad8-4eb1-ac31-5e1171fa4593 | New-one  | active |\n| 3195c8b9-cddb-40cd-be63-e09117308a84 | RHEL7    | active |\n| fdbb6f71-e22f-4fb0-bdf6-3826a0a729c8 | Roka-New | active |\n+--------------------------------------+----------+--------+\n\n\n[root@controller ~]# . /home/demo-openrc\n[root@controller ~]# openstack flavor list\n\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+\n| ID                                   | Name      |  RAM | Disk | Ephemeral | VCPUs | Is Public |\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+\n| 0                                    | m1.nano   |   64 |    1 |         0 |     1 | True      |\n| 73c42e28-0d38-4bc4-ad32-61b08474cdfa | flavor-1G | 1024 |    1 |         0 |     1 | False     |\n+--------------------------------------+-----------+------+------+-----------+-------+-----------+", 
            "date_created": "2017-09-19 12:10:19.685268+00:00", 
            "author": "https://api.launchpad.net/1.0/~hassanelzahar"
        }, 
        {
            "content": "", 
            "date_created": "2017-09-19 12:10:19.685268+00:00", 
            "author": "https://api.launchpad.net/1.0/~hassanelzahar"
        }, 
        {
            "content": "there was missed conf in /etc/nova/nova.conf related to glance part.\n\nplease check below \n\nhttps://docs.openstack.org/ocata/install-guide-rdo/nova-controller-install.html#finalize-installation\n ", 
            "date_created": "2017-09-19 18:37:50.186367+00:00", 
            "author": "https://api.launchpad.net/1.0/~hassanelzahar"
        }, 
        {
            "content": "You didn't have [glance]/api_servers configured in nova.conf, that's shown by the stacktrace in the nova-api logs which shows this:\n\n2017-09-18 14:10:00.256 3224 ERROR nova.api.openstack.extensions     for api_server in CONF.glance.api_servers:\n2017-09-18 14:10:00.256 3224 ERROR nova.api.openstack.extensions TypeError: 'NoneType' object is not iterable", 
            "date_created": "2017-09-21 01:20:33.199075+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "https://docs.openstack.org/ocata/install-guide-rdo/nova-controller-install.html#finalize-installation says:\n\n\n\n    In the [glance] section, configure the location of the Image service API:\n\n    [glance]\n    # ...\n    api_servers = http://controller:9292\n\n\nSo you missed a step.", 
            "date_created": "2017-09-21 01:21:06.314497+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }
    ]
}