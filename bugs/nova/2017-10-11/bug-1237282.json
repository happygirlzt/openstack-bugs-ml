{
    "status": "Invalid", 
    "last_updated": "2014-03-15 00:27:47.938551+00:00", 
    "description": "My environment is built by devstack based on ubuntu 12.04\n\nCompute nodes suddenly powered off, the  vm on the compute nodes fail to start.\nI get this error after executing:\nroot@controller:~# nova show cicd-slave-04\n+-------------------------------------+--------------------\n| Property                            | Value                                                    \n+-------------------------------------+------------------------\n| status                              | SHUTOFF                                                \n| updated                             | 2013-10-09T06:38:06Z                                 \n| OS-EXT-STS:task_state               | None                                                    \n| OS-EXT-SRV-ATTR:host                | compute2    \n\nroot@controller:~# nova start  cicd-slave-04\n\nI check the nova-compute node then I have this trace in the logs:\n\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 94, in wrapped\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 209, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     pass\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 195, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 260, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 237, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 224, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1415, in start_instance\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.driver.power_on(instance)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1407, in power_on\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self._create_domain(domain=dom, instance=instance)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2405, in _create_domain\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     domain.createWithFlags(launch_flags)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rv = execute(f,*args,**kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rv = meth(*args,**kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 711, in createWithFlags\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp libvirtError: Unable to add bridge qbrc3a169ff-31 port tapc3a169ff-31: Invalid argument\n\nI fond the port tapc3a169ff-31 is already added on  bridge qbrc3a169ff-31, I delete the port from bridge qbrc3a169ff-31,then I start \nthe vm successfully", 
    "tags": [
        "libvirt", 
        "networking"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1237282", 
    "owner": "None", 
    "id": 1237282, 
    "index": 4160, 
    "created": "2013-10-09 08:53:05.746241+00:00", 
    "title": "vm fails to start when compute nodes suddenly powered off", 
    "comments": [
        {
            "content": "My environment is built by devstack based on ubuntu 12.04\n\nCompute nodes suddenly powered off, the  vm on the compute nodes fail to start.\nI get this error after executing:\nroot@controller:~# nova show cicd-slave-04\n+-------------------------------------+--------------------\n| Property                            | Value                                                    \n+-------------------------------------+------------------------\n| status                              | SHUTOFF                                                \n| updated                             | 2013-10-09T06:38:06Z                                 \n| OS-EXT-STS:task_state               | None                                                    \n| OS-EXT-SRV-ATTR:host                | compute2    \n\nroot@controller:~# nova start  cicd-slave-04\n\nI check the nova-compute node then I have this trace in the logs:\n\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/amqp.py\", line 430, in _process_data\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rval = self.proxy.dispatch(ctxt, version, method, **args)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/openstack/common/rpc/dispatcher.py\", line 133, in dispatch\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return getattr(proxyobj, method)(ctxt, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 117, in wrapped\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     temp_level, payload)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/exception.py\", line 94, in wrapped\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return f(self, context, *args, **kw)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 209, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     pass\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 195, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 260, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 237, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     e, sys.exc_info())\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/contextlib.py\", line 24, in __exit__\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.gen.next()\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 224, in decorated_function\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     return function(self, context, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/compute/manager.py\", line 1415, in start_instance\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self.driver.power_on(instance)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 1407, in power_on\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     self._create_domain(domain=dom, instance=instance)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/nova/virt/libvirt/driver.py\", line 2405, in _create_domain\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     domain.createWithFlags(launch_flags)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 187, in doit\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     result = proxy_call(self._autowrap, f, *args, **kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 147, in proxy_call\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rv = execute(f,*args,**kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/eventlet/tpool.py\", line 76, in tworker\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     rv = meth(*args,**kwargs)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp   File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 711, in createWithFlags\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp     if ret == -1: raise libvirtError ('virDomainCreateWithFlags() failed', dom=self)\n2013-10-09 16:26:43.965 32682 TRACE nova.openstack.common.rpc.amqp libvirtError: Unable to add bridge qbrc3a169ff-31 port tapc3a169ff-31: Invalid argument\n\nI fond the port tapc3a169ff-31 is already added on  bridge qbrc3a169ff-31, I delete the port from bridge qbrc3a169ff-31,then I start \nthe vm successfully", 
            "date_created": "2013-10-09 08:53:05.746241+00:00", 
            "author": "https://api.launchpad.net/1.0/~shihanzhang"
        }, 
        {
            "content": "So the compute service is down but you're trying to power on the instance that the compute node is managing?  That seems like a strange scenario to support.\n\nSide question, are you using nova-network for networking or neutron?", 
            "date_created": "2013-10-13 20:21:26.137785+00:00", 
            "author": "https://api.launchpad.net/1.0/~mriedem"
        }, 
        {
            "content": "I use neutron for networking.This problem has appeared several times, the compute node in the course will inevitably be under sudden power, but the compute node is power on again, the VM will not start properly", 
            "date_created": "2013-11-13 03:16:29.045783+00:00", 
            "author": "https://api.launchpad.net/1.0/~shihanzhang"
        }, 
        {
            "content": "From my experience, it would appear that the neutron-ovs-cleanup script isn't being run.  Can you confirm whether or not this is the case, and whether it fixes the issue?", 
            "date_created": "2014-03-06 20:42:31.959515+00:00", 
            "author": "https://api.launchpad.net/1.0/~sross-7"
        }
    ]
}