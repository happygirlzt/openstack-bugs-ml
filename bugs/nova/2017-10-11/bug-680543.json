{
    "status": "Invalid", 
    "last_updated": "2011-04-04 13:15:15.738517+00:00", 
    "description": "When running the testsuite I got the following build error below. If i use the lp:~vishvananda/nova/fix-flatdhcp then I wont get the error anymore.\n\n\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_associate_disassociate_address\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 117, in maybeDeferred\n    result = f(*args, **kw)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/network/manager.py\", line 165, in deallocate_floating_ip\n    self.db.floating_ip_deallocate(context, floating_address)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/api.py\", line 154, in floating_ip_deallocate\n    return IMPL.floating_ip_deallocate(context, address)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 316, in floating_ip_deallocate\n    session=session)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 392, in floating_ip_get_by_address\n    raise exception.NotFound('No floating ip for address %s' % address)\nnova.exception.NotFound: No floating ip for address 10.10.10.10\n-------------------------------------------------------------------------------\nRan 152 tests in 157.622s", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/680543", 
    "owner": "None", 
    "id": 680543, 
    "index": 1962, 
    "created": "2010-11-23 16:04:20.731812+00:00", 
    "title": "Race condition triggers random testsuite failure", 
    "comments": [
        {
            "content": "When running the testsuite I got the following build error below. If i use the lp:~vishvananda/nova/fix-flatdhcp then I wont get the error anymore.\n\n\n===============================================================================\n[ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_associate_disassociate_address\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 117, in maybeDeferred\n    result = f(*args, **kw)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/network/manager.py\", line 165, in deallocate_floating_ip\n    self.db.floating_ip_deallocate(context, floating_address)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/api.py\", line 154, in floating_ip_deallocate\n    return IMPL.floating_ip_deallocate(context, address)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 316, in floating_ip_deallocate\n    session=session)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n    return f(*args, **kwargs)\n  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 392, in floating_ip_get_by_address\n    raise exception.NotFound('No floating ip for address %s' % address)\nnova.exception.NotFound: No floating ip for address 10.10.10.10\n-------------------------------------------------------------------------------\nRan 152 tests in 157.622s", 
            "date_created": "2010-11-23 16:04:20.731812+00:00", 
            "author": "https://api.launchpad.net/1.0/~zulcss"
        }, 
        {
            "content": "This is actually a race condition that occasionally happens.  Looking in to a fix.\n\nOn Nov 23, 2010, at 8:04 AM, Chuck Short wrote:\n\n> Public bug reported:\n> \n> When running the testsuite I got the following build error below. If i\n> use the lp:~vishvananda/nova/fix-flatdhcp then I wont get the error\n> anymore.\n> \n> \n> ===============================================================================\n> [ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_associate_disassociate_address\n> \n> Traceback (most recent call last):\n>  File \"/usr/local/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 117, in maybeDeferred\n>    result = f(*args, **kw)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/network/manager.py\", line 165, in deallocate_floating_ip\n>    self.db.floating_ip_deallocate(context, floating_address)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/api.py\", line 154, in floating_ip_deallocate\n>    return IMPL.floating_ip_deallocate(context, address)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n>    return f(*args, **kwargs)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 316, in floating_ip_deallocate\n>    session=session)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n>    return f(*args, **kwargs)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 392, in floating_ip_get_by_address\n>    raise exception.NotFound('No floating ip for address %s' % address)\n> nova.exception.NotFound: No floating ip for address 10.10.10.10\n> -------------------------------------------------------------------------------\n> Ran 152 tests in 157.622s\n> \n> ** Affects: nova\n>     Importance: Undecided\n>         Status: New\n> \n> -- \n> Testsuite failure\n> https://bugs.launchpad.net/bugs/680543\n> You received this bug notification because you are a member of Nova\n> Bugs, which is subscribed to OpenStack Compute (nova).\n> \n> Status in OpenStack Compute (Nova): New\n> \n> Bug description:\n> When running the testsuite I got the following build error below. If i use the lp:~vishvananda/nova/fix-flatdhcp then I wont get the error anymore.\n> \n> \n> ===============================================================================\n> [ERROR]: nova.tests.cloud_unittest.CloudTestCase.test_associate_disassociate_address\n> \n> Traceback (most recent call last):\n>  File \"/usr/local/lib/python2.6/dist-packages/twisted/internet/defer.py\", line 117, in maybeDeferred\n>    result = f(*args, **kw)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/network/manager.py\", line 165, in deallocate_floating_ip\n>    self.db.floating_ip_deallocate(context, floating_address)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/api.py\", line 154, in floating_ip_deallocate\n>    return IMPL.floating_ip_deallocate(context, address)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n>    return f(*args, **kwargs)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 316, in floating_ip_deallocate\n>    session=session)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 108, in wrapper\n>    return f(*args, **kwargs)\n>  File \"/home/chuck/work/server/openstack/packaging/build-area/build/nova-2011.1~bzr412/nova/db/sqlalchemy/api.py\", line 392, in floating_ip_get_by_address\n>    raise exception.NotFound('No floating ip for address %s' % address)\n> nova.exception.NotFound: No floating ip for address 10.10.10.10\n> -------------------------------------------------------------------------------\n> Ran 152 tests in 157.622s\n> \n> \n", 
            "date_created": "2010-11-23 21:36:06+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "Is this race condition still happening with the switch to eventlet and the added greenthread.sleep(0.3) in the test ?", 
            "date_created": "2011-01-24 11:10:44.359461+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Can't reproduce that with current, please reopen (set back to 'New') if you can reproduce in a recent version.", 
            "date_created": "2011-04-04 13:15:11.506628+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}