{
    "status": "Opinion", 
    "last_updated": "2016-06-02 16:41:50.051915+00:00", 
    "description": "I was trying to add another nova-compute node into the cluster.\n\nAfterwards I tried to do a live migration to verify the configuration.\n\nThe instance got stuck at error state and showing the task of migrating.\n\nI then fixed the misconfigure with the new added compute node. But the instance still not got fixed.\n(the misconfigure was the network of the server and nova.conf file)\n\nIt seems that I can do nothing with but deleting the instance.\n\n\nsome commands and results below:\n\n(openstack) server list\n+--------------------------------------+--------------+--------+------------------+\n| ID                                   | Name         | Status | Networks         |\n+--------------------------------------+--------------+--------+------------------+\n| 84d31496-5d0a-4dbf-99bc-363d018a30a8 | ttt          | ACTIVE | test=192.168.1.3 |\n| d754e7e4-6dba-45a7-a303-902f45ff4ca0 | testfromdisk | ERROR  | test=192.168.1.2 |\n+--------------------------------------+--------------+--------+------------------+\nserver show d754e7e4-6dba-45a7-a303-902f45ff4ca0\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n| Field                                | Value                                                                                                      |\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                                                                       |\n| OS-EXT-AZ:availability_zone          | nova                                                                                                       |\n| OS-EXT-SRV-ATTR:host                 | nova1                                                                                                      |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | nova1                                                                                                      |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000003                                                                                          |\n| OS-EXT-STS:power_state               | 1                                                                                                          |\n| OS-EXT-STS:task_state                | migrating                                                                                                  |\n| OS-EXT-STS:vm_state                  | error                                                                                                      |\n| OS-SRV-USG:launched_at               | 2016-05-31T05:15:28.000000                                                                                 |\n| OS-SRV-USG:terminated_at             | None                                                                                                       |\n| accessIPv4                           |                                                                                                            |\n| accessIPv6                           |                                                                                                            |\n| addresses                            | test=192.168.1.2                                                                                           |\n| config_drive                         |                                                                                                            |\n| created                              | 2016-05-31T05:15:15Z                                                                                       |\n| fault                                | {u'message': u'Compute host nova2 could not be found.', u'code': 404, u'created': u'2016-06-01T07:08:13Z'} |\n| flavor                               | m1.tiny (1)                                                                                                |\n| hostId                               | b1f5ce288eb6e023bb7a7fcd2adbea8f32650690fb6b34d070ab8e22                                                   |\n| id                                   | d754e7e4-6dba-45a7-a303-902f45ff4ca0                                                                       |\n| image                                |                                                                                                            |\n| key_name                             | None                                                                                                       |\n| name                                 | testfromdisk                                                                                               |\n| os-extended-volumes:volumes_attached | [{u'id': u'b74b2eff-0955-4d13-adac-7964e109d4ff'}]                                                         |\n| project_id                           | e082df4c980f4852b4451a9035723194                                                                           |\n| properties                           |                                                                                                            |\n| security_groups                      | [{u'name': u'default'}]                                                                                    |\n| status                               | ERROR                                                                                                      |\n| updated                              | 2016-06-02T00:11:45Z                                                                                       |\n| user_id                              | 3682a3e21f46421da96e5d1b5b79b38c                                                                           |\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n(openstack) server stop testfromdisk\nCannot 'stop' instance d754e7e4-6dba-45a7-a303-902f45ff4ca0 while it is in task_state migrating", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1588112", 
    "owner": "None", 
    "id": 1588112, 
    "index": 6261, 
    "created": "2016-06-02 01:02:27.797683+00:00", 
    "title": "instance stuck at error state after trying to migrate it to a misconfigured nova-compute node", 
    "comments": [
        {
            "content": "I was trying to add another nova-compute node into the cluster.\n\nAfterwards I tried to do a live migration to verify the configuration.\n\nThe instance got stuck at error state and showing the task of migrating.\n\nI then fixed the misconfigure with the new added compute node. But the instance still not got fixed.\n(the misconfigure was the network of the server and nova.conf file)\n\nIt seems that I can do nothing with but deleting the instance.\n\n\nsome commands and results below:\n\n(openstack) server list\n+--------------------------------------+--------------+--------+------------------+\n| ID                                   | Name         | Status | Networks         |\n+--------------------------------------+--------------+--------+------------------+\n| 84d31496-5d0a-4dbf-99bc-363d018a30a8 | ttt          | ACTIVE | test=192.168.1.3 |\n| d754e7e4-6dba-45a7-a303-902f45ff4ca0 | testfromdisk | ERROR  | test=192.168.1.2 |\n+--------------------------------------+--------------+--------+------------------+\nserver show d754e7e4-6dba-45a7-a303-902f45ff4ca0\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n| Field                                | Value                                                                                                      |\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n| OS-DCF:diskConfig                    | AUTO                                                                                                       |\n| OS-EXT-AZ:availability_zone          | nova                                                                                                       |\n| OS-EXT-SRV-ATTR:host                 | nova1                                                                                                      |\n| OS-EXT-SRV-ATTR:hypervisor_hostname  | nova1                                                                                                      |\n| OS-EXT-SRV-ATTR:instance_name        | instance-00000003                                                                                          |\n| OS-EXT-STS:power_state               | 1                                                                                                          |\n| OS-EXT-STS:task_state                | migrating                                                                                                  |\n| OS-EXT-STS:vm_state                  | error                                                                                                      |\n| OS-SRV-USG:launched_at               | 2016-05-31T05:15:28.000000                                                                                 |\n| OS-SRV-USG:terminated_at             | None                                                                                                       |\n| accessIPv4                           |                                                                                                            |\n| accessIPv6                           |                                                                                                            |\n| addresses                            | test=192.168.1.2                                                                                           |\n| config_drive                         |                                                                                                            |\n| created                              | 2016-05-31T05:15:15Z                                                                                       |\n| fault                                | {u'message': u'Compute host nova2 could not be found.', u'code': 404, u'created': u'2016-06-01T07:08:13Z'} |\n| flavor                               | m1.tiny (1)                                                                                                |\n| hostId                               | b1f5ce288eb6e023bb7a7fcd2adbea8f32650690fb6b34d070ab8e22                                                   |\n| id                                   | d754e7e4-6dba-45a7-a303-902f45ff4ca0                                                                       |\n| image                                |                                                                                                            |\n| key_name                             | None                                                                                                       |\n| name                                 | testfromdisk                                                                                               |\n| os-extended-volumes:volumes_attached | [{u'id': u'b74b2eff-0955-4d13-adac-7964e109d4ff'}]                                                         |\n| project_id                           | e082df4c980f4852b4451a9035723194                                                                           |\n| properties                           |                                                                                                            |\n| security_groups                      | [{u'name': u'default'}]                                                                                    |\n| status                               | ERROR                                                                                                      |\n| updated                              | 2016-06-02T00:11:45Z                                                                                       |\n| user_id                              | 3682a3e21f46421da96e5d1b5b79b38c                                                                           |\n+--------------------------------------+------------------------------------------------------------------------------------------------------------+\n(openstack) server stop testfromdisk\nCannot 'stop' instance d754e7e4-6dba-45a7-a303-902f45ff4ca0 while it is in task_state migrating", 
            "date_created": "2016-06-02 01:02:27.797683+00:00", 
            "author": "https://api.launchpad.net/1.0/~yao.long"
        }, 
        {
            "content": "It is correct that you can't do operations other than DELETE on instances in this state. There could be some other enhancements here to handle this, but this is mostly working as designed. ", 
            "date_created": "2016-06-02 16:41:49.305375+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }
    ]
}