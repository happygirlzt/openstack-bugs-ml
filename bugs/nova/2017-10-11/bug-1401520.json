{
    "status": "Invalid", 
    "last_updated": "2015-01-22 21:44:37.260396+00:00", 
    "description": "Environment: IceHouse on Ubuntu 12.04\n\nroot@node-19:~# nova quota-show                                                                                                                                               [134/569]\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | -1    |\n| cores                       | -1    |\n| ram                         | -1    |\n| floating_ips                | -1    |\n| fixed_ips                   | -1    |\n| metadata_items              | -1    |\n| injected_files              | -1    |\n| injected_file_content_bytes | -1    |\n| injected_file_path_bytes    | -1    |\n| key_pairs                   | -1    |\n| security_groups             | -1    |\n| security_group_rules        | -1    |\n+-----------------------------+-------+\n\nroot@node-19:~# nova quota-update --instances 2 082cd5a6411e4acab173b8325290672e\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-7dd31dae-1d49-490e-a0f6-9c345304f60e)\n\nfrom nova-api.log:\n...\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack Traceback (most recent call last):\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/keystoneclient/middleware/auth_token.py\", line 582, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 917, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     content_type, body, accept)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1070, in dispatch\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/contrib/quotas.py\", line 135, in update\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     user_id=user_id)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/quota.py\", line 1179, in get_settable_quotas\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     user_id=user_id)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/quota.py\", line 748, in get_settable_quotas\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     quotas[resource.name].update(minimum=0, maximum=-1)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack KeyError: 'metadata_items'\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack\n...\n\nHere it is:\nhttps://github.com/openstack/nova/blob/stable/icehouse/nova/quota.py#L746-L748", 
    "tags": [
        "quota"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1401520", 
    "owner": "None", 
    "id": 1401520, 
    "index": 5319, 
    "created": "2014-12-11 13:10:51.145670+00:00", 
    "title": "quota noop driver 'KeyError'", 
    "comments": [
        {
            "content": "root@node-19:~# nova quota-show                                                                                                                                               [134/569]\n+-----------------------------+-------+\n| Quota                       | Limit |\n+-----------------------------+-------+\n| instances                   | -1    |\n| cores                       | -1    |\n| ram                         | -1    |\n| floating_ips                | -1    |\n| fixed_ips                   | -1    |\n| metadata_items              | -1    |\n| injected_files              | -1    |\n| injected_file_content_bytes | -1    |\n| injected_file_path_bytes    | -1    |\n| key_pairs                   | -1    |\n| security_groups             | -1    |\n| security_group_rules        | -1    |\n+-----------------------------+-------+\n\nroot@node-19:~# nova quota-update --instances 2 082cd5a6411e4acab173b8325290672e\nERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500) (Request-ID: req-7dd31dae-1d49-490e-a0f6-9c345304f60e)\n\n\nfrom nova-api.log:\n...\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack Traceback (most recent call last):\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/__init__.py\", line 125, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return req.get_response(self.application)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1296, in send\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     application, catch_exc_info=False)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/request.py\", line 1260, in call_application\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     app_iter = application(self.environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/keystoneclient/middleware/auth_token.py\", line 582, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return self.app(env, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/routes/middleware.py\", line 131, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     response = self.app(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 144, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return resp(environ, start_response)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 130, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     resp = self.call_func(req, *args, **self.kwargs)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/webob/dec.py\", line 195, in call_func\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return self.func(req, *args, **kwargs)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 917, in __call__\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     content_type, body, accept)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 983, in _process_stack\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     action_result = self.dispatch(meth, request, action_args)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/wsgi.py\", line 1070, in dispatch\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     return method(req=request, **action_args)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/api/openstack/compute/contrib/quotas.py\", line 135, in update\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     user_id=user_id)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/quota.py\", line 1179, in get_settable_quotas\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     user_id=user_id)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack   File \"/usr/lib/python2.7/dist-packages/nova/quota.py\", line 748, in get_settable_quotas\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack     quotas[resource.name].update(minimum=0, maximum=-1)\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack KeyError: 'metadata_items'\n2014-12-11 06:42:23.349 5277 TRACE nova.api.openstack\n...\n\nand from /usr/lib/python2.7/dist-packages/nova/quota.py:\n\n 736     def get_settable_quotas(self, context, resources, project_id,\n 737                             user_id=None):\n 738         \"\"\"Given a list of resources, retrieve the range of settable quotas for\n 739         the given user or project.\n 740\n 741         :param context: The request context, for access checks.\n 742         :param resources: A dictionary of the registered resources.\n 743         :param project_id: The ID of the project to return quotas for.\n 744         :param user_id: The ID of the user to return quotas for.\n 745         \"\"\"\n >746         quotas = {}\n 747         for resource in resources.values():\n >748             quotas[resource.name].update(minimum=0, maximum=-1)\n 749         return quotas", 
            "date_created": "2014-12-11 13:10:51.145670+00:00", 
            "author": "https://api.launchpad.net/1.0/~usrleon"
        }, 
        {
            "content": "What version of OpenStack? The current master seems fixed here - https://github.com/openstack/nova/blob/f77603c15bc4f580fec6571653463c9331b3819e/nova/quota.py#L182-L195", 
            "date_created": "2014-12-11 14:00:17.583205+00:00", 
            "author": "https://api.launchpad.net/1.0/~sdague"
        }, 
        {
            "content": "Sorry. Icehouse on ubuntu 12.04 ", 
            "date_created": "2014-12-11 14:09:21.858818+00:00", 
            "author": "https://api.launchpad.net/1.0/~usrleon"
        }, 
        {
            "content": "Looks like this is fixed on master", 
            "date_created": "2015-01-22 21:44:25.158640+00:00", 
            "author": "https://api.launchpad.net/1.0/~jogo"
        }
    ]
}