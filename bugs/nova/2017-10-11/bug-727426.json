{
    "status": "Invalid", 
    "last_updated": "2011-03-15 19:51:24.004585+00:00", 
    "description": "We're using on one testing installation the nova-objectstore on the same nodes like our nova-network and nova-compute services and also have one more node with nova-compute. This additional node can't access the nova-objectstore.\n\nAdding a new iptables rule (iptables -I INPUT -p tcp --dport 3333 -j ACCEPT) solves the problem...\n\n---snip---\n2011-03-01 21:18:44,197 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 428, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 708, in _create_image\n(nova.exception): TRACE:     project=project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 553, in _cache_image\n(nova.exception): TRACE:     fn(target=base, *args, **kwargs)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 563, in _fetch_image\n(nova.exception): TRACE:     images.fetch(image_id, target, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 51, in fetch\n(nova.exception): TRACE:     return f(image, path, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 98, in _fetch_s3_image\n(nova.exception): TRACE:     return utils.execute(cmd_out)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/utils.py\", line 151, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: /usr/bin/curl --fail --silent http://10.68.32.148:3333/_images/ami-ezpl7q46/image -H 'Date: Tue, 01 Mar 2011 21:18:44 GMT' -H 'Authorization: AWS 3df6cde4-eac8-441b-90d9-e2a2260af940:sap:1avf/kcV6yIqnW71/jSsLFj4hPM=' -o /var/lib/nova/instances/_base/ami-ezpl7q46\n(nova.exception): TRACE: Exit code: 22\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: ''\n(nova.exception): TRACE:\n2011-03-01 21:18:44,200 ERROR nova.compute.manager [6OXVQW837J1LBWBAT18V sapadmin sap] instance 16: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 213, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 122, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: /usr/bin/curl --fail --silent http://10.68.32.148:3333/_images/ami-ezpl7q46/image -H 'Date: Tue, 01 Mar 2011 21:18:44 GMT' -H 'Authorization: AWS 3df6cde4-eac8-441b-90d9-e2a2260af940:sap:1avf/kcV6yIqnW71/jSsLFj4hPM=' -o /var/lib/nova/instances/_base/ami-ezpl7q46\n(nova.compute.manager): TRACE: Exit code: 22\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: ''\n(nova.compute.manager): TRACE:\n---snap---", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/727426", 
    "owner": "None", 
    "id": 727426, 
    "index": 2050, 
    "created": "2011-03-01 21:23:44.656555+00:00", 
    "title": "port 3333 (nova-objectstore) not available if running on hosts with nova-network service", 
    "comments": [
        {
            "content": "We're using on one testing installation the nova-objectstore on the same nodes like our nova-network and nova-compute services and also have one more node with nova-compute. This additional node can't access the nova-objectstore.\n\nAdding a new iptables rule (iptables -I INPUT -p tcp --dport 3333 -j ACCEPT) solves the problem...\n\n---snip---\n2011-03-01 21:18:44,197 ERROR nova.exception [-] Uncaught exception\n(nova.exception): TRACE: Traceback (most recent call last):\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 116, in _wrap\n(nova.exception): TRACE:     return f(*args, **kw)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 428, in spawn\n(nova.exception): TRACE:     self._create_image(instance, xml)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 708, in _create_image\n(nova.exception): TRACE:     project=project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 553, in _cache_image\n(nova.exception): TRACE:     fn(target=base, *args, **kwargs)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/libvirt_conn.py\", line 563, in _fetch_image\n(nova.exception): TRACE:     images.fetch(image_id, target, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 51, in fetch\n(nova.exception): TRACE:     return f(image, path, user, project)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/virt/images.py\", line 98, in _fetch_s3_image\n(nova.exception): TRACE:     return utils.execute(cmd_out)\n(nova.exception): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/utils.py\", line 151, in execute\n(nova.exception): TRACE:     cmd=cmd)\n(nova.exception): TRACE: ProcessExecutionError: Unexpected error while running command.\n(nova.exception): TRACE: Command: /usr/bin/curl --fail --silent http://10.68.32.148:3333/_images/ami-ezpl7q46/image -H 'Date: Tue, 01 Mar 2011 21:18:44 GMT' -H 'Authorization: AWS 3df6cde4-eac8-441b-90d9-e2a2260af940:sap:1avf/kcV6yIqnW71/jSsLFj4hPM=' -o /var/lib/nova/instances/_base/ami-ezpl7q46\n(nova.exception): TRACE: Exit code: 22\n(nova.exception): TRACE: Stdout: ''\n(nova.exception): TRACE: Stderr: ''\n(nova.exception): TRACE:\n2011-03-01 21:18:44,200 ERROR nova.compute.manager [6OXVQW837J1LBWBAT18V sapadmin sap] instance 16: Failed to spawn\n(nova.compute.manager): TRACE: Traceback (most recent call last):\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/compute/manager.py\", line 213, in run_instance\n(nova.compute.manager): TRACE:     self.driver.spawn(instance_ref)\n(nova.compute.manager): TRACE:   File \"/usr/lib64/python2.6/site-packages/nova/exception.py\", line 122, in _wrap\n(nova.compute.manager): TRACE:     raise Error(str(e))\n(nova.compute.manager): TRACE: Error: Unexpected error while running command.\n(nova.compute.manager): TRACE: Command: /usr/bin/curl --fail --silent http://10.68.32.148:3333/_images/ami-ezpl7q46/image -H 'Date: Tue, 01 Mar 2011 21:18:44 GMT' -H 'Authorization: AWS 3df6cde4-eac8-441b-90d9-e2a2260af940:sap:1avf/kcV6yIqnW71/jSsLFj4hPM=' -o /var/lib/nova/instances/_base/ami-ezpl7q46\n(nova.compute.manager): TRACE: Exit code: 22\n(nova.compute.manager): TRACE: Stdout: ''\n(nova.compute.manager): TRACE: Stderr: ''\n(nova.compute.manager): TRACE:\n---snap---", 
            "date_created": "2011-03-01 21:23:44.656555+00:00", 
            "author": "https://api.launchpad.net/1.0/~berendt"
        }, 
        {
            "content": "2011/3/1 Christian Berendt <email address hidden>:\n> Public bug reported:\n>\n> We're using on one testing installation the nova-objectstore on the same\n> nodes like our nova-network and nova-compute services and also have one\n> more node with nova-compute. This additional node can't access the nova-\n> objectstore.\n>\n> Adding a new iptables rule (iptables -I INPUT -p tcp --dport 3333 -j\n> ACCEPT) solves the problem...\n\nCan you tell which rule is blocking it right now? AFAIR, we don't\ntouch INPUT at all, so my best guess is that you have a default policy\nof DROP for INPUT. We don't touch the default policy, so maybe\nsomething else is messing this up for you?\n\n-- \nSoren Hansen \u00a0 \u00a0 \u00a0 \u00a0| http://linux2go.dk/\nUbuntu Developer \u00a0 \u00a0| http://www.ubuntu.com/\nOpenStack Developer | http://www.openstack.org/\n", 
            "date_created": "2011-03-01 22:08:09+00:00", 
            "author": "https://api.launchpad.net/1.0/~soren"
        }, 
        {
            "content": "I think this is only a problem on development systems. I'm running all nova services (including the objectstore) on one system and I have a second system running nova-compute and nova-network. Probably nova-network on the system with nova-objectstore doesn't care of the nova-objectstore. I'll test this when I fixed my development systems ;)\n\nBut I think in a productive environment you will a) not use nova-objectstore at all and b) if you use nova-objectstore you will not use it on the same systems as nova-compute/nova-network.\n\nSo I think we could close this ticket. Adding a check into nova-network to handle a running nova-objectstore is IMO not required.", 
            "date_created": "2011-03-15 07:15:20.316491+00:00", 
            "author": "https://api.launchpad.net/1.0/~berendt"
        }
    ]
}