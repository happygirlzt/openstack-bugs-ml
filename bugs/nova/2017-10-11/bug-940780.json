{
    "status": "Invalid", 
    "last_updated": "2013-01-22 16:06:53.017730+00:00", 
    "description": "Seems this commit has broken our CI testing, specifically nova-volume: https://github.com/openstack/nova/commit/b02cefe64631d51cebdfb5e3a83d22cdfea3b767\n\nDevstack volume exercise failure at  https://jenkins.qa.ubuntu.com/view/Precise%20OpenStack%20Testing/job/precise-openstack-essex-test/391/console\n\neuca-describe-instance shows the volume is the 'creating' state, traceback on nova-volume node shows:\n\n2012-02-24 23:59:46 CRITICAL nova [-] [Errno 2] No such file or directory: '/var/lock/nova'\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/bin/nova-volume\", line 49, in <module>\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 413, in wait\n(nova): TRACE:     _launcher.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 131, in wait\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\n(nova): TRACE:     return self._exit_event.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n(nova): TRACE:     return hubs.get_hub().switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\n(nova): TRACE:     return self.greenlet.switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\n(nova): TRACE:     result = function(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 101, in run_server\n(nova): TRACE:     server.start()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 161, in start\n(nova): TRACE:     utils.cleanup_file_locks()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 896, in cleanup_file_locks\n(nova): TRACE:     files = os.listdir(FLAGS.lock_path)\n(nova): TRACE: OSError: [Errno 2] No such file or directory: '/var/lock/nova'\n\n\nnova-volume fails to start up.", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 14, 
    "link": "https://bugs.launchpad.net/nova/+bug/940780", 
    "owner": "None", 
    "id": 940780, 
    "index": 2620, 
    "created": "2012-02-25 05:06:04.553759+00:00", 
    "title": "nova-volume fails to start: OSError: [Errno 2] No such file or directory: '/var/lock/nova' ", 
    "comments": [
        {
            "content": "Seems this commit has broken our CI testing, specifically nova-volume: https://github.com/openstack/nova/commit/b02cefe64631d51cebdfb5e3a83d22cdfea3b767\n\nDevstack volume exercise failure at  https://jenkins.qa.ubuntu.com/view/Precise%20OpenStack%20Testing/job/precise-openstack-essex-test/391/console\n\neuca-describe-instance shows the volume is the 'creating' state, traceback on nova-volume node shows:\n\n2012-02-24 23:59:46 CRITICAL nova [-] [Errno 2] No such file or directory: '/var/lock/nova'\n(nova): TRACE: Traceback (most recent call last):\n(nova): TRACE:   File \"/usr/bin/nova-volume\", line 49, in <module>\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 413, in wait\n(nova): TRACE:     _launcher.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 131, in wait\n(nova): TRACE:     service.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 166, in wait\n(nova): TRACE:     return self._exit_event.wait()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/event.py\", line 116, in wait\n(nova): TRACE:     return hubs.get_hub().switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py\", line 177, in switch\n(nova): TRACE:     return self.greenlet.switch()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/eventlet/greenthread.py\", line 192, in main\n(nova): TRACE:     result = function(*args, **kwargs)\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 101, in run_server\n(nova): TRACE:     server.start()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/service.py\", line 161, in start\n(nova): TRACE:     utils.cleanup_file_locks()\n(nova): TRACE:   File \"/usr/lib/python2.7/dist-packages/nova/utils.py\", line 896, in cleanup_file_locks\n(nova): TRACE:     files = os.listdir(FLAGS.lock_path)\n(nova): TRACE: OSError: [Errno 2] No such file or directory: '/var/lock/nova'\n\n\nnova-volume fails to start up.", 
            "date_created": "2012-02-25 05:06:04.553759+00:00", 
            "author": "https://api.launchpad.net/1.0/~gandelman-a"
        }, 
        {
            "content": "\nIt appears this is a packaging issue, as nova-volume.upstart does not create /var/lock/nova like other nova-* jobs.   We should check that all nova-* upstart jobs ensure the directory exists, because the commit above adds a periodic task to all nova services that will fail if the directory is non-existent.", 
            "date_created": "2012-02-25 05:07:01.272967+00:00", 
            "author": "https://api.launchpad.net/1.0/~gandelman-a"
        }, 
        {
            "content": "This bug was fixed in the package nova - 2012.1~e4-0ubuntu1\n\n---------------\nnova (2012.1~e4-0ubuntu1) precise; urgency=low\n\n  [ Adam Gandleman ]\n  * debian/patches/libvirt-use-console-pipe.patch: Refreshed.\n  * debain/nova-volume.upstart.in: Ensure lock directory is created\n    (LP: #940780)\n  * debain/control: Fix nova-compute-$flavor Depends\n  * debian/control: Add python-iso8601 to python-nova Depends\n\n  [ Chuck Short ]\n  * debian/rules: Fix FTBFS.\n  * Merge Ubuntu/Debian packaging:\n    - Thanks to Julien Danjou, Ghe Rivero, and Thomas Goirand\n    - debian/copyright: Update copyright file.\n    - debian/nova-api.init, debian/nova-compute.init,\n      debian/nova-network.init, debian/nova-objectstore,\n      debian/nova-scheduler, debian/nova-volume.init:\n      Synchronize init scripts.\n    - nova-common.install, debian/rules: Install policy.json\n    - debian/rules, debian/nova-xcp-network.install,\n      debian/nova-xcp-plugins.install, nova-xcp-plugins.postrm,\n      debian/nova-xcp-plugins.doc, debian/nova-xcp-plugins.postinst,\n      debian/README.xcp_and_openstack, debian/control,\n      debian/ubuntu_xen-openvswitch-nova.rules,\n      debian/patches/path-to-the-xenhost.conf-fixup.patch:\n      Add Xen XCP support.\n    - debian/control,\n      debian/nova-compute-{kvm,lxc,qemu,xen,uml}.postinst: Make\n      nova-compute a virtual package.\n    - Dropped ubuntu_ubuntu_control_vars: We dont use it\n  * New upstream release.\n  * Dropped python-babel, it will be handled by langpacks.\n  * debian/patches/ec2-fixes.patch: Backport turnk fix for ec2\n    permissions.\n  * debian/patches/path-to-the-xenhost.conf-fixup.patch: Refreshed.\n -- Chuck Short <email address hidden>   Fri, 02 Mar 2012 11:04:04 -0500", 
            "date_created": "2012-03-02 16:25:12.703200+00:00", 
            "author": "https://api.launchpad.net/1.0/~janitor"
        }, 
        {
            "content": "Fixed in Precise, needs a packaging sync", 
            "date_created": "2012-03-14 16:37:54.375463+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }
    ]
}