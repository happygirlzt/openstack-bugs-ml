{
    "status": "Won't Fix", 
    "last_updated": "2016-02-11 14:31:37.088849+00:00", 
    "description": "From http://logs.openstack.org/88/276088/5/check/gate-grenade-dsvm/8051980/logs/new/screen-n-api.txt.gz\n\n2016-02-10 13:39:19.932 ERROR nova.api.openstack.extensions [req-644cea97-7d26-4e2a-984b-d346ebf96ccb cinder_grenade cinder_grenade] Unexpected exception in API method\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/floating_ips.py\", line 293, in _remove_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     disassociate_floating_ip(self, context, instance, address)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/floating_ips.py\", line 80, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     self.network_api.disassociate_floating_ip(context, instance, address)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/api.py\", line 49, in wrapped\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(self, context, *args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/base_api.py\", line 77, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     res = f(self, context, *args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/api.py\", line 240, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     affect_auto_assigned)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/utils.py\", line 1082, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 150, in inner\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/floating_ips.py\", line 460, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     interface, host, fixed_ip.instance_uuid)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/rpcapi.py\", line 324, in _disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     instance_uuid=instance_uuid)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py\", line 158, in call\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     retry=self.retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/transport.py\", line 90, in _send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 466, in send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     retry=retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 455, in _send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     result = self._waiter.wait(msg_id, timeout)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 338, in wait\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     message = self.waiters.get(msg_id, timeout=timeout)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 240, in get\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     'to message ID %s' % msg_id)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions MessagingTimeout: Timed out waiting for a reply to message ID 9a8f66f646de44b3830557dd7b731640\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions \n2016-02-10 13:39:19.934 INFO nova.api.openstack.wsgi [req-644cea97-7d26-4e2a-984b-d346ebf96ccb cinder_grenade cinder_grenade] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n\nThe MessagingTimeout should be trapped and an appropriate error raise instead.", 
    "tags": [
        "api", 
        "network"
    ], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1544240", 
    "owner": "None", 
    "id": 1544240, 
    "index": 6033, 
    "created": "2016-02-10 19:21:08.517136+00:00", 
    "title": "disassociate floating ip 500 response", 
    "comments": [
        {
            "content": "From http://logs.openstack.org/88/276088/5/check/gate-grenade-dsvm/8051980/logs/new/screen-n-api.txt.gz\n\n2016-02-10 13:39:19.932 ERROR nova.api.openstack.extensions [req-644cea97-7d26-4e2a-984b-d346ebf96ccb cinder_grenade cinder_grenade] Unexpected exception in API method\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/extensions.py\", line 478, in wrapped\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/validation/__init__.py\", line 73, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/floating_ips.py\", line 293, in _remove_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     disassociate_floating_ip(self, context, instance, address)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/api/openstack/compute/floating_ips.py\", line 80, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     self.network_api.disassociate_floating_ip(context, instance, address)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/api.py\", line 49, in wrapped\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(self, context, *args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/base_api.py\", line 77, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     res = f(self, context, *args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/api.py\", line 240, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     affect_auto_assigned)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/utils.py\", line 1082, in wrapper\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/server.py\", line 150, in inner\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/floating_ips.py\", line 460, in disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     interface, host, fixed_ip.instance_uuid)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/opt/stack/new/nova/nova/network/rpcapi.py\", line 324, in _disassociate_floating_ip\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     instance_uuid=instance_uuid)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/rpc/client.py\", line 158, in call\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     retry=self.retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/transport.py\", line 90, in _send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     timeout=timeout, retry=retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 466, in send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     retry=retry)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 455, in _send\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     result = self._waiter.wait(msg_id, timeout)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 338, in wait\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     message = self.waiters.get(msg_id, timeout=timeout)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions   File \"/usr/local/lib/python2.7/dist-packages/oslo_messaging/_drivers/amqpdriver.py\", line 240, in get\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions     'to message ID %s' % msg_id)\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions MessagingTimeout: Timed out waiting for a reply to message ID 9a8f66f646de44b3830557dd7b731640\n2016-02-10 13:39:19.932 22992 ERROR nova.api.openstack.extensions \n2016-02-10 13:39:19.934 INFO nova.api.openstack.wsgi [req-644cea97-7d26-4e2a-984b-d346ebf96ccb cinder_grenade cinder_grenade] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n\nThe MessagingTimeout should be trapped and an appropriate error raise instead.", 
            "date_created": "2016-02-10 19:21:08.517136+00:00", 
            "author": "https://api.launchpad.net/1.0/~alaski"
        }, 
        {
            "content": "https://github.com/openstack/api-wg/blob/master/guidelines/http.rst\n\nA 500 Internal Server Error should not be returned to the user for failures due to user error that can be fixed by changing the request on the client side. 500 failures should be returned for any error state that cannot be fixed by a client, and requires the operator of the service to perform some action to fix. It is also possible that this error can be raised deliberately in case of some detected but unrecoverable error such as a MessageQueueTimeout from a failure to communicate with another service component, an IOError caused by a full disk, or similar error.\n\nI think it's ok to return 500 error here?", 
            "date_created": "2016-02-11 08:45:21.037375+00:00", 
            "author": "https://api.launchpad.net/1.0/~jichenjc"
        }, 
        {
            "content": "I was not aware that we allowed 500s in that case. It makes sense, just unfortunate. So yeah, this bug is invalid.", 
            "date_created": "2016-02-11 14:31:23.254929+00:00", 
            "author": "https://api.launchpad.net/1.0/~alaski"
        }
    ]
}