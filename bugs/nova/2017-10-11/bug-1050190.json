{
    "status": "Invalid", 
    "last_updated": "2012-11-21 22:59:55.163734+00:00", 
    "description": "When running nova-api with osapi_volume enabled and volume_api_class set to nova.volume.cinder -  nova volume-snapshot-list fails.\n\n2012-09-13 04:28:53 INFO nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] GET http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail\nGET http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail\n2012-09-13 04:28:53 DEBUG nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] No Content-Type provided in request from (pid=16290) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:775\nNo Content-Type provided in request\n2012-09-13 04:28:53 ERROR nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] Exception handling resource: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 925, in _process_stack\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1013, in dispatch\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 127, in detail\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return self._items(req, entity_maker=_translate_snapshot_detail_view)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 137, in _items\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     search_opts=search_opts)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi TypeError: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi \nException handling resource: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 925, in _process_stack\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1013, in dispatch\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 127, in detail\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return self._items(req, entity_maker=_translate_snapshot_detail_view)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 137, in _items\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     search_opts=search_opts)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi TypeError: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi \n2012-09-13 04:28:53 INFO nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail returned with HTTP 400\nhttp://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail returned with HTTP 400\n2012-09-13 04:28:53 INFO nova.osapi_volume.wsgi.server [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] 10.127.0.28 - - [13/Sep/2012 04:28:53] \"GET /v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail HTTP/1.1\" 400 338 0.160828\n\n\nThere seems to have been a slight change in the signature between nova.volume.api.API.get_all_snapshots and nova.volume.cinder.API.get_all_snapshots.\n\nhttps://review.openstack.org/#/c/12816/3/nova/volume/cinder.py,unified", 
    "tags": [], 
    "importance": "High", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1050190", 
    "owner": "https://api.launchpad.net/1.0/~jking-6", 
    "id": 1050190, 
    "index": 804, 
    "created": "2012-09-13 05:09:26.007739+00:00", 
    "title": "osapi_volume snapshot-list doesn't work with cinder", 
    "comments": [
        {
            "content": "When running nova-api with osapi_volume enabled and volume_api_class set to nova.volume.cinder -  nova volume-snapshot-list fails.\n\n2012-09-13 04:28:53 INFO nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] GET http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail\nGET http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail\n2012-09-13 04:28:53 DEBUG nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] No Content-Type provided in request from (pid=16290) get_body /opt/stack/nova/nova/api/openstack/wsgi.py:775\nNo Content-Type provided in request\n2012-09-13 04:28:53 ERROR nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] Exception handling resource: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 925, in _process_stack\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1013, in dispatch\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 127, in detail\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return self._items(req, entity_maker=_translate_snapshot_detail_view)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 137, in _items\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     search_opts=search_opts)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi TypeError: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi \nException handling resource: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi Traceback (most recent call last):\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 925, in _process_stack\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     action_result = self.dispatch(meth, request, action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/wsgi.py\", line 1013, in dispatch\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return method(req=request, **action_args)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 127, in detail\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     return self._items(req, entity_maker=_translate_snapshot_detail_view)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi   File \"/opt/stack/nova/nova/api/openstack/volume/snapshots.py\", line 137, in _items\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi     search_opts=search_opts)\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi TypeError: get_all_snapshots() got an unexpected keyword argument 'search_opts'\n2012-09-13 04:28:53 TRACE nova.api.openstack.wsgi \n2012-09-13 04:28:53 INFO nova.api.openstack.wsgi [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] http://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail returned with HTTP 400\nhttp://10.127.0.28:8776/v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail returned with HTTP 400\n2012-09-13 04:28:53 INFO nova.osapi_volume.wsgi.server [req-6056b2ad-cfdc-434f-a753-027657b89d02 demo demo] 10.127.0.28 - - [13/Sep/2012 04:28:53] \"GET /v1/ac3a0f688ee94e829dede4b8056b8b85/snapshots/detail HTTP/1.1\" 400 338 0.160828\n\n\nThere seems to have been a slight change in the signature between nova.volume.api.API.get_all_snapshots and nova.volume.cinder.API.get_all_snapshots.\n\nhttps://review.openstack.org/#/c/12816/3/nova/volume/cinder.py,unified", 
            "date_created": "2012-09-13 05:09:26.007739+00:00", 
            "author": "https://api.launchpad.net/1.0/~clay-gerrard"
        }, 
        {
            "content": "Is that a Cinder-side fix or a Nova-side fix ?", 
            "date_created": "2012-09-13 13:31:19.701490+00:00", 
            "author": "https://api.launchpad.net/1.0/~ttx"
        }, 
        {
            "content": "Honestly I don't know if it's a critical fail, this configuration (running nova-volume-api talking to cinder) is a bit of hack, but may be important to some folks that are trying to migrate from nova-volume to cinder.  Either way it's a trivial nova fix, I just happened to run into it when fixing lp bug #1042904.", 
            "date_created": "2012-09-13 14:27:36.428786+00:00", 
            "author": "https://api.launchpad.net/1.0/~clay-gerrard"
        }, 
        {
            "content": "It looks like this is no longer a bug in master since nova-volume was removed completely.  However, it's still an issue in stable/folsom.", 
            "date_created": "2012-11-16 16:22:33.995793+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "This actually still affects master since we still have the volume extensions in. They proxy over to cinder.", 
            "date_created": "2012-11-21 22:58:09.527315+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }, 
        {
            "content": "oops my bad, this isn't using the volume extension. Ignore my last comment", 
            "date_created": "2012-11-21 22:59:47.685308+00:00", 
            "author": "https://api.launchpad.net/1.0/~vishvananda"
        }
    ]
}