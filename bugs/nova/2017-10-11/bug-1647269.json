{
    "status": "Fix Released", 
    "last_updated": "2017-06-08 21:51:51.068517+00:00", 
    "description": "Description\n===========\n\nWhen using mc driver(set servicegroup_driver=mc), the service reports state by memcache. but we use 'nova service-list' get the status of services reginster in nova, the 'update_at' time is not the last updated time not as db driver. so we should get the time in mecache to update the time in respone. The respone displays as follows.\n\n[root@dfcontroller1 ~]# nova service-list\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n| Id  | Binary           | Host          | Zone     | Status  | State | Updated_at                 | Disabled Reason |\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n| 157 | nova-scheduler   | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:42.000000 | -               |\n| 161 | nova-scheduler   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:01.000000 | -               |\n| 163 | nova-conductor   | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:39.000000 | -               |\n| 164 | nova-conductor   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:01.000000 | -               |\n| 187 | nova-consoleauth | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:46.000000 | -               |\n| 188 | nova-consoleauth | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:28:56.000000 | -               |\n| 194 | nova-rs          | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:28:57.000000 | -               |\n| 197 | nova-haservice   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:02.000000 | -               |\n| 199 | nova-haservice   | dfcontroller1 | internal | enabled | down  | 2016-12-05T01:53:31.000000 | -               |\n| 202 | nova-rs          | dfcontroller1 | internal | enabled | down  | 2016-12-05T02:02:12.000000 | -               |\n| 205 | nova-compute     | dfcompute1    | az_ip    | enabled | up    | 2016-12-05T06:29:00.000000 | -               |\n| 208 | nova-compute     | dfcompute3    | az_ip    | enabled | up    | 2016-12-05T06:28:45.000000 | -               |\n| 211 | nova-compute     | dfcompute2    | az_ip    | enabled | up    | 2016-12-05T06:29:03.000000 | -               |\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n\nSteps to reproduce\n==================\n\n1. modify the nova.conf file to set servicegroup_driver to mc\u3002\n2. restart nova-compute\uff0cnova-scheduler\uff0cnova-conductor\uff0cnova-consoleauth services\u3002\n3. wait for 10min or more\uff0c you'll watch the 'update_at' remians the same time.\n\nExpected result\n===============\nThe 'update_at' display the latest time as using db driver.\n\nActual result\n=============\nThe 'update_at' remains not like using db driver.", 
    "tags": [], 
    "importance": "Medium", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1647269", 
    "owner": "https://api.launchpad.net/1.0/~eric-litao", 
    "id": 1647269, 
    "index": 4696, 
    "created": "2016-12-05 06:33:24.682404+00:00", 
    "title": "\u2018nova service-list\u2019 can\u2018t get the latest Updated_at time when using mc driver", 
    "comments": [
        {
            "content": "Description\n===========\n\nWhen using mc driver(set servicegroup_driver=mc), the service reports state by memcache. but we use 'nova service-list' get the status of services reginster in nova, the 'update_at' time is not the last updated time not as db driver. so we should get the time in mecache to update the time in respone. The respone displays as follows.\n\n[root@dfcontroller1 ~]# nova service-list\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n| Id  | Binary           | Host          | Zone     | Status  | State | Updated_at                 | Disabled Reason |\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n| 157 | nova-scheduler   | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:42.000000 | -               |\n| 161 | nova-scheduler   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:01.000000 | -               |\n| 163 | nova-conductor   | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:39.000000 | -               |\n| 164 | nova-conductor   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:01.000000 | -               |\n| 187 | nova-consoleauth | dfcontroller1 | internal | enabled | up    | 2016-12-05T06:28:46.000000 | -               |\n| 188 | nova-consoleauth | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:28:56.000000 | -               |\n| 194 | nova-rs          | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:28:57.000000 | -               |\n| 197 | nova-haservice   | dfcontroller2 | internal | enabled | up    | 2016-12-05T06:29:02.000000 | -               |\n| 199 | nova-haservice   | dfcontroller1 | internal | enabled | down  | 2016-12-05T01:53:31.000000 | -               |\n| 202 | nova-rs          | dfcontroller1 | internal | enabled | down  | 2016-12-05T02:02:12.000000 | -               |\n| 205 | nova-compute     | dfcompute1    | az_ip    | enabled | up    | 2016-12-05T06:29:00.000000 | -               |\n| 208 | nova-compute     | dfcompute3    | az_ip    | enabled | up    | 2016-12-05T06:28:45.000000 | -               |\n| 211 | nova-compute     | dfcompute2    | az_ip    | enabled | up    | 2016-12-05T06:29:03.000000 | -               |\n+-----+------------------+---------------+----------+---------+-------+----------------------------+-----------------+\n\nSteps to reproduce\n==================\n\n1. modify the nova.conf file to set servicegroup_driver to mc\u3002\n2. restart nova-compute\uff0cnova-scheduler\uff0cnova-conductor\uff0cnova-consoleauth services\u3002\n3. wait for 10min or more\uff0c you'll watch the 'update_at' remians the same time.\n\nExpected result\n===============\nThe 'update_at' display the latest time as using db driver.\n\nActual result\n=============\nThe 'update_at' remains not like using db driver.", 
            "date_created": "2016-12-05 06:33:24.682404+00:00", 
            "author": "https://api.launchpad.net/1.0/~eric-litao"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/414463", 
            "date_created": "2016-12-23 07:34:51.251115+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/414463\nCommitted: https://git.openstack.org/cgit/openstack/nova/commit/?id=0df91a7f799060cd2e9b8a0adac1efacb974bcb3\nSubmitter: Jenkins\nBranch:    master\n\ncommit 0df91a7f799060cd2e9b8a0adac1efacb974bcb3\nAuthor: Tao Li <litao3721@126.com>\nDate:   Fri Dec 23 10:35:01 2016 +0800\n\n    Fix the display of updated_at time when using memcache driver.\n    \n    When using mc driver(set servicegroup_driver=mc), the service reports\n    state by memcache. but we use 'nova service-list' get the status of\n    services registered in nova, the 'update_at' time is not the last updated\n    time not as db driver. so we should get the time in memcache to update the\n    time in response.\n    Closes-Bug: #1647269\n    \n    Change-Id: I1d4763436ad6de2483c39f5fe97fa6e8d283d8a3\n", 
            "date_created": "2017-05-26 16:56:59.639670+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "This issue was fixed in the openstack/nova 16.0.0.0b2 development milestone.", 
            "date_created": "2017-06-08 21:51:49.831842+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}