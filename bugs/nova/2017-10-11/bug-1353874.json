{
    "status": "Invalid", 
    "last_updated": "2014-08-07 08:24:42.599438+00:00", 
    "description": "a volume will leave over caused by  attaching volume failing when we create an instance through a boot volume created by  an image. \n\n\nan example to reproduce the problem on latest juno:\n(1)root@devstack:/var/log/nova# nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\n(2)root@devstack:/var/log/nova# cinder list\n+----+--------+------+------+-------------+----------+-------------+\n| ID | Status | Name | Size | Volume Type | Bootable | Attached to |\n+----+--------+------+------+-------------+----------+-------------+\n+----+--------+------+------+-------------+----------+-------------+\n\n(3)root@devstack:/var/log/nova# nova boot --flavor m1.tiny --block-device id=d2a028fa-c430-414a-851a-01af19f6585e,source=image,dest=volume,device=vda,size=1,shutdown=removed,bootindex=0 --nic net-id=a4f849f1-fa7a-436c-832f-7d6581e77c9b tralon_volume_instance\nroot@devstack:/var/log/nova# nova list\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n| ID                                   | Name                   | Status | Task State           | Power State | Networks          |\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n| 00dd4141-67b7-4035-b941-281b4876f16a | tralon_volume_instance | BUILD  | block_device_mapping | NOSTATE     | private=10.0.0.10 |\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n(4)root@devstack:/var/log/nova# cinder list\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n| 1cf9a1f9-dcad-427c-b20c-5961995ca08f | available |      |  1   |     None    |   true   |             |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+ \n(5)root@devstack:/var/log/nova# nova delete 00dd4141-67b7-4035-b941-281b4876f16a\nroot@devstack:/var/log/nova# nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\n(6)root@devstack:/var/log/nova# cinder list\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n| 1cf9a1f9-dcad-427c-b20c-5961995ca08f | available |      |  1   |     None    |   true   |             |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n\nrelated log:\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00mTraceback (most recent call last):\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 1717, in _prep_block_device\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    self.driver, self._await_block_device_map_created))\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 370, in attach_block_devices\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    map(_log_and_attach, block_device_mapping)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 368, in _log_and_attach\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    bdm.attach(*attach_args, **attach_kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 325, in attach\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    volume_api, virt_driver)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 47, in wrapped\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    ret_val = method(obj, context, *args, **kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 47, in wrapped\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    ret_val = method(obj, context, *args, **kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/usr/lib/python2.7/bdb.py\", line 49, in trace_dispatch\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    return self.dispatch_line(frame)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/usr/lib/python2.7/bdb.py\", line 68, in dispatch_line\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    if self.quitting: raise BdbQuit\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00mBdbQuit\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m\n2014-08-07 15:06:50.086 ERROR nova.compute.manager [^[[01;36mreq-17bcd9b3-86d4-475a-bcee-2a40f06c8ba7 ^[[00;36madmin admin] ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] Failure prepping block device^[[00m", 
    "tags": [
        "volume"
    ], 
    "importance": "Undecided", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1353874", 
    "owner": "None", 
    "id": 1353874, 
    "index": 5056, 
    "created": "2014-08-07 07:39:56.674917+00:00", 
    "title": "a volume will leave over caused by  attaching volume failing when we create an instance", 
    "comments": [
        {
            "content": "a volume will leave over caused by  attaching volume failing when we create an instance through a boot volume created by  an image. \n\n\nan example to reproduce the problem on latest juno:\n(1)root@devstack:/var/log/nova# nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\n(2)root@devstack:/var/log/nova# cinder list\n+----+--------+------+------+-------------+----------+-------------+\n| ID | Status | Name | Size | Volume Type | Bootable | Attached to |\n+----+--------+------+------+-------------+----------+-------------+\n+----+--------+------+------+-------------+----------+-------------+\n\n(3)root@devstack:/var/log/nova# nova boot --flavor m1.tiny --block-device id=d2a028fa-c430-414a-851a-01af19f6585e,source=image,dest=volume,device=vda,size=1,shutdown=removed,bootindex=0 --nic net-id=a4f849f1-fa7a-436c-832f-7d6581e77c9b tralon_volume_instance\nroot@devstack:/var/log/nova# nova list\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n| ID                                   | Name                   | Status | Task State           | Power State | Networks          |\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n| 00dd4141-67b7-4035-b941-281b4876f16a | tralon_volume_instance | BUILD  | block_device_mapping | NOSTATE     | private=10.0.0.10 |\n+--------------------------------------+------------------------+--------+----------------------+-------------+-------------------+\n(4)root@devstack:/var/log/nova# cinder list\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n| 1cf9a1f9-dcad-427c-b20c-5961995ca08f | available |      |  1   |     None    |   true   |             |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+ \n(5)root@devstack:/var/log/nova# nova delete 00dd4141-67b7-4035-b941-281b4876f16a\nroot@devstack:/var/log/nova# nova list\n+----+------+--------+------------+-------------+----------+\n| ID | Name | Status | Task State | Power State | Networks |\n+----+------+--------+------------+-------------+----------+\n+----+------+--------+------------+-------------+----------+\n(6)root@devstack:/var/log/nova# cinder list\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n| 1cf9a1f9-dcad-427c-b20c-5961995ca08f | available |      |  1   |     None    |   true   |             |\n+--------------------------------------+-----------+------+------+-------------+----------+-------------+\n\nrelated log:\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00mTraceback (most recent call last):\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/compute/manager.py\", line 1717, in _prep_block_device\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    self.driver, self._await_block_device_map_created))\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 370, in attach_block_devices\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    map(_log_and_attach, block_device_mapping)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 368, in _log_and_attach\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    bdm.attach(*attach_args, **attach_kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 325, in attach\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    volume_api, virt_driver)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 47, in wrapped\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    ret_val = method(obj, context, *args, **kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/opt/stack/nova/nova/virt/block_device.py\", line 47, in wrapped\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    ret_val = method(obj, context, *args, **kwargs)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/usr/lib/python2.7/bdb.py\", line 49, in trace_dispatch\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    return self.dispatch_line(frame)\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m  File \"/usr/lib/python2.7/bdb.py\", line 68, in dispatch_line\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m    if self.quitting: raise BdbQuit\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00mBdbQuit\n2014-08-07 15:06:50.085 TRACE nova.compute.manager ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] ^[[00m\n2014-08-07 15:06:50.086 ERROR nova.compute.manager [^[[01;36mreq-17bcd9b3-86d4-475a-bcee-2a40f06c8ba7 ^[[00;36madmin admin] ^[[01;35m[instance: 00dd4141-67b7-4035-b941-281b4876f16a] Failure prepping block device^[[00m", 
            "date_created": "2014-08-07 07:39:56.674917+00:00", 
            "author": "https://api.launchpad.net/1.0/~zhangchunlong1"
        }
    ]
}