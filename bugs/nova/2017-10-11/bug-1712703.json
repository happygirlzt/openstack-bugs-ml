{
    "status": "Invalid", 
    "last_updated": "2017-08-25 07:01:52.980478+00:00", 
    "description": "Right in the middle of normal operation, my openstack CLI interface gives me this error while trying to execute any openstack command.\n\n~]# openstack server show demo-test\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-8c522feb-528b-4cb9-8dc6-9f39dac4c45b)\n\n\n\nHere are my logs from /var/log/nova/nova-api.log:\n\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1039\n2017-08-23 16:37:40.884 28847 INFO nova.osapi_compute.wsgi.server [req-ea37152e-9b41-4ca4-aeba-5a6a94c0139b 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] 10.32.121.140 \"GET /v2.1/a7f3a817a96c492992c1ed4f9fbdeee9/servers?name=dfd HTTP/1.1\" status: 500 len: 572 time: 0.0153840\n2017-08-23 16:37:40.892 28847 DEBUG nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Calling method '<bound method ServersController.detail of <nova.api.openstack.compute.servers.ServersController object at 0x7154f90>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:626\n2017-08-23 16:37:40.896 28847 DEBUG nova.compute.api [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Searching by: {'deleted': False, 'project_id': u'a7f3a817a96c492992c1ed4f9fbdeee9'} get_all /usr/lib/python2.7/site-packages/nova/compute/api.py:2384\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Unexpected exception in API method\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 214, in detail\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 357, in _get_servers\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 2452, in get_all\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 342, in get_by_filters\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     build_requests = cls.get_all(context)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 257, in get_all\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     db_build_reqs = cls._get_all_from_db(context)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 893, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     with self._transaction_scope(context):\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.gen.next()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 944, in _transaction_scope\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     allow_async=self._allow_async) as resource:\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.gen.next()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 558, in _session\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     bind=self.connection, mode=self.mode)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 317, in _create_session\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._start()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 403, in _start\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     engine_args, maker_args)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 427, in _setup_for_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sql_connection=sql_connection, **engine_kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     test_conn = _test_connection(engine, max_retries, retry_interval)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return engine.connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self._connection_cls(self, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     if connection is not None else engine.raw_connection()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     e, dialect, self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return fn()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 480, in checkout\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     rec = pool._do_get()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._dec_overflow()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1057, in _do_get\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self._create_connection()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return _ConnectionRecord(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 449, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.connection = self.__connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 607, in __connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/__init__.py\", line 90, in Connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 694, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 916, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._request_authentication()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 1124, in _request_authentication\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 991, in _read_packet\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     packet.check_error()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 393, in check_error\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions\n2017-08-23 16:37:40.900 28847 INFO nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'>\n2017-08-23 16:37:40.900 28847 DEBUG nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1039\n2017-08-23 16:37:40.901 28847 INFO nova.osapi_compute.wsgi.server [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] 10.32.121.140 \"GET /v2.1/a7f3a817a96c492992c1ed4f9fbdeee9/servers/detail HTTP/1.1\" status: 500 len: 572 time: 0.0152760", 
    "tags": [], 
    "importance": "Undecided", 
    "heat": 8, 
    "link": "https://bugs.launchpad.net/nova/+bug/1712703", 
    "owner": "https://api.launchpad.net/1.0/~mymzbe", 
    "id": 1712703, 
    "index": 6999, 
    "created": "2017-08-23 23:42:47.772057+00:00", 
    "title": "<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-8c522feb-528b-4cb9-8dc6-9f39dac4c45b)", 
    "comments": [
        {
            "content": "Right in the middle of normal operation, my openstack CLI interface gives me this error while trying to execute any openstack command.\n\n~]# openstack server show demo-test\nUnexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> (HTTP 500) (Request-ID: req-8c522feb-528b-4cb9-8dc6-9f39dac4c45b)\n\n\n\nHere are my logs from /var/log/nova/nova-api.log:\n\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1039\n2017-08-23 16:37:40.884 28847 INFO nova.osapi_compute.wsgi.server [req-ea37152e-9b41-4ca4-aeba-5a6a94c0139b 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] 10.32.121.140 \"GET /v2.1/a7f3a817a96c492992c1ed4f9fbdeee9/servers?name=dfd HTTP/1.1\" status: 500 len: 572 time: 0.0153840\n2017-08-23 16:37:40.892 28847 DEBUG nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Calling method '<bound method ServersController.detail of <nova.api.openstack.compute.servers.ServersController object at 0x7154f90>>' _process_stack /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:626\n2017-08-23 16:37:40.896 28847 DEBUG nova.compute.api [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Searching by: {'deleted': False, 'project_id': u'a7f3a817a96c492992c1ed4f9fbdeee9'} get_all /usr/lib/python2.7/site-packages/nova/compute/api.py:2384\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Unexpected exception in API method\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions Traceback (most recent call last):\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/extensions.py\", line 338, in wrapped\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return f(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/validation/__init__.py\", line 181, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return func(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 214, in detail\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     servers = self._get_servers(req, is_detail=True)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/api/openstack/compute/servers.py\", line 357, in _get_servers\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sort_keys=sort_keys, sort_dirs=sort_dirs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/compute/api.py\", line 2452, in get_all\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sort_dirs=sort_dirs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 342, in get_by_filters\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     build_requests = cls.get_all(context)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_versionedobjects/base.py\", line 184, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     result = fn(cls, context, *args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/nova/objects/build_request.py\", line 257, in get_all\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     db_build_reqs = cls._get_all_from_db(context)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 893, in wrapper\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     with self._transaction_scope(context):\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.gen.next()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 944, in _transaction_scope\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     allow_async=self._allow_async) as resource:\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.gen.next()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 558, in _session\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     bind=self.connection, mode=self.mode)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 317, in _create_session\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._start()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 403, in _start\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     engine_args, maker_args)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py\", line 427, in _setup_for_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     sql_connection=sql_connection, **engine_kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 155, in create_engine\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     test_conn = _test_connection(engine, max_retries, retry_interval)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/engines.py\", line 331, in _test_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return engine.connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2018, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self._connection_cls(self, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 72, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     if connection is not None else engine.raw_connection()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in raw_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.pool.unique_connection, _connection)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2078, in _wrap_pool_connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     e, dialect, self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1401, in _handle_dbapi_exception_noconnection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     util.raise_from_cause(newraise, exc_info)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/compat.py\", line 200, in raise_from_cause\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     reraise(type(exception), exception, tb=exc_tb)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2074, in _wrap_pool_connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return fn()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 318, in unique_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return _ConnectionFairy._checkout(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 713, in _checkout\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     fairy = _ConnectionRecord.checkout(pool)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 480, in checkout\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     rec = pool._do_get()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1060, in _do_get\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._dec_overflow()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     compat.reraise(exc_type, exc_value, exc_tb)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 1057, in _do_get\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self._create_connection()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 323, in _create_connection\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return _ConnectionRecord(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 449, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.connection = self.__connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/pool.py\", line 607, in __connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     connection = self.__pool._invoke_creator(self)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/strategies.py\", line 97, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return dialect.connect(*cargs, **cparams)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib64/python2.7/site-packages/sqlalchemy/engine/default.py\", line 385, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return self.dbapi.connect(*cargs, **cparams)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/__init__.py\", line 90, in Connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     return Connection(*args, **kwargs)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 694, in __init__\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self.connect()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 916, in connect\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     self._request_authentication()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 1124, in _request_authentication\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     auth_packet = self._read_packet()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 991, in _read_packet\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     packet.check_error()\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/connections.py\", line 393, in check_error\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     err.raise_mysql_exception(self._data)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions   File \"/usr/lib/python2.7/site-packages/pymysql/err.py\", line 107, in raise_mysql_exception\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions     raise errorclass(errno, errval)\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions\n2017-08-23 16:37:40.900 28847 INFO nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] HTTP exception thrown: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'>\n2017-08-23 16:37:40.900 28847 DEBUG nova.api.openstack.wsgi [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] Returning 500 to user: Unexpected API Error. Please report this at http://bugs.launchpad.net/nova/ and attach the Nova API log if possible.\n<class 'sqlalchemy.exc.OperationalError'> __call__ /usr/lib/python2.7/site-packages/nova/api/openstack/wsgi.py:1039\n2017-08-23 16:37:40.901 28847 INFO nova.osapi_compute.wsgi.server [req-4a3167b9-9129-4f73-a2a7-fc67aeb75cf7 8de5b578ddfe420aa28a9088ccf57403 a7f3a817a96c492992c1ed4f9fbdeee9 - default default] 10.32.121.140 \"GET /v2.1/a7f3a817a96c492992c1ed4f9fbdeee9/servers/detail HTTP/1.1\" status: 500 len: 572 time: 0.0152760", 
            "date_created": "2017-08-23 23:42:47.772057+00:00", 
            "author": "https://api.launchpad.net/1.0/~rsingh27"
        }, 
        {
            "content": "Workaround:\nI have to restart nova-api service to make it work again.\n\nRegards\nRaminder", 
            "date_created": "2017-08-23 23:43:42.636396+00:00", 
            "author": "https://api.launchpad.net/1.0/~rsingh27"
        }, 
        {
            "content": "This was caused by the underlying mysql database issue.\r\n\r\n2017-08-23 16:37:40.898 28847 ERROR nova.api.openstack.extensions OperationalError: (pymysql.err.OperationalError) (1040, u'Too many connections')\r\n\r\nThis stackoverflow should get you going back on track.\r\nhttps://stackoverflow.com/questions/14331032/mysql-error-1040-too-many-connection\r\n\r\n\r\n Which deployment method being used to deploy? Packstack , TripleO, Devstack or etc?\r\n\r\n", 
            "date_created": "2017-08-24 14:08:57.920671+00:00", 
            "author": "https://api.launchpad.net/1.0/~mymzbe"
        }, 
        {
            "content": "Qemu hypervisor.\nBut not using any specific deployment. Doing it manually by following the openstack installation guide for newton on centos.\n\n\nhttps://docs.openstack.org/newton/install-guide-rdo/", 
            "date_created": "2017-08-24 20:01:29.177742+00:00", 
            "author": "https://api.launchpad.net/1.0/~rsingh27"
        }, 
        {
            "content": "Thanks for the comment Aizuddin! Appreciate it.", 
            "date_created": "2017-08-24 20:01:49.381579+00:00", 
            "author": "https://api.launchpad.net/1.0/~rsingh27"
        }, 
        {
            "content": "Alright, then your database need a little tweak to accomodate those connect sessions. \n\nMost welcome!", 
            "date_created": "2017-08-25 07:01:52.606580+00:00", 
            "author": "https://api.launchpad.net/1.0/~mymzbe"
        }
    ]
}