{
    "status": "Fix Released", 
    "last_updated": "2012-04-05 11:09:40.136383+00:00", 
    "description": "10 instances started with the following quota:\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 20\nram: 51200\nfloating_ips: 10\n\nThe 11th attempt returns:\n\nubuntu@marula:~$ euca-run-instances -k adam ami-00000012\nUnknownError: An unknown error has occurred. Please try your request again.\n\n\nLog extract:\n2011-09-18 13:49:20,544 DEBUG nova.api [-] action: RunInstances from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:290\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: ImageId         val: ami-00000012 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: KeyName         val: adam from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: MaxCount                val: 1 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: MinCount                val: 1 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: InstanceType            val: m1.small from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,623 DEBUG nova [-] Using Kernel=17, Ramdisk=None from (pid=14233) _check_create_parameters /usr/lib/pymodules/python2.7/nova/compute/api.py:235\n2011-09-18 13:49:20,662 DEBUG nova.compute.api [-] Going to run 0 instances... from (pid=14233) create /usr/lib/pymodules/python2.7/nova/compute/api.py:541\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] Unexpected error raised: list index out of range\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py\", line 398, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/apirequest.py\", line 78, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/cloud.py\", line 1368, in run_instances\n(nova.api): TRACE:     reservation_id=instances[0]['reservation_id'])\n(nova.api): TRACE: IndexError: list index out of range\n(nova.api): TRACE:\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] Environment: {\"CONTENT_TYPE\": \"application/x-www-form-urlencoded; charset=UTF-8\", \"SCRIPT_NAME\": \"/services/Cloud\", \"REQUEST_METHOD\": \"POST\", \"HTTP_HOST\": \"10.55.55.8:8773\", \"PATH_INFO\": \"/\", \"SERVER_PROTOCOL\": \"HTTP/1.0\", \"HTTP_USER_AGENT\": \"Boto/2.0 (linux2)\", \"SERVER_NAME\": \"10.55.55.8\", \"REMOTE_ADDR\": \"10.55.55.8\", \"wsgi.url_scheme\": \"http\", \"SERVER_PORT\": \"8773\", \"GATEWAY_INTERFACE\": \"CGI/1.1\", \"HTTP_ACCEPT_ENCODING\": \"identity\"}\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] UnknownError: An unknown error has occurred. Please try your request again.\n2011-09-18 13:49:20,663 INFO nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] 0.119684s 10.55.55.8 POST /services/Cloud/ CloudController:RunInstances 400 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/xml", 
    "tags": [
        "ec2"
    ], 
    "importance": "Medium", 
    "heat": 10, 
    "link": "https://bugs.launchpad.net/nova/+bug/853381", 
    "owner": "https://api.launchpad.net/1.0/~jdanjou", 
    "id": 853381, 
    "index": 2565, 
    "created": "2011-09-18 17:51:36.262150+00:00", 
    "title": "[EC2] Uncaught error when attempting to exceed quota", 
    "comments": [
        {
            "content": "10 instances started with the following quota:\nmetadata_items: 128\ninstances: 10\ninjected_file_content_bytes: 10240\ninjected_files: 5\nvolumes: 10\ngigabytes: 1000\ncores: 20\nram: 51200\nfloating_ips: 10\n\n\nThe 11th attempt returns:\n\nubuntu@marula:~$ euca-run-instances -k adam ami-00000012\nUnknownError: An unknown error has occurred. Please try your request again.\n\n2011-09-18 13:49:20,544 DEBUG nova.api [-] action: RunInstances from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:290\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: ImageId         val: ami-00000012 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: KeyName         val: adam from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: MaxCount                val: 1 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: MinCount                val: 1 from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,544 DEBUG nova.api [-] arg: InstanceType            val: m1.small from (pid=14233) __call__ /usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py:292\n2011-09-18 13:49:20,623 DEBUG nova [-] Using Kernel=17, Ramdisk=None from (pid=14233) _check_create_parameters /usr/lib/pymodules/python2.7/nova/compute/api.py:235\n2011-09-18 13:49:20,662 DEBUG nova.compute.api [-] Going to run 0 instances... from (pid=14233) create /usr/lib/pymodules/python2.7/nova/compute/api.py:541\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] Unexpected error raised: list index out of range\n(nova.api): TRACE: Traceback (most recent call last):\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/__init__.py\", line 398, in __call__\n(nova.api): TRACE:     result = api_request.invoke(context)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/apirequest.py\", line 78, in invoke\n(nova.api): TRACE:     result = method(context, **args)\n(nova.api): TRACE:   File \"/usr/lib/pymodules/python2.7/nova/api/ec2/cloud.py\", line 1368, in run_instances\n(nova.api): TRACE:     reservation_id=instances[0]['reservation_id'])\n(nova.api): TRACE: IndexError: list index out of range\n(nova.api): TRACE:\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] Environment: {\"CONTENT_TYPE\": \"application/x-www-form-urlencoded; charset=UTF-8\", \"SCRIPT_NAME\": \"/services/Cloud\", \"REQUEST_METHOD\": \"POST\", \"HTTP_HOST\": \"10.55.55.8:8773\", \"PATH_INFO\": \"/\", \"SERVER_PROTOCOL\": \"HTTP/1.0\", \"HTTP_USER_AGENT\": \"Boto/2.0 (linux2)\", \"SERVER_NAME\": \"10.55.55.8\", \"REMOTE_ADDR\": \"10.55.55.8\", \"wsgi.url_scheme\": \"http\", \"SERVER_PORT\": \"8773\", \"GATEWAY_INTERFACE\": \"CGI/1.1\", \"HTTP_ACCEPT_ENCODING\": \"identity\"}\n2011-09-18 13:49:20,662 ERROR nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] UnknownError: An unknown error has occurred. Please try your request again.\n2011-09-18 13:49:20,663 INFO nova.api [35d90850-2eba-4595-be99-276c72e082ee 58d5d9c9-cca0-4b1f-86f8-7703eaf3f42e novaporject] 0.119684s 10.55.55.8 POST /services/Cloud/ CloudController:RunInstances 400 [Boto/2.0 (linux2)] application/x-www-form-urlencoded text/xml", 
            "date_created": "2011-09-18 17:51:36.262150+00:00", 
            "author": "https://api.launchpad.net/1.0/~davewalker"
        }, 
        {
            "content": "Based on reading the code, it looks like this problem was fixed as a side effect of another commit.\n\ncommit 0fab78825ef06310926181f6f97d377058b56b97\nAuthor: Chris Behrens <email address hidden>\nDate:   Sat Sep 24 23:49:36 2011 +0000\n\n    compute_api create*() and schedulers refactoring\n", 
            "date_created": "2012-02-15 19:35:24.550718+00:00", 
            "author": "https://api.launchpad.net/1.0/~russellb"
        }, 
        {
            "content": "This problem is not fixed, I hit i again in Essex 4.", 
            "date_created": "2012-03-22 15:41:52.277868+00:00", 
            "author": "https://api.launchpad.net/1.0/~jdanjou"
        }, 
        {
            "content": "Fix proposed to branch: master\nReview: https://review.openstack.org/5686", 
            "date_created": "2012-03-22 15:45:39.460184+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/5686\nCommitted: http://github.com/openstack/nova/commit/9d328628dea9530de629f829faa569fd87e0ac90\nSubmitter: Jenkins\nBranch:    master\n\ncommit 9d328628dea9530de629f829faa569fd87e0ac90\nAuthor: Julien Danjou <email address hidden>\nDate:   Thu Mar 22 16:42:05 2012 +0100\n\n    Handle correctly QuotaError in EC2 API\n    \n    Without this patch, EC2 API returns UnknownError when quota is exceeded, see bug #853381\n    \n    This patch fixes that by handling the exception. Now euca-run-instances returns useful information:\n    \n    $ euca-run-instances --instance-count 10 --instance-type m1.8gb.2cpus.diskless ami-00000012\n    QuotaError: Quota exceeded: code=InstanceLimitExceeded\n    \n    Change-Id: I1f7b381b34d2f538b7cc2d9582a40fd8bf88fbc3\n    Signed-off-by: Julien Danjou <email address hidden>\n", 
            "date_created": "2012-03-22 17:23:19.342349+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Fix proposed to branch: milestone-proposed\nReview: https://review.openstack.org/5771", 
            "date_created": "2012-03-25 02:28:50.543284+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/5771\nCommitted: http://github.com/openstack/nova/commit/de15bebf0974024d664359dd8eb5194ee6f51440\nSubmitter: Jenkins\nBranch:    milestone-proposed\n\ncommit de15bebf0974024d664359dd8eb5194ee6f51440\nAuthor: Julien Danjou <email address hidden>\nDate:   Thu Mar 22 16:42:05 2012 +0100\n\n    Handle correctly QuotaError in EC2 API\n    \n    Without this patch, EC2 API returns UnknownError when quota is exceeded, see bug #853381\n    \n    This patch fixes that by handling the exception. Now euca-run-instances returns useful information:\n    \n    $ euca-run-instances --instance-count 10 --instance-type m1.8gb.2cpus.diskless ami-00000012\n    QuotaError: Quota exceeded: code=InstanceLimitExceeded\n    \n    Change-Id: I1f7b381b34d2f538b7cc2d9582a40fd8bf88fbc3\n    Signed-off-by: Julien Danjou <email address hidden>\n", 
            "date_created": "2012-03-26 18:38:49.872566+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}