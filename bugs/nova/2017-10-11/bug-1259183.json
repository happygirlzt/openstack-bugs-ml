{
    "status": "Fix Released", 
    "last_updated": "2014-04-17 09:00:43.645435+00:00", 
    "description": "nova-api service will fail to start when the nova-api command is invoked from a directory containing a file with the same name as the one specified in the configuration key 'api_paste_config' if it is not an absolute path (the default is 'api-paste.ini').\n\n[fedora@devstack1 devstack]$ pwd\n/home/fedora/devstack\n\n[fedora@devstack1 devstack]$ grep api_paste_conf /etc/nova/nova.conf \napi_paste_config = api-paste.ini\n\n[fedora@devstack1 devstack]$ touch api-paste.ini\n\n[fedora@devstack1 devstack]$ nova-api\n2013-12-09 09:18:40.082 DEBUG nova.wsgi [-] Loading app ec2 from api-paste.ini from (pid=4817) load_app /opt/stack/nova/nova/wsgi.py:485\n2013-12-09 09:18:40.083 CRITICAL nova [-] Cannot resolve relative uri 'config:api-paste.ini'; no relative_to keyword argument given\n2013-12-09 09:18:40.083 TRACE nova Traceback (most recent call last):\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/bin/nova-api\", line 10, in <module>\n2013-12-09 09:18:40.083 TRACE nova     sys.exit(main())\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/cmd/api.py\", line 49, in main\n2013-12-09 09:18:40.083 TRACE nova     max_url_len=16384)\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/service.py\", line 308, in __init__\n2013-12-09 09:18:40.083 TRACE nova     self.app = self.loader.load_app(name)\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/wsgi.py\", line 486, in load_app\n2013-12-09 09:18:40.083 TRACE nova     return deploy.loadapp(\"config:%s\" % self.config_path, name=name)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 247, in loadapp\n2013-12-09 09:18:40.083 TRACE nova     return loadobj(APP, uri, name=name, **kw)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 271, in loadobj\n2013-12-09 09:18:40.083 TRACE nova     global_conf=global_conf)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 296, in loadcontext\n2013-12-09 09:18:40.083 TRACE nova     global_conf=global_conf)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 308, in _loadconfig\n2013-12-09 09:18:40.083 TRACE nova     \"argument given\" % uri)\n2013-12-09 09:18:40.083 TRACE nova ValueError: Cannot resolve relative uri 'config:api-paste.ini'; no relative_to keyword argument given\n2013-12-09 09:18:40.083 TRACE nova", 
    "tags": [], 
    "importance": "Low", 
    "heat": 6, 
    "link": "https://bugs.launchpad.net/nova/+bug/1259183", 
    "owner": "None", 
    "id": 1259183, 
    "index": 5988, 
    "created": "2013-12-09 14:20:03.737719+00:00", 
    "title": "wsgi.Loader should ensure the config_path is absolute", 
    "comments": [
        {
            "content": "nova-api service will fail to start when the nova-api command is invoked from a directory containing a file with the same name as the one specified in the configuration key 'api_paste_config' if it is not an absolute path (the default is 'api-paste.ini').\n\n[fedora@devstack1 devstack]$ pwd\n/home/fedora/devstack\n\n[fedora@devstack1 devstack]$ grep api_paste_conf /etc/nova/nova.conf \napi_paste_config = api-paste.ini\n\n[fedora@devstack1 devstack]$ touch api-paste.ini\n\n[fedora@devstack1 devstack]$ nova-api\n2013-12-09 09:18:40.082 DEBUG nova.wsgi [-] Loading app ec2 from api-paste.ini from (pid=4817) load_app /opt/stack/nova/nova/wsgi.py:485\n2013-12-09 09:18:40.083 CRITICAL nova [-] Cannot resolve relative uri 'config:api-paste.ini'; no relative_to keyword argument given\n2013-12-09 09:18:40.083 TRACE nova Traceback (most recent call last):\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/bin/nova-api\", line 10, in <module>\n2013-12-09 09:18:40.083 TRACE nova     sys.exit(main())\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/cmd/api.py\", line 49, in main\n2013-12-09 09:18:40.083 TRACE nova     max_url_len=16384)\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/service.py\", line 308, in __init__\n2013-12-09 09:18:40.083 TRACE nova     self.app = self.loader.load_app(name)\n2013-12-09 09:18:40.083 TRACE nova   File \"/opt/stack/nova/nova/wsgi.py\", line 486, in load_app\n2013-12-09 09:18:40.083 TRACE nova     return deploy.loadapp(\"config:%s\" % self.config_path, name=name)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 247, in loadapp\n2013-12-09 09:18:40.083 TRACE nova     return loadobj(APP, uri, name=name, **kw)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 271, in loadobj\n2013-12-09 09:18:40.083 TRACE nova     global_conf=global_conf)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 296, in loadcontext\n2013-12-09 09:18:40.083 TRACE nova     global_conf=global_conf)\n2013-12-09 09:18:40.083 TRACE nova   File \"/usr/lib/python2.7/site-packages/paste/deploy/loadwsgi.py\", line 308, in _loadconfig\n2013-12-09 09:18:40.083 TRACE nova     \"argument given\" % uri)\n2013-12-09 09:18:40.083 TRACE nova ValueError: Cannot resolve relative uri 'config:api-paste.ini'; no relative_to keyword argument given\n2013-12-09 09:18:40.083 TRACE nova", 
            "date_created": "2013-12-09 14:20:03.737719+00:00", 
            "author": "https://api.launchpad.net/1.0/~xqueralt-deactivatedaccount"
        }, 
        {
            "content": "Fix proposed to branch: master\nhttps://review.openstack.org/#/c/60838/", 
            "date_created": "2013-12-09 16:35:01.496700+00:00", 
            "author": "https://api.launchpad.net/1.0/~xqueralt-deactivatedaccount"
        }, 
        {
            "content": "Reviewed:  https://review.openstack.org/60838\nCommitted: http://github.com/openstack/nova/commit/6037b9cc20a8ab379855370394e108912ea3a0f2\nSubmitter: Jenkins\nBranch:    master\n\ncommit 6037b9cc20a8ab379855370394e108912ea3a0f2\nAuthor: Xavier Queralt <email address hidden>\nDate:   Mon Dec 9 15:21:01 2013 +0100\n\n    Ensure api_paste_conf is an absolute path\n    \n    If api_paste_conf is specified as a relative path and the directory from\n    where the nova-api service is started contains a file with the same\n    name, the wsgi loader won't try to find the absolute path to that file\n    which is required when not passing the base directory to the\n    paste.deploy library.\n    \n    This change ensures the config_path is an absolute path so it can be\n    found by the paste.deploy library.\n    \n    Closes-Bug: #1259183\n    Change-Id: I0eb6ef1d69d302634b8c842449f997ec10c13933\n", 
            "date_created": "2013-12-11 22:58:27.415704+00:00", 
            "author": "https://api.launchpad.net/1.0/~hudson-openstack"
        }
    ]
}